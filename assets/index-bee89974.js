var LN=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Rge=LN((gs,vs)=>{function PN(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const n in i)if(n!=="default"&&!(n in e)){const s=Object.getOwnPropertyDescriptor(i,n);s&&Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:()=>i[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();function DN(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var GL={exports:{}},J3={},HL={exports:{}},Ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xm=Symbol.for("react.element"),ON=Symbol.for("react.portal"),IN=Symbol.for("react.fragment"),RN=Symbol.for("react.strict_mode"),BN=Symbol.for("react.profiler"),zN=Symbol.for("react.provider"),kN=Symbol.for("react.context"),NN=Symbol.for("react.forward_ref"),FN=Symbol.for("react.suspense"),UN=Symbol.for("react.memo"),jN=Symbol.for("react.lazy"),u_=Symbol.iterator;function VN(e){return e===null||typeof e!="object"?null:(e=u_&&e[u_]||e["@@iterator"],typeof e=="function"?e:null)}var WL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qL=Object.assign,XL={};function nf(e,t,r){this.props=e,this.context=t,this.refs=XL,this.updater=r||WL}nf.prototype.isReactComponent={};nf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};nf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function YL(){}YL.prototype=nf.prototype;function e9(e,t,r){this.props=e,this.context=t,this.refs=XL,this.updater=r||WL}var t9=e9.prototype=new YL;t9.constructor=e9;qL(t9,nf.prototype);t9.isPureReactComponent=!0;var c_=Array.isArray,QL=Object.prototype.hasOwnProperty,r9={current:null},ZL={key:!0,ref:!0,__self:!0,__source:!0};function KL(e,t,r){var i,n={},s=null,a=null;if(t!=null)for(i in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)QL.call(t,i)&&!ZL.hasOwnProperty(i)&&(n[i]=t[i]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var l=Array(o),h=0;h<o;h++)l[h]=arguments[h+2];n.children=l}if(e&&e.defaultProps)for(i in o=e.defaultProps,o)n[i]===void 0&&(n[i]=o[i]);return{$$typeof:xm,type:e,key:s,ref:a,props:n,_owner:r9.current}}function GN(e,t){return{$$typeof:xm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function i9(e){return typeof e=="object"&&e!==null&&e.$$typeof===xm}function HN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var d_=/\/+/g;function Qy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?HN(""+e.key):t.toString(36)}function Bv(e,t,r,i,n){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case xm:case ON:a=!0}}if(a)return a=e,n=n(a),e=i===""?"."+Qy(a,0):i,c_(n)?(r="",e!=null&&(r=e.replace(d_,"$&/")+"/"),Bv(n,t,r,"",function(h){return h})):n!=null&&(i9(n)&&(n=GN(n,r+(!n.key||a&&a.key===n.key?"":(""+n.key).replace(d_,"$&/")+"/")+e)),t.push(n)),1;if(a=0,i=i===""?".":i+":",c_(e))for(var o=0;o<e.length;o++){s=e[o];var l=i+Qy(s,o);a+=Bv(s,t,r,l,n)}else if(l=VN(e),typeof l=="function")for(e=l.call(e),o=0;!(s=e.next()).done;)s=s.value,l=i+Qy(s,o++),a+=Bv(s,t,r,l,n);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Um(e,t,r){if(e==null)return e;var i=[],n=0;return Bv(e,i,"","",function(s){return t.call(r,s,n++)}),i}function WN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Sn={current:null},zv={transition:null},qN={ReactCurrentDispatcher:Sn,ReactCurrentBatchConfig:zv,ReactCurrentOwner:r9};Ft.Children={map:Um,forEach:function(e,t,r){Um(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Um(e,function(){t++}),t},toArray:function(e){return Um(e,function(t){return t})||[]},only:function(e){if(!i9(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ft.Component=nf;Ft.Fragment=IN;Ft.Profiler=BN;Ft.PureComponent=e9;Ft.StrictMode=RN;Ft.Suspense=FN;Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qN;Ft.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=qL({},e.props),n=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=r9.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in t)QL.call(t,l)&&!ZL.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&o!==void 0?o[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){o=Array(l);for(var h=0;h<l;h++)o[h]=arguments[h+2];i.children=o}return{$$typeof:xm,type:e.type,key:n,ref:s,props:i,_owner:a}};Ft.createContext=function(e){return e={$$typeof:kN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:zN,_context:e},e.Consumer=e};Ft.createElement=KL;Ft.createFactory=function(e){var t=KL.bind(null,e);return t.type=e,t};Ft.createRef=function(){return{current:null}};Ft.forwardRef=function(e){return{$$typeof:NN,render:e}};Ft.isValidElement=i9;Ft.lazy=function(e){return{$$typeof:jN,_payload:{_status:-1,_result:e},_init:WN}};Ft.memo=function(e,t){return{$$typeof:UN,type:e,compare:t===void 0?null:t}};Ft.startTransition=function(e){var t=zv.transition;zv.transition={};try{e()}finally{zv.transition=t}};Ft.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ft.useCallback=function(e,t){return Sn.current.useCallback(e,t)};Ft.useContext=function(e){return Sn.current.useContext(e)};Ft.useDebugValue=function(){};Ft.useDeferredValue=function(e){return Sn.current.useDeferredValue(e)};Ft.useEffect=function(e,t){return Sn.current.useEffect(e,t)};Ft.useId=function(){return Sn.current.useId()};Ft.useImperativeHandle=function(e,t,r){return Sn.current.useImperativeHandle(e,t,r)};Ft.useInsertionEffect=function(e,t){return Sn.current.useInsertionEffect(e,t)};Ft.useLayoutEffect=function(e,t){return Sn.current.useLayoutEffect(e,t)};Ft.useMemo=function(e,t){return Sn.current.useMemo(e,t)};Ft.useReducer=function(e,t,r){return Sn.current.useReducer(e,t,r)};Ft.useRef=function(e){return Sn.current.useRef(e)};Ft.useState=function(e){return Sn.current.useState(e)};Ft.useSyncExternalStore=function(e,t,r){return Sn.current.useSyncExternalStore(e,t,r)};Ft.useTransition=function(){return Sn.current.useTransition()};Ft.version="18.2.0";HL.exports=Ft;var be=HL.exports;const vo=DN(be),XN=PN({__proto__:null,default:vo},[be]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YN=be,QN=Symbol.for("react.element"),ZN=Symbol.for("react.fragment"),KN=Object.prototype.hasOwnProperty,$N=YN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JN={key:!0,ref:!0,__self:!0,__source:!0};function $L(e,t,r){var i,n={},s=null,a=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(i in t)KN.call(t,i)&&!JN.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:QN,type:e,key:s,ref:a,props:n,_owner:$N.current}}J3.Fragment=ZN;J3.jsx=$L;J3.jsxs=$L;GL.exports=J3;var R=GL.exports,zx={},JL={exports:{}},Ss={},eP={exports:{}},tP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,W){var P=I.length;I.push(W);e:for(;0<P;){var V=P-1>>>1,G=I[V];if(0<n(G,W))I[V]=W,I[P]=G,P=V;else break e}}function r(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var W=I[0],P=I.pop();if(P!==W){I[0]=P;e:for(var V=0,G=I.length,Q=G>>>1;V<Q;){var U=2*(V+1)-1,Y=I[U],H=U+1,ie=I[H];if(0>n(Y,P))H<G&&0>n(ie,Y)?(I[V]=ie,I[H]=P,V=H):(I[V]=Y,I[U]=P,V=U);else if(H<G&&0>n(ie,P))I[V]=ie,I[H]=P,V=H;else break e}}return W}function n(I,W){var P=I.sortIndex-W.sortIndex;return P!==0?P:I.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],h=[],c=1,u=null,d=3,p=!1,f=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(I){for(var W=r(h);W!==null;){if(W.callback===null)i(h);else if(W.startTime<=I)i(h),W.sortIndex=W.expirationTime,t(l,W);else break;W=r(h)}}function w(I){if(m=!1,x(I),!f)if(r(l)!==null)f=!0,q(_);else{var W=r(h);W!==null&&N(w,W.startTime-I)}}function _(I,W){f=!1,m&&(m=!1,v(C),C=-1),p=!0;var P=d;try{for(x(W),u=r(l);u!==null&&(!(u.expirationTime>W)||I&&!T());){var V=u.callback;if(typeof V=="function"){u.callback=null,d=u.priorityLevel;var G=V(u.expirationTime<=W);W=e.unstable_now(),typeof G=="function"?u.callback=G:u===r(l)&&i(l),x(W)}else i(l);u=r(l)}if(u!==null)var Q=!0;else{var U=r(h);U!==null&&N(w,U.startTime-W),Q=!1}return Q}finally{u=null,d=P,p=!1}}var b=!1,S=null,C=-1,M=5,A=-1;function T(){return!(e.unstable_now()-A<M)}function L(){if(S!==null){var I=e.unstable_now();A=I;var W=!0;try{W=S(!0,I)}finally{W?D():(b=!1,S=null)}}else b=!1}var D;if(typeof y=="function")D=function(){y(L)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,z=O.port2;O.port1.onmessage=L,D=function(){z.postMessage(null)}}else D=function(){g(L,0)};function q(I){S=I,b||(b=!0,D())}function N(I,W){C=g(function(){I(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){f||p||(f=!0,q(_))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(I){switch(d){case 1:case 2:case 3:var W=3;break;default:W=d}var P=d;d=W;try{return I()}finally{d=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,W){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var P=d;d=I;try{return W()}finally{d=P}},e.unstable_scheduleCallback=function(I,W,P){var V=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?V+P:V):P=V,I){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=P+G,I={id:c++,callback:W,priorityLevel:I,startTime:P,expirationTime:G,sortIndex:-1},P>V?(I.sortIndex=P,t(h,I),r(l)===null&&I===r(h)&&(m?(v(C),C=-1):m=!0,N(w,P-V))):(I.sortIndex=G,t(l,I),f||p||(f=!0,q(_))),I},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(I){var W=d;return function(){var P=d;d=W;try{return I.apply(this,arguments)}finally{d=P}}}})(tP);eP.exports=tP;var eF=eP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rP=be,ws=eF;function Pe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var iP=new Set,A0={};function bc(e,t){Ep(e,t),Ep(e+"Capture",t)}function Ep(e,t){for(A0[e]=t,e=0;e<t.length;e++)iP.add(t[e])}var Sl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kx=Object.prototype.hasOwnProperty,tF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p_={},f_={};function rF(e){return kx.call(f_,e)?!0:kx.call(p_,e)?!1:tF.test(e)?f_[e]=!0:(p_[e]=!0,!1)}function iF(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function nF(e,t,r,i){if(t===null||typeof t>"u"||iF(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Mn(e,t,r,i,n,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var ki={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ki[e]=new Mn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ki[t]=new Mn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ki[e]=new Mn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ki[e]=new Mn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ki[e]=new Mn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ki[e]=new Mn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ki[e]=new Mn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ki[e]=new Mn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ki[e]=new Mn(e,5,!1,e.toLowerCase(),null,!1,!1)});var n9=/[\-:]([a-z])/g;function s9(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(n9,s9);ki[t]=new Mn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(n9,s9);ki[t]=new Mn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(n9,s9);ki[t]=new Mn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ki[e]=new Mn(e,1,!1,e.toLowerCase(),null,!1,!1)});ki.xlinkHref=new Mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ki[e]=new Mn(e,1,!1,e.toLowerCase(),null,!0,!0)});function a9(e,t,r,i){var n=ki.hasOwnProperty(t)?ki[t]:null;(n!==null?n.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(nF(t,r,n,i)&&(r=null),i||n===null?rF(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,i=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var Il=rP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jm=Symbol.for("react.element"),_d=Symbol.for("react.portal"),Cd=Symbol.for("react.fragment"),o9=Symbol.for("react.strict_mode"),Nx=Symbol.for("react.profiler"),nP=Symbol.for("react.provider"),sP=Symbol.for("react.context"),l9=Symbol.for("react.forward_ref"),Fx=Symbol.for("react.suspense"),Ux=Symbol.for("react.suspense_list"),h9=Symbol.for("react.memo"),eh=Symbol.for("react.lazy"),aP=Symbol.for("react.offscreen"),m_=Symbol.iterator;function Ef(e){return e===null||typeof e!="object"?null:(e=m_&&e[m_]||e["@@iterator"],typeof e=="function"?e:null)}var Er=Object.assign,Zy;function w1(e){if(Zy===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Zy=t&&t[1]||""}return`
`+Zy+e}var Ky=!1;function $y(e,t){if(!e||Ky)return"";Ky=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var i=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){i=h}e.call(t.prototype)}else{try{throw Error()}catch(h){i=h}e()}}catch(h){if(h&&i&&typeof h.stack=="string"){for(var n=h.stack.split(`
`),s=i.stack.split(`
`),a=n.length-1,o=s.length-1;1<=a&&0<=o&&n[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(n[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||n[a]!==s[o]){var l=`
`+n[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=o);break}}}finally{Ky=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?w1(e):""}function sF(e){switch(e.tag){case 5:return w1(e.type);case 16:return w1("Lazy");case 13:return w1("Suspense");case 19:return w1("SuspenseList");case 0:case 2:case 15:return e=$y(e.type,!1),e;case 11:return e=$y(e.type.render,!1),e;case 1:return e=$y(e.type,!0),e;default:return""}}function jx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Cd:return"Fragment";case _d:return"Portal";case Nx:return"Profiler";case o9:return"StrictMode";case Fx:return"Suspense";case Ux:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case sP:return(e.displayName||"Context")+".Consumer";case nP:return(e._context.displayName||"Context")+".Provider";case l9:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case h9:return t=e.displayName||null,t!==null?t:jx(e.type)||"Memo";case eh:t=e._payload,e=e._init;try{return jx(e(t))}catch{}}return null}function aF(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jx(t);case 8:return t===o9?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function jh(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function oP(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function oF(e){var t=oP(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Vm(e){e._valueTracker||(e._valueTracker=oF(e))}function lP(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=oP(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function g2(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Vx(e,t){var r=t.checked;return Er({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function g_(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=jh(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function hP(e,t){t=t.checked,t!=null&&a9(e,"checked",t,!1)}function Gx(e,t){hP(e,t);var r=jh(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Hx(e,t.type,r):t.hasOwnProperty("defaultValue")&&Hx(e,t.type,jh(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function v_(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Hx(e,t,r){(t!=="number"||g2(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var b1=Array.isArray;function Qd(e,t,r,i){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&i&&(e[r].defaultSelected=!0)}else{for(r=""+jh(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,i&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Wx(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Pe(91));return Er({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function y_(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Pe(92));if(b1(r)){if(1<r.length)throw Error(Pe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:jh(r)}}function uP(e,t){var r=jh(t.value),i=jh(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function x_(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function cP(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qx(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?cP(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Gm,dP=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Gm=Gm||document.createElement("div"),Gm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Gm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function E0(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var j1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lF=["Webkit","ms","Moz","O"];Object.keys(j1).forEach(function(e){lF.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),j1[t]=j1[e]})});function pP(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||j1.hasOwnProperty(e)&&j1[e]?(""+t).trim():t+"px"}function fP(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,n=pP(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,n):e[r]=n}}var hF=Er({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xx(e,t){if(t){if(hF[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Pe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Pe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Pe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Pe(62))}}function Yx(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qx=null;function u9(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Zx=null,Zd=null,Kd=null;function w_(e){if(e=_m(e)){if(typeof Zx!="function")throw Error(Pe(280));var t=e.stateNode;t&&(t=ny(t),Zx(e.stateNode,e.type,t))}}function mP(e){Zd?Kd?Kd.push(e):Kd=[e]:Zd=e}function gP(){if(Zd){var e=Zd,t=Kd;if(Kd=Zd=null,w_(e),t)for(e=0;e<t.length;e++)w_(t[e])}}function vP(e,t){return e(t)}function yP(){}var Jy=!1;function xP(e,t,r){if(Jy)return e(t,r);Jy=!0;try{return vP(e,t,r)}finally{Jy=!1,(Zd!==null||Kd!==null)&&(yP(),gP())}}function T0(e,t){var r=e.stateNode;if(r===null)return null;var i=ny(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Pe(231,t,typeof r));return r}var Kx=!1;if(Sl)try{var Tf={};Object.defineProperty(Tf,"passive",{get:function(){Kx=!0}}),window.addEventListener("test",Tf,Tf),window.removeEventListener("test",Tf,Tf)}catch{Kx=!1}function uF(e,t,r,i,n,s,a,o,l){var h=Array.prototype.slice.call(arguments,3);try{t.apply(r,h)}catch(c){this.onError(c)}}var V1=!1,v2=null,y2=!1,$x=null,cF={onError:function(e){V1=!0,v2=e}};function dF(e,t,r,i,n,s,a,o,l){V1=!1,v2=null,uF.apply(cF,arguments)}function pF(e,t,r,i,n,s,a,o,l){if(dF.apply(this,arguments),V1){if(V1){var h=v2;V1=!1,v2=null}else throw Error(Pe(198));y2||(y2=!0,$x=h)}}function _c(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function wP(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function b_(e){if(_c(e)!==e)throw Error(Pe(188))}function fF(e){var t=e.alternate;if(!t){if(t=_c(e),t===null)throw Error(Pe(188));return t!==e?null:e}for(var r=e,i=t;;){var n=r.return;if(n===null)break;var s=n.alternate;if(s===null){if(i=n.return,i!==null){r=i;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===r)return b_(n),e;if(s===i)return b_(n),t;s=s.sibling}throw Error(Pe(188))}if(r.return!==i.return)r=n,i=s;else{for(var a=!1,o=n.child;o;){if(o===r){a=!0,r=n,i=s;break}if(o===i){a=!0,i=n,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,i=n;break}if(o===i){a=!0,i=s,r=n;break}o=o.sibling}if(!a)throw Error(Pe(189))}}if(r.alternate!==i)throw Error(Pe(190))}if(r.tag!==3)throw Error(Pe(188));return r.stateNode.current===r?e:t}function bP(e){return e=fF(e),e!==null?_P(e):null}function _P(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=_P(e);if(t!==null)return t;e=e.sibling}return null}var CP=ws.unstable_scheduleCallback,__=ws.unstable_cancelCallback,mF=ws.unstable_shouldYield,gF=ws.unstable_requestPaint,Vr=ws.unstable_now,vF=ws.unstable_getCurrentPriorityLevel,c9=ws.unstable_ImmediatePriority,SP=ws.unstable_UserBlockingPriority,x2=ws.unstable_NormalPriority,yF=ws.unstable_LowPriority,MP=ws.unstable_IdlePriority,ey=null,yo=null;function xF(e){if(yo&&typeof yo.onCommitFiberRoot=="function")try{yo.onCommitFiberRoot(ey,e,void 0,(e.current.flags&128)===128)}catch{}}var Da=Math.clz32?Math.clz32:_F,wF=Math.log,bF=Math.LN2;function _F(e){return e>>>=0,e===0?32:31-(wF(e)/bF|0)|0}var Hm=64,Wm=4194304;function _1(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function w2(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,n=e.suspendedLanes,s=e.pingedLanes,a=r&268435455;if(a!==0){var o=a&~n;o!==0?i=_1(o):(s&=a,s!==0&&(i=_1(s)))}else a=r&~n,a!==0?i=_1(a):s!==0&&(i=_1(s));if(i===0)return 0;if(t!==0&&t!==i&&!(t&n)&&(n=i&-i,s=t&-t,n>=s||n===16&&(s&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-Da(t),n=1<<r,i|=e[r],t&=~n;return i}function CF(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SF(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,n=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-Da(s),o=1<<a,l=n[a];l===-1?(!(o&r)||o&i)&&(n[a]=CF(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}function Jx(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function AP(){var e=Hm;return Hm<<=1,!(Hm&4194240)&&(Hm=64),e}function e4(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function wm(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Da(t),e[t]=r}function MF(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-Da(r),s=1<<n;t[n]=0,i[n]=-1,e[n]=-1,r&=~s}}function d9(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-Da(r),n=1<<i;n&t|e[i]&t&&(e[i]|=t),r&=~n}}var rr=0;function EP(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var TP,p9,LP,PP,DP,e6=!1,qm=[],Ch=null,Sh=null,Mh=null,L0=new Map,P0=new Map,ih=[],AF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function C_(e,t){switch(e){case"focusin":case"focusout":Ch=null;break;case"dragenter":case"dragleave":Sh=null;break;case"mouseover":case"mouseout":Mh=null;break;case"pointerover":case"pointerout":L0.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":P0.delete(t.pointerId)}}function Lf(e,t,r,i,n,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:s,targetContainers:[n]},t!==null&&(t=_m(t),t!==null&&p9(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function EF(e,t,r,i,n){switch(t){case"focusin":return Ch=Lf(Ch,e,t,r,i,n),!0;case"dragenter":return Sh=Lf(Sh,e,t,r,i,n),!0;case"mouseover":return Mh=Lf(Mh,e,t,r,i,n),!0;case"pointerover":var s=n.pointerId;return L0.set(s,Lf(L0.get(s)||null,e,t,r,i,n)),!0;case"gotpointercapture":return s=n.pointerId,P0.set(s,Lf(P0.get(s)||null,e,t,r,i,n)),!0}return!1}function OP(e){var t=Lu(e.target);if(t!==null){var r=_c(t);if(r!==null){if(t=r.tag,t===13){if(t=wP(r),t!==null){e.blockedOn=t,DP(e.priority,function(){LP(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function kv(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=t6(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);Qx=i,r.target.dispatchEvent(i),Qx=null}else return t=_m(r),t!==null&&p9(t),e.blockedOn=r,!1;t.shift()}return!0}function S_(e,t,r){kv(e)&&r.delete(t)}function TF(){e6=!1,Ch!==null&&kv(Ch)&&(Ch=null),Sh!==null&&kv(Sh)&&(Sh=null),Mh!==null&&kv(Mh)&&(Mh=null),L0.forEach(S_),P0.forEach(S_)}function Pf(e,t){e.blockedOn===t&&(e.blockedOn=null,e6||(e6=!0,ws.unstable_scheduleCallback(ws.unstable_NormalPriority,TF)))}function D0(e){function t(n){return Pf(n,e)}if(0<qm.length){Pf(qm[0],e);for(var r=1;r<qm.length;r++){var i=qm[r];i.blockedOn===e&&(i.blockedOn=null)}}for(Ch!==null&&Pf(Ch,e),Sh!==null&&Pf(Sh,e),Mh!==null&&Pf(Mh,e),L0.forEach(t),P0.forEach(t),r=0;r<ih.length;r++)i=ih[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<ih.length&&(r=ih[0],r.blockedOn===null);)OP(r),r.blockedOn===null&&ih.shift()}var $d=Il.ReactCurrentBatchConfig,b2=!0;function LF(e,t,r,i){var n=rr,s=$d.transition;$d.transition=null;try{rr=1,f9(e,t,r,i)}finally{rr=n,$d.transition=s}}function PF(e,t,r,i){var n=rr,s=$d.transition;$d.transition=null;try{rr=4,f9(e,t,r,i)}finally{rr=n,$d.transition=s}}function f9(e,t,r,i){if(b2){var n=t6(e,t,r,i);if(n===null)u4(e,t,i,_2,r),C_(e,i);else if(EF(n,e,t,r,i))i.stopPropagation();else if(C_(e,i),t&4&&-1<AF.indexOf(e)){for(;n!==null;){var s=_m(n);if(s!==null&&TP(s),s=t6(e,t,r,i),s===null&&u4(e,t,i,_2,r),s===n)break;n=s}n!==null&&i.stopPropagation()}else u4(e,t,i,null,r)}}var _2=null;function t6(e,t,r,i){if(_2=null,e=u9(i),e=Lu(e),e!==null)if(t=_c(e),t===null)e=null;else if(r=t.tag,r===13){if(e=wP(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _2=e,null}function IP(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vF()){case c9:return 1;case SP:return 4;case x2:case yF:return 16;case MP:return 536870912;default:return 16}default:return 16}}var lh=null,m9=null,Nv=null;function RP(){if(Nv)return Nv;var e,t=m9,r=t.length,i,n="value"in lh?lh.value:lh.textContent,s=n.length;for(e=0;e<r&&t[e]===n[e];e++);var a=r-e;for(i=1;i<=a&&t[r-i]===n[s-i];i++);return Nv=n.slice(e,1<i?1-i:void 0)}function Fv(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xm(){return!0}function M_(){return!1}function Ms(e){function t(r,i,n,s,a){this._reactName=r,this._targetInst=n,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Xm:M_,this.isPropagationStopped=M_,this}return Er(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Xm)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Xm)},persist:function(){},isPersistent:Xm}),t}var sf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},g9=Ms(sf),bm=Er({},sf,{view:0,detail:0}),DF=Ms(bm),t4,r4,Df,ty=Er({},bm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:v9,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Df&&(Df&&e.type==="mousemove"?(t4=e.screenX-Df.screenX,r4=e.screenY-Df.screenY):r4=t4=0,Df=e),t4)},movementY:function(e){return"movementY"in e?e.movementY:r4}}),A_=Ms(ty),OF=Er({},ty,{dataTransfer:0}),IF=Ms(OF),RF=Er({},bm,{relatedTarget:0}),i4=Ms(RF),BF=Er({},sf,{animationName:0,elapsedTime:0,pseudoElement:0}),zF=Ms(BF),kF=Er({},sf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),NF=Ms(kF),FF=Er({},sf,{data:0}),E_=Ms(FF),UF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GF(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=VF[e])?!!t[e]:!1}function v9(){return GF}var HF=Er({},bm,{key:function(e){if(e.key){var t=UF[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Fv(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?jF[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:v9,charCode:function(e){return e.type==="keypress"?Fv(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fv(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),WF=Ms(HF),qF=Er({},ty,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T_=Ms(qF),XF=Er({},bm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:v9}),YF=Ms(XF),QF=Er({},sf,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZF=Ms(QF),KF=Er({},ty,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$F=Ms(KF),JF=[9,13,27,32],y9=Sl&&"CompositionEvent"in window,G1=null;Sl&&"documentMode"in document&&(G1=document.documentMode);var eU=Sl&&"TextEvent"in window&&!G1,BP=Sl&&(!y9||G1&&8<G1&&11>=G1),L_=String.fromCharCode(32),P_=!1;function zP(e,t){switch(e){case"keyup":return JF.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kP(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Sd=!1;function tU(e,t){switch(e){case"compositionend":return kP(t);case"keypress":return t.which!==32?null:(P_=!0,L_);case"textInput":return e=t.data,e===L_&&P_?null:e;default:return null}}function rU(e,t){if(Sd)return e==="compositionend"||!y9&&zP(e,t)?(e=RP(),Nv=m9=lh=null,Sd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return BP&&t.locale!=="ko"?null:t.data;default:return null}}var iU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function D_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!iU[e.type]:t==="textarea"}function NP(e,t,r,i){mP(i),t=C2(t,"onChange"),0<t.length&&(r=new g9("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var H1=null,O0=null;function nU(e){QP(e,0)}function ry(e){var t=Ed(e);if(lP(t))return e}function sU(e,t){if(e==="change")return t}var FP=!1;if(Sl){var n4;if(Sl){var s4="oninput"in document;if(!s4){var O_=document.createElement("div");O_.setAttribute("oninput","return;"),s4=typeof O_.oninput=="function"}n4=s4}else n4=!1;FP=n4&&(!document.documentMode||9<document.documentMode)}function I_(){H1&&(H1.detachEvent("onpropertychange",UP),O0=H1=null)}function UP(e){if(e.propertyName==="value"&&ry(O0)){var t=[];NP(t,O0,e,u9(e)),xP(nU,t)}}function aU(e,t,r){e==="focusin"?(I_(),H1=t,O0=r,H1.attachEvent("onpropertychange",UP)):e==="focusout"&&I_()}function oU(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ry(O0)}function lU(e,t){if(e==="click")return ry(t)}function hU(e,t){if(e==="input"||e==="change")return ry(t)}function uU(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ba=typeof Object.is=="function"?Object.is:uU;function I0(e,t){if(Ba(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var n=r[i];if(!kx.call(t,n)||!Ba(e[n],t[n]))return!1}return!0}function R_(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function B_(e,t){var r=R_(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=R_(r)}}function jP(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?jP(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function VP(){for(var e=window,t=g2();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=g2(e.document)}return t}function x9(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function cU(e){var t=VP(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&jP(r.ownerDocument.documentElement,r)){if(i!==null&&x9(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,s=Math.min(i.start,n);i=i.end===void 0?s:Math.min(i.end,n),!e.extend&&s>i&&(n=i,i=s,s=n),n=B_(r,s);var a=B_(r,i);n&&a&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dU=Sl&&"documentMode"in document&&11>=document.documentMode,Md=null,r6=null,W1=null,i6=!1;function z_(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;i6||Md==null||Md!==g2(i)||(i=Md,"selectionStart"in i&&x9(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),W1&&I0(W1,i)||(W1=i,i=C2(r6,"onSelect"),0<i.length&&(t=new g9("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=Md)))}function Ym(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ad={animationend:Ym("Animation","AnimationEnd"),animationiteration:Ym("Animation","AnimationIteration"),animationstart:Ym("Animation","AnimationStart"),transitionend:Ym("Transition","TransitionEnd")},a4={},GP={};Sl&&(GP=document.createElement("div").style,"AnimationEvent"in window||(delete Ad.animationend.animation,delete Ad.animationiteration.animation,delete Ad.animationstart.animation),"TransitionEvent"in window||delete Ad.transitionend.transition);function iy(e){if(a4[e])return a4[e];if(!Ad[e])return e;var t=Ad[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in GP)return a4[e]=t[r];return e}var HP=iy("animationend"),WP=iy("animationiteration"),qP=iy("animationstart"),XP=iy("transitionend"),YP=new Map,k_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qh(e,t){YP.set(e,t),bc(t,[e])}for(var o4=0;o4<k_.length;o4++){var l4=k_[o4],pU=l4.toLowerCase(),fU=l4[0].toUpperCase()+l4.slice(1);Qh(pU,"on"+fU)}Qh(HP,"onAnimationEnd");Qh(WP,"onAnimationIteration");Qh(qP,"onAnimationStart");Qh("dblclick","onDoubleClick");Qh("focusin","onFocus");Qh("focusout","onBlur");Qh(XP,"onTransitionEnd");Ep("onMouseEnter",["mouseout","mouseover"]);Ep("onMouseLeave",["mouseout","mouseover"]);Ep("onPointerEnter",["pointerout","pointerover"]);Ep("onPointerLeave",["pointerout","pointerover"]);bc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bc("onBeforeInput",["compositionend","keypress","textInput","paste"]);bc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var C1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mU=new Set("cancel close invalid load scroll toggle".split(" ").concat(C1));function N_(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,pF(i,t,void 0,e),e.currentTarget=null}function QP(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],n=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,h=o.currentTarget;if(o=o.listener,l!==s&&n.isPropagationStopped())break e;N_(n,o,h),s=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,h=o.currentTarget,o=o.listener,l!==s&&n.isPropagationStopped())break e;N_(n,o,h),s=l}}}if(y2)throw e=$x,y2=!1,$x=null,e}function mr(e,t){var r=t[l6];r===void 0&&(r=t[l6]=new Set);var i=e+"__bubble";r.has(i)||(ZP(t,e,2,!1),r.add(i))}function h4(e,t,r){var i=0;t&&(i|=4),ZP(r,e,i,t)}var Qm="_reactListening"+Math.random().toString(36).slice(2);function R0(e){if(!e[Qm]){e[Qm]=!0,iP.forEach(function(r){r!=="selectionchange"&&(mU.has(r)||h4(r,!1,e),h4(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Qm]||(t[Qm]=!0,h4("selectionchange",!1,t))}}function ZP(e,t,r,i){switch(IP(t)){case 1:var n=LF;break;case 4:n=PF;break;default:n=f9}r=n.bind(null,t,r,e),n=void 0,!Kx||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),i?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function u4(e,t,r,i,n){var s=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===n||l.nodeType===8&&l.parentNode===n))return;a=a.return}for(;o!==null;){if(a=Lu(o),a===null)return;if(l=a.tag,l===5||l===6){i=s=a;continue e}o=o.parentNode}}i=i.return}xP(function(){var h=s,c=u9(r),u=[];e:{var d=YP.get(e);if(d!==void 0){var p=g9,f=e;switch(e){case"keypress":if(Fv(r)===0)break e;case"keydown":case"keyup":p=WF;break;case"focusin":f="focus",p=i4;break;case"focusout":f="blur",p=i4;break;case"beforeblur":case"afterblur":p=i4;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=A_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=IF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=YF;break;case HP:case WP:case qP:p=zF;break;case XP:p=ZF;break;case"scroll":p=DF;break;case"wheel":p=$F;break;case"copy":case"cut":case"paste":p=NF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=T_}var m=(t&4)!==0,g=!m&&e==="scroll",v=m?d!==null?d+"Capture":null:d;m=[];for(var y=h,x;y!==null;){x=y;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,v!==null&&(w=T0(y,v),w!=null&&m.push(B0(y,w,x)))),g)break;y=y.return}0<m.length&&(d=new p(d,f,null,r,c),u.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",d&&r!==Qx&&(f=r.relatedTarget||r.fromElement)&&(Lu(f)||f[Ml]))break e;if((p||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,p?(f=r.relatedTarget||r.toElement,p=h,f=f?Lu(f):null,f!==null&&(g=_c(f),f!==g||f.tag!==5&&f.tag!==6)&&(f=null)):(p=null,f=h),p!==f)){if(m=A_,w="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(m=T_,w="onPointerLeave",v="onPointerEnter",y="pointer"),g=p==null?d:Ed(p),x=f==null?d:Ed(f),d=new m(w,y+"leave",p,r,c),d.target=g,d.relatedTarget=x,w=null,Lu(c)===h&&(m=new m(v,y+"enter",f,r,c),m.target=x,m.relatedTarget=g,w=m),g=w,p&&f)t:{for(m=p,v=f,y=0,x=m;x;x=Dc(x))y++;for(x=0,w=v;w;w=Dc(w))x++;for(;0<y-x;)m=Dc(m),y--;for(;0<x-y;)v=Dc(v),x--;for(;y--;){if(m===v||v!==null&&m===v.alternate)break t;m=Dc(m),v=Dc(v)}m=null}else m=null;p!==null&&F_(u,d,p,m,!1),f!==null&&g!==null&&F_(u,g,f,m,!0)}}e:{if(d=h?Ed(h):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var _=sU;else if(D_(d))if(FP)_=hU;else{_=oU;var b=aU}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(_=lU);if(_&&(_=_(e,h))){NP(u,_,r,c);break e}b&&b(e,d,h),e==="focusout"&&(b=d._wrapperState)&&b.controlled&&d.type==="number"&&Hx(d,"number",d.value)}switch(b=h?Ed(h):window,e){case"focusin":(D_(b)||b.contentEditable==="true")&&(Md=b,r6=h,W1=null);break;case"focusout":W1=r6=Md=null;break;case"mousedown":i6=!0;break;case"contextmenu":case"mouseup":case"dragend":i6=!1,z_(u,r,c);break;case"selectionchange":if(dU)break;case"keydown":case"keyup":z_(u,r,c)}var S;if(y9)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Sd?zP(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(BP&&r.locale!=="ko"&&(Sd||C!=="onCompositionStart"?C==="onCompositionEnd"&&Sd&&(S=RP()):(lh=c,m9="value"in lh?lh.value:lh.textContent,Sd=!0)),b=C2(h,C),0<b.length&&(C=new E_(C,e,null,r,c),u.push({event:C,listeners:b}),S?C.data=S:(S=kP(r),S!==null&&(C.data=S)))),(S=eU?tU(e,r):rU(e,r))&&(h=C2(h,"onBeforeInput"),0<h.length&&(c=new E_("onBeforeInput","beforeinput",null,r,c),u.push({event:c,listeners:h}),c.data=S))}QP(u,t)})}function B0(e,t,r){return{instance:e,listener:t,currentTarget:r}}function C2(e,t){for(var r=t+"Capture",i=[];e!==null;){var n=e,s=n.stateNode;n.tag===5&&s!==null&&(n=s,s=T0(e,r),s!=null&&i.unshift(B0(e,s,n)),s=T0(e,t),s!=null&&i.push(B0(e,s,n))),e=e.return}return i}function Dc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function F_(e,t,r,i,n){for(var s=t._reactName,a=[];r!==null&&r!==i;){var o=r,l=o.alternate,h=o.stateNode;if(l!==null&&l===i)break;o.tag===5&&h!==null&&(o=h,n?(l=T0(r,s),l!=null&&a.unshift(B0(r,l,o))):n||(l=T0(r,s),l!=null&&a.push(B0(r,l,o)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var gU=/\r\n?/g,vU=/\u0000|\uFFFD/g;function U_(e){return(typeof e=="string"?e:""+e).replace(gU,`
`).replace(vU,"")}function Zm(e,t,r){if(t=U_(t),U_(e)!==t&&r)throw Error(Pe(425))}function S2(){}var n6=null,s6=null;function a6(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var o6=typeof setTimeout=="function"?setTimeout:void 0,yU=typeof clearTimeout=="function"?clearTimeout:void 0,j_=typeof Promise=="function"?Promise:void 0,xU=typeof queueMicrotask=="function"?queueMicrotask:typeof j_<"u"?function(e){return j_.resolve(null).then(e).catch(wU)}:o6;function wU(e){setTimeout(function(){throw e})}function c4(e,t){var r=t,i=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(i===0){e.removeChild(n),D0(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=n}while(r);D0(t)}function Ah(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function V_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var af=Math.random().toString(36).slice(2),oo="__reactFiber$"+af,z0="__reactProps$"+af,Ml="__reactContainer$"+af,l6="__reactEvents$"+af,bU="__reactListeners$"+af,_U="__reactHandles$"+af;function Lu(e){var t=e[oo];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ml]||r[oo]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=V_(e);e!==null;){if(r=e[oo])return r;e=V_(e)}return t}e=r,r=e.parentNode}return null}function _m(e){return e=e[oo]||e[Ml],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ed(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Pe(33))}function ny(e){return e[z0]||null}var h6=[],Td=-1;function Zh(e){return{current:e}}function yr(e){0>Td||(e.current=h6[Td],h6[Td]=null,Td--)}function fr(e,t){Td++,h6[Td]=e.current,e.current=t}var Vh={},Ji=Zh(Vh),Un=Zh(!1),nc=Vh;function Tp(e,t){var r=e.type.contextTypes;if(!r)return Vh;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n={},s;for(s in r)n[s]=t[s];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function jn(e){return e=e.childContextTypes,e!=null}function M2(){yr(Un),yr(Ji)}function G_(e,t,r){if(Ji.current!==Vh)throw Error(Pe(168));fr(Ji,t),fr(Un,r)}function KP(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var n in i)if(!(n in t))throw Error(Pe(108,aF(e)||"Unknown",n));return Er({},r,i)}function A2(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vh,nc=Ji.current,fr(Ji,e),fr(Un,Un.current),!0}function H_(e,t,r){var i=e.stateNode;if(!i)throw Error(Pe(169));r?(e=KP(e,t,nc),i.__reactInternalMemoizedMergedChildContext=e,yr(Un),yr(Ji),fr(Ji,e)):yr(Un),fr(Un,r)}var tl=null,sy=!1,d4=!1;function $P(e){tl===null?tl=[e]:tl.push(e)}function CU(e){sy=!0,$P(e)}function Kh(){if(!d4&&tl!==null){d4=!0;var e=0,t=rr;try{var r=tl;for(rr=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}tl=null,sy=!1}catch(n){throw tl!==null&&(tl=tl.slice(e+1)),CP(c9,Kh),n}finally{rr=t,d4=!1}}return null}var Ld=[],Pd=0,E2=null,T2=0,Fs=[],Us=0,sc=null,ul=1,cl="";function fu(e,t){Ld[Pd++]=T2,Ld[Pd++]=E2,E2=e,T2=t}function JP(e,t,r){Fs[Us++]=ul,Fs[Us++]=cl,Fs[Us++]=sc,sc=e;var i=ul;e=cl;var n=32-Da(i)-1;i&=~(1<<n),r+=1;var s=32-Da(t)+n;if(30<s){var a=n-n%5;s=(i&(1<<a)-1).toString(32),i>>=a,n-=a,ul=1<<32-Da(t)+n|r<<n|i,cl=s+e}else ul=1<<s|r<<n|i,cl=e}function w9(e){e.return!==null&&(fu(e,1),JP(e,1,0))}function b9(e){for(;e===E2;)E2=Ld[--Pd],Ld[Pd]=null,T2=Ld[--Pd],Ld[Pd]=null;for(;e===sc;)sc=Fs[--Us],Fs[Us]=null,cl=Fs[--Us],Fs[Us]=null,ul=Fs[--Us],Fs[Us]=null}var ys=null,ds=null,wr=!1,_a=null;function eD(e,t){var r=Xs(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function W_(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ys=e,ds=Ah(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ys=e,ds=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=sc!==null?{id:ul,overflow:cl}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Xs(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ys=e,ds=null,!0):!1;default:return!1}}function u6(e){return(e.mode&1)!==0&&(e.flags&128)===0}function c6(e){if(wr){var t=ds;if(t){var r=t;if(!W_(e,t)){if(u6(e))throw Error(Pe(418));t=Ah(r.nextSibling);var i=ys;t&&W_(e,t)?eD(i,r):(e.flags=e.flags&-4097|2,wr=!1,ys=e)}}else{if(u6(e))throw Error(Pe(418));e.flags=e.flags&-4097|2,wr=!1,ys=e}}}function q_(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ys=e}function Km(e){if(e!==ys)return!1;if(!wr)return q_(e),wr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!a6(e.type,e.memoizedProps)),t&&(t=ds)){if(u6(e))throw tD(),Error(Pe(418));for(;t;)eD(e,t),t=Ah(t.nextSibling)}if(q_(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Pe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ds=Ah(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ds=null}}else ds=ys?Ah(e.stateNode.nextSibling):null;return!0}function tD(){for(var e=ds;e;)e=Ah(e.nextSibling)}function Lp(){ds=ys=null,wr=!1}function _9(e){_a===null?_a=[e]:_a.push(e)}var SU=Il.ReactCurrentBatchConfig;function xa(e,t){if(e&&e.defaultProps){t=Er({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var L2=Zh(null),P2=null,Dd=null,C9=null;function S9(){C9=Dd=P2=null}function M9(e){var t=L2.current;yr(L2),e._currentValue=t}function d6(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function Jd(e,t){P2=e,C9=Dd=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(zn=!0),e.firstContext=null)}function na(e){var t=e._currentValue;if(C9!==e)if(e={context:e,memoizedValue:t,next:null},Dd===null){if(P2===null)throw Error(Pe(308));Dd=e,P2.dependencies={lanes:0,firstContext:e}}else Dd=Dd.next=e;return t}var Pu=null;function A9(e){Pu===null?Pu=[e]:Pu.push(e)}function rD(e,t,r,i){var n=t.interleaved;return n===null?(r.next=r,A9(t)):(r.next=n.next,n.next=r),t.interleaved=r,Al(e,i)}function Al(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var th=!1;function E9(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iD(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function vl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Eh(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,qt&2){var n=i.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),i.pending=t,Al(e,r)}return n=i.interleaved,n===null?(t.next=t,A9(i)):(t.next=n.next,n.next=t),i.interleaved=t,Al(e,r)}function Uv(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,d9(e,r)}}function X_(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var n=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?n=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?n=s=t:s=s.next=t}else n=s=t;r={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function D2(e,t,r,i){var n=e.updateQueue;th=!1;var s=n.firstBaseUpdate,a=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var l=o,h=l.next;l.next=null,a===null?s=h:a.next=h,a=l;var c=e.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=h:o.next=h,c.lastBaseUpdate=l))}if(s!==null){var u=n.baseState;a=0,c=h=l=null,o=s;do{var d=o.lane,p=o.eventTime;if((i&d)===d){c!==null&&(c=c.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(d=t,p=r,m.tag){case 1:if(f=m.payload,typeof f=="function"){u=f.call(p,u,d);break e}u=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=m.payload,d=typeof f=="function"?f.call(p,u,d):f,d==null)break e;u=Er({},u,d);break e;case 2:th=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,d=n.effects,d===null?n.effects=[o]:d.push(o))}else p={eventTime:p,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(h=c=p,l=u):c=c.next=p,a|=d;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;d=o,o=d.next,d.next=null,n.lastBaseUpdate=d,n.shared.pending=null}}while(1);if(c===null&&(l=u),n.baseState=l,n.firstBaseUpdate=h,n.lastBaseUpdate=c,t=n.shared.interleaved,t!==null){n=t;do a|=n.lane,n=n.next;while(n!==t)}else s===null&&(n.shared.lanes=0);oc|=a,e.lanes=a,e.memoizedState=u}}function Y_(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],n=i.callback;if(n!==null){if(i.callback=null,i=r,typeof n!="function")throw Error(Pe(191,n));n.call(i)}}}var nD=new rP.Component().refs;function p6(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:Er({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ay={isMounted:function(e){return(e=e._reactInternals)?_c(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=bn(),n=Lh(e),s=vl(i,n);s.payload=t,r!=null&&(s.callback=r),t=Eh(e,s,n),t!==null&&(Oa(t,e,n,i),Uv(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=bn(),n=Lh(e),s=vl(i,n);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=Eh(e,s,n),t!==null&&(Oa(t,e,n,i),Uv(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=bn(),i=Lh(e),n=vl(r,i);n.tag=2,t!=null&&(n.callback=t),t=Eh(e,n,i),t!==null&&(Oa(t,e,i,r),Uv(t,e,i))}};function Q_(e,t,r,i,n,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,a):t.prototype&&t.prototype.isPureReactComponent?!I0(r,i)||!I0(n,s):!0}function sD(e,t,r){var i=!1,n=Vh,s=t.contextType;return typeof s=="object"&&s!==null?s=na(s):(n=jn(t)?nc:Ji.current,i=t.contextTypes,s=(i=i!=null)?Tp(e,n):Vh),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ay,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),t}function Z_(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&ay.enqueueReplaceState(t,t.state,null)}function f6(e,t,r,i){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs=nD,E9(e);var s=t.contextType;typeof s=="object"&&s!==null?n.context=na(s):(s=jn(t)?nc:Ji.current,n.context=Tp(e,s)),n.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(p6(e,t,s,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&ay.enqueueReplaceState(n,n.state,null),D2(e,r,n,i),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function Of(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Pe(309));var i=r.stateNode}if(!i)throw Error(Pe(147,e));var n=i,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=n.refs;o===nD&&(o=n.refs={}),a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(Pe(284));if(!r._owner)throw Error(Pe(290,e))}return e}function $m(e,t){throw e=Object.prototype.toString.call(t),Error(Pe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function K_(e){var t=e._init;return t(e._payload)}function aD(e){function t(v,y){if(e){var x=v.deletions;x===null?(v.deletions=[y],v.flags|=16):x.push(y)}}function r(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function i(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function n(v,y){return v=Ph(v,y),v.index=0,v.sibling=null,v}function s(v,y,x){return v.index=x,e?(x=v.alternate,x!==null?(x=x.index,x<y?(v.flags|=2,y):x):(v.flags|=2,y)):(v.flags|=1048576,y)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function o(v,y,x,w){return y===null||y.tag!==6?(y=x4(x,v.mode,w),y.return=v,y):(y=n(y,x),y.return=v,y)}function l(v,y,x,w){var _=x.type;return _===Cd?c(v,y,x.props.children,w,x.key):y!==null&&(y.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===eh&&K_(_)===y.type)?(w=n(y,x.props),w.ref=Of(v,y,x),w.return=v,w):(w=qv(x.type,x.key,x.props,null,v.mode,w),w.ref=Of(v,y,x),w.return=v,w)}function h(v,y,x,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=w4(x,v.mode,w),y.return=v,y):(y=n(y,x.children||[]),y.return=v,y)}function c(v,y,x,w,_){return y===null||y.tag!==7?(y=ju(x,v.mode,w,_),y.return=v,y):(y=n(y,x),y.return=v,y)}function u(v,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=x4(""+y,v.mode,x),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case jm:return x=qv(y.type,y.key,y.props,null,v.mode,x),x.ref=Of(v,null,y),x.return=v,x;case _d:return y=w4(y,v.mode,x),y.return=v,y;case eh:var w=y._init;return u(v,w(y._payload),x)}if(b1(y)||Ef(y))return y=ju(y,v.mode,x,null),y.return=v,y;$m(v,y)}return null}function d(v,y,x,w){var _=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:o(v,y,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case jm:return x.key===_?l(v,y,x,w):null;case _d:return x.key===_?h(v,y,x,w):null;case eh:return _=x._init,d(v,y,_(x._payload),w)}if(b1(x)||Ef(x))return _!==null?null:c(v,y,x,w,null);$m(v,x)}return null}function p(v,y,x,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(x)||null,o(y,v,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case jm:return v=v.get(w.key===null?x:w.key)||null,l(y,v,w,_);case _d:return v=v.get(w.key===null?x:w.key)||null,h(y,v,w,_);case eh:var b=w._init;return p(v,y,x,b(w._payload),_)}if(b1(w)||Ef(w))return v=v.get(x)||null,c(y,v,w,_,null);$m(y,w)}return null}function f(v,y,x,w){for(var _=null,b=null,S=y,C=y=0,M=null;S!==null&&C<x.length;C++){S.index>C?(M=S,S=null):M=S.sibling;var A=d(v,S,x[C],w);if(A===null){S===null&&(S=M);break}e&&S&&A.alternate===null&&t(v,S),y=s(A,y,C),b===null?_=A:b.sibling=A,b=A,S=M}if(C===x.length)return r(v,S),wr&&fu(v,C),_;if(S===null){for(;C<x.length;C++)S=u(v,x[C],w),S!==null&&(y=s(S,y,C),b===null?_=S:b.sibling=S,b=S);return wr&&fu(v,C),_}for(S=i(v,S);C<x.length;C++)M=p(S,v,C,x[C],w),M!==null&&(e&&M.alternate!==null&&S.delete(M.key===null?C:M.key),y=s(M,y,C),b===null?_=M:b.sibling=M,b=M);return e&&S.forEach(function(T){return t(v,T)}),wr&&fu(v,C),_}function m(v,y,x,w){var _=Ef(x);if(typeof _!="function")throw Error(Pe(150));if(x=_.call(x),x==null)throw Error(Pe(151));for(var b=_=null,S=y,C=y=0,M=null,A=x.next();S!==null&&!A.done;C++,A=x.next()){S.index>C?(M=S,S=null):M=S.sibling;var T=d(v,S,A.value,w);if(T===null){S===null&&(S=M);break}e&&S&&T.alternate===null&&t(v,S),y=s(T,y,C),b===null?_=T:b.sibling=T,b=T,S=M}if(A.done)return r(v,S),wr&&fu(v,C),_;if(S===null){for(;!A.done;C++,A=x.next())A=u(v,A.value,w),A!==null&&(y=s(A,y,C),b===null?_=A:b.sibling=A,b=A);return wr&&fu(v,C),_}for(S=i(v,S);!A.done;C++,A=x.next())A=p(S,v,C,A.value,w),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?C:A.key),y=s(A,y,C),b===null?_=A:b.sibling=A,b=A);return e&&S.forEach(function(L){return t(v,L)}),wr&&fu(v,C),_}function g(v,y,x,w){if(typeof x=="object"&&x!==null&&x.type===Cd&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case jm:e:{for(var _=x.key,b=y;b!==null;){if(b.key===_){if(_=x.type,_===Cd){if(b.tag===7){r(v,b.sibling),y=n(b,x.props.children),y.return=v,v=y;break e}}else if(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===eh&&K_(_)===b.type){r(v,b.sibling),y=n(b,x.props),y.ref=Of(v,b,x),y.return=v,v=y;break e}r(v,b);break}else t(v,b);b=b.sibling}x.type===Cd?(y=ju(x.props.children,v.mode,w,x.key),y.return=v,v=y):(w=qv(x.type,x.key,x.props,null,v.mode,w),w.ref=Of(v,y,x),w.return=v,v=w)}return a(v);case _d:e:{for(b=x.key;y!==null;){if(y.key===b)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){r(v,y.sibling),y=n(y,x.children||[]),y.return=v,v=y;break e}else{r(v,y);break}else t(v,y);y=y.sibling}y=w4(x,v.mode,w),y.return=v,v=y}return a(v);case eh:return b=x._init,g(v,y,b(x._payload),w)}if(b1(x))return f(v,y,x,w);if(Ef(x))return m(v,y,x,w);$m(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(r(v,y.sibling),y=n(y,x),y.return=v,v=y):(r(v,y),y=x4(x,v.mode,w),y.return=v,v=y),a(v)):r(v,y)}return g}var Pp=aD(!0),oD=aD(!1),Cm={},xo=Zh(Cm),k0=Zh(Cm),N0=Zh(Cm);function Du(e){if(e===Cm)throw Error(Pe(174));return e}function T9(e,t){switch(fr(N0,t),fr(k0,e),fr(xo,Cm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:qx(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=qx(t,e)}yr(xo),fr(xo,t)}function Dp(){yr(xo),yr(k0),yr(N0)}function lD(e){Du(N0.current);var t=Du(xo.current),r=qx(t,e.type);t!==r&&(fr(k0,e),fr(xo,r))}function L9(e){k0.current===e&&(yr(xo),yr(k0))}var _r=Zh(0);function O2(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var p4=[];function P9(){for(var e=0;e<p4.length;e++)p4[e]._workInProgressVersionPrimary=null;p4.length=0}var jv=Il.ReactCurrentDispatcher,f4=Il.ReactCurrentBatchConfig,ac=0,Ar=null,ai=null,wi=null,I2=!1,q1=!1,F0=0,MU=0;function Ui(){throw Error(Pe(321))}function D9(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ba(e[r],t[r]))return!1;return!0}function O9(e,t,r,i,n,s){if(ac=s,Ar=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,jv.current=e===null||e.memoizedState===null?LU:PU,e=r(i,n),q1){s=0;do{if(q1=!1,F0=0,25<=s)throw Error(Pe(301));s+=1,wi=ai=null,t.updateQueue=null,jv.current=DU,e=r(i,n)}while(q1)}if(jv.current=R2,t=ai!==null&&ai.next!==null,ac=0,wi=ai=Ar=null,I2=!1,t)throw Error(Pe(300));return e}function I9(){var e=F0!==0;return F0=0,e}function to(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wi===null?Ar.memoizedState=wi=e:wi=wi.next=e,wi}function sa(){if(ai===null){var e=Ar.alternate;e=e!==null?e.memoizedState:null}else e=ai.next;var t=wi===null?Ar.memoizedState:wi.next;if(t!==null)wi=t,ai=e;else{if(e===null)throw Error(Pe(310));ai=e,e={memoizedState:ai.memoizedState,baseState:ai.baseState,baseQueue:ai.baseQueue,queue:ai.queue,next:null},wi===null?Ar.memoizedState=wi=e:wi=wi.next=e}return wi}function U0(e,t){return typeof t=="function"?t(e):t}function m4(e){var t=sa(),r=t.queue;if(r===null)throw Error(Pe(311));r.lastRenderedReducer=e;var i=ai,n=i.baseQueue,s=r.pending;if(s!==null){if(n!==null){var a=n.next;n.next=s.next,s.next=a}i.baseQueue=n=s,r.pending=null}if(n!==null){s=n.next,i=i.baseState;var o=a=null,l=null,h=s;do{var c=h.lane;if((ac&c)===c)l!==null&&(l=l.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:e(i,h.action);else{var u={lane:c,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};l===null?(o=l=u,a=i):l=l.next=u,Ar.lanes|=c,oc|=c}h=h.next}while(h!==null&&h!==s);l===null?a=i:l.next=o,Ba(i,t.memoizedState)||(zn=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=l,r.lastRenderedState=i}if(e=r.interleaved,e!==null){n=e;do s=n.lane,Ar.lanes|=s,oc|=s,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function g4(e){var t=sa(),r=t.queue;if(r===null)throw Error(Pe(311));r.lastRenderedReducer=e;var i=r.dispatch,n=r.pending,s=t.memoizedState;if(n!==null){r.pending=null;var a=n=n.next;do s=e(s,a.action),a=a.next;while(a!==n);Ba(s,t.memoizedState)||(zn=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,i]}function hD(){}function uD(e,t){var r=Ar,i=sa(),n=t(),s=!Ba(i.memoizedState,n);if(s&&(i.memoizedState=n,zn=!0),i=i.queue,R9(pD.bind(null,r,i,e),[e]),i.getSnapshot!==t||s||wi!==null&&wi.memoizedState.tag&1){if(r.flags|=2048,j0(9,dD.bind(null,r,i,n,t),void 0,null),Si===null)throw Error(Pe(349));ac&30||cD(r,t,n)}return n}function cD(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ar.updateQueue,t===null?(t={lastEffect:null,stores:null},Ar.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function dD(e,t,r,i){t.value=r,t.getSnapshot=i,fD(t)&&mD(e)}function pD(e,t,r){return r(function(){fD(t)&&mD(e)})}function fD(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ba(e,r)}catch{return!0}}function mD(e){var t=Al(e,1);t!==null&&Oa(t,e,1,-1)}function $_(e){var t=to();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:U0,lastRenderedState:e},t.queue=e,e=e.dispatch=TU.bind(null,Ar,e),[t.memoizedState,e]}function j0(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=Ar.updateQueue,t===null?(t={lastEffect:null,stores:null},Ar.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function gD(){return sa().memoizedState}function Vv(e,t,r,i){var n=to();Ar.flags|=e,n.memoizedState=j0(1|t,r,void 0,i===void 0?null:i)}function oy(e,t,r,i){var n=sa();i=i===void 0?null:i;var s=void 0;if(ai!==null){var a=ai.memoizedState;if(s=a.destroy,i!==null&&D9(i,a.deps)){n.memoizedState=j0(t,r,s,i);return}}Ar.flags|=e,n.memoizedState=j0(1|t,r,s,i)}function J_(e,t){return Vv(8390656,8,e,t)}function R9(e,t){return oy(2048,8,e,t)}function vD(e,t){return oy(4,2,e,t)}function yD(e,t){return oy(4,4,e,t)}function xD(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function wD(e,t,r){return r=r!=null?r.concat([e]):null,oy(4,4,xD.bind(null,t,e),r)}function B9(){}function bD(e,t){var r=sa();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&D9(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function _D(e,t){var r=sa();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&D9(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function CD(e,t,r){return ac&21?(Ba(r,t)||(r=AP(),Ar.lanes|=r,oc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,zn=!0),e.memoizedState=r)}function AU(e,t){var r=rr;rr=r!==0&&4>r?r:4,e(!0);var i=f4.transition;f4.transition={};try{e(!1),t()}finally{rr=r,f4.transition=i}}function SD(){return sa().memoizedState}function EU(e,t,r){var i=Lh(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},MD(e))AD(t,r);else if(r=rD(e,t,r,i),r!==null){var n=bn();Oa(r,e,i,n),ED(r,t,i)}}function TU(e,t,r){var i=Lh(e),n={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(MD(e))AD(t,n);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,r);if(n.hasEagerState=!0,n.eagerState=o,Ba(o,a)){var l=t.interleaved;l===null?(n.next=n,A9(t)):(n.next=l.next,l.next=n),t.interleaved=n;return}}catch{}finally{}r=rD(e,t,n,i),r!==null&&(n=bn(),Oa(r,e,i,n),ED(r,t,i))}}function MD(e){var t=e.alternate;return e===Ar||t!==null&&t===Ar}function AD(e,t){q1=I2=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ED(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,d9(e,r)}}var R2={readContext:na,useCallback:Ui,useContext:Ui,useEffect:Ui,useImperativeHandle:Ui,useInsertionEffect:Ui,useLayoutEffect:Ui,useMemo:Ui,useReducer:Ui,useRef:Ui,useState:Ui,useDebugValue:Ui,useDeferredValue:Ui,useTransition:Ui,useMutableSource:Ui,useSyncExternalStore:Ui,useId:Ui,unstable_isNewReconciler:!1},LU={readContext:na,useCallback:function(e,t){return to().memoizedState=[e,t===void 0?null:t],e},useContext:na,useEffect:J_,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Vv(4194308,4,xD.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Vv(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vv(4,2,e,t)},useMemo:function(e,t){var r=to();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=to();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=EU.bind(null,Ar,e),[i.memoizedState,e]},useRef:function(e){var t=to();return e={current:e},t.memoizedState=e},useState:$_,useDebugValue:B9,useDeferredValue:function(e){return to().memoizedState=e},useTransition:function(){var e=$_(!1),t=e[0];return e=AU.bind(null,e[1]),to().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=Ar,n=to();if(wr){if(r===void 0)throw Error(Pe(407));r=r()}else{if(r=t(),Si===null)throw Error(Pe(349));ac&30||cD(i,t,r)}n.memoizedState=r;var s={value:r,getSnapshot:t};return n.queue=s,J_(pD.bind(null,i,s,e),[e]),i.flags|=2048,j0(9,dD.bind(null,i,s,r,t),void 0,null),r},useId:function(){var e=to(),t=Si.identifierPrefix;if(wr){var r=cl,i=ul;r=(i&~(1<<32-Da(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=F0++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=MU++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},PU={readContext:na,useCallback:bD,useContext:na,useEffect:R9,useImperativeHandle:wD,useInsertionEffect:vD,useLayoutEffect:yD,useMemo:_D,useReducer:m4,useRef:gD,useState:function(){return m4(U0)},useDebugValue:B9,useDeferredValue:function(e){var t=sa();return CD(t,ai.memoizedState,e)},useTransition:function(){var e=m4(U0)[0],t=sa().memoizedState;return[e,t]},useMutableSource:hD,useSyncExternalStore:uD,useId:SD,unstable_isNewReconciler:!1},DU={readContext:na,useCallback:bD,useContext:na,useEffect:R9,useImperativeHandle:wD,useInsertionEffect:vD,useLayoutEffect:yD,useMemo:_D,useReducer:g4,useRef:gD,useState:function(){return g4(U0)},useDebugValue:B9,useDeferredValue:function(e){var t=sa();return ai===null?t.memoizedState=e:CD(t,ai.memoizedState,e)},useTransition:function(){var e=g4(U0)[0],t=sa().memoizedState;return[e,t]},useMutableSource:hD,useSyncExternalStore:uD,useId:SD,unstable_isNewReconciler:!1};function Op(e,t){try{var r="",i=t;do r+=sF(i),i=i.return;while(i);var n=r}catch(s){n=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:n,digest:null}}function v4(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function m6(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var OU=typeof WeakMap=="function"?WeakMap:Map;function TD(e,t,r){r=vl(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){z2||(z2=!0,M6=i),m6(e,t)},r}function LD(e,t,r){r=vl(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var n=t.value;r.payload=function(){return i(n)},r.callback=function(){m6(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){m6(e,t),typeof i!="function"&&(Th===null?Th=new Set([this]):Th.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function eC(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new OU;var n=new Set;i.set(t,n)}else n=i.get(t),n===void 0&&(n=new Set,i.set(t,n));n.has(r)||(n.add(r),e=qU.bind(null,e,t,r),t.then(e,e))}function tC(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function rC(e,t,r,i,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=vl(-1,1),t.tag=2,Eh(r,t,1))),r.lanes|=1),e)}var IU=Il.ReactCurrentOwner,zn=!1;function hn(e,t,r,i){t.child=e===null?oD(t,null,r,i):Pp(t,e.child,r,i)}function iC(e,t,r,i,n){r=r.render;var s=t.ref;return Jd(t,n),i=O9(e,t,r,i,s,n),r=I9(),e!==null&&!zn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,El(e,t,n)):(wr&&r&&w9(t),t.flags|=1,hn(e,t,i,n),t.child)}function nC(e,t,r,i,n){if(e===null){var s=r.type;return typeof s=="function"&&!G9(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,PD(e,t,s,i,n)):(e=qv(r.type,null,i,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&n)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:I0,r(a,i)&&e.ref===t.ref)return El(e,t,n)}return t.flags|=1,e=Ph(s,i),e.ref=t.ref,e.return=t,t.child=e}function PD(e,t,r,i,n){if(e!==null){var s=e.memoizedProps;if(I0(s,i)&&e.ref===t.ref)if(zn=!1,t.pendingProps=i=s,(e.lanes&n)!==0)e.flags&131072&&(zn=!0);else return t.lanes=e.lanes,El(e,t,n)}return g6(e,t,r,i,n)}function DD(e,t,r){var i=t.pendingProps,n=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},fr(Id,ss),ss|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,fr(Id,ss),ss|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:r,fr(Id,ss),ss|=i}else s!==null?(i=s.baseLanes|r,t.memoizedState=null):i=r,fr(Id,ss),ss|=i;return hn(e,t,n,r),t.child}function OD(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function g6(e,t,r,i,n){var s=jn(r)?nc:Ji.current;return s=Tp(t,s),Jd(t,n),r=O9(e,t,r,i,s,n),i=I9(),e!==null&&!zn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,El(e,t,n)):(wr&&i&&w9(t),t.flags|=1,hn(e,t,r,n),t.child)}function sC(e,t,r,i,n){if(jn(r)){var s=!0;A2(t)}else s=!1;if(Jd(t,n),t.stateNode===null)Gv(e,t),sD(t,r,i),f6(t,r,i,n),i=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,h=r.contextType;typeof h=="object"&&h!==null?h=na(h):(h=jn(r)?nc:Ji.current,h=Tp(t,h));var c=r.getDerivedStateFromProps,u=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||l!==h)&&Z_(t,a,i,h),th=!1;var d=t.memoizedState;a.state=d,D2(t,i,a,n),l=t.memoizedState,o!==i||d!==l||Un.current||th?(typeof c=="function"&&(p6(t,r,c,i),l=t.memoizedState),(o=th||Q_(t,r,o,i,d,l,h))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=h,i=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,iD(e,t),o=t.memoizedProps,h=t.type===t.elementType?o:xa(t.type,o),a.props=h,u=t.pendingProps,d=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=na(l):(l=jn(r)?nc:Ji.current,l=Tp(t,l));var p=r.getDerivedStateFromProps;(c=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==u||d!==l)&&Z_(t,a,i,l),th=!1,d=t.memoizedState,a.state=d,D2(t,i,a,n);var f=t.memoizedState;o!==u||d!==f||Un.current||th?(typeof p=="function"&&(p6(t,r,p,i),f=t.memoizedState),(h=th||Q_(t,r,h,i,d,f,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,f,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,f,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),a.props=i,a.state=f,a.context=l,i=h):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return v6(e,t,r,i,s,n)}function v6(e,t,r,i,n,s){OD(e,t);var a=(t.flags&128)!==0;if(!i&&!a)return n&&H_(t,r,!1),El(e,t,s);i=t.stateNode,IU.current=t;var o=a&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&a?(t.child=Pp(t,e.child,null,s),t.child=Pp(t,null,o,s)):hn(e,t,o,s),t.memoizedState=i.state,n&&H_(t,r,!0),t.child}function ID(e){var t=e.stateNode;t.pendingContext?G_(e,t.pendingContext,t.pendingContext!==t.context):t.context&&G_(e,t.context,!1),T9(e,t.containerInfo)}function aC(e,t,r,i,n){return Lp(),_9(n),t.flags|=256,hn(e,t,r,i),t.child}var y6={dehydrated:null,treeContext:null,retryLane:0};function x6(e){return{baseLanes:e,cachePool:null,transitions:null}}function RD(e,t,r){var i=t.pendingProps,n=_r.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(n&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),fr(_r,n&1),e===null)return c6(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=i.children,e=i.fallback,s?(i=t.mode,s=t.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=uy(a,i,0,null),e=ju(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=x6(r),t.memoizedState=y6,e):z9(t,a));if(n=e.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return RU(e,t,a,i,o,n,r);if(s){s=i.fallback,a=t.mode,n=e.child,o=n.sibling;var l={mode:"hidden",children:i.children};return!(a&1)&&t.child!==n?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=Ph(n,l),i.subtreeFlags=n.subtreeFlags&14680064),o!==null?s=Ph(o,s):(s=ju(s,a,r,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,a=e.child.memoizedState,a=a===null?x6(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~r,t.memoizedState=y6,i}return s=e.child,e=s.sibling,i=Ph(s,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function z9(e,t){return t=uy({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Jm(e,t,r,i){return i!==null&&_9(i),Pp(t,e.child,null,r),e=z9(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function RU(e,t,r,i,n,s,a){if(r)return t.flags&256?(t.flags&=-257,i=v4(Error(Pe(422))),Jm(e,t,a,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=i.fallback,n=t.mode,i=uy({mode:"visible",children:i.children},n,0,null),s=ju(s,n,a,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,t.mode&1&&Pp(t,e.child,null,a),t.child.memoizedState=x6(a),t.memoizedState=y6,s);if(!(t.mode&1))return Jm(e,t,a,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var o=i.dgst;return i=o,s=Error(Pe(419)),i=v4(s,i,void 0),Jm(e,t,a,i)}if(o=(a&e.childLanes)!==0,zn||o){if(i=Si,i!==null){switch(a&-a){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(i.suspendedLanes|a)?0:n,n!==0&&n!==s.retryLane&&(s.retryLane=n,Al(e,n),Oa(i,e,n,-1))}return V9(),i=v4(Error(Pe(421))),Jm(e,t,a,i)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=XU.bind(null,e),n._reactRetry=t,null):(e=s.treeContext,ds=Ah(n.nextSibling),ys=t,wr=!0,_a=null,e!==null&&(Fs[Us++]=ul,Fs[Us++]=cl,Fs[Us++]=sc,ul=e.id,cl=e.overflow,sc=t),t=z9(t,i.children),t.flags|=4096,t)}function oC(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),d6(e.return,t,r)}function y4(e,t,r,i,n){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:n}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=n)}function BD(e,t,r){var i=t.pendingProps,n=i.revealOrder,s=i.tail;if(hn(e,t,i.children,r),i=_r.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&oC(e,r,t);else if(e.tag===19)oC(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(fr(_r,i),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&O2(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),y4(t,!1,n,r,s);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&O2(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}y4(t,!0,r,null,s);break;case"together":y4(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function El(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),oc|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Pe(153));if(t.child!==null){for(e=t.child,r=Ph(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ph(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function BU(e,t,r){switch(t.tag){case 3:ID(t),Lp();break;case 5:lD(t);break;case 1:jn(t.type)&&A2(t);break;case 4:T9(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,n=t.memoizedProps.value;fr(L2,i._currentValue),i._currentValue=n;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(fr(_r,_r.current&1),t.flags|=128,null):r&t.child.childLanes?RD(e,t,r):(fr(_r,_r.current&1),e=El(e,t,r),e!==null?e.sibling:null);fr(_r,_r.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return BD(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),fr(_r,_r.current),i)break;return null;case 22:case 23:return t.lanes=0,DD(e,t,r)}return El(e,t,r)}var zD,w6,kD,ND;zD=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};w6=function(){};kD=function(e,t,r,i){var n=e.memoizedProps;if(n!==i){e=t.stateNode,Du(xo.current);var s=null;switch(r){case"input":n=Vx(e,n),i=Vx(e,i),s=[];break;case"select":n=Er({},n,{value:void 0}),i=Er({},i,{value:void 0}),s=[];break;case"textarea":n=Wx(e,n),i=Wx(e,i),s=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=S2)}Xx(r,i);var a;r=null;for(h in n)if(!i.hasOwnProperty(h)&&n.hasOwnProperty(h)&&n[h]!=null)if(h==="style"){var o=n[h];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(A0.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in i){var l=i[h];if(o=n!=null?n[h]:void 0,i.hasOwnProperty(h)&&l!==o&&(l!=null||o!=null))if(h==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(s||(s=[]),s.push(h,r)),r=l;else h==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(h,l)):h==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(h,""+l):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(A0.hasOwnProperty(h)?(l!=null&&h==="onScroll"&&mr("scroll",e),s||o===l||(s=[])):(s=s||[]).push(h,l))}r&&(s=s||[]).push("style",r);var h=s;(t.updateQueue=h)&&(t.flags|=4)}};ND=function(e,t,r,i){r!==i&&(t.flags|=4)};function If(e,t){if(!wr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ji(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function zU(e,t,r){var i=t.pendingProps;switch(b9(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ji(t),null;case 1:return jn(t.type)&&M2(),ji(t),null;case 3:return i=t.stateNode,Dp(),yr(Un),yr(Ji),P9(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Km(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_a!==null&&(T6(_a),_a=null))),w6(e,t),ji(t),null;case 5:L9(t);var n=Du(N0.current);if(r=t.type,e!==null&&t.stateNode!=null)kD(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Pe(166));return ji(t),null}if(e=Du(xo.current),Km(t)){i=t.stateNode,r=t.type;var s=t.memoizedProps;switch(i[oo]=t,i[z0]=s,e=(t.mode&1)!==0,r){case"dialog":mr("cancel",i),mr("close",i);break;case"iframe":case"object":case"embed":mr("load",i);break;case"video":case"audio":for(n=0;n<C1.length;n++)mr(C1[n],i);break;case"source":mr("error",i);break;case"img":case"image":case"link":mr("error",i),mr("load",i);break;case"details":mr("toggle",i);break;case"input":g_(i,s),mr("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},mr("invalid",i);break;case"textarea":y_(i,s),mr("invalid",i)}Xx(r,s),n=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?i.textContent!==o&&(s.suppressHydrationWarning!==!0&&Zm(i.textContent,o,e),n=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Zm(i.textContent,o,e),n=["children",""+o]):A0.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&mr("scroll",i)}switch(r){case"input":Vm(i),v_(i,s,!0);break;case"textarea":Vm(i),x_(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=S2)}i=n,t.updateQueue=i,i!==null&&(t.flags|=4)}else{a=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cP(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=a.createElement(r,{is:i.is}):(e=a.createElement(r),r==="select"&&(a=e,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):e=a.createElementNS(e,r),e[oo]=t,e[z0]=i,zD(e,t,!1,!1),t.stateNode=e;e:{switch(a=Yx(r,i),r){case"dialog":mr("cancel",e),mr("close",e),n=i;break;case"iframe":case"object":case"embed":mr("load",e),n=i;break;case"video":case"audio":for(n=0;n<C1.length;n++)mr(C1[n],e);n=i;break;case"source":mr("error",e),n=i;break;case"img":case"image":case"link":mr("error",e),mr("load",e),n=i;break;case"details":mr("toggle",e),n=i;break;case"input":g_(e,i),n=Vx(e,i),mr("invalid",e);break;case"option":n=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},n=Er({},i,{value:void 0}),mr("invalid",e);break;case"textarea":y_(e,i),n=Wx(e,i),mr("invalid",e);break;default:n=i}Xx(r,n),o=n;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?fP(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&dP(e,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&E0(e,l):typeof l=="number"&&E0(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(A0.hasOwnProperty(s)?l!=null&&s==="onScroll"&&mr("scroll",e):l!=null&&a9(e,s,l,a))}switch(r){case"input":Vm(e),v_(e,i,!1);break;case"textarea":Vm(e),x_(e);break;case"option":i.value!=null&&e.setAttribute("value",""+jh(i.value));break;case"select":e.multiple=!!i.multiple,s=i.value,s!=null?Qd(e,!!i.multiple,s,!1):i.defaultValue!=null&&Qd(e,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=S2)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ji(t),null;case 6:if(e&&t.stateNode!=null)ND(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Pe(166));if(r=Du(N0.current),Du(xo.current),Km(t)){if(i=t.stateNode,r=t.memoizedProps,i[oo]=t,(s=i.nodeValue!==r)&&(e=ys,e!==null))switch(e.tag){case 3:Zm(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Zm(i.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[oo]=t,t.stateNode=i}return ji(t),null;case 13:if(yr(_r),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(wr&&ds!==null&&t.mode&1&&!(t.flags&128))tD(),Lp(),t.flags|=98560,s=!1;else if(s=Km(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(Pe(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Pe(317));s[oo]=t}else Lp(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ji(t),s=!1}else _a!==null&&(T6(_a),_a=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||_r.current&1?hi===0&&(hi=3):V9())),t.updateQueue!==null&&(t.flags|=4),ji(t),null);case 4:return Dp(),w6(e,t),e===null&&R0(t.stateNode.containerInfo),ji(t),null;case 10:return M9(t.type._context),ji(t),null;case 17:return jn(t.type)&&M2(),ji(t),null;case 19:if(yr(_r),s=t.memoizedState,s===null)return ji(t),null;if(i=(t.flags&128)!==0,a=s.rendering,a===null)if(i)If(s,!1);else{if(hi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=O2(e),a!==null){for(t.flags|=128,If(s,!1),i=a.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)s=r,e=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return fr(_r,_r.current&1|2),t.child}e=e.sibling}s.tail!==null&&Vr()>Ip&&(t.flags|=128,i=!0,If(s,!1),t.lanes=4194304)}else{if(!i)if(e=O2(a),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),If(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!wr)return ji(t),null}else 2*Vr()-s.renderingStartTime>Ip&&r!==1073741824&&(t.flags|=128,i=!0,If(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(r=s.last,r!==null?r.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Vr(),t.sibling=null,r=_r.current,fr(_r,i?r&1|2:r&1),t):(ji(t),null);case 22:case 23:return j9(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?ss&1073741824&&(ji(t),t.subtreeFlags&6&&(t.flags|=8192)):ji(t),null;case 24:return null;case 25:return null}throw Error(Pe(156,t.tag))}function kU(e,t){switch(b9(t),t.tag){case 1:return jn(t.type)&&M2(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Dp(),yr(Un),yr(Ji),P9(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return L9(t),null;case 13:if(yr(_r),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Pe(340));Lp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return yr(_r),null;case 4:return Dp(),null;case 10:return M9(t.type._context),null;case 22:case 23:return j9(),null;case 24:return null;default:return null}}var eg=!1,Hi=!1,NU=typeof WeakSet=="function"?WeakSet:Set,Je=null;function Od(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Dr(e,t,i)}else r.current=null}function b6(e,t,r){try{r()}catch(i){Dr(e,t,i)}}var lC=!1;function FU(e,t){if(n6=b2,e=VP(),x9(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var n=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,o=-1,l=-1,h=0,c=0,u=e,d=null;t:for(;;){for(var p;u!==r||n!==0&&u.nodeType!==3||(o=a+n),u!==s||i!==0&&u.nodeType!==3||(l=a+i),u.nodeType===3&&(a+=u.nodeValue.length),(p=u.firstChild)!==null;)d=u,u=p;for(;;){if(u===e)break t;if(d===r&&++h===n&&(o=a),d===s&&++c===i&&(l=a),(p=u.nextSibling)!==null)break;u=d,d=u.parentNode}u=p}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(s6={focusedElem:e,selectionRange:r},b2=!1,Je=t;Je!==null;)if(t=Je,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Je=e;else for(;Je!==null;){t=Je;try{var f=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var m=f.memoizedProps,g=f.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:xa(t.type,m),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Pe(163))}}catch(w){Dr(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,Je=e;break}Je=t.return}return f=lC,lC=!1,f}function X1(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&e)===e){var s=n.destroy;n.destroy=void 0,s!==void 0&&b6(t,r,s)}n=n.next}while(n!==i)}}function ly(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function _6(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function FD(e){var t=e.alternate;t!==null&&(e.alternate=null,FD(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[oo],delete t[z0],delete t[l6],delete t[bU],delete t[_U])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function UD(e){return e.tag===5||e.tag===3||e.tag===4}function hC(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||UD(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function C6(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=S2));else if(i!==4&&(e=e.child,e!==null))for(C6(e,t,r),e=e.sibling;e!==null;)C6(e,t,r),e=e.sibling}function S6(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(S6(e,t,r),e=e.sibling;e!==null;)S6(e,t,r),e=e.sibling}var Oi=null,wa=!1;function Nl(e,t,r){for(r=r.child;r!==null;)jD(e,t,r),r=r.sibling}function jD(e,t,r){if(yo&&typeof yo.onCommitFiberUnmount=="function")try{yo.onCommitFiberUnmount(ey,r)}catch{}switch(r.tag){case 5:Hi||Od(r,t);case 6:var i=Oi,n=wa;Oi=null,Nl(e,t,r),Oi=i,wa=n,Oi!==null&&(wa?(e=Oi,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Oi.removeChild(r.stateNode));break;case 18:Oi!==null&&(wa?(e=Oi,r=r.stateNode,e.nodeType===8?c4(e.parentNode,r):e.nodeType===1&&c4(e,r),D0(e)):c4(Oi,r.stateNode));break;case 4:i=Oi,n=wa,Oi=r.stateNode.containerInfo,wa=!0,Nl(e,t,r),Oi=i,wa=n;break;case 0:case 11:case 14:case 15:if(!Hi&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var s=n,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&b6(r,t,a),n=n.next}while(n!==i)}Nl(e,t,r);break;case 1:if(!Hi&&(Od(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(o){Dr(r,t,o)}Nl(e,t,r);break;case 21:Nl(e,t,r);break;case 22:r.mode&1?(Hi=(i=Hi)||r.memoizedState!==null,Nl(e,t,r),Hi=i):Nl(e,t,r);break;default:Nl(e,t,r)}}function uC(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new NU),t.forEach(function(i){var n=YU.bind(null,e,i);r.has(i)||(r.add(i),i.then(n,n))})}}function ha(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var n=r[i];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:Oi=o.stateNode,wa=!1;break e;case 3:Oi=o.stateNode.containerInfo,wa=!0;break e;case 4:Oi=o.stateNode.containerInfo,wa=!0;break e}o=o.return}if(Oi===null)throw Error(Pe(160));jD(s,a,n),Oi=null,wa=!1;var l=n.alternate;l!==null&&(l.return=null),n.return=null}catch(h){Dr(n,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)VD(t,e),t=t.sibling}function VD(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ha(t,e),ja(e),i&4){try{X1(3,e,e.return),ly(3,e)}catch(m){Dr(e,e.return,m)}try{X1(5,e,e.return)}catch(m){Dr(e,e.return,m)}}break;case 1:ha(t,e),ja(e),i&512&&r!==null&&Od(r,r.return);break;case 5:if(ha(t,e),ja(e),i&512&&r!==null&&Od(r,r.return),e.flags&32){var n=e.stateNode;try{E0(n,"")}catch(m){Dr(e,e.return,m)}}if(i&4&&(n=e.stateNode,n!=null)){var s=e.memoizedProps,a=r!==null?r.memoizedProps:s,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&hP(n,s),Yx(o,a);var h=Yx(o,s);for(a=0;a<l.length;a+=2){var c=l[a],u=l[a+1];c==="style"?fP(n,u):c==="dangerouslySetInnerHTML"?dP(n,u):c==="children"?E0(n,u):a9(n,c,u,h)}switch(o){case"input":Gx(n,s);break;case"textarea":uP(n,s);break;case"select":var d=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Qd(n,!!s.multiple,p,!1):d!==!!s.multiple&&(s.defaultValue!=null?Qd(n,!!s.multiple,s.defaultValue,!0):Qd(n,!!s.multiple,s.multiple?[]:"",!1))}n[z0]=s}catch(m){Dr(e,e.return,m)}}break;case 6:if(ha(t,e),ja(e),i&4){if(e.stateNode===null)throw Error(Pe(162));n=e.stateNode,s=e.memoizedProps;try{n.nodeValue=s}catch(m){Dr(e,e.return,m)}}break;case 3:if(ha(t,e),ja(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{D0(t.containerInfo)}catch(m){Dr(e,e.return,m)}break;case 4:ha(t,e),ja(e);break;case 13:ha(t,e),ja(e),n=e.child,n.flags&8192&&(s=n.memoizedState!==null,n.stateNode.isHidden=s,!s||n.alternate!==null&&n.alternate.memoizedState!==null||(F9=Vr())),i&4&&uC(e);break;case 22:if(c=r!==null&&r.memoizedState!==null,e.mode&1?(Hi=(h=Hi)||c,ha(t,e),Hi=h):ha(t,e),ja(e),i&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!c&&e.mode&1)for(Je=e,c=e.child;c!==null;){for(u=Je=c;Je!==null;){switch(d=Je,p=d.child,d.tag){case 0:case 11:case 14:case 15:X1(4,d,d.return);break;case 1:Od(d,d.return);var f=d.stateNode;if(typeof f.componentWillUnmount=="function"){i=d,r=d.return;try{t=i,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(m){Dr(i,r,m)}}break;case 5:Od(d,d.return);break;case 22:if(d.memoizedState!==null){dC(u);continue}}p!==null?(p.return=d,Je=p):dC(u)}c=c.sibling}e:for(c=null,u=e;;){if(u.tag===5){if(c===null){c=u;try{n=u.stateNode,h?(s=n.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=u.stateNode,l=u.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=pP("display",a))}catch(m){Dr(e,e.return,m)}}}else if(u.tag===6){if(c===null)try{u.stateNode.nodeValue=h?"":u.memoizedProps}catch(m){Dr(e,e.return,m)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;c===u&&(c=null),u=u.return}c===u&&(c=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:ha(t,e),ja(e),i&4&&uC(e);break;case 21:break;default:ha(t,e),ja(e)}}function ja(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(UD(r)){var i=r;break e}r=r.return}throw Error(Pe(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(E0(n,""),i.flags&=-33);var s=hC(e);S6(e,s,n);break;case 3:case 4:var a=i.stateNode.containerInfo,o=hC(e);C6(e,o,a);break;default:throw Error(Pe(161))}}catch(l){Dr(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function UU(e,t,r){Je=e,GD(e)}function GD(e,t,r){for(var i=(e.mode&1)!==0;Je!==null;){var n=Je,s=n.child;if(n.tag===22&&i){var a=n.memoizedState!==null||eg;if(!a){var o=n.alternate,l=o!==null&&o.memoizedState!==null||Hi;o=eg;var h=Hi;if(eg=a,(Hi=l)&&!h)for(Je=n;Je!==null;)a=Je,l=a.child,a.tag===22&&a.memoizedState!==null?pC(n):l!==null?(l.return=a,Je=l):pC(n);for(;s!==null;)Je=s,GD(s),s=s.sibling;Je=n,eg=o,Hi=h}cC(e)}else n.subtreeFlags&8772&&s!==null?(s.return=n,Je=s):cC(e)}}function cC(e){for(;Je!==null;){var t=Je;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Hi||ly(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Hi)if(r===null)i.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:xa(t.type,r.memoizedProps);i.componentDidUpdate(n,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Y_(t,s,i);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Y_(t,a,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var c=h.memoizedState;if(c!==null){var u=c.dehydrated;u!==null&&D0(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Pe(163))}Hi||t.flags&512&&_6(t)}catch(d){Dr(t,t.return,d)}}if(t===e){Je=null;break}if(r=t.sibling,r!==null){r.return=t.return,Je=r;break}Je=t.return}}function dC(e){for(;Je!==null;){var t=Je;if(t===e){Je=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Je=r;break}Je=t.return}}function pC(e){for(;Je!==null;){var t=Je;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ly(4,t)}catch(l){Dr(t,r,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var n=t.return;try{i.componentDidMount()}catch(l){Dr(t,n,l)}}var s=t.return;try{_6(t)}catch(l){Dr(t,s,l)}break;case 5:var a=t.return;try{_6(t)}catch(l){Dr(t,a,l)}}}catch(l){Dr(t,t.return,l)}if(t===e){Je=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Je=o;break}Je=t.return}}var jU=Math.ceil,B2=Il.ReactCurrentDispatcher,k9=Il.ReactCurrentOwner,Js=Il.ReactCurrentBatchConfig,qt=0,Si=null,$r=null,zi=0,ss=0,Id=Zh(0),hi=0,V0=null,oc=0,hy=0,N9=0,Y1=null,Pn=null,F9=0,Ip=1/0,Zo=null,z2=!1,M6=null,Th=null,tg=!1,hh=null,k2=0,Q1=0,A6=null,Hv=-1,Wv=0;function bn(){return qt&6?Vr():Hv!==-1?Hv:Hv=Vr()}function Lh(e){return e.mode&1?qt&2&&zi!==0?zi&-zi:SU.transition!==null?(Wv===0&&(Wv=AP()),Wv):(e=rr,e!==0||(e=window.event,e=e===void 0?16:IP(e.type)),e):1}function Oa(e,t,r,i){if(50<Q1)throw Q1=0,A6=null,Error(Pe(185));wm(e,r,i),(!(qt&2)||e!==Si)&&(e===Si&&(!(qt&2)&&(hy|=r),hi===4&&nh(e,zi)),Vn(e,i),r===1&&qt===0&&!(t.mode&1)&&(Ip=Vr()+500,sy&&Kh()))}function Vn(e,t){var r=e.callbackNode;SF(e,t);var i=w2(e,e===Si?zi:0);if(i===0)r!==null&&__(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&__(r),t===1)e.tag===0?CU(fC.bind(null,e)):$P(fC.bind(null,e)),xU(function(){!(qt&6)&&Kh()}),r=null;else{switch(EP(i)){case 1:r=c9;break;case 4:r=SP;break;case 16:r=x2;break;case 536870912:r=MP;break;default:r=x2}r=KD(r,HD.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function HD(e,t){if(Hv=-1,Wv=0,qt&6)throw Error(Pe(327));var r=e.callbackNode;if(ep()&&e.callbackNode!==r)return null;var i=w2(e,e===Si?zi:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=N2(e,i);else{t=i;var n=qt;qt|=2;var s=qD();(Si!==e||zi!==t)&&(Zo=null,Ip=Vr()+500,Uu(e,t));do try{HU();break}catch(o){WD(e,o)}while(1);S9(),B2.current=s,qt=n,$r!==null?t=0:(Si=null,zi=0,t=hi)}if(t!==0){if(t===2&&(n=Jx(e),n!==0&&(i=n,t=E6(e,n))),t===1)throw r=V0,Uu(e,0),nh(e,i),Vn(e,Vr()),r;if(t===6)nh(e,i);else{if(n=e.current.alternate,!(i&30)&&!VU(n)&&(t=N2(e,i),t===2&&(s=Jx(e),s!==0&&(i=s,t=E6(e,s))),t===1))throw r=V0,Uu(e,0),nh(e,i),Vn(e,Vr()),r;switch(e.finishedWork=n,e.finishedLanes=i,t){case 0:case 1:throw Error(Pe(345));case 2:mu(e,Pn,Zo);break;case 3:if(nh(e,i),(i&130023424)===i&&(t=F9+500-Vr(),10<t)){if(w2(e,0)!==0)break;if(n=e.suspendedLanes,(n&i)!==i){bn(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=o6(mu.bind(null,e,Pn,Zo),t);break}mu(e,Pn,Zo);break;case 4:if(nh(e,i),(i&4194240)===i)break;for(t=e.eventTimes,n=-1;0<i;){var a=31-Da(i);s=1<<a,a=t[a],a>n&&(n=a),i&=~s}if(i=n,i=Vr()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*jU(i/1960))-i,10<i){e.timeoutHandle=o6(mu.bind(null,e,Pn,Zo),i);break}mu(e,Pn,Zo);break;case 5:mu(e,Pn,Zo);break;default:throw Error(Pe(329))}}}return Vn(e,Vr()),e.callbackNode===r?HD.bind(null,e):null}function E6(e,t){var r=Y1;return e.current.memoizedState.isDehydrated&&(Uu(e,t).flags|=256),e=N2(e,t),e!==2&&(t=Pn,Pn=r,t!==null&&T6(t)),e}function T6(e){Pn===null?Pn=e:Pn.push.apply(Pn,e)}function VU(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var n=r[i],s=n.getSnapshot;n=n.value;try{if(!Ba(s(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function nh(e,t){for(t&=~N9,t&=~hy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Da(t),i=1<<r;e[r]=-1,t&=~i}}function fC(e){if(qt&6)throw Error(Pe(327));ep();var t=w2(e,0);if(!(t&1))return Vn(e,Vr()),null;var r=N2(e,t);if(e.tag!==0&&r===2){var i=Jx(e);i!==0&&(t=i,r=E6(e,i))}if(r===1)throw r=V0,Uu(e,0),nh(e,t),Vn(e,Vr()),r;if(r===6)throw Error(Pe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,mu(e,Pn,Zo),Vn(e,Vr()),null}function U9(e,t){var r=qt;qt|=1;try{return e(t)}finally{qt=r,qt===0&&(Ip=Vr()+500,sy&&Kh())}}function lc(e){hh!==null&&hh.tag===0&&!(qt&6)&&ep();var t=qt;qt|=1;var r=Js.transition,i=rr;try{if(Js.transition=null,rr=1,e)return e()}finally{rr=i,Js.transition=r,qt=t,!(qt&6)&&Kh()}}function j9(){ss=Id.current,yr(Id)}function Uu(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,yU(r)),$r!==null)for(r=$r.return;r!==null;){var i=r;switch(b9(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&M2();break;case 3:Dp(),yr(Un),yr(Ji),P9();break;case 5:L9(i);break;case 4:Dp();break;case 13:yr(_r);break;case 19:yr(_r);break;case 10:M9(i.type._context);break;case 22:case 23:j9()}r=r.return}if(Si=e,$r=e=Ph(e.current,null),zi=ss=t,hi=0,V0=null,N9=hy=oc=0,Pn=Y1=null,Pu!==null){for(t=0;t<Pu.length;t++)if(r=Pu[t],i=r.interleaved,i!==null){r.interleaved=null;var n=i.next,s=r.pending;if(s!==null){var a=s.next;s.next=n,i.next=a}r.pending=i}Pu=null}return e}function WD(e,t){do{var r=$r;try{if(S9(),jv.current=R2,I2){for(var i=Ar.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}I2=!1}if(ac=0,wi=ai=Ar=null,q1=!1,F0=0,k9.current=null,r===null||r.return===null){hi=1,V0=t,$r=null;break}e:{var s=e,a=r.return,o=r,l=t;if(t=zi,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=l,c=o,u=c.tag;if(!(c.mode&1)&&(u===0||u===11||u===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=tC(a);if(p!==null){p.flags&=-257,rC(p,a,o,s,t),p.mode&1&&eC(s,h,t),t=p,l=h;var f=t.updateQueue;if(f===null){var m=new Set;m.add(l),t.updateQueue=m}else f.add(l);break e}else{if(!(t&1)){eC(s,h,t),V9();break e}l=Error(Pe(426))}}else if(wr&&o.mode&1){var g=tC(a);if(g!==null){!(g.flags&65536)&&(g.flags|=256),rC(g,a,o,s,t),_9(Op(l,o));break e}}s=l=Op(l,o),hi!==4&&(hi=2),Y1===null?Y1=[s]:Y1.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var v=TD(s,l,t);X_(s,v);break e;case 1:o=l;var y=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Th===null||!Th.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=LD(s,o,t);X_(s,w);break e}}s=s.return}while(s!==null)}YD(r)}catch(_){t=_,$r===r&&r!==null&&($r=r=r.return);continue}break}while(1)}function qD(){var e=B2.current;return B2.current=R2,e===null?R2:e}function V9(){(hi===0||hi===3||hi===2)&&(hi=4),Si===null||!(oc&268435455)&&!(hy&268435455)||nh(Si,zi)}function N2(e,t){var r=qt;qt|=2;var i=qD();(Si!==e||zi!==t)&&(Zo=null,Uu(e,t));do try{GU();break}catch(n){WD(e,n)}while(1);if(S9(),qt=r,B2.current=i,$r!==null)throw Error(Pe(261));return Si=null,zi=0,hi}function GU(){for(;$r!==null;)XD($r)}function HU(){for(;$r!==null&&!mF();)XD($r)}function XD(e){var t=ZD(e.alternate,e,ss);e.memoizedProps=e.pendingProps,t===null?YD(e):$r=t,k9.current=null}function YD(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=kU(r,t),r!==null){r.flags&=32767,$r=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{hi=6,$r=null;return}}else if(r=zU(r,t,ss),r!==null){$r=r;return}if(t=t.sibling,t!==null){$r=t;return}$r=t=e}while(t!==null);hi===0&&(hi=5)}function mu(e,t,r){var i=rr,n=Js.transition;try{Js.transition=null,rr=1,WU(e,t,r,i)}finally{Js.transition=n,rr=i}return null}function WU(e,t,r,i){do ep();while(hh!==null);if(qt&6)throw Error(Pe(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Pe(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(MF(e,s),e===Si&&($r=Si=null,zi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||tg||(tg=!0,KD(x2,function(){return ep(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Js.transition,Js.transition=null;var a=rr;rr=1;var o=qt;qt|=4,k9.current=null,FU(e,r),VD(r,e),cU(s6),b2=!!n6,s6=n6=null,e.current=r,UU(r),gF(),qt=o,rr=a,Js.transition=s}else e.current=r;if(tg&&(tg=!1,hh=e,k2=n),s=e.pendingLanes,s===0&&(Th=null),xF(r.stateNode),Vn(e,Vr()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],i(n.value,{componentStack:n.stack,digest:n.digest});if(z2)throw z2=!1,e=M6,M6=null,e;return k2&1&&e.tag!==0&&ep(),s=e.pendingLanes,s&1?e===A6?Q1++:(Q1=0,A6=e):Q1=0,Kh(),null}function ep(){if(hh!==null){var e=EP(k2),t=Js.transition,r=rr;try{if(Js.transition=null,rr=16>e?16:e,hh===null)var i=!1;else{if(e=hh,hh=null,k2=0,qt&6)throw Error(Pe(331));var n=qt;for(qt|=4,Je=e.current;Je!==null;){var s=Je,a=s.child;if(Je.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var h=o[l];for(Je=h;Je!==null;){var c=Je;switch(c.tag){case 0:case 11:case 15:X1(8,c,s)}var u=c.child;if(u!==null)u.return=c,Je=u;else for(;Je!==null;){c=Je;var d=c.sibling,p=c.return;if(FD(c),c===h){Je=null;break}if(d!==null){d.return=p,Je=d;break}Je=p}}}var f=s.alternate;if(f!==null){var m=f.child;if(m!==null){f.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Je=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,Je=a;else e:for(;Je!==null;){if(s=Je,s.flags&2048)switch(s.tag){case 0:case 11:case 15:X1(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Je=v;break e}Je=s.return}}var y=e.current;for(Je=y;Je!==null;){a=Je;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,Je=x;else e:for(a=y;Je!==null;){if(o=Je,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:ly(9,o)}}catch(_){Dr(o,o.return,_)}if(o===a){Je=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,Je=w;break e}Je=o.return}}if(qt=n,Kh(),yo&&typeof yo.onPostCommitFiberRoot=="function")try{yo.onPostCommitFiberRoot(ey,e)}catch{}i=!0}return i}finally{rr=r,Js.transition=t}}return!1}function mC(e,t,r){t=Op(r,t),t=TD(e,t,1),e=Eh(e,t,1),t=bn(),e!==null&&(wm(e,1,t),Vn(e,t))}function Dr(e,t,r){if(e.tag===3)mC(e,e,r);else for(;t!==null;){if(t.tag===3){mC(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Th===null||!Th.has(i))){e=Op(r,e),e=LD(t,e,1),t=Eh(t,e,1),e=bn(),t!==null&&(wm(t,1,e),Vn(t,e));break}}t=t.return}}function qU(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=bn(),e.pingedLanes|=e.suspendedLanes&r,Si===e&&(zi&r)===r&&(hi===4||hi===3&&(zi&130023424)===zi&&500>Vr()-F9?Uu(e,0):N9|=r),Vn(e,t)}function QD(e,t){t===0&&(e.mode&1?(t=Wm,Wm<<=1,!(Wm&130023424)&&(Wm=4194304)):t=1);var r=bn();e=Al(e,t),e!==null&&(wm(e,t,r),Vn(e,r))}function XU(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),QD(e,r)}function YU(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Pe(314))}i!==null&&i.delete(t),QD(e,r)}var ZD;ZD=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Un.current)zn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return zn=!1,BU(e,t,r);zn=!!(e.flags&131072)}else zn=!1,wr&&t.flags&1048576&&JP(t,T2,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Gv(e,t),e=t.pendingProps;var n=Tp(t,Ji.current);Jd(t,r),n=O9(null,t,i,e,n,r);var s=I9();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,jn(i)?(s=!0,A2(t)):s=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,E9(t),n.updater=ay,t.stateNode=n,n._reactInternals=t,f6(t,i,e,r),t=v6(null,t,i,!0,s,r)):(t.tag=0,wr&&s&&w9(t),hn(null,t,n,r),t=t.child),t;case 16:i=t.elementType;e:{switch(Gv(e,t),e=t.pendingProps,n=i._init,i=n(i._payload),t.type=i,n=t.tag=ZU(i),e=xa(i,e),n){case 0:t=g6(null,t,i,e,r);break e;case 1:t=sC(null,t,i,e,r);break e;case 11:t=iC(null,t,i,e,r);break e;case 14:t=nC(null,t,i,xa(i.type,e),r);break e}throw Error(Pe(306,i,""))}return t;case 0:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:xa(i,n),g6(e,t,i,n,r);case 1:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:xa(i,n),sC(e,t,i,n,r);case 3:e:{if(ID(t),e===null)throw Error(Pe(387));i=t.pendingProps,s=t.memoizedState,n=s.element,iD(e,t),D2(t,i,null,r);var a=t.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){n=Op(Error(Pe(423)),t),t=aC(e,t,i,r,n);break e}else if(i!==n){n=Op(Error(Pe(424)),t),t=aC(e,t,i,r,n);break e}else for(ds=Ah(t.stateNode.containerInfo.firstChild),ys=t,wr=!0,_a=null,r=oD(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Lp(),i===n){t=El(e,t,r);break e}hn(e,t,i,r)}t=t.child}return t;case 5:return lD(t),e===null&&c6(t),i=t.type,n=t.pendingProps,s=e!==null?e.memoizedProps:null,a=n.children,a6(i,n)?a=null:s!==null&&a6(i,s)&&(t.flags|=32),OD(e,t),hn(e,t,a,r),t.child;case 6:return e===null&&c6(t),null;case 13:return RD(e,t,r);case 4:return T9(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Pp(t,null,i,r):hn(e,t,i,r),t.child;case 11:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:xa(i,n),iC(e,t,i,n,r);case 7:return hn(e,t,t.pendingProps,r),t.child;case 8:return hn(e,t,t.pendingProps.children,r),t.child;case 12:return hn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,n=t.pendingProps,s=t.memoizedProps,a=n.value,fr(L2,i._currentValue),i._currentValue=a,s!==null)if(Ba(s.value,a)){if(s.children===n.children&&!Un.current){t=El(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=vl(-1,r&-r),l.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var c=h.pending;c===null?l.next=l:(l.next=c.next,c.next=l),h.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),d6(s.return,r,t),o.lanes|=r;break}l=l.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Pe(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),d6(a,r,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}hn(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,i=t.pendingProps.children,Jd(t,r),n=na(n),i=i(n),t.flags|=1,hn(e,t,i,r),t.child;case 14:return i=t.type,n=xa(i,t.pendingProps),n=xa(i.type,n),nC(e,t,i,n,r);case 15:return PD(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:xa(i,n),Gv(e,t),t.tag=1,jn(i)?(e=!0,A2(t)):e=!1,Jd(t,r),sD(t,i,n),f6(t,i,n,r),v6(null,t,i,!0,e,r);case 19:return BD(e,t,r);case 22:return DD(e,t,r)}throw Error(Pe(156,t.tag))};function KD(e,t){return CP(e,t)}function QU(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xs(e,t,r,i){return new QU(e,t,r,i)}function G9(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ZU(e){if(typeof e=="function")return G9(e)?1:0;if(e!=null){if(e=e.$$typeof,e===l9)return 11;if(e===h9)return 14}return 2}function Ph(e,t){var r=e.alternate;return r===null?(r=Xs(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function qv(e,t,r,i,n,s){var a=2;if(i=e,typeof e=="function")G9(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Cd:return ju(r.children,n,s,t);case o9:a=8,n|=8;break;case Nx:return e=Xs(12,r,t,n|2),e.elementType=Nx,e.lanes=s,e;case Fx:return e=Xs(13,r,t,n),e.elementType=Fx,e.lanes=s,e;case Ux:return e=Xs(19,r,t,n),e.elementType=Ux,e.lanes=s,e;case aP:return uy(r,n,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nP:a=10;break e;case sP:a=9;break e;case l9:a=11;break e;case h9:a=14;break e;case eh:a=16,i=null;break e}throw Error(Pe(130,e==null?e:typeof e,""))}return t=Xs(a,r,t,n),t.elementType=e,t.type=i,t.lanes=s,t}function ju(e,t,r,i){return e=Xs(7,e,i,t),e.lanes=r,e}function uy(e,t,r,i){return e=Xs(22,e,i,t),e.elementType=aP,e.lanes=r,e.stateNode={isHidden:!1},e}function x4(e,t,r){return e=Xs(6,e,null,t),e.lanes=r,e}function w4(e,t,r){return t=Xs(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function KU(e,t,r,i,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=e4(0),this.expirationTimes=e4(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=e4(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function H9(e,t,r,i,n,s,a,o,l){return e=new KU(e,t,r,o,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Xs(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},E9(s),e}function $U(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_d,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function $D(e){if(!e)return Vh;e=e._reactInternals;e:{if(_c(e)!==e||e.tag!==1)throw Error(Pe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(jn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Pe(171))}if(e.tag===1){var r=e.type;if(jn(r))return KP(e,r,t)}return t}function JD(e,t,r,i,n,s,a,o,l){return e=H9(r,i,!0,e,n,s,a,o,l),e.context=$D(null),r=e.current,i=bn(),n=Lh(r),s=vl(i,n),s.callback=t??null,Eh(r,s,n),e.current.lanes=n,wm(e,n,i),Vn(e,i),e}function cy(e,t,r,i){var n=t.current,s=bn(),a=Lh(n);return r=$D(r),t.context===null?t.context=r:t.pendingContext=r,t=vl(s,a),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Eh(n,t,a),e!==null&&(Oa(e,n,a,s),Uv(e,n,a)),a}function F2(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function gC(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function W9(e,t){gC(e,t),(e=e.alternate)&&gC(e,t)}function JU(){return null}var eO=typeof reportError=="function"?reportError:function(e){console.error(e)};function q9(e){this._internalRoot=e}dy.prototype.render=q9.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Pe(409));cy(e,t,null,null)};dy.prototype.unmount=q9.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;lc(function(){cy(null,e,null,null)}),t[Ml]=null}};function dy(e){this._internalRoot=e}dy.prototype.unstable_scheduleHydration=function(e){if(e){var t=PP();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ih.length&&t!==0&&t<ih[r].priority;r++);ih.splice(r,0,e),r===0&&OP(e)}};function X9(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function py(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function vC(){}function ej(e,t,r,i,n){if(n){if(typeof i=="function"){var s=i;i=function(){var h=F2(a);s.call(h)}}var a=JD(t,i,e,0,null,!1,!1,"",vC);return e._reactRootContainer=a,e[Ml]=a.current,R0(e.nodeType===8?e.parentNode:e),lc(),a}for(;n=e.lastChild;)e.removeChild(n);if(typeof i=="function"){var o=i;i=function(){var h=F2(l);o.call(h)}}var l=H9(e,0,!1,null,null,!1,!1,"",vC);return e._reactRootContainer=l,e[Ml]=l.current,R0(e.nodeType===8?e.parentNode:e),lc(function(){cy(t,l,r,i)}),l}function fy(e,t,r,i,n){var s=r._reactRootContainer;if(s){var a=s;if(typeof n=="function"){var o=n;n=function(){var l=F2(a);o.call(l)}}cy(t,a,e,n)}else a=ej(r,t,e,n,i);return F2(a)}TP=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=_1(t.pendingLanes);r!==0&&(d9(t,r|1),Vn(t,Vr()),!(qt&6)&&(Ip=Vr()+500,Kh()))}break;case 13:lc(function(){var i=Al(e,1);if(i!==null){var n=bn();Oa(i,e,1,n)}}),W9(e,1)}};p9=function(e){if(e.tag===13){var t=Al(e,134217728);if(t!==null){var r=bn();Oa(t,e,134217728,r)}W9(e,134217728)}};LP=function(e){if(e.tag===13){var t=Lh(e),r=Al(e,t);if(r!==null){var i=bn();Oa(r,e,t,i)}W9(e,t)}};PP=function(){return rr};DP=function(e,t){var r=rr;try{return rr=e,t()}finally{rr=r}};Zx=function(e,t,r){switch(t){case"input":if(Gx(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var n=ny(i);if(!n)throw Error(Pe(90));lP(i),Gx(i,n)}}}break;case"textarea":uP(e,r);break;case"select":t=r.value,t!=null&&Qd(e,!!r.multiple,t,!1)}};vP=U9;yP=lc;var tj={usingClientEntryPoint:!1,Events:[_m,Ed,ny,mP,gP,U9]},Rf={findFiberByHostInstance:Lu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rj={bundleType:Rf.bundleType,version:Rf.version,rendererPackageName:Rf.rendererPackageName,rendererConfig:Rf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Il.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=bP(e),e===null?null:e.stateNode},findFiberByHostInstance:Rf.findFiberByHostInstance||JU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rg.isDisabled&&rg.supportsFiber)try{ey=rg.inject(rj),yo=rg}catch{}}Ss.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tj;Ss.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!X9(t))throw Error(Pe(200));return $U(e,t,null,r)};Ss.createRoot=function(e,t){if(!X9(e))throw Error(Pe(299));var r=!1,i="",n=eO;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=H9(e,1,!1,null,null,r,!1,i,n),e[Ml]=t.current,R0(e.nodeType===8?e.parentNode:e),new q9(t)};Ss.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Pe(188)):(e=Object.keys(e).join(","),Error(Pe(268,e)));return e=bP(t),e=e===null?null:e.stateNode,e};Ss.flushSync=function(e){return lc(e)};Ss.hydrate=function(e,t,r){if(!py(t))throw Error(Pe(200));return fy(null,e,t,!0,r)};Ss.hydrateRoot=function(e,t,r){if(!X9(e))throw Error(Pe(405));var i=r!=null&&r.hydratedSources||null,n=!1,s="",a=eO;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=JD(t,null,e,1,r??null,n,!1,s,a),e[Ml]=t.current,R0(e),i)for(e=0;e<i.length;e++)r=i[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new dy(t)};Ss.render=function(e,t,r){if(!py(t))throw Error(Pe(200));return fy(null,e,t,!1,r)};Ss.unmountComponentAtNode=function(e){if(!py(e))throw Error(Pe(40));return e._reactRootContainer?(lc(function(){fy(null,null,e,!1,function(){e._reactRootContainer=null,e[Ml]=null})}),!0):!1};Ss.unstable_batchedUpdates=U9;Ss.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!py(r))throw Error(Pe(200));if(e==null||e._reactInternals===void 0)throw Error(Pe(38));return fy(e,t,r,!1,i)};Ss.version="18.2.0-next-9e3b772b8-20220608";function tO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tO)}catch(e){console.error(e)}}tO(),JL.exports=Ss;var ij=JL.exports,yC=ij;zx.createRoot=yC.createRoot,zx.hydrateRoot=yC.hydrateRoot;/**
 * @remix-run/router v1.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xr(){return xr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},xr.apply(this,arguments)}var Qr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Qr||(Qr={}));const xC="popstate";function nj(e){e===void 0&&(e={});function t(i,n){let{pathname:s,search:a,hash:o}=i.location;return G0("",{pathname:s,search:a,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(i,n){return typeof n=="string"?n:hc(n)}return aj(t,r,null,e)}function Dt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Rp(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function sj(){return Math.random().toString(36).substr(2,8)}function wC(e,t){return{usr:e.state,key:e.key,idx:t}}function G0(e,t,r,i){return r===void 0&&(r=null),xr({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Rl(t):t,{state:r,key:t&&t.key||i||sj()})}function hc(e){let{pathname:t="/",search:r="",hash:i=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Rl(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function aj(e,t,r,i){i===void 0&&(i={});let{window:n=document.defaultView,v5Compat:s=!1}=i,a=n.history,o=Qr.Pop,l=null,h=c();h==null&&(h=0,a.replaceState(xr({},a.state,{idx:h}),""));function c(){return(a.state||{idx:null}).idx}function u(){o=Qr.Pop;let g=c(),v=g==null?null:g-h;h=g,l&&l({action:o,location:m.location,delta:v})}function d(g,v){o=Qr.Push;let y=G0(m.location,g,v);r&&r(y,g),h=c()+1;let x=wC(y,h),w=m.createHref(y);try{a.pushState(x,"",w)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;n.location.assign(w)}s&&l&&l({action:o,location:m.location,delta:1})}function p(g,v){o=Qr.Replace;let y=G0(m.location,g,v);r&&r(y,g),h=c();let x=wC(y,h),w=m.createHref(y);a.replaceState(x,"",w),s&&l&&l({action:o,location:m.location,delta:0})}function f(g){let v=n.location.origin!=="null"?n.location.origin:n.location.href,y=typeof g=="string"?g:hc(g);return Dt(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let m={get action(){return o},get location(){return e(n,a)},listen(g){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(xC,u),l=g,()=>{n.removeEventListener(xC,u),l=null}},createHref(g){return t(n,g)},createURL:f,encodeLocation(g){let v=f(g);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:p,go(g){return a.go(g)}};return m}var Ur;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ur||(Ur={}));const oj=new Set(["lazy","caseSensitive","path","id","index","children"]);function lj(e){return e.index===!0}function L6(e,t,r,i){return r===void 0&&(r=[]),i===void 0&&(i={}),e.map((n,s)=>{let a=[...r,s],o=typeof n.id=="string"?n.id:a.join("-");if(Dt(n.index!==!0||!n.children,"Cannot specify children on an index route"),Dt(!i[o],'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),lj(n)){let l=xr({},n,t(n),{id:o});return i[o]=l,l}else{let l=xr({},n,t(n),{id:o,children:void 0});return i[o]=l,n.children&&(l.children=L6(n.children,t,a,i)),l}})}function Rd(e,t,r){r===void 0&&(r="/");let i=typeof t=="string"?Rl(t):t,n=of(i.pathname||"/",r);if(n==null)return null;let s=rO(e);hj(s);let a=null;for(let o=0;a==null&&o<s.length;++o)a=yj(s[o],bj(n));return a}function rO(e,t,r,i){t===void 0&&(t=[]),r===void 0&&(r=[]),i===void 0&&(i="");let n=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(Dt(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let h=yl([i,l.relativePath]),c=r.concat(l);s.children&&s.children.length>0&&(Dt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),rO(s.children,t,c,h)),!(s.path==null&&!s.index)&&t.push({path:h,score:gj(h,s.index),routesMeta:c})};return e.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))n(s,a);else for(let l of iO(s.path))n(s,a,l)}),t}function iO(e){let t=e.split("/");if(t.length===0)return[];let[r,...i]=t,n=r.endsWith("?"),s=r.replace(/\?$/,"");if(i.length===0)return n?[s,""]:[s];let a=iO(i.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),n&&o.push(...a),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function hj(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:vj(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const uj=/^:\w+$/,cj=3,dj=2,pj=1,fj=10,mj=-2,bC=e=>e==="*";function gj(e,t){let r=e.split("/"),i=r.length;return r.some(bC)&&(i+=mj),t&&(i+=dj),r.filter(n=>!bC(n)).reduce((n,s)=>n+(uj.test(s)?cj:s===""?pj:fj),i)}function vj(e,t){return e.length===t.length&&e.slice(0,-1).every((i,n)=>i===t[n])?e[e.length-1]-t[t.length-1]:0}function yj(e,t){let{routesMeta:r}=e,i={},n="/",s=[];for(let a=0;a<r.length;++a){let o=r[a],l=a===r.length-1,h=n==="/"?t:t.slice(n.length)||"/",c=xj({path:o.relativePath,caseSensitive:o.caseSensitive,end:l},h);if(!c)return null;Object.assign(i,c.params);let u=o.route;s.push({params:i,pathname:yl([n,c.pathname]),pathnameBase:Mj(yl([n,c.pathnameBase])),route:u}),c.pathnameBase!=="/"&&(n=yl([n,c.pathnameBase]))}return s}function xj(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=wj(e.path,e.caseSensitive,e.end),n=t.match(r);if(!n)return null;let s=n[0],a=s.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:i.reduce((h,c,u)=>{if(c==="*"){let d=o[u]||"";a=s.slice(0,s.length-d.length).replace(/(.)\/+$/,"$1")}return h[c]=_j(o[u]||"",c),h},{}),pathname:s,pathnameBase:a,pattern:e}}function wj(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Rp(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(a,o)=>(i.push(o),"/([^\\/]+)"));return e.endsWith("*")?(i.push("*"),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),i]}function bj(e){try{return decodeURI(e)}catch(t){return Rp(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function _j(e,t){try{return decodeURIComponent(e)}catch(r){return Rp(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),e}}function of(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}function Cj(e,t){t===void 0&&(t="/");let{pathname:r,search:i="",hash:n=""}=typeof e=="string"?Rl(e):e;return{pathname:r?r.startsWith("/")?r:Sj(r,t):t,search:Aj(i),hash:Ej(n)}}function Sj(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function b4(e,t,r,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function my(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Y9(e,t,r,i){i===void 0&&(i=!1);let n;typeof e=="string"?n=Rl(e):(n=xr({},e),Dt(!n.pathname||!n.pathname.includes("?"),b4("?","pathname","search",n)),Dt(!n.pathname||!n.pathname.includes("#"),b4("#","pathname","hash",n)),Dt(!n.search||!n.search.includes("#"),b4("#","search","hash",n)));let s=e===""||n.pathname==="",a=s?"/":n.pathname,o;if(i||a==null)o=r;else{let u=t.length-1;if(a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),u-=1;n.pathname=d.join("/")}o=u>=0?t[u]:"/"}let l=Cj(n,o),h=a&&a!=="/"&&a.endsWith("/"),c=(s||a===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(h||c)&&(l.pathname+="/"),l}const yl=e=>e.join("/").replace(/\/\/+/g,"/"),Mj=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Aj=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Ej=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class Q9{constructor(t,r,i,n){n===void 0&&(n=!1),this.status=t,this.statusText=r||"",this.internal=n,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function nO(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const sO=["post","put","patch","delete"],Tj=new Set(sO),Lj=["get",...sO],Pj=new Set(Lj),Dj=new Set([301,302,303,307,308]),Oj=new Set([307,308]),_4={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ij={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Bf={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},aO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rj=e=>({hasErrorBoundary:!!e.hasErrorBoundary});function Bj(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",i=!r;Dt(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let n;if(e.mapRouteProperties)n=e.mapRouteProperties;else if(e.detectErrorBoundary){let $=e.detectErrorBoundary;n=te=>({hasErrorBoundary:$(te)})}else n=Rj;let s={},a=L6(e.routes,n,void 0,s),o,l=e.basename||"/",h=xr({v7_normalizeFormMethod:!1,v7_prependBasename:!1},e.future),c=null,u=new Set,d=null,p=null,f=null,m=e.hydrationData!=null,g=Rd(a,e.history.location,l),v=null;if(g==null){let $=zs(404,{pathname:e.history.location.pathname}),{matches:te,route:ve}=LC(a);g=te,v={[ve.id]:$}}let y=!g.some($=>$.route.lazy)&&(!g.some($=>$.route.loader)||e.hydrationData!=null),x,w={historyAction:e.history.action,location:e.history.location,matches:g,initialized:y,navigation:_4,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||v,fetchers:new Map,blockers:new Map},_=Qr.Pop,b=!1,S,C=!1,M=!1,A=[],T=[],L=new Map,D=0,O=-1,z=new Map,q=new Set,N=new Map,I=new Map,W=new Map,P=!1;function V(){return c=e.history.listen($=>{let{action:te,location:ve,delta:Te}=$;if(P){P=!1;return}Rp(W.size===0||Te!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let He=Ee({currentLocation:w.location,nextLocation:ve,historyAction:te});if(He&&Te!=null){P=!0,e.history.go(Te*-1),ye(He,{state:"blocked",location:ve,proceed(){ye(He,{state:"proceeding",proceed:void 0,reset:void 0,location:ve}),e.history.go(Te)},reset(){let j=new Map(w.blockers);j.set(He,Bf),U({blockers:j})}});return}return J(te,ve)}),w.initialized||J(Qr.Pop,w.location),x}function G(){c&&c(),u.clear(),S&&S.abort(),w.fetchers.forEach(($,te)=>Me(te)),w.blockers.forEach(($,te)=>xe(te))}function Q($){return u.add($),()=>u.delete($)}function U($){w=xr({},w,$),u.forEach(te=>te(w))}function Y($,te){var ve,Te;let He=w.actionData!=null&&w.navigation.formMethod!=null&&ba(w.navigation.formMethod)&&w.navigation.state==="loading"&&((ve=$.state)==null?void 0:ve._isRedirect)!==!0,j;te.actionData?Object.keys(te.actionData).length>0?j=te.actionData:j=null:He?j=w.actionData:j=null;let se=te.loaderData?TC(w.loaderData,te.loaderData,te.matches||[],te.errors):w.loaderData,ae=w.blockers;ae.size>0&&(ae=new Map(ae),ae.forEach((Oe,tt)=>ae.set(tt,Bf)));let me=b===!0||w.navigation.formMethod!=null&&ba(w.navigation.formMethod)&&((Te=$.state)==null?void 0:Te._isRedirect)!==!0;o&&(a=o,o=void 0),C||_===Qr.Pop||(_===Qr.Push?e.history.push($,$.state):_===Qr.Replace&&e.history.replace($,$.state)),U(xr({},te,{actionData:j,loaderData:se,historyAction:_,location:$,initialized:!0,navigation:_4,revalidation:"idle",restoreScrollPosition:Fe($,te.matches||w.matches),preventScrollReset:me,blockers:ae})),_=Qr.Pop,b=!1,C=!1,M=!1,A=[],T=[]}async function H($,te){if(typeof $=="number"){e.history.go($);return}let ve=P6(w.location,w.matches,l,h.v7_prependBasename,$,te==null?void 0:te.fromRouteId,te==null?void 0:te.relative),{path:Te,submission:He,error:j}=_C(h.v7_normalizeFormMethod,!1,ve,te),se=w.location,ae=G0(w.location,Te,te&&te.state);ae=xr({},ae,e.history.encodeLocation(ae));let me=te&&te.replace!=null?te.replace:void 0,Oe=Qr.Push;me===!0?Oe=Qr.Replace:me===!1||He!=null&&ba(He.formMethod)&&He.formAction===w.location.pathname+w.location.search&&(Oe=Qr.Replace);let tt=te&&"preventScrollReset"in te?te.preventScrollReset===!0:void 0,nt=Ee({currentLocation:se,nextLocation:ae,historyAction:Oe});if(nt){ye(nt,{state:"blocked",location:ae,proceed(){ye(nt,{state:"proceeding",proceed:void 0,reset:void 0,location:ae}),H($,te)},reset(){let gt=new Map(w.blockers);gt.set(nt,Bf),U({blockers:gt})}});return}return await J(Oe,ae,{submission:He,pendingError:j,preventScrollReset:tt,replace:te&&te.replace})}function ie(){if(K(),U({revalidation:"loading"}),w.navigation.state!=="submitting"){if(w.navigation.state==="idle"){J(w.historyAction,w.location,{startUninterruptedRevalidation:!0});return}J(_||w.historyAction,w.navigation.location,{overrideNavigation:w.navigation})}}async function J($,te,ve){S&&S.abort(),S=null,_=$,C=(ve&&ve.startUninterruptedRevalidation)===!0,je(w.location,w.matches),b=(ve&&ve.preventScrollReset)===!0;let Te=o||a,He=ve&&ve.overrideNavigation,j=Rd(Te,te,l);if(!j){let gt=zs(404,{pathname:te.pathname}),{matches:Ze,route:Re}=LC(Te);Ue(),Y(te,{matches:Ze,loaderData:{},errors:{[Re.id]:gt}});return}if(w.initialized&&!M&&Uj(w.location,te)&&!(ve&&ve.submission&&ba(ve.submission.formMethod))){Y(te,{matches:j});return}S=new AbortController;let se=kf(e.history,te,S.signal,ve&&ve.submission),ae,me;if(ve&&ve.pendingError)me={[Bd(j).route.id]:ve.pendingError};else if(ve&&ve.submission&&ba(ve.submission.formMethod)){let gt=await ee(se,te,ve.submission,j,{replace:ve.replace});if(gt.shortCircuited)return;ae=gt.pendingActionData,me=gt.pendingActionError,He=ig(te,ve.submission),se=new Request(se.url,{signal:se.signal})}let{shortCircuited:Oe,loaderData:tt,errors:nt}=await ne(se,te,j,He,ve&&ve.submission,ve&&ve.fetcherSubmission,ve&&ve.replace,ae,me);Oe||(S=null,Y(te,xr({matches:j},ae?{actionData:ae}:{},{loaderData:tt,errors:nt})))}async function ee($,te,ve,Te,He){He===void 0&&(He={}),K();let j=Wj(te,ve);U({navigation:j});let se,ae=O6(Te,te);if(!ae.route.action&&!ae.route.lazy)se={type:Ur.error,error:zs(405,{method:$.method,pathname:te.pathname,routeId:ae.route.id})};else if(se=await zf("action",$,ae,Te,s,n,l),$.signal.aborted)return{shortCircuited:!0};if(tp(se)){let me;return He&&He.replace!=null?me=He.replace:me=se.location===w.location.pathname+w.location.search,await _e(w,se,{submission:ve,replace:me}),{shortCircuited:!0}}if(Z1(se)){let me=Bd(Te,ae.route.id);return(He&&He.replace)!==!0&&(_=Qr.Push),{pendingActionData:{},pendingActionError:{[me.route.id]:se.error}}}if(Ou(se))throw zs(400,{type:"defer-action"});return{pendingActionData:{[ae.route.id]:se.data}}}async function ne($,te,ve,Te,He,j,se,ae,me){let Oe=Te||ig(te,He),tt=He||j||OC(Oe),nt=o||a,[gt,Ze]=CC(e.history,w,ve,tt,te,M,A,T,N,q,nt,l,ae,me);if(Ue(Z=>!(ve&&ve.some(ue=>ue.route.id===Z))||gt&&gt.some(ue=>ue.route.id===Z)),O=++D,gt.length===0&&Ze.length===0){let Z=F();return Y(te,xr({matches:ve,loaderData:{},errors:me||null},ae?{actionData:ae}:{},Z?{fetchers:new Map(w.fetchers)}:{})),{shortCircuited:!0}}if(!C){Ze.forEach(ue=>{let De=w.fetchers.get(ue.key),Ve=Nf(void 0,De?De.data:void 0);w.fetchers.set(ue.key,Ve)});let Z=ae||w.actionData;U(xr({navigation:Oe},Z?Object.keys(Z).length===0?{actionData:null}:{actionData:Z}:{},Ze.length>0?{fetchers:new Map(w.fetchers)}:{}))}Ze.forEach(Z=>{L.has(Z.key)&&Ge(Z.key),Z.controller&&L.set(Z.key,Z.controller)});let Re=()=>Ze.forEach(Z=>Ge(Z.key));S&&S.signal.addEventListener("abort",Re);let{results:mt,loaderResults:Pt,fetcherResults:We}=await ze(w.matches,ve,gt,Ze,$);if($.signal.aborted)return{shortCircuited:!0};S&&S.signal.removeEventListener("abort",Re),Ze.forEach(Z=>L.delete(Z.key));let yt=PC(mt);if(yt){if(yt.idx>=gt.length){let Z=Ze[yt.idx-gt.length].key;q.add(Z)}return await _e(w,yt.result,{replace:se}),{shortCircuited:!0}}let{loaderData:rt,errors:St}=EC(w,ve,gt,Pt,me,Ze,We,I);I.forEach((Z,ue)=>{Z.subscribe(De=>{(De||Z.done)&&I.delete(ue)})});let k=F(),re=B(O),de=k||re||Ze.length>0;return xr({loaderData:rt,errors:St},de?{fetchers:new Map(w.fetchers)}:{})}function he($){return w.fetchers.get($)||Ij}function ge($,te,ve,Te){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");L.has($)&&Ge($);let He=o||a,j=P6(w.location,w.matches,l,h.v7_prependBasename,ve,te,Te==null?void 0:Te.relative),se=Rd(He,j,l);if(!se){Ce($,te,zs(404,{pathname:j}));return}let{path:ae,submission:me,error:Oe}=_C(h.v7_normalizeFormMethod,!0,j,Te);if(Oe){Ce($,te,Oe);return}let tt=O6(se,ae);if(b=(Te&&Te.preventScrollReset)===!0,me&&ba(me.formMethod)){ce($,te,ae,tt,se,me);return}N.set($,{routeId:te,path:ae}),Le($,te,ae,tt,se,me)}async function ce($,te,ve,Te,He,j){if(K(),N.delete($),!Te.route.action&&!Te.route.lazy){let Ye=zs(405,{method:j.formMethod,pathname:ve,routeId:te});Ce($,te,Ye);return}let se=w.fetchers.get($),ae=qj(j,se);w.fetchers.set($,ae),U({fetchers:new Map(w.fetchers)});let me=new AbortController,Oe=kf(e.history,ve,me.signal,j);L.set($,me);let tt=D,nt=await zf("action",Oe,Te,He,s,n,l);if(Oe.signal.aborted){L.get($)===me&&L.delete($);return}if(tp(nt))if(L.delete($),O>tt){let Ye=dd(void 0);w.fetchers.set($,Ye),U({fetchers:new Map(w.fetchers)});return}else{q.add($);let Ye=Nf(j);return w.fetchers.set($,Ye),U({fetchers:new Map(w.fetchers)}),_e(w,nt,{submission:j,isFetchActionRedirect:!0})}if(Z1(nt)){Ce($,te,nt.error);return}if(Ou(nt))throw zs(400,{type:"defer-action"});let gt=w.navigation.location||w.location,Ze=kf(e.history,gt,me.signal),Re=o||a,mt=w.navigation.state!=="idle"?Rd(Re,w.navigation.location,l):w.matches;Dt(mt,"Didn't find any matches after fetcher action");let Pt=++D;z.set($,Pt);let We=Nf(j,nt.data);w.fetchers.set($,We);let[yt,rt]=CC(e.history,w,mt,j,gt,M,A,T,N,q,Re,l,{[Te.route.id]:nt.data},void 0);rt.filter(Ye=>Ye.key!==$).forEach(Ye=>{let $e=Ye.key,Mt=w.fetchers.get($e),wt=Nf(void 0,Mt?Mt.data:void 0);w.fetchers.set($e,wt),L.has($e)&&Ge($e),Ye.controller&&L.set($e,Ye.controller)}),U({fetchers:new Map(w.fetchers)});let St=()=>rt.forEach(Ye=>Ge(Ye.key));me.signal.addEventListener("abort",St);let{results:k,loaderResults:re,fetcherResults:de}=await ze(w.matches,mt,yt,rt,Ze);if(me.signal.aborted)return;me.signal.removeEventListener("abort",St),z.delete($),L.delete($),rt.forEach(Ye=>L.delete(Ye.key));let Z=PC(k);if(Z){if(Z.idx>=yt.length){let Ye=rt[Z.idx-yt.length].key;q.add(Ye)}return _e(w,Z.result)}let{loaderData:ue,errors:De}=EC(w,w.matches,yt,re,void 0,rt,de,I);if(w.fetchers.has($)){let Ye=dd(nt.data);w.fetchers.set($,Ye)}let Ve=B(Pt);w.navigation.state==="loading"&&Pt>O?(Dt(_,"Expected pending action"),S&&S.abort(),Y(w.navigation.location,{matches:mt,loaderData:ue,errors:De,fetchers:new Map(w.fetchers)})):(U(xr({errors:De,loaderData:TC(w.loaderData,ue,mt,De)},Ve||rt.length>0?{fetchers:new Map(w.fetchers)}:{})),M=!1)}async function Le($,te,ve,Te,He,j){let se=w.fetchers.get($),ae=Nf(j,se?se.data:void 0);w.fetchers.set($,ae),U({fetchers:new Map(w.fetchers)});let me=new AbortController,Oe=kf(e.history,ve,me.signal);L.set($,me);let tt=D,nt=await zf("loader",Oe,Te,He,s,n,l);if(Ou(nt)&&(nt=await hO(nt,Oe.signal,!0)||nt),L.get($)===me&&L.delete($),Oe.signal.aborted)return;if(tp(nt))if(O>tt){let Ze=dd(void 0);w.fetchers.set($,Ze),U({fetchers:new Map(w.fetchers)});return}else{q.add($),await _e(w,nt);return}if(Z1(nt)){let Ze=Bd(w.matches,te);w.fetchers.delete($),U({fetchers:new Map(w.fetchers),errors:{[Ze.route.id]:nt.error}});return}Dt(!Ou(nt),"Unhandled fetcher deferred data");let gt=dd(nt.data);w.fetchers.set($,gt),U({fetchers:new Map(w.fetchers)})}async function _e($,te,ve){let{submission:Te,replace:He,isFetchActionRedirect:j}=ve===void 0?{}:ve;te.revalidate&&(M=!0);let se=G0($.location,te.location,xr({_isRedirect:!0},j?{_isFetchActionRedirect:!0}:{}));if(Dt(se,"Expected a location on the redirect navigation"),r){let Oe=!1;if(te.reloadDocument)Oe=!0;else if(aO.test(te.location)){const tt=e.history.createURL(te.location);Oe=tt.origin!==t.location.origin||of(tt.pathname,l)==null}if(Oe){He?t.location.replace(te.location):t.location.assign(te.location);return}}S=null;let ae=He===!0?Qr.Replace:Qr.Push,me=Te||OC($.navigation);if(Oj.has(te.status)&&me&&ba(me.formMethod))await J(ae,se,{submission:xr({},me,{formAction:te.location}),preventScrollReset:b});else if(j)await J(ae,se,{overrideNavigation:ig(se),fetcherSubmission:me,preventScrollReset:b});else{let Oe=ig(se,me);await J(ae,se,{overrideNavigation:Oe,preventScrollReset:b})}}async function ze($,te,ve,Te,He){let j=await Promise.all([...ve.map(me=>zf("loader",He,me,te,s,n,l)),...Te.map(me=>me.matches&&me.match&&me.controller?zf("loader",kf(e.history,me.path,me.controller.signal),me.match,me.matches,s,n,l):{type:Ur.error,error:zs(404,{pathname:me.path})})]),se=j.slice(0,ve.length),ae=j.slice(ve.length);return await Promise.all([DC($,ve,se,se.map(()=>He.signal),!1,w.loaderData),DC($,Te.map(me=>me.match),ae,Te.map(me=>me.controller?me.controller.signal:null),!0)]),{results:j,loaderResults:se,fetcherResults:ae}}function K(){M=!0,A.push(...Ue()),N.forEach(($,te)=>{L.has(te)&&(T.push(te),Ge(te))})}function Ce($,te,ve){let Te=Bd(w.matches,te);Me($),U({errors:{[Te.route.id]:ve},fetchers:new Map(w.fetchers)})}function Me($){let te=w.fetchers.get($);L.has($)&&!(te&&te.state==="loading"&&z.has($))&&Ge($),N.delete($),z.delete($),q.delete($),w.fetchers.delete($)}function Ge($){let te=L.get($);Dt(te,"Expected fetch controller: "+$),te.abort(),L.delete($)}function ke($){for(let te of $){let ve=he(te),Te=dd(ve.data);w.fetchers.set(te,Te)}}function F(){let $=[],te=!1;for(let ve of q){let Te=w.fetchers.get(ve);Dt(Te,"Expected fetcher: "+ve),Te.state==="loading"&&(q.delete(ve),$.push(ve),te=!0)}return ke($),te}function B($){let te=[];for(let[ve,Te]of z)if(Te<$){let He=w.fetchers.get(ve);Dt(He,"Expected fetcher: "+ve),He.state==="loading"&&(Ge(ve),z.delete(ve),te.push(ve))}return ke(te),te.length>0}function le($,te){let ve=w.blockers.get($)||Bf;return W.get($)!==te&&W.set($,te),ve}function xe($){w.blockers.delete($),W.delete($)}function ye($,te){let ve=w.blockers.get($)||Bf;Dt(ve.state==="unblocked"&&te.state==="blocked"||ve.state==="blocked"&&te.state==="blocked"||ve.state==="blocked"&&te.state==="proceeding"||ve.state==="blocked"&&te.state==="unblocked"||ve.state==="proceeding"&&te.state==="unblocked","Invalid blocker state transition: "+ve.state+" -> "+te.state);let Te=new Map(w.blockers);Te.set($,te),U({blockers:Te})}function Ee($){let{currentLocation:te,nextLocation:ve,historyAction:Te}=$;if(W.size===0)return;W.size>1&&Rp(!1,"A router only supports one blocker at a time");let He=Array.from(W.entries()),[j,se]=He[He.length-1],ae=w.blockers.get(j);if(!(ae&&ae.state==="proceeding")&&se({currentLocation:te,nextLocation:ve,historyAction:Te}))return j}function Ue($){let te=[];return I.forEach((ve,Te)=>{(!$||$(Te))&&(ve.cancel(),te.push(Te),I.delete(Te))}),te}function Ne($,te,ve){if(d=$,f=te,p=ve||null,!m&&w.navigation===_4){m=!0;let Te=Fe(w.location,w.matches);Te!=null&&U({restoreScrollPosition:Te})}return()=>{d=null,f=null,p=null}}function fe($,te){return p&&p($,te.map(Te=>Hj(Te,w.loaderData)))||$.key}function je($,te){if(d&&f){let ve=fe($,te);d[ve]=f()}}function Fe($,te){if(d){let ve=fe($,te),Te=d[ve];if(typeof Te=="number")return Te}return null}function Qe($){s={},o=L6($,n,void 0,s)}return x={get basename(){return l},get state(){return w},get routes(){return a},initialize:V,subscribe:Q,enableScrollRestoration:Ne,navigate:H,fetch:ge,revalidate:ie,createHref:$=>e.history.createHref($),encodeLocation:$=>e.history.encodeLocation($),getFetcher:he,deleteFetcher:Me,dispose:G,getBlocker:le,deleteBlocker:xe,_internalFetchControllers:L,_internalActiveDeferreds:I,_internalSetRoutes:Qe},x}function zj(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function P6(e,t,r,i,n,s,a){let o,l;if(s!=null&&a!=="path"){o=[];for(let c of t)if(o.push(c),c.route.id===s){l=c;break}}else o=t,l=t[t.length-1];let h=Y9(n||".",my(o).map(c=>c.pathnameBase),of(e.pathname,r)||e.pathname,a==="path");return n==null&&(h.search=e.search,h.hash=e.hash),(n==null||n===""||n===".")&&l&&l.route.index&&!Z9(h.search)&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),i&&r!=="/"&&(h.pathname=h.pathname==="/"?r:yl([r,h.pathname])),hc(h)}function _C(e,t,r,i){if(!i||!zj(i))return{path:r};if(i.formMethod&&!Gj(i.formMethod))return{path:r,error:zs(405,{method:i.formMethod})};let n=()=>({path:r,error:zs(400,{type:"invalid-body"})}),s=i.formMethod||"get",a=e?s.toUpperCase():s.toLowerCase(),o=lO(r);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!ba(a))return n();let d=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((p,f)=>{let[m,g]=f;return""+p+m+"="+g+`
`},""):String(i.body);return{path:r,submission:{formMethod:a,formAction:o,formEncType:i.formEncType,formData:void 0,json:void 0,text:d}}}else if(i.formEncType==="application/json"){if(!ba(a))return n();try{let d=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:r,submission:{formMethod:a,formAction:o,formEncType:i.formEncType,formData:void 0,json:d,text:void 0}}}catch{return n()}}}Dt(typeof FormData=="function","FormData is not available in this environment");let l,h;if(i.formData)l=D6(i.formData),h=i.formData;else if(i.body instanceof FormData)l=D6(i.body),h=i.body;else if(i.body instanceof URLSearchParams)l=i.body,h=AC(l);else if(i.body==null)l=new URLSearchParams,h=new FormData;else try{l=new URLSearchParams(i.body),h=AC(l)}catch{return n()}let c={formMethod:a,formAction:o,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:h,json:void 0,text:void 0};if(ba(c.formMethod))return{path:r,submission:c};let u=Rl(r);return t&&u.search&&Z9(u.search)&&l.append("index",""),u.search="?"+l,{path:hc(u),submission:c}}function kj(e,t){let r=e;if(t){let i=e.findIndex(n=>n.route.id===t);i>=0&&(r=e.slice(0,i))}return r}function CC(e,t,r,i,n,s,a,o,l,h,c,u,d,p){let f=p?Object.values(p)[0]:d?Object.values(d)[0]:void 0,m=e.createURL(t.location),g=e.createURL(n),v=p?Object.keys(p)[0]:void 0,x=kj(r,v).filter((_,b)=>{if(_.route.lazy)return!0;if(_.route.loader==null)return!1;if(Nj(t.loaderData,t.matches[b],_)||a.some(M=>M===_.route.id))return!0;let S=t.matches[b],C=_;return SC(_,xr({currentUrl:m,currentParams:S.params,nextUrl:g,nextParams:C.params},i,{actionResult:f,defaultShouldRevalidate:s||m.pathname+m.search===g.pathname+g.search||m.search!==g.search||oO(S,C)}))}),w=[];return l.forEach((_,b)=>{if(!r.some(T=>T.route.id===_.routeId))return;let S=Rd(c,_.path,u);if(!S){w.push({key:b,routeId:_.routeId,path:_.path,matches:null,match:null,controller:null});return}let C=t.fetchers.get(b),M=O6(S,_.path),A=!1;h.has(b)?A=!1:o.includes(b)?A=!0:C&&C.state!=="idle"&&C.data===void 0?A=s:A=SC(M,xr({currentUrl:m,currentParams:t.matches[t.matches.length-1].params,nextUrl:g,nextParams:r[r.length-1].params},i,{actionResult:f,defaultShouldRevalidate:s})),A&&w.push({key:b,routeId:_.routeId,path:_.path,matches:S,match:M,controller:new AbortController})}),[x,w]}function Nj(e,t,r){let i=!t||r.route.id!==t.route.id,n=e[r.route.id]===void 0;return i||n}function oO(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function SC(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function MC(e,t,r){if(!e.lazy)return;let i=await e.lazy();if(!e.lazy)return;let n=r[e.id];Dt(n,"No route found in manifest");let s={};for(let a in i){let l=n[a]!==void 0&&a!=="hasErrorBoundary";Rp(!l,'Route "'+n.id+'" has a static property "'+a+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+a+'" will be ignored.')),!l&&!oj.has(a)&&(s[a]=i[a])}Object.assign(n,s),Object.assign(n,xr({},t(n),{lazy:void 0}))}async function zf(e,t,r,i,n,s,a,o){o===void 0&&(o={});let l,h,c,u=f=>{let m,g=new Promise((v,y)=>m=y);return c=()=>m(),t.signal.addEventListener("abort",c),Promise.race([f({request:t,params:r.params,context:o.requestContext}),g])};try{let f=r.route[e];if(r.route.lazy)if(f)h=(await Promise.all([u(f),MC(r.route,s,n)]))[0];else if(await MC(r.route,s,n),f=r.route[e],f)h=await u(f);else if(e==="action"){let m=new URL(t.url),g=m.pathname+m.search;throw zs(405,{method:t.method,pathname:g,routeId:r.route.id})}else return{type:Ur.data,data:void 0};else if(f)h=await u(f);else{let m=new URL(t.url),g=m.pathname+m.search;throw zs(404,{pathname:g})}Dt(h!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(f){l=Ur.error,h=f}finally{c&&t.signal.removeEventListener("abort",c)}if(Vj(h)){let f=h.status;if(Dj.has(f)){let v=h.headers.get("Location");if(Dt(v,"Redirects returned/thrown from loaders/actions must have a Location header"),!aO.test(v))v=P6(new URL(t.url),i.slice(0,i.indexOf(r)+1),a,!0,v);else if(!o.isStaticRequest){let y=new URL(t.url),x=v.startsWith("//")?new URL(y.protocol+v):new URL(v),w=of(x.pathname,a)!=null;x.origin===y.origin&&w&&(v=x.pathname+x.search+x.hash)}if(o.isStaticRequest)throw h.headers.set("Location",v),h;return{type:Ur.redirect,status:f,location:v,revalidate:h.headers.get("X-Remix-Revalidate")!==null,reloadDocument:h.headers.get("X-Remix-Reload-Document")!==null}}if(o.isRouteRequest)throw{type:l===Ur.error?Ur.error:Ur.data,response:h};let m,g=h.headers.get("Content-Type");return g&&/\bapplication\/json\b/.test(g)?m=await h.json():m=await h.text(),l===Ur.error?{type:l,error:new Q9(f,h.statusText,m),headers:h.headers}:{type:Ur.data,data:m,statusCode:h.status,headers:h.headers}}if(l===Ur.error)return{type:l,error:h};if(jj(h)){var d,p;return{type:Ur.deferred,deferredData:h,statusCode:(d=h.init)==null?void 0:d.status,headers:((p=h.init)==null?void 0:p.headers)&&new Headers(h.init.headers)}}return{type:Ur.data,data:h}}function kf(e,t,r,i){let n=e.createURL(lO(t)).toString(),s={signal:r};if(i&&ba(i.formMethod)){let{formMethod:a,formEncType:o}=i;s.method=a.toUpperCase(),o==="application/json"?(s.headers=new Headers({"Content-Type":o}),s.body=JSON.stringify(i.json)):o==="text/plain"?s.body=i.text:o==="application/x-www-form-urlencoded"&&i.formData?s.body=D6(i.formData):s.body=i.formData}return new Request(n,s)}function D6(e){let t=new URLSearchParams;for(let[r,i]of e.entries())t.append(r,typeof i=="string"?i:i.name);return t}function AC(e){let t=new FormData;for(let[r,i]of e.entries())t.append(r,i);return t}function Fj(e,t,r,i,n){let s={},a=null,o,l=!1,h={};return r.forEach((c,u)=>{let d=t[u].route.id;if(Dt(!tp(c),"Cannot handle redirect results in processLoaderData"),Z1(c)){let p=Bd(e,d),f=c.error;i&&(f=Object.values(i)[0],i=void 0),a=a||{},a[p.route.id]==null&&(a[p.route.id]=f),s[d]=void 0,l||(l=!0,o=nO(c.error)?c.error.status:500),c.headers&&(h[d]=c.headers)}else Ou(c)?(n.set(d,c.deferredData),s[d]=c.deferredData.data):s[d]=c.data,c.statusCode!=null&&c.statusCode!==200&&!l&&(o=c.statusCode),c.headers&&(h[d]=c.headers)}),i&&(a=i,s[Object.keys(i)[0]]=void 0),{loaderData:s,errors:a,statusCode:o||200,loaderHeaders:h}}function EC(e,t,r,i,n,s,a,o){let{loaderData:l,errors:h}=Fj(t,r,i,n,o);for(let c=0;c<s.length;c++){let{key:u,match:d,controller:p}=s[c];Dt(a!==void 0&&a[c]!==void 0,"Did not find corresponding fetcher result");let f=a[c];if(!(p&&p.signal.aborted))if(Z1(f)){let m=Bd(e.matches,d==null?void 0:d.route.id);h&&h[m.route.id]||(h=xr({},h,{[m.route.id]:f.error})),e.fetchers.delete(u)}else if(tp(f))Dt(!1,"Unhandled fetcher revalidation redirect");else if(Ou(f))Dt(!1,"Unhandled fetcher deferred data");else{let m=dd(f.data);e.fetchers.set(u,m)}}return{loaderData:l,errors:h}}function TC(e,t,r,i){let n=xr({},t);for(let s of r){let a=s.route.id;if(t.hasOwnProperty(a)?t[a]!==void 0&&(n[a]=t[a]):e[a]!==void 0&&s.route.loader&&(n[a]=e[a]),i&&i.hasOwnProperty(a))break}return n}function Bd(e,t){return(t?e.slice(0,e.findIndex(i=>i.route.id===t)+1):[...e]).reverse().find(i=>i.route.hasErrorBoundary===!0)||e[0]}function LC(e){let t=e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function zs(e,t){let{pathname:r,routeId:i,method:n,type:s}=t===void 0?{}:t,a="Unknown Server Error",o="Unknown @remix-run/router error";return e===400?(a="Bad Request",n&&r&&i?o="You made a "+n+' request to "'+r+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":s==="defer-action"?o="defer() is not supported in actions":s==="invalid-body"&&(o="Unable to encode submission body")):e===403?(a="Forbidden",o='Route "'+i+'" does not match URL "'+r+'"'):e===404?(a="Not Found",o='No route matches URL "'+r+'"'):e===405&&(a="Method Not Allowed",n&&r&&i?o="You made a "+n.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":n&&(o='Invalid request method "'+n.toUpperCase()+'"')),new Q9(e||500,a,new Error(o),!0)}function PC(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(tp(r))return{result:r,idx:t}}}function lO(e){let t=typeof e=="string"?Rl(e):e;return hc(xr({},t,{hash:""}))}function Uj(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function Ou(e){return e.type===Ur.deferred}function Z1(e){return e.type===Ur.error}function tp(e){return(e&&e.type)===Ur.redirect}function jj(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function Vj(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function Gj(e){return Pj.has(e.toLowerCase())}function ba(e){return Tj.has(e.toLowerCase())}async function DC(e,t,r,i,n,s){for(let a=0;a<r.length;a++){let o=r[a],l=t[a];if(!l)continue;let h=e.find(u=>u.route.id===l.route.id),c=h!=null&&!oO(h,l)&&(s&&s[l.route.id])!==void 0;if(Ou(o)&&(n||c)){let u=i[a];Dt(u,"Expected an AbortSignal for revalidating fetcher deferred result"),await hO(o,u,n).then(d=>{d&&(r[a]=d||r[a])})}}}async function hO(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:Ur.data,data:e.deferredData.unwrappedData}}catch(n){return{type:Ur.error,error:n}}return{type:Ur.data,data:e.deferredData.data}}}function Z9(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Hj(e,t){let{route:r,pathname:i,params:n}=e;return{id:r.id,pathname:i,params:n,data:t[r.id],handle:r.handle}}function O6(e,t){let r=typeof t=="string"?Rl(t).search:t.search;if(e[e.length-1].route.index&&Z9(r||""))return e[e.length-1];let i=my(e);return i[i.length-1]}function OC(e){let{formMethod:t,formAction:r,formEncType:i,text:n,formData:s,json:a}=e;if(!(!t||!r||!i)){if(n!=null)return{formMethod:t,formAction:r,formEncType:i,formData:void 0,json:void 0,text:n};if(s!=null)return{formMethod:t,formAction:r,formEncType:i,formData:s,json:void 0,text:void 0};if(a!==void 0)return{formMethod:t,formAction:r,formEncType:i,formData:void 0,json:a,text:void 0}}}function ig(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Wj(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Nf(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t," _hasFetcherDoneAnything ":!0}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t," _hasFetcherDoneAnything ":!0}}function qj(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0," _hasFetcherDoneAnything ":!0}}function dd(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e," _hasFetcherDoneAnything ":!0}}/**
 * React Router v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function U2(){return U2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},U2.apply(this,arguments)}const gy=be.createContext(null),K9=be.createContext(null),Cc=be.createContext(null),vy=be.createContext(null),$h=be.createContext({outlet:null,matches:[],isDataRoute:!1}),uO=be.createContext(null);function Xj(e,t){let{relative:r}=t===void 0?{}:t;Sm()||Dt(!1);let{basename:i,navigator:n}=be.useContext(Cc),{hash:s,pathname:a,search:o}=$9(e,{relative:r}),l=a;return i!=="/"&&(l=a==="/"?i:yl([i,a])),n.createHref({pathname:l,search:o,hash:s})}function Sm(){return be.useContext(vy)!=null}function Sc(){return Sm()||Dt(!1),be.useContext(vy).location}function cO(e){be.useContext(Cc).static||be.useLayoutEffect(e)}function Yj(){let{isDataRoute:e}=be.useContext($h);return e?lV():Qj()}function Qj(){Sm()||Dt(!1);let e=be.useContext(gy),{basename:t,navigator:r}=be.useContext(Cc),{matches:i}=be.useContext($h),{pathname:n}=Sc(),s=JSON.stringify(my(i).map(l=>l.pathnameBase)),a=be.useRef(!1);return cO(()=>{a.current=!0}),be.useCallback(function(l,h){if(h===void 0&&(h={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let c=Y9(l,JSON.parse(s),n,h.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:yl([t,c.pathname])),(h.replace?r.replace:r.push)(c,h.state,h)},[t,r,s,n,e])}const Zj=be.createContext(null);function Kj(e){let t=be.useContext($h).outlet;return t&&be.createElement(Zj.Provider,{value:e},t)}function $9(e,t){let{relative:r}=t===void 0?{}:t,{matches:i}=be.useContext($h),{pathname:n}=Sc(),s=JSON.stringify(my(i).map(a=>a.pathnameBase));return be.useMemo(()=>Y9(e,JSON.parse(s),n,r==="path"),[e,s,n,r])}function $j(e,t,r){Sm()||Dt(!1);let{navigator:i}=be.useContext(Cc),{matches:n}=be.useContext($h),s=n[n.length-1],a=s?s.params:{};s&&s.pathname;let o=s?s.pathnameBase:"/";s&&s.route;let l=Sc(),h;if(t){var c;let m=typeof t=="string"?Rl(t):t;o==="/"||(c=m.pathname)!=null&&c.startsWith(o)||Dt(!1),h=m}else h=l;let u=h.pathname||"/",d=o==="/"?u:u.slice(o.length)||"/",p=Rd(e,{pathname:d}),f=iV(p&&p.map(m=>Object.assign({},m,{params:Object.assign({},a,m.params),pathname:yl([o,i.encodeLocation?i.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?o:yl([o,i.encodeLocation?i.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),n,r);return t&&f?be.createElement(vy.Provider,{value:{location:U2({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Qr.Pop}},f):f}function Jj(){let e=oV(),t=nO(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return be.createElement(be.Fragment,null,be.createElement("h2",null,"Unexpected Application Error!"),be.createElement("h3",{style:{fontStyle:"italic"}},t),r?be.createElement("pre",{style:n},r):null,s)}const eV=be.createElement(Jj,null);class tV extends be.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error?be.createElement($h.Provider,{value:this.props.routeContext},be.createElement(uO.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rV(e){let{routeContext:t,match:r,children:i}=e,n=be.useContext(gy);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),be.createElement($h.Provider,{value:t},i)}function iV(e,t,r){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),e==null){var n;if((n=r)!=null&&n.errors)e=r.matches;else return null}let s=e,a=(i=r)==null?void 0:i.errors;if(a!=null){let o=s.findIndex(l=>l.route.id&&(a==null?void 0:a[l.route.id]));o>=0||Dt(!1),s=s.slice(0,Math.min(s.length,o+1))}return s.reduceRight((o,l,h)=>{let c=l.route.id?a==null?void 0:a[l.route.id]:null,u=null;r&&(u=l.route.errorElement||eV);let d=t.concat(s.slice(0,h+1)),p=()=>{let f;return c?f=u:l.route.Component?f=be.createElement(l.route.Component,null):l.route.element?f=l.route.element:f=o,be.createElement(rV,{match:l,routeContext:{outlet:o,matches:d,isDataRoute:r!=null},children:f})};return r&&(l.route.ErrorBoundary||l.route.errorElement||h===0)?be.createElement(tV,{location:r.location,revalidation:r.revalidation,component:u,error:c,children:p(),routeContext:{outlet:null,matches:d,isDataRoute:!0}}):p()},null)}var dO=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(dO||{}),j2=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(j2||{});function nV(e){let t=be.useContext(gy);return t||Dt(!1),t}function sV(e){let t=be.useContext(K9);return t||Dt(!1),t}function aV(e){let t=be.useContext($h);return t||Dt(!1),t}function pO(e){let t=aV(),r=t.matches[t.matches.length-1];return r.route.id||Dt(!1),r.route.id}function oV(){var e;let t=be.useContext(uO),r=sV(j2.UseRouteError),i=pO(j2.UseRouteError);return t||((e=r.errors)==null?void 0:e[i])}function lV(){let{router:e}=nV(dO.UseNavigateStable),t=pO(j2.UseNavigateStable),r=be.useRef(!1);return cO(()=>{r.current=!0}),be.useCallback(function(n,s){s===void 0&&(s={}),r.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,U2({fromRouteId:t},s)))},[e,t])}const hV="startTransition",IC=XN[hV];function uV(e){let{fallbackElement:t,router:r,future:i}=e,[n,s]=be.useState(r.state),{v7_startTransition:a}=i||{},o=be.useCallback(u=>{a&&IC?IC(()=>s(u)):s(u)},[s,a]);be.useLayoutEffect(()=>r.subscribe(o),[r,o]);let l=be.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:u=>r.navigate(u),push:(u,d,p)=>r.navigate(u,{state:d,preventScrollReset:p==null?void 0:p.preventScrollReset}),replace:(u,d,p)=>r.navigate(u,{replace:!0,state:d,preventScrollReset:p==null?void 0:p.preventScrollReset})}),[r]),h=r.basename||"/",c=be.useMemo(()=>({router:r,navigator:l,static:!1,basename:h}),[r,l,h]);return be.createElement(be.Fragment,null,be.createElement(gy.Provider,{value:c},be.createElement(K9.Provider,{value:n},be.createElement(pV,{basename:h,location:n.location,navigationType:n.historyAction,navigator:l},n.initialized?be.createElement(cV,{routes:r.routes,state:n}):t))),null)}function cV(e){let{routes:t,state:r}=e;return $j(t,void 0,r)}function dV(e){return Kj(e.context)}function pd(e){Dt(!1)}function pV(e){let{basename:t="/",children:r=null,location:i,navigationType:n=Qr.Pop,navigator:s,static:a=!1}=e;Sm()&&Dt(!1);let o=t.replace(/^\/*/,"/"),l=be.useMemo(()=>({basename:o,navigator:s,static:a}),[o,s,a]);typeof i=="string"&&(i=Rl(i));let{pathname:h="/",search:c="",hash:u="",state:d=null,key:p="default"}=i,f=be.useMemo(()=>{let m=of(h,o);return m==null?null:{location:{pathname:m,search:c,hash:u,state:d,key:p},navigationType:n}},[o,h,c,u,d,p,n]);return f==null?null:be.createElement(Cc.Provider,{value:l},be.createElement(vy.Provider,{children:r,value:f}))}new Promise(()=>{});function I6(e,t){t===void 0&&(t=[]);let r=[];return be.Children.forEach(e,(i,n)=>{if(!be.isValidElement(i))return;let s=[...t,n];if(i.type===be.Fragment){r.push.apply(r,I6(i.props.children,s));return}i.type!==pd&&Dt(!1),!i.props.index||!i.props.children||Dt(!1);let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=I6(i.props.children,s)),r.push(a)}),r}function fV(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:be.createElement(e.Component),Component:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:be.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bp(){return Bp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Bp.apply(this,arguments)}function fO(e,t){if(e==null)return{};var r={},i=Object.keys(e),n,s;for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}function mV(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function gV(e,t){return e.button===0&&(!t||t==="_self")&&!mV(e)}const vV=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],yV=["aria-current","caseSensitive","className","end","style","to","children"];function xV(e,t){return Bj({basename:t==null?void 0:t.basename,future:Bp({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:nj({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||wV(),routes:e,mapRouteProperties:fV}).initialize()}function wV(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=Bp({},t,{errors:bV(t.errors)})),t}function bV(e){if(!e)return null;let t=Object.entries(e),r={};for(let[i,n]of t)if(n&&n.__type==="RouteErrorResponse")r[i]=new Q9(n.status,n.statusText,n.data,n.internal===!0);else if(n&&n.__type==="Error"){if(n.__subType){let s=window[n.__subType];if(typeof s=="function")try{let a=new s(n.message);a.stack="",r[i]=a}catch{}}if(r[i]==null){let s=new Error(n.message);s.stack="",r[i]=s}}else r[i]=n;return r}const _V=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",CV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,S1=be.forwardRef(function(t,r){let{onClick:i,relative:n,reloadDocument:s,replace:a,state:o,target:l,to:h,preventScrollReset:c}=t,u=fO(t,vV),{basename:d}=be.useContext(Cc),p,f=!1;if(typeof h=="string"&&CV.test(h)&&(p=h,_V))try{let y=new URL(window.location.href),x=h.startsWith("//")?new URL(y.protocol+h):new URL(h),w=of(x.pathname,d);x.origin===y.origin&&w!=null?h=w+x.search+x.hash:f=!0}catch{}let m=Xj(h,{relative:n}),g=SV(h,{replace:a,state:o,target:l,preventScrollReset:c,relative:n});function v(y){i&&i(y),y.defaultPrevented||g(y)}return be.createElement("a",Bp({},u,{href:p||m,onClick:f||s?i:v,ref:r,target:l}))}),al=be.forwardRef(function(t,r){let{"aria-current":i="page",caseSensitive:n=!1,className:s="",end:a=!1,style:o,to:l,children:h}=t,c=fO(t,yV),u=$9(l,{relative:c.relative}),d=Sc(),p=be.useContext(K9),{navigator:f}=be.useContext(Cc),m=f.encodeLocation?f.encodeLocation(u).pathname:u.pathname,g=d.pathname,v=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(g=g.toLowerCase(),v=v?v.toLowerCase():null,m=m.toLowerCase());let y=g===m||!a&&g.startsWith(m)&&g.charAt(m.length)==="/",x=v!=null&&(v===m||!a&&v.startsWith(m)&&v.charAt(m.length)==="/"),w=y?i:void 0,_;typeof s=="function"?_=s({isActive:y,isPending:x}):_=[s,y?"active":null,x?"pending":null].filter(Boolean).join(" ");let b=typeof o=="function"?o({isActive:y,isPending:x}):o;return be.createElement(S1,Bp({},c,{"aria-current":w,className:_,ref:r,style:b,to:l}),typeof h=="function"?h({isActive:y,isPending:x}):h)});var RC;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(RC||(RC={}));var BC;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(BC||(BC={}));function SV(e,t){let{target:r,replace:i,state:n,preventScrollReset:s,relative:a}=t===void 0?{}:t,o=Yj(),l=Sc(),h=$9(e,{relative:a});return be.useCallback(c=>{if(gV(c,r)){c.preventDefault();let u=i!==void 0?i:hc(l)===hc(h);o(e,{replace:u,state:n,preventScrollReset:s,relative:a})}},[l,o,h,i,n,r,e,s,a])}const Sa=({variant:e="default",size:t="sm",backgroundColor:r="primary-300",borderColor:i="primary-300",textColor:n="white",children:s,...a})=>{const{className:o}=a,l={variant:{default:"bg-primary-300 text-background-dark ring-1 ring-primary-300",outline:"bg-transparent text-primary-300 ring-1 ring-primary-300 hover:bg-primary-300/10",underline:""},size:{xs:"text-xs py-[0.4375rem] px-[.875rem]",sm:"text-sm py-[0.5rem] px-[1rem]",md:"text-md py-[0.6875rem] px-[1.375rem]",lg:"text-lg py-[1.1875rem] px-[2.375rem]",xl:"text-xl py-[1.594rem] px-[3.188rem]"},default:"rounded-full cursor-pointer transition-all hover:brightness-110 active:brightness-90"};return R.jsx("button",{className:`${l.variant[e]} ${l.size[t]} ${l.default} ${o||""}`,children:s})},MV=()=>{const e=be.useRef(null),t=be.useRef(null),[r,i]=be.useState(!1);return be.useEffect(()=>{window.innerWidth>640?i(!1):i(!0);const n=()=>{window.innerWidth>640?i(!1):i(!0)};return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),be.useEffect(()=>{const n=()=>{const s=document.querySelector(".navTrigger"),a=e.current,o=t.current;if(!a&&!o)return;const l=a.getBoundingClientRect(),h=s.getBoundingClientRect();if(l.bottom>=Math.floor(h.top)){if(a.classList.add("bg-background-dark"),!o)return;o.classList.add("max-w-[50rem]")}else{if(a.classList.remove("bg-background-dark"),!o)return;o.classList.remove("max-w-[50rem]")}};window.addEventListener("scroll",()=>{n()}),n()},[]),r?R.jsx(EV,{nav:e}):R.jsx(AV,{nav:e,cta:t})},AV=({nav:e,cta:t})=>R.jsxs("div",{ref:e,className:"fixed top-0 left-0 z-50 flex items-center justify-between w-full h-16 px-6 text-xs text-white",children:[R.jsx("img",{src:"./images/logo-1.png",className:"h-3/4",alt:""}),R.jsxs("div",{className:"flex items-center gap-8",children:[R.jsx(al,{className:({isActive:r})=>r?"text-primary-300":"text-white transition-all hover:text-primary-300 active:brightness-90",to:"/dmrs-fe/",children:"Home"}),R.jsx(al,{className:({isActive:r})=>r?"text-primary-300":"text-white transition-all hover:text-primary-300 active:brightness-90",to:"dmrs/australia",children:"DMRS Australia"}),R.jsx(al,{className:({isActive:r})=>r?"text-primary-300":"text-white transition-all hover:text-primary-300 active:brightness-90",to:"dmrs/thailand",children:"DMRS Thailand"}),R.jsx(al,{className:({isActive:r})=>r?"text-primary-300":"text-white transition-all hover:text-primary-300 active:brightness-90",to:"dmrs/vpn",children:"DMRS VPN"}),R.jsx(al,{ref:t,to:"./contact",className:"overflow-hidden transition-all duration-1000 max-w-0 whitespace-nowrap",children:R.jsx(Sa,{size:"xs",className:"m-1",children:"Get Started"})})]})]}),EV=({nav:e})=>R.jsxs("div",{ref:e,className:"fixed top-0 left-0 z-50 flex items-center justify-between w-full h-16 px-6 text-sm text-white bg-background-dark",children:[R.jsx("img",{src:"./images/logo-1.png",className:"h-3/4",alt:""}),R.jsx("button",{className:"text-lg",children:"="})]}),rp=({id:e="",name:t="",label:r="",value:i="",placeholder:n="",className:s="",onInput:a})=>R.jsxs("div",{className:"flex flex-col gap-1",children:[R.jsx("label",{className:"text-xs",htmlFor:e,children:r}),R.jsx("input",{type:"text",id:e,name:t,value:i,placeholder:n,onInput:a,className:`px-3 py-2 text-sm bg-transparent rounded-full ring-1 ring-white focus:outline-none placeholder:text-xs ${s}`})]}),TV=()=>{const e=Sc(),[t,r]=be.useState({name:"",email:"",message:""}),i=e.pathname,n=a=>{a.preventDefault()};console.log(i);const s=a=>{const o=a.target.name;r(l=>({...l,[o]:a.target.value}))};return R.jsxs("div",{className:"flex flex-col-reverse text-white min-h-[calc(100vh-3.9rem)] bg-background-dark p-5 py-10 gap-10 z-[40] overflow-hidden laptop:flex-row",children:[R.jsxs("div",{className:"flex flex-col flex-1 gap-8",children:[R.jsx("div",{className:"items-center hidden w-1/2 laptop:flex",children:R.jsx("img",{src:"./images/logo-1.png",alt:""})}),R.jsxs("div",{className:"flex flex-col h-full gap-2",children:[R.jsx("p",{className:"text-xs text-accent-400 laptop:text-sm",children:"Navigation"}),R.jsx(al,{className:({isActive:a})=>a?"text-primary-300 text-sm laptop:text-base":"text-white transition-all duration-500 hover:text-primary-300 active:brightness-90 text-sm laptop:text-base hover:bg-white/20 w-full hover:px-3",to:"/dmrs-fe/",children:"Home"}),R.jsx(al,{className:({isActive:a})=>a?"text-primary-300 text-sm laptop:text-base":"text-white transition-all duration-500 hover:text-primary-300 active:brightness-90 text-sm laptop:text-base hover:bg-white/20 w-full hover:px-3",to:"dmrs/thailand",children:"DMRS Thailand"}),R.jsx(al,{className:({isActive:a})=>a?"text-primary-300 text-sm laptop:text-base":"text-white transition-all duration-500 hover:text-primary-300 active:brightness-90 text-sm laptop:text-base hover:bg-white/20 w-full hover:px-3",to:"dmrs/australia",children:"DMRS Australia"}),R.jsx(al,{className:({isActive:a})=>a?"text-primary-300 text-sm laptop:text-base":"text-white transition-all duration-500 hover:text-primary-300 active:brightness-90 text-sm laptop:text-base hover:bg-white/20 w-full hover:px-3",to:"dmrs/vpn",children:"DMRS VPN"})]}),R.jsxs("div",{className:"flex items-end justify-between mt-10 text-xs whitespace-nowrap",children:[R.jsxs("div",{className:"flex flex-col gap-1",children:[R.jsx("p",{children:"Privacy Policy"}),R.jsx("p",{className:"hidden",children:"|"}),R.jsx("p",{children:"Terms & Conditions"})]}),R.jsx("p",{children:"c 2021 Yourintell.com"})]})]}),i!="/dmrs-fe/contact"?R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"min-w-[1px] w-[1px] bg-white min-h-full"}),R.jsxs("div",{className:"flex flex-col flex-1 gap-8",children:[R.jsx("div",{className:"flex items-center justify-center w-1/2 laptop:hidden",children:R.jsx("img",{src:"./images/logo-1.png",alt:""})}),R.jsx("h2",{className:"text-2xl text-left text-accent-500",children:"CONTACT US"}),R.jsxs("form",{action:"#",className:"flex flex-col gap-8",onSubmit:n,children:[R.jsx(rp,{label:"Name",name:"name",placeholder:"Enter your name",onInput:s,value:t.name}),R.jsx(rp,{label:"Email Address",name:"email",placeholder:"Enter your email address",onInput:s,value:t.email}),R.jsx(rp,{label:"Message",name:"message",placeholder:"Leave us a message!",onInput:s,value:t.message}),R.jsx(Sa,{size:"sm",variant:"outline",children:R.jsx("a",{href:"mailto:test@gmail.com",children:"Send us a message!"})})]})]})]}):R.jsx(R.Fragment,{})]})},LV=({children:e})=>{const t=Sc();return be.useEffect(()=>{window.scrollTo(0,0)},[t]),R.jsx(R.Fragment,{children:e})};function PV(){return R.jsx(LV,{children:R.jsxs("div",{className:"flex flex-col min-h-screen font-poppins",children:[R.jsx(MV,{}),R.jsx(dV,{}),R.jsx(TV,{})]})})}const J9=({children:e})=>R.jsxs("div",{className:"relative flex w-full pt-16 overflow-hidden bg-background-dark h-screen tablet:h-[90vh]",children:[R.jsx("div",{className:"absolute top-[-150%] left-[-60%] opacity-20 z-10 bg-gradient-radial from-primary-500 via-background-dark to-background-dark h-[300%] aspect-square rounded-full"}),R.jsx("div",{className:"absolute bottom-[-150%] right-[-60%] opacity-10 z-10 bg-gradient-radial from-accent-400 via-background-dark to-background-dark h-[300%] aspect-square rounded-full"}),R.jsx(R.Fragment,{children:e})]}),C4=({children:e})=>R.jsx("div",{className:"p-6 h-fit laptop:h-[calc(100vh-4rem)]",children:e});function Ko(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mO(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}/*!
 * GSAP 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var xs={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},zp={duration:.5,overwrite:!1,delay:0},ew,Qi,Or,Ys=1e8,hr=1/Ys,R6=Math.PI*2,DV=R6/4,OV=0,gO=Math.sqrt,IV=Math.cos,RV=Math.sin,Ai=function(t){return typeof t=="string"},zr=function(t){return typeof t=="function"},Tl=function(t){return typeof t=="number"},tw=function(t){return typeof t>"u"},So=function(t){return typeof t=="object"},Gn=function(t){return t!==!1},rw=function(){return typeof window<"u"},ng=function(t){return zr(t)||Ai(t)},vO=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Zi=Array.isArray,B6=/(?:-?\.?\d|\.)+/gi,yO=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,zd=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,S4=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,xO=/[+-]=-?[.\d]+/,wO=/[^,'"\[\]\s]+/gi,BV=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Cr,Rs,z6,iw,bs={},V2={},bO,_O=function(t){return(V2=uc(t,bs))&&Yn},nw=function(t,r){return console.warn("Invalid property",t,"set to",r,"Missing plugin? gsap.registerPlugin()")},G2=function(t,r){return!r&&console.warn(t)},CO=function(t,r){return t&&(bs[t]=r)&&V2&&(V2[t]=r)||bs},H0=function(){return 0},zV={suppressEvents:!0,isStart:!0,kill:!1},Xv={suppressEvents:!0,kill:!1},kV={suppressEvents:!0},sw={},Dh=[],k6={},SO,os={},M4={},zC=30,Yv=[],aw="",ow=function(t){var r=t[0],i,n;if(So(r)||zr(r)||(t=[t]),!(i=(r._gsap||{}).harness)){for(n=Yv.length;n--&&!Yv[n].targetTest(r););i=Yv[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new YO(t[n],i)))||t.splice(n,1);return t},Vu=function(t){return t._gsap||ow(Qs(t))[0]._gsap},MO=function(t,r,i){return(i=t[r])&&zr(i)?t[r]():tw(i)&&t.getAttribute&&t.getAttribute(r)||i},Hn=function(t,r){return(t=t.split(",")).forEach(r)||t},jr=function(t){return Math.round(t*1e5)/1e5||0},Ri=function(t){return Math.round(t*1e7)/1e7||0},ip=function(t,r){var i=r.charAt(0),n=parseFloat(r.substr(2));return t=parseFloat(t),i==="+"?t+n:i==="-"?t-n:i==="*"?t*n:t/n},NV=function(t,r){for(var i=r.length,n=0;t.indexOf(r[n])<0&&++n<i;);return n<i},H2=function(){var t=Dh.length,r=Dh.slice(0),i,n;for(k6={},Dh.length=0,i=0;i<t;i++)n=r[i],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},AO=function(t,r,i,n){Dh.length&&!Qi&&H2(),t.render(r,i,n||Qi&&r<0&&(t._initted||t._startAt)),Dh.length&&!Qi&&H2()},EO=function(t){var r=parseFloat(t);return(r||r===0)&&(t+"").match(wO).length<2?r:Ai(t)?t.trim():t},TO=function(t){return t},aa=function(t,r){for(var i in r)i in t||(t[i]=r[i]);return t},FV=function(t){return function(r,i){for(var n in i)n in r||n==="duration"&&t||n==="ease"||(r[n]=i[n])}},uc=function(t,r){for(var i in r)t[i]=r[i];return t},kC=function e(t,r){for(var i in r)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=So(r[i])?e(t[i]||(t[i]={}),r[i]):r[i]);return t},W2=function(t,r){var i={},n;for(n in t)n in r||(i[n]=t[n]);return i},K1=function(t){var r=t.parent||Cr,i=t.keyframes?FV(Zi(t.keyframes)):aa;if(Gn(t.inherit))for(;r;)i(t,r.vars.defaults),r=r.parent||r._dp;return t},UV=function(t,r){for(var i=t.length,n=i===r.length;n&&i--&&t[i]===r[i];);return i<0},LO=function(t,r,i,n,s){i===void 0&&(i="_first"),n===void 0&&(n="_last");var a=t[n],o;if(s)for(o=r[s];a&&a[s]>o;)a=a._prev;return a?(r._next=a._next,a._next=r):(r._next=t[i],t[i]=r),r._next?r._next._prev=r:t[n]=r,r._prev=a,r.parent=r._dp=t,r},yy=function(t,r,i,n){i===void 0&&(i="_first"),n===void 0&&(n="_last");var s=r._prev,a=r._next;s?s._next=a:t[i]===r&&(t[i]=a),a?a._prev=s:t[n]===r&&(t[n]=s),r._next=r._prev=r.parent=null},Gh=function(t,r){t.parent&&(!r||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Gu=function(t,r){if(t&&(!r||r._end>t._dur||r._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},jV=function(t){for(var r=t.parent;r&&r.parent;)r._dirty=1,r.totalDuration(),r=r.parent;return t},N6=function(t,r,i,n){return t._startAt&&(Qi?t._startAt.revert(Xv):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(r,!0,n))},VV=function e(t){return!t||t._ts&&e(t.parent)},NC=function(t){return t._repeat?kp(t._tTime,t=t.duration()+t._rDelay)*t:0},kp=function(t,r){var i=Math.floor(t/=r);return t&&i===t?i-1:i},q2=function(t,r){return(t-r._start)*r._ts+(r._ts>=0?0:r._dirty?r.totalDuration():r._tDur)},xy=function(t){return t._end=Ri(t._start+(t._tDur/Math.abs(t._ts||t._rts||hr)||0))},wy=function(t,r){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=Ri(i._time-(t._ts>0?r/t._ts:((t._dirty?t.totalDuration():t._tDur)-r)/-t._ts)),xy(t),i._dirty||Gu(i,t)),t},PO=function(t,r){var i;if((r._time||!r._dur&&r._initted||r._start<t._time&&(r._dur||!r.add))&&(i=q2(t.rawTime(),r),(!r._dur||Mm(0,r.totalDuration(),i)-r._tTime>hr)&&r.render(i,!0)),Gu(t,r)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-hr}},lo=function(t,r,i,n){return r.parent&&Gh(r),r._start=Ri((Tl(i)?i:i||t!==Cr?Is(t,i,r):t._time)+r._delay),r._end=Ri(r._start+(r.totalDuration()/Math.abs(r.timeScale())||0)),LO(t,r,"_first","_last",t._sort?"_start":0),F6(r)||(t._recent=r),n||PO(t,r),t._ts<0&&wy(t,t._tTime),t},DO=function(t,r){return(bs.ScrollTrigger||nw("scrollTrigger",r))&&bs.ScrollTrigger.create(r,t)},OO=function(t,r,i,n,s){if(hw(t,r,s),!t._initted)return 1;if(!i&&t._pt&&!Qi&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&SO!==us.frame)return Dh.push(t),t._lazy=[s,n],1},GV=function e(t){var r=t.parent;return r&&r._ts&&r._initted&&!r._lock&&(r.rawTime()<0||e(r))},F6=function(t){var r=t.data;return r==="isFromStart"||r==="isStart"},HV=function(t,r,i,n){var s=t.ratio,a=r<0||!r&&(!t._start&&GV(t)&&!(!t._initted&&F6(t))||(t._ts<0||t._dp._ts<0)&&!F6(t))?0:1,o=t._rDelay,l=0,h,c,u;if(o&&t._repeat&&(l=Mm(0,t._tDur,r),c=kp(l,o),t._yoyo&&c&1&&(a=1-a),c!==kp(t._tTime,o)&&(s=1-a,t.vars.repeatRefresh&&t._initted&&t.invalidate())),a!==s||Qi||n||t._zTime===hr||!r&&t._zTime){if(!t._initted&&OO(t,r,n,i,l))return;for(u=t._zTime,t._zTime=r||(i?hr:0),i||(i=r&&!u),t.ratio=a,t._from&&(a=1-a),t._time=0,t._tTime=l,h=t._pt;h;)h.r(a,h.d),h=h._next;r<0&&N6(t,r,i,!0),t._onUpdate&&!i&&Zs(t,"onUpdate"),l&&t._repeat&&!i&&t.parent&&Zs(t,"onRepeat"),(r>=t._tDur||r<0)&&t.ratio===a&&(a&&Gh(t,1),!i&&!Qi&&(Zs(t,a?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=r)},WV=function(t,r,i){var n;if(i>r)for(n=t._first;n&&n._start<=i;){if(n.data==="isPause"&&n._start>r)return n;n=n._next}else for(n=t._last;n&&n._start>=i;){if(n.data==="isPause"&&n._start<r)return n;n=n._prev}},Np=function(t,r,i,n){var s=t._repeat,a=Ri(r)||0,o=t._tTime/t._tDur;return o&&!n&&(t._time*=a/t._dur),t._dur=a,t._tDur=s?s<0?1e10:Ri(a*(s+1)+t._rDelay*s):a,o>0&&!n&&wy(t,t._tTime=t._tDur*o),t.parent&&xy(t),i||Gu(t.parent,t),t},FC=function(t){return t instanceof In?Gu(t):Np(t,t._dur)},qV={_start:0,endTime:H0,totalDuration:H0},Is=function e(t,r,i){var n=t.labels,s=t._recent||qV,a=t.duration()>=Ys?s.endTime(!1):t._dur,o,l,h;return Ai(r)&&(isNaN(r)||r in n)?(l=r.charAt(0),h=r.substr(-1)==="%",o=r.indexOf("="),l==="<"||l===">"?(o>=0&&(r=r.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(r.substr(1))||0)*(h?(o<0?s:i).totalDuration()/100:1)):o<0?(r in n||(n[r]=a),n[r]):(l=parseFloat(r.charAt(o-1)+r.substr(o+1)),h&&i&&(l=l/100*(Zi(i)?i[0]:i).totalDuration()),o>1?e(t,r.substr(0,o-1),i)+l:a+l)):r==null?a:+r},$1=function(t,r,i){var n=Tl(r[1]),s=(n?2:1)+(t<2?0:1),a=r[s],o,l;if(n&&(a.duration=r[1]),a.parent=i,t){for(o=a,l=i;l&&!("immediateRender"in o);)o=l.vars.defaults||{},l=Gn(l.vars.inherit)&&l.parent;a.immediateRender=Gn(o.immediateRender),t<2?a.runBackwards=1:a.startAt=r[s-1]}return new Kr(r[0],a,r[s+1])},Jh=function(t,r){return t||t===0?r(t):r},Mm=function(t,r,i){return i<t?t:i>r?r:i},qi=function(t,r){return!Ai(t)||!(r=BV.exec(t))?"":r[1]},XV=function(t,r,i){return Jh(i,function(n){return Mm(t,r,n)})},U6=[].slice,IO=function(t,r){return t&&So(t)&&"length"in t&&(!r&&!t.length||t.length-1 in t&&So(t[0]))&&!t.nodeType&&t!==Rs},YV=function(t,r,i){return i===void 0&&(i=[]),t.forEach(function(n){var s;return Ai(n)&&!r||IO(n,1)?(s=i).push.apply(s,Qs(n)):i.push(n)})||i},Qs=function(t,r,i){return Or&&!r&&Or.selector?Or.selector(t):Ai(t)&&!i&&(z6||!Fp())?U6.call((r||iw).querySelectorAll(t),0):Zi(t)?YV(t,i):IO(t)?U6.call(t,0):t?[t]:[]},j6=function(t){return t=Qs(t)[0]||G2("Invalid scope")||{},function(r){var i=t.current||t.nativeElement||t;return Qs(r,i.querySelectorAll?i:i===t?G2("Invalid scope")||iw.createElement("div"):t)}},RO=function(t){return t.sort(function(){return .5-Math.random()})},BO=function(t){if(zr(t))return t;var r=So(t)?t:{each:t},i=Hu(r.ease),n=r.from||0,s=parseFloat(r.base)||0,a={},o=n>0&&n<1,l=isNaN(n)||o,h=r.axis,c=n,u=n;return Ai(n)?c=u={center:.5,edges:.5,end:1}[n]||0:!o&&l&&(c=n[0],u=n[1]),function(d,p,f){var m=(f||r).length,g=a[m],v,y,x,w,_,b,S,C,M;if(!g){if(M=r.grid==="auto"?0:(r.grid||[1,Ys])[1],!M){for(S=-Ys;S<(S=f[M++].getBoundingClientRect().left)&&M<m;);M--}for(g=a[m]=[],v=l?Math.min(M,m)*c-.5:n%M,y=M===Ys?0:l?m*u/M-.5:n/M|0,S=0,C=Ys,b=0;b<m;b++)x=b%M-v,w=y-(b/M|0),g[b]=_=h?Math.abs(h==="y"?w:x):gO(x*x+w*w),_>S&&(S=_),_<C&&(C=_);n==="random"&&RO(g),g.max=S-C,g.min=C,g.v=m=(parseFloat(r.amount)||parseFloat(r.each)*(M>m?m-1:h?h==="y"?m/M:M:Math.max(M,m/M))||0)*(n==="edges"?-1:1),g.b=m<0?s-m:s,g.u=qi(r.amount||r.each)||0,i=i&&m<0?WO(i):i}return m=(g[d]-g.min)/g.max||0,Ri(g.b+(i?i(m):m)*g.v)+g.u}},V6=function(t){var r=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var n=Ri(Math.round(parseFloat(i)/t)*t*r);return(n-n%1)/r+(Tl(i)?0:qi(i))}},zO=function(t,r){var i=Zi(t),n,s;return!i&&So(t)&&(n=i=t.radius||Ys,t.values?(t=Qs(t.values),(s=!Tl(t[0]))&&(n*=n)):t=V6(t.increment)),Jh(r,i?zr(t)?function(a){return s=t(a),Math.abs(s-a)<=n?s:a}:function(a){for(var o=parseFloat(s?a.x:a),l=parseFloat(s?a.y:0),h=Ys,c=0,u=t.length,d,p;u--;)s?(d=t[u].x-o,p=t[u].y-l,d=d*d+p*p):d=Math.abs(t[u]-o),d<h&&(h=d,c=u);return c=!n||h<=n?t[c]:a,s||c===a||Tl(a)?c:c+qi(a)}:V6(t))},kO=function(t,r,i,n){return Jh(Zi(t)?!r:i===!0?!!(i=0):!n,function(){return Zi(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(r-t+i*.99))/i)*i*n)/n})},QV=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return function(n){return r.reduce(function(s,a){return a(s)},n)}},ZV=function(t,r){return function(i){return t(parseFloat(i))+(r||qi(i))}},KV=function(t,r,i){return FO(t,r,0,1,i)},NO=function(t,r,i){return Jh(i,function(n){return t[~~r(n)]})},$V=function e(t,r,i){var n=r-t;return Zi(t)?NO(t,e(0,t.length),r):Jh(i,function(s){return(n+(s-t)%n)%n+t})},JV=function e(t,r,i){var n=r-t,s=n*2;return Zi(t)?NO(t,e(0,t.length-1),r):Jh(i,function(a){return a=(s+(a-t)%s)%s||0,t+(a>n?s-a:a)})},W0=function(t){for(var r=0,i="",n,s,a,o;~(n=t.indexOf("random(",r));)a=t.indexOf(")",n),o=t.charAt(n+7)==="[",s=t.substr(n+7,a-n-7).match(o?wO:B6),i+=t.substr(r,n-r)+kO(o?s:+s[0],o?0:+s[1],+s[2]||1e-5),r=a+1;return i+t.substr(r,t.length-r)},FO=function(t,r,i,n,s){var a=r-t,o=n-i;return Jh(s,function(l){return i+((l-t)/a*o||0)})},eG=function e(t,r,i,n){var s=isNaN(t+r)?0:function(p){return(1-p)*t+p*r};if(!s){var a=Ai(t),o={},l,h,c,u,d;if(i===!0&&(n=1)&&(i=null),a)t={p:t},r={p:r};else if(Zi(t)&&!Zi(r)){for(c=[],u=t.length,d=u-2,h=1;h<u;h++)c.push(e(t[h-1],t[h]));u--,s=function(f){f*=u;var m=Math.min(d,~~f);return c[m](f-m)},i=r}else n||(t=uc(Zi(t)?[]:{},t));if(!c){for(l in r)lw.call(o,t,l,"get",r[l]);s=function(f){return dw(f,o)||(a?t.p:t)}}}return Jh(i,s)},UC=function(t,r,i){var n=t.labels,s=Ys,a,o,l;for(a in n)o=n[a]-r,o<0==!!i&&o&&s>(o=Math.abs(o))&&(l=a,s=o);return l},Zs=function(t,r,i){var n=t.vars,s=n[r],a=Or,o=t._ctx,l,h,c;if(s)return l=n[r+"Params"],h=n.callbackScope||t,i&&Dh.length&&H2(),o&&(Or=o),c=l?s.apply(h,l):s.call(h),Or=a,c},M1=function(t){return Gh(t),t.scrollTrigger&&t.scrollTrigger.kill(!!Qi),t.progress()<1&&Zs(t,"onInterrupt"),t},kd,UO=[],jO=function(t){if(rw()&&t){t=!t.name&&t.default||t;var r=t.name,i=zr(t),n=r&&!i&&t.init?function(){this._props=[]}:t,s={init:H0,render:dw,add:lw,kill:gG,modifier:mG,rawVars:0},a={targetTest:0,get:0,getSetter:cw,aliases:{},register:0};if(Fp(),t!==n){if(os[r])return;aa(n,aa(W2(t,s),a)),uc(n.prototype,uc(s,W2(t,a))),os[n.prop=r]=n,t.targetTest&&(Yv.push(n),sw[r]=1),r=(r==="css"?"CSS":r.charAt(0).toUpperCase()+r.substr(1))+"Plugin"}CO(r,n),t.register&&t.register(Yn,n,Wn)}else t&&UO.push(t)},or=255,A1={aqua:[0,or,or],lime:[0,or,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,or],navy:[0,0,128],white:[or,or,or],olive:[128,128,0],yellow:[or,or,0],orange:[or,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[or,0,0],pink:[or,192,203],cyan:[0,or,or],transparent:[or,or,or,0]},A4=function(t,r,i){return t+=t<0?1:t>1?-1:0,(t*6<1?r+(i-r)*t*6:t<.5?i:t*3<2?r+(i-r)*(2/3-t)*6:r)*or+.5|0},VO=function(t,r,i){var n=t?Tl(t)?[t>>16,t>>8&or,t&or]:0:A1.black,s,a,o,l,h,c,u,d,p,f;if(!n){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),A1[t])n=A1[t];else if(t.charAt(0)==="#"){if(t.length<6&&(s=t.charAt(1),a=t.charAt(2),o=t.charAt(3),t="#"+s+s+a+a+o+o+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return n=parseInt(t.substr(1,6),16),[n>>16,n>>8&or,n&or,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),n=[t>>16,t>>8&or,t&or]}else if(t.substr(0,3)==="hsl"){if(n=f=t.match(B6),!r)l=+n[0]%360/360,h=+n[1]/100,c=+n[2]/100,a=c<=.5?c*(h+1):c+h-c*h,s=c*2-a,n.length>3&&(n[3]*=1),n[0]=A4(l+1/3,s,a),n[1]=A4(l,s,a),n[2]=A4(l-1/3,s,a);else if(~t.indexOf("="))return n=t.match(yO),i&&n.length<4&&(n[3]=1),n}else n=t.match(B6)||A1.transparent;n=n.map(Number)}return r&&!f&&(s=n[0]/or,a=n[1]/or,o=n[2]/or,u=Math.max(s,a,o),d=Math.min(s,a,o),c=(u+d)/2,u===d?l=h=0:(p=u-d,h=c>.5?p/(2-u-d):p/(u+d),l=u===s?(a-o)/p+(a<o?6:0):u===a?(o-s)/p+2:(s-a)/p+4,l*=60),n[0]=~~(l+.5),n[1]=~~(h*100+.5),n[2]=~~(c*100+.5)),i&&n.length<4&&(n[3]=1),n},GO=function(t){var r=[],i=[],n=-1;return t.split(Oh).forEach(function(s){var a=s.match(zd)||[];r.push.apply(r,a),i.push(n+=a.length+1)}),r.c=i,r},jC=function(t,r,i){var n="",s=(t+n).match(Oh),a=r?"hsla(":"rgba(",o=0,l,h,c,u;if(!s)return t;if(s=s.map(function(d){return(d=VO(d,r,1))&&a+(r?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),i&&(c=GO(t),l=i.c,l.join(n)!==c.c.join(n)))for(h=t.replace(Oh,"1").split(zd),u=h.length-1;o<u;o++)n+=h[o]+(~l.indexOf(o)?s.shift()||a+"0,0,0,0)":(c.length?c:s.length?s:i).shift());if(!h)for(h=t.split(Oh),u=h.length-1;o<u;o++)n+=h[o]+s[o];return n+h[u]},Oh=function(){var e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in A1)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),tG=/hsl[a]?\(/,HO=function(t){var r=t.join(" "),i;if(Oh.lastIndex=0,Oh.test(r))return i=tG.test(r),t[1]=jC(t[1],i),t[0]=jC(t[0],i,GO(t[1])),!0},q0,us=function(){var e=Date.now,t=500,r=33,i=e(),n=i,s=1e3/240,a=s,o=[],l,h,c,u,d,p,f=function m(g){var v=e()-n,y=g===!0,x,w,_,b;if(v>t&&(i+=v-r),n+=v,_=n-i,x=_-a,(x>0||y)&&(b=++u.frame,d=_-u.time*1e3,u.time=_=_/1e3,a+=x+(x>=s?4:s-x),w=1),y||(l=h(m)),w)for(p=0;p<o.length;p++)o[p](_,d,b,g)};return u={time:0,frame:0,tick:function(){f(!0)},deltaRatio:function(g){return d/(1e3/(g||60))},wake:function(){bO&&(!z6&&rw()&&(Rs=z6=window,iw=Rs.document||{},bs.gsap=Yn,(Rs.gsapVersions||(Rs.gsapVersions=[])).push(Yn.version),_O(V2||Rs.GreenSockGlobals||!Rs.gsap&&Rs||{}),c=Rs.requestAnimationFrame,UO.forEach(jO)),l&&u.sleep(),h=c||function(g){return setTimeout(g,a-u.time*1e3+1|0)},q0=1,f(2))},sleep:function(){(c?Rs.cancelAnimationFrame:clearTimeout)(l),q0=0,h=H0},lagSmoothing:function(g,v){t=g||1/0,r=Math.min(v||33,t)},fps:function(g){s=1e3/(g||240),a=u.time*1e3+s},add:function(g,v,y){var x=v?function(w,_,b,S){g(w,_,b,S),u.remove(x)}:g;return u.remove(g),o[y?"unshift":"push"](x),Fp(),x},remove:function(g,v){~(v=o.indexOf(g))&&o.splice(v,1)&&p>=v&&p--},_listeners:o},u}(),Fp=function(){return!q0&&us.wake()},Ht={},rG=/^[\d.\-M][\d.\-,\s]/,iG=/["']/g,nG=function(t){for(var r={},i=t.substr(1,t.length-3).split(":"),n=i[0],s=1,a=i.length,o,l,h;s<a;s++)l=i[s],o=s!==a-1?l.lastIndexOf(","):l.length,h=l.substr(0,o),r[n]=isNaN(h)?h.replace(iG,"").trim():+h,n=l.substr(o+1).trim();return r},sG=function(t){var r=t.indexOf("(")+1,i=t.indexOf(")"),n=t.indexOf("(",r);return t.substring(r,~n&&n<i?t.indexOf(")",i+1):i)},aG=function(t){var r=(t+"").split("("),i=Ht[r[0]];return i&&r.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[nG(r[1])]:sG(t).split(",").map(EO)):Ht._CE&&rG.test(t)?Ht._CE("",t):i},WO=function(t){return function(r){return 1-t(1-r)}},qO=function e(t,r){for(var i=t._first,n;i;)i instanceof In?e(i,r):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==r&&(i.timeline?e(i.timeline,r):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=r)),i=i._next},Hu=function(t,r){return t&&(zr(t)?t:Ht[t]||aG(t))||r},Mc=function(t,r,i,n){i===void 0&&(i=function(l){return 1-r(1-l)}),n===void 0&&(n=function(l){return l<.5?r(l*2)/2:1-r((1-l)*2)/2});var s={easeIn:r,easeOut:i,easeInOut:n},a;return Hn(t,function(o){Ht[o]=bs[o]=s,Ht[a=o.toLowerCase()]=i;for(var l in s)Ht[a+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Ht[o+"."+l]=s[l]}),s},XO=function(t){return function(r){return r<.5?(1-t(1-r*2))/2:.5+t((r-.5)*2)/2}},E4=function e(t,r,i){var n=r>=1?r:1,s=(i||(t?.3:.45))/(r<1?r:1),a=s/R6*(Math.asin(1/n)||0),o=function(c){return c===1?1:n*Math.pow(2,-10*c)*RV((c-a)*s)+1},l=t==="out"?o:t==="in"?function(h){return 1-o(1-h)}:XO(o);return s=R6/s,l.config=function(h,c){return e(t,h,c)},l},T4=function e(t,r){r===void 0&&(r=1.70158);var i=function(a){return a?--a*a*((r+1)*a+r)+1:0},n=t==="out"?i:t==="in"?function(s){return 1-i(1-s)}:XO(i);return n.config=function(s){return e(t,s)},n};Hn("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var r=t<5?t+1:t;Mc(e+",Power"+(r-1),t?function(i){return Math.pow(i,r)}:function(i){return i},function(i){return 1-Math.pow(1-i,r)},function(i){return i<.5?Math.pow(i*2,r)/2:1-Math.pow((1-i)*2,r)/2})});Ht.Linear.easeNone=Ht.none=Ht.Linear.easeIn;Mc("Elastic",E4("in"),E4("out"),E4());(function(e,t){var r=1/t,i=2*r,n=2.5*r,s=function(o){return o<r?e*o*o:o<i?e*Math.pow(o-1.5/t,2)+.75:o<n?e*(o-=2.25/t)*o+.9375:e*Math.pow(o-2.625/t,2)+.984375};Mc("Bounce",function(a){return 1-s(1-a)},s)})(7.5625,2.75);Mc("Expo",function(e){return e?Math.pow(2,10*(e-1)):0});Mc("Circ",function(e){return-(gO(1-e*e)-1)});Mc("Sine",function(e){return e===1?1:-IV(e*DV)+1});Mc("Back",T4("in"),T4("out"),T4());Ht.SteppedEase=Ht.steps=bs.SteppedEase={config:function(t,r){t===void 0&&(t=1);var i=1/t,n=t+(r?0:1),s=r?1:0,a=1-hr;return function(o){return((n*Mm(0,a,o)|0)+s)*i}}};zp.ease=Ht["quad.out"];Hn("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return aw+=e+","+e+"Params,"});var YO=function(t,r){this.id=OV++,t._gsap=this,this.target=t,this.harness=r,this.get=r?r.get:MO,this.set=r?r.getSetter:cw},X0=function(){function e(r){this.vars=r,this._delay=+r.delay||0,(this._repeat=r.repeat===1/0?-2:r.repeat||0)&&(this._rDelay=r.repeatDelay||0,this._yoyo=!!r.yoyo||!!r.yoyoEase),this._ts=1,Np(this,+r.duration,1,1),this.data=r.data,Or&&(this._ctx=Or,Or.data.push(this)),q0||us.wake()}var t=e.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,Np(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,n){if(Fp(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(wy(this,i),!s._dp||s.parent||PO(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&lo(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===hr||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),AO(this,i,n)),this},t.time=function(i,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+NC(this))%(this._dur+this._rDelay)||(i?this._dur:0),n):this._time},t.totalProgress=function(i,n){return arguments.length?this.totalTime(this.totalDuration()*i,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(i,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+NC(this),n):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(i,n){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,n):this._repeat?kp(this._tTime,s)+1:1},t.timeScale=function(i){if(!arguments.length)return this._rts===-hr?0:this._rts;if(this._rts===i)return this;var n=this.parent&&this._ts?q2(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-hr?0:this._rts,this.totalTime(Mm(-Math.abs(this._delay),this._tDur,n),!0),xy(this),jV(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Fp(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==hr&&(this._tTime-=hr)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&lo(n,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(Gn(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var n=this.parent||this._dp;return n?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?q2(n.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=kV);var n=Qi;return Qi=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Qi=n,this},t.globalTime=function(i){for(var n=this,s=arguments.length?i:n.rawTime();n;)s=n._start+s/(n._ts||1),n=n._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1/0:this._sat.globalTime(i):s},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,FC(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var n=this._time;return this._rDelay=i,FC(this),n?this.time(n):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,n){return this.totalTime(Is(this,i),Gn(n))},t.restart=function(i,n){return this.play().totalTime(i?-this._delay:0,Gn(n))},t.play=function(i,n){return i!=null&&this.seek(i,n),this.reversed(!1).paused(!1)},t.reverse=function(i,n){return i!=null&&this.seek(i||this.totalDuration(),n),this.reversed(!0).paused(!1)},t.pause=function(i,n){return i!=null&&this.seek(i,n),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-hr:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-hr,this},t.isActive=function(){var i=this.parent||this._dp,n=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=n&&s<this.endTime(!0)-hr)},t.eventCallback=function(i,n,s){var a=this.vars;return arguments.length>1?(n?(a[i]=n,s&&(a[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=n)):delete a[i],this):a[i]},t.then=function(i){var n=this;return new Promise(function(s){var a=zr(i)?i:TO,o=function(){var h=n.then;n.then=null,zr(a)&&(a=a(n))&&(a.then||a===n)&&(n.then=h),s(a),n.then=h};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?o():n._prom=o})},t.kill=function(){M1(this)},e}();aa(X0.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-hr,_prom:0,_ps:!1,_rts:1});var In=function(e){mO(t,e);function t(i,n){var s;return i===void 0&&(i={}),s=e.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=Gn(i.sortChildren),Cr&&lo(i.parent||Cr,Ko(s),n),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&DO(Ko(s),i.scrollTrigger),s}var r=t.prototype;return r.to=function(n,s,a){return $1(0,arguments,this),this},r.from=function(n,s,a){return $1(1,arguments,this),this},r.fromTo=function(n,s,a,o){return $1(2,arguments,this),this},r.set=function(n,s,a){return s.duration=0,s.parent=this,K1(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Kr(n,s,Is(this,a),1),this},r.call=function(n,s,a){return lo(this,Kr.delayedCall(0,n,s),a)},r.staggerTo=function(n,s,a,o,l,h,c){return a.duration=s,a.stagger=a.stagger||o,a.onComplete=h,a.onCompleteParams=c,a.parent=this,new Kr(n,a,Is(this,l)),this},r.staggerFrom=function(n,s,a,o,l,h,c){return a.runBackwards=1,K1(a).immediateRender=Gn(a.immediateRender),this.staggerTo(n,s,a,o,l,h,c)},r.staggerFromTo=function(n,s,a,o,l,h,c,u){return o.startAt=a,K1(o).immediateRender=Gn(o.immediateRender),this.staggerTo(n,s,o,l,h,c,u)},r.render=function(n,s,a){var o=this._time,l=this._dirty?this.totalDuration():this._tDur,h=this._dur,c=n<=0?0:Ri(n),u=this._zTime<0!=n<0&&(this._initted||!h),d,p,f,m,g,v,y,x,w,_,b,S;if(this!==Cr&&c>l&&n>=0&&(c=l),c!==this._tTime||a||u){if(o!==this._time&&h&&(c+=this._time-o,n+=this._time-o),d=c,w=this._start,x=this._ts,v=!x,u&&(h||(o=this._zTime),(n||!s)&&(this._zTime=n)),this._repeat){if(b=this._yoyo,g=h+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(g*100+n,s,a);if(d=Ri(c%g),c===l?(m=this._repeat,d=h):(m=~~(c/g),m&&m===c/g&&(d=h,m--),d>h&&(d=h)),_=kp(this._tTime,g),!o&&this._tTime&&_!==m&&this._tTime-_*g-this._dur<=0&&(_=m),b&&m&1&&(d=h-d,S=1),m!==_&&!this._lock){var C=b&&_&1,M=C===(b&&m&1);if(m<_&&(C=!C),o=C?0:c%h?h:c,this._lock=1,this.render(o||(S?0:Ri(m*g)),s,!h)._lock=0,this._tTime=c,!s&&this.parent&&Zs(this,"onRepeat"),this.vars.repeatRefresh&&!S&&(this.invalidate()._lock=1),o&&o!==this._time||v!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,l=this._tDur,M&&(this._lock=2,o=C?h:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!S&&this.invalidate()),this._lock=0,!this._ts&&!v)return this;qO(this,S)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(y=WV(this,Ri(o),Ri(d)),y&&(c-=d-(d=y._start))),this._tTime=c,this._time=d,this._act=!x,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,o=0),!o&&d&&!s&&!m&&(Zs(this,"onStart"),this._tTime!==c))return this;if(d>=o&&n>=0)for(p=this._first;p;){if(f=p._next,(p._act||d>=p._start)&&p._ts&&y!==p){if(p.parent!==this)return this.render(n,s,a);if(p.render(p._ts>0?(d-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(d-p._start)*p._ts,s,a),d!==this._time||!this._ts&&!v){y=0,f&&(c+=this._zTime=-hr);break}}p=f}else{p=this._last;for(var A=n<0?n:d;p;){if(f=p._prev,(p._act||A<=p._end)&&p._ts&&y!==p){if(p.parent!==this)return this.render(n,s,a);if(p.render(p._ts>0?(A-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(A-p._start)*p._ts,s,a||Qi&&(p._initted||p._startAt)),d!==this._time||!this._ts&&!v){y=0,f&&(c+=this._zTime=A?-hr:hr);break}}p=f}}if(y&&!s&&(this.pause(),y.render(d>=o?0:-hr)._zTime=d>=o?1:-1,this._ts))return this._start=w,xy(this),this.render(n,s,a);this._onUpdate&&!s&&Zs(this,"onUpdate",!0),(c===l&&this._tTime>=this.totalDuration()||!c&&o)&&(w===this._start||Math.abs(x)!==Math.abs(this._ts))&&(this._lock||((n||!h)&&(c===l&&this._ts>0||!c&&this._ts<0)&&Gh(this,1),!s&&!(n<0&&!o)&&(c||o||!l)&&(Zs(this,c===l&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom())))}return this},r.add=function(n,s){var a=this;if(Tl(s)||(s=Is(this,s,n)),!(n instanceof X0)){if(Zi(n))return n.forEach(function(o){return a.add(o,s)}),this;if(Ai(n))return this.addLabel(n,s);if(zr(n))n=Kr.delayedCall(0,n);else return this}return this!==n?lo(this,n,s):this},r.getChildren=function(n,s,a,o){n===void 0&&(n=!0),s===void 0&&(s=!0),a===void 0&&(a=!0),o===void 0&&(o=-Ys);for(var l=[],h=this._first;h;)h._start>=o&&(h instanceof Kr?s&&l.push(h):(a&&l.push(h),n&&l.push.apply(l,h.getChildren(!0,s,a)))),h=h._next;return l},r.getById=function(n){for(var s=this.getChildren(1,1,1),a=s.length;a--;)if(s[a].vars.id===n)return s[a]},r.remove=function(n){return Ai(n)?this.removeLabel(n):zr(n)?this.killTweensOf(n):(yy(this,n),n===this._recent&&(this._recent=this._last),Gu(this))},r.totalTime=function(n,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ri(us.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),e.prototype.totalTime.call(this,n,s),this._forcing=0,this):this._tTime},r.addLabel=function(n,s){return this.labels[n]=Is(this,s),this},r.removeLabel=function(n){return delete this.labels[n],this},r.addPause=function(n,s,a){var o=Kr.delayedCall(0,s||H0,a);return o.data="isPause",this._hasPause=1,lo(this,o,Is(this,n))},r.removePause=function(n){var s=this._first;for(n=Is(this,n);s;)s._start===n&&s.data==="isPause"&&Gh(s),s=s._next},r.killTweensOf=function(n,s,a){for(var o=this.getTweensOf(n,a),l=o.length;l--;)uh!==o[l]&&o[l].kill(n,s);return this},r.getTweensOf=function(n,s){for(var a=[],o=Qs(n),l=this._first,h=Tl(s),c;l;)l instanceof Kr?NV(l._targets,o)&&(h?(!uh||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&a.push(l):(c=l.getTweensOf(o,s)).length&&a.push.apply(a,c),l=l._next;return a},r.tweenTo=function(n,s){s=s||{};var a=this,o=Is(a,n),l=s,h=l.startAt,c=l.onStart,u=l.onStartParams,d=l.immediateRender,p,f=Kr.to(a,aa({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:s.duration||Math.abs((o-(h&&"time"in h?h.time:a._time))/a.timeScale())||hr,onStart:function(){if(a.pause(),!p){var g=s.duration||Math.abs((o-(h&&"time"in h?h.time:a._time))/a.timeScale());f._dur!==g&&Np(f,g,0,1).render(f._time,!0,!0),p=1}c&&c.apply(f,u||[])}},s));return d?f.render(0):f},r.tweenFromTo=function(n,s,a){return this.tweenTo(s,aa({startAt:{time:Is(this,n)}},a))},r.recent=function(){return this._recent},r.nextLabel=function(n){return n===void 0&&(n=this._time),UC(this,Is(this,n))},r.previousLabel=function(n){return n===void 0&&(n=this._time),UC(this,Is(this,n),1)},r.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+hr)},r.shiftChildren=function(n,s,a){a===void 0&&(a=0);for(var o=this._first,l=this.labels,h;o;)o._start>=a&&(o._start+=n,o._end+=n),o=o._next;if(s)for(h in l)l[h]>=a&&(l[h]+=n);return Gu(this)},r.invalidate=function(n){var s=this._first;for(this._lock=0;s;)s.invalidate(n),s=s._next;return e.prototype.invalidate.call(this,n)},r.clear=function(n){n===void 0&&(n=!0);for(var s=this._first,a;s;)a=s._next,this.remove(s),s=a;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),Gu(this)},r.totalDuration=function(n){var s=0,a=this,o=a._last,l=Ys,h,c,u;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-n:n));if(a._dirty){for(u=a.parent;o;)h=o._prev,o._dirty&&o.totalDuration(),c=o._start,c>l&&a._sort&&o._ts&&!a._lock?(a._lock=1,lo(a,o,c-o._delay,1)._lock=0):l=c,c<0&&o._ts&&(s-=c,(!u&&!a._dp||u&&u.smoothChildTiming)&&(a._start+=c/a._ts,a._time-=c,a._tTime-=c),a.shiftChildren(-c,!1,-1/0),l=0),o._end>s&&o._ts&&(s=o._end),o=h;Np(a,a===Cr&&a._time>s?a._time:s,1,1),a._dirty=0}return a._tDur},t.updateRoot=function(n){if(Cr._ts&&(AO(Cr,q2(n,Cr)),SO=us.frame),us.frame>=zC){zC+=xs.autoSleep||120;var s=Cr._first;if((!s||!s._ts)&&xs.autoSleep&&us._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||us.sleep()}}},t}(X0);aa(In.prototype,{_lock:0,_hasPause:0,_forcing:0});var oG=function(t,r,i,n,s,a,o){var l=new Wn(this._pt,t,r,0,1,eI,null,s),h=0,c=0,u,d,p,f,m,g,v,y;for(l.b=i,l.e=n,i+="",n+="",(v=~n.indexOf("random("))&&(n=W0(n)),a&&(y=[i,n],a(y,t,r),i=y[0],n=y[1]),d=i.match(S4)||[];u=S4.exec(n);)f=u[0],m=n.substring(h,u.index),p?p=(p+1)%5:m.substr(-5)==="rgba("&&(p=1),f!==d[c++]&&(g=parseFloat(d[c-1])||0,l._pt={_next:l._pt,p:m||c===1?m:",",s:g,c:f.charAt(1)==="="?ip(g,f)-g:parseFloat(f)-g,m:p&&p<4?Math.round:0},h=S4.lastIndex);return l.c=h<n.length?n.substring(h,n.length):"",l.fp=o,(xO.test(n)||v)&&(l.e=0),this._pt=l,l},lw=function(t,r,i,n,s,a,o,l,h,c){zr(n)&&(n=n(s||0,t,a));var u=t[r],d=i!=="get"?i:zr(u)?h?t[r.indexOf("set")||!zr(t["get"+r.substr(3)])?r:"get"+r.substr(3)](h):t[r]():u,p=zr(u)?h?dG:$O:uw,f;if(Ai(n)&&(~n.indexOf("random(")&&(n=W0(n)),n.charAt(1)==="="&&(f=ip(d,n)+(qi(d)||0),(f||f===0)&&(n=f))),!c||d!==n||G6)return!isNaN(d*n)&&n!==""?(f=new Wn(this._pt,t,r,+d||0,n-(d||0),typeof u=="boolean"?fG:JO,0,p),h&&(f.fp=h),o&&f.modifier(o,this,t),this._pt=f):(!u&&!(r in t)&&nw(r,n),oG.call(this,t,r,d,n,p,l||xs.stringFilter,h))},lG=function(t,r,i,n,s){if(zr(t)&&(t=J1(t,s,r,i,n)),!So(t)||t.style&&t.nodeType||Zi(t)||vO(t))return Ai(t)?J1(t,s,r,i,n):t;var a={},o;for(o in t)a[o]=J1(t[o],s,r,i,n);return a},QO=function(t,r,i,n,s,a){var o,l,h,c;if(os[t]&&(o=new os[t]).init(s,o.rawVars?r[t]:lG(r[t],n,s,a,i),i,n,a)!==!1&&(i._pt=l=new Wn(i._pt,s,t,0,1,o.render,o,0,o.priority),i!==kd))for(h=i._ptLookup[i._targets.indexOf(s)],c=o._props.length;c--;)h[o._props[c]]=l;return o},uh,G6,hw=function e(t,r,i){var n=t.vars,s=n.ease,a=n.startAt,o=n.immediateRender,l=n.lazy,h=n.onUpdate,c=n.onUpdateParams,u=n.callbackScope,d=n.runBackwards,p=n.yoyoEase,f=n.keyframes,m=n.autoRevert,g=t._dur,v=t._startAt,y=t._targets,x=t.parent,w=x&&x.data==="nested"?x.vars.targets:y,_=t._overwrite==="auto"&&!ew,b=t.timeline,S,C,M,A,T,L,D,O,z,q,N,I,W;if(b&&(!f||!s)&&(s="none"),t._ease=Hu(s,zp.ease),t._yEase=p?WO(Hu(p===!0?s:p,zp.ease)):0,p&&t._yoyo&&!t._repeat&&(p=t._yEase,t._yEase=t._ease,t._ease=p),t._from=!b&&!!n.runBackwards,!b||f&&!n.stagger){if(O=y[0]?Vu(y[0]).harness:0,I=O&&n[O.prop],S=W2(n,sw),v&&(v._zTime<0&&v.progress(1),r<0&&d&&o&&!m?v.render(-1,!0):v.revert(d&&g?Xv:zV),v._lazy=0),a){if(Gh(t._startAt=Kr.set(y,aa({data:"isStart",overwrite:!1,parent:x,immediateRender:!0,lazy:!v&&Gn(l),startAt:null,delay:0,onUpdate:h,onUpdateParams:c,callbackScope:u,stagger:0},a))),t._startAt._dp=0,t._startAt._sat=t,r<0&&(Qi||!o&&!m)&&t._startAt.revert(Xv),o&&g&&r<=0&&i<=0){r&&(t._zTime=r);return}}else if(d&&g&&!v){if(r&&(o=!1),M=aa({overwrite:!1,data:"isFromStart",lazy:o&&!v&&Gn(l),immediateRender:o,stagger:0,parent:x},S),I&&(M[O.prop]=I),Gh(t._startAt=Kr.set(y,M)),t._startAt._dp=0,t._startAt._sat=t,r<0&&(Qi?t._startAt.revert(Xv):t._startAt.render(-1,!0)),t._zTime=r,!o)e(t._startAt,hr,hr);else if(!r)return}for(t._pt=t._ptCache=0,l=g&&Gn(l)||l&&!g,C=0;C<y.length;C++){if(T=y[C],D=T._gsap||ow(y)[C]._gsap,t._ptLookup[C]=q={},k6[D.id]&&Dh.length&&H2(),N=w===y?C:w.indexOf(T),O&&(z=new O).init(T,I||S,t,N,w)!==!1&&(t._pt=A=new Wn(t._pt,T,z.name,0,1,z.render,z,0,z.priority),z._props.forEach(function(P){q[P]=A}),z.priority&&(L=1)),!O||I)for(M in S)os[M]&&(z=QO(M,S,t,N,T,w))?z.priority&&(L=1):q[M]=A=lw.call(t,T,M,"get",S[M],N,w,0,n.stringFilter);t._op&&t._op[C]&&t.kill(T,t._op[C]),_&&t._pt&&(uh=t,Cr.killTweensOf(T,q,t.globalTime(r)),W=!t.parent,uh=0),t._pt&&l&&(k6[D.id]=1)}L&&tI(t),t._onInit&&t._onInit(t)}t._onUpdate=h,t._initted=(!t._op||t._pt)&&!W,f&&r<=0&&b.render(Ys,!0,!0)},hG=function(t,r,i,n,s,a,o){var l=(t._pt&&t._ptCache||(t._ptCache={}))[r],h,c,u,d;if(!l)for(l=t._ptCache[r]=[],u=t._ptLookup,d=t._targets.length;d--;){if(h=u[d][r],h&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==r&&h.fp!==r;)h=h._next;if(!h)return G6=1,t.vars[r]="+=0",hw(t,o),G6=0,1;l.push(h)}for(d=l.length;d--;)c=l[d],h=c._pt||c,h.s=(n||n===0)&&!s?n:h.s+(n||0)+a*h.c,h.c=i-h.s,c.e&&(c.e=jr(i)+qi(c.e)),c.b&&(c.b=h.s+qi(c.b))},uG=function(t,r){var i=t[0]?Vu(t[0]).harness:0,n=i&&i.aliases,s,a,o,l;if(!n)return r;s=uc({},r);for(a in n)if(a in s)for(l=n[a].split(","),o=l.length;o--;)s[l[o]]=s[a];return s},cG=function(t,r,i,n){var s=r.ease||n||"power1.inOut",a,o;if(Zi(r))o=i[t]||(i[t]=[]),r.forEach(function(l,h){return o.push({t:h/(r.length-1)*100,v:l,e:s})});else for(a in r)o=i[a]||(i[a]=[]),a==="ease"||o.push({t:parseFloat(t),v:r[a],e:s})},J1=function(t,r,i,n,s){return zr(t)?t.call(r,i,n,s):Ai(t)&&~t.indexOf("random(")?W0(t):t},ZO=aw+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",KO={};Hn(ZO+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return KO[e]=1});var Kr=function(e){mO(t,e);function t(i,n,s,a){var o;typeof n=="number"&&(s.duration=n,n=s,s=null),o=e.call(this,a?n:K1(n))||this;var l=o.vars,h=l.duration,c=l.delay,u=l.immediateRender,d=l.stagger,p=l.overwrite,f=l.keyframes,m=l.defaults,g=l.scrollTrigger,v=l.yoyoEase,y=n.parent||Cr,x=(Zi(i)||vO(i)?Tl(i[0]):"length"in n)?[i]:Qs(i),w,_,b,S,C,M,A,T;if(o._targets=x.length?ow(x):G2("GSAP target "+i+" not found. https://greensock.com",!xs.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=p,f||d||ng(h)||ng(c)){if(n=o.vars,w=o.timeline=new In({data:"nested",defaults:m||{},targets:y&&y.data==="nested"?y.vars.targets:x}),w.kill(),w.parent=w._dp=Ko(o),w._start=0,d||ng(h)||ng(c)){if(S=x.length,A=d&&BO(d),So(d))for(C in d)~ZO.indexOf(C)&&(T||(T={}),T[C]=d[C]);for(_=0;_<S;_++)b=W2(n,KO),b.stagger=0,v&&(b.yoyoEase=v),T&&uc(b,T),M=x[_],b.duration=+J1(h,Ko(o),_,M,x),b.delay=(+J1(c,Ko(o),_,M,x)||0)-o._delay,!d&&S===1&&b.delay&&(o._delay=c=b.delay,o._start+=c,b.delay=0),w.to(M,b,A?A(_,M,x):0),w._ease=Ht.none;w.duration()?h=c=0:o.timeline=0}else if(f){K1(aa(w.vars.defaults,{ease:"none"})),w._ease=Hu(f.ease||n.ease||"none");var L=0,D,O,z;if(Zi(f))f.forEach(function(q){return w.to(x,q,">")}),w.duration();else{b={};for(C in f)C==="ease"||C==="easeEach"||cG(C,f[C],b,f.easeEach);for(C in b)for(D=b[C].sort(function(q,N){return q.t-N.t}),L=0,_=0;_<D.length;_++)O=D[_],z={ease:O.e,duration:(O.t-(_?D[_-1].t:0))/100*h},z[C]=O.v,w.to(x,z,L),L+=z.duration;w.duration()<h&&w.to({},{duration:h-w.duration()})}}h||o.duration(h=w.duration())}else o.timeline=0;return p===!0&&!ew&&(uh=Ko(o),Cr.killTweensOf(x),uh=0),lo(y,Ko(o),s),n.reversed&&o.reverse(),n.paused&&o.paused(!0),(u||!h&&!f&&o._start===Ri(y._time)&&Gn(u)&&VV(Ko(o))&&y.data!=="nested")&&(o._tTime=-hr,o.render(Math.max(0,-c)||0)),g&&DO(Ko(o),g),o}var r=t.prototype;return r.render=function(n,s,a){var o=this._time,l=this._tDur,h=this._dur,c=n<0,u=n>l-hr&&!c?l:n<hr?0:n,d,p,f,m,g,v,y,x,w;if(!h)HV(this,n,s,a);else if(u!==this._tTime||!n||a||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c){if(d=u,x=this.timeline,this._repeat){if(m=h+this._rDelay,this._repeat<-1&&c)return this.totalTime(m*100+n,s,a);if(d=Ri(u%m),u===l?(f=this._repeat,d=h):(f=~~(u/m),f&&f===u/m&&(d=h,f--),d>h&&(d=h)),v=this._yoyo&&f&1,v&&(w=this._yEase,d=h-d),g=kp(this._tTime,m),d===o&&!a&&this._initted)return this._tTime=u,this;f!==g&&(x&&this._yEase&&qO(x,v),this.vars.repeatRefresh&&!v&&!this._lock&&(this._lock=a=1,this.render(Ri(m*f),!0).invalidate()._lock=0))}if(!this._initted){if(OO(this,c?n:d,a,s,u))return this._tTime=0,this;if(o!==this._time)return this;if(h!==this._dur)return this.render(n,s,a)}if(this._tTime=u,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=y=(w||this._ease)(d/h),this._from&&(this.ratio=y=1-y),d&&!o&&!s&&!f&&(Zs(this,"onStart"),this._tTime!==u))return this;for(p=this._pt;p;)p.r(y,p.d),p=p._next;x&&x.render(n<0?n:!d&&v?-hr:x._dur*x._ease(d/this._dur),s,a)||this._startAt&&(this._zTime=n),this._onUpdate&&!s&&(c&&N6(this,n,s,a),Zs(this,"onUpdate")),this._repeat&&f!==g&&this.vars.onRepeat&&!s&&this.parent&&Zs(this,"onRepeat"),(u===this._tDur||!u)&&this._tTime===u&&(c&&!this._onUpdate&&N6(this,n,!0,!0),(n||!h)&&(u===this._tDur&&this._ts>0||!u&&this._ts<0)&&Gh(this,1),!s&&!(c&&!o)&&(u||o||v)&&(Zs(this,u===l?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom()))}return this},r.targets=function(){return this._targets},r.invalidate=function(n){return(!n||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),e.prototype.invalidate.call(this,n)},r.resetTo=function(n,s,a,o){q0||us.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),h;return this._initted||hw(this,l),h=this._ease(l/this._dur),hG(this,n,s,a,o,h,l)?this.resetTo(n,s,a,o):(wy(this,0),this.parent||LO(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},r.kill=function(n,s){if(s===void 0&&(s="all"),!n&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?M1(this):this;if(this.timeline){var a=this.timeline.totalDuration();return this.timeline.killTweensOf(n,s,uh&&uh.vars.overwrite!==!0)._first||M1(this),this.parent&&a!==this.timeline.totalDuration()&&Np(this,this._dur*this.timeline._tDur/a,0,1),this}var o=this._targets,l=n?Qs(n):o,h=this._ptLookup,c=this._pt,u,d,p,f,m,g,v;if((!s||s==="all")&&UV(o,l))return s==="all"&&(this._pt=0),M1(this);for(u=this._op=this._op||[],s!=="all"&&(Ai(s)&&(m={},Hn(s,function(y){return m[y]=1}),s=m),s=uG(o,s)),v=o.length;v--;)if(~l.indexOf(o[v])){d=h[v],s==="all"?(u[v]=s,f=d,p={}):(p=u[v]=u[v]||{},f=s);for(m in f)g=d&&d[m],g&&((!("kill"in g.d)||g.d.kill(m)===!0)&&yy(this,g,"_pt"),delete d[m]),p!=="all"&&(p[m]=1)}return this._initted&&!this._pt&&c&&M1(this),this},t.to=function(n,s){return new t(n,s,arguments[2])},t.from=function(n,s){return $1(1,arguments)},t.delayedCall=function(n,s,a,o){return new t(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:s,onReverseComplete:s,onCompleteParams:a,onReverseCompleteParams:a,callbackScope:o})},t.fromTo=function(n,s,a){return $1(2,arguments)},t.set=function(n,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new t(n,s)},t.killTweensOf=function(n,s,a){return Cr.killTweensOf(n,s,a)},t}(X0);aa(Kr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Hn("staggerTo,staggerFrom,staggerFromTo",function(e){Kr[e]=function(){var t=new In,r=U6.call(arguments,0);return r.splice(e==="staggerFromTo"?5:4,0,0),t[e].apply(t,r)}});var uw=function(t,r,i){return t[r]=i},$O=function(t,r,i){return t[r](i)},dG=function(t,r,i,n){return t[r](n.fp,i)},pG=function(t,r,i){return t.setAttribute(r,i)},cw=function(t,r){return zr(t[r])?$O:tw(t[r])&&t.setAttribute?pG:uw},JO=function(t,r){return r.set(r.t,r.p,Math.round((r.s+r.c*t)*1e6)/1e6,r)},fG=function(t,r){return r.set(r.t,r.p,!!(r.s+r.c*t),r)},eI=function(t,r){var i=r._pt,n="";if(!t&&r.b)n=r.b;else if(t===1&&r.e)n=r.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+n,i=i._next;n+=r.c}r.set(r.t,r.p,n,r)},dw=function(t,r){for(var i=r._pt;i;)i.r(t,i.d),i=i._next},mG=function(t,r,i,n){for(var s=this._pt,a;s;)a=s._next,s.p===n&&s.modifier(t,r,i),s=a},gG=function(t){for(var r=this._pt,i,n;r;)n=r._next,r.p===t&&!r.op||r.op===t?yy(this,r,"_pt"):r.dep||(i=1),r=n;return!i},vG=function(t,r,i,n){n.mSet(t,r,n.m.call(n.tween,i,n.mt),n)},tI=function(t){for(var r=t._pt,i,n,s,a;r;){for(i=r._next,n=s;n&&n.pr>r.pr;)n=n._next;(r._prev=n?n._prev:a)?r._prev._next=r:s=r,(r._next=n)?n._prev=r:a=r,r=i}t._pt=s},Wn=function(){function e(r,i,n,s,a,o,l,h,c){this.t=i,this.s=s,this.c=a,this.p=n,this.r=o||JO,this.d=l||this,this.set=h||uw,this.pr=c||0,this._next=r,r&&(r._prev=this)}var t=e.prototype;return t.modifier=function(i,n,s){this.mSet=this.mSet||this.set,this.set=vG,this.m=i,this.mt=s,this.tween=n},e}();Hn(aw+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return sw[e]=1});bs.TweenMax=bs.TweenLite=Kr;bs.TimelineLite=bs.TimelineMax=In;Cr=new In({sortChildren:!1,defaults:zp,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});xs.stringFilter=HO;var Wu=[],Qv={},yG=[],VC=0,xG=0,L4=function(t){return(Qv[t]||yG).map(function(r){return r()})},H6=function(){var t=Date.now(),r=[];t-VC>2&&(L4("matchMediaInit"),Wu.forEach(function(i){var n=i.queries,s=i.conditions,a,o,l,h;for(o in n)a=Rs.matchMedia(n[o]).matches,a&&(l=1),a!==s[o]&&(s[o]=a,h=1);h&&(i.revert(),l&&r.push(i))}),L4("matchMediaRevert"),r.forEach(function(i){return i.onMatch(i)}),VC=t,L4("matchMedia"))},rI=function(){function e(r,i){this.selector=i&&j6(i),this.data=[],this._r=[],this.isReverted=!1,this.id=xG++,r&&this.add(r)}var t=e.prototype;return t.add=function(i,n,s){zr(i)&&(s=n,n=i,i=zr);var a=this,o=function(){var h=Or,c=a.selector,u;return h&&h!==a&&h.data.push(a),s&&(a.selector=j6(s)),Or=a,u=n.apply(a,arguments),zr(u)&&a._r.push(u),Or=h,a.selector=c,a.isReverted=!1,u};return a.last=o,i===zr?o(a):i?a[i]=o:o},t.ignore=function(i){var n=Or;Or=null,i(this),Or=n},t.getTweens=function(){var i=[];return this.data.forEach(function(n){return n instanceof e?i.push.apply(i,n.getTweens()):n instanceof Kr&&!(n.parent&&n.parent.data==="nested")&&i.push(n)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,n){var s=this;if(i){var a=this.getTweens();this.data.forEach(function(l){l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(h){return a.splice(a.indexOf(h),1)}))}),a.map(function(l){return{g:l.globalTime(0),t:l}}).sort(function(l,h){return h.g-l.g||-1/0}).forEach(function(l){return l.t.revert(i)}),this.data.forEach(function(l){return!(l instanceof Kr)&&l.revert&&l.revert(i)}),this._r.forEach(function(l){return l(i,s)}),this.isReverted=!0}else this.data.forEach(function(l){return l.kill&&l.kill()});if(this.clear(),n)for(var o=Wu.length;o--;)Wu[o].id===this.id&&Wu.splice(o,1)},t.revert=function(i){this.kill(i||{})},e}(),wG=function(){function e(r){this.contexts=[],this.scope=r}var t=e.prototype;return t.add=function(i,n,s){So(i)||(i={matches:i});var a=new rI(0,s||this.scope),o=a.conditions={},l,h,c;Or&&!a.selector&&(a.selector=Or.selector),this.contexts.push(a),n=a.add("onMatch",n),a.queries=i;for(h in i)h==="all"?c=1:(l=Rs.matchMedia(i[h]),l&&(Wu.indexOf(a)<0&&Wu.push(a),(o[h]=l.matches)&&(c=1),l.addListener?l.addListener(H6):l.addEventListener("change",H6)));return c&&n(a),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(n){return n.kill(i,!0)})},e}(),X2={registerPlugin:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];r.forEach(function(n){return jO(n)})},timeline:function(t){return new In(t)},getTweensOf:function(t,r){return Cr.getTweensOf(t,r)},getProperty:function(t,r,i,n){Ai(t)&&(t=Qs(t)[0]);var s=Vu(t||{}).get,a=i?TO:EO;return i==="native"&&(i=""),t&&(r?a((os[r]&&os[r].get||s)(t,r,i,n)):function(o,l,h){return a((os[o]&&os[o].get||s)(t,o,l,h))})},quickSetter:function(t,r,i){if(t=Qs(t),t.length>1){var n=t.map(function(c){return Yn.quickSetter(c,r,i)}),s=n.length;return function(c){for(var u=s;u--;)n[u](c)}}t=t[0]||{};var a=os[r],o=Vu(t),l=o.harness&&(o.harness.aliases||{})[r]||r,h=a?function(c){var u=new a;kd._pt=0,u.init(t,i?c+i:c,kd,0,[t]),u.render(1,u),kd._pt&&dw(1,kd)}:o.set(t,l);return a?h:function(c){return h(t,l,i?c+i:c,o,1)}},quickTo:function(t,r,i){var n,s=Yn.to(t,uc((n={},n[r]="+=0.1",n.paused=!0,n),i||{})),a=function(l,h,c){return s.resetTo(r,l,h,c)};return a.tween=s,a},isTweening:function(t){return Cr.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Hu(t.ease,zp.ease)),kC(zp,t||{})},config:function(t){return kC(xs,t||{})},registerEffect:function(t){var r=t.name,i=t.effect,n=t.plugins,s=t.defaults,a=t.extendTimeline;(n||"").split(",").forEach(function(o){return o&&!os[o]&&!bs[o]&&G2(r+" effect requires "+o+" plugin.")}),M4[r]=function(o,l,h){return i(Qs(o),aa(l||{},s),h)},a&&(In.prototype[r]=function(o,l,h){return this.add(M4[r](o,So(l)?l:(h=l)&&{},this),h)})},registerEase:function(t,r){Ht[t]=Hu(r)},parseEase:function(t,r){return arguments.length?Hu(t,r):Ht},getById:function(t){return Cr.getById(t)},exportRoot:function(t,r){t===void 0&&(t={});var i=new In(t),n,s;for(i.smoothChildTiming=Gn(t.smoothChildTiming),Cr.remove(i),i._dp=0,i._time=i._tTime=Cr._time,n=Cr._first;n;)s=n._next,(r||!(!n._dur&&n instanceof Kr&&n.vars.onComplete===n._targets[0]))&&lo(i,n,n._start-n._delay),n=s;return lo(Cr,i,0),i},context:function(t,r){return t?new rI(t,r):Or},matchMedia:function(t){return new wG(t)},matchMediaRefresh:function(){return Wu.forEach(function(t){var r=t.conditions,i,n;for(n in r)r[n]&&(r[n]=!1,i=1);i&&t.revert()})||H6()},addEventListener:function(t,r){var i=Qv[t]||(Qv[t]=[]);~i.indexOf(r)||i.push(r)},removeEventListener:function(t,r){var i=Qv[t],n=i&&i.indexOf(r);n>=0&&i.splice(n,1)},utils:{wrap:$V,wrapYoyo:JV,distribute:BO,random:kO,snap:zO,normalize:KV,getUnit:qi,clamp:XV,splitColor:VO,toArray:Qs,selector:j6,mapRange:FO,pipe:QV,unitize:ZV,interpolate:eG,shuffle:RO},install:_O,effects:M4,ticker:us,updateRoot:In.updateRoot,plugins:os,globalTimeline:Cr,core:{PropTween:Wn,globals:CO,Tween:Kr,Timeline:In,Animation:X0,getCache:Vu,_removeLinkedListItem:yy,reverting:function(){return Qi},context:function(t){return t&&Or&&(Or.data.push(t),t._ctx=Or),Or},suppressOverwrites:function(t){return ew=t}}};Hn("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return X2[e]=Kr[e]});us.add(In.updateRoot);kd=X2.to({},{duration:0});var bG=function(t,r){for(var i=t._pt;i&&i.p!==r&&i.op!==r&&i.fp!==r;)i=i._next;return i},_G=function(t,r){var i=t._targets,n,s,a;for(n in r)for(s=i.length;s--;)a=t._ptLookup[s][n],a&&(a=a.d)&&(a._pt&&(a=bG(a,n)),a&&a.modifier&&a.modifier(r[n],t,i[s],n))},P4=function(t,r){return{name:t,rawVars:1,init:function(n,s,a){a._onInit=function(o){var l,h;if(Ai(s)&&(l={},Hn(s,function(c){return l[c]=1}),s=l),r){l={};for(h in s)l[h]=r(s[h]);s=l}_G(o,s)}}}},Yn=X2.registerPlugin({name:"attr",init:function(t,r,i,n,s){var a,o,l;this.tween=i;for(a in r)l=t.getAttribute(a)||"",o=this.add(t,"setAttribute",(l||0)+"",r[a],n,s,0,0,a),o.op=a,o.b=l,this._props.push(a)},render:function(t,r){for(var i=r._pt;i;)Qi?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",init:function(t,r){for(var i=r.length;i--;)this.add(t,i,t[i]||0,r[i],0,0,0,0,0,1)}},P4("roundProps",V6),P4("modifiers"),P4("snap",zO))||X2;Kr.version=In.version=Yn.version="3.12.2";bO=1;rw()&&Fp();Ht.Power0;Ht.Power1;Ht.Power2;Ht.Power3;Ht.Power4;Ht.Linear;Ht.Quad;Ht.Cubic;Ht.Quart;Ht.Quint;Ht.Strong;Ht.Elastic;Ht.Back;Ht.SteppedEase;Ht.Bounce;Ht.Sine;Ht.Expo;Ht.Circ;/*!
 * CSSPlugin 3.12.2
 * https://greensock.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var GC,ch,np,pw,Iu,HC,fw,CG=function(){return typeof window<"u"},Ll={},gu=180/Math.PI,sp=Math.PI/180,Oc=Math.atan2,WC=1e8,mw=/([A-Z])/g,SG=/(left|right|width|margin|padding|x)/i,MG=/[\s,\(]\S/,fo={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},W6=function(t,r){return r.set(r.t,r.p,Math.round((r.s+r.c*t)*1e4)/1e4+r.u,r)},AG=function(t,r){return r.set(r.t,r.p,t===1?r.e:Math.round((r.s+r.c*t)*1e4)/1e4+r.u,r)},EG=function(t,r){return r.set(r.t,r.p,t?Math.round((r.s+r.c*t)*1e4)/1e4+r.u:r.b,r)},TG=function(t,r){var i=r.s+r.c*t;r.set(r.t,r.p,~~(i+(i<0?-.5:.5))+r.u,r)},iI=function(t,r){return r.set(r.t,r.p,t?r.e:r.b,r)},nI=function(t,r){return r.set(r.t,r.p,t!==1?r.b:r.e,r)},LG=function(t,r,i){return t.style[r]=i},PG=function(t,r,i){return t.style.setProperty(r,i)},DG=function(t,r,i){return t._gsap[r]=i},OG=function(t,r,i){return t._gsap.scaleX=t._gsap.scaleY=i},IG=function(t,r,i,n,s){var a=t._gsap;a.scaleX=a.scaleY=i,a.renderTransform(s,a)},RG=function(t,r,i,n,s){var a=t._gsap;a[r]=i,a.renderTransform(s,a)},Sr="transform",Ia=Sr+"Origin",BG=function e(t,r){var i=this,n=this.target,s=n.style;if(t in Ll&&s){if(this.tfm=this.tfm||{},t!=="transform")t=fo[t]||t,~t.indexOf(",")?t.split(",").forEach(function(a){return i.tfm[a]=rl(n,a)}):this.tfm[t]=n._gsap.x?n._gsap[t]:rl(n,t);else return fo.transform.split(",").forEach(function(a){return e.call(i,a,r)});if(this.props.indexOf(Sr)>=0)return;n._gsap.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(Ia,r,"")),t=Sr}(s||r)&&this.props.push(t,r,s[t])},sI=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},zG=function(){var t=this.props,r=this.target,i=r.style,n=r._gsap,s,a;for(s=0;s<t.length;s+=3)t[s+1]?r[t[s]]=t[s+2]:t[s+2]?i[t[s]]=t[s+2]:i.removeProperty(t[s].substr(0,2)==="--"?t[s]:t[s].replace(mw,"-$1").toLowerCase());if(this.tfm){for(a in this.tfm)n[a]=this.tfm[a];n.svg&&(n.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),s=fw(),(!s||!s.isStart)&&!i[Sr]&&(sI(i),n.uncache=1)}},aI=function(t,r){var i={target:t,props:[],revert:zG,save:BG};return t._gsap||Yn.core.getCache(t),r&&r.split(",").forEach(function(n){return i.save(n)}),i},oI,q6=function(t,r){var i=ch.createElementNS?ch.createElementNS((r||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):ch.createElement(t);return i.style?i:ch.createElement(t)},wo=function e(t,r,i){var n=getComputedStyle(t);return n[r]||n.getPropertyValue(r.replace(mw,"-$1").toLowerCase())||n.getPropertyValue(r)||!i&&e(t,Up(r)||r,1)||""},qC="O,Moz,ms,Ms,Webkit".split(","),Up=function(t,r,i){var n=r||Iu,s=n.style,a=5;if(t in s&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);a--&&!(qC[a]+t in s););return a<0?null:(a===3?"ms":a>=0?qC[a]:"")+t},X6=function(){CG()&&window.document&&(GC=window,ch=GC.document,np=ch.documentElement,Iu=q6("div")||{style:{}},q6("div"),Sr=Up(Sr),Ia=Sr+"Origin",Iu.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",oI=!!Up("perspective"),fw=Yn.core.reverting,pw=1)},D4=function e(t){var r=q6("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,n=this.nextSibling,s=this.style.cssText,a;if(np.appendChild(r),r.appendChild(this),this.style.display="block",t)try{a=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch{}else this._gsapBBox&&(a=this._gsapBBox());return i&&(n?i.insertBefore(this,n):i.appendChild(this)),np.removeChild(r),this.style.cssText=s,a},XC=function(t,r){for(var i=r.length;i--;)if(t.hasAttribute(r[i]))return t.getAttribute(r[i])},lI=function(t){var r;try{r=t.getBBox()}catch{r=D4.call(t,!0)}return r&&(r.width||r.height)||t.getBBox===D4||(r=D4.call(t,!0)),r&&!r.width&&!r.x&&!r.y?{x:+XC(t,["x","cx","x1"])||0,y:+XC(t,["y","cy","y1"])||0,width:0,height:0}:r},hI=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&lI(t))},Y0=function(t,r){if(r){var i=t.style;r in Ll&&r!==Ia&&(r=Sr),i.removeProperty?((r.substr(0,2)==="ms"||r.substr(0,6)==="webkit")&&(r="-"+r),i.removeProperty(r.replace(mw,"-$1").toLowerCase())):i.removeAttribute(r)}},dh=function(t,r,i,n,s,a){var o=new Wn(t._pt,r,i,0,1,a?nI:iI);return t._pt=o,o.b=n,o.e=s,t._props.push(i),o},YC={deg:1,rad:1,turn:1},kG={grid:1,flex:1},Hh=function e(t,r,i,n){var s=parseFloat(i)||0,a=(i+"").trim().substr((s+"").length)||"px",o=Iu.style,l=SG.test(r),h=t.tagName.toLowerCase()==="svg",c=(h?"client":"offset")+(l?"Width":"Height"),u=100,d=n==="px",p=n==="%",f,m,g,v;return n===a||!s||YC[n]||YC[a]?s:(a!=="px"&&!d&&(s=e(t,r,i,"px")),v=t.getCTM&&hI(t),(p||a==="%")&&(Ll[r]||~r.indexOf("adius"))?(f=v?t.getBBox()[l?"width":"height"]:t[c],jr(p?s/f*u:s/100*f)):(o[l?"width":"height"]=u+(d?a:n),m=~r.indexOf("adius")||n==="em"&&t.appendChild&&!h?t:t.parentNode,v&&(m=(t.ownerSVGElement||{}).parentNode),(!m||m===ch||!m.appendChild)&&(m=ch.body),g=m._gsap,g&&p&&g.width&&l&&g.time===us.time&&!g.uncache?jr(s/g.width*u):((p||a==="%")&&!kG[wo(m,"display")]&&(o.position=wo(t,"position")),m===t&&(o.position="static"),m.appendChild(Iu),f=Iu[c],m.removeChild(Iu),o.position="absolute",l&&p&&(g=Vu(m),g.time=us.time,g.width=m[c]),jr(d?f*s/u:f&&s?u/f*s:0))))},rl=function(t,r,i,n){var s;return pw||X6(),r in fo&&r!=="transform"&&(r=fo[r],~r.indexOf(",")&&(r=r.split(",")[0])),Ll[r]&&r!=="transform"?(s=Z0(t,n),s=r!=="transformOrigin"?s[r]:s.svg?s.origin:Q2(wo(t,Ia))+" "+s.zOrigin+"px"):(s=t.style[r],(!s||s==="auto"||n||~(s+"").indexOf("calc("))&&(s=Y2[r]&&Y2[r](t,r,i)||wo(t,r)||MO(t,r)||(r==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?Hh(t,r,s,i)+i:s},NG=function(t,r,i,n){if(!i||i==="none"){var s=Up(r,t,1),a=s&&wo(t,s,1);a&&a!==i?(r=s,i=a):r==="borderColor"&&(i=wo(t,"borderTopColor"))}var o=new Wn(this._pt,t.style,r,0,1,eI),l=0,h=0,c,u,d,p,f,m,g,v,y,x,w,_;if(o.b=i,o.e=n,i+="",n+="",n==="auto"&&(t.style[r]=n,n=wo(t,r)||n,t.style[r]=i),c=[i,n],HO(c),i=c[0],n=c[1],d=i.match(zd)||[],_=n.match(zd)||[],_.length){for(;u=zd.exec(n);)g=u[0],y=n.substring(l,u.index),f?f=(f+1)%5:(y.substr(-5)==="rgba("||y.substr(-5)==="hsla(")&&(f=1),g!==(m=d[h++]||"")&&(p=parseFloat(m)||0,w=m.substr((p+"").length),g.charAt(1)==="="&&(g=ip(p,g)+w),v=parseFloat(g),x=g.substr((v+"").length),l=zd.lastIndex-x.length,x||(x=x||xs.units[r]||w,l===n.length&&(n+=x,o.e+=x)),w!==x&&(p=Hh(t,r,m,x)||0),o._pt={_next:o._pt,p:y||h===1?y:",",s:p,c:v-p,m:f&&f<4||r==="zIndex"?Math.round:0});o.c=l<n.length?n.substring(l,n.length):""}else o.r=r==="display"&&n==="none"?nI:iI;return xO.test(n)&&(o.e=0),this._pt=o,o},QC={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},FG=function(t){var r=t.split(" "),i=r[0],n=r[1]||"50%";return(i==="top"||i==="bottom"||n==="left"||n==="right")&&(t=i,i=n,n=t),r[0]=QC[i]||i,r[1]=QC[n]||n,r.join(" ")},UG=function(t,r){if(r.tween&&r.tween._time===r.tween._dur){var i=r.t,n=i.style,s=r.u,a=i._gsap,o,l,h;if(s==="all"||s===!0)n.cssText="",l=1;else for(s=s.split(","),h=s.length;--h>-1;)o=s[h],Ll[o]&&(l=1,o=o==="transformOrigin"?Ia:Sr),Y0(i,o);l&&(Y0(i,Sr),a&&(a.svg&&i.removeAttribute("transform"),Z0(i,1),a.uncache=1,sI(n)))}},Y2={clearProps:function(t,r,i,n,s){if(s.data!=="isFromStart"){var a=t._pt=new Wn(t._pt,r,i,0,0,UG);return a.u=n,a.pr=-10,a.tween=s,t._props.push(i),1}}},Q0=[1,0,0,1,0,0],uI={},cI=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},ZC=function(t){var r=wo(t,Sr);return cI(r)?Q0:r.substr(7).match(yO).map(jr)},gw=function(t,r){var i=t._gsap||Vu(t),n=t.style,s=ZC(t),a,o,l,h;return i.svg&&t.getAttribute("transform")?(l=t.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?Q0:s):(s===Q0&&!t.offsetParent&&t!==np&&!i.svg&&(l=n.display,n.display="block",a=t.parentNode,(!a||!t.offsetParent)&&(h=1,o=t.nextElementSibling,np.appendChild(t)),s=ZC(t),l?n.display=l:Y0(t,"display"),h&&(o?a.insertBefore(t,o):a?a.appendChild(t):np.removeChild(t))),r&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Y6=function(t,r,i,n,s,a){var o=t._gsap,l=s||gw(t,!0),h=o.xOrigin||0,c=o.yOrigin||0,u=o.xOffset||0,d=o.yOffset||0,p=l[0],f=l[1],m=l[2],g=l[3],v=l[4],y=l[5],x=r.split(" "),w=parseFloat(x[0])||0,_=parseFloat(x[1])||0,b,S,C,M;i?l!==Q0&&(S=p*g-f*m)&&(C=w*(g/S)+_*(-m/S)+(m*y-g*v)/S,M=w*(-f/S)+_*(p/S)-(p*y-f*v)/S,w=C,_=M):(b=lI(t),w=b.x+(~x[0].indexOf("%")?w/100*b.width:w),_=b.y+(~(x[1]||x[0]).indexOf("%")?_/100*b.height:_)),n||n!==!1&&o.smooth?(v=w-h,y=_-c,o.xOffset=u+(v*p+y*m)-v,o.yOffset=d+(v*f+y*g)-y):o.xOffset=o.yOffset=0,o.xOrigin=w,o.yOrigin=_,o.smooth=!!n,o.origin=r,o.originIsAbsolute=!!i,t.style[Ia]="0px 0px",a&&(dh(a,o,"xOrigin",h,w),dh(a,o,"yOrigin",c,_),dh(a,o,"xOffset",u,o.xOffset),dh(a,o,"yOffset",d,o.yOffset)),t.setAttribute("data-svg-origin",w+" "+_)},Z0=function(t,r){var i=t._gsap||new YO(t);if("x"in i&&!r&&!i.uncache)return i;var n=t.style,s=i.scaleX<0,a="px",o="deg",l=getComputedStyle(t),h=wo(t,Ia)||"0",c,u,d,p,f,m,g,v,y,x,w,_,b,S,C,M,A,T,L,D,O,z,q,N,I,W,P,V,G,Q,U,Y;return c=u=d=m=g=v=y=x=w=0,p=f=1,i.svg=!!(t.getCTM&&hI(t)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(n[Sr]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Sr]!=="none"?l[Sr]:"")),n.scale=n.rotate=n.translate="none"),S=gw(t,i.svg),i.svg&&(i.uncache?(I=t.getBBox(),h=i.xOrigin-I.x+"px "+(i.yOrigin-I.y)+"px",N=""):N=!r&&t.getAttribute("data-svg-origin"),Y6(t,N||h,!!N||i.originIsAbsolute,i.smooth!==!1,S)),_=i.xOrigin||0,b=i.yOrigin||0,S!==Q0&&(T=S[0],L=S[1],D=S[2],O=S[3],c=z=S[4],u=q=S[5],S.length===6?(p=Math.sqrt(T*T+L*L),f=Math.sqrt(O*O+D*D),m=T||L?Oc(L,T)*gu:0,y=D||O?Oc(D,O)*gu+m:0,y&&(f*=Math.abs(Math.cos(y*sp))),i.svg&&(c-=_-(_*T+b*D),u-=b-(_*L+b*O))):(Y=S[6],Q=S[7],P=S[8],V=S[9],G=S[10],U=S[11],c=S[12],u=S[13],d=S[14],C=Oc(Y,G),g=C*gu,C&&(M=Math.cos(-C),A=Math.sin(-C),N=z*M+P*A,I=q*M+V*A,W=Y*M+G*A,P=z*-A+P*M,V=q*-A+V*M,G=Y*-A+G*M,U=Q*-A+U*M,z=N,q=I,Y=W),C=Oc(-D,G),v=C*gu,C&&(M=Math.cos(-C),A=Math.sin(-C),N=T*M-P*A,I=L*M-V*A,W=D*M-G*A,U=O*A+U*M,T=N,L=I,D=W),C=Oc(L,T),m=C*gu,C&&(M=Math.cos(C),A=Math.sin(C),N=T*M+L*A,I=z*M+q*A,L=L*M-T*A,q=q*M-z*A,T=N,z=I),g&&Math.abs(g)+Math.abs(m)>359.9&&(g=m=0,v=180-v),p=jr(Math.sqrt(T*T+L*L+D*D)),f=jr(Math.sqrt(q*q+Y*Y)),C=Oc(z,q),y=Math.abs(C)>2e-4?C*gu:0,w=U?1/(U<0?-U:U):0),i.svg&&(N=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!cI(wo(t,Sr)),N&&t.setAttribute("transform",N))),Math.abs(y)>90&&Math.abs(y)<270&&(s?(p*=-1,y+=m<=0?180:-180,m+=m<=0?180:-180):(f*=-1,y+=y<=0?180:-180)),r=r||i.uncache,i.x=c-((i.xPercent=c&&(!r&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-c)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+a,i.y=u-((i.yPercent=u&&(!r&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-u)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+a,i.z=d+a,i.scaleX=jr(p),i.scaleY=jr(f),i.rotation=jr(m)+o,i.rotationX=jr(g)+o,i.rotationY=jr(v)+o,i.skewX=y+o,i.skewY=x+o,i.transformPerspective=w+a,(i.zOrigin=parseFloat(h.split(" ")[2])||0)&&(n[Ia]=Q2(h)),i.xOffset=i.yOffset=0,i.force3D=xs.force3D,i.renderTransform=i.svg?VG:oI?dI:jG,i.uncache=0,i},Q2=function(t){return(t=t.split(" "))[0]+" "+t[1]},O4=function(t,r,i){var n=qi(r);return jr(parseFloat(r)+parseFloat(Hh(t,"x",i+"px",n)))+n},jG=function(t,r){r.z="0px",r.rotationY=r.rotationX="0deg",r.force3D=0,dI(t,r)},nu="0deg",Ff="0px",su=") ",dI=function(t,r){var i=r||this,n=i.xPercent,s=i.yPercent,a=i.x,o=i.y,l=i.z,h=i.rotation,c=i.rotationY,u=i.rotationX,d=i.skewX,p=i.skewY,f=i.scaleX,m=i.scaleY,g=i.transformPerspective,v=i.force3D,y=i.target,x=i.zOrigin,w="",_=v==="auto"&&t&&t!==1||v===!0;if(x&&(u!==nu||c!==nu)){var b=parseFloat(c)*sp,S=Math.sin(b),C=Math.cos(b),M;b=parseFloat(u)*sp,M=Math.cos(b),a=O4(y,a,S*M*-x),o=O4(y,o,-Math.sin(b)*-x),l=O4(y,l,C*M*-x+x)}g!==Ff&&(w+="perspective("+g+su),(n||s)&&(w+="translate("+n+"%, "+s+"%) "),(_||a!==Ff||o!==Ff||l!==Ff)&&(w+=l!==Ff||_?"translate3d("+a+", "+o+", "+l+") ":"translate("+a+", "+o+su),h!==nu&&(w+="rotate("+h+su),c!==nu&&(w+="rotateY("+c+su),u!==nu&&(w+="rotateX("+u+su),(d!==nu||p!==nu)&&(w+="skew("+d+", "+p+su),(f!==1||m!==1)&&(w+="scale("+f+", "+m+su),y.style[Sr]=w||"translate(0, 0)"},VG=function(t,r){var i=r||this,n=i.xPercent,s=i.yPercent,a=i.x,o=i.y,l=i.rotation,h=i.skewX,c=i.skewY,u=i.scaleX,d=i.scaleY,p=i.target,f=i.xOrigin,m=i.yOrigin,g=i.xOffset,v=i.yOffset,y=i.forceCSS,x=parseFloat(a),w=parseFloat(o),_,b,S,C,M;l=parseFloat(l),h=parseFloat(h),c=parseFloat(c),c&&(c=parseFloat(c),h+=c,l+=c),l||h?(l*=sp,h*=sp,_=Math.cos(l)*u,b=Math.sin(l)*u,S=Math.sin(l-h)*-d,C=Math.cos(l-h)*d,h&&(c*=sp,M=Math.tan(h-c),M=Math.sqrt(1+M*M),S*=M,C*=M,c&&(M=Math.tan(c),M=Math.sqrt(1+M*M),_*=M,b*=M)),_=jr(_),b=jr(b),S=jr(S),C=jr(C)):(_=u,C=d,b=S=0),(x&&!~(a+"").indexOf("px")||w&&!~(o+"").indexOf("px"))&&(x=Hh(p,"x",a,"px"),w=Hh(p,"y",o,"px")),(f||m||g||v)&&(x=jr(x+f-(f*_+m*S)+g),w=jr(w+m-(f*b+m*C)+v)),(n||s)&&(M=p.getBBox(),x=jr(x+n/100*M.width),w=jr(w+s/100*M.height)),M="matrix("+_+","+b+","+S+","+C+","+x+","+w+")",p.setAttribute("transform",M),y&&(p.style[Sr]=M)},GG=function(t,r,i,n,s){var a=360,o=Ai(s),l=parseFloat(s)*(o&&~s.indexOf("rad")?gu:1),h=l-n,c=n+h+"deg",u,d;return o&&(u=s.split("_")[1],u==="short"&&(h%=a,h!==h%(a/2)&&(h+=h<0?a:-a)),u==="cw"&&h<0?h=(h+a*WC)%a-~~(h/a)*a:u==="ccw"&&h>0&&(h=(h-a*WC)%a-~~(h/a)*a)),t._pt=d=new Wn(t._pt,r,i,n,h,AG),d.e=c,d.u="deg",t._props.push(i),d},KC=function(t,r){for(var i in r)t[i]=r[i];return t},HG=function(t,r,i){var n=KC({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",a=i.style,o,l,h,c,u,d,p,f;n.svg?(h=i.getAttribute("transform"),i.setAttribute("transform",""),a[Sr]=r,o=Z0(i,1),Y0(i,Sr),i.setAttribute("transform",h)):(h=getComputedStyle(i)[Sr],a[Sr]=r,o=Z0(i,1),a[Sr]=h);for(l in Ll)h=n[l],c=o[l],h!==c&&s.indexOf(l)<0&&(p=qi(h),f=qi(c),u=p!==f?Hh(i,l,h,f):parseFloat(h),d=parseFloat(c),t._pt=new Wn(t._pt,o,l,u,d-u,W6),t._pt.u=f||0,t._props.push(l));KC(o,n)};Hn("padding,margin,Width,Radius",function(e,t){var r="Top",i="Right",n="Bottom",s="Left",a=(t<3?[r,i,n,s]:[r+s,r+i,n+i,n+s]).map(function(o){return t<2?e+o:"border"+o+e});Y2[t>1?"border"+e:e]=function(o,l,h,c,u){var d,p;if(arguments.length<4)return d=a.map(function(f){return rl(o,f,h)}),p=d.join(" "),p.split(d[0]).length===5?d[0]:p;d=(c+"").split(" "),p={},a.forEach(function(f,m){return p[f]=d[m]=d[m]||d[(m-1)/2|0]}),o.init(l,p,u)}});var pI={name:"css",register:X6,targetTest:function(t){return t.style&&t.nodeType},init:function(t,r,i,n,s){var a=this._props,o=t.style,l=i.vars.startAt,h,c,u,d,p,f,m,g,v,y,x,w,_,b,S,C;pw||X6(),this.styles=this.styles||aI(t),C=this.styles.props,this.tween=i;for(m in r)if(m!=="autoRound"&&(c=r[m],!(os[m]&&QO(m,r,i,n,t,s)))){if(p=typeof c,f=Y2[m],p==="function"&&(c=c.call(i,n,t,s),p=typeof c),p==="string"&&~c.indexOf("random(")&&(c=W0(c)),f)f(this,t,m,c,i)&&(S=1);else if(m.substr(0,2)==="--")h=(getComputedStyle(t).getPropertyValue(m)+"").trim(),c+="",Oh.lastIndex=0,Oh.test(h)||(g=qi(h),v=qi(c)),v?g!==v&&(h=Hh(t,m,h,v)+v):g&&(c+=g),this.add(o,"setProperty",h,c,n,s,0,0,m),a.push(m),C.push(m,0,o[m]);else if(p!=="undefined"){if(l&&m in l?(h=typeof l[m]=="function"?l[m].call(i,n,t,s):l[m],Ai(h)&&~h.indexOf("random(")&&(h=W0(h)),qi(h+"")||(h+=xs.units[m]||qi(rl(t,m))||""),(h+"").charAt(1)==="="&&(h=rl(t,m))):h=rl(t,m),d=parseFloat(h),y=p==="string"&&c.charAt(1)==="="&&c.substr(0,2),y&&(c=c.substr(2)),u=parseFloat(c),m in fo&&(m==="autoAlpha"&&(d===1&&rl(t,"visibility")==="hidden"&&u&&(d=0),C.push("visibility",0,o.visibility),dh(this,o,"visibility",d?"inherit":"hidden",u?"inherit":"hidden",!u)),m!=="scale"&&m!=="transform"&&(m=fo[m],~m.indexOf(",")&&(m=m.split(",")[0]))),x=m in Ll,x){if(this.styles.save(m),w||(_=t._gsap,_.renderTransform&&!r.parseTransform||Z0(t,r.parseTransform),b=r.smoothOrigin!==!1&&_.smooth,w=this._pt=new Wn(this._pt,o,Sr,0,1,_.renderTransform,_,0,-1),w.dep=1),m==="scale")this._pt=new Wn(this._pt,_,"scaleY",_.scaleY,(y?ip(_.scaleY,y+u):u)-_.scaleY||0,W6),this._pt.u=0,a.push("scaleY",m),m+="X";else if(m==="transformOrigin"){C.push(Ia,0,o[Ia]),c=FG(c),_.svg?Y6(t,c,0,b,0,this):(v=parseFloat(c.split(" ")[2])||0,v!==_.zOrigin&&dh(this,_,"zOrigin",_.zOrigin,v),dh(this,o,m,Q2(h),Q2(c)));continue}else if(m==="svgOrigin"){Y6(t,c,1,b,0,this);continue}else if(m in uI){GG(this,_,m,d,y?ip(d,y+c):c);continue}else if(m==="smoothOrigin"){dh(this,_,"smooth",_.smooth,c);continue}else if(m==="force3D"){_[m]=c;continue}else if(m==="transform"){HG(this,c,t);continue}}else m in o||(m=Up(m)||m);if(x||(u||u===0)&&(d||d===0)&&!MG.test(c)&&m in o)g=(h+"").substr((d+"").length),u||(u=0),v=qi(c)||(m in xs.units?xs.units[m]:g),g!==v&&(d=Hh(t,m,h,v)),this._pt=new Wn(this._pt,x?_:o,m,d,(y?ip(d,y+u):u)-d,!x&&(v==="px"||m==="zIndex")&&r.autoRound!==!1?TG:W6),this._pt.u=v||0,g!==v&&v!=="%"&&(this._pt.b=h,this._pt.r=EG);else if(m in o)NG.call(this,t,m,h,y?y+c:c);else if(m in t)this.add(t,m,h||t[m],y?y+c:c,n,s);else if(m!=="parseTransform"){nw(m,c);continue}x||(m in o?C.push(m,0,o[m]):C.push(m,1,h||t[m])),a.push(m)}}S&&tI(this)},render:function(t,r){if(r.tween._time||!fw())for(var i=r._pt;i;)i.r(t,i.d),i=i._next;else r.styles.revert()},get:rl,aliases:fo,getSetter:function(t,r,i){var n=fo[r];return n&&n.indexOf(",")<0&&(r=n),r in Ll&&r!==Ia&&(t._gsap.x||rl(t,"x"))?i&&HC===i?r==="scale"?OG:DG:(HC=i||{})&&(r==="scale"?IG:RG):t.style&&!tw(t.style[r])?LG:~r.indexOf("-")?PG:cw(t,r)},core:{_removeProperty:Y0,_getMatrix:gw}};Yn.utils.checkPrefix=Up;Yn.core.getStyleSaver=aI;(function(e,t,r,i){var n=Hn(e+","+t+","+r,function(s){Ll[s]=1});Hn(t,function(s){xs.units[s]="deg",uI[s]=1}),fo[n[13]]=e+","+t,Hn(i,function(s){var a=s.split(":");fo[a[1]]=n[a[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Hn("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){xs.units[e]="px"});Yn.registerPlugin(pI);var vw=Yn.registerPlugin(pI)||Yn;vw.core.Tween;function $C(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function WG(e,t,r){return t&&$C(e.prototype,t),r&&$C(e,r),e}/*!
 * Observer 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Bi,Q6,cs,ph,fh,ap,fI,vu,e0,mI,dl,ya,gI,vI=function(){return Bi||typeof window<"u"&&(Bi=window.gsap)&&Bi.registerPlugin&&Bi},yI=1,Nd=[],kt=[],bo=[],t0=Date.now,Z6=function(t,r){return r},qG=function(){var t=e0.core,r=t.bridge||{},i=t._scrollers,n=t._proxies;i.push.apply(i,kt),n.push.apply(n,bo),kt=i,bo=n,Z6=function(a,o){return r[a](o)}},Ih=function(t,r){return~bo.indexOf(t)&&bo[bo.indexOf(t)+1][r]},r0=function(t){return!!~mI.indexOf(t)},on=function(t,r,i,n,s){return t.addEventListener(r,i,{passive:!n,capture:!!s})},tn=function(t,r,i,n){return t.removeEventListener(r,i,!!n)},sg="scrollLeft",ag="scrollTop",K6=function(){return dl&&dl.isPressed||kt.cache++},Z2=function(t,r){var i=function n(s){if(s||s===0){yI&&(cs.history.scrollRestoration="manual");var a=dl&&dl.isPressed;s=n.v=Math.round(s)||(dl&&dl.iOS?1:0),t(s),n.cacheID=kt.cache,a&&Z6("ss",s)}else(r||kt.cache!==n.cacheID||Z6("ref"))&&(n.cacheID=kt.cache,n.v=t());return n.v+n.offset};return i.offset=0,t&&i},mn={s:sg,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Z2(function(e){return arguments.length?cs.scrollTo(e,oi.sc()):cs.pageXOffset||ph[sg]||fh[sg]||ap[sg]||0})},oi={s:ag,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:mn,sc:Z2(function(e){return arguments.length?cs.scrollTo(mn.sc(),e):cs.pageYOffset||ph[ag]||fh[ag]||ap[ag]||0})},Tn=function(t,r){return(r&&r._ctx&&r._ctx.selector||Bi.utils.toArray)(t)[0]||(typeof t=="string"&&Bi.config().nullTargetWarn!==!1?console.warn("Element not found:",t):null)},Wh=function(t,r){var i=r.s,n=r.sc;r0(t)&&(t=ph.scrollingElement||fh);var s=kt.indexOf(t),a=n===oi.sc?1:2;!~s&&(s=kt.push(t)-1),kt[s+a]||on(t,"scroll",K6);var o=kt[s+a],l=o||(kt[s+a]=Z2(Ih(t,i),!0)||(r0(t)?n:Z2(function(h){return arguments.length?t[i]=h:t[i]})));return l.target=t,o||(l.smooth=Bi.getProperty(t,"scrollBehavior")==="smooth"),l},$6=function(t,r,i){var n=t,s=t,a=t0(),o=a,l=r||50,h=Math.max(500,l*3),c=function(f,m){var g=t0();m||g-a>l?(s=n,n=f,o=a,a=g):i?n+=f:n=s+(f-s)/(g-o)*(a-o)},u=function(){s=n=i?0:n,o=a=0},d=function(f){var m=o,g=s,v=t0();return(f||f===0)&&f!==n&&c(f),a===o||v-o>h?0:(n+(i?g:-g))/((i?v:a)-m)*1e3};return{update:c,reset:u,getVelocity:d}},Uf=function(t,r){return r&&!t._gsapAllow&&t.preventDefault(),t.changedTouches?t.changedTouches[0]:t},JC=function(t){var r=Math.max.apply(Math,t),i=Math.min.apply(Math,t);return Math.abs(r)>=Math.abs(i)?r:i},xI=function(){e0=Bi.core.globals().ScrollTrigger,e0&&e0.core&&qG()},wI=function(t){return Bi=t||vI(),Bi&&typeof document<"u"&&document.body&&(cs=window,ph=document,fh=ph.documentElement,ap=ph.body,mI=[cs,ph,fh,ap],Bi.utils.clamp,gI=Bi.core.context||function(){},vu="onpointerenter"in ap?"pointer":"mouse",fI=ei.isTouch=cs.matchMedia&&cs.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in cs||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,ya=ei.eventTypes=("ontouchstart"in fh?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in fh?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return yI=0},500),xI(),Q6=1),Q6};mn.op=oi;kt.cache=0;var ei=function(){function e(r){this.init(r)}var t=e.prototype;return t.init=function(i){Q6||wI(Bi)||console.warn("Please gsap.registerPlugin(Observer)"),e0||xI();var n=i.tolerance,s=i.dragMinimum,a=i.type,o=i.target,l=i.lineHeight,h=i.debounce,c=i.preventDefault,u=i.onStop,d=i.onStopDelay,p=i.ignore,f=i.wheelSpeed,m=i.event,g=i.onDragStart,v=i.onDragEnd,y=i.onDrag,x=i.onPress,w=i.onRelease,_=i.onRight,b=i.onLeft,S=i.onUp,C=i.onDown,M=i.onChangeX,A=i.onChangeY,T=i.onChange,L=i.onToggleX,D=i.onToggleY,O=i.onHover,z=i.onHoverEnd,q=i.onMove,N=i.ignoreCheck,I=i.isNormalizer,W=i.onGestureStart,P=i.onGestureEnd,V=i.onWheel,G=i.onEnable,Q=i.onDisable,U=i.onClick,Y=i.scrollSpeed,H=i.capture,ie=i.allowClicks,J=i.lockAxis,ee=i.onLockAxis;this.target=o=Tn(o)||fh,this.vars=i,p&&(p=Bi.utils.toArray(p)),n=n||1e-9,s=s||0,f=f||1,Y=Y||1,a=a||"wheel,touch,pointer",h=h!==!1,l||(l=parseFloat(cs.getComputedStyle(ap).lineHeight)||22);var ne,he,ge,ce,Le,_e,ze,K=this,Ce=0,Me=0,Ge=Wh(o,mn),ke=Wh(o,oi),F=Ge(),B=ke(),le=~a.indexOf("touch")&&!~a.indexOf("pointer")&&ya[0]==="pointerdown",xe=r0(o),ye=o.ownerDocument||ph,Ee=[0,0,0],Ue=[0,0,0],Ne=0,fe=function(){return Ne=t0()},je=function(Re,mt){return(K.event=Re)&&p&&~p.indexOf(Re.target)||mt&&le&&Re.pointerType!=="touch"||N&&N(Re,mt)},Fe=function(){K._vx.reset(),K._vy.reset(),he.pause(),u&&u(K)},Qe=function(){var Re=K.deltaX=JC(Ee),mt=K.deltaY=JC(Ue),Pt=Math.abs(Re)>=n,We=Math.abs(mt)>=n;T&&(Pt||We)&&T(K,Re,mt,Ee,Ue),Pt&&(_&&K.deltaX>0&&_(K),b&&K.deltaX<0&&b(K),M&&M(K),L&&K.deltaX<0!=Ce<0&&L(K),Ce=K.deltaX,Ee[0]=Ee[1]=Ee[2]=0),We&&(C&&K.deltaY>0&&C(K),S&&K.deltaY<0&&S(K),A&&A(K),D&&K.deltaY<0!=Me<0&&D(K),Me=K.deltaY,Ue[0]=Ue[1]=Ue[2]=0),(ce||ge)&&(q&&q(K),ge&&(y(K),ge=!1),ce=!1),_e&&!(_e=!1)&&ee&&ee(K),Le&&(V(K),Le=!1),ne=0},$=function(Re,mt,Pt){Ee[Pt]+=Re,Ue[Pt]+=mt,K._vx.update(Re),K._vy.update(mt),h?ne||(ne=requestAnimationFrame(Qe)):Qe()},te=function(Re,mt){J&&!ze&&(K.axis=ze=Math.abs(Re)>Math.abs(mt)?"x":"y",_e=!0),ze!=="y"&&(Ee[2]+=Re,K._vx.update(Re,!0)),ze!=="x"&&(Ue[2]+=mt,K._vy.update(mt,!0)),h?ne||(ne=requestAnimationFrame(Qe)):Qe()},ve=function(Re){if(!je(Re,1)){Re=Uf(Re,c);var mt=Re.clientX,Pt=Re.clientY,We=mt-K.x,yt=Pt-K.y,rt=K.isDragging;K.x=mt,K.y=Pt,(rt||Math.abs(K.startX-mt)>=s||Math.abs(K.startY-Pt)>=s)&&(y&&(ge=!0),rt||(K.isDragging=!0),te(We,yt),rt||g&&g(K))}},Te=K.onPress=function(Ze){je(Ze,1)||Ze&&Ze.button||(K.axis=ze=null,he.pause(),K.isPressed=!0,Ze=Uf(Ze),Ce=Me=0,K.startX=K.x=Ze.clientX,K.startY=K.y=Ze.clientY,K._vx.reset(),K._vy.reset(),on(I?o:ye,ya[1],ve,c,!0),K.deltaX=K.deltaY=0,x&&x(K))},He=K.onRelease=function(Ze){if(!je(Ze,1)){tn(I?o:ye,ya[1],ve,!0);var Re=!isNaN(K.y-K.startY),mt=K.isDragging&&(Math.abs(K.x-K.startX)>3||Math.abs(K.y-K.startY)>3),Pt=Uf(Ze);!mt&&Re&&(K._vx.reset(),K._vy.reset(),c&&ie&&Bi.delayedCall(.08,function(){if(t0()-Ne>300&&!Ze.defaultPrevented){if(Ze.target.click)Ze.target.click();else if(ye.createEvent){var We=ye.createEvent("MouseEvents");We.initMouseEvent("click",!0,!0,cs,1,Pt.screenX,Pt.screenY,Pt.clientX,Pt.clientY,!1,!1,!1,!1,0,null),Ze.target.dispatchEvent(We)}}})),K.isDragging=K.isGesturing=K.isPressed=!1,u&&!I&&he.restart(!0),v&&mt&&v(K),w&&w(K,mt)}},j=function(Re){return Re.touches&&Re.touches.length>1&&(K.isGesturing=!0)&&W(Re,K.isDragging)},se=function(){return(K.isGesturing=!1)||P(K)},ae=function(Re){if(!je(Re)){var mt=Ge(),Pt=ke();$((mt-F)*Y,(Pt-B)*Y,1),F=mt,B=Pt,u&&he.restart(!0)}},me=function(Re){if(!je(Re)){Re=Uf(Re,c),V&&(Le=!0);var mt=(Re.deltaMode===1?l:Re.deltaMode===2?cs.innerHeight:1)*f;$(Re.deltaX*mt,Re.deltaY*mt,0),u&&!I&&he.restart(!0)}},Oe=function(Re){if(!je(Re)){var mt=Re.clientX,Pt=Re.clientY,We=mt-K.x,yt=Pt-K.y;K.x=mt,K.y=Pt,ce=!0,(We||yt)&&te(We,yt)}},tt=function(Re){K.event=Re,O(K)},nt=function(Re){K.event=Re,z(K)},gt=function(Re){return je(Re)||Uf(Re,c)&&U(K)};he=K._dc=Bi.delayedCall(d||.25,Fe).pause(),K.deltaX=K.deltaY=0,K._vx=$6(0,50,!0),K._vy=$6(0,50,!0),K.scrollX=Ge,K.scrollY=ke,K.isDragging=K.isGesturing=K.isPressed=!1,gI(this),K.enable=function(Ze){return K.isEnabled||(on(xe?ye:o,"scroll",K6),a.indexOf("scroll")>=0&&on(xe?ye:o,"scroll",ae,c,H),a.indexOf("wheel")>=0&&on(o,"wheel",me,c,H),(a.indexOf("touch")>=0&&fI||a.indexOf("pointer")>=0)&&(on(o,ya[0],Te,c,H),on(ye,ya[2],He),on(ye,ya[3],He),ie&&on(o,"click",fe,!1,!0),U&&on(o,"click",gt),W&&on(ye,"gesturestart",j),P&&on(ye,"gestureend",se),O&&on(o,vu+"enter",tt),z&&on(o,vu+"leave",nt),q&&on(o,vu+"move",Oe)),K.isEnabled=!0,Ze&&Ze.type&&Te(Ze),G&&G(K)),K},K.disable=function(){K.isEnabled&&(Nd.filter(function(Ze){return Ze!==K&&r0(Ze.target)}).length||tn(xe?ye:o,"scroll",K6),K.isPressed&&(K._vx.reset(),K._vy.reset(),tn(I?o:ye,ya[1],ve,!0)),tn(xe?ye:o,"scroll",ae,H),tn(o,"wheel",me,H),tn(o,ya[0],Te,H),tn(ye,ya[2],He),tn(ye,ya[3],He),tn(o,"click",fe,!0),tn(o,"click",gt),tn(ye,"gesturestart",j),tn(ye,"gestureend",se),tn(o,vu+"enter",tt),tn(o,vu+"leave",nt),tn(o,vu+"move",Oe),K.isEnabled=K.isPressed=K.isDragging=!1,Q&&Q(K))},K.kill=K.revert=function(){K.disable();var Ze=Nd.indexOf(K);Ze>=0&&Nd.splice(Ze,1),dl===K&&(dl=0)},Nd.push(K),I&&r0(o)&&(dl=K),K.enable(m)},WG(e,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),e}();ei.version="3.12.2";ei.create=function(e){return new ei(e)};ei.register=wI;ei.getAll=function(){return Nd.slice()};ei.getById=function(e){return Nd.filter(function(t){return t.vars.id===e})[0]};vI()&&Bi.registerPlugin(ei);/*!
 * ScrollTrigger 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var et,fd,Vt,br,Ca,vr,bI,K2,$2,Fd,Zv,og,Gi,by,J6,un,eS,tS,md,_I,I4,CI,is,SI,MI,AI,Jl,e7,yw,op,xw,R4,lg=1,dn=Date.now,B4=dn(),ea=0,E1=0,rS=function(t,r,i){var n=as(t)&&(t.substr(0,6)==="clamp("||t.indexOf("max")>-1);return i["_"+r+"Clamp"]=n,n?t.substr(6,t.length-7):t},iS=function(t,r){return r&&(!as(t)||t.substr(0,6)!=="clamp(")?"clamp("+t+")":t},XG=function e(){return E1&&requestAnimationFrame(e)},nS=function(){return by=1},sS=function(){return by=0},ro=function(t){return t},T1=function(t){return Math.round(t*1e5)/1e5||0},EI=function(){return typeof window<"u"},TI=function(){return et||EI()&&(et=window.gsap)&&et.registerPlugin&&et},cc=function(t){return!!~bI.indexOf(t)},LI=function(t){return(t==="Height"?xw:Vt["inner"+t])||Ca["client"+t]||vr["client"+t]},PI=function(t){return Ih(t,"getBoundingClientRect")||(cc(t)?function(){return r2.width=Vt.innerWidth,r2.height=xw,r2}:function(){return ol(t)})},YG=function(t,r,i){var n=i.d,s=i.d2,a=i.a;return(a=Ih(t,"getBoundingClientRect"))?function(){return a()[n]}:function(){return(r?LI(s):t["client"+s])||0}},QG=function(t,r){return!r||~bo.indexOf(t)?PI(t):function(){return r2}},pl=function(t,r){var i=r.s,n=r.d2,s=r.d,a=r.a;return Math.max(0,(i="scroll"+n)&&(a=Ih(t,i))?a()-PI(t)()[s]:cc(t)?(Ca[i]||vr[i])-LI(n):t[i]-t["offset"+n])},hg=function(t,r){for(var i=0;i<md.length;i+=3)(!r||~r.indexOf(md[i+1]))&&t(md[i],md[i+1],md[i+2])},as=function(t){return typeof t=="string"},gn=function(t){return typeof t=="function"},Kv=function(t){return typeof t=="number"},yu=function(t){return typeof t=="object"},jf=function(t,r,i){return t&&t.progress(r?0:1)&&i&&t.pause()},z4=function(t,r){if(t.enabled){var i=r(t);i&&i.totalTime&&(t.callbackAnimation=i)}},Ic=Math.abs,DI="left",OI="top",ww="right",bw="bottom",qu="width",Xu="height",i0="Right",n0="Left",s0="Top",a0="Bottom",Zr="padding",js="margin",jp="Width",_w="Height",Di="px",Vs=function(t){return Vt.getComputedStyle(t)},ZG=function(t){var r=Vs(t).position;t.style.position=r==="absolute"||r==="fixed"?r:"relative"},aS=function(t,r){for(var i in r)i in t||(t[i]=r[i]);return t},ol=function(t,r){var i=r&&Vs(t)[J6]!=="matrix(1, 0, 0, 1, 0, 0)"&&et.to(t,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),n=t.getBoundingClientRect();return i&&i.progress(0).kill(),n},t7=function(t,r){var i=r.d2;return t["offset"+i]||t["client"+i]||0},II=function(t){var r=[],i=t.labels,n=t.duration(),s;for(s in i)r.push(i[s]/n);return r},KG=function(t){return function(r){return et.utils.snap(II(t),r)}},Cw=function(t){var r=et.utils.snap(t),i=Array.isArray(t)&&t.slice(0).sort(function(n,s){return n-s});return i?function(n,s,a){a===void 0&&(a=.001);var o;if(!s)return r(n);if(s>0){for(n-=a,o=0;o<i.length;o++)if(i[o]>=n)return i[o];return i[o-1]}else for(o=i.length,n+=a;o--;)if(i[o]<=n)return i[o];return i[0]}:function(n,s,a){a===void 0&&(a=.001);var o=r(n);return!s||Math.abs(o-n)<a||o-n<0==s<0?o:r(s<0?n-t:n+t)}},$G=function(t){return function(r,i){return Cw(II(t))(r,i.direction)}},ug=function(t,r,i,n){return i.split(",").forEach(function(s){return t(r,s,n)})},xi=function(t,r,i,n,s){return t.addEventListener(r,i,{passive:!n,capture:!!s})},vi=function(t,r,i,n){return t.removeEventListener(r,i,!!n)},cg=function(t,r,i){i=i&&i.wheelHandler,i&&(t(r,"wheel",i),t(r,"touchmove",i))},oS={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},dg={toggleActions:"play",anticipatePin:0},J2={top:0,left:0,center:.5,bottom:1,right:1},$v=function(t,r){if(as(t)){var i=t.indexOf("="),n=~i?+(t.charAt(i-1)+1)*parseFloat(t.substr(i+1)):0;~i&&(t.indexOf("%")>i&&(n*=r/100),t=t.substr(0,i-1)),t=n+(t in J2?J2[t]*r:~t.indexOf("%")?parseFloat(t)*r/100:parseFloat(t)||0)}return t},pg=function(t,r,i,n,s,a,o,l){var h=s.startColor,c=s.endColor,u=s.fontSize,d=s.indent,p=s.fontWeight,f=br.createElement("div"),m=cc(i)||Ih(i,"pinType")==="fixed",g=t.indexOf("scroller")!==-1,v=m?vr:i,y=t.indexOf("start")!==-1,x=y?h:c,w="border-color:"+x+";font-size:"+u+";color:"+x+";font-weight:"+p+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return w+="position:"+((g||l)&&m?"fixed;":"absolute;"),(g||l||!m)&&(w+=(n===oi?ww:bw)+":"+(a+parseFloat(d))+"px;"),o&&(w+="box-sizing:border-box;text-align:left;width:"+o.offsetWidth+"px;"),f._isStart=y,f.setAttribute("class","gsap-marker-"+t+(r?" marker-"+r:"")),f.style.cssText=w,f.innerText=r||r===0?t+"-"+r:t,v.children[0]?v.insertBefore(f,v.children[0]):v.appendChild(f),f._offset=f["offset"+n.op.d2],Jv(f,0,n,y),f},Jv=function(t,r,i,n){var s={display:"block"},a=i[n?"os2":"p2"],o=i[n?"p2":"os2"];t._isFlipped=n,s[i.a+"Percent"]=n?-100:0,s[i.a]=n?"1px":0,s["border"+a+jp]=1,s["border"+o+jp]=0,s[i.p]=r+"px",et.set(t,s)},Bt=[],r7={},K0,lS=function(){return dn()-ea>34&&(K0||(K0=requestAnimationFrame(xl)))},Rc=function(){(!is||!is.isPressed||is.startX>vr.clientWidth)&&(kt.cache++,is?K0||(K0=requestAnimationFrame(xl)):xl(),ea||pc("scrollStart"),ea=dn())},k4=function(){AI=Vt.innerWidth,MI=Vt.innerHeight},L1=function(){kt.cache++,!Gi&&!CI&&!br.fullscreenElement&&!br.webkitFullscreenElement&&(!SI||AI!==Vt.innerWidth||Math.abs(Vt.innerHeight-MI)>Vt.innerHeight*.25)&&K2.restart(!0)},dc={},JG=[],RI=function e(){return vi(Nt,"scrollEnd",e)||Ru(!0)},pc=function(t){return dc[t]&&dc[t].map(function(r){return r()})||JG},ns=[],BI=function(t){for(var r=0;r<ns.length;r+=5)(!t||ns[r+4]&&ns[r+4].query===t)&&(ns[r].style.cssText=ns[r+1],ns[r].getBBox&&ns[r].setAttribute("transform",ns[r+2]||""),ns[r+3].uncache=1)},Sw=function(t,r){var i;for(un=0;un<Bt.length;un++)i=Bt[un],i&&(!r||i._ctx===r)&&(t?i.kill(1):i.revert(!0,!0));r&&BI(r),r||pc("revert")},zI=function(t,r){kt.cache++,(r||!cn)&&kt.forEach(function(i){return gn(i)&&i.cacheID++&&(i.rec=0)}),as(t)&&(Vt.history.scrollRestoration=yw=t)},cn,Yu=0,hS,eH=function(){if(hS!==Yu){var t=hS=Yu;requestAnimationFrame(function(){return t===Yu&&Ru(!0)})}},kI=function(){vr.appendChild(op),xw=op.offsetHeight||Vt.innerHeight,vr.removeChild(op)},Ru=function(t,r){if(ea&&!t){xi(Nt,"scrollEnd",RI);return}kI(),cn=Nt.isRefreshing=!0,kt.forEach(function(n){return gn(n)&&++n.cacheID&&(n.rec=n())});var i=pc("refreshInit");_I&&Nt.sort(),r||Sw(),kt.forEach(function(n){gn(n)&&(n.smooth&&(n.target.style.scrollBehavior="auto"),n(0))}),Bt.slice(0).forEach(function(n){return n.refresh()}),Bt.forEach(function(n,s){if(n._subPinOffset&&n.pin){var a=n.vars.horizontal?"offsetWidth":"offsetHeight",o=n.pin[a];n.revert(!0,1),n.adjustPinSpacing(n.pin[a]-o),n.refresh()}}),Bt.forEach(function(n){var s=pl(n.scroller,n._dir);(n.vars.end==="max"||n._endClamp&&n.end>s)&&n.setPositions(n.start,Math.max(n.start+1,s),!0)}),i.forEach(function(n){return n&&n.render&&n.render(-1)}),kt.forEach(function(n){gn(n)&&(n.smooth&&requestAnimationFrame(function(){return n.target.style.scrollBehavior="smooth"}),n.rec&&n(n.rec))}),zI(yw,1),K2.pause(),Yu++,cn=2,xl(2),Bt.forEach(function(n){return gn(n.vars.onRefresh)&&n.vars.onRefresh(n)}),cn=Nt.isRefreshing=!1,pc("refresh")},i7=0,e2=1,o0,xl=function(t){if(!cn||t===2){Nt.isUpdating=!0,o0&&o0.update(0);var r=Bt.length,i=dn(),n=i-B4>=50,s=r&&Bt[0].scroll();if(e2=i7>s?-1:1,cn||(i7=s),n&&(ea&&!by&&i-ea>200&&(ea=0,pc("scrollEnd")),Zv=B4,B4=i),e2<0){for(un=r;un-- >0;)Bt[un]&&Bt[un].update(0,n);e2=1}else for(un=0;un<r;un++)Bt[un]&&Bt[un].update(0,n);Nt.isUpdating=!1}K0=0},n7=[DI,OI,bw,ww,js+a0,js+i0,js+s0,js+n0,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],t2=n7.concat([qu,Xu,"boxSizing","max"+jp,"max"+_w,"position",js,Zr,Zr+s0,Zr+i0,Zr+a0,Zr+n0]),tH=function(t,r,i){lp(i);var n=t._gsap;if(n.spacerIsNative)lp(n.spacerState);else if(t._gsap.swappedIn){var s=r.parentNode;s&&(s.insertBefore(t,r),s.removeChild(r))}t._gsap.swappedIn=!1},N4=function(t,r,i,n){if(!t._gsap.swappedIn){for(var s=n7.length,a=r.style,o=t.style,l;s--;)l=n7[s],a[l]=i[l];a.position=i.position==="absolute"?"absolute":"relative",i.display==="inline"&&(a.display="inline-block"),o[bw]=o[ww]="auto",a.flexBasis=i.flexBasis||"auto",a.overflow="visible",a.boxSizing="border-box",a[qu]=t7(t,mn)+Di,a[Xu]=t7(t,oi)+Di,a[Zr]=o[js]=o[OI]=o[DI]="0",lp(n),o[qu]=o["max"+jp]=i[qu],o[Xu]=o["max"+_w]=i[Xu],o[Zr]=i[Zr],t.parentNode!==r&&(t.parentNode.insertBefore(r,t),r.appendChild(t)),t._gsap.swappedIn=!0}},rH=/([A-Z])/g,lp=function(t){if(t){var r=t.t.style,i=t.length,n=0,s,a;for((t.t._gsap||et.core.getCache(t.t)).uncache=1;n<i;n+=2)a=t[n+1],s=t[n],a?r[s]=a:r[s]&&r.removeProperty(s.replace(rH,"-$1").toLowerCase())}},fg=function(t){for(var r=t2.length,i=t.style,n=[],s=0;s<r;s++)n.push(t2[s],i[t2[s]]);return n.t=t,n},iH=function(t,r,i){for(var n=[],s=t.length,a=i?8:0,o;a<s;a+=2)o=t[a],n.push(o,o in r?r[o]:t[a+1]);return n.t=t.t,n},r2={left:0,top:0},uS=function(t,r,i,n,s,a,o,l,h,c,u,d,p,f){gn(t)&&(t=t(l)),as(t)&&t.substr(0,3)==="max"&&(t=d+(t.charAt(4)==="="?$v("0"+t.substr(3),i):0));var m=p?p.time():0,g,v,y;if(p&&p.seek(0),isNaN(t)||(t=+t),Kv(t))p&&(t=et.utils.mapRange(p.scrollTrigger.start,p.scrollTrigger.end,0,d,t)),o&&Jv(o,i,n,!0);else{gn(r)&&(r=r(l));var x=(t||"0").split(" "),w,_,b,S;y=Tn(r,l)||vr,w=ol(y)||{},(!w||!w.left&&!w.top)&&Vs(y).display==="none"&&(S=y.style.display,y.style.display="block",w=ol(y),S?y.style.display=S:y.style.removeProperty("display")),_=$v(x[0],w[n.d]),b=$v(x[1]||"0",i),t=w[n.p]-h[n.p]-c+_+s-b,o&&Jv(o,b,n,i-b<20||o._isStart&&b>20),i-=i-b}if(f&&(l[f]=t||-.001,t<0&&(t=0)),a){var C=t+i,M=a._isStart;g="scroll"+n.d2,Jv(a,C,n,M&&C>20||!M&&(u?Math.max(vr[g],Ca[g]):a.parentNode[g])<=C+1),u&&(h=ol(o),u&&(a.style[n.op.p]=h[n.op.p]-n.op.m-a._offset+Di))}return p&&y&&(g=ol(y),p.seek(d),v=ol(y),p._caScrollDist=g[n.p]-v[n.p],t=t/p._caScrollDist*d),p&&p.seek(m),p?t:Math.round(t)},nH=/(webkit|moz|length|cssText|inset)/i,cS=function(t,r,i,n){if(t.parentNode!==r){var s=t.style,a,o;if(r===vr){t._stOrig=s.cssText,o=Vs(t);for(a in o)!+a&&!nH.test(a)&&o[a]&&typeof s[a]=="string"&&a!=="0"&&(s[a]=o[a]);s.top=i,s.left=n}else s.cssText=t._stOrig;et.core.getCache(t).uncache=1,r.appendChild(t)}},NI=function(t,r,i){var n=r,s=n;return function(a){var o=Math.round(t());return o!==n&&o!==s&&Math.abs(o-n)>3&&Math.abs(o-s)>3&&(a=o,i&&i()),s=n,n=a,a}},mg=function(t,r,i){var n={};n[r.p]="+="+i,et.set(t,n)},dS=function(t,r){var i=Wh(t,r),n="_scroll"+r.p2,s=function a(o,l,h,c,u){var d=a.tween,p=l.onComplete,f={};h=h||i();var m=NI(i,h,function(){d.kill(),a.tween=0});return u=c&&u||0,c=c||o-h,d&&d.kill(),l[n]=o,l.modifiers=f,f[n]=function(){return m(h+c*d.ratio+u*d.ratio*d.ratio)},l.onUpdate=function(){kt.cache++,xl()},l.onComplete=function(){a.tween=0,p&&p.call(d)},d=a.tween=et.to(t,l),d};return t[n]=i,i.wheelHandler=function(){return s.tween&&s.tween.kill()&&(s.tween=0)},xi(t,"wheel",i.wheelHandler),Nt.isTouch&&xi(t,"touchmove",i.wheelHandler),s},Nt=function(){function e(r,i){fd||e.register(et)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),e7(this),this.init(r,i)}var t=e.prototype;return t.init=function(i,n){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!E1){this.update=this.refresh=this.kill=ro;return}i=aS(as(i)||Kv(i)||i.nodeType?{trigger:i}:i,dg);var s=i,a=s.onUpdate,o=s.toggleClass,l=s.id,h=s.onToggle,c=s.onRefresh,u=s.scrub,d=s.trigger,p=s.pin,f=s.pinSpacing,m=s.invalidateOnRefresh,g=s.anticipatePin,v=s.onScrubComplete,y=s.onSnapComplete,x=s.once,w=s.snap,_=s.pinReparent,b=s.pinSpacer,S=s.containerAnimation,C=s.fastScrollEnd,M=s.preventOverlaps,A=i.horizontal||i.containerAnimation&&i.horizontal!==!1?mn:oi,T=!u&&u!==0,L=Tn(i.scroller||Vt),D=et.core.getCache(L),O=cc(L),z=("pinType"in i?i.pinType:Ih(L,"pinType")||O&&"fixed")==="fixed",q=[i.onEnter,i.onLeave,i.onEnterBack,i.onLeaveBack],N=T&&i.toggleActions.split(" "),I="markers"in i?i.markers:dg.markers,W=O?0:parseFloat(Vs(L)["border"+A.p2+jp])||0,P=this,V=i.onRefreshInit&&function(){return i.onRefreshInit(P)},G=YG(L,O,A),Q=QG(L,O),U=0,Y=0,H=0,ie=Wh(L,A),J,ee,ne,he,ge,ce,Le,_e,ze,K,Ce,Me,Ge,ke,F,B,le,xe,ye,Ee,Ue,Ne,fe,je,Fe,Qe,$,te,ve,Te,He,j,se,ae,me,Oe,tt,nt,gt;if(P._startClamp=P._endClamp=!1,P._dir=A,g*=45,P.scroller=L,P.scroll=S?S.time.bind(S):ie,he=ie(),P.vars=i,n=n||i.animation,"refreshPriority"in i&&(_I=1,i.refreshPriority===-9999&&(o0=P)),D.tweenScroll=D.tweenScroll||{top:dS(L,oi),left:dS(L,mn)},P.tweenTo=J=D.tweenScroll[A.p],P.scrubDuration=function(We){se=Kv(We)&&We,se?j?j.duration(We):j=et.to(n,{ease:"expo",totalProgress:"+=0",duration:se,paused:!0,onComplete:function(){return v&&v(P)}}):(j&&j.progress(1).kill(),j=0)},n&&(n.vars.lazy=!1,n._initted&&!P.isReverted||n.vars.immediateRender!==!1&&i.immediateRender!==!1&&n.duration()&&n.render(0,!0,!0),P.animation=n.pause(),n.scrollTrigger=P,P.scrubDuration(u),Te=0,l||(l=n.vars.id)),w&&((!yu(w)||w.push)&&(w={snapTo:w}),"scrollBehavior"in vr.style&&et.set(O?[vr,Ca]:L,{scrollBehavior:"auto"}),kt.forEach(function(We){return gn(We)&&We.target===(O?br.scrollingElement||Ca:L)&&(We.smooth=!1)}),ne=gn(w.snapTo)?w.snapTo:w.snapTo==="labels"?KG(n):w.snapTo==="labelsDirectional"?$G(n):w.directional!==!1?function(We,yt){return Cw(w.snapTo)(We,dn()-Y<500?0:yt.direction)}:et.utils.snap(w.snapTo),ae=w.duration||{min:.1,max:2},ae=yu(ae)?Fd(ae.min,ae.max):Fd(ae,ae),me=et.delayedCall(w.delay||se/2||.1,function(){var We=ie(),yt=dn()-Y<500,rt=J.tween;if((yt||Math.abs(P.getVelocity())<10)&&!rt&&!by&&U!==We){var St=(We-ce)/ke,k=n&&!T?n.totalProgress():St,re=yt?0:(k-He)/(dn()-Zv)*1e3||0,de=et.utils.clamp(-St,1-St,Ic(re/2)*re/.185),Z=St+(w.inertia===!1?0:de),ue=Fd(0,1,ne(Z,P)),De=Math.round(ce+ue*ke),Ve=w,Ye=Ve.onStart,$e=Ve.onInterrupt,Mt=Ve.onComplete;if(We<=Le&&We>=ce&&De!==We){if(rt&&!rt._initted&&rt.data<=Ic(De-We))return;w.inertia===!1&&(de=ue-St),J(De,{duration:ae(Ic(Math.max(Ic(Z-k),Ic(ue-k))*.185/re/.05||0)),ease:w.ease||"power3",data:Ic(De-We),onInterrupt:function(){return me.restart(!0)&&$e&&$e(P)},onComplete:function(){P.update(),U=ie(),Te=He=n&&!T?n.totalProgress():P.progress,y&&y(P),Mt&&Mt(P)}},We,de*ke,De-We-de*ke),Ye&&Ye(P,J.tween)}}else P.isActive&&U!==We&&me.restart(!0)}).pause()),l&&(r7[l]=P),d=P.trigger=Tn(d||p!==!0&&p),gt=d&&d._gsap&&d._gsap.stRevert,gt&&(gt=gt(P)),p=p===!0?d:Tn(p),as(o)&&(o={targets:d,className:o}),p&&(f===!1||f===js||(f=!f&&p.parentNode&&p.parentNode.style&&Vs(p.parentNode).display==="flex"?!1:Zr),P.pin=p,ee=et.core.getCache(p),ee.spacer?F=ee.pinState:(b&&(b=Tn(b),b&&!b.nodeType&&(b=b.current||b.nativeElement),ee.spacerIsNative=!!b,b&&(ee.spacerState=fg(b))),ee.spacer=xe=b||br.createElement("div"),xe.classList.add("pin-spacer"),l&&xe.classList.add("pin-spacer-"+l),ee.pinState=F=fg(p)),i.force3D!==!1&&et.set(p,{force3D:!0}),P.spacer=xe=ee.spacer,ve=Vs(p),je=ve[f+A.os2],Ee=et.getProperty(p),Ue=et.quickSetter(p,A.a,Di),N4(p,xe,ve),le=fg(p)),I){Me=yu(I)?aS(I,oS):oS,K=pg("scroller-start",l,L,A,Me,0),Ce=pg("scroller-end",l,L,A,Me,0,K),ye=K["offset"+A.op.d2];var Ze=Tn(Ih(L,"content")||L);_e=this.markerStart=pg("start",l,Ze,A,Me,ye,0,S),ze=this.markerEnd=pg("end",l,Ze,A,Me,ye,0,S),S&&(nt=et.quickSetter([_e,ze],A.a,Di)),!z&&!(bo.length&&Ih(L,"fixedMarkers")===!0)&&(ZG(O?vr:L),et.set([K,Ce],{force3D:!0}),Qe=et.quickSetter(K,A.a,Di),te=et.quickSetter(Ce,A.a,Di))}if(S){var Re=S.vars.onUpdate,mt=S.vars.onUpdateParams;S.eventCallback("onUpdate",function(){P.update(0,0,1),Re&&Re.apply(S,mt||[])})}if(P.previous=function(){return Bt[Bt.indexOf(P)-1]},P.next=function(){return Bt[Bt.indexOf(P)+1]},P.revert=function(We,yt){if(!yt)return P.kill(!0);var rt=We!==!1||!P.enabled,St=Gi;rt!==P.isReverted&&(rt&&(Oe=Math.max(ie(),P.scroll.rec||0),H=P.progress,tt=n&&n.progress()),_e&&[_e,ze,K,Ce].forEach(function(k){return k.style.display=rt?"none":"block"}),rt&&(Gi=P,P.update(rt)),p&&(!_||!P.isActive)&&(rt?tH(p,xe,F):N4(p,xe,Vs(p),Fe)),rt||P.update(rt),Gi=St,P.isReverted=rt)},P.refresh=function(We,yt,rt,St){if(!((Gi||!P.enabled)&&!yt)){if(p&&We&&ea){xi(e,"scrollEnd",RI);return}!cn&&V&&V(P),Gi=P,J.tween&&!rt&&(J.tween.kill(),J.tween=0),j&&j.pause(),m&&n&&n.revert({kill:!1}).invalidate(),P.isReverted||P.revert(!0,!0),P._subPinOffset=!1;var k=G(),re=Q(),de=S?S.duration():pl(L,A),Z=ke<=.01,ue=0,De=St||0,Ve=yu(rt)?rt.end:i.end,Ye=i.endTrigger||d,$e=yu(rt)?rt.start:i.start||(i.start===0||!d?0:p?"0 0":"0 100%"),Mt=P.pinnedContainer=i.pinnedContainer&&Tn(i.pinnedContainer,P),wt=d&&Math.max(0,Bt.indexOf(P))||0,vt=wt,Wt,Zt,Ti,As,zt,st,En,iu,Ua,kl,Fi,Ro,Tr;for(I&&yu(rt)&&(Ro=et.getProperty(K,A.p),Tr=et.getProperty(Ce,A.p));vt--;)st=Bt[vt],st.end||st.refresh(0,1)||(Gi=P),En=st.pin,En&&(En===d||En===p||En===Mt)&&!st.isReverted&&(kl||(kl=[]),kl.unshift(st),st.revert(!0,!0)),st!==Bt[vt]&&(wt--,vt--);for(gn($e)&&($e=$e(P)),$e=rS($e,"start",P),ce=uS($e,d,k,A,ie(),_e,K,P,re,W,z,de,S,P._startClamp&&"_startClamp")||(p?-.001:0),gn(Ve)&&(Ve=Ve(P)),as(Ve)&&!Ve.indexOf("+=")&&(~Ve.indexOf(" ")?Ve=(as($e)?$e.split(" ")[0]:"")+Ve:(ue=$v(Ve.substr(2),k),Ve=as($e)?$e:(S?et.utils.mapRange(0,S.duration(),S.scrollTrigger.start,S.scrollTrigger.end,ce):ce)+ue,Ye=d)),Ve=rS(Ve,"end",P),Le=Math.max(ce,uS(Ve||(Ye?"100% 0":de),Ye,k,A,ie()+ue,ze,Ce,P,re,W,z,de,S,P._endClamp&&"_endClamp"))||-.001,ue=0,vt=wt;vt--;)st=Bt[vt],En=st.pin,En&&st.start-st._pinPush<=ce&&!S&&st.end>0&&(Wt=st.end-(P._startClamp?Math.max(0,st.start):st.start),(En===d&&st.start-st._pinPush<ce||En===Mt)&&isNaN($e)&&(ue+=Wt*(1-st.progress)),En===p&&(De+=Wt));if(ce+=ue,Le+=ue,P._startClamp&&(P._startClamp+=ue),P._endClamp&&!cn&&(P._endClamp=Le||-.001,Le=Math.min(Le,pl(L,A))),ke=Le-ce||(ce-=.01)&&.001,Z&&(H=et.utils.clamp(0,1,et.utils.normalize(ce,Le,Oe))),P._pinPush=De,_e&&ue&&(Wt={},Wt[A.a]="+="+ue,Mt&&(Wt[A.p]="-="+ie()),et.set([_e,ze],Wt)),p)Wt=Vs(p),As=A===oi,Ti=ie(),Ne=parseFloat(Ee(A.a))+De,!de&&Le>1&&(Fi=(O?br.scrollingElement||Ca:L).style,Fi={style:Fi,value:Fi["overflow"+A.a.toUpperCase()]},O&&Vs(vr)["overflow"+A.a.toUpperCase()]!=="scroll"&&(Fi.style["overflow"+A.a.toUpperCase()]="scroll")),N4(p,xe,Wt),le=fg(p),Zt=ol(p,!0),iu=z&&Wh(L,As?mn:oi)(),f&&(Fe=[f+A.os2,ke+De+Di],Fe.t=xe,vt=f===Zr?t7(p,A)+ke+De:0,vt&&Fe.push(A.d,vt+Di),lp(Fe),Mt&&Bt.forEach(function($n){$n.pin===Mt&&$n.vars.pinSpacing!==!1&&($n._subPinOffset=!0)}),z&&ie(Oe)),z&&(zt={top:Zt.top+(As?Ti-ce:iu)+Di,left:Zt.left+(As?iu:Ti-ce)+Di,boxSizing:"border-box",position:"fixed"},zt[qu]=zt["max"+jp]=Math.ceil(Zt.width)+Di,zt[Xu]=zt["max"+_w]=Math.ceil(Zt.height)+Di,zt[js]=zt[js+s0]=zt[js+i0]=zt[js+a0]=zt[js+n0]="0",zt[Zr]=Wt[Zr],zt[Zr+s0]=Wt[Zr+s0],zt[Zr+i0]=Wt[Zr+i0],zt[Zr+a0]=Wt[Zr+a0],zt[Zr+n0]=Wt[Zr+n0],B=iH(F,zt,_),cn&&ie(0)),n?(Ua=n._initted,I4(1),n.render(n.duration(),!0,!0),fe=Ee(A.a)-Ne+ke+De,$=Math.abs(ke-fe)>1,z&&$&&B.splice(B.length-2,2),n.render(0,!0,!0),Ua||n.invalidate(!0),n.parent||n.totalTime(n.totalTime()),I4(0)):fe=ke,Fi&&(Fi.value?Fi.style["overflow"+A.a.toUpperCase()]=Fi.value:Fi.style.removeProperty("overflow-"+A.a));else if(d&&ie()&&!S)for(Zt=d.parentNode;Zt&&Zt!==vr;)Zt._pinOffset&&(ce-=Zt._pinOffset,Le-=Zt._pinOffset),Zt=Zt.parentNode;kl&&kl.forEach(function($n){return $n.revert(!1,!0)}),P.start=ce,P.end=Le,he=ge=cn?Oe:ie(),!S&&!cn&&(he<Oe&&ie(Oe),P.scroll.rec=0),P.revert(!1,!0),Y=dn(),me&&(U=-1,me.restart(!0)),Gi=0,n&&T&&(n._initted||tt)&&n.progress()!==tt&&n.progress(tt||0,!0).render(n.time(),!0,!0),(Z||H!==P.progress||S)&&(n&&!T&&n.totalProgress(S&&ce<-.001&&!H?et.utils.normalize(ce,Le,0):H,!0),P.progress=Z||(he-ce)/ke===H?0:H),p&&f&&(xe._pinOffset=Math.round(P.progress*fe)),j&&j.invalidate(),isNaN(Ro)||(Ro-=et.getProperty(K,A.p),Tr-=et.getProperty(Ce,A.p),mg(K,A,Ro),mg(_e,A,Ro-(St||0)),mg(Ce,A,Tr),mg(ze,A,Tr-(St||0))),Z&&!cn&&P.update(),c&&!cn&&!Ge&&(Ge=!0,c(P),Ge=!1)}},P.getVelocity=function(){return(ie()-ge)/(dn()-Zv)*1e3||0},P.endAnimation=function(){jf(P.callbackAnimation),n&&(j?j.progress(1):n.paused()?T||jf(n,P.direction<0,1):jf(n,n.reversed()))},P.labelToScroll=function(We){return n&&n.labels&&(ce||P.refresh()||ce)+n.labels[We]/n.duration()*ke||0},P.getTrailing=function(We){var yt=Bt.indexOf(P),rt=P.direction>0?Bt.slice(0,yt).reverse():Bt.slice(yt+1);return(as(We)?rt.filter(function(St){return St.vars.preventOverlaps===We}):rt).filter(function(St){return P.direction>0?St.end<=ce:St.start>=Le})},P.update=function(We,yt,rt){if(!(S&&!rt&&!We)){var St=cn===!0?Oe:P.scroll(),k=We?0:(St-ce)/ke,re=k<0?0:k>1?1:k||0,de=P.progress,Z,ue,De,Ve,Ye,$e,Mt,wt;if(yt&&(ge=he,he=S?ie():St,w&&(He=Te,Te=n&&!T?n.totalProgress():re)),g&&!re&&p&&!Gi&&!lg&&ea&&ce<St+(St-ge)/(dn()-Zv)*g&&(re=1e-4),re!==de&&P.enabled){if(Z=P.isActive=!!re&&re<1,ue=!!de&&de<1,$e=Z!==ue,Ye=$e||!!re!=!!de,P.direction=re>de?1:-1,P.progress=re,Ye&&!Gi&&(De=re&&!de?0:re===1?1:de===1?2:3,T&&(Ve=!$e&&N[De+1]!=="none"&&N[De+1]||N[De],wt=n&&(Ve==="complete"||Ve==="reset"||Ve in n))),M&&($e||wt)&&(wt||u||!n)&&(gn(M)?M(P):P.getTrailing(M).forEach(function(Ti){return Ti.endAnimation()})),T||(j&&!Gi&&!lg?(j._dp._time-j._start!==j._time&&j.render(j._dp._time-j._start),j.resetTo?j.resetTo("totalProgress",re,n._tTime/n._tDur):(j.vars.totalProgress=re,j.invalidate().restart())):n&&n.totalProgress(re,!!(Gi&&(Y||We)))),p){if(We&&f&&(xe.style[f+A.os2]=je),!z)Ue(T1(Ne+fe*re));else if(Ye){if(Mt=!We&&re>de&&Le+1>St&&St+1>=pl(L,A),_)if(!We&&(Z||Mt)){var vt=ol(p,!0),Wt=St-ce;cS(p,vr,vt.top+(A===oi?Wt:0)+Di,vt.left+(A===oi?0:Wt)+Di)}else cS(p,xe);lp(Z||Mt?B:le),$&&re<1&&Z||Ue(Ne+(re===1&&!Mt?fe:0))}}w&&!J.tween&&!Gi&&!lg&&me.restart(!0),o&&($e||x&&re&&(re<1||!R4))&&$2(o.targets).forEach(function(Ti){return Ti.classList[Z||x?"add":"remove"](o.className)}),a&&!T&&!We&&a(P),Ye&&!Gi?(T&&(wt&&(Ve==="complete"?n.pause().totalProgress(1):Ve==="reset"?n.restart(!0).pause():Ve==="restart"?n.restart(!0):n[Ve]()),a&&a(P)),($e||!R4)&&(h&&$e&&z4(P,h),q[De]&&z4(P,q[De]),x&&(re===1?P.kill(!1,1):q[De]=0),$e||(De=re===1?1:3,q[De]&&z4(P,q[De]))),C&&!Z&&Math.abs(P.getVelocity())>(Kv(C)?C:2500)&&(jf(P.callbackAnimation),j?j.progress(1):jf(n,Ve==="reverse"?1:!re,1))):T&&a&&!Gi&&a(P)}if(te){var Zt=S?St/S.duration()*(S._caScrollDist||0):St;Qe(Zt+(K._isFlipped?1:0)),te(Zt)}nt&&nt(-St/S.duration()*(S._caScrollDist||0))}},P.enable=function(We,yt){P.enabled||(P.enabled=!0,xi(L,"resize",L1),O||xi(L,"scroll",Rc),V&&xi(e,"refreshInit",V),We!==!1&&(P.progress=H=0,he=ge=U=ie()),yt!==!1&&P.refresh())},P.getTween=function(We){return We&&J?J.tween:j},P.setPositions=function(We,yt,rt,St){if(S){var k=S.scrollTrigger,re=S.duration(),de=k.end-k.start;We=k.start+de*We/re,yt=k.start+de*yt/re}P.refresh(!1,!1,{start:iS(We,rt&&!!P._startClamp),end:iS(yt,rt&&!!P._endClamp)},St),P.update()},P.adjustPinSpacing=function(We){if(Fe&&We){var yt=Fe.indexOf(A.d)+1;Fe[yt]=parseFloat(Fe[yt])+We+Di,Fe[1]=parseFloat(Fe[1])+We+Di,lp(Fe)}},P.disable=function(We,yt){if(P.enabled&&(We!==!1&&P.revert(!0,!0),P.enabled=P.isActive=!1,yt||j&&j.pause(),Oe=0,ee&&(ee.uncache=1),V&&vi(e,"refreshInit",V),me&&(me.pause(),J.tween&&J.tween.kill()&&(J.tween=0)),!O)){for(var rt=Bt.length;rt--;)if(Bt[rt].scroller===L&&Bt[rt]!==P)return;vi(L,"resize",L1),O||vi(L,"scroll",Rc)}},P.kill=function(We,yt){P.disable(We,yt),j&&!yt&&j.kill(),l&&delete r7[l];var rt=Bt.indexOf(P);rt>=0&&Bt.splice(rt,1),rt===un&&e2>0&&un--,rt=0,Bt.forEach(function(St){return St.scroller===P.scroller&&(rt=1)}),rt||cn||(P.scroll.rec=0),n&&(n.scrollTrigger=null,We&&n.revert({kill:!1}),yt||n.kill()),_e&&[_e,ze,K,Ce].forEach(function(St){return St.parentNode&&St.parentNode.removeChild(St)}),o0===P&&(o0=0),p&&(ee&&(ee.uncache=1),rt=0,Bt.forEach(function(St){return St.pin===p&&rt++}),rt||(ee.spacer=0)),i.onKill&&i.onKill(P)},Bt.push(P),P.enable(!1,!1),gt&&gt(P),n&&n.add&&!ke){var Pt=P.update;P.update=function(){P.update=Pt,ce||Le||P.refresh()},et.delayedCall(.01,P.update),ke=.01,ce=Le=0}else P.refresh();p&&eH()},e.register=function(i){return fd||(et=i||TI(),EI()&&window.document&&e.enable(),fd=E1),fd},e.defaults=function(i){if(i)for(var n in i)dg[n]=i[n];return dg},e.disable=function(i,n){E1=0,Bt.forEach(function(a){return a[n?"kill":"disable"](i)}),vi(Vt,"wheel",Rc),vi(br,"scroll",Rc),clearInterval(og),vi(br,"touchcancel",ro),vi(vr,"touchstart",ro),ug(vi,br,"pointerdown,touchstart,mousedown",nS),ug(vi,br,"pointerup,touchend,mouseup",sS),K2.kill(),hg(vi);for(var s=0;s<kt.length;s+=3)cg(vi,kt[s],kt[s+1]),cg(vi,kt[s],kt[s+2])},e.enable=function(){if(Vt=window,br=document,Ca=br.documentElement,vr=br.body,et&&($2=et.utils.toArray,Fd=et.utils.clamp,e7=et.core.context||ro,I4=et.core.suppressOverwrites||ro,yw=Vt.history.scrollRestoration||"auto",i7=Vt.pageYOffset,et.core.globals("ScrollTrigger",e),vr)){E1=1,op=document.createElement("div"),op.style.height="100vh",op.style.position="absolute",kI(),XG(),ei.register(et),e.isTouch=ei.isTouch,Jl=ei.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),xi(Vt,"wheel",Rc),bI=[Vt,br,Ca,vr],et.matchMedia?(e.matchMedia=function(l){var h=et.matchMedia(),c;for(c in l)h.add(c,l[c]);return h},et.addEventListener("matchMediaInit",function(){return Sw()}),et.addEventListener("matchMediaRevert",function(){return BI()}),et.addEventListener("matchMedia",function(){Ru(0,1),pc("matchMedia")}),et.matchMedia("(orientation: portrait)",function(){return k4(),k4})):console.warn("Requires GSAP 3.11.0 or later"),k4(),xi(br,"scroll",Rc);var i=vr.style,n=i.borderTopStyle,s=et.core.Animation.prototype,a,o;for(s.revert||Object.defineProperty(s,"revert",{value:function(){return this.time(-.01,!0)}}),i.borderTopStyle="solid",a=ol(vr),oi.m=Math.round(a.top+oi.sc())||0,mn.m=Math.round(a.left+mn.sc())||0,n?i.borderTopStyle=n:i.removeProperty("border-top-style"),og=setInterval(lS,250),et.delayedCall(.5,function(){return lg=0}),xi(br,"touchcancel",ro),xi(vr,"touchstart",ro),ug(xi,br,"pointerdown,touchstart,mousedown",nS),ug(xi,br,"pointerup,touchend,mouseup",sS),J6=et.utils.checkPrefix("transform"),t2.push(J6),fd=dn(),K2=et.delayedCall(.2,Ru).pause(),md=[br,"visibilitychange",function(){var l=Vt.innerWidth,h=Vt.innerHeight;br.hidden?(eS=l,tS=h):(eS!==l||tS!==h)&&L1()},br,"DOMContentLoaded",Ru,Vt,"load",Ru,Vt,"resize",L1],hg(xi),Bt.forEach(function(l){return l.enable(0,1)}),o=0;o<kt.length;o+=3)cg(vi,kt[o],kt[o+1]),cg(vi,kt[o],kt[o+2])}},e.config=function(i){"limitCallbacks"in i&&(R4=!!i.limitCallbacks);var n=i.syncInterval;n&&clearInterval(og)||(og=n)&&setInterval(lS,n),"ignoreMobileResize"in i&&(SI=e.isTouch===1&&i.ignoreMobileResize),"autoRefreshEvents"in i&&(hg(vi)||hg(xi,i.autoRefreshEvents||"none"),CI=(i.autoRefreshEvents+"").indexOf("resize")===-1)},e.scrollerProxy=function(i,n){var s=Tn(i),a=kt.indexOf(s),o=cc(s);~a&&kt.splice(a,o?6:2),n&&(o?bo.unshift(Vt,n,vr,n,Ca,n):bo.unshift(s,n))},e.clearMatchMedia=function(i){Bt.forEach(function(n){return n._ctx&&n._ctx.query===i&&n._ctx.kill(!0,!0)})},e.isInViewport=function(i,n,s){var a=(as(i)?Tn(i):i).getBoundingClientRect(),o=a[s?qu:Xu]*n||0;return s?a.right-o>0&&a.left+o<Vt.innerWidth:a.bottom-o>0&&a.top+o<Vt.innerHeight},e.positionInViewport=function(i,n,s){as(i)&&(i=Tn(i));var a=i.getBoundingClientRect(),o=a[s?qu:Xu],l=n==null?o/2:n in J2?J2[n]*o:~n.indexOf("%")?parseFloat(n)*o/100:parseFloat(n)||0;return s?(a.left+l)/Vt.innerWidth:(a.top+l)/Vt.innerHeight},e.killAll=function(i){if(Bt.slice(0).forEach(function(s){return s.vars.id!=="ScrollSmoother"&&s.kill()}),i!==!0){var n=dc.killAll||[];dc={},n.forEach(function(s){return s()})}},e}();Nt.version="3.12.2";Nt.saveStyles=function(e){return e?$2(e).forEach(function(t){if(t&&t.style){var r=ns.indexOf(t);r>=0&&ns.splice(r,5),ns.push(t,t.style.cssText,t.getBBox&&t.getAttribute("transform"),et.core.getCache(t),e7())}}):ns};Nt.revert=function(e,t){return Sw(!e,t)};Nt.create=function(e,t){return new Nt(e,t)};Nt.refresh=function(e){return e?L1():(fd||Nt.register())&&Ru(!0)};Nt.update=function(e){return++kt.cache&&xl(e===!0?2:0)};Nt.clearScrollMemory=zI;Nt.maxScroll=function(e,t){return pl(e,t?mn:oi)};Nt.getScrollFunc=function(e,t){return Wh(Tn(e),t?mn:oi)};Nt.getById=function(e){return r7[e]};Nt.getAll=function(){return Bt.filter(function(e){return e.vars.id!=="ScrollSmoother"})};Nt.isScrolling=function(){return!!ea};Nt.snapDirectional=Cw;Nt.addEventListener=function(e,t){var r=dc[e]||(dc[e]=[]);~r.indexOf(t)||r.push(t)};Nt.removeEventListener=function(e,t){var r=dc[e],i=r&&r.indexOf(t);i>=0&&r.splice(i,1)};Nt.batch=function(e,t){var r=[],i={},n=t.interval||.016,s=t.batchMax||1e9,a=function(h,c){var u=[],d=[],p=et.delayedCall(n,function(){c(u,d),u=[],d=[]}).pause();return function(f){u.length||p.restart(!0),u.push(f.trigger),d.push(f),s<=u.length&&p.progress(1)}},o;for(o in t)i[o]=o.substr(0,2)==="on"&&gn(t[o])&&o!=="onRefreshInit"?a(o,t[o]):t[o];return gn(s)&&(s=s(),xi(Nt,"refresh",function(){return s=t.batchMax()})),$2(e).forEach(function(l){var h={};for(o in i)h[o]=i[o];h.trigger=l,r.push(Nt.create(h))}),r};var pS=function(t,r,i,n){return r>n?t(n):r<0&&t(0),i>n?(n-r)/(i-r):i<0?r/(r-i):1},F4=function e(t,r){r===!0?t.style.removeProperty("touch-action"):t.style.touchAction=r===!0?"auto":r?"pan-"+r+(ei.isTouch?" pinch-zoom":""):"none",t===Ca&&e(vr,r)},gg={auto:1,scroll:1},sH=function(t){var r=t.event,i=t.target,n=t.axis,s=(r.changedTouches?r.changedTouches[0]:r).target,a=s._gsap||et.core.getCache(s),o=dn(),l;if(!a._isScrollT||o-a._isScrollT>2e3){for(;s&&s!==vr&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(gg[(l=Vs(s)).overflowY]||gg[l.overflowX]));)s=s.parentNode;a._isScroll=s&&s!==i&&!cc(s)&&(gg[(l=Vs(s)).overflowY]||gg[l.overflowX]),a._isScrollT=o}(a._isScroll||n==="x")&&(r.stopPropagation(),r._gsapAllow=!0)},FI=function(t,r,i,n){return ei.create({target:t,capture:!0,debounce:!1,lockAxis:!0,type:r,onWheel:n=n&&sH,onPress:n,onDrag:n,onScroll:n,onEnable:function(){return i&&xi(br,ei.eventTypes[0],mS,!1,!0)},onDisable:function(){return vi(br,ei.eventTypes[0],mS,!0)}})},aH=/(input|label|select|textarea)/i,fS,mS=function(t){var r=aH.test(t.target.tagName);(r||fS)&&(t._gsapAllow=!0,fS=r)},oH=function(t){yu(t)||(t={}),t.preventDefault=t.isNormalizer=t.allowClicks=!0,t.type||(t.type="wheel,touch"),t.debounce=!!t.debounce,t.id=t.id||"normalizer";var r=t,i=r.normalizeScrollX,n=r.momentum,s=r.allowNestedScroll,a=r.onRelease,o,l,h=Tn(t.target)||Ca,c=et.core.globals().ScrollSmoother,u=c&&c.get(),d=Jl&&(t.content&&Tn(t.content)||u&&t.content!==!1&&!u.smooth()&&u.content()),p=Wh(h,oi),f=Wh(h,mn),m=1,g=(ei.isTouch&&Vt.visualViewport?Vt.visualViewport.scale*Vt.visualViewport.width:Vt.outerWidth)/Vt.innerWidth,v=0,y=gn(n)?function(){return n(o)}:function(){return n||2.8},x,w,_=FI(h,t.type,!0,s),b=function(){return w=!1},S=ro,C=ro,M=function(){l=pl(h,oi),C=Fd(Jl?1:0,l),i&&(S=Fd(0,pl(h,mn))),x=Yu},A=function(){d._gsap.y=T1(parseFloat(d._gsap.y)+p.offset)+"px",d.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(d._gsap.y)+", 0, 1)",p.offset=p.cacheID=0},T=function(){if(w){requestAnimationFrame(b);var I=T1(o.deltaY/2),W=C(p.v-I);if(d&&W!==p.v+p.offset){p.offset=W-p.v;var P=T1((parseFloat(d&&d._gsap.y)||0)-p.offset);d.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+P+", 0, 1)",d._gsap.y=P+"px",p.cacheID=kt.cache,xl()}return!0}p.offset&&A(),w=!0},L,D,O,z,q=function(){M(),L.isActive()&&L.vars.scrollY>l&&(p()>l?L.progress(1)&&p(l):L.resetTo("scrollY",l))};return d&&et.set(d,{y:"+=0"}),t.ignoreCheck=function(N){return Jl&&N.type==="touchmove"&&T()||m>1.05&&N.type!=="touchstart"||o.isGesturing||N.touches&&N.touches.length>1},t.onPress=function(){w=!1;var N=m;m=T1((Vt.visualViewport&&Vt.visualViewport.scale||1)/g),L.pause(),N!==m&&F4(h,m>1.01?!0:i?!1:"x"),D=f(),O=p(),M(),x=Yu},t.onRelease=t.onGestureStart=function(N,I){if(p.offset&&A(),!I)z.restart(!0);else{kt.cache++;var W=y(),P,V;i&&(P=f(),V=P+W*.05*-N.velocityX/.227,W*=pS(f,P,V,pl(h,mn)),L.vars.scrollX=S(V)),P=p(),V=P+W*.05*-N.velocityY/.227,W*=pS(p,P,V,pl(h,oi)),L.vars.scrollY=C(V),L.invalidate().duration(W).play(.01),(Jl&&L.vars.scrollY>=l||P>=l-1)&&et.to({},{onUpdate:q,duration:W})}a&&a(N)},t.onWheel=function(){L._ts&&L.pause(),dn()-v>1e3&&(x=0,v=dn())},t.onChange=function(N,I,W,P,V){if(Yu!==x&&M(),I&&i&&f(S(P[2]===I?D+(N.startX-N.x):f()+I-P[1])),W){p.offset&&A();var G=V[2]===W,Q=G?O+N.startY-N.y:p()+W-V[1],U=C(Q);G&&Q!==U&&(O+=U-Q),p(U)}(W||I)&&xl()},t.onEnable=function(){F4(h,i?!1:"x"),Nt.addEventListener("refresh",q),xi(Vt,"resize",q),p.smooth&&(p.target.style.scrollBehavior="auto",p.smooth=f.smooth=!1),_.enable()},t.onDisable=function(){F4(h,!0),vi(Vt,"resize",q),Nt.removeEventListener("refresh",q),_.kill()},t.lockAxis=t.lockAxis!==!1,o=new ei(t),o.iOS=Jl,Jl&&!p()&&p(1),Jl&&et.ticker.add(ro),z=o._dc,L=et.to(o,{ease:"power4",paused:!0,scrollX:i?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:NI(p,p(),function(){return L.pause()})},onUpdate:xl,onComplete:z.vars.onComplete}),o};Nt.sort=function(e){return Bt.sort(e||function(t,r){return(t.vars.refreshPriority||0)*-1e6+t.start-(r.start+(r.vars.refreshPriority||0)*-1e6)})};Nt.observe=function(e){return new ei(e)};Nt.normalizeScroll=function(e){if(typeof e>"u")return is;if(e===!0&&is)return is.enable();if(e===!1)return is&&is.kill();var t=e instanceof ei?e:oH(e);return is&&is.target===t.target&&is.kill(),cc(t.target)&&(is=t),t};Nt.core={_getVelocityProp:$6,_inputObserver:FI,_scrollers:kt,_proxies:bo,bridge:{ss:function(){ea||pc("scrollStart"),ea=dn()},ref:function(){return Gi}}};TI()&&et.registerPlugin(Nt);const lH=()=>{const e=["Intelligent Intelligence","Meaningful Investigations","Thoughtful Research"];be.useState(e.length-1),be.useRef(null);const[t,r]=be.useState(0),i=be.useRef(null);be.useEffect(()=>(n(),i.current=setTimeout(()=>{r(s=>s===e.length-1?0:s+1)},2500),()=>{}),[t]);function n(){i.current&&clearTimeout(i.current)}return R.jsx("div",{className:"flex flex-col overflow-hidden transition-all max-h-[2.353rem] w-fit",children:R.jsx("div",{className:"whitespace-nowrap flex transition-all duration-1000 ease-in-out flex-col items-center z-10",style:{transform:`translateY(${-t*2.353}rem)`},children:e.map((s,a)=>R.jsx("p",{className:"text-md",children:s},a))})})};var UI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},gS=vo.createContext&&vo.createContext(UI),Rh=globalThis&&globalThis.__assign||function(){return Rh=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Rh.apply(this,arguments)},hH=globalThis&&globalThis.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r};function jI(e){return e&&e.map(function(t,r){return vo.createElement(t.tag,Rh({key:r},t.attr),jI(t.child))})}function Mw(e){return function(t){return vo.createElement(uH,Rh({attr:Rh({},e.attr)},t),jI(e.child))}}function uH(e){var t=function(r){var i=e.attr,n=e.size,s=e.title,a=hH(e,["attr","size","title"]),o=n||r.size||"1em",l;return r.className&&(l=r.className),e.className&&(l=(l?l+" ":"")+e.className),vo.createElement("svg",Rh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,i,a,{className:l,style:Rh(Rh({color:e.color||r.color},r.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&vo.createElement("title",null,s),e.children)};return gS!==void 0?vo.createElement(gS.Consumer,null,function(r){return t(r)}):t(UI)}function VI(e){return Mw({tag:"svg",attr:{viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M 16 3 C 8.832031 3 3 8.832031 3 16 C 3 23.167969 8.832031 29 16 29 C 23.167969 29 29 23.167969 29 16 C 29 8.832031 23.167969 3 16 3 Z M 16 5 C 22.085938 5 27 9.914063 27 16 C 27 22.085938 22.085938 27 16 27 C 9.914063 27 5 22.085938 5 16 C 5 9.914063 9.914063 5 16 5 Z M 16.71875 9.59375 L 15.28125 11 L 19.28125 15 L 9 15 L 9 17 L 19.28125 17 L 15.28125 21 L 16.71875 22.40625 L 23.125 16 Z"}}]})(e)}const cH=({children:e,content:t,parentHover:r,active:i,handleSelectActive:n,className:s=null})=>R.jsxs("div",{onClick:()=>n(t),className:`hover:pl-7 hover:grayscale-0 hover:opacity-100 hover:text-primary-300 hover:bg-black/5 text-background-dark gap-2 flex flex-col px-4 py-4 cursor-pointer transition-all duration-500 ${i?"pl-7 border-accent-400 text-accent-400":r?"grayscale text-background-dark opacity-50":"grayscale-0 text-background-dark opacity-100 border-black/20 "}`,children:[R.jsxs("div",{className:"flex items-center justify-between w-full",children:[R.jsx("h2",{className:`transition-[font-size] ${i?"text-sm desktop:text-base text-accent-400 font-medium pr-4 hd:text-md":"desktop:text-base hd:text-md"}`,children:t.name}),R.jsx(VI,{size:32,className:`transition-[transform] duration-700 ease-in-out ${i?"rotate-[90deg] text-accent-400":"rotate-0"}`})]}),R.jsx("div",{className:`overflow-hidden text-xs desktop:text-sm hd:text-base duration-1000 text-background-dark transition-[max-height] ease-in-out ${i?"max-h-[50rem]":"max-h-0"}`,children:t.content})]}),dH=()=>{const e=[{name:"Cyber Monitoring",content:"Cyber product monitoring by trained intelligence analysts"},{name:"Global Investigations",content:"Worldwide Intellectual Property investigations"},{name:"Undercover Operations",content:"Undercover operations worldwide"},{name:"Business Intelligence Background",content:"Business Intelligence background checks"},{name:"Research",content:"Thoughtful Online Research"},{name:"Risk Assessment",content:"Risk Management assessments"},{name:"Anonymous Hosting",content:"Anonymous domain name registration and hosting services"},{name:"VPN Access",content:"Anonymous VPN internet access for our clients and the industry"},{name:"Security Assessments",content:"Enhancing protective measures systematically."}],[t,r]=be.useState(!1),[i,n]=be.useState(e[0]),s=a=>{if(a.name===i.name)return;const o=e.findIndex(l=>l.name==a.name);n(e[o])};return R.jsx("div",{className:"z-10 flex-1",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:R.jsx("div",{className:"flex flex-col",children:e.map((a,o)=>R.jsx(cH,{content:a,parentHover:t,active:a.name==(i==null?void 0:i.name),handleSelectActive:s},o))})})},s7=({cellCount:e=0,cellClass:t})=>{const r=new Array(e);return console.log(t),r.fill(null).map((i,n)=>R.jsx("div",{className:t},n))};/*!
 * paths 3.12.2
 * https://greensock.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var pH=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,fH=/(?:(-)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,mH=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/ig,gH=/(^[#\.][a-z]|[a-y][a-z])/i,vH=Math.PI/180,yH=180/Math.PI,vg=Math.sin,yg=Math.cos,Ks=Math.abs,ll=Math.sqrt,xH=Math.atan2,a7=1e8,vS=function(t){return typeof t=="string"},GI=function(t){return typeof t=="number"},wH=function(t){return typeof t>"u"},bH={},_H={},e3=1e5,HI=function(t){return Math.round((t+a7)%1*e3)/e3||(t<0?0:1)},Qt=function(t){return Math.round(t*e3)/e3||0},yS=function(t){return Math.round(t*1e10)/1e10||0},xS=function(t,r,i,n){var s=t[r],a=n===1?6:o7(s,i,n);if(a&&a+i+2<s.length)return t.splice(r,0,s.slice(0,i+a+2)),s.splice(0,i+a),1},WI=function(t,r,i){var n=t.length,s=~~(i*n);if(t[s]>r){for(;--s&&t[s]>r;);s<0&&(s=0)}else for(;t[++s]<r&&s<n;);return s<n?s:n-1},CH=function(t,r){var i=t.length;for(r||t.reverse();i--;)t[i].reversed||AH(t[i])},wS=function(t,r){return r.totalLength=t.totalLength,t.samples?(r.samples=t.samples.slice(0),r.lookup=t.lookup.slice(0),r.minLength=t.minLength,r.resolution=t.resolution):t.totalPoints&&(r.totalPoints=t.totalPoints),r},SH=function(t,r){var i=t.length,n=t[i-1]||[],s=n.length;i&&r[0]===n[s-2]&&r[1]===n[s-1]&&(r=n.concat(r.slice(2)),i--),t[i]=r};function i2(e){e=vS(e)&&gH.test(e)&&document.querySelector(e)||e;var t=e.getAttribute?e:0,r;return t&&(e=e.getAttribute("d"))?(t._gsPath||(t._gsPath={}),r=t._gsPath[e],r&&!r._dirty?r:t._gsPath[e]=t3(e)):e?vS(e)?t3(e):GI(e[0])?[e]:e:console.warn("Expecting a <path> element or an SVG path data string")}function MH(e){for(var t=[],r=0;r<e.length;r++)t[r]=wS(e[r],e[r].slice(0));return wS(e,t)}function AH(e){var t=0,r;for(e.reverse();t<e.length;t+=2)r=e[t],e[t]=e[t+1],e[t+1]=r;e.reversed=!e.reversed}var EH=function(t,r){var i=document.createElementNS("http://www.w3.org/2000/svg","path"),n=[].slice.call(t.attributes),s=n.length,a;for(r=","+r+",";--s>-1;)a=n[s].nodeName.toLowerCase(),r.indexOf(","+a+",")<0&&i.setAttributeNS(null,a,n[s].nodeValue);return i},TH={rect:"rx,ry,x,y,width,height",circle:"r,cx,cy",ellipse:"rx,ry,cx,cy",line:"x1,x2,y1,y2"},LH=function(t,r){for(var i=r?r.split(","):[],n={},s=i.length;--s>-1;)n[i[s]]=+t.getAttribute(i[s])||0;return n};function PH(e,t){var r=e.tagName.toLowerCase(),i=.552284749831,n,s,a,o,l,h,c,u,d,p,f,m,g,v,y,x,w,_,b,S,C,M;return r==="path"||!e.getBBox?e:(h=EH(e,"x,y,width,height,cx,cy,rx,ry,r,x1,x2,y1,y2,points"),M=LH(e,TH[r]),r==="rect"?(o=M.rx,l=M.ry||o,s=M.x,a=M.y,p=M.width-o*2,f=M.height-l*2,o||l?(m=s+o*(1-i),g=s+o,v=g+p,y=v+o*i,x=v+o,w=a+l*(1-i),_=a+l,b=_+f,S=b+l*i,C=b+l,n="M"+x+","+_+" V"+b+" C"+[x,S,y,C,v,C,v-(v-g)/3,C,g+(v-g)/3,C,g,C,m,C,s,S,s,b,s,b-(b-_)/3,s,_+(b-_)/3,s,_,s,w,m,a,g,a,g+(v-g)/3,a,v-(v-g)/3,a,v,a,y,a,x,w,x,_].join(",")+"z"):n="M"+(s+p)+","+a+" v"+f+" h"+-p+" v"+-f+" h"+p+"z"):r==="circle"||r==="ellipse"?(r==="circle"?(o=l=M.r,u=o*i):(o=M.rx,l=M.ry,u=l*i),s=M.cx,a=M.cy,c=o*i,n="M"+(s+o)+","+a+" C"+[s+o,a+u,s+c,a+l,s,a+l,s-c,a+l,s-o,a+u,s-o,a,s-o,a-u,s-c,a-l,s,a-l,s+c,a-l,s+o,a-u,s+o,a].join(",")+"z"):r==="line"?n="M"+M.x1+","+M.y1+" L"+M.x2+","+M.y2:(r==="polyline"||r==="polygon")&&(d=(e.getAttribute("points")+"").match(fH)||[],s=d.shift(),a=d.shift(),n="M"+s+","+a+" L"+d.join(","),r==="polygon"&&(n+=","+s+","+a+"z")),h.setAttribute("d",YI(h._gsRawPath=t3(n))),t&&e.parentNode&&(e.parentNode.insertBefore(h,e),e.parentNode.removeChild(e)),h)}function qI(e,t,r){var i=e[t],n=e[t+2],s=e[t+4],a;return i+=(n-i)*r,n+=(s-n)*r,i+=(n-i)*r,a=n+(s+(e[t+6]-s)*r-n)*r-i,i=e[t+1],n=e[t+3],s=e[t+5],i+=(n-i)*r,n+=(s-n)*r,i+=(n-i)*r,Qt(xH(n+(s+(e[t+7]-s)*r-n)*r-i,a)*yH)}function XI(e,t,r){r=wH(r)?1:yS(r)||0,t=yS(t)||0;var i=Math.max(0,~~(Ks(r-t)-1e-8)),n=MH(e);if(t>r&&(t=1-t,r=1-r,CH(n),n.totalLength=0),t<0||r<0){var s=Math.abs(~~Math.min(t,r))+1;t+=s,r+=s}n.totalLength||Qu(n);var a=r>1,o=bS(n,t,bH,!0),l=bS(n,r,_H),h=l.segment,c=o.segment,u=l.segIndex,d=o.segIndex,p=l.i,f=o.i,m=d===u,g=p===f&&m,v,y,x,w,_,b,S,C;if(a||i){for(v=u<d||m&&p<f||g&&l.t<o.t,xS(n,d,f,o.t)&&(d++,v||(u++,g?(l.t=(l.t-o.t)/(1-o.t),p=0):m&&(p-=f))),Math.abs(1-(r-t))<1e-5?u=d-1:!l.t&&u?u--:xS(n,u,p,l.t)&&v&&d++,o.t===1&&(d=(d+1)%n.length),_=[],b=n.length,S=1+b*i,C=d,S+=(b-d+u)%b,w=0;w<S;w++)SH(_,n[C++%b]);n=_}else if(x=l.t===1?6:o7(h,p,l.t),t!==r)for(y=o7(c,f,g?o.t/l.t:o.t),m&&(x+=y),h.splice(p+x+2),(y||f)&&c.splice(0,f+y),w=n.length;w--;)(w<d||w>u)&&n.splice(w,1);else h.angle=qI(h,p+x,0),p+=x,o=h[p],l=h[p+1],h.length=h.totalLength=0,h.totalPoints=n.totalPoints=8,h.push(o,l,o,l,o,l,o,l);return n.totalLength=0,n}function DH(e,t,r){t=t||0,e.samples||(e.samples=[],e.lookup=[]);var i=~~e.resolution||12,n=1/i,s=r?t+r*6+1:e.length,a=e[t],o=e[t+1],l=t?t/6*i:0,h=e.samples,c=e.lookup,u=(t?e.minLength:a7)||a7,d=h[l+r*i-1],p=t?h[l-1]:0,f,m,g,v,y,x,w,_,b,S,C,M,A,T,L,D,O;for(h.length=c.length=0,m=t+2;m<s;m+=6){if(g=e[m+4]-a,v=e[m+2]-a,y=e[m]-a,_=e[m+5]-o,b=e[m+3]-o,S=e[m+1]-o,x=w=C=M=0,Ks(g)<.01&&Ks(_)<.01&&Ks(y)+Ks(S)<.01)e.length>8&&(e.splice(m,6),m-=6,s-=6);else for(f=1;f<=i;f++)T=n*f,A=1-T,x=w-(w=(T*T*g+3*A*(T*v+A*y))*T),C=M-(M=(T*T*_+3*A*(T*b+A*S))*T),D=ll(C*C+x*x),D<u&&(u=D),p+=D,h[l++]=p;a+=g,o+=_}if(d)for(d-=p;l<h.length;l++)h[l]+=d;if(h.length&&u){if(e.totalLength=O=h[h.length-1]||0,e.minLength=u,O/u<9999)for(D=L=0,f=0;f<O;f+=u)c[D++]=h[L]<f?++L:L}else e.totalLength=h[0]=0;return t?p-h[t/2-1]:p}function Qu(e,t){var r,i,n;for(n=r=i=0;n<e.length;n++)e[n].resolution=~~t||12,i+=e[n].length,r+=DH(e[n]);return e.totalPoints=i,e.totalLength=r,e}function o7(e,t,r){if(r<=0||r>=1)return 0;var i=e[t],n=e[t+1],s=e[t+2],a=e[t+3],o=e[t+4],l=e[t+5],h=e[t+6],c=e[t+7],u=i+(s-i)*r,d=s+(o-s)*r,p=n+(a-n)*r,f=a+(l-a)*r,m=u+(d-u)*r,g=p+(f-p)*r,v=o+(h-o)*r,y=l+(c-l)*r;return d+=(v-d)*r,f+=(y-f)*r,e.splice(t+2,4,Qt(u),Qt(p),Qt(m),Qt(g),Qt(m+(d-m)*r),Qt(g+(f-g)*r),Qt(d),Qt(f),Qt(v),Qt(y)),e.samples&&e.samples.splice(t/6*e.resolution|0,0,0,0,0,0,0,0),6}function bS(e,t,r,i){r=r||{},e.totalLength||Qu(e),(t<0||t>1)&&(t=HI(t));var n=0,s=e[0],a,o,l,h,c,u,d;if(!t)d=u=n=0,s=e[0];else if(t===1)d=1,n=e.length-1,s=e[n],u=s.length-8;else{if(e.length>1){for(l=e.totalLength*t,c=u=0;(c+=e[u++].totalLength)<l;)n=u;s=e[n],h=c-s.totalLength,t=(l-h)/(c-h)||0}a=s.samples,o=s.resolution,l=s.totalLength*t,u=s.lookup.length?s.lookup[~~(l/s.minLength)]||0:WI(a,l,t),h=u?a[u-1]:0,c=a[u],c<l&&(h=c,c=a[++u]),d=1/o*((l-h)/(c-h)+u%o),u=~~(u/o)*6,i&&d===1&&(u+6<s.length?(u+=6,d=0):n+1<e.length&&(u=d=0,s=e[++n]))}return r.t=d,r.i=u,r.path=e,r.segment=s,r.segIndex=n,r}function _S(e,t,r,i){var n=e[0],s=i||{},a,o,l,h,c,u,d,p,f;if((t<0||t>1)&&(t=HI(t)),n.lookup||Qu(e),e.length>1){for(l=e.totalLength*t,c=u=0;(c+=e[u++].totalLength)<l;)n=e[u];h=c-n.totalLength,t=(l-h)/(c-h)||0}return a=n.samples,o=n.resolution,l=n.totalLength*t,u=n.lookup.length?n.lookup[t<1?~~(l/n.minLength):n.lookup.length-1]||0:WI(a,l,t),h=u?a[u-1]:0,c=a[u],c<l&&(h=c,c=a[++u]),d=1/o*((l-h)/(c-h)+u%o)||0,f=1-d,u=~~(u/o)*6,p=n[u],s.x=Qt((d*d*(n[u+6]-p)+3*f*(d*(n[u+4]-p)+f*(n[u+2]-p)))*d+p),s.y=Qt((d*d*(n[u+7]-(p=n[u+1]))+3*f*(d*(n[u+5]-p)+f*(n[u+3]-p)))*d+p),r&&(s.angle=n.totalLength?qI(n,u,d>=1?1-1e-9:d||1e-9):n.angle||0),s}function P1(e,t,r,i,n,s,a){for(var o=e.length,l,h,c,u,d;--o>-1;)for(l=e[o],h=l.length,c=0;c<h;c+=2)u=l[c],d=l[c+1],l[c]=u*t+d*i+s,l[c+1]=u*r+d*n+a;return e._dirty=1,e}function OH(e,t,r,i,n,s,a,o,l){if(!(e===o&&t===l)){r=Ks(r),i=Ks(i);var h=n%360*vH,c=yg(h),u=vg(h),d=Math.PI,p=d*2,f=(e-o)/2,m=(t-l)/2,g=c*f+u*m,v=-u*f+c*m,y=g*g,x=v*v,w=y/(r*r)+x/(i*i);w>1&&(r=ll(w)*r,i=ll(w)*i);var _=r*r,b=i*i,S=(_*b-_*x-b*y)/(_*x+b*y);S<0&&(S=0);var C=(s===a?-1:1)*ll(S),M=C*(r*v/i),A=C*-(i*g/r),T=(e+o)/2,L=(t+l)/2,D=T+(c*M-u*A),O=L+(u*M+c*A),z=(g-M)/r,q=(v-A)/i,N=(-g-M)/r,I=(-v-A)/i,W=z*z+q*q,P=(q<0?-1:1)*Math.acos(z/ll(W)),V=(z*I-q*N<0?-1:1)*Math.acos((z*N+q*I)/ll(W*(N*N+I*I)));isNaN(V)&&(V=d),!a&&V>0?V-=p:a&&V<0&&(V+=p),P%=p,V%=p;var G=Math.ceil(Ks(V)/(p/4)),Q=[],U=V/G,Y=4/3*vg(U/2)/(1+yg(U/2)),H=c*r,ie=u*r,J=u*-i,ee=c*i,ne;for(ne=0;ne<G;ne++)n=P+ne*U,g=yg(n),v=vg(n),z=yg(n+=U),q=vg(n),Q.push(g-Y*v,v+Y*g,z+Y*q,q-Y*z,z,q);for(ne=0;ne<Q.length;ne+=2)g=Q[ne],v=Q[ne+1],Q[ne]=g*H+v*J+D,Q[ne+1]=g*ie+v*ee+O;return Q[ne-2]=o,Q[ne-1]=l,Q}}function t3(e){var t=(e+"").replace(mH,function(M){var A=+M;return A<1e-4&&A>-1e-4?0:A}).match(pH)||[],r=[],i=0,n=0,s=2/3,a=t.length,o=0,l="ERROR: malformed path: "+e,h,c,u,d,p,f,m,g,v,y,x,w,_,b,S,C=function(A,T,L,D){y=(L-A)/3,x=(D-T)/3,m.push(A+y,T+x,L-y,D-x,L,D)};if(!e||!isNaN(t[0])||isNaN(t[1]))return console.log(l),r;for(h=0;h<a;h++)if(_=p,isNaN(t[h])?(p=t[h].toUpperCase(),f=p!==t[h]):h--,u=+t[h+1],d=+t[h+2],f&&(u+=i,d+=n),h||(g=u,v=d),p==="M")m&&(m.length<8?r.length-=1:o+=m.length),i=g=u,n=v=d,m=[u,d],r.push(m),h+=2,p="L";else if(p==="C")m||(m=[0,0]),f||(i=n=0),m.push(u,d,i+t[h+3]*1,n+t[h+4]*1,i+=t[h+5]*1,n+=t[h+6]*1),h+=6;else if(p==="S")y=i,x=n,(_==="C"||_==="S")&&(y+=i-m[m.length-4],x+=n-m[m.length-3]),f||(i=n=0),m.push(y,x,u,d,i+=t[h+3]*1,n+=t[h+4]*1),h+=4;else if(p==="Q")y=i+(u-i)*s,x=n+(d-n)*s,f||(i=n=0),i+=t[h+3]*1,n+=t[h+4]*1,m.push(y,x,i+(u-i)*s,n+(d-n)*s,i,n),h+=4;else if(p==="T")y=i-m[m.length-4],x=n-m[m.length-3],m.push(i+y,n+x,u+(i+y*1.5-u)*s,d+(n+x*1.5-d)*s,i=u,n=d),h+=2;else if(p==="H")C(i,n,i=u,n),h+=1;else if(p==="V")C(i,n,i,n=u+(f?n-i:0)),h+=1;else if(p==="L"||p==="Z")p==="Z"&&(u=g,d=v,m.closed=!0),(p==="L"||Ks(i-u)>.5||Ks(n-d)>.5)&&(C(i,n,u,d),p==="L"&&(h+=2)),i=u,n=d;else if(p==="A"){if(b=t[h+4],S=t[h+5],y=t[h+6],x=t[h+7],c=7,b.length>1&&(b.length<3?(x=y,y=S,c--):(x=S,y=b.substr(2),c-=2),S=b.charAt(1),b=b.charAt(0)),w=OH(i,n,+t[h+1],+t[h+2],+t[h+3],+b,+S,(f?i:0)+y*1,(f?n:0)+x*1),h+=c,w)for(c=0;c<w.length;c++)m.push(w[c]);i=m[m.length-2],n=m[m.length-1]}else console.log(l);return h=m.length,h<6?(r.pop(),h=0):m[0]===m[h-2]&&m[1]===m[h-1]&&(m.closed=!0),r.totalPoints=o+h,r}function IH(e,t){t===void 0&&(t=1);for(var r=e[0],i=0,n=[r,i],s=2;s<e.length;s+=2)n.push(r,i,e[s],i=(e[s]-r)*t/2,r=e[s],-i);return n}function l7(e,t){Ks(e[0]-e[2])<1e-4&&Ks(e[1]-e[3])<1e-4&&(e=e.slice(2));var r=e.length-2,i=+e[0],n=+e[1],s=+e[2],a=+e[3],o=[i,n,i,n],l=s-i,h=a-n,c=Math.abs(e[r]-i)<.001&&Math.abs(e[r+1]-n)<.001,u,d,p,f,m,g,v,y,x,w,_,b,S,C,M;for(c&&(e.push(s,a),s=i,a=n,i=e[r-2],n=e[r-1],e.unshift(i,n),r+=4),t=t||t===0?+t:1,p=2;p<r;p+=2)u=i,d=n,i=s,n=a,s=+e[p+2],a=+e[p+3],!(i===s&&n===a)&&(f=l,m=h,l=s-i,h=a-n,g=ll(f*f+m*m),v=ll(l*l+h*h),y=ll(Math.pow(l/v+f/g,2)+Math.pow(h/v+m/g,2)),x=(g+v)*t*.25/y,w=i-(i-u)*(g?x/g:0),_=i+(s-i)*(v?x/v:0),b=i-(w+((_-w)*(g*3/(g+v)+.5)/4||0)),S=n-(n-d)*(g?x/g:0),C=n+(a-n)*(v?x/v:0),M=n-(S+((C-S)*(g*3/(g+v)+.5)/4||0)),(i!==u||n!==d)&&o.push(Qt(w+b),Qt(S+M),Qt(i),Qt(n),Qt(_+b),Qt(C+M)));return i!==s||n!==a||o.length<4?o.push(Qt(s),Qt(a),Qt(s),Qt(a)):o.length-=2,o.length===2?o.push(i,n,i,n,i,n):c&&(o.splice(0,6),o.length=o.length-6),o}function YI(e){GI(e[0])&&(e=[e]);var t="",r=e.length,i,n,s,a;for(n=0;n<r;n++){for(a=e[n],t+="M"+Qt(a[0])+","+Qt(a[1])+" C",i=a.length,s=2;s<i;s++)t+=Qt(a[s++])+","+Qt(a[s++])+" "+Qt(a[s++])+","+Qt(a[s++])+" "+Qt(a[s++])+","+Qt(a[s])+" ";a.closed&&(t+="z")}return t}/*!
 * matrix 3.12.2
 * https://greensock.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var fl,Zu,Aw,hp,D1,n2,r3,l0,$s="transform",h7=$s+"Origin",QI,ZI=function(t){var r=t.ownerDocument||t;for(!($s in t.style)&&("msTransform"in t.style)&&($s="msTransform",h7=$s+"Origin");r.parentNode&&(r=r.parentNode););if(Zu=window,r3=new $0,r){fl=r,Aw=r.documentElement,hp=r.body,l0=fl.createElementNS("http://www.w3.org/2000/svg","g"),l0.style.transform="none";var i=r.createElement("div"),n=r.createElement("div");hp.appendChild(i),i.appendChild(n),i.style.position="static",i.style[$s]="translate3d(0,0,1px)",QI=n.offsetParent!==i,hp.removeChild(i)}return r},RH=function(t){for(var r,i;t&&t!==hp;)i=t._gsap,i&&i.uncache&&i.get(t,"x"),i&&!i.scaleX&&!i.scaleY&&i.renderTransform&&(i.scaleX=i.scaleY=1e-4,i.renderTransform(1,i),r?r.push(i):r=[i]),t=t.parentNode;return r},KI=[],$I=[],BH=function(){return Zu.pageYOffset||fl.scrollTop||Aw.scrollTop||hp.scrollTop||0},zH=function(){return Zu.pageXOffset||fl.scrollLeft||Aw.scrollLeft||hp.scrollLeft||0},Ew=function(t){return t.ownerSVGElement||((t.tagName+"").toLowerCase()==="svg"?t:null)},kH=function e(t){if(Zu.getComputedStyle(t).position==="fixed")return!0;if(t=t.parentNode,t&&t.nodeType===1)return e(t)},U4=function e(t,r){if(t.parentNode&&(fl||ZI(t))){var i=Ew(t),n=i?i.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",s=i?r?"rect":"g":"div",a=r!==2?0:100,o=r===3?100:0,l="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",h=fl.createElementNS?fl.createElementNS(n.replace(/^https/,"http"),s):fl.createElement(s);return r&&(i?(n2||(n2=e(t)),h.setAttribute("width",.01),h.setAttribute("height",.01),h.setAttribute("transform","translate("+a+","+o+")"),n2.appendChild(h)):(D1||(D1=e(t),D1.style.cssText=l),h.style.cssText=l+"width:0.1px;height:0.1px;top:"+o+"px;left:"+a+"px",D1.appendChild(h))),h}throw"Need document and parent."},NH=function(t){for(var r=new $0,i=0;i<t.numberOfItems;i++)r.multiply(t.getItem(i).matrix);return r},FH=function(t){var r=t.getCTM(),i;return r||(i=t.style[$s],t.style[$s]="none",t.appendChild(l0),r=l0.getCTM(),t.removeChild(l0),i?t.style[$s]=i:t.style.removeProperty($s.replace(/([A-Z])/g,"-$1").toLowerCase())),r||r3.clone()},UH=function(t,r){var i=Ew(t),n=t===i,s=i?KI:$I,a=t.parentNode,o,l,h,c,u,d;if(t===Zu)return t;if(s.length||s.push(U4(t,1),U4(t,2),U4(t,3)),o=i?n2:D1,i)n?(h=FH(t),c=-h.e/h.a,u=-h.f/h.d,l=r3):t.getBBox?(h=t.getBBox(),l=t.transform?t.transform.baseVal:{},l=l.numberOfItems?l.numberOfItems>1?NH(l):l.getItem(0).matrix:r3,c=l.a*h.x+l.c*h.y,u=l.b*h.x+l.d*h.y):(l=new $0,c=u=0),r&&t.tagName.toLowerCase()==="g"&&(c=u=0),(n?i:a).appendChild(o),o.setAttribute("transform","matrix("+l.a+","+l.b+","+l.c+","+l.d+","+(l.e+c)+","+(l.f+u)+")");else{if(c=u=0,QI)for(l=t.offsetParent,h=t;h&&(h=h.parentNode)&&h!==l&&h.parentNode;)(Zu.getComputedStyle(h)[$s]+"").length>4&&(c=h.offsetLeft,u=h.offsetTop,h=0);if(d=Zu.getComputedStyle(t),d.position!=="absolute"&&d.position!=="fixed")for(l=t.offsetParent;a&&a!==l;)c+=a.scrollLeft||0,u+=a.scrollTop||0,a=a.parentNode;h=o.style,h.top=t.offsetTop-u+"px",h.left=t.offsetLeft-c+"px",h[$s]=d[$s],h[h7]=d[h7],h.position=d.position==="fixed"?"fixed":"absolute",t.parentNode.appendChild(o)}return o},j4=function(t,r,i,n,s,a,o){return t.a=r,t.b=i,t.c=n,t.d=s,t.e=a,t.f=o,t},$0=function(){function e(r,i,n,s,a,o){r===void 0&&(r=1),i===void 0&&(i=0),n===void 0&&(n=0),s===void 0&&(s=1),a===void 0&&(a=0),o===void 0&&(o=0),j4(this,r,i,n,s,a,o)}var t=e.prototype;return t.inverse=function(){var i=this.a,n=this.b,s=this.c,a=this.d,o=this.e,l=this.f,h=i*a-n*s||1e-10;return j4(this,a/h,-n/h,-s/h,i/h,(s*l-a*o)/h,-(i*l-n*o)/h)},t.multiply=function(i){var n=this.a,s=this.b,a=this.c,o=this.d,l=this.e,h=this.f,c=i.a,u=i.c,d=i.b,p=i.d,f=i.e,m=i.f;return j4(this,c*n+d*a,c*s+d*o,u*n+p*a,u*s+p*o,l+f*n+m*a,h+f*s+m*o)},t.clone=function(){return new e(this.a,this.b,this.c,this.d,this.e,this.f)},t.equals=function(i){var n=this.a,s=this.b,a=this.c,o=this.d,l=this.e,h=this.f;return n===i.a&&s===i.b&&a===i.c&&o===i.d&&l===i.e&&h===i.f},t.apply=function(i,n){n===void 0&&(n={});var s=i.x,a=i.y,o=this.a,l=this.b,h=this.c,c=this.d,u=this.e,d=this.f;return n.x=s*o+a*h+u||0,n.y=s*l+a*c+d||0,n},e}();function up(e,t,r,i){if(!e||!e.parentNode||(fl||ZI(e)).documentElement===e)return new $0;var n=RH(e),s=Ew(e),a=s?KI:$I,o=UH(e,r),l=a[0].getBoundingClientRect(),h=a[1].getBoundingClientRect(),c=a[2].getBoundingClientRect(),u=o.parentNode,d=!i&&kH(e),p=new $0((h.left-l.left)/100,(h.top-l.top)/100,(c.left-l.left)/100,(c.top-l.top)/100,l.left+(d?0:zH()),l.top+(d?0:BH()));if(u.removeChild(o),n)for(l=n.length;l--;)h=n[l],h.scaleX=h.scaleY=0,h.renderTransform(1,h);return t?p.inverse():p}/*!
 * MotionPathPlugin 3.12.2
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var jH="x,translateX,left,marginLeft,xPercent".split(","),VH="y,translateY,top,marginTop,yPercent".split(","),GH=Math.PI/180,Gs,JI,gd,u7,V4,CS,HH=function(){return Gs||typeof window<"u"&&(Gs=window.gsap)&&Gs.registerPlugin&&Gs},Vf=function(t,r,i,n){for(var s=r.length,a=n===2?0:n,o=0;o<s;o++)t[a]=parseFloat(r[o][i]),n===2&&(t[a+1]=0),a+=2;return t},Ud=function(t,r,i){return parseFloat(t._gsap.get(t,r,i||"px"))||0},eR=function(t){var r=t[0],i=t[1],n;for(n=2;n<t.length;n+=2)r=t[n]+=r,i=t[n+1]+=i},SS=function(t,r,i,n,s,a,o,l,h){if(o.type==="cubic")r=[r];else{o.fromCurrent!==!1&&r.unshift(Ud(i,n,l),s?Ud(i,s,h):0),o.relative&&eR(r);var c=s?l7:IH;r=[c(r,o.curviness)]}return r=a(tR(r,i,o)),i3(t,i,n,r,"x",l),s&&i3(t,i,s,r,"y",h),Qu(r,o.resolution||(o.curviness===0?20:12))},WH=function(t){return t},qH=/[-+\.]*\d+\.?(?:e-|e\+)?\d*/g,MS=function(t,r,i){var n=up(t),s=0,a=0,o;return(t.tagName+"").toLowerCase()==="svg"?(o=t.viewBox.baseVal,o.width||(o={width:+t.getAttribute("width"),height:+t.getAttribute("height")})):o=r&&t.getBBox&&t.getBBox(),r&&r!=="auto"&&(s=r.push?r[0]*(o?o.width:t.offsetWidth||0):r.x,a=r.push?r[1]*(o?o.height:t.offsetHeight||0):r.y),i.apply(s||a?n.apply({x:s,y:a}):{x:n.e,y:n.f})},c7=function(t,r,i,n){var s=up(t.parentNode,!0,!0),a=s.clone().multiply(up(r)),o=MS(t,i,s),l=MS(r,n,s),h=l.x,c=l.y,u;return a.e=a.f=0,n==="auto"&&r.getTotalLength&&r.tagName.toLowerCase()==="path"&&(u=r.getAttribute("d").match(qH)||[],u=a.apply({x:+u[0],y:+u[1]}),h+=u.x,c+=u.y),u&&(u=a.apply(r.getBBox()),h-=u.x,c-=u.y),a.e=h-o.x,a.f=c-o.y,a},tR=function(t,r,i){var n=i.align,s=i.matrix,a=i.offsetX,o=i.offsetY,l=i.alignOrigin,h=t[0][0],c=t[0][1],u=Ud(r,"x"),d=Ud(r,"y"),p,f,m;return!t||!t.length?i2("M0,0L0,0"):(n&&(n==="self"||(p=u7(n)[0]||r)===r?P1(t,1,0,0,1,u-h,d-c):(l&&l[2]!==!1?Gs.set(r,{transformOrigin:l[0]*100+"% "+l[1]*100+"%"}):l=[Ud(r,"xPercent")/-100,Ud(r,"yPercent")/-100],f=c7(r,p,l,"auto"),m=f.apply({x:h,y:c}),P1(t,f.a,f.b,f.c,f.d,u+f.e-(m.x-f.e),d+f.f-(m.y-f.f)))),s?P1(t,s.a,s.b,s.c,s.d,s.e,s.f):(a||o)&&P1(t,1,0,0,1,a||0,o||0),t)},i3=function(t,r,i,n,s,a){var o=r._gsap,l=o.harness,h=l&&l.aliases&&l.aliases[i],c=h&&h.indexOf(",")<0?h:i,u=t._pt=new JI(t._pt,r,c,0,0,WH,0,o.set(r,c,t));u.u=gd(o.get(r,c,a))||0,u.path=n,u.pp=s,t._props.push(c)},XH=function(t,r){return function(i){return t||r!==1?XI(i,t,r):i}},rR={version:"3.12.2",name:"motionPath",register:function(t,r,i){Gs=t,gd=Gs.utils.getUnit,u7=Gs.utils.toArray,V4=Gs.core.getStyleSaver,CS=Gs.core.reverting||function(){},JI=i},init:function(t,r,i){if(!Gs)return console.warn("Please gsap.registerPlugin(MotionPathPlugin)"),!1;(!(typeof r=="object"&&!r.style)||!r.path)&&(r={path:r});var n=[],s=r,a=s.path,o=s.autoRotate,l=s.unitX,h=s.unitY,c=s.x,u=s.y,d=a[0],p=XH(r.start,"end"in r?r.end:1),f,m;if(this.rawPaths=n,this.target=t,this.tween=i,this.styles=V4&&V4(t,"transform"),(this.rotate=o||o===0)&&(this.rOffset=parseFloat(o)||0,this.radians=!!r.useRadians,this.rProp=r.rotation||"rotation",this.rSet=t._gsap.set(t,this.rProp,this),this.ru=gd(t._gsap.get(t,this.rProp))||0),Array.isArray(a)&&!("closed"in a)&&typeof d!="number"){for(m in d)!c&&~jH.indexOf(m)?c=m:!u&&~VH.indexOf(m)&&(u=m);c&&u?n.push(SS(this,Vf(Vf([],a,c,0),a,u,1),t,c,u,p,r,l||gd(a[0][c]),h||gd(a[0][u]))):c=u=0;for(m in d)m!==c&&m!==u&&n.push(SS(this,Vf([],a,m,2),t,m,0,p,r,gd(a[0][m])))}else f=p(tR(i2(r.path),t,r)),Qu(f,r.resolution),n.push(f),i3(this,t,r.x||"x",f,"x",r.unitX||"px"),i3(this,t,r.y||"y",f,"y",r.unitY||"px")},render:function(t,r){var i=r.rawPaths,n=i.length,s=r._pt;if(r.tween._time||!CS()){for(t>1?t=1:t<0&&(t=0);n--;)_S(i[n],t,!n&&r.rotate,i[n]);for(;s;)s.set(s.t,s.p,s.path[s.pp]+s.u,s.d,t),s=s._next;r.rotate&&r.rSet(r.target,r.rProp,i[0].angle*(r.radians?GH:1)+r.rOffset+r.ru,r,t)}else r.styles.revert()},getLength:function(t){return Qu(i2(t)).totalLength},sliceRawPath:XI,getRawPath:i2,pointsToSegment:l7,stringToRawPath:t3,rawPathToString:YI,transformRawPath:P1,getGlobalMatrix:up,getPositionOnPath:_S,cacheRawPathMeasurements:Qu,convertToPath:function(t,r){return u7(t).map(function(i){return PH(i,r!==!1)})},convertCoordinates:function(t,r,i){var n=up(r,!0,!0).multiply(up(t));return i?n.apply(i):n},getAlignMatrix:c7,getRelativePosition:function(t,r,i,n){var s=c7(t,r,i,n);return{x:s.e,y:s.f}},arrayToRawPath:function(t,r){r=r||{};var i=Vf(Vf([],t,r.x||"x",0),t,r.y||"y",1);return r.relative&&eR(i),[r.type==="cubic"?i:l7(i,r.curviness)]}};HH()&&Gs.registerPlugin(rR);const YH=({width:e,height:t})=>R.jsxs("svg",{width:e,height:t,viewBox:"0 0 107 107",fill:"none",className:"fill-inherit",xmlns:"http://www.w3.org/2000/svg",children:[R.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M68.4315 90.5H82.5V98.3368C81.3175 98.8985 80.5 100.104 80.5 101.5C80.5 103.433 82.067 105 84 105C85.933 105 87.5 103.433 87.5 101.5C87.5 100.104 86.6825 98.8985 85.5 98.3368V90.5H91H92.5V89V83H100.337C100.899 84.1825 102.104 85 103.5 85C105.433 85 107 83.433 107 81.5C107 79.567 105.433 78 103.5 78C102.104 78 100.899 78.8175 100.337 80H91H89.5V81.5V87.5H85.5H84H83H66.875C67.5387 88.4047 68.0674 89.4146 68.4315 90.5ZM61.5179 81H85.5H86.3125L86.7564 80.3194L93.8125 69.5H97.5H98.6273C99.2598 70.4067 100.311 71 101.5 71C103.433 71 105 69.433 105 67.5C105 65.567 103.433 64 101.5 64C99.9145 64 98.5752 65.0543 98.1449 66.5H97.5H93H92.1875L91.7436 67.1806L90.2309 69.5H85.5V65.8551C86.9457 65.4248 88 64.0855 88 62.5C88 60.567 86.433 59 84.5 59C82.567 59 81 60.567 81 62.5C81 63.6894 81.5933 64.7402 82.5 65.3727V71V72.5H84H88.2744L84.6875 78H62.5894C62.3382 79.0498 61.9765 80.0545 61.5179 81ZM59.7147 55.5H72V63V64.3368C70.8175 64.8985 70 66.1038 70 67.5C70 69.433 71.567 71 73.5 71C75.433 71 77 69.433 77 67.5C77 66.1038 76.1825 64.8985 75 64.3368V63V54V52.5H73.5H64.1218C62.8144 53.6641 61.2971 54.5825 59.6367 55.1859C59.6642 55.29 59.6902 55.3947 59.7147 55.5ZM67.2635 48.5H84V52.5V54H85.5H99.3368C99.8985 55.1825 101.104 56 102.5 56C104.433 56 106 54.433 106 52.5C106 50.567 104.433 49 102.5 49C101.104 49 99.8985 49.8175 99.3368 51H87V47V45.5H85.5H68.4605C68.1691 46.5541 67.7653 47.559 67.2635 48.5ZM68.9672 42.5H75.5C75.5417 42.5 75.583 42.4983 75.6238 42.495C76.2559 43.4045 77.3084 44 78.5 44C80.433 44 82 42.433 82 40.5C82 38.567 80.433 37 78.5 37C76.9145 37 75.5752 38.0543 75.1449 39.5H68.8679C68.955 40.1538 69 40.8214 69 41.5C69 41.8361 68.989 42.1696 68.9672 42.5ZM68.3997 33.5H82.9898L89.0854 38.1889L89.4898 38.5H90H97.6273C98.2598 39.4067 99.3106 40 100.5 40C102.433 40 104 38.433 104 36.5C104 34.567 102.433 33 100.5 33C98.9145 33 97.5752 34.0543 97.1449 35.5H90.5102L84.4146 30.8111L84.0102 30.5H83.5H69.7738C69.3953 31.542 68.9346 32.5446 68.3997 33.5ZM70.5045 28H89.5H91V26.5V15.6632C92.1825 15.1015 93 13.8962 93 12.5C93 10.567 91.433 9 89.5 9C87.567 9 86 10.567 86 12.5C86 13.8962 86.8175 15.1015 88 15.6632V25H70.946C70.872 26.0226 70.723 27.0244 70.5045 28ZM69.9481 17H75.3368C75.8985 18.1825 77.1038 19 78.5 19C80.433 19 82 17.433 82 15.5C82 13.567 80.433 12 78.5 12C77.1038 12 75.8985 12.8175 75.3368 14H68.6706C69.1725 14.9579 69.6008 15.9604 69.9481 17Z",fill:"black",className:"fill-inherit"}),R.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.0469 85.76L25.5587 83.6608C26.9621 82.1881 29.2128 81.0148 32.2466 81.5204C34.19 81.8443 35.4337 82.8584 36.1525 84.0264C36.8344 85.1344 37 86.3012 37 87C37 87.8284 36.3284 88.5 35.5 88.5C34.6716 88.5 34 87.8284 34 87C34 86.6988 33.9156 86.1156 33.5975 85.5986C33.3163 85.1416 32.81 84.6557 31.7534 84.4796C29.5273 84.1086 28.0841 85.1449 27.3169 86.2317L26.4682 89.1681C26.1645 90.2186 26 91.3363 26 92.5C26 98.9514 31.0232 104 37 104C40.8875 104 44.3475 101.887 46.3174 98.6154L47.5678 96.5391C47.8981 95.0705 47.4152 93.5365 46.5018 92.6231C46.0494 92.1707 45.5116 91.8882 44.9241 91.8057C44.3425 91.724 43.6064 91.8234 42.7285 92.3112C42.0043 92.7135 41.0911 92.4526 40.6888 91.7284C40.2864 91.0042 40.5474 90.091 41.2715 89.6887C42.6436 88.9265 44.0325 88.651 45.3415 88.8349C46.6447 89.018 47.7631 89.6417 48.6232 90.5018C50.2755 92.1542 51.0448 94.7385 50.4964 97.1898L51.3708 98.4802C52.8144 100.61 55.2454 102 58 102C62.4183 102 66 98.4183 66 94C66 90.1301 63.2492 86.896 59.5946 86.1583L57.2659 85.6883C53.5461 87.8054 48.892 88.0764 45.205 85.772C43.0502 84.4253 41.7266 83.003 40.9511 81.6126C40.1708 80.2135 40 78.9439 40 78C40 77.1716 40.6716 76.5 41.5 76.5C42.3284 76.5 43 77.1716 43 78C43 78.5561 43.0941 79.2958 43.5712 80.1514C44.0532 81.0156 44.9795 82.0933 46.795 83.228C49.9228 85.1829 54.3323 84.6082 57.4191 81.9245L57.7623 81.4527C59.1623 79.5285 60 77.1249 60 74.5C60 71.0779 58.5752 68.028 56.3348 65.9304L54.7452 64.4421C53.4708 63.4344 51.6399 62.6381 49.2121 62.9849C47.8021 63.1863 46.4207 63.9093 45.312 64.7963C44.7646 65.2342 44.3108 65.6909 43.9767 66.1021C43.6261 66.5336 43.4675 66.8408 43.423 66.9743C43.1611 67.7602 42.3116 68.185 41.5257 67.923C40.7398 67.6611 40.315 66.8116 40.577 66.0257C40.7824 65.4091 41.1864 64.7789 41.6483 64.2104C42.1266 63.6216 42.7354 63.0157 43.4379 62.4537C44.8292 61.3406 46.6979 60.3136 48.7879 60.015C51.8893 59.572 54.3339 60.4845 56.0912 61.7083C56.6714 60.602 57 59.3429 57 58C57 57.3374 56.9201 56.6975 56.7707 56.0876C55.6445 56.1572 54.2152 56.0729 52.7529 55.6715C50.806 55.137 48.7039 54.01 47.2519 51.8321C46.7924 51.1428 46.9787 50.2115 47.6679 49.7519C48.3572 49.2924 49.2885 49.4787 49.7481 50.1679C50.6961 51.59 52.094 52.3796 53.5471 52.7785C54.6852 53.0909 55.7979 53.1451 56.6164 53.0915L58.612 52.3663C62.866 50.8203 66 46.5776 66 41.5C66 40.0606 65.7482 38.6892 65.2909 37.4273L65.2463 37.4557C64.3197 38.0409 63.19 38.4597 62.0045 38.6127C59.5967 38.9234 56.7998 38.1283 55.1888 35.2285C54.7864 34.5043 55.0474 33.5911 55.7715 33.1888C56.4957 32.7864 57.4089 33.0474 57.8112 33.7715C58.7002 35.3717 60.1533 35.8266 61.6205 35.6373C62.3725 35.5403 63.0865 35.2716 63.6443 34.9193C63.8671 34.7786 64.047 34.6364 64.1895 34.5014L64.7302 33.7009C64.7481 33.6725 64.7668 33.6448 64.7863 33.6179L65.0132 33.282C66.899 30.4906 68 27.1284 68 23.5C68 13.835 60.165 6 50.5 6C49.3664 6 48.2607 6.10739 47.1917 6.31171L46.3757 6.46768C44.4282 7.29859 43.3936 8.60994 42.9552 10.3638C42.7032 11.3715 42.6041 12.4365 42.713 13.3719C42.8227 14.3146 43.1265 15.0051 43.5607 15.4393C44.1464 16.0251 44.1464 16.9749 43.5607 17.5607C42.9749 18.1464 42.0251 18.1464 41.4393 17.5607C40.3735 16.4949 39.8914 15.0791 39.7331 13.7186C39.5739 12.3509 39.7248 10.9159 40.0447 9.63621C40.5678 7.54398 41.7079 5.84024 43.5016 4.62614C42.0973 3.60185 40.3708 3 38.5 3C33.8056 3 30 6.80557 30 11.5C30 11.876 30.0242 12.2448 30.0709 12.6054L30.7301 17.6986L25.9697 15.7711C24.7407 15.2735 23.4038 15 22 15C16.0232 15 11 20.0486 11 26.5C11 29.7097 12.2532 32.5914 14.2573 34.6678L15.1975 35.6419C17.7198 38.0878 20.7161 38.8998 24.1363 38.0447C25.9685 37.5867 27.2303 36.9446 28.1918 36.0911C29.1579 35.2336 29.9213 34.0739 30.6172 32.4186C30.9383 31.655 31.8176 31.2961 32.5813 31.6172C33.345 31.9382 33.7038 32.8176 33.3828 33.5813C32.5787 35.494 31.5921 37.0843 30.1833 38.3348C28.7698 39.5893 27.0316 40.4132 24.8639 40.9551C21.0315 41.9132 17.4849 41.2166 14.4912 38.9775L13.3044 39.4983C7.1919 42.1809 3 48.1404 3 55C3 60.825 6.01713 65.9924 10.6724 69.0683L11.0011 69.2855C12.2937 68.26 14.0068 67.5 16 67.5C19.0382 67.5 20.8972 68.7759 22.5607 70.4393C23.1465 71.0251 23.1464 71.9749 22.5607 72.5607C21.9749 73.1464 21.0251 73.1464 20.4393 72.5607C19.1029 71.2242 17.9619 70.5 16 70.5C15.0988 70.5 14.27 70.7614 13.5641 71.1626L11.1851 73.6464C9.81146 75.0805 9 76.9574 9 79C9 83.294 12.6785 87 17.5 87C19.1842 87 20.7395 86.5415 22.0469 85.76ZM63.1137 84.2584C62.24 83.7988 61.2969 83.4533 60.3042 83.2417C60.3793 83.1097 60.4329 82.9688 60.4647 82.824C60.9571 82.0979 61.3868 81.3229 61.7457 80.5075C62.5512 78.6771 63 76.6428 63 74.5C63 70.2316 61.2192 66.3939 58.3852 63.7404C59.4095 62.0694 60 60.1036 60 58C60 57.0273 59.8737 56.0841 59.6367 55.1859C65.0899 53.2041 69 47.825 69 41.5C69 39.1476 68.4591 36.926 67.4991 34.9614C69.7094 31.6896 71 27.7455 71 23.5C71 12.1782 61.8218 3 50.5 3C49.1765 3 47.8822 3.12543 46.6285 3.36505C44.5477 1.28586 41.674 0 38.5 0C32.723 0 27.941 4.25966 27.1234 9.80945C27.0421 10.3612 27 10.9257 27 11.5C27 12.0051 27.0326 12.5025 27.0957 12.9904C26.1173 12.5943 25.0854 12.3088 24.0143 12.149C23.3566 12.0508 22.684 12 22 12C14.268 12 8 18.4919 8 26.5C8 29.3792 8.81022 32.0623 10.2074 34.3183C10.7528 35.1989 11.3877 36.0145 12.0988 36.7512C11.1459 37.1694 10.2316 37.6566 9.36274 38.2062C3.72789 41.7703 0 47.9604 0 55C0 60.8284 2.55549 66.0746 6.63296 69.7301C7.37928 70.3992 8.17658 71.015 9.01854 71.5713C8.32246 72.298 7.72713 73.1145 7.2537 74.0005C6.45213 75.5005 6 77.1997 6 79C6 85.0751 11.1487 90 17.5 90C18.4364 90 19.3467 89.8929 20.2183 89.6909C21.4267 89.4108 22.5606 88.9481 23.5861 88.335C23.253 89.4874 23.0546 90.7 23.0098 91.9533C23.0033 92.1347 23 92.317 23 92.5C23 100.508 29.268 107 37 107C40.9145 107 44.4538 105.336 46.9944 102.654C47.709 101.899 48.3446 101.064 48.8874 100.163C49.4721 101.026 50.1762 101.801 50.976 102.466C52.8813 104.048 55.3295 105 58 105C64.0751 105 69 100.075 69 94C69 89.771 66.6135 86.0993 63.1137 84.2584ZM27.6293 46.8908C27.9657 46.1338 28.8522 45.7928 29.6092 46.1293L29 47.5C29.6092 46.1293 29.61 46.1296 29.6108 46.13L29.6124 46.1307L29.616 46.1323L29.6245 46.1362L29.6464 46.1463L29.6753 46.1599L29.7094 46.1763C29.7595 46.2009 29.8257 46.2344 29.9058 46.2776C30.0657 46.3639 30.2818 46.4892 30.5352 46.6582C31.0406 46.9951 31.7036 47.5118 32.3649 48.2466C32.9572 48.9046 33.5405 49.7302 34.0071 50.7414L34.0419 50.6854C34.6197 49.7645 35.4237 48.9152 36.5148 48.3913C37.6246 47.8584 38.9101 47.7212 40.3254 48.0357C41.1341 48.2154 41.644 49.0167 41.4643 49.8254C41.2846 50.6341 40.4833 51.144 39.6746 50.9643C38.8399 50.7788 38.2504 50.8858 37.8133 51.0957C37.3576 51.3145 36.9428 51.7065 36.5831 52.2798C35.8406 53.4633 35.5 55.1599 35.5 56.5C35.5 57.6584 35.8541 59.5 38.1708 60.6584C38.9118 61.0288 39.2121 61.9299 38.8416 62.6708C38.4712 63.4118 37.5701 63.7121 36.8292 63.3416C35.34 62.597 34.3473 61.6372 33.6931 60.6361C33.2642 61.3389 32.764 61.9111 32.2465 62.3711C31.5458 62.994 30.8446 63.3841 30.3123 63.6207C30.0452 63.7394 29.817 63.8211 29.6472 63.875C29.5622 63.902 29.4913 63.9222 29.437 63.9366C29.4099 63.9439 29.3868 63.9497 29.3681 63.9543L29.3434 63.9602L29.3335 63.9624L29.3292 63.9634L29.3273 63.9639C29.3263 63.9641 29.3254 63.9643 29 62.5L29.3254 63.9643C28.5167 64.144 27.7154 63.6341 27.5357 62.8254C27.3572 62.0218 27.8594 61.2256 28.6592 61.0392L28.664 61.0379C28.6757 61.0348 28.7015 61.0277 28.7395 61.0156C28.8158 60.9914 28.9392 60.9481 29.0939 60.8793C29.4054 60.7408 29.8292 60.506 30.2535 60.1289C31.0595 59.4124 32 58.0698 32 55.5C32 52.9162 31.0445 51.2639 30.1351 50.2534C29.6714 49.7382 29.2094 49.3799 28.8711 49.1543C28.7026 49.042 28.5672 48.9642 28.481 48.9177C28.438 48.8945 28.4075 48.8792 28.3917 48.8715L28.3802 48.866C27.6306 48.526 27.2944 47.6443 27.6293 46.8908ZM42.5 23.5C42.5 22.6716 41.8284 22 41 22C40.1716 22 39.5 22.6716 39.5 23.5C39.5 25.7312 40.0588 28.6801 42.4394 31.0607C43.618 32.2393 45.1463 32.9413 46.4113 33.4005C46.4794 33.4253 46.5472 33.4494 46.6145 33.473C45.9328 34.1432 45.3251 35.0152 45.0448 36.1362C44.7426 37.345 44.7204 38.5042 45.0664 39.6286C45.4089 40.7417 46.0736 41.6949 46.9394 42.5607C47.5252 43.1464 48.4749 43.1464 49.0607 42.5607C49.6465 41.9749 49.6465 41.0251 49.0607 40.4393C48.4265 39.8051 48.0912 39.2583 47.9337 38.7464C47.7797 38.2458 47.7575 37.655 47.9553 36.8638C48.2426 35.7146 49.4049 34.9805 50.498 34.4284C51.5936 33.875 51.7846 32.0923 50.3772 31.5274C50.0288 31.3875 49.5686 31.2515 49.1374 31.1241L49.1374 31.1241L49.0218 31.0899C48.5225 30.942 47.9857 30.7805 47.435 30.5806C46.3113 30.1727 45.2749 29.6535 44.5607 28.9393C42.9412 27.3199 42.5 25.2688 42.5 23.5Z",fill:"black",className:"fill-inherit"})]}),QH=({width:e,height:t})=>R.jsxs("svg",{width:e,height:t,viewBox:"0 0 125 107",fill:"none",className:"fill-inherit",xmlns:"http://www.w3.org/2000/svg",children:[R.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M102.792 3H15C8.37258 3 3 8.37259 3 15V67.7053C3 74.3328 8.37258 79.7053 15 79.7053H91.7009C91.6677 80.7351 91.8982 81.7717 92.3923 82.7053L70.6679 82.7053V92.7302C70.6679 93.134 70.9511 94.0547 71.813 95.4418C72.604 96.7149 73.6307 97.9872 74.5056 98.981C76.6857 101.458 75.1319 105.755 71.4757 105.755H47.5698C43.9136 105.755 42.3597 101.458 44.5399 98.981C45.4147 97.9872 46.4414 96.7149 47.2324 95.4418C48.0943 94.0547 48.3775 93.134 48.3775 92.7302V82.7059L15 82.7053C6.71572 82.7053 0 75.9896 0 67.7053V15C0 6.71573 6.71573 0 15 0H102.792C111.077 0 117.792 6.71573 117.792 15V67.7053C117.792 73.4957 114.512 78.5198 109.707 81.0199L107.454 78.7664C111.766 76.947 114.792 72.6796 114.792 67.7053V15C114.792 8.37258 109.42 3 102.792 3ZM51.3775 82.7053H67.6679V92.7302C67.6679 94.8681 69.5363 97.6605 71.2326 99.7551L71.2431 99.7681C71.3211 99.8643 71.3987 99.959 71.4757 100.052C71.7448 100.377 72.007 100.683 72.2537 100.963C72.8463 101.637 72.3727 102.755 71.4757 102.755H47.5698C46.6728 102.755 46.1991 101.637 46.7918 100.963C47.0385 100.683 47.3006 100.377 47.5698 100.052C47.6468 99.959 47.7244 99.8643 47.8023 99.7681L47.8129 99.7551C49.5091 97.6605 51.3775 94.8681 51.3775 92.7302V82.7053Z",fill:"#100F13",className:"fill-inherit"}),R.jsx("path",{d:"M62.8037 52.4116H72.979L76.0533 47.6978H78.0287C78.2888 48.0629 78.7156 48.3009 79.198 48.3009C79.9903 48.3009 80.6326 47.6586 80.6326 46.8663C80.6326 46.074 79.9903 45.4316 79.198 45.4316C78.5523 45.4316 78.0063 45.8581 77.8263 46.4447H75.3745L74.5725 47.6744H72.6513V46.1885C73.2379 46.0084 73.6644 45.4624 73.6644 44.8168C73.6644 44.0245 73.0221 43.3822 72.2298 43.3822C71.4374 43.3822 70.7951 44.0245 70.7951 44.8168C70.7951 45.2992 71.0332 45.7259 71.3982 45.986V48.9275H73.7553L72.3002 51.1585H63.2514C63.1473 51.5974 62.9961 52.0171 62.8037 52.4116Z",fill:"#100F13",className:"fill-inherit"}),R.jsx("path",{d:"M65.6471 56.3056H71.3982V59.5119C70.9199 59.7445 70.5902 60.2351 70.5902 60.8028C70.5902 61.5951 71.2325 62.2374 72.0248 62.2374C72.8172 62.2374 73.4595 61.5951 73.4595 60.8028C73.4595 60.2351 73.1297 59.7444 72.6514 59.5118V56.3056H75.5207V53.2314H78.7268C78.9594 53.7097 79.4501 54.0395 80.0178 54.0395C80.8101 54.0395 81.4524 53.3971 81.4524 52.6048C81.4524 51.8125 80.8101 51.1702 80.0178 51.1702C79.4501 51.1702 78.9594 51.4999 78.7268 51.9783H74.2675V55.0525H71.6149L71.6082 55.0525H64.9966C65.275 55.4296 65.4962 55.8516 65.6471 56.3056Z",fill:"#100F13",className:"fill-inherit"}),R.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M91.4771 55.4913L91.4772 55.4338C91.4772 45.7448 83.6227 37.8902 73.9337 37.8902C64.2463 37.8902 56.3929 45.742 56.3901 55.4286L56.39 55.4862C56.39 65.1752 64.2445 73.0297 73.9336 73.0297C83.6209 73.0297 91.4743 65.178 91.4771 55.4913ZM59.6346 58.1033L59.6385 54.8194L61.8684 55.2695C63.014 55.5007 63.876 56.5163 63.876 57.7287C63.876 59.1143 62.7528 60.2375 61.3672 60.2375C60.8988 60.2375 60.46 60.1096 60.084 59.8854C59.8981 59.3064 59.7474 58.7115 59.6346 58.1033ZM61.0713 62.228C61.1691 62.2343 61.2678 62.2375 61.3672 62.2375C63.8574 62.2375 65.876 60.2188 65.876 57.7287C65.876 56.2713 65.1846 54.9754 64.1119 54.1512C63.5777 53.7407 62.9491 53.4473 62.2641 53.309C62.6617 52.7625 62.9703 52.1427 63.1677 51.4726C63.3296 50.9232 63.4167 50.34 63.4167 49.7357C63.4167 48.7625 63.1908 47.844 62.7905 47.0332C62.7006 46.851 62.6018 46.6743 62.4948 46.5036C63.7393 44.9209 65.3053 43.6028 67.0943 42.6478V45.5753C66.6159 45.8079 66.2862 46.2986 66.2862 46.8663C66.2862 47.6586 66.9285 48.3009 67.7209 48.3009C68.5132 48.3009 69.1555 47.6586 69.1555 46.8663C69.1555 46.2986 68.8258 45.8079 68.3474 45.5753V42.0541C70.0673 41.338 71.9543 40.9426 73.9336 40.9426C81.9657 40.9426 88.477 47.4539 88.4771 55.486C88.449 63.4942 81.9484 69.9774 73.9337 69.9774C68.3556 69.9774 63.511 66.8371 61.0713 62.228ZM60.0469 51.1517C59.8813 51.6826 59.7454 52.2265 59.641 52.7816L59.6401 53.5162L60.6468 52.1324C61.1269 51.4726 61.4167 50.6454 61.4167 49.7357C61.4167 49.5382 61.403 49.3445 61.3767 49.1555L60.0469 51.1517Z",fill:"#100F13",className:"fill-inherit"}),R.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M112.78 62.9336C112.78 68.7612 108.248 73.5304 102.516 73.9093C100.918 72.699 98.8521 72.3955 97.0192 72.9987L94.9541 70.9336H101.78C106.198 70.9336 109.78 67.3518 109.78 62.9336V16.0124C109.78 11.5942 106.198 8.01245 101.78 8.01245H16.0124C11.5941 8.01245 8.01238 11.5942 8.01238 16.0124V62.9336C8.01238 67.3518 11.5941 70.9336 16.0124 70.9336H57.6557C53.7683 66.8991 51.3777 61.4123 51.3777 55.3673C51.3777 46.217 56.8552 38.346 64.7101 34.8543C64.655 34.6432 64.5869 34.4378 64.5066 34.2392C64.4326 34.2976 64.3553 34.3519 64.2763 34.4018C63.9106 34.6328 63.4635 34.7987 62.9941 34.8593C62.0432 34.982 60.9482 34.6691 60.3155 33.5302C60.1814 33.2888 60.2683 32.9844 60.5097 32.8503C60.7511 32.7162 61.0555 32.8032 61.1896 33.0446C61.5817 33.7502 62.2287 33.9497 62.8661 33.8675C63.191 33.8256 63.4996 33.7097 63.7423 33.5563C63.9922 33.3985 64.1319 33.2278 64.1823 33.1017C64.2414 32.9541 64.3629 32.8501 64.5043 32.808C65.2581 31.6489 65.6959 30.2663 65.6959 28.7786C65.6959 24.6901 62.3815 21.3757 58.293 21.3757C57.8138 21.3757 57.3462 21.4211 56.8938 21.5075L56.829 21.5199C56.7781 21.5798 56.7123 21.6284 56.6342 21.6596C55.7545 22.0115 55.2835 22.5885 55.0891 23.3661C54.9832 23.7896 54.9406 24.2403 54.9871 24.6403C55.034 25.0427 55.1653 25.3535 55.3675 25.5556C55.5627 25.7509 55.5627 26.0675 55.3675 26.2627C55.1722 26.458 54.8556 26.458 54.6603 26.2627C54.2477 25.8501 54.0569 25.2975 53.9938 24.7559C53.9305 24.2118 53.9904 23.6377 54.1189 23.1236C54.3486 22.2046 54.8766 21.4754 55.729 20.9877C55.0876 20.461 54.2684 20.146 53.3743 20.146C51.3232 20.146 49.6605 21.8087 49.6605 23.8598C49.6605 24.0238 49.671 24.1848 49.6914 24.3424L49.9111 26.0401L48.3244 25.3976C47.7938 25.1828 47.2166 25.0648 46.611 25.0648C44.0267 25.0648 41.8724 27.2447 41.8724 30.0082C41.8724 31.3846 42.4101 32.6227 43.272 33.5157L43.3904 33.6384C43.4982 33.651 43.6027 33.6987 43.6854 33.7814C44.759 34.855 46.0475 35.2184 47.5145 34.8517C48.2784 34.6607 48.8138 34.3906 49.2252 34.0254C49.6382 33.6589 49.9597 33.167 50.249 32.4787C50.3561 32.2241 50.6492 32.1045 50.9037 32.2115C51.1583 32.3186 51.2779 32.6117 51.1709 32.8662C50.8454 33.6404 50.4496 34.2758 49.8891 34.7733C49.327 35.2722 48.6327 35.6029 47.757 35.8218C46.1534 36.2227 44.6785 35.9027 43.4465 34.9099L42.9544 35.1259C40.3708 36.2597 38.5933 38.7817 38.5933 41.6903C38.5933 44.1599 39.8728 46.3478 41.8412 47.6485L42.0192 47.7661C42.5457 47.2956 43.2822 46.9288 44.1517 46.9288C45.3558 46.9288 46.0903 47.4306 46.7597 48.1C46.9549 48.2952 46.9549 48.6118 46.7597 48.8071C46.5644 49.0023 46.2478 49.0023 46.0526 48.8071C45.4922 48.2467 44.9971 47.9288 44.1517 47.9288C43.3295 47.9288 42.6519 48.4278 42.3133 48.9358C42.2481 49.0337 42.1543 49.1011 42.0504 49.1345L42.0121 49.1745C41.4107 49.8024 41.0526 50.6277 41.0526 51.5278C41.0526 53.4243 42.673 55.0367 44.7664 55.0367C45.4989 55.0367 46.1771 54.8371 46.7481 54.4958L47.9176 53.7968C48.4359 53.0977 49.4051 52.443 50.7921 52.6742C51.0671 52.72 51.3055 52.8007 51.511 52.9063C51.468 53.3008 51.4352 53.6983 51.4129 54.0986C51.2734 53.9094 51.0412 53.7295 50.6277 53.6606C49.6332 53.4948 48.9925 53.9806 48.6666 54.4695C48.6258 54.5306 48.5739 54.5799 48.5153 54.6164L48.2218 55.6319C48.0914 56.083 48.0209 56.5627 48.0209 57.0614C48.0209 59.6851 49.9626 61.7827 52.3705 61.9883C52.4761 62.3307 52.5896 62.6695 52.711 63.0047C49.564 62.9777 47.0209 60.3272 47.0209 57.0614C47.0209 56.9005 47.0271 56.7411 47.0392 56.5835C47.0717 56.1596 47.1472 55.7483 47.2611 55.3542C46.9103 55.5639 46.5284 55.7307 46.1237 55.8469C45.6939 55.9703 45.2383 56.0367 44.7664 56.0367C42.1631 56.0367 40.0526 54.018 40.0526 51.5278C40.0526 50.7086 40.2811 49.9404 40.6803 49.2783C40.8531 48.9917 41.0578 48.7251 41.2899 48.4828C41.0091 48.2973 40.7404 48.0956 40.4852 47.8791C38.7134 46.3761 37.5933 44.1608 37.5933 41.6903C37.5933 38.7228 39.2094 36.1236 41.6297 34.6847C41.9258 34.5087 42.2339 34.35 42.5525 34.2102C42.3141 33.9632 42.0966 33.6946 41.903 33.4075C41.2534 32.4442 40.8724 31.2723 40.8724 30.0082C40.8724 26.7257 43.4417 24.0648 46.611 24.0648C46.9723 24.0648 47.3257 24.0993 47.6685 24.1655C48.0249 24.2342 48.3697 24.3371 48.6997 24.4707C48.6738 24.2707 48.6605 24.0668 48.6605 23.8598C48.6605 23.7044 48.668 23.5508 48.6827 23.3993C48.9141 21.0121 50.9263 19.146 53.3743 19.146C54.6753 19.146 55.8532 19.6731 56.7061 20.5253C57.22 20.4271 57.7505 20.3757 58.293 20.3757C61.5238 20.3757 64.3288 22.199 65.735 24.8729H68.4793C68.7119 24.3945 69.2026 24.0648 69.7702 24.0648C70.5626 24.0648 71.2049 24.7071 71.2049 25.4994C71.2049 26.2917 70.5626 26.9341 69.7702 26.9341C69.2026 26.9341 68.7119 26.6043 68.4793 26.126H66.2687C66.248 26.064 66.2267 26.0023 66.2047 25.9409C66.5227 26.8273 66.6959 27.7827 66.6959 28.7786C66.6959 30.5188 66.1669 32.1355 65.2609 33.4765C65.4147 33.7912 65.5422 34.122 65.6405 34.4657C67.5706 33.7103 69.6309 33.2146 71.7784 33.0214L71.6066 32.8893H65.6236C65.8476 32.4905 66.0401 32.0717 66.1976 31.6361H72.0328L73.7154 32.9304C73.7485 32.9303 73.7816 32.9302 73.8148 32.9302C75.1169 32.9302 76.3932 33.0411 77.6346 33.2541C77.8959 32.9013 78.3153 32.6726 78.788 32.6726C79.4932 32.6726 80.0795 33.1814 80.2 33.8518C89.4811 36.602 96.2519 45.1939 96.2519 55.3673C96.2519 60.8865 94.2591 65.9402 90.9538 69.8483L96.1069 75.0013C97.9131 74.1166 100.156 74.425 101.658 75.9267L123.583 97.8515C125.473 99.7414 125.473 102.806 123.583 104.695C121.693 106.585 118.629 106.585 116.739 104.695L94.8139 82.7706C93.4816 81.4383 93.0885 79.5224 93.6347 77.8457L88.2955 72.5065C87.7879 72.9358 87.261 73.343 86.7162 73.7265L86.9232 73.9336H86.417C82.8248 76.3766 78.4865 77.8044 73.8148 77.8044C69.143 77.8044 64.8048 76.3766 61.2126 73.9336H16.0124C9.93725 73.9336 5.01238 69.0087 5.01238 62.9336V16.0124C5.01238 9.93731 9.93725 5.01245 16.0124 5.01245H101.78C107.855 5.01245 112.78 9.93731 112.78 16.0124V62.9336ZM93.2519 55.3673C93.2519 66.1021 84.5496 74.8044 73.8148 74.8044C63.08 74.8044 54.3777 66.1021 54.3777 55.3673C54.3777 44.6325 63.08 35.9302 73.8148 35.9302C84.5496 35.9302 93.2519 44.6325 93.2519 55.3673Z",fill:"#100F13",className:"fill-inherit"}),R.jsx("path",{d:"M58.8963 78.2394C59.9344 78.2394 60.7759 77.4158 60.7759 76.3997C60.7759 75.3837 59.9344 74.5601 58.8963 74.5601C57.8582 74.5601 57.0166 75.3837 57.0166 76.3997C57.0166 77.4158 57.8582 78.2394 58.8963 78.2394Z",fill:"#100F13",className:"fill-inherit"}),R.jsx("path",{d:"M57.7895 39.6632C57.6239 39.528 57.3832 39.5099 57.196 39.6347C56.9662 39.7878 56.9041 40.0983 57.0573 40.328L57.0798 40.3613L57.1032 40.3953C57.3266 40.1462 57.5554 39.9021 57.7895 39.6632Z",fill:"#100F13",className:"fill-inherit"}),R.jsx("path",{d:"M52.4915 40.5143C52.1722 41.0231 52.0299 41.7418 52.0299 42.3051C52.0299 42.8061 52.1862 43.6114 53.1882 44.1123C53.4352 44.2358 53.5353 44.5362 53.4118 44.7832C53.2883 45.0302 52.9879 45.1303 52.741 45.0068C52.0701 44.6714 51.6544 44.2268 51.4009 43.7735C51.212 44.1303 50.9774 44.4099 50.7347 44.6257C50.458 44.8716 50.1812 45.0256 49.9715 45.1188C49.8663 45.1656 49.7768 45.1976 49.7108 45.2186C49.6777 45.229 49.6504 45.2368 49.6298 45.2423C49.6195 45.2451 49.6108 45.2473 49.6039 45.2489L49.5949 45.2511L49.5915 45.2519L49.59 45.2522L49.5887 45.2525C49.3191 45.3124 49.052 45.1424 48.9921 44.8729C48.9325 44.6047 49.1004 44.3391 49.3674 44.2773L49.3721 44.2761C49.3785 44.2744 49.3908 44.2709 49.4082 44.2654C49.4431 44.2544 49.4976 44.2351 49.5654 44.205C49.7015 44.1445 49.8858 44.0423 50.0703 43.8783C50.4251 43.5629 50.8248 42.9814 50.8248 41.8951C50.8248 40.8042 50.4201 40.1003 50.0308 39.6678C49.8332 39.4482 49.6362 39.2952 49.4911 39.1985C49.4188 39.1503 49.3602 39.1166 49.322 39.096C49.3105 39.0898 49.3009 39.0848 49.2934 39.081L49.2813 39.075L49.2744 39.0716C49.024 38.9586 48.9116 38.6643 49.0233 38.4129C49.1355 38.1606 49.431 38.0469 49.6833 38.1591L49.4802 38.616C49.6833 38.1591 49.6844 38.1595 49.6844 38.1595L49.6856 38.1601L49.6886 38.1615L49.6967 38.1652L49.7205 38.1766C49.7336 38.183 49.7498 38.1911 49.7686 38.2009L49.7969 38.216C49.8597 38.2498 49.9452 38.2994 50.0458 38.3665C50.2466 38.5003 50.5106 38.706 50.7741 38.9988C51.0493 39.3045 51.3204 39.7018 51.5182 40.2029C51.5575 40.1278 51.5995 40.0543 51.6444 39.9828C51.8729 39.6186 52.1875 39.288 52.6104 39.0849C53.0396 38.8788 53.5399 38.8238 54.0978 38.9478C54.3673 39.0077 54.5373 39.2747 54.4774 39.5443C54.4175 39.8139 54.1504 39.9838 53.8808 39.9239C53.5165 39.843 53.2482 39.888 53.0433 39.9864C52.8321 40.0878 52.6472 40.266 52.4915 40.5143Z",fill:"#100F13",className:"fill-inherit"}),R.jsx("path",{d:"M54.3992 28.2785C54.6753 28.2785 54.8992 28.5023 54.8992 28.7785C54.8992 29.5212 55.0845 30.3963 55.7775 31.0892C56.066 31.3778 56.4708 31.589 56.9044 31.7541C57.1178 31.8353 57.3293 31.9021 57.5272 31.9616C57.5783 31.977 57.6301 31.9924 57.6814 32.0075C57.8196 32.0484 57.9544 32.0883 58.0636 32.1254C58.3035 32.2068 58.4544 32.4228 58.4628 32.6587C58.471 32.8861 58.3472 33.0985 58.1423 33.206C57.712 33.4315 57.2591 33.7466 57.1387 34.2284C57.0536 34.5687 57.061 34.8326 57.1315 35.0617C57.2032 35.2945 57.3532 35.5342 57.622 35.803C57.8173 35.9983 57.8173 36.3149 57.622 36.5102C57.4268 36.7054 57.1102 36.7054 56.9149 36.5102C56.5689 36.1641 56.309 35.789 56.1757 35.3558C56.0413 34.9188 56.0487 34.4653 56.1685 33.9859C56.2964 33.4743 56.5998 33.0958 56.9208 32.8197C56.8012 32.7806 56.676 32.7371 56.5486 32.6886C56.0621 32.5034 55.5048 32.2308 55.0704 31.7964C54.1237 30.8497 53.8992 29.6753 53.8992 28.7785C53.8992 28.5023 54.123 28.2785 54.3992 28.2785Z",fill:"#100F13",className:"fill-inherit"}),R.jsx("path",{d:"M74.9057 30.6348H66.4902C66.5821 30.2275 66.6443 29.809 66.6746 29.3817H73.6526V25.5607C73.1742 25.3281 72.8445 24.8374 72.8445 24.2697C72.8445 23.4774 73.4868 22.8351 74.2791 22.8351C75.0715 22.8351 75.7138 23.4774 75.7138 24.2697C75.7138 24.8374 75.3841 25.328 74.9057 25.5606V30.6348Z",fill:"#100F13",className:"fill-inherit"})]}),ZH=({width:e,height:t})=>R.jsxs("svg",{width:e,height:t,viewBox:"0 0 94 94",fill:"none",className:"fill-inherit",xmlns:"http://www.w3.org/2000/svg",children:[R.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M68.7078 49.995C68.7651 50.3024 69.0347 50.5243 69.3474 50.5243H82.2508C83.1966 50.5243 83.8138 51.5172 83.3952 52.3654C83.3312 52.5 82.3538 54.4187 79.5706 56.7526C76.9815 58.9274 72.8324 61.4511 66.456 63.2512C66.1974 63.3242 66.0163 63.5597 66.0163 63.8284C66.0163 63.9719 65.9645 64.1106 65.8704 64.2189L60.3842 70.5405C60.0887 70.881 59.6885 71.1115 59.2451 71.1928C57.4635 71.5195 52.7804 72.3554 52.3199 72.2024C51.9481 72.0793 49.7312 69.9553 48.2236 68.4822C47.435 67.7118 46.1727 67.7118 45.3842 68.4823C43.8766 69.9555 41.6598 72.0796 41.288 72.2027C40.8256 72.3557 36.1441 71.5199 34.3629 71.1931C33.9194 71.1118 33.5191 70.8812 33.2236 70.5406L27.7397 64.2193C27.6457 64.1109 27.5939 63.9722 27.5939 63.8286C27.5939 63.5599 27.4139 63.3247 27.1553 63.2517C25.3444 62.7403 23.7113 62.1753 22.2449 61.5712C16.6922 59.2898 13.4993 56.5156 11.8216 54.6082C10.7189 53.3537 10.2676 52.4771 10.2122 52.3694L10.2103 52.3657C9.79247 51.5171 10.4101 50.5246 11.3559 50.5246H24.2596C24.5722 50.5246 24.842 50.3027 24.8991 49.9953C25.1967 48.4029 25.9108 44.6067 26.6707 40.5731C27.4168 36.6035 28.2134 32.4057 28.7077 29.8619C28.8703 29.0155 29.0007 28.3516 29.0877 27.9341C29.2182 27.2818 29.4563 26.6658 29.7744 26.1045C30.0949 25.5478 30.4932 25.0412 30.9555 24.5987C31.8756 23.7136 33.0337 23.0748 34.3064 22.7005C35.1532 22.4519 36.055 22.3218 36.9797 22.3218C38.6597 22.3218 40.4221 22.7552 42.0427 23.7134C42.9446 24.2472 43.6518 24.5826 44.2125 24.7948C44.7711 25.0047 45.1808 25.096 45.5218 25.137C45.7508 25.1643 45.9475 25.1735 46.1581 25.1735C46.2532 25.1735 46.3504 25.1714 46.452 25.1692C46.563 25.1668 46.6792 25.1643 46.8035 25.1643C47.053 25.1643 47.3414 25.1598 47.671 25.1324C47.9983 25.1004 48.369 25.048 48.7673 24.9544C49.5684 24.7673 50.4977 24.4205 51.5048 23.7498C52.3012 23.2227 53.1435 22.8372 53.995 22.5862C54.8511 22.3376 55.7186 22.2212 56.5677 22.2212C57.9617 22.2212 59.3076 22.5337 60.4954 23.1018C61.6856 23.6698 62.7293 24.4979 63.4755 25.552C63.9768 26.2524 64.3452 27.0578 64.5238 27.9339C64.6061 28.3513 64.7366 29.0152 64.9014 29.8616C65.0662 30.7102 65.2631 31.7437 65.4804 32.889C65.9177 35.1795 66.4373 37.9287 66.9362 40.5728V40.5774C67.6962 44.6064 68.4103 48.4026 68.7078 49.995ZM30.6448 33.3659C30.2099 35.654 29.688 38.4009 29.1891 41.0474C29.0371 41.8575 29.6578 42.6059 30.482 42.6059H63.1262C63.9502 42.6059 64.5741 41.8569 64.4187 41.0477C63.668 37.0781 62.8738 32.8803 62.3839 30.3479C62.2215 29.5038 62.0909 28.842 62.0108 28.4429V28.4405C61.9329 28.0618 61.7933 27.7013 61.5988 27.3613C61.4066 27.0214 61.1548 26.702 60.8504 26.4054C60.2439 25.8167 59.429 25.3445 58.509 25.0639C57.8956 24.8768 57.2386 24.7764 56.568 24.7764C55.9547 24.7764 55.3322 24.8609 54.7187 25.0411C54.1075 25.2191 53.5056 25.4929 52.9311 25.8761C51.9721 26.5149 51.0383 26.9369 50.18 27.213C49.3261 27.489 48.5457 27.6191 47.9003 27.6738C47.47 27.7148 47.097 27.7217 46.804 27.7217C46.7137 27.7205 46.6123 27.7224 46.4998 27.7245C46.3956 27.7264 46.2818 27.7286 46.1586 27.7286C45.8886 27.7286 45.5635 27.7194 45.2019 27.6738C44.8402 27.6283 44.4419 27.5484 43.9979 27.4183C43.1143 27.1581 42.0661 26.6973 40.7363 25.9125C39.5231 25.1962 38.2209 24.8767 36.9803 24.8767C35.9594 24.8767 34.9845 25.0957 34.1605 25.479C33.332 25.8623 32.6636 26.4053 32.2127 27.0417C31.9106 27.466 31.7023 27.9292 31.597 28.4402V28.4426C31.5374 28.7394 31.4513 29.1814 31.3432 29.7356C31.306 29.9267 31.2662 30.1311 31.2239 30.3476C31.1185 30.8954 30.9985 31.5211 30.8673 32.2059C30.7963 32.5762 30.722 32.9639 30.6448 33.3659ZM69.6714 59.4926C74.8373 57.4873 77.8196 55.0781 79.4378 53.3807C79.548 53.2657 79.4656 53.0795 79.3063 53.0795H16.3798C15.4237 53.0795 14.9557 54.184 15.6873 54.7997C18.1661 56.878 22.3683 59.4377 29.2371 61.1625C33.8171 62.31 39.5802 63.0858 46.8038 63.0858C57.1515 63.0858 64.5054 61.4934 69.6714 59.4926Z",fill:"#100F13",className:"fill-inherit"}),R.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M93.3038 46.7212C93.3038 72.4024 72.4851 93.2212 46.8038 93.2212C21.1226 93.2212 0.303833 72.4024 0.303833 46.7212C0.303833 21.04 21.1226 0.221191 46.8038 0.221191C72.4851 0.221191 93.3038 21.04 93.3038 46.7212ZM90.3038 46.7212C90.3038 70.7456 70.8282 90.2212 46.8038 90.2212C22.7794 90.2212 3.30383 70.7456 3.30383 46.7212C3.30383 22.6968 22.7794 3.22119 46.8038 3.22119C70.8282 3.22119 90.3038 22.6968 90.3038 46.7212Z",fill:"#100F13",className:"fill-inherit"})]}),KH=()=>R.jsxs("svg",{width:"1000",height:"1000",viewBox:"0 0 1991 1991",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[R.jsxs("g",{clipPath:"url(#clip0_759_511)",children:[R.jsx("path",{d:"M1599.29 788.928C1599.84 790.5 1600.36 792.081 1600.85 793.673L1600.37 793.821C1600.62 794.615 1600.86 795.41 1601.1 796.209C1601.33 797.007 1601.56 797.806 1601.78 798.606L1602.27 798.472C1602.71 800.078 1603.13 801.688 1603.53 803.303L1603.05 803.422C1603.44 805.031 1603.81 806.645 1604.16 808.262L1604.65 808.158C1604.99 809.781 1605.31 811.409 1605.61 813.04L1605.12 813.13C1605.42 814.76 1605.69 816.394 1605.94 818.032L1606.43 817.957C1606.68 819.6 1606.9 821.247 1607.1 822.897L1606.61 822.957C1606.8 824.602 1606.98 826.251 1607.13 827.904L1607.62 827.859C1607.77 829.509 1607.9 831.162 1608 832.819L1607.5 832.849C1607.6 834.499 1607.68 836.153 1607.73 837.81L1608.23 837.795C1608.28 839.456 1608.31 841.121 1608.32 842.789L1607.82 842.791C1607.82 844.443 1607.8 846.098 1607.76 847.756L1608.26 847.768C1608.22 849.421 1608.16 851.077 1608.07 852.735L1607.57 852.709C1607.48 854.363 1607.37 856.019 1607.24 857.678L1607.74 857.718C1607.61 859.376 1607.45 861.037 1607.28 862.7L1606.78 862.647C1606.6 864.28 1606.41 865.915 1606.19 867.553L1606.69 867.619C1606.47 869.261 1606.23 870.905 1605.97 872.551L1605.47 872.472C1605.21 874.114 1604.93 875.758 1604.63 877.404L1605.12 877.495C1604.82 879.116 1604.5 880.739 1604.16 882.364L1603.67 882.262C1603.34 883.873 1602.98 885.485 1602.6 887.1L1603.09 887.213C1602.71 888.831 1602.32 890.451 1601.9 892.072L1601.41 891.947C1601 893.555 1600.57 895.164 1600.11 896.774L1600.59 896.91C1600.15 898.489 1599.68 900.071 1599.2 901.653L1598.72 901.507C1598.24 903.086 1597.74 904.666 1597.22 906.247L1597.7 906.403C1597.18 907.987 1596.64 909.573 1596.08 911.159L1595.61 910.994C1595.07 912.548 1594.51 914.103 1593.92 915.659L1594.39 915.834C1593.82 917.375 1593.23 918.916 1592.62 920.459L1592.15 920.275C1591.54 921.814 1590.92 923.355 1590.28 924.895L1590.74 925.088C1590.09 926.631 1589.43 928.176 1588.76 929.72L1588.3 929.52C1587.64 931.018 1586.97 932.518 1586.28 934.018L1586.73 934.226C1586.05 935.723 1585.34 937.22 1584.62 938.718L1584.17 938.502C1583.46 939.997 1582.72 941.492 1581.97 942.988L1582.42 943.212C1581.67 944.708 1580.91 946.204 1580.13 947.7L1579.68 947.469C1578.93 948.917 1578.16 950.364 1577.37 951.812L1577.81 952.05C1577.03 953.5 1576.23 954.95 1575.42 956.399L1574.98 956.155C1574.17 957.602 1573.34 959.05 1572.5 960.498L1572.93 960.749C1572.09 962.195 1571.24 963.642 1570.37 965.088L1569.94 964.83C1569.1 966.23 1568.25 967.63 1567.38 969.029L1567.8 969.293C1566.94 970.694 1566.05 972.095 1565.16 973.495L1564.74 973.226C1563.85 974.625 1562.94 976.024 1562.02 977.422L1562.44 977.696C1561.52 979.096 1560.58 980.496 1559.64 981.895L1559.22 981.615C1558.31 982.968 1557.38 984.321 1556.44 985.674L1556.85 985.959C1555.91 987.312 1554.96 988.664 1554 990.015L1553.59 989.724C1552.63 991.074 1551.65 992.423 1550.67 993.771L1551.07 994.066C1550.08 995.416 1549.08 996.765 1548.07 998.114L1547.67 997.814C1546.68 999.13 1545.69 1000.45 1544.68 1001.76L1545.07 1002.07C1544.07 1003.37 1543.06 1004.67 1542.04 1005.97L1541.64 1005.67C1540.62 1006.97 1539.59 1008.27 1538.55 1009.57L1538.94 1009.88C1537.89 1011.18 1536.84 1012.48 1535.77 1013.78L1535.38 1013.46C1534.33 1014.74 1533.26 1016.03 1532.19 1017.31L1532.57 1017.63C1531.52 1018.89 1530.46 1020.14 1529.38 1021.4L1529 1021.07C1528.51 1021.65 1528.02 1022.22 1527.52 1022.79C1526.94 1023.47 1526.35 1024.15 1525.76 1024.83L1526.13 1025.16C1525.04 1026.41 1523.94 1027.66 1522.82 1028.91L1522.45 1028.58C1521.34 1029.83 1520.22 1031.07 1519.08 1032.32L1519.45 1032.66C1518.35 1033.88 1517.23 1035.09 1516.11 1036.31L1515.74 1035.97C1514.62 1037.18 1513.5 1038.38 1512.37 1039.59L1512.73 1039.93C1511.59 1041.13 1510.45 1042.34 1509.3 1043.54L1508.94 1043.19C1507.78 1044.4 1506.62 1045.6 1505.45 1046.8L1505.81 1047.15C1504.64 1048.34 1503.46 1049.54 1502.28 1050.73L1501.92 1050.38C1500.77 1051.54 1499.61 1052.7 1498.44 1053.86L1498.79 1054.22C1497.62 1055.38 1496.44 1056.53 1495.25 1057.69L1494.9 1057.33C1493.71 1058.49 1492.52 1059.64 1491.31 1060.8L1491.66 1061.16C1490.46 1062.31 1489.24 1063.47 1488.02 1064.62L1487.68 1064.26C1486.47 1065.4 1485.25 1066.54 1484.02 1067.68L1484.36 1068.04C1483.16 1069.16 1481.95 1070.27 1480.73 1071.39L1480.39 1071.02C1479.18 1072.13 1477.95 1073.24 1476.72 1074.35L1477.05 1074.72C1475.82 1075.83 1474.58 1076.94 1473.33 1078.05L1473 1077.68C1471.75 1078.78 1470.49 1079.89 1469.23 1080.99L1469.56 1081.37C1468.31 1082.47 1467.05 1083.56 1465.78 1084.65L1465.45 1084.27C1464.21 1085.34 1462.96 1086.41 1461.7 1087.48L1462.03 1087.86C1460.77 1088.93 1459.5 1090 1458.23 1091.06L1457.91 1090.68C1456.64 1091.74 1455.36 1092.81 1454.07 1093.87L1454.39 1094.25C1453.1 1095.32 1451.81 1096.38 1450.51 1097.44L1450.19 1097.05C1449.59 1097.54 1448.99 1098.03 1448.38 1098.52C1447.69 1099.08 1446.99 1099.64 1446.3 1100.2L1446.61 1100.59C1445.33 1101.62 1444.04 1102.64 1442.75 1103.67L1442.44 1103.28C1441.14 1104.3 1439.85 1105.32 1438.54 1106.34L1438.85 1106.74C1437.54 1107.76 1436.23 1108.78 1434.91 1109.8L1434.6 1109.4C1433.28 1110.42 1431.96 1111.43 1430.63 1112.45L1430.93 1112.85C1429.6 1113.86 1428.26 1114.87 1426.91 1115.88L1426.61 1115.48C1425.3 1116.47 1423.99 1117.45 1422.66 1118.44L1422.96 1118.84C1421.64 1119.82 1420.3 1120.8 1418.97 1121.78L1418.67 1121.38C1417.34 1122.36 1416 1123.33 1414.65 1124.31L1414.94 1124.71C1413.59 1125.69 1412.24 1126.66 1410.88 1127.63L1410.59 1127.23C1409.23 1128.2 1407.86 1129.17 1406.49 1130.14L1406.78 1130.54C1405.43 1131.5 1404.07 1132.45 1402.71 1133.4L1402.42 1132.99C1401.07 1133.93 1399.72 1134.87 1398.36 1135.81L1398.64 1136.22C1397.28 1137.16 1395.91 1138.09 1394.54 1139.03L1394.26 1138.62C1392.88 1139.55 1391.51 1140.48 1390.12 1141.41L1390.4 1141.83C1389.02 1142.76 1387.63 1143.69 1386.23 1144.61L1385.95 1144.2C1384.57 1145.12 1383.17 1146.04 1381.77 1146.96L1382.04 1147.38C1380.67 1148.28 1379.29 1149.18 1377.9 1150.08L1377.63 1149.66C1376.25 1150.56 1374.86 1151.45 1373.46 1152.35L1373.73 1152.77C1372.34 1153.66 1370.94 1154.55 1369.53 1155.45L1369.26 1155.02C1367.86 1155.91 1366.45 1156.8 1365.03 1157.69L1365.3 1158.11C1363.88 1159 1362.46 1159.88 1361.04 1160.77L1360.77 1160.34C1359.37 1161.21 1357.95 1162.08 1356.53 1162.95L1356.8 1163.38C1355.39 1164.24 1353.98 1165.09 1352.56 1165.95L1352.31 1165.52C1350.89 1166.38 1349.47 1167.23 1348.05 1168.08L1348.31 1168.51C1346.88 1169.36 1345.45 1170.21 1344.02 1171.06L1343.76 1170.63C1342.33 1171.48 1340.89 1172.32 1339.45 1173.17L1339.7 1173.6C1338.26 1174.44 1336.81 1175.29 1335.36 1176.12L1335.11 1175.69C1333.68 1176.52 1332.25 1177.34 1330.81 1178.16L1331.06 1178.6C1329.63 1179.41 1328.19 1180.23 1326.75 1181.05L1326.5 1180.61C1325.06 1181.42 1323.62 1182.24 1322.17 1183.05L1322.41 1183.48C1320.96 1184.29 1319.51 1185.1 1318.05 1185.91L1317.8 1185.47C1316.35 1186.27 1314.88 1187.08 1313.42 1187.88L1313.66 1188.32C1312.19 1189.12 1310.72 1189.92 1309.24 1190.72L1309 1190.28C1307.56 1191.06 1306.1 1191.84 1304.65 1192.62L1304.88 1193.06C1303.43 1193.84 1301.97 1194.61 1300.5 1195.39L1300.27 1194.94C1298.8 1195.72 1297.33 1196.49 1295.86 1197.26L1296.09 1197.7C1294.62 1198.47 1293.14 1199.24 1291.66 1200L1291.43 1199.56C1289.95 1200.32 1288.47 1201.09 1286.98 1201.85L1287.21 1202.29C1285.72 1203.05 1284.23 1203.81 1282.73 1204.57L1282.51 1204.12C1281.04 1204.86 1279.56 1205.6 1278.09 1206.34L1278.31 1206.79C1276.83 1207.52 1275.35 1208.26 1273.86 1208.99L1273.64 1208.55C1272.16 1209.28 1270.67 1210.01 1269.18 1210.74L1269.4 1211.19C1267.9 1211.92 1266.41 1212.65 1264.91 1213.37L1264.69 1212.92C1263.19 1213.64 1261.69 1214.37 1260.18 1215.09L1260.39 1215.54C1258.89 1216.26 1257.37 1216.98 1255.86 1217.69L1255.65 1217.24C1254.15 1217.94 1252.66 1218.65 1251.16 1219.35L1251.37 1219.8C1249.88 1220.5 1248.38 1221.19 1246.87 1221.89L1246.66 1221.43C1245.16 1222.13 1243.65 1222.82 1242.14 1223.51L1242.35 1223.97C1240.84 1224.66 1239.33 1225.34 1237.81 1226.03L1237.6 1225.57C1236.08 1226.26 1234.56 1226.94 1233.04 1227.62L1233.24 1228.08C1231.72 1228.76 1230.19 1229.44 1228.66 1230.11L1228.46 1229.66C1226.94 1230.32 1225.43 1230.99 1223.91 1231.65L1224.11 1232.11C1222.59 1232.77 1221.08 1233.43 1219.56 1234.08L1219.36 1233.62C1217.84 1234.28 1216.32 1234.93 1214.79 1235.58L1214.99 1236.04C1213.46 1236.7 1211.93 1237.34 1210.39 1237.99L1210.2 1237.53C1208.67 1238.18 1207.13 1238.82 1205.59 1239.46L1205.78 1239.92C1204.24 1240.56 1202.7 1241.2 1201.15 1241.84L1200.96 1241.38C1199.43 1242.01 1197.89 1242.64 1196.35 1243.27L1196.54 1243.73C1195.01 1244.35 1193.48 1244.97 1191.94 1245.59L1191.76 1245.13C1190.22 1245.75 1188.68 1246.36 1187.14 1246.97L1187.33 1247.44C1185.78 1248.05 1184.24 1248.66 1182.69 1249.27L1182.51 1248.8C1180.96 1249.41 1179.41 1250.02 1177.86 1250.62L1178.04 1251.09C1176.49 1251.69 1174.93 1252.29 1173.37 1252.89L1173.19 1252.42C1171.64 1253.02 1170.08 1253.61 1168.51 1254.21L1168.69 1254.67C1167.15 1255.26 1165.6 1255.84 1164.05 1256.42L1163.88 1255.95C1162.33 1256.53 1160.78 1257.11 1159.22 1257.69L1159.4 1258.16C1157.84 1258.73 1156.29 1259.3 1154.72 1259.88L1154.55 1259.41C1152.99 1259.98 1151.43 1260.54 1149.87 1261.11L1150.04 1261.58C1148.47 1262.14 1146.9 1262.71 1145.33 1263.27L1145.16 1262.8C1143.59 1263.36 1142.02 1263.92 1140.44 1264.47L1140.61 1264.94C1139.04 1265.49 1137.48 1266.04 1135.91 1266.59L1135.75 1266.11C1134.19 1266.66 1132.62 1267.2 1131.06 1267.74L1131.22 1268.21C1129.65 1268.75 1128.08 1269.28 1126.51 1269.81L1126.35 1269.34C1124.78 1269.87 1123.21 1270.4 1121.63 1270.93L1121.79 1271.41C1120.21 1271.93 1118.63 1272.46 1117.05 1272.98L1116.89 1272.51C1115.31 1273.03 1113.73 1273.55 1112.14 1274.07L1112.3 1274.54C1110.71 1275.06 1109.12 1275.58 1107.53 1276.09L1107.38 1275.61C1105.81 1276.12 1104.23 1276.62 1102.66 1277.12L1102.81 1277.6C1101.23 1278.1 1099.65 1278.6 1098.07 1279.09L1097.92 1278.62C1096.34 1279.11 1094.76 1279.61 1093.17 1280.1L1093.32 1280.57C1091.73 1281.07 1090.14 1281.55 1088.55 1282.04L1088.4 1281.56C1086.81 1282.05 1085.22 1282.53 1083.62 1283.01L1083.77 1283.49C1082.17 1283.97 1080.57 1284.45 1078.97 1284.92L1078.83 1284.44C1078.03 1284.68 1077.23 1284.92 1076.42 1285.15C1075.98 1285.29 1075.53 1285.42 1075.08 1285.55C1074.73 1285.65 1074.37 1285.76 1074.02 1285.86L1074.16 1286.34C1072.56 1286.81 1070.96 1287.27 1069.35 1287.74L1069.22 1287.26C1068.6 1287.43 1067.98 1287.61 1067.37 1287.79C1066.38 1288.07 1065.4 1288.35 1064.41 1288.63L1064.55 1289.11C1062.95 1289.57 1061.35 1290.02 1059.75 1290.47L1059.62 1289.99C1058.02 1290.43 1056.42 1290.88 1054.82 1291.32L1054.95 1291.8C1053.36 1292.24 1051.76 1292.68 1050.16 1293.12L1050.03 1292.63C1048.43 1293.07 1046.84 1293.5 1045.24 1293.93L1045.37 1294.41C1043.76 1294.84 1042.15 1295.27 1040.53 1295.69L1040.41 1295.21C1038.79 1295.64 1037.18 1296.06 1035.57 1296.48L1035.69 1296.96C1034.08 1297.38 1032.47 1297.79 1030.86 1298.21L1030.73 1297.72C1029.12 1298.13 1027.51 1298.54 1025.9 1298.95L1026.03 1299.43C1024.42 1299.84 1022.81 1300.24 1021.2 1300.63L1021.08 1300.15C1019.47 1300.55 1017.87 1300.94 1016.26 1301.33L1016.38 1301.82C1014.77 1302.21 1013.15 1302.6 1011.54 1302.98L1011.42 1302.5C1009.8 1302.88 1008.17 1303.27 1006.55 1303.65L1006.67 1304.14C1005.04 1304.52 1003.42 1304.9 1001.8 1305.27L1001.68 1304.78C1000.06 1305.16 998.441 1305.53 996.821 1305.89L996.932 1306.38C995.312 1306.75 993.692 1307.11 992.074 1307.47L991.965 1306.98C990.348 1307.34 988.731 1307.7 987.116 1308.05L987.222 1308.54C985.606 1308.89 983.991 1309.24 982.377 1309.59L982.272 1309.1C980.639 1309.45 979.006 1309.79 977.375 1310.14L977.478 1310.63C975.843 1310.97 974.209 1311.31 972.577 1311.64L972.476 1311.15C970.844 1311.49 969.213 1311.82 967.584 1312.15L967.683 1312.64C966.052 1312.97 964.423 1313.29 962.796 1313.61L962.699 1313.12C961.072 1313.44 959.446 1313.76 957.821 1314.08L957.916 1314.57C956.291 1314.88 954.667 1315.19 953.044 1315.5L952.951 1315.01C951.317 1315.31 949.684 1315.62 948.052 1315.92L948.143 1316.41C946.498 1316.72 944.855 1317.02 943.213 1317.31L943.125 1316.82C942.261 1316.97 941.398 1317.13 940.535 1317.28C939.758 1317.42 938.981 1317.56 938.205 1317.7L938.292 1318.19C936.653 1318.48 935.015 1318.76 933.379 1319.04L933.294 1318.55C931.658 1318.83 930.024 1319.11 928.392 1319.38L928.474 1319.87C926.841 1320.15 925.209 1320.42 923.579 1320.68L923.498 1320.19C921.863 1320.46 920.228 1320.72 918.596 1320.98L918.674 1321.47C917.021 1321.74 915.369 1322 913.719 1322.25L913.642 1321.76C911.993 1322.01 910.345 1322.26 908.698 1322.51L908.773 1323.01C907.126 1323.25 905.48 1323.5 903.837 1323.74L903.764 1323.24C902.121 1323.48 900.48 1323.72 898.841 1323.95L898.911 1324.44C897.27 1324.68 895.632 1324.9 893.995 1325.13L893.927 1324.63C892.289 1324.86 890.653 1325.08 889.019 1325.3L889.085 1325.79C887.424 1326.01 885.765 1326.23 884.107 1326.44L884.043 1325.95C882.387 1326.16 880.732 1326.37 879.079 1326.57L879.14 1327.07C877.486 1327.27 875.834 1327.47 874.185 1327.67L874.125 1327.17C872.476 1327.37 870.829 1327.56 869.184 1327.75L869.241 1328.25C867.595 1328.44 865.951 1328.62 864.309 1328.81L864.254 1328.31C862.612 1328.49 860.973 1328.67 859.336 1328.84L859.389 1329.34C857.721 1329.51 856.056 1329.69 854.393 1329.86L854.343 1329.36C852.68 1329.53 851.02 1329.69 849.361 1329.85L849.409 1330.35C847.75 1330.51 846.093 1330.67 844.439 1330.82L844.393 1330.32C842.739 1330.47 841.087 1330.62 839.438 1330.77L839.481 1331.26C837.831 1331.41 836.183 1331.55 834.537 1331.68L834.496 1331.19C832.85 1331.32 831.207 1331.45 829.566 1331.58L829.605 1332.08C827.932 1332.21 826.262 1332.34 824.594 1332.46L824.558 1331.96C822.891 1332.08 821.226 1332.2 819.564 1332.32L819.599 1332.82C817.936 1332.93 816.275 1333.04 814.618 1333.15L814.586 1332.65C812.929 1332.75 811.274 1332.85 809.622 1332.95L809.652 1333.45C807.999 1333.55 806.349 1333.64 804.701 1333.73L804.674 1333.23C803.022 1333.32 801.372 1333.41 799.724 1333.49L799.749 1333.99C798.073 1334.07 796.4 1334.15 794.73 1334.22L794.708 1333.72C793.039 1333.79 791.372 1333.86 789.709 1333.93L789.728 1334.43C788.064 1334.49 786.402 1334.56 784.743 1334.61L784.726 1334.11C783.068 1334.17 781.413 1334.22 779.76 1334.27L779.775 1334.77C778.122 1334.82 776.472 1334.86 774.824 1334.9L774.812 1334.4C773.15 1334.44 771.491 1334.48 769.835 1334.51L769.844 1335.01C768.168 1335.04 766.494 1335.07 764.824 1335.09L764.817 1334.59C763.148 1334.61 761.481 1334.63 759.818 1334.65L759.822 1335.15C758.158 1335.16 756.497 1335.17 754.84 1335.18L754.838 1334.68C753.182 1334.68 751.528 1334.68 749.878 1334.68L749.877 1335.18C748.226 1335.17 746.578 1335.17 744.934 1335.15L744.937 1334.65C743.263 1334.64 741.592 1334.62 739.924 1334.6L739.917 1335.1C738.243 1335.08 736.571 1335.05 734.903 1335.02L734.913 1334.52C733.246 1334.49 731.583 1334.46 729.923 1334.42L729.911 1334.92C728.25 1334.88 726.593 1334.83 724.94 1334.78L724.955 1334.28C723.302 1334.23 721.653 1334.18 720.008 1334.12L719.991 1334.62C718.331 1334.56 716.675 1334.5 715.023 1334.43L715.044 1333.93C713.367 1333.86 711.694 1333.79 710.025 1333.71L710.002 1334.21C708.332 1334.13 706.666 1334.04 705.004 1333.95L705.031 1333.46C703.37 1333.37 701.713 1333.27 700.06 1333.18L700.03 1333.68C698.377 1333.58 696.727 1333.47 695.081 1333.37L695.114 1332.87C693.469 1332.76 691.829 1332.65 690.192 1332.53L690.157 1333.03C688.479 1332.91 686.805 1332.79 685.136 1332.66L685.174 1332.16C683.506 1332.03 681.841 1331.89 680.181 1331.75L680.139 1332.25C678.478 1332.11 676.822 1331.97 675.17 1331.82L675.215 1331.32C673.564 1331.17 671.918 1331.02 670.276 1330.86L670.228 1331.35C668.585 1331.19 666.947 1331.03 665.313 1330.86L665.365 1330.36C663.699 1330.19 662.039 1330.01 660.383 1329.83L660.328 1330.33C658.661 1330.14 656.999 1329.95 655.342 1329.76L655.4 1329.26C653.744 1329.07 652.093 1328.87 650.447 1328.66L650.385 1329.16C648.738 1328.95 647.096 1328.74 645.459 1328.53L645.524 1328.03C643.888 1327.82 642.257 1327.6 640.631 1327.37L640.563 1327.87C638.906 1327.64 637.255 1327.4 635.609 1327.16L635.681 1326.67C634.021 1326.43 632.367 1326.18 630.718 1325.92L630.642 1326.42C628.992 1326.17 627.347 1325.91 625.709 1325.64L625.788 1325.15C624.151 1324.89 622.519 1324.62 620.892 1324.34L620.809 1324.83C619.181 1324.56 617.56 1324.28 615.944 1323.99L616.031 1323.5C614.383 1323.21 612.741 1322.91 611.105 1322.61L611.014 1323.1C609.363 1322.8 607.718 1322.49 606.08 1322.17L606.175 1321.68C604.537 1321.36 602.907 1321.04 601.282 1320.71L601.183 1321.2C599.557 1320.87 597.937 1320.54 596.324 1320.2L596.427 1319.71C594.815 1319.37 593.209 1319.03 591.61 1318.68L591.503 1319.17C589.859 1318.81 588.223 1318.44 586.592 1318.07L586.704 1317.58C585.07 1317.21 583.443 1316.83 581.823 1316.44L581.707 1316.93C580.086 1316.55 578.471 1316.15 576.864 1315.76L576.984 1315.27C575.378 1314.88 573.779 1314.47 572.187 1314.06L572.063 1314.55C570.458 1314.14 568.861 1313.72 567.272 1313.3L567.4 1312.81C565.773 1312.38 564.154 1311.94 562.542 1311.49L562.409 1311.98C560.796 1311.53 559.19 1311.08 557.593 1310.62L557.731 1310.14C556.135 1309.68 554.546 1309.21 552.966 1308.74L552.823 1309.22C551.241 1308.75 549.667 1308.27 548.101 1307.79L548.248 1307.31C546.649 1306.82 545.058 1306.31 543.476 1305.81L543.323 1306.28C541.723 1305.77 540.131 1305.25 538.549 1304.73L538.706 1304.25C537.125 1303.73 535.553 1303.19 533.989 1302.65L533.826 1303.13C532.261 1302.59 530.704 1302.04 529.156 1301.49L529.324 1301.02C527.763 1300.46 526.211 1299.9 524.667 1299.33L524.494 1299.8C522.913 1299.21 521.342 1298.62 519.78 1298.02L519.959 1297.55C518.399 1296.96 516.849 1296.35 515.309 1295.74L515.124 1296.2C513.582 1295.59 512.049 1294.97 510.526 1294.34L510.716 1293.88C509.193 1293.26 507.68 1292.62 506.176 1291.98L505.98 1292.44C504.426 1291.78 502.883 1291.11 501.351 1290.43L501.553 1289.98C500.022 1289.3 498.502 1288.62 496.993 1287.93L496.785 1288.38C495.274 1287.69 493.773 1286.99 492.284 1286.28L492.498 1285.83C491.011 1285.13 489.534 1284.41 488.069 1283.69L487.849 1284.14C486.334 1283.4 484.832 1282.65 483.342 1281.89L483.569 1281.44C482.077 1280.68 480.597 1279.91 479.13 1279.14L478.896 1279.58C477.426 1278.8 475.969 1278.02 474.523 1277.23L474.763 1276.79C473.32 1276 471.888 1275.2 470.469 1274.39L470.222 1274.82C468.755 1273.99 467.301 1273.15 465.86 1272.3L466.114 1271.87C464.674 1271.02 463.246 1270.16 461.832 1269.29L461.571 1269.72C460.155 1268.85 458.752 1267.97 457.362 1267.09L457.631 1266.67C456.238 1265.78 454.86 1264.89 453.495 1263.98L453.219 1264.4C451.812 1263.47 450.42 1262.53 449.042 1261.58L449.325 1261.17C447.95 1260.22 446.59 1259.27 445.244 1258.31L444.953 1258.71C443.605 1257.75 442.271 1256.77 440.952 1255.79L441.251 1255.39C439.919 1254.4 438.603 1253.4 437.302 1252.39L436.995 1252.78C435.667 1251.75 434.355 1250.71 433.06 1249.66L433.374 1249.27C432.081 1248.22 430.804 1247.17 429.543 1246.1L429.221 1246.48C427.957 1245.42 426.71 1244.34 425.48 1243.25L425.811 1242.88C424.556 1241.77 423.319 1240.66 422.099 1239.53L421.76 1239.9C420.53 1238.76 419.317 1237.62 418.122 1236.46L418.47 1236.1C417.277 1234.95 416.103 1233.79 414.946 1232.62L414.591 1232.97C413.424 1231.79 412.276 1230.6 411.146 1229.4L411.51 1229.06C410.362 1227.84 409.234 1226.61 408.125 1225.37L407.752 1225.7C406.64 1224.46 405.548 1223.21 404.474 1221.95L404.855 1221.63C403.784 1220.37 402.733 1219.1 401.701 1217.82L401.312 1218.14C400.261 1216.84 399.23 1215.52 398.22 1214.2L398.617 1213.9C397.606 1212.58 396.615 1211.25 395.645 1209.9L395.24 1210.2C394.267 1208.85 393.315 1207.49 392.384 1206.13L392.797 1205.85C391.864 1204.48 390.951 1203.09 390.059 1201.7L389.638 1201.97C388.738 1200.57 387.859 1199.16 387.002 1197.73L387.431 1197.47C386.576 1196.05 385.744 1194.62 384.933 1193.18L384.497 1193.42C383.683 1191.98 382.892 1190.52 382.122 1189.05L382.565 1188.82C381.794 1187.35 381.046 1185.87 380.32 1184.38L379.871 1184.6C379.143 1183.11 378.438 1181.6 377.755 1180.09L378.211 1179.88C377.531 1178.37 376.873 1176.85 376.238 1175.32L375.776 1175.51C375.141 1173.98 374.529 1172.44 373.94 1170.89L374.407 1170.71C373.82 1169.16 373.257 1167.61 372.716 1166.04L372.243 1166.2C371.701 1164.63 371.182 1163.05 370.686 1161.46L371.164 1161.31C370.917 1160.52 370.675 1159.72 370.44 1158.92C370.205 1158.13 369.976 1157.33 369.753 1156.53L369.272 1156.66C368.825 1155.05 368.403 1153.44 368.007 1151.83L368.492 1151.71C368.097 1150.1 367.726 1148.49 367.381 1146.87L366.892 1146.97C366.545 1145.35 366.223 1143.72 365.926 1142.09L366.418 1142C366.121 1140.37 365.849 1138.74 365.601 1137.1L365.107 1137.17C364.859 1135.53 364.635 1133.89 364.436 1132.23L364.933 1132.18C364.734 1130.53 364.561 1128.88 364.411 1127.23L363.913 1127.27C363.764 1125.62 363.639 1123.97 363.538 1122.31L364.037 1122.28C363.937 1120.63 363.86 1118.98 363.808 1117.32L363.308 1117.34C363.255 1115.68 363.226 1114.01 363.221 1112.34L363.721 1112.34C363.716 1110.69 363.734 1109.03 363.775 1107.38L363.275 1107.36C363.317 1105.71 363.381 1104.06 363.468 1102.4L363.967 1102.42C364.054 1100.77 364.164 1099.11 364.296 1097.45L363.798 1097.41C363.93 1095.76 364.085 1094.1 364.262 1092.43L364.759 1092.49C364.934 1090.85 365.129 1089.22 365.347 1087.58L364.851 1087.51C365.069 1085.87 365.308 1084.23 365.569 1082.58L366.063 1082.66C366.324 1081.02 366.605 1079.37 366.908 1077.73L366.417 1077.64C366.715 1076.02 367.034 1074.39 367.374 1072.77L367.863 1072.87C368.2 1071.26 368.557 1069.65 368.934 1068.03L368.447 1067.92C368.825 1066.3 369.222 1064.68 369.64 1063.06L370.124 1063.18C370.539 1061.58 370.973 1059.97 371.426 1058.36L370.945 1058.22C371.39 1056.64 371.854 1055.06 372.336 1053.48L372.814 1053.63C373.295 1052.05 373.795 1050.47 374.314 1048.89L373.839 1048.73C374.358 1047.15 374.896 1045.56 375.453 1043.97L375.925 1044.14C376.47 1042.58 377.033 1041.03 377.613 1039.47L377.145 1039.3C377.72 1037.76 378.312 1036.22 378.921 1034.67L379.386 1034.86C379.994 1033.32 380.619 1031.78 381.262 1030.24L380.8 1030.04C381.443 1028.5 382.104 1026.96 382.781 1025.41L383.239 1025.61C383.896 1024.11 384.569 1022.61 385.258 1021.11L384.804 1020.91C385.492 1019.41 386.195 1017.91 386.914 1016.41L387.365 1016.63C388.083 1015.14 388.816 1013.64 389.565 1012.14L389.118 1011.92C389.868 1010.42 390.632 1008.93 391.413 1007.43L391.856 1007.66C392.611 1006.22 393.38 1004.77 394.164 1003.32L393.724 1003.08C394.509 1001.63 395.308 1000.18 396.122 998.733L396.558 998.978C397.37 997.53 398.197 996.082 399.038 994.635L398.605 994.384C399.446 992.937 400.3 991.491 401.169 990.044L401.597 990.302C402.438 988.902 403.292 987.502 404.159 986.103L403.734 985.84C404.602 984.438 405.483 983.037 406.378 981.637L406.799 981.906C407.693 980.507 408.599 979.109 409.518 977.711L409.1 977.436C410.021 976.036 410.954 974.637 411.901 973.238L412.315 973.518C413.231 972.164 414.158 970.811 415.098 969.458L414.688 969.173C415.627 967.82 416.579 966.469 417.543 965.118L417.95 965.408C418.912 964.058 419.887 962.709 420.873 961.361L420.469 961.066C421.457 959.716 422.456 958.367 423.467 957.018L423.867 957.318C424.854 956.002 425.852 954.686 426.862 953.371L426.465 953.066C427.466 951.763 428.478 950.46 429.5 949.158L429.894 949.466C430.915 948.166 431.948 946.866 432.991 945.567L432.601 945.254C433.646 943.953 434.701 942.653 435.767 941.355L436.154 941.672C437.208 940.388 438.273 939.104 439.349 937.821L438.966 937.5C440.019 936.244 441.082 934.989 442.156 933.734L442.535 934.06C443.608 932.807 444.69 931.555 445.782 930.304L445.406 929.975C446.499 928.723 447.602 927.472 448.715 926.221L449.089 926.554C450.201 925.305 451.323 924.057 452.455 922.811L452.084 922.475C453.19 921.257 454.306 920.04 455.43 918.824L455.797 919.163C456.913 917.957 458.038 916.751 459.172 915.547L458.808 915.204C459.944 913.999 461.088 912.795 462.241 911.592L462.602 911.938C463.755 910.736 464.916 909.536 466.087 908.336L465.729 907.987C466.897 906.791 468.074 905.595 469.259 904.401L469.614 904.754C470.768 903.592 471.93 902.432 473.1 901.272L472.748 900.917C473.92 899.757 475.1 898.598 476.288 897.441L476.637 897.799C477.824 896.643 479.019 895.488 480.223 894.334L479.877 893.973C481.082 892.818 482.295 891.665 483.516 890.513L483.86 890.877C485.07 889.735 486.288 888.595 487.515 887.457L487.175 887.09C488.378 885.974 489.588 884.859 490.806 883.745L491.144 884.114C492.361 883.001 493.586 881.89 494.819 880.78L494.484 880.408C495.718 879.297 496.959 878.188 498.208 877.08L498.54 877.454C499.788 876.347 501.043 875.242 502.306 874.138L501.977 873.762C503.23 872.667 504.49 871.574 505.757 870.482L506.083 870.861C507.327 869.79 508.578 868.721 509.835 867.653L509.512 867.272C510.77 866.203 512.036 865.136 513.309 864.07L513.63 864.454C514.902 863.389 516.181 862.326 517.467 861.264L517.148 860.879C518.435 859.816 519.729 858.756 521.03 857.697L521.345 858.085C522.637 857.033 523.936 855.983 525.241 854.935L524.928 854.545C526.209 853.517 527.496 852.49 528.79 851.465L529.1 851.857C530.393 850.833 531.692 849.81 532.998 848.789L532.69 848.395C533.997 847.373 535.31 846.353 536.63 845.335L536.935 845.731C538.254 844.713 539.58 843.698 540.911 842.683L540.608 842.286C541.94 841.271 543.279 840.259 544.624 839.248L544.924 839.648C546.235 838.662 547.553 837.678 548.876 836.696L548.578 836.294C549.903 835.312 551.233 834.331 552.569 833.351L552.865 833.755C554.2 832.776 555.542 831.799 556.889 830.824L556.596 830.419C557.945 829.443 559.299 828.469 560.659 827.498L560.95 827.904C562.309 826.933 563.674 825.963 565.045 824.996L564.757 824.587C566.108 823.634 567.465 822.682 568.827 821.733L569.113 822.143C570.463 821.201 571.819 820.262 573.181 819.324L572.897 818.912C574.26 817.974 575.627 817.038 577.001 816.103L577.282 816.517C578.655 815.583 580.033 814.651 581.416 813.721L581.137 813.306C582.522 812.375 583.911 811.446 585.307 810.52L585.583 810.936C586.973 810.013 588.367 809.093 589.767 808.174L589.493 807.756C590.868 806.853 592.248 805.953 593.633 805.054L593.905 805.474C595.29 804.576 596.679 803.68 598.074 802.786L597.804 802.365C599.199 801.47 600.6 800.577 602.006 799.687L602.273 800.109C603.678 799.219 605.088 798.331 606.503 797.444L606.238 797.021C607.653 796.134 609.074 795.249 610.5 794.367L610.763 794.792C612.172 793.92 613.585 793.05 615.003 792.182L614.742 791.756C616.148 790.896 617.558 790.038 618.973 789.182L619.232 789.61C620.646 788.754 622.065 787.9 623.489 787.049L623.232 786.62C624.657 785.768 626.086 784.918 627.52 784.07L627.775 784.5C629.208 783.653 630.646 782.807 632.088 781.964L631.836 781.532C633.279 780.689 634.727 779.847 636.18 779.008L636.43 779.441C637.858 778.615 639.29 777.792 640.727 776.971L640.479 776.537C641.912 775.718 643.349 774.902 644.79 774.087L645.036 774.522C646.477 773.708 647.922 772.896 649.371 772.086L649.128 771.65C650.578 770.84 652.032 770.032 653.491 769.226L653.733 769.663C655.191 768.858 656.654 768.054 658.12 767.253L657.881 766.814C659.348 766.012 660.82 765.213 662.296 764.415L662.534 764.855C663.982 764.073 665.434 763.293 666.891 762.515L666.655 762.074C668.112 761.296 669.573 760.52 671.037 759.746L671.271 760.188C672.735 759.415 674.203 758.644 675.675 757.874L675.444 757.431C676.916 756.662 678.393 755.895 679.874 755.13L680.104 755.574C681.584 754.809 683.068 754.047 684.556 753.287L684.329 752.841C685.817 752.081 687.31 751.323 688.806 750.567L689.032 751.013C690.501 750.271 691.975 749.531 693.452 748.793L693.229 748.346C694.706 747.607 696.188 746.871 697.674 746.138L697.895 746.586C699.38 745.852 700.868 745.121 702.361 744.392L702.141 743.943C703.634 743.213 705.131 742.486 706.631 741.762L706.849 742.212C708.349 741.487 709.852 740.765 711.36 740.045L711.144 739.594C712.652 738.874 714.164 738.156 715.679 737.44L715.892 737.892C717.383 737.188 718.877 736.487 720.375 735.787L720.163 735.334C721.66 734.635 723.161 733.938 724.665 733.244L724.874 733.697C726.378 733.003 727.885 732.311 729.395 731.622L729.187 731.167C730.698 730.477 732.213 729.789 733.731 729.104L733.937 729.559C735.454 728.874 736.975 728.192 738.499 727.511L738.295 727.055C739.82 726.374 741.348 725.696 742.88 725.02L743.082 725.477C744.594 724.81 746.11 724.145 747.629 723.482L747.429 723.024C748.943 722.363 750.46 721.705 751.981 721.049L752.179 721.508C753.699 720.852 755.222 720.199 756.749 719.548L756.553 719.088C758.08 718.437 759.61 717.788 761.144 717.141L761.338 717.602C762.871 716.956 764.407 716.312 765.946 715.671L765.754 715.209C767.294 714.567 768.837 713.928 770.384 713.291L770.574 713.753C772.108 713.121 773.646 712.492 775.186 711.865L774.998 711.402C776.527 710.779 778.06 710.159 779.595 709.541L779.782 710.005C781.317 709.387 782.855 708.772 784.396 708.159L784.211 707.694C785.753 707.081 787.298 706.471 788.845 705.862L789.028 706.328C790.575 705.72 792.125 705.114 793.678 704.511L793.497 704.045C795.051 703.442 796.608 702.841 798.167 702.242L798.346 702.709C799.902 702.112 801.461 701.517 803.023 700.925L802.846 700.458C804.389 699.872 805.936 699.29 807.485 698.709L807.66 699.178C809.209 698.598 810.76 698.02 812.314 697.445L812.141 696.976C813.695 696.4 815.253 695.827 816.813 695.257L816.985 695.727C818.545 695.156 820.107 694.589 821.672 694.023L821.503 693.553C823.068 692.988 824.637 692.425 826.209 691.864L826.377 692.335C827.947 691.775 829.521 691.217 831.097 690.662L830.931 690.19C832.494 689.64 834.059 689.092 835.628 688.546L835.792 689.018C837.353 688.476 838.916 687.935 840.482 687.397L840.319 686.924C841.886 686.386 843.455 685.851 845.027 685.318L845.188 685.791C846.759 685.258 848.332 684.728 849.909 684.2L849.75 683.726C851.327 683.198 852.907 682.672 854.489 682.149L854.646 682.624C856.227 682.101 857.811 681.581 859.398 681.064L859.243 680.588C860.827 680.071 862.414 679.557 864.004 679.045L864.157 679.521C865.729 679.015 867.303 678.511 868.88 678.01L868.729 677.534C870.306 677.033 871.886 676.534 873.468 676.038L873.617 676.515C875.199 676.019 876.783 675.526 878.369 675.035L878.221 674.558C879.808 674.067 881.398 673.578 882.989 673.093L883.135 673.571C884.726 673.085 886.32 672.603 887.916 672.122L887.772 671.643C889.368 671.163 890.967 670.685 892.568 670.21L892.71 670.689C893.511 670.452 894.311 670.215 895.113 669.978C895.914 669.742 896.715 669.507 897.516 669.273L897.376 668.793C898.979 668.324 900.581 667.858 902.183 667.396L902.322 667.876C903.923 667.414 905.524 666.956 907.124 666.501L906.987 666.02C908.588 665.565 910.188 665.113 911.787 664.665L911.922 665.146C913.521 664.698 915.119 664.253 916.717 663.812L916.584 663.33C918.182 662.889 919.78 662.451 921.377 662.017L921.508 662.499C923.104 662.065 924.7 661.634 926.295 661.207L926.166 660.724C927.779 660.292 929.391 659.863 931.003 659.438L931.131 659.922C932.744 659.496 934.357 659.074 935.969 658.655L935.844 658.171C937.457 657.753 939.069 657.337 940.68 656.926L940.804 657.41C942.414 656.999 944.024 656.591 945.633 656.186L945.511 655.701C947.121 655.297 948.73 654.896 950.338 654.498L950.458 654.984C952.065 654.586 953.672 654.192 955.277 653.802L955.159 653.316C956.773 652.924 958.385 652.535 959.997 652.15L960.113 652.637C961.738 652.248 963.363 651.863 964.987 651.482L964.872 650.995C966.496 650.614 968.12 650.236 969.742 649.862L969.854 650.349C971.476 649.975 973.097 649.605 974.716 649.238L974.606 648.75C976.226 648.383 977.846 648.02 979.464 647.66L979.572 648.148C981.19 647.789 982.807 647.433 984.422 647.08L984.316 646.592C985.932 646.239 987.547 645.89 989.161 645.544L989.266 646.033C990.899 645.684 992.532 645.338 994.163 644.996L994.06 644.506C995.695 644.163 997.329 643.824 998.961 643.488L999.062 643.978C1000.69 643.642 1002.32 643.31 1003.95 642.982L1003.86 642.492C1005.49 642.164 1007.11 641.839 1008.74 641.518L1008.84 642.008C1010.47 641.688 1012.09 641.37 1013.72 641.057L1013.62 640.566C1015.25 640.252 1016.87 639.942 1018.49 639.636L1018.59 640.127C1020.22 639.818 1021.85 639.513 1023.49 639.212L1023.39 638.721C1025.04 638.417 1026.68 638.117 1028.32 637.821L1028.41 638.313C1030.05 638.017 1031.69 637.725 1033.33 637.436L1033.25 636.944C1034.89 636.655 1036.52 636.371 1038.16 636.089L1038.24 636.582C1039.88 636.301 1041.51 636.024 1043.15 635.751L1043.06 635.257C1044.7 634.984 1046.33 634.714 1047.96 634.448L1048.04 634.941C1049.68 634.674 1051.31 634.411 1052.94 634.151L1052.86 633.658C1054.52 633.395 1056.17 633.136 1057.82 632.881L1057.9 633.375C1059.55 633.12 1061.19 632.869 1062.84 632.621L1062.77 632.127C1064.41 631.879 1066.06 631.636 1067.7 631.396L1067.77 631.891C1069.42 631.651 1071.06 631.415 1072.7 631.183L1072.63 630.688C1074.27 630.456 1075.91 630.227 1077.54 630.003L1077.61 630.498C1079.25 630.274 1080.88 630.053 1082.52 629.836L1082.45 629.34C1084.11 629.119 1085.77 628.903 1087.43 628.69L1087.49 629.186C1089.15 628.973 1090.81 628.765 1092.46 628.56L1092.4 628.064C1094.05 627.859 1095.7 627.658 1097.35 627.461L1097.41 627.958C1099.06 627.761 1100.71 627.568 1102.35 627.379L1102.3 626.882C1103.94 626.693 1105.59 626.508 1107.23 626.326L1107.28 626.823C1108.93 626.642 1110.56 626.465 1112.2 626.291L1112.15 625.794C1113.82 625.618 1115.48 625.445 1117.14 625.277L1117.2 625.774C1118.86 625.606 1120.52 625.441 1122.18 625.281L1122.13 624.783C1123.79 624.623 1125.44 624.466 1127.1 624.314L1127.14 624.812C1128.8 624.659 1130.45 624.511 1132.1 624.367L1132.06 623.869C1133.71 623.725 1135.35 623.584 1137 623.448L1137.04 623.946C1138.69 623.81 1140.33 623.678 1141.97 623.549L1141.93 623.051C1143.61 622.92 1145.28 622.794 1146.94 622.671L1146.98 623.17C1148.65 623.048 1150.31 622.93 1151.97 622.816L1151.94 622.317C1153.6 622.203 1155.26 622.093 1156.92 621.987L1156.95 622.486C1158.61 622.38 1160.26 622.279 1161.92 622.182L1161.89 621.682C1163.54 621.585 1165.19 621.492 1166.84 621.402L1166.86 621.902C1168.52 621.812 1170.17 621.727 1171.81 621.646L1171.79 621.146C1173.46 621.064 1175.14 620.986 1176.81 620.912L1176.83 621.411C1178.5 621.337 1180.17 621.268 1181.83 621.203L1181.81 620.703C1183.47 620.638 1185.14 620.577 1186.79 620.52L1186.81 621.019C1188.47 620.963 1190.13 620.91 1191.78 620.862L1191.76 620.362C1193.42 620.314 1195.07 620.27 1196.71 620.23L1196.73 620.73C1198.39 620.69 1200.05 620.654 1201.7 620.623L1201.69 620.123C1203.37 620.091 1205.04 620.064 1206.71 620.041L1206.72 620.541C1208.39 620.518 1210.06 620.5 1211.72 620.486L1211.72 619.986C1213.38 619.972 1215.04 619.962 1216.7 619.957L1216.7 620.457C1218.36 620.451 1220.01 620.451 1221.66 620.454L1221.66 619.954C1223.31 619.958 1224.96 619.966 1226.6 619.978L1226.6 620.478C1228.28 620.491 1229.95 620.508 1231.61 620.53L1231.62 620.03C1233.3 620.052 1234.97 620.079 1236.63 620.11L1236.63 620.61C1238.29 620.641 1239.96 620.676 1241.61 620.717L1241.63 620.217C1243.29 620.257 1244.94 620.302 1246.6 620.351L1246.58 620.851C1248.24 620.9 1249.88 620.954 1251.53 621.013L1251.55 620.513C1253.21 620.572 1254.86 620.636 1256.51 620.704L1256.49 621.204C1258.17 621.273 1259.84 621.347 1261.51 621.426L1261.54 620.927C1263.21 621.005 1264.87 621.089 1266.53 621.178L1266.51 621.677C1268.17 621.765 1269.83 621.858 1271.48 621.956L1271.51 621.457C1273.16 621.555 1274.81 621.658 1276.46 621.765L1276.42 622.264C1278.07 622.372 1279.71 622.484 1281.35 622.601L1281.38 622.102C1283.06 622.222 1284.73 622.347 1286.4 622.476L1286.36 622.975C1288.03 623.105 1289.7 623.239 1291.36 623.379L1291.4 622.881C1293.06 623.02 1294.72 623.165 1296.37 623.315L1296.32 623.813C1297.97 623.962 1299.62 624.117 1301.26 624.276L1301.31 623.779C1302.95 623.938 1304.59 624.103 1306.22 624.272L1306.17 624.769C1307.84 624.942 1309.5 625.12 1311.15 625.303L1311.21 624.806C1312.88 624.99 1314.54 625.179 1316.2 625.374L1316.14 625.87C1317.79 626.065 1319.44 626.264 1321.09 626.469L1321.15 625.973C1322.8 626.178 1324.44 626.388 1326.08 626.603L1326.01 627.099C1327.65 627.314 1329.28 627.534 1330.91 627.76L1330.97 627.264C1332.63 627.494 1334.28 627.729 1335.93 627.969L1335.86 628.464C1337.52 628.706 1339.17 628.954 1340.82 629.207L1340.9 628.713C1342.55 628.966 1344.19 629.225 1345.83 629.489L1345.75 629.983C1347.39 630.247 1349.02 630.516 1350.65 630.791L1350.73 630.298C1352.36 630.573 1353.98 630.853 1355.59 631.139L1355.51 631.632C1357.16 631.923 1358.8 632.22 1360.43 632.522L1360.52 632.031C1362.18 632.336 1363.82 632.647 1365.46 632.964L1365.36 633.455C1367 633.771 1368.63 634.093 1370.26 634.421L1370.35 633.931C1371.98 634.259 1373.6 634.592 1375.21 634.932L1375.11 635.421C1376.72 635.76 1378.33 636.105 1379.93 636.455L1380.03 635.967C1381.68 636.327 1383.32 636.693 1384.95 637.065L1384.83 637.552C1386.47 637.925 1388.1 638.304 1389.72 638.688L1389.83 638.202C1391.45 638.587 1393.07 638.978 1394.67 639.375L1394.55 639.86C1396.16 640.257 1397.76 640.659 1399.35 641.068L1399.48 640.583C1401.08 640.995 1402.68 641.413 1404.27 641.836L1404.14 642.319C1405.76 642.753 1407.38 643.193 1409 643.639L1409.13 643.157C1410.74 643.603 1412.35 644.056 1413.95 644.515L1413.81 644.996C1415.4 645.454 1416.99 645.919 1418.57 646.39L1418.71 645.911C1420.3 646.383 1421.87 646.861 1423.44 647.345L1423.29 647.822C1424.89 648.317 1426.48 648.817 1428.06 649.325L1428.21 648.849C1429.81 649.361 1431.41 649.881 1432.99 650.407L1432.83 650.882C1434.41 651.407 1435.99 651.939 1437.55 652.478L1437.71 652.005C1439.28 652.545 1440.83 653.091 1442.38 653.643L1442.21 654.114C1443.78 654.671 1445.33 655.235 1446.87 655.806L1447.04 655.337C1448.62 655.922 1450.2 656.513 1451.76 657.112L1451.58 657.579C1453.14 658.177 1454.69 658.782 1456.23 659.394L1456.41 658.929C1457.96 659.541 1459.49 660.161 1461.01 660.788L1460.82 661.25C1462.34 661.877 1463.86 662.51 1465.36 663.151L1465.56 662.691C1467.11 663.353 1468.65 664.022 1470.19 664.699L1469.99 665.157C1471.52 665.833 1473.04 666.516 1474.54 667.207L1474.75 666.752C1476.26 667.444 1477.76 668.143 1479.25 668.849L1479.04 669.301C1480.53 670.006 1482 670.719 1483.47 671.439L1483.69 670.991C1485.2 671.735 1486.71 672.486 1488.2 673.246L1487.97 673.691C1489.46 674.451 1490.94 675.219 1492.41 675.995L1492.64 675.553C1494.11 676.33 1495.57 677.114 1497.02 677.907L1496.77 678.345C1498.22 679.137 1499.65 679.936 1501.07 680.742L1501.32 680.308C1502.78 681.142 1504.24 681.984 1505.68 682.834L1505.42 683.265C1506.86 684.115 1508.29 684.974 1509.71 685.84L1509.97 685.414C1511.38 686.282 1512.79 687.159 1514.18 688.043L1513.91 688.465C1515.3 689.351 1516.68 690.246 1518.04 691.149L1518.32 690.732C1519.73 691.662 1521.12 692.602 1522.5 693.55L1522.21 693.961C1523.59 694.908 1524.95 695.863 1526.29 696.826L1526.58 696.42C1527.93 697.385 1529.27 698.359 1530.59 699.342L1530.29 699.743C1531.62 700.735 1532.93 701.737 1534.24 702.747L1534.54 702.352C1535.87 703.383 1537.18 704.423 1538.48 705.472L1538.16 705.861C1539.46 706.908 1540.73 707.964 1541.99 709.03L1542.32 708.648C1543.58 709.716 1544.83 710.792 1546.06 711.878L1545.73 712.253C1546.98 713.36 1548.22 714.477 1549.44 715.602L1549.78 715.235C1551.01 716.37 1552.22 717.515 1553.42 718.67L1553.07 719.03C1554.26 720.181 1555.43 721.343 1556.59 722.514L1556.95 722.162C1558.11 723.343 1559.26 724.534 1560.39 725.734L1560.03 726.077C1561.18 727.295 1562.3 728.523 1563.41 729.762L1563.79 729.428C1564.9 730.67 1565.99 731.921 1567.06 733.182L1566.68 733.506C1567.75 734.764 1568.81 736.032 1569.84 737.309L1570.23 736.995C1571.28 738.296 1572.31 739.608 1573.32 740.929L1572.92 741.233C1573.93 742.555 1574.92 743.887 1575.89 745.229L1576.3 744.936C1577.27 746.282 1578.22 747.639 1579.15 749.005L1578.74 749.286C1579.67 750.657 1580.59 752.037 1581.48 753.428L1581.9 753.158C1582.8 754.562 1583.68 755.977 1584.54 757.402L1584.11 757.66C1584.96 759.08 1585.79 760.511 1586.6 761.953L1587.04 761.707C1587.85 763.154 1588.65 764.611 1589.42 766.078L1588.97 766.31C1589.74 767.779 1590.49 769.259 1591.22 770.749L1591.67 770.53C1592.39 772.024 1593.1 773.529 1593.78 775.044L1593.33 775.249C1594.01 776.759 1594.67 778.28 1595.3 779.811L1595.76 779.619C1596.4 781.151 1597.01 782.693 1597.6 784.245L1597.13 784.422C1597.72 785.968 1598.28 787.525 1598.82 789.091L1599.29 788.928Z",stroke:"black",strokeDasharray:"5 5"}),R.jsx("path",{d:"M1968.7 731.766C1969.22 733.351 1969.72 734.942 1970.21 736.54L1969.73 736.686C1969.98 737.484 1970.22 738.283 1970.45 739.084C1970.69 739.885 1970.92 740.687 1971.15 741.49L1971.63 741.353C1972.09 742.961 1972.53 744.572 1972.95 746.186L1972.46 746.312C1972.89 747.923 1973.29 749.536 1973.68 751.152L1974.16 751.035C1974.55 752.655 1974.92 754.277 1975.28 755.902L1974.79 756.008C1975.14 757.63 1975.48 759.254 1975.8 760.882L1976.29 760.785C1976.62 762.417 1976.92 764.052 1977.21 765.689L1976.72 765.776C1976.85 766.513 1976.97 767.251 1977.1 767.99C1977.25 768.89 1977.39 769.791 1977.53 770.693L1978.03 770.617C1978.28 772.262 1978.52 773.909 1978.74 775.56L1978.25 775.626C1978.47 777.273 1978.67 778.923 1978.86 780.575L1979.36 780.518C1979.55 782.173 1979.72 783.831 1979.88 785.491L1979.38 785.538C1979.54 787.191 1979.68 788.847 1979.8 790.505L1980.3 790.468C1980.42 792.122 1980.53 793.779 1980.62 795.438L1980.12 795.466C1980.21 797.121 1980.28 798.779 1980.34 800.44L1980.84 800.422C1980.9 802.086 1980.94 803.751 1980.97 805.419L1980.47 805.427C1980.49 807.092 1980.51 808.759 1980.5 810.428L1981 810.429C1980.99 812.096 1980.97 813.764 1980.94 815.435L1980.44 815.424C1980.4 817.074 1980.35 818.725 1980.28 820.379L1980.78 820.399C1980.71 822.056 1980.63 823.714 1980.53 825.375L1980.03 825.345C1979.94 827.003 1979.82 828.662 1979.7 830.323L1980.19 830.362C1980.07 832.026 1979.92 833.692 1979.76 835.359L1979.27 835.312C1979.11 836.974 1978.93 838.639 1978.75 840.305L1979.24 840.361C1979.06 841.998 1978.86 843.637 1978.64 845.277L1978.15 845.212C1977.93 846.849 1977.71 848.488 1977.46 850.129L1977.96 850.202C1977.72 851.845 1977.46 853.49 1977.19 855.136L1976.7 855.054C1976.42 856.698 1976.14 858.343 1975.84 859.989L1976.33 860.078C1976.03 861.727 1975.72 863.378 1975.39 865.03L1974.9 864.932C1974.58 866.549 1974.24 868.167 1973.89 869.786L1974.38 869.891C1974.04 871.504 1973.68 873.117 1973.3 874.732L1972.82 874.619C1972.44 876.231 1972.06 877.845 1971.66 879.459L1972.14 879.579C1971.74 881.196 1971.33 882.814 1970.9 884.433L1970.42 884.306C1969.99 885.923 1969.55 887.541 1969.1 889.159L1969.58 889.294C1969.13 890.899 1968.67 892.505 1968.19 894.111L1967.72 893.97C1967.5 894.709 1967.28 895.448 1967.05 896.187C1966.8 897.022 1966.54 897.858 1966.28 898.694L1966.76 898.842C1966.27 900.42 1965.77 901.998 1965.25 903.577L1964.78 903.423C1964.26 905 1963.74 906.578 1963.2 908.157L1963.67 908.318C1963.13 909.899 1962.58 911.481 1962.02 913.064L1961.55 912.896C1960.98 914.476 1960.41 916.057 1959.82 917.639L1960.29 917.813C1959.72 919.359 1959.13 920.905 1958.54 922.452L1958.07 922.272C1957.48 923.805 1956.87 925.339 1956.26 926.873L1956.72 927.059C1956.11 928.595 1955.48 930.132 1954.85 931.669L1954.38 931.477C1953.75 933.013 1953.1 934.549 1952.44 936.085L1952.9 936.282C1952.24 937.82 1951.57 939.359 1950.89 940.898L1950.43 940.696C1949.75 942.233 1949.06 943.771 1948.35 945.309L1948.81 945.517C1948.13 947.006 1947.44 948.495 1946.73 949.985L1946.28 949.772C1945.58 951.26 1944.87 952.748 1944.15 954.236L1944.6 954.454C1943.88 955.944 1943.14 957.434 1942.4 958.925L1941.95 958.702C1941.21 960.191 1940.46 961.68 1939.7 963.17L1940.14 963.397C1939.38 964.888 1938.61 966.38 1937.82 967.871L1937.38 967.639C1936.6 969.127 1935.81 970.616 1935 972.105L1935.44 972.342C1934.67 973.783 1933.88 975.224 1933.09 976.665L1932.65 976.424C1932.39 976.896 1932.13 977.368 1931.86 977.84C1931.33 978.808 1930.78 979.775 1930.24 980.743L1930.67 980.989C1929.86 982.43 1929.03 983.872 1928.2 985.313L1927.77 985.063C1926.94 986.503 1926.1 987.943 1925.24 989.383L1925.68 989.637C1924.82 991.079 1923.96 992.52 1923.09 993.962L1922.67 993.703C1921.8 995.143 1920.92 996.583 1920.03 998.023L1920.46 998.286C1919.59 999.685 1918.72 1001.08 1917.84 1002.48L1917.42 1002.22C1916.54 1003.61 1915.66 1005 1914.77 1006.39L1915.19 1006.66C1914.3 1008.05 1913.4 1009.44 1912.49 1010.83L1912.07 1010.56C1911.16 1011.95 1910.24 1013.34 1909.32 1014.73L1909.73 1015.01C1908.81 1016.4 1907.87 1017.79 1906.93 1019.18L1906.52 1018.9C1905.57 1020.29 1904.62 1021.68 1903.66 1023.07L1904.08 1023.35C1903.13 1024.72 1902.18 1026.09 1901.21 1027.46L1900.81 1027.17C1900.48 1027.64 1900.15 1028.1 1899.82 1028.57C1899.2 1029.44 1898.58 1030.32 1897.95 1031.19L1898.36 1031.48C1897.4 1032.82 1896.44 1034.16 1895.46 1035.51L1895.06 1035.21C1894.08 1036.55 1893.1 1037.89 1892.11 1039.23L1892.51 1039.53C1891.52 1040.87 1890.53 1042.21 1889.52 1043.55L1889.12 1043.25C1888.64 1043.89 1888.16 1044.53 1887.68 1045.16C1887.15 1045.86 1886.62 1046.56 1886.08 1047.26L1886.48 1047.57C1885.46 1048.91 1884.43 1050.24 1883.4 1051.58L1883 1051.28C1881.99 1052.58 1880.98 1053.88 1879.96 1055.18L1880.35 1055.49C1879.34 1056.78 1878.31 1058.07 1877.28 1059.36L1876.89 1059.05C1875.86 1060.34 1874.83 1061.63 1873.78 1062.92L1874.17 1063.24C1873.13 1064.53 1872.08 1065.82 1871.02 1067.11L1870.63 1066.79C1869.58 1068.08 1868.51 1069.37 1867.44 1070.66L1867.83 1070.98C1866.75 1072.27 1865.67 1073.56 1864.59 1074.84L1864.21 1074.52C1863.12 1075.81 1862.03 1077.1 1860.93 1078.38L1861.31 1078.71C1860.24 1079.95 1859.17 1081.2 1858.09 1082.44L1857.72 1082.12C1856.64 1083.36 1855.56 1084.6 1854.47 1085.85L1854.84 1086.17C1853.75 1087.42 1852.66 1088.66 1851.55 1089.9L1851.18 1089.57C1850.08 1090.81 1848.97 1092.05 1847.85 1093.29L1848.22 1093.63C1847.11 1094.87 1845.99 1096.11 1844.86 1097.35L1844.49 1097.01C1843.36 1098.25 1842.23 1099.48 1841.09 1100.72L1841.45 1101.06C1840.31 1102.3 1839.16 1103.54 1838.01 1104.77L1837.64 1104.43C1836.52 1105.63 1835.4 1106.83 1834.26 1108.03L1834.63 1108.38C1833.5 1109.57 1832.36 1110.77 1831.22 1111.97L1830.86 1111.62C1829.72 1112.81 1828.57 1114.01 1827.42 1115.2L1827.78 1115.55C1826.63 1116.74 1825.47 1117.94 1824.3 1119.13L1823.94 1118.78C1823.41 1119.32 1822.88 1119.86 1822.35 1120.4C1821.71 1121.05 1821.07 1121.7 1820.43 1122.35L1820.79 1122.7C1819.61 1123.89 1818.43 1125.08 1817.24 1126.27L1816.89 1125.92C1815.7 1127.11 1814.51 1128.3 1813.31 1129.48L1813.66 1129.84C1812.48 1131.01 1811.3 1132.17 1810.11 1133.34L1809.76 1132.98C1808.58 1134.13 1807.4 1135.28 1806.22 1136.43L1806.57 1136.79C1805.38 1137.94 1804.19 1139.08 1803 1140.23L1802.65 1139.87C1801.45 1141.02 1800.25 1142.16 1799.05 1143.31L1799.39 1143.67C1798.19 1144.82 1796.97 1145.96 1795.76 1147.11L1795.41 1146.74C1794.2 1147.88 1792.97 1149.03 1791.75 1150.17L1792.09 1150.53C1790.86 1151.68 1789.63 1152.82 1788.39 1153.96L1788.05 1153.59C1786.81 1154.73 1785.57 1155.87 1784.32 1157.01L1784.66 1157.38C1783.45 1158.48 1782.23 1159.59 1781.01 1160.69L1780.67 1160.32C1780.14 1160.8 1779.61 1161.28 1779.08 1161.76C1778.38 1162.38 1777.69 1163 1776.99 1163.63L1777.32 1164C1776.09 1165.1 1774.85 1166.21 1773.61 1167.31L1773.28 1166.93C1772.95 1167.22 1772.62 1167.52 1772.29 1167.81C1771.37 1168.62 1770.46 1169.42 1769.54 1170.23L1769.87 1170.61C1768.62 1171.7 1767.36 1172.8 1766.1 1173.9L1765.77 1173.52C1764.51 1174.62 1763.24 1175.71 1761.97 1176.81L1762.29 1177.19C1761.02 1178.28 1759.75 1179.38 1758.46 1180.47L1758.14 1180.09C1756.87 1181.18 1755.59 1182.26 1754.31 1183.34L1754.63 1183.72C1753.38 1184.79 1752.12 1185.85 1750.85 1186.91L1750.53 1186.52C1749.27 1187.58 1748 1188.64 1746.73 1189.7L1747.05 1190.08C1745.77 1191.14 1744.5 1192.19 1743.21 1193.25L1742.9 1192.86C1741.61 1193.92 1740.33 1194.97 1739.04 1196.03L1739.35 1196.41C1738.06 1197.47 1736.76 1198.52 1735.46 1199.57L1735.15 1199.18C1733.85 1200.23 1732.55 1201.28 1731.24 1202.33L1731.55 1202.72C1730.24 1203.77 1728.93 1204.82 1727.61 1205.87L1727.3 1205.48C1725.99 1206.52 1724.68 1207.56 1723.36 1208.59L1723.67 1208.99C1722.38 1210 1721.08 1211.02 1719.78 1212.04L1719.47 1211.64C1718.85 1212.13 1718.22 1212.62 1717.59 1213.11C1716.92 1213.63 1716.24 1214.16 1715.56 1214.69L1715.87 1215.08C1714.56 1216.1 1713.24 1217.11 1711.93 1218.12L1711.62 1217.72C1710.31 1218.74 1708.99 1219.75 1707.66 1220.76L1707.96 1221.15C1706.64 1222.16 1705.31 1223.17 1703.98 1224.18L1703.67 1223.78C1702.34 1224.79 1701 1225.79 1699.66 1226.8L1699.96 1227.2C1698.62 1228.2 1697.28 1229.21 1695.93 1230.21L1695.63 1229.81C1694.28 1230.81 1692.93 1231.81 1691.57 1232.81L1691.87 1233.21C1690.55 1234.19 1689.22 1235.17 1687.89 1236.14L1687.59 1235.74C1686.26 1236.71 1684.93 1237.68 1683.59 1238.65L1683.88 1239.06C1682.54 1240.03 1681.2 1241 1679.85 1241.97L1679.56 1241.56C1678.21 1242.53 1676.86 1243.5 1675.51 1244.47L1675.8 1244.88C1674.45 1245.84 1673.09 1246.81 1671.72 1247.77L1671.44 1247.37C1670.07 1248.33 1668.71 1249.3 1667.34 1250.26L1667.63 1250.67C1666.26 1251.63 1664.88 1252.59 1663.51 1253.55L1663.22 1253.14C1661.84 1254.1 1660.46 1255.06 1659.08 1256.02L1659.36 1256.43C1658 1257.38 1656.63 1258.32 1655.26 1259.26L1654.98 1258.85C1653.62 1259.78 1652.26 1260.71 1650.89 1261.64L1651.18 1262.06C1649.81 1262.99 1648.44 1263.92 1647.07 1264.85L1646.79 1264.43C1645.41 1265.36 1644.04 1266.29 1642.66 1267.21L1642.94 1267.63C1641.56 1268.56 1640.17 1269.48 1638.79 1270.4L1638.51 1269.99C1637.12 1270.91 1635.73 1271.84 1634.34 1272.76L1634.62 1273.17C1633.22 1274.1 1631.82 1275.02 1630.42 1275.94L1630.15 1275.52C1629.62 1275.87 1629.09 1276.22 1628.55 1276.56C1627.68 1277.13 1626.81 1277.7 1625.94 1278.27L1626.21 1278.69C1624.8 1279.61 1623.39 1280.52 1621.98 1281.44L1621.71 1281.02C1620.32 1281.91 1618.94 1282.8 1617.55 1283.7L1617.82 1284.12C1616.43 1285.01 1615.04 1285.9 1613.64 1286.79L1613.37 1286.37C1611.98 1287.25 1610.58 1288.14 1609.18 1289.03L1609.44 1289.45C1608.04 1290.34 1606.64 1291.22 1605.23 1292.11L1604.96 1291.69C1603.55 1292.57 1602.14 1293.45 1600.73 1294.34L1600.99 1294.76C1599.58 1295.64 1598.16 1296.52 1596.74 1297.4L1596.47 1296.98C1595.05 1297.86 1593.63 1298.74 1592.2 1299.61L1592.46 1300.04C1591.03 1300.92 1589.6 1301.79 1588.17 1302.67L1587.91 1302.24C1586.48 1303.11 1585.05 1303.98 1583.61 1304.85L1583.87 1305.28C1582.46 1306.13 1581.05 1306.98 1579.63 1307.83L1579.37 1307.4C1577.96 1308.26 1576.54 1309.1 1575.12 1309.95L1575.37 1310.38C1573.95 1311.23 1572.53 1312.08 1571.1 1312.93L1570.84 1312.49C1569.42 1313.34 1567.98 1314.19 1566.55 1315.03L1566.8 1315.46C1565.37 1316.3 1563.93 1317.15 1562.49 1317.99L1562.24 1317.56C1560.8 1318.4 1559.36 1319.24 1557.91 1320.08L1558.16 1320.51C1556.72 1321.35 1555.27 1322.18 1553.82 1323.02L1553.57 1322.59C1552.11 1323.42 1550.66 1324.26 1549.2 1325.09L1549.45 1325.52C1548 1326.36 1546.54 1327.18 1545.08 1328.01L1544.84 1327.58C1543.4 1328.39 1541.97 1329.2 1540.53 1330.02L1540.77 1330.45C1539.33 1331.26 1537.89 1332.07 1536.45 1332.88L1536.2 1332.45C1534.76 1333.25 1533.31 1334.06 1531.86 1334.87L1532.1 1335.31C1530.65 1336.11 1529.2 1336.92 1527.74 1337.72L1527.5 1337.28C1526.04 1338.09 1524.58 1338.89 1523.12 1339.69L1523.36 1340.13C1521.9 1340.93 1520.43 1341.73 1518.97 1342.53L1518.73 1342.09C1517.26 1342.89 1515.79 1343.69 1514.32 1344.48L1514.56 1344.92C1513.08 1345.72 1511.61 1346.51 1510.13 1347.31L1509.89 1346.87C1508.41 1347.66 1506.93 1348.45 1505.45 1349.24L1505.68 1349.68C1504.23 1350.46 1502.77 1351.23 1501.31 1352.01L1501.07 1351.56C1500.45 1351.89 1499.83 1352.22 1499.2 1352.55C1498.36 1353 1497.52 1353.44 1496.68 1353.88L1496.92 1354.32C1495.45 1355.09 1493.98 1355.86 1492.51 1356.63L1492.28 1356.19C1490.81 1356.95 1489.34 1357.72 1487.86 1358.48L1488.09 1358.93C1486.61 1359.69 1485.13 1360.46 1483.65 1361.22L1483.42 1360.78C1481.94 1361.54 1480.46 1362.3 1478.97 1363.06L1479.2 1363.5C1477.71 1364.26 1476.23 1365.02 1474.73 1365.78L1474.51 1365.33C1473.81 1365.69 1473.11 1366.04 1472.41 1366.39C1471.62 1366.8 1470.82 1367.2 1470.03 1367.6L1470.25 1368.05C1468.75 1368.8 1467.25 1369.55 1465.75 1370.3L1465.53 1369.86C1464.04 1370.6 1462.56 1371.34 1461.07 1372.08L1461.29 1372.53C1459.81 1373.27 1458.33 1374 1456.84 1374.73L1456.62 1374.28C1455.14 1375.02 1453.65 1375.75 1452.16 1376.48L1452.38 1376.93C1450.89 1377.66 1449.4 1378.39 1447.91 1379.11L1447.69 1378.66C1446.97 1379.01 1446.25 1379.36 1445.53 1379.71C1444.76 1380.09 1443.98 1380.46 1443.2 1380.84L1443.42 1381.29C1441.92 1382.01 1440.42 1382.74 1438.92 1383.46L1438.7 1383.01C1437.86 1383.41 1437.02 1383.81 1436.18 1384.22C1435.51 1384.53 1434.85 1384.85 1434.18 1385.17L1434.4 1385.62C1432.89 1386.34 1431.38 1387.06 1429.87 1387.77L1429.65 1387.32C1428.14 1388.04 1426.62 1388.75 1425.11 1389.46L1425.32 1389.92C1423.8 1390.63 1422.28 1391.34 1420.76 1392.05L1420.55 1391.6C1419.06 1392.3 1417.56 1392.99 1416.06 1393.69L1416.27 1394.14C1414.77 1394.84 1413.26 1395.53 1411.76 1396.22L1411.55 1395.77C1410.04 1396.46 1408.54 1397.15 1407.03 1397.84L1407.24 1398.3C1405.73 1398.99 1404.21 1399.68 1402.7 1400.36L1402.49 1399.91C1400.98 1400.6 1399.46 1401.28 1397.94 1401.97L1398.15 1402.42C1396.63 1403.11 1395.11 1403.79 1393.59 1404.47L1393.38 1404.01C1391.86 1404.7 1390.34 1405.38 1388.81 1406.05L1389.01 1406.51C1387.48 1407.19 1385.95 1407.87 1384.42 1408.54L1384.22 1408.09C1382.69 1408.76 1381.16 1409.44 1379.62 1410.11L1379.82 1410.57C1378.29 1411.24 1376.76 1411.9 1375.23 1412.57L1375.03 1412.11C1373.52 1412.77 1372 1413.43 1370.48 1414.08L1370.68 1414.54C1369.16 1415.2 1367.64 1415.86 1366.11 1416.51L1365.91 1416.05C1364.39 1416.7 1362.86 1417.35 1361.34 1418.01L1361.53 1418.47C1360 1419.12 1358.47 1419.77 1356.94 1420.41L1356.75 1419.95C1355.22 1420.6 1353.68 1421.25 1352.15 1421.89L1352.34 1422.35C1350.8 1423 1349.26 1423.64 1347.72 1424.28L1347.53 1423.82C1345.99 1424.46 1344.45 1425.1 1342.91 1425.74L1343.1 1426.2C1341.55 1426.84 1340.01 1427.48 1338.46 1428.12L1338.27 1427.65C1336.72 1428.29 1335.17 1428.93 1333.62 1429.56L1333.81 1430.02C1332.26 1430.65 1330.72 1431.28 1329.17 1431.9L1328.99 1431.44C1327.45 1432.06 1325.92 1432.68 1324.38 1433.3L1324.57 1433.76C1323.03 1434.38 1321.49 1435 1319.95 1435.61L1319.77 1435.15C1318.23 1435.76 1316.68 1436.37 1315.14 1436.99L1315.32 1437.45C1313.78 1438.06 1312.23 1438.67 1310.68 1439.28L1310.5 1438.82C1308.95 1439.42 1307.4 1440.03 1305.85 1440.64L1306.03 1441.1C1304.48 1441.71 1302.93 1442.31 1301.37 1442.92L1301.19 1442.45C1299.64 1443.05 1298.08 1443.66 1296.52 1444.25L1296.7 1444.72C1295.14 1445.32 1293.58 1445.92 1292.01 1446.52L1291.83 1446.05C1290.27 1446.65 1288.71 1447.24 1287.14 1447.84L1287.32 1448.3C1285.76 1448.89 1284.2 1449.48 1282.64 1450.07L1282.46 1449.6C1280.91 1450.18 1279.36 1450.77 1277.81 1451.34L1277.99 1451.81C1276.44 1452.39 1274.88 1452.97 1273.33 1453.55L1273.15 1453.08C1271.6 1453.65 1270.04 1454.23 1268.48 1454.8L1268.65 1455.27C1267.09 1455.85 1265.53 1456.42 1263.97 1456.99L1263.8 1456.52C1262.24 1457.09 1260.67 1457.66 1259.11 1458.22L1259.28 1458.69C1257.71 1459.26 1256.14 1459.83 1254.57 1460.39L1254.4 1459.92C1252.83 1460.49 1251.26 1461.05 1249.69 1461.61L1249.86 1462.08C1248.28 1462.64 1246.71 1463.2 1245.13 1463.76L1244.96 1463.29C1244.24 1463.54 1243.52 1463.8 1242.8 1464.05C1241.94 1464.36 1241.09 1464.66 1240.23 1464.96L1240.4 1465.43C1238.82 1465.98 1237.24 1466.54 1235.67 1467.09L1235.5 1466.61C1233.94 1467.16 1232.37 1467.7 1230.81 1468.24L1230.97 1468.71C1229.41 1469.26 1227.84 1469.8 1226.27 1470.33L1226.11 1469.86C1224.54 1470.4 1222.97 1470.94 1221.4 1471.47L1221.56 1471.95C1219.98 1472.48 1218.41 1473.01 1216.83 1473.55L1216.67 1473.07C1215.1 1473.61 1213.52 1474.14 1211.94 1474.67L1212.1 1475.14C1210.52 1475.67 1208.94 1476.2 1207.36 1476.72L1207.2 1476.25C1206.09 1476.62 1204.97 1476.99 1203.85 1477.36C1203.39 1477.51 1202.92 1477.67 1202.45 1477.82L1202.61 1478.3C1201.02 1478.82 1199.44 1479.34 1197.85 1479.86L1197.69 1479.39C1196.1 1479.9 1194.51 1480.42 1192.92 1480.94L1193.08 1481.42C1191.48 1481.93 1189.89 1482.45 1188.3 1482.96L1188.14 1482.48C1186.57 1482.99 1184.99 1483.5 1183.41 1484L1183.56 1484.48C1181.98 1484.98 1180.4 1485.48 1178.82 1485.98L1178.67 1485.51C1178.11 1485.68 1177.56 1485.86 1177 1486.04C1175.97 1486.36 1174.95 1486.68 1173.92 1487.01L1174.07 1487.48C1172.49 1487.98 1170.9 1488.48 1169.32 1488.97L1169.17 1488.49C1167.58 1488.99 1165.99 1489.48 1164.4 1489.97L1164.55 1490.45C1162.96 1490.94 1161.37 1491.43 1159.77 1491.92L1159.63 1491.44C1158.03 1491.93 1156.44 1492.41 1154.84 1492.9L1154.99 1493.38C1153.39 1493.86 1151.79 1494.35 1150.19 1494.83L1150.05 1494.35C1148.45 1494.83 1146.85 1495.31 1145.25 1495.79L1145.39 1496.27C1143.79 1496.75 1142.18 1497.22 1140.58 1497.7L1140.44 1497.22C1139.63 1497.46 1138.83 1497.69 1138.03 1497.93C1137.22 1498.17 1136.42 1498.4 1135.62 1498.64L1135.76 1499.12C1134.15 1499.59 1132.54 1500.06 1130.94 1500.53L1130.8 1500.05C1129.19 1500.51 1127.59 1500.98 1125.98 1501.44L1126.12 1501.92C1124.52 1502.39 1122.91 1502.85 1121.31 1503.3L1121.17 1502.82C1119.57 1503.28 1117.96 1503.74 1116.36 1504.19L1116.5 1504.67C1114.89 1505.13 1113.29 1505.58 1111.69 1506.03L1111.55 1505.55C1110.92 1505.73 1110.28 1505.9 1109.65 1506.08C1108.68 1506.35 1107.71 1506.62 1106.75 1506.89L1106.88 1507.37C1105.28 1507.82 1103.68 1508.26 1102.08 1508.7L1101.94 1508.22C1100.34 1508.66 1098.74 1509.1 1097.14 1509.54L1097.27 1510.02C1095.67 1510.46 1094.07 1510.89 1092.47 1511.32L1092.34 1510.84C1090.74 1511.27 1089.14 1511.7 1087.54 1512.13L1087.67 1512.62C1086.06 1513.05 1084.44 1513.48 1082.82 1513.91L1082.69 1513.43C1081.07 1513.86 1079.46 1514.28 1077.84 1514.71L1077.97 1515.19C1076.35 1515.62 1074.73 1516.04 1073.12 1516.46L1072.99 1515.98C1071.38 1516.4 1069.76 1516.82 1068.15 1517.23L1068.27 1517.72C1066.66 1518.13 1065.04 1518.55 1063.43 1518.96L1063.31 1518.47C1061.69 1518.89 1060.08 1519.29 1058.47 1519.7L1058.59 1520.19C1056.98 1520.59 1055.37 1521 1053.76 1521.4L1053.63 1520.92C1052.02 1521.32 1050.41 1521.72 1048.8 1522.12L1048.92 1522.6C1047.31 1523 1045.7 1523.4 1044.09 1523.79L1043.97 1523.31C1043.4 1523.45 1042.82 1523.59 1042.24 1523.73C1041.21 1523.98 1040.18 1524.23 1039.15 1524.48L1039.27 1524.97C1037.64 1525.36 1036.02 1525.76 1034.39 1526.15L1034.28 1525.66C1032.65 1526.05 1031.02 1526.44 1029.39 1526.82L1029.51 1527.31C1027.88 1527.7 1026.26 1528.08 1024.63 1528.46L1024.52 1527.98L1023.46 1528.22C1022.19 1528.52 1020.91 1528.82 1019.64 1529.11L1019.75 1529.6C1018.13 1529.98 1016.5 1530.35 1014.88 1530.73L1014.77 1530.24L1014.34 1530.34C1012.86 1530.68 1011.38 1531.01 1009.9 1531.35L1010.01 1531.84C1008.39 1532.21 1006.77 1532.57 1005.14 1532.94L1005.04 1532.45C1003.41 1532.81 1001.79 1533.17 1000.18 1533.53L1000.28 1534.02C998.664 1534.38 997.045 1534.74 995.426 1535.09L995.319 1534.6C993.701 1534.96 992.084 1535.31 990.467 1535.66L990.573 1536.15C988.943 1536.5 987.313 1536.86 985.684 1537.2L985.58 1536.72C983.941 1537.07 982.304 1537.41 980.667 1537.76L980.77 1538.25C979.133 1538.6 977.496 1538.94 975.861 1539.28L975.758 1538.79C974.582 1539.04 973.405 1539.28 972.229 1539.53C971.771 1539.62 971.313 1539.72 970.854 1539.81L970.955 1540.3C969.321 1540.64 967.688 1540.97 966.055 1541.31L965.955 1540.82C964.323 1541.15 962.691 1541.48 961.06 1541.81L961.159 1542.3C959.528 1542.63 957.898 1542.95 956.268 1543.28L956.171 1542.79C954.541 1543.11 952.913 1543.43 951.286 1543.75L951.382 1544.24C949.754 1544.56 948.127 1544.88 946.5 1545.19L946.405 1544.7C944.78 1545.01 943.155 1545.33 941.53 1545.64L941.624 1546.13C939.986 1546.44 938.348 1546.75 936.712 1547.06L936.619 1546.57C934.972 1546.88 933.326 1547.18 931.68 1547.49L931.771 1547.98C930.125 1548.29 928.48 1548.59 926.836 1548.89L926.746 1548.4C925.102 1548.7 923.459 1549 921.817 1549.29L921.906 1549.78C920.263 1550.08 918.622 1550.37 916.981 1550.67L916.894 1550.17C915.254 1550.47 913.615 1550.75 911.976 1551.04L912.063 1551.53C910.424 1551.82 908.786 1552.1 907.149 1552.39L907.064 1551.89C905.428 1552.18 903.792 1552.46 902.158 1552.73L902.242 1553.23C900.607 1553.5 898.973 1553.78 897.34 1554.05L897.257 1553.56C895.625 1553.83 893.993 1554.1 892.363 1554.37L892.444 1554.86C890.795 1555.13 889.147 1555.4 887.5 1555.67L887.421 1555.18C885.765 1555.44 884.111 1555.71 882.458 1555.97L882.537 1556.46C880.883 1556.73 879.231 1556.99 877.58 1557.25L877.502 1556.75C875.851 1557.01 874.202 1557.27 872.553 1557.52L872.629 1558.01C870.979 1558.27 869.331 1558.52 867.684 1558.77L867.61 1558.27C865.963 1558.52 864.317 1558.77 862.673 1559.01L862.746 1559.51C861.101 1559.75 859.457 1559.99 857.815 1560.23L857.743 1559.74C856.1 1559.97 854.459 1560.21 852.819 1560.45L852.89 1560.94C851.249 1561.17 849.61 1561.41 847.972 1561.64L847.902 1561.14C846.264 1561.37 844.628 1561.6 842.992 1561.82L843.06 1562.32C841.397 1562.55 839.736 1562.77 838.075 1563L838.009 1562.5C836.347 1562.72 834.687 1562.95 833.028 1563.16L833.093 1563.66C831.434 1563.88 829.775 1564.1 828.118 1564.31L828.054 1563.81C826.398 1564.03 824.742 1564.24 823.088 1564.45L823.151 1564.94C821.496 1565.15 819.843 1565.36 818.191 1565.56L818.129 1565.07C816.478 1565.27 814.827 1565.47 813.178 1565.67L813.238 1566.17C811.589 1566.37 809.94 1566.57 808.293 1566.76L808.235 1566.26C807.537 1566.35 806.841 1566.43 806.144 1566.51C805.195 1566.62 804.247 1566.73 803.299 1566.84L803.356 1567.34C801.711 1567.53 800.068 1567.71 798.426 1567.9L798.37 1567.4C796.717 1567.59 795.065 1567.77 793.414 1567.95L793.469 1568.45C791.799 1568.63 790.131 1568.81 788.465 1568.99L788.412 1568.49C786.745 1568.67 785.081 1568.85 783.417 1569.02L783.469 1569.52C781.805 1569.69 780.143 1569.86 778.482 1570.03L778.431 1569.53C776.771 1569.7 775.112 1569.86 773.454 1570.03L773.503 1570.52C771.844 1570.69 770.188 1570.85 768.532 1571.01L768.485 1570.51C766.83 1570.67 765.176 1570.82 763.524 1570.97L763.571 1571.47C761.918 1571.62 760.267 1571.77 758.618 1571.92L758.573 1571.42C756.924 1571.57 755.276 1571.72 753.63 1571.86L753.673 1572.36C752.026 1572.5 750.381 1572.64 748.737 1572.78L748.695 1572.28C747.02 1572.42 745.346 1572.56 743.674 1572.69L743.714 1573.19C742.042 1573.33 740.371 1573.46 738.701 1573.59L738.662 1573.09C736.993 1573.22 735.326 1573.35 733.66 1573.47L733.698 1573.97C732.031 1574.1 730.367 1574.22 728.704 1574.34L728.668 1573.84C727.005 1573.96 725.344 1574.08 723.685 1574.19L723.719 1574.69C722.06 1574.81 720.401 1574.92 718.745 1575.03L718.712 1574.53C717.056 1574.64 715.402 1574.74 713.749 1574.85L713.78 1575.35C712.127 1575.45 710.476 1575.55 708.826 1575.65L708.796 1575.15C707.146 1575.25 705.499 1575.35 703.853 1575.44L703.881 1575.94C702.207 1576.04 700.534 1576.13 698.864 1576.22L698.837 1575.72C697.16 1575.81 695.486 1575.9 693.813 1575.98L693.838 1576.48C692.164 1576.57 690.493 1576.65 688.823 1576.73L688.799 1576.23C687.13 1576.31 685.462 1576.39 683.796 1576.46L683.819 1576.96C682.152 1577.04 680.488 1577.11 678.825 1577.18L678.805 1576.68C677.142 1576.75 675.482 1576.81 673.824 1576.88L673.843 1577.37C672.184 1577.44 670.527 1577.5 668.872 1577.56L668.854 1577.06C667.199 1577.12 665.547 1577.17 663.896 1577.22L663.912 1577.72C662.26 1577.78 660.611 1577.83 658.963 1577.88L658.949 1577.38C657.273 1577.42 655.599 1577.47 653.927 1577.51L653.94 1578.01C652.26 1578.06 650.582 1578.1 648.907 1578.13L648.895 1577.63C647.22 1577.67 645.547 1577.71 643.876 1577.74L643.885 1578.24C642.214 1578.27 640.544 1578.3 638.876 1578.33L638.868 1577.83C637.201 1577.85 635.536 1577.88 633.874 1577.9L633.88 1578.4C632.216 1578.42 630.555 1578.44 628.896 1578.45L628.891 1577.95C627.232 1577.97 625.576 1577.98 623.921 1577.99L623.924 1578.49C622.269 1578.5 620.616 1578.51 618.965 1578.51L618.964 1578.01C617.313 1578.01 615.665 1578.02 614.019 1578.02L614.019 1578.52C612.335 1578.51 610.653 1578.51 608.974 1578.5L608.976 1578C607.296 1578 605.619 1577.99 603.944 1577.97L603.94 1578.47C602.264 1578.46 600.591 1578.45 598.919 1578.43L598.925 1577.93C597.254 1577.91 595.586 1577.89 593.92 1577.86L593.913 1578.36C592.246 1578.34 590.582 1578.31 588.92 1578.28L588.929 1577.78C587.268 1577.75 585.609 1577.72 583.952 1577.68L583.941 1578.18C582.284 1578.15 580.629 1578.11 578.976 1578.07L578.989 1577.57C577.337 1577.53 575.687 1577.48 574.04 1577.43L574.026 1577.93C572.364 1577.89 570.704 1577.84 569.047 1577.78L569.063 1577.28C567.381 1577.23 565.701 1577.17 564.023 1577.11L564.005 1577.61C562.327 1577.55 560.651 1577.49 558.978 1577.42L558.998 1576.92C557.326 1576.86 555.656 1576.79 553.989 1576.71L553.967 1577.21C552.299 1577.14 550.634 1577.07 548.971 1576.99L548.995 1576.49C547.333 1576.41 545.673 1576.33 544.016 1576.25L543.991 1576.74C542.334 1576.66 540.679 1576.57 539.026 1576.48L539.054 1575.98C537.402 1575.89 535.753 1575.8 534.107 1575.7L534.078 1576.2C532.431 1576.11 530.786 1576.01 529.145 1575.91L529.176 1575.41C527.495 1575.3 525.818 1575.2 524.143 1575.09L524.11 1575.58C522.431 1575.47 520.756 1575.36 519.083 1575.24L519.118 1574.74C517.446 1574.63 515.777 1574.51 514.111 1574.38L514.074 1574.88C512.407 1574.76 510.743 1574.63 509.082 1574.5L509.121 1574C507.461 1573.87 505.803 1573.74 504.149 1573.61L504.108 1574.1C502.453 1573.97 500.8 1573.83 499.151 1573.69L499.194 1573.19C497.545 1573.05 495.899 1572.9 494.256 1572.75L494.211 1573.25C492.568 1573.1 490.927 1572.95 489.29 1572.8L489.337 1572.3C488.566 1572.23 487.797 1572.15 487.028 1572.08C486.13 1571.99 485.234 1571.91 484.338 1571.82L484.289 1572.31C482.614 1572.15 480.941 1571.98 479.272 1571.81L479.323 1571.31C477.654 1571.14 475.989 1570.97 474.327 1570.79L474.273 1571.28C472.61 1571.11 470.951 1570.92 469.294 1570.74L469.35 1570.24C467.694 1570.06 466.041 1569.87 464.392 1569.68L464.334 1570.18C462.684 1569.98 461.038 1569.79 459.394 1569.59L459.454 1569.1C457.811 1568.9 456.172 1568.7 454.536 1568.49L454.474 1568.99C452.837 1568.79 451.203 1568.58 449.573 1568.37L449.637 1567.87C447.973 1567.66 446.313 1567.44 444.656 1567.22L444.59 1567.71C442.92 1567.49 441.254 1567.26 439.591 1567.03L439.66 1566.54C437.998 1566.31 436.34 1566.07 434.685 1565.83L434.614 1566.33C432.959 1566.09 431.307 1565.85 429.659 1565.61L429.732 1565.11C428.085 1564.87 426.441 1564.62 424.801 1564.37L424.725 1564.87C423.085 1564.61 421.447 1564.36 419.814 1564.1L419.892 1563.61C418.259 1563.35 416.63 1563.09 415.004 1562.83L414.924 1563.32C413.298 1563.05 411.675 1562.79 410.057 1562.52L410.139 1562.02C408.474 1561.74 406.813 1561.46 405.156 1561.17L405.071 1561.67C403.412 1561.38 401.756 1561.09 400.105 1560.8L400.193 1560.3C398.542 1560.01 396.896 1559.71 395.254 1559.41L395.163 1559.9C393.52 1559.6 391.881 1559.3 390.246 1558.99L390.339 1558.5C388.704 1558.19 387.074 1557.88 385.448 1557.57L385.353 1558.06C383.726 1557.74 382.103 1557.42 380.484 1557.1L380.582 1556.61C378.964 1556.29 377.35 1555.96 375.74 1555.63L375.64 1556.12C374.008 1555.79 372.38 1555.45 370.756 1555.11L370.859 1554.62C369.208 1554.27 367.561 1553.92 365.919 1553.57L365.813 1554.06C364.17 1553.7 362.531 1553.34 360.897 1552.98L361.005 1552.49C359.372 1552.13 357.743 1551.76 356.118 1551.39L356.007 1551.88C354.382 1551.51 352.761 1551.14 351.145 1550.76L351.259 1550.27C349.643 1549.9 348.033 1549.51 346.427 1549.13L346.31 1549.62C344.703 1549.23 343.1 1548.84 341.503 1548.45L341.622 1547.96C340.019 1547.57 338.42 1547.17 336.827 1546.77L336.705 1547.26C335.064 1546.84 333.429 1546.43 331.799 1546L331.924 1545.52C330.295 1545.1 328.67 1544.67 327.051 1544.25L326.923 1544.73C325.303 1544.3 323.687 1543.87 322.077 1543.43L322.208 1542.95C320.599 1542.51 318.995 1542.07 317.396 1541.62L317.262 1542.11C315.661 1541.66 314.066 1541.21 312.477 1540.76L312.614 1540.28C311.025 1539.83 309.441 1539.37 307.862 1538.91L307.722 1539.39C306.141 1538.93 304.564 1538.46 302.993 1537.99L303.136 1537.51C301.515 1537.03 299.9 1536.54 298.29 1536.05L298.143 1536.53C296.532 1536.03 294.927 1535.53 293.327 1535.03L293.477 1534.56C291.878 1534.06 290.285 1533.55 288.697 1533.04L288.545 1533.52C286.956 1533.01 285.373 1532.49 283.796 1531.97L283.952 1531.5C282.376 1530.98 280.805 1530.46 279.24 1529.93L279.081 1530.41C277.515 1529.88 275.955 1529.35 274.4 1528.81L274.563 1528.34C273 1527.8 271.443 1527.26 269.891 1526.71L269.725 1527.18C268.129 1526.62 266.539 1526.05 264.955 1525.48L265.125 1525.01C263.542 1524.44 261.966 1523.87 260.396 1523.29L260.223 1523.76C258.651 1523.17 257.086 1522.59 255.528 1522L255.704 1521.53C254.147 1520.94 252.596 1520.35 251.051 1519.75L250.87 1520.22C249.324 1519.62 247.785 1519.02 246.251 1518.41L246.435 1517.95C244.903 1517.34 243.377 1516.73 241.858 1516.11L241.67 1516.58C240.12 1515.95 238.577 1515.32 237.04 1514.68L237.231 1514.22C235.672 1513.57 234.12 1512.92 232.575 1512.26L232.379 1512.72C230.833 1512.07 229.293 1511.4 227.76 1510.74L227.96 1510.28C226.428 1509.61 224.904 1508.94 223.387 1508.27L223.184 1508.72C221.665 1508.05 220.154 1507.37 218.649 1506.68L218.857 1506.23C217.354 1505.54 215.858 1504.85 214.369 1504.16L214.158 1504.61C212.659 1503.92 211.168 1503.21 209.684 1502.5L209.9 1502.05C208.373 1501.32 206.854 1500.59 205.343 1499.85L205.123 1500.3C203.611 1499.56 202.106 1498.82 200.609 1498.07L200.833 1497.62C199.337 1496.87 197.849 1496.12 196.369 1495.36L196.141 1495.81C194.66 1495.05 193.186 1494.28 191.721 1493.51L191.953 1493.07C190.489 1492.3 189.033 1491.53 187.584 1490.75L187.348 1491.19C185.898 1490.41 184.456 1489.63 183.022 1488.84L183.264 1488.4C181.782 1487.58 180.309 1486.76 178.844 1485.93L178.599 1486.37C177.131 1485.54 175.673 1484.71 174.223 1483.87L174.473 1483.44C173.025 1482.6 171.585 1481.76 170.155 1480.91L169.9 1481.34C168.467 1480.49 167.043 1479.63 165.629 1478.77L165.888 1478.35C164.475 1477.49 163.071 1476.62 161.675 1475.75L161.411 1476.18C160.013 1475.31 158.624 1474.43 157.245 1473.55L157.514 1473.13C156.089 1472.22 154.673 1471.3 153.267 1470.38L152.992 1470.8C151.585 1469.87 150.186 1468.94 148.798 1468.01L149.077 1467.59C147.69 1466.66 146.313 1465.72 144.945 1464.78L144.661 1465.19C143.292 1464.24 141.933 1463.29 140.583 1462.33L140.872 1461.93C139.524 1460.97 138.186 1460.01 136.858 1459.04L136.563 1459.45C135.223 1458.47 133.893 1457.49 132.572 1456.5L132.872 1456.1C131.52 1455.09 130.18 1454.07 128.85 1453.05L128.545 1453.45C127.213 1452.42 125.892 1451.39 124.581 1450.36L124.891 1449.96C123.583 1448.93 122.285 1447.89 120.997 1446.84L120.682 1447.23C119.393 1446.18 118.115 1445.13 116.847 1444.07L117.168 1443.69C115.902 1442.63 114.647 1441.56 113.403 1440.49L113.077 1440.87C111.807 1439.78 110.548 1438.68 109.301 1437.58L109.633 1437.2C108.374 1436.09 107.128 1434.97 105.893 1433.84L105.556 1434.21C104.319 1433.08 103.094 1431.95 101.88 1430.8L102.223 1430.44C101.011 1429.3 99.8118 1428.15 98.6239 1427L98.2758 1427.36C97.0861 1426.21 95.9083 1425.05 94.7424 1423.88L95.0961 1423.53C93.9251 1422.36 92.7662 1421.18 91.6194 1419.99L91.2603 1420.34C90.0887 1419.13 88.9297 1417.92 87.7834 1416.69L88.1482 1416.35C87.0039 1415.13 85.8722 1413.9 84.7534 1412.67L84.383 1413.01C83.2622 1411.77 82.1543 1410.53 81.0593 1409.28L81.4352 1408.95C80.342 1407.7 79.2617 1406.45 78.1943 1405.19L77.8128 1405.51C76.7436 1404.25 75.6874 1402.98 74.6442 1401.71L75.0311 1401.39C73.9693 1400.09 72.921 1398.79 71.8863 1397.48L71.4938 1397.79C70.4561 1396.47 69.4321 1395.15 68.4218 1393.82L68.8197 1393.52C67.8113 1392.19 66.8165 1390.86 65.8356 1389.52L65.4322 1389.82C64.4495 1388.47 63.4806 1387.13 62.5257 1385.77L62.9344 1385.48C61.9812 1384.13 61.0419 1382.77 60.1166 1381.4L59.7026 1381.68C58.7655 1380.3 57.8427 1378.91 56.9343 1377.51L57.3535 1377.24C56.4439 1375.84 55.5487 1374.43 54.6681 1373.02L54.2438 1373.29C53.3614 1371.87 52.4937 1370.45 51.6406 1369.02L52.07 1368.76C51.2185 1367.34 50.3817 1365.9 49.5597 1364.46L49.1254 1364.71C48.3018 1363.27 47.4929 1361.82 46.6988 1360.36L47.1378 1360.12C46.342 1358.66 45.5611 1357.19 44.7953 1355.72L44.3516 1355.95C43.5826 1354.47 42.8287 1352.99 42.09 1351.49L42.5382 1351.27C41.801 1349.78 41.079 1348.28 40.3722 1346.78L39.9197 1346.99C39.2115 1345.48 38.5186 1343.97 37.8411 1342.45L38.2978 1342.25C37.6216 1340.73 36.9608 1339.2 36.3155 1337.67L35.8547 1337.87C35.209 1336.34 34.5787 1334.8 33.964 1333.25L34.4286 1333.07C33.8157 1331.52 33.2182 1329.98 32.6363 1328.42L32.1681 1328.6C31.585 1327.04 31.0175 1325.48 30.4656 1323.9L30.9374 1323.74C30.3866 1322.17 29.8515 1320.6 29.3321 1319.01L28.8571 1319.17C28.3367 1317.59 27.832 1315.99 27.3431 1314.4L27.8212 1314.25C27.5773 1313.45 27.3373 1312.65 27.1013 1311.85C26.8651 1311.05 26.6332 1310.25 26.4055 1309.45L25.9245 1309.58C25.4684 1307.97 25.0294 1306.36 24.6072 1304.75L25.0909 1304.62C24.6695 1303.01 24.2651 1301.4 23.8773 1299.78L23.3912 1299.9C23.0027 1298.28 22.631 1296.66 22.276 1295.03L22.7645 1294.93C22.4103 1293.31 22.0728 1291.68 21.752 1290.05L21.2614 1290.15C20.9396 1288.52 20.6345 1286.88 20.346 1285.25L20.8384 1285.16C20.5501 1283.52 20.2785 1281.88 20.0234 1280.24L19.5294 1280.32C19.2738 1278.67 19.0349 1277.03 18.8125 1275.38L19.3081 1275.31C19.0861 1273.66 18.8808 1272.01 18.6919 1270.36L18.1951 1270.42C18.0058 1268.76 17.833 1267.11 17.6767 1265.45L18.1745 1265.4C18.0187 1263.74 17.8794 1262.09 17.7562 1260.43L17.2576 1260.47C17.1348 1258.81 17.0281 1257.16 16.9375 1255.5L17.4367 1255.47C17.3463 1253.81 17.272 1252.16 17.2136 1250.5L16.7139 1250.51C16.6554 1248.85 16.613 1247.18 16.5865 1245.52L17.0865 1245.51C17.06 1243.84 17.0496 1242.18 17.0549 1240.51L16.5549 1240.51C16.5603 1238.84 16.5815 1237.17 16.6184 1235.5L17.1183 1235.51C17.1547 1233.86 17.2065 1232.21 17.2736 1230.56L16.774 1230.54C16.8413 1228.88 16.9238 1227.22 17.0216 1225.56L17.5208 1225.59C17.6184 1223.93 17.7313 1222.27 17.8594 1220.61L17.3609 1220.57C17.4892 1218.91 17.6327 1217.24 17.7914 1215.58L18.2891 1215.62C18.4473 1213.96 18.6206 1212.3 18.8089 1210.63L18.3121 1210.57C18.4971 1208.94 18.6965 1207.3 18.9104 1205.66L19.4062 1205.72C19.6197 1204.09 19.8476 1202.45 20.0899 1200.81L19.5953 1200.73C19.8379 1199.09 20.0949 1197.45 20.3662 1195.8L20.8596 1195.88C21.1304 1194.24 21.4155 1192.59 21.7149 1190.95L21.2229 1190.86C21.5228 1189.21 21.8369 1187.56 22.1651 1185.91L22.6555 1186C22.9768 1184.39 23.3117 1182.77 23.6601 1181.15L23.1713 1181.04C23.5183 1179.43 23.8786 1177.82 24.2523 1176.2L24.7394 1176.32C25.1126 1174.7 25.499 1173.09 25.8988 1171.48L25.4134 1171.36C25.8138 1169.74 26.2274 1168.12 26.6543 1166.5L27.1378 1166.63C27.5641 1165.01 28.0036 1163.4 28.4563 1161.78L27.9747 1161.64C28.4235 1160.04 28.8851 1158.43 29.3597 1156.82L29.8392 1156.97C30.304 1155.39 30.7811 1153.82 31.2705 1152.24L30.793 1152.09C31.2832 1150.52 31.7856 1148.94 32.3004 1147.36L32.7758 1147.51C33.2898 1145.94 33.8161 1144.36 34.3546 1142.78L33.8814 1142.62C34.4207 1141.04 34.9722 1139.46 35.5359 1137.87L36.0069 1138.04C36.5698 1136.46 37.1449 1134.88 37.7321 1133.3L37.2634 1133.12C37.8371 1131.58 38.4224 1130.03 39.0193 1128.48L39.4857 1128.66C40.0772 1127.13 40.6799 1125.6 41.294 1124.06L40.8298 1123.88C41.4446 1122.34 42.0707 1120.8 42.708 1119.27L43.1699 1119.46C43.8065 1117.92 44.4542 1116.39 45.1132 1114.85L44.6537 1114.65C45.3134 1113.12 45.9844 1111.58 46.6665 1110.04L47.1236 1110.24C47.8049 1108.7 48.4973 1107.17 49.2009 1105.63L48.7462 1105.42C49.4272 1103.93 50.1186 1102.44 50.8203 1100.95L51.2727 1101.16C51.9734 1099.68 52.6845 1098.19 53.4059 1096.7L52.956 1096.48C53.6782 1094.99 54.4106 1093.5 55.1534 1092.01L55.6009 1092.23C56.3428 1090.75 57.095 1089.26 57.8574 1087.77L57.4123 1087.54C58.1755 1086.05 58.9489 1084.56 59.7324 1083.06L60.1751 1083.3C60.9572 1081.81 61.7494 1080.32 62.5518 1078.83L62.1116 1078.59C62.888 1077.15 63.6738 1075.71 64.4691 1074.27L64.9068 1074.51C65.7013 1073.07 66.5051 1071.63 67.3184 1070.19L66.883 1069.95C67.697 1068.51 68.5205 1067.06 69.3532 1065.62L69.7861 1065.87C70.6181 1064.43 71.4593 1062.99 72.3099 1061.55L71.8794 1061.3C72.7308 1059.86 73.5915 1058.42 74.4614 1056.97L74.8895 1057.23C75.7586 1055.79 76.637 1054.35 77.5246 1052.91L77.099 1052.65C77.9616 1051.25 78.833 1049.85 79.713 1048.45L80.1363 1048.72C81.0107 1047.33 81.8937 1045.94 82.7852 1044.55L82.3643 1044.28C83.2566 1042.89 84.1574 1041.49 85.0668 1040.1L85.4853 1040.38C86.3938 1038.99 87.3109 1037.6 88.2364 1036.21L87.8203 1035.93C88.7466 1034.54 89.6814 1033.15 90.6246 1031.76L91.0384 1032.04C91.9808 1030.65 92.9316 1029.26 93.8909 1027.87L93.4795 1027.59C94.425 1026.22 95.3787 1024.85 96.3404 1023.48L96.7495 1023.77C97.6921 1022.43 98.6425 1021.09 99.6006 1019.75L99.1938 1019.45C100.153 1018.11 101.119 1016.77 102.094 1015.43L102.498 1015.72C103.472 1014.38 104.454 1013.04 105.443 1011.7L105.041 1011.41C106.03 1010.07 107.028 1008.73 108.033 1007.39L108.433 1007.69C109.438 1006.35 110.45 1005.01 111.47 1003.67L111.072 1003.37C112.093 1002.03 113.122 1000.69 114.158 999.353L114.553 999.659C115.56 998.358 116.574 997.058 117.595 995.758L117.202 995.449C118.218 994.157 119.24 992.864 120.27 991.572L120.661 991.884C121.69 990.593 122.727 989.302 123.77 988.012L123.381 987.698C124.425 986.407 125.476 985.116 126.534 983.826L126.921 984.143C127.978 982.854 129.043 981.565 130.114 980.277L129.73 979.957C130.802 978.668 131.881 977.38 132.967 976.092L133.349 976.414C134.434 975.127 135.527 973.84 136.626 972.554L136.246 972.229C137.311 970.983 138.383 969.737 139.461 968.492L139.839 968.819C140.916 967.576 141.999 966.333 143.088 965.091L142.712 964.761C143.802 963.518 144.899 962.276 146.002 961.034L146.376 961.366C147.478 960.125 148.587 958.885 149.702 957.645L149.33 957.311C150.446 956.07 151.568 954.83 152.697 953.591L153.066 953.928C154.194 952.689 155.328 951.451 156.469 950.214L156.101 949.875C157.243 948.637 158.39 947.4 159.544 946.163L159.91 946.504C161.031 945.303 162.158 944.102 163.292 942.901L162.928 942.558C164.058 941.362 165.193 940.166 166.334 938.971L166.696 939.316C167.837 938.122 168.983 936.928 170.136 935.735L169.776 935.387C170.929 934.194 172.088 933.001 173.253 931.808L173.611 932.158C174.775 930.966 175.945 929.775 177.121 928.585L176.765 928.234C177.942 927.043 179.124 925.853 180.312 924.663L180.666 925.017C181.853 923.828 183.046 922.64 184.245 921.453L183.894 921.097C185.073 919.93 186.257 918.764 187.447 917.598L187.797 917.955C188.971 916.805 190.15 915.656 191.335 914.508L190.987 914.149C192.172 913 193.363 911.852 194.559 910.705L194.905 911.066C196.1 909.919 197.301 908.773 198.507 907.628L198.162 907.265C199.369 906.12 200.581 904.975 201.798 903.831L202.141 904.195C203.358 903.052 204.58 901.909 205.807 900.767L205.467 900.401C206.695 899.259 207.928 898.117 209.166 896.977L209.505 897.345C210.742 896.205 211.984 895.067 213.232 893.93L212.895 893.56C214.108 892.454 215.326 891.349 216.549 890.245L216.884 890.616C218.106 889.513 219.333 888.41 220.565 887.308L220.232 886.935C221.465 885.833 222.702 884.731 223.945 883.63L224.276 884.005C225.518 882.905 226.765 881.805 228.017 880.707L227.687 880.331C228.94 879.232 230.197 878.134 231.459 877.037L231.787 877.414C233.048 876.318 234.315 875.222 235.586 874.127L235.26 873.748C236.532 872.653 237.808 871.559 239.09 870.466L239.415 870.846C240.686 869.761 241.963 868.677 243.244 867.594L242.921 867.212C244.177 866.151 245.436 865.09 246.701 864.031L247.022 864.414C248.286 863.356 249.554 862.298 250.827 861.241L250.508 860.856C251.781 859.798 253.059 858.742 254.342 857.686L254.66 858.072C255.942 857.017 257.228 855.963 258.519 854.91L258.203 854.523C259.494 853.469 260.79 852.416 262.091 851.365L262.405 851.754C263.705 850.702 265.01 849.652 266.318 848.603L266.006 848.213C267.315 847.163 268.629 846.115 269.947 845.067L270.258 845.458C271.567 844.419 272.879 843.38 274.196 842.343L273.887 841.95C275.179 840.932 276.475 839.915 277.775 838.899L278.083 839.293C279.383 838.278 280.687 837.263 281.995 836.25L281.689 835.854C282.998 834.84 284.311 833.828 285.628 832.816L285.932 833.212C287.249 832.201 288.569 831.19 289.894 830.181L289.591 829.783C290.916 828.773 292.246 827.765 293.579 826.757L293.881 827.156C295.214 826.149 296.551 825.142 297.892 824.137L297.592 823.737C298.934 822.732 300.279 821.727 301.629 820.724L301.928 821.125C303.275 820.124 304.626 819.123 305.981 818.124L305.684 817.722C307.008 816.746 308.336 815.771 309.668 814.797L309.963 815.2C311.294 814.227 312.629 813.254 313.967 812.283L313.674 811.878C315.013 810.906 316.356 809.936 317.703 808.966L317.995 809.372C319.342 808.403 320.692 807.434 322.046 806.467L321.755 806.06C323.11 805.093 324.468 804.127 325.83 803.161L326.119 803.569C327.481 802.604 328.846 801.641 330.215 800.678L329.928 800.269C331.297 799.306 332.671 798.344 334.048 797.383L334.334 797.793C335.711 796.833 337.091 795.874 338.476 794.916L338.191 794.505C339.554 793.561 340.921 792.619 342.292 791.677L342.575 792.089C343.933 791.156 345.295 790.225 346.66 789.294L346.379 788.881C347.745 787.95 349.114 787.02 350.487 786.091L350.767 786.505C352.14 785.576 353.516 784.649 354.895 783.723L354.617 783.308C355.997 782.381 357.38 781.456 358.767 780.532L359.045 780.948C360.431 780.024 361.821 779.101 363.215 778.179L362.939 777.762C364.333 776.84 365.731 775.92 367.132 775L367.406 775.418C368.806 774.499 370.21 773.581 371.618 772.664L371.345 772.245C372.752 771.328 374.163 770.413 375.576 769.499L375.848 769.919C377.23 769.025 378.616 768.132 380.005 767.241L379.735 766.82C381.124 765.928 382.517 765.038 383.913 764.149L384.181 764.57C385.577 763.681 386.976 762.793 388.378 761.907L388.11 761.484C389.513 760.597 390.918 759.711 392.327 758.827L392.593 759.25C394.002 758.366 395.413 757.483 396.828 756.601L396.564 756.176C397.979 755.294 399.398 754.413 400.82 753.533L401.083 753.959C402.504 753.079 403.929 752.201 405.356 751.324L405.095 750.898C406.523 750.021 407.954 749.145 409.389 748.27L409.649 748.697C411.077 747.826 412.508 746.957 413.943 746.088L413.684 745.661C415.094 744.807 416.507 743.955 417.923 743.103L418.181 743.532C419.597 742.681 421.015 741.831 422.437 740.983L422.181 740.554C423.603 739.705 425.028 738.857 426.457 738.011L426.711 738.441C428.139 737.595 429.57 736.75 431.004 735.907L430.75 735.476C432.185 734.632 433.622 733.79 435.062 732.948L435.314 733.38C436.754 732.539 438.197 731.699 439.643 730.861L439.392 730.428C440.838 729.59 442.287 728.752 443.739 727.916L443.989 728.349C445.44 727.514 446.895 726.679 448.353 725.846L448.104 725.411C449.557 724.581 451.012 723.752 452.471 722.924L452.717 723.359C454.151 722.545 455.588 721.732 457.027 720.921L456.782 720.485C458.222 719.674 459.664 718.863 461.11 718.054L461.354 718.491C462.799 717.682 464.247 716.874 465.697 716.068L465.454 715.631C466.905 714.824 468.359 714.019 469.816 713.215L470.057 713.653C471.514 712.849 472.972 712.046 474.434 711.245L474.194 710.807C475.656 710.005 477.121 709.205 478.588 708.407L478.827 708.846C480.295 708.047 481.765 707.25 483.237 706.454L483 706.014C484.473 705.218 485.949 704.423 487.427 703.63L487.664 704.07C489.142 703.277 490.623 702.485 492.106 701.695L491.871 701.254C493.327 700.478 494.786 699.703 496.247 698.93L496.481 699.372C497.941 698.599 499.404 697.827 500.87 697.057L500.637 696.615C502.103 695.844 503.572 695.075 505.043 694.307L505.275 694.75C506.745 693.983 508.219 693.217 509.695 692.452L509.465 692.008C510.941 691.243 512.42 690.479 513.901 689.716L514.13 690.161C515.611 689.399 517.095 688.638 518.581 687.878L518.354 687.433C519.84 686.673 521.329 685.915 522.821 685.158L523.047 685.603C524.539 684.847 526.033 684.091 527.529 683.337L527.304 682.89C528.801 682.136 530.3 681.383 531.802 680.632L532.026 681.079C533.511 680.336 534.998 679.594 536.488 678.853L536.265 678.405C537.745 677.67 539.227 676.936 540.712 676.204L540.933 676.652C542.417 675.919 543.903 675.188 545.392 674.459L545.172 674.01C546.661 673.28 548.153 672.551 549.647 671.824L549.866 672.274C551.359 671.547 552.855 670.821 554.354 670.097L554.136 669.646C555.635 668.922 557.136 668.199 558.64 667.477L558.856 667.928C560.359 667.206 561.864 666.486 563.372 665.768L563.157 665.316C564.665 664.597 566.176 663.88 567.689 663.164L567.903 663.616C569.416 662.9 570.93 662.185 572.448 661.472L572.235 661.02C573.751 660.307 575.27 659.596 576.791 658.886L577.002 659.339C578.498 658.641 579.997 657.944 581.497 657.248L581.287 656.795C582.788 656.099 584.291 655.405 585.796 654.712L586.005 655.166C587.51 654.474 589.018 653.782 590.527 653.093L590.319 652.638C591.829 651.948 593.341 651.259 594.855 650.572L595.062 651.027C596.576 650.34 598.092 649.654 599.61 648.97L599.405 648.514C600.923 647.83 602.444 647.147 603.967 646.465L604.171 646.922C605.694 646.24 607.219 645.56 608.746 644.882L608.543 644.425C610.07 643.746 611.6 643.069 613.132 642.393L613.334 642.851C614.865 642.175 616.399 641.501 617.934 640.828L617.734 640.37C619.262 639.701 620.792 639.033 622.324 638.366L622.523 638.825C624.039 638.166 625.556 637.508 627.076 636.852L626.877 636.393C628.397 635.736 629.919 635.081 631.443 634.427L631.64 634.887C633.164 634.234 634.69 633.582 636.218 632.931L636.022 632.471C637.55 631.82 639.08 631.171 640.612 630.523L640.807 630.984C642.339 630.336 643.873 629.69 645.409 629.045L645.215 628.584C646.752 627.939 648.29 627.295 649.831 626.653L650.023 627.115C651.563 626.473 653.105 625.833 654.649 625.194L654.458 624.732C656.002 624.093 657.549 623.455 659.097 622.819L659.288 623.281C660.836 622.645 662.386 622.011 663.938 621.378L663.749 620.915C665.291 620.286 666.835 619.659 668.381 619.033L668.569 619.496C670.101 618.876 671.636 618.257 673.172 617.639L672.986 617.175C674.523 616.557 676.062 615.941 677.602 615.326L677.788 615.791C679.328 615.176 680.87 614.563 682.414 613.951L682.23 613.486C683.775 612.874 685.321 612.264 686.87 611.655L687.053 612.12C688.601 611.511 690.151 610.904 691.703 610.298L691.521 609.832C693.073 609.226 694.627 608.622 696.183 608.019L696.364 608.485C697.919 607.882 699.477 607.281 701.036 606.681L700.856 606.215C702.416 605.615 703.978 605.016 705.541 604.419L705.72 604.886C707.283 604.289 708.848 603.694 710.415 603.1L710.237 602.633C711.795 602.042 713.355 601.454 714.916 600.866L715.092 601.334C716.64 600.752 718.19 600.171 719.742 599.592L719.567 599.123C721.119 598.544 722.673 597.966 724.229 597.389L724.403 597.858C725.958 597.282 727.515 596.707 729.074 596.134L728.902 595.664C730.461 595.091 732.022 594.519 733.585 593.948L733.756 594.418C735.319 593.848 736.883 593.279 738.449 592.712L738.279 592.241C739.845 591.674 741.413 591.108 742.983 590.544L743.152 591.014C744.722 590.45 746.293 589.887 747.866 589.326L747.698 588.855C749.271 588.294 750.847 587.734 752.423 587.176L752.59 587.647C754.167 587.089 755.745 586.533 757.325 585.978L757.159 585.506C758.734 584.953 760.311 584.401 761.889 583.851L762.054 584.323C763.616 583.779 765.18 583.236 766.745 582.694L766.582 582.222C768.148 581.68 769.715 581.14 771.285 580.601L771.447 581.074C773.016 580.536 774.586 579.999 776.158 579.464L775.997 578.991C777.57 578.455 779.144 577.921 780.72 577.389L780.88 577.863C782.455 577.33 784.032 576.8 785.611 576.271L785.452 575.796C787.031 575.267 788.612 574.74 790.194 574.213L790.352 574.688C791.934 574.162 793.518 573.638 795.103 573.115L794.946 572.64C796.532 572.117 798.119 571.595 799.708 571.076L799.863 571.551C801.452 571.031 803.042 570.513 804.633 569.997L804.479 569.521C806.071 569.004 807.664 568.489 809.26 567.976L809.413 568.452C810.989 567.944 812.566 567.439 814.146 566.935L813.993 566.458C815.572 565.954 817.152 565.452 818.733 564.951L818.884 565.428C820.465 564.927 822.047 564.428 823.631 563.931L823.482 563.454C825.066 562.956 826.652 562.46 828.24 561.965L828.388 562.443C829.975 561.948 831.564 561.456 833.154 560.964L833.006 560.487C834.597 559.995 836.189 559.506 837.783 559.018L837.929 559.496C839.522 559.008 841.117 558.521 842.713 558.036L842.568 557.558C844.164 557.073 845.762 556.59 847.362 556.108L847.506 556.587C849.105 556.105 850.706 555.625 852.308 555.147L852.165 554.668C853.767 554.189 855.371 553.712 856.977 553.237L857.119 553.717C857.921 553.479 858.724 553.242 859.527 553.005C860.331 552.768 861.135 552.532 861.938 552.296L861.797 551.816C863.404 551.345 865.01 550.876 866.616 550.408L866.756 550.889C868.361 550.422 869.966 549.957 871.571 549.494L871.432 549.014C873.037 548.551 874.642 548.09 876.247 547.632L876.384 548.112C877.988 547.654 879.591 547.198 881.195 546.744L881.058 546.263C882.662 545.809 884.265 545.357 885.868 544.907L886.003 545.388C887.605 544.938 889.207 544.491 890.809 544.045L890.675 543.564C892.277 543.118 893.878 542.675 895.479 542.234L895.612 542.716C897.213 542.275 898.813 541.836 900.413 541.399L900.281 540.916C901.881 540.479 903.481 540.045 905.08 539.612L905.211 540.095C906.811 539.662 908.411 539.231 910.01 538.803L909.88 538.32C911.499 537.886 913.117 537.454 914.735 537.025L914.863 537.508C916.481 537.079 918.097 536.652 919.714 536.227L919.587 535.744C921.203 535.319 922.82 534.896 924.435 534.475L924.561 534.959C926.177 534.539 927.792 534.12 929.406 533.704L929.281 533.22C930.896 532.804 932.51 532.39 934.124 531.978L934.247 532.463C935.861 532.051 937.474 531.641 939.086 531.234L938.963 530.749C940.576 530.342 942.188 529.937 943.8 529.534L943.921 530.019C945.532 529.616 947.143 529.215 948.753 528.817L948.633 528.331C950.243 527.933 951.853 527.536 953.462 527.142L953.581 527.628C955.19 527.233 956.799 526.841 958.407 526.452L958.289 525.966C959.913 525.572 961.537 525.18 963.16 524.791L963.277 525.277C964.905 524.886 966.533 524.498 968.16 524.112L968.045 523.625C969.672 523.239 971.299 522.855 972.925 522.474L973.04 522.96C974.665 522.579 976.291 522.199 977.915 521.822L977.802 521.335C979.427 520.958 981.052 520.583 982.675 520.21L982.787 520.697C984.411 520.325 986.033 519.954 987.655 519.586L987.545 519.098C989.167 518.73 990.789 518.364 992.41 518L992.519 518.488C994.14 518.124 995.76 517.763 997.379 517.403L997.271 516.915C998.891 516.556 1000.51 516.198 1002.13 515.844L1002.24 516.332C1003.85 515.977 1005.47 515.624 1007.09 515.274L1006.98 514.785C1008.61 514.432 1010.24 514.081 1011.87 513.732L1011.97 514.221C1013.61 513.87 1015.25 513.521 1016.89 513.175L1016.78 512.686C1018.42 512.339 1020.06 511.995 1021.69 511.653L1021.8 512.143C1023.43 511.801 1025.07 511.462 1026.7 511.124L1026.6 510.635C1028.23 510.297 1029.87 509.962 1031.5 509.63L1031.6 510.12C1033.23 509.787 1034.86 509.457 1036.49 509.129L1036.4 508.638C1038.03 508.31 1039.66 507.984 1041.29 507.661L1041.38 508.151C1043.01 507.828 1044.64 507.506 1046.27 507.187L1046.17 506.697C1047.8 506.378 1049.43 506.061 1051.05 505.746L1051.15 506.237C1052.78 505.923 1054.4 505.611 1056.02 505.301L1055.93 504.81C1057.57 504.497 1059.21 504.187 1060.84 503.879L1060.94 504.37C1062.58 504.06 1064.23 503.752 1065.87 503.447L1065.78 502.956C1067.43 502.65 1069.07 502.347 1070.72 502.046L1070.81 502.538C1072.45 502.238 1074.1 501.939 1075.74 501.643L1075.65 501.151C1077.29 500.855 1078.93 500.561 1080.57 500.27L1080.66 500.762C1082.3 500.471 1083.94 500.182 1085.58 499.895L1085.49 499.403C1087.13 499.116 1088.77 498.832 1090.41 498.55L1090.49 499.042C1092.13 498.76 1093.76 498.481 1095.4 498.203L1095.31 497.71C1096.95 497.433 1098.58 497.158 1100.21 496.885L1100.3 497.378C1101.93 497.105 1103.56 496.835 1105.19 496.567L1105.11 496.073C1106.76 495.802 1108.41 495.534 1110.05 495.267L1110.13 495.761C1111.79 495.493 1113.44 495.228 1115.1 494.965L1115.02 494.471C1116.67 494.208 1118.32 493.948 1119.98 493.69L1120.05 494.184C1121.7 493.925 1123.35 493.67 1125 493.416L1124.93 492.922C1126.58 492.669 1128.22 492.418 1129.87 492.169L1129.95 492.663C1131.59 492.415 1133.24 492.169 1134.88 491.925L1134.81 491.43C1136.45 491.186 1138.1 490.945 1139.74 490.706L1139.81 491.201C1141.45 490.962 1143.1 490.725 1144.74 490.491L1144.66 489.996C1146.31 489.761 1147.94 489.529 1149.58 489.3L1149.65 489.795C1151.29 489.565 1152.93 489.338 1154.56 489.113L1154.49 488.618C1156.16 488.39 1157.82 488.164 1159.48 487.94L1159.55 488.435C1161.21 488.212 1162.87 487.99 1164.53 487.772L1164.46 487.276C1166.12 487.057 1167.78 486.84 1169.44 486.626L1169.5 487.122C1171.16 486.908 1172.81 486.697 1174.47 486.488L1174.4 485.992C1176.06 485.783 1177.71 485.576 1179.36 485.372L1179.43 485.868C1181.08 485.664 1182.73 485.462 1184.38 485.263L1184.32 484.767C1185.97 484.567 1187.61 484.37 1189.26 484.176L1189.32 484.672C1190.97 484.478 1192.61 484.286 1194.26 484.097L1194.2 483.6C1195.84 483.41 1197.49 483.223 1199.13 483.039L1199.18 483.535C1200.84 483.349 1202.49 483.166 1204.14 482.985L1204.09 482.488C1205.76 482.305 1207.42 482.124 1209.09 481.946L1209.14 482.443C1210.81 482.266 1212.47 482.09 1214.14 481.917L1214.09 481.42C1215.75 481.247 1217.41 481.076 1219.07 480.908L1219.12 481.406C1220.78 481.238 1222.44 481.073 1224.1 480.91L1224.05 480.412C1225.71 480.249 1227.37 480.089 1229.02 479.931L1229.07 480.429C1230.72 480.271 1232.38 480.116 1234.03 479.963L1233.98 479.465C1235.64 479.312 1237.29 479.162 1238.94 479.014L1238.98 479.512C1240.63 479.364 1242.28 479.219 1243.92 479.076L1243.88 478.578C1245.53 478.435 1247.17 478.295 1248.82 478.157L1248.86 478.655C1250.54 478.515 1252.21 478.377 1253.88 478.242L1253.84 477.743C1255.51 477.608 1257.18 477.475 1258.85 477.345L1258.89 477.844C1260.56 477.714 1262.23 477.586 1263.89 477.461L1263.86 476.963C1265.52 476.838 1267.19 476.716 1268.85 476.596L1268.89 477.095C1270.55 476.975 1272.21 476.858 1273.87 476.743L1273.84 476.245C1275.49 476.13 1277.15 476.018 1278.81 475.909L1278.84 476.408C1280.5 476.298 1282.15 476.192 1283.81 476.088L1283.77 475.589C1285.43 475.484 1287.08 475.383 1288.73 475.284L1288.76 475.783C1290.41 475.684 1292.06 475.588 1293.7 475.494L1293.67 474.995C1295.35 474.899 1297.02 474.807 1298.69 474.716L1298.72 475.216C1300.39 475.125 1302.07 475.038 1303.74 474.953L1303.72 474.453C1305.39 474.368 1307.06 474.286 1308.73 474.206L1308.76 474.706C1310.43 474.626 1312.09 474.549 1313.76 474.475L1313.74 473.975C1315.4 473.901 1317.07 473.829 1318.73 473.76L1318.75 474.26C1320.41 474.191 1322.07 474.124 1323.73 474.061L1323.71 473.561C1325.37 473.498 1327.03 473.437 1328.68 473.378L1328.7 473.878C1330.36 473.82 1332.01 473.764 1333.66 473.711L1333.64 473.212C1335.29 473.159 1336.94 473.108 1338.59 473.061L1338.61 473.561C1340.28 473.512 1341.96 473.466 1343.63 473.423L1343.61 472.924C1345.29 472.881 1346.97 472.84 1348.65 472.803L1348.66 473.302C1350.33 473.265 1352.01 473.23 1353.68 473.198L1353.67 472.698C1355.34 472.666 1357.01 472.637 1358.68 472.61L1358.69 473.11C1360.35 473.084 1362.02 473.06 1363.68 473.039L1363.67 472.539C1365.34 472.518 1367 472.5 1368.66 472.485L1368.66 472.985C1370.32 472.97 1371.98 472.957 1373.63 472.947L1373.63 472.447C1375.29 472.437 1376.94 472.43 1378.59 472.426L1378.59 472.926C1380.24 472.921 1381.89 472.92 1383.54 472.921L1383.54 472.421C1385.22 472.422 1386.9 472.426 1388.58 472.433L1388.58 472.933C1390.26 472.94 1391.94 472.95 1393.61 472.963L1393.61 472.463C1395.29 472.475 1396.96 472.491 1398.64 472.509L1398.63 473.009C1400.3 473.028 1401.97 473.049 1403.63 473.073L1403.64 472.574C1405.31 472.598 1406.97 472.625 1408.63 472.655L1408.63 473.155C1410.29 473.185 1411.95 473.218 1413.6 473.253L1413.61 472.753C1415.27 472.789 1416.93 472.828 1418.58 472.869L1418.57 473.369C1420.22 473.41 1421.87 473.455 1423.51 473.502L1423.53 473.002C1425.19 473.05 1426.85 473.1 1428.51 473.153L1428.49 473.653C1430.17 473.707 1431.85 473.765 1433.53 473.825L1433.55 473.325C1435.23 473.385 1436.9 473.449 1438.58 473.515L1438.56 474.014C1440.23 474.081 1441.9 474.15 1443.57 474.222L1443.59 473.722C1445.26 473.795 1446.92 473.87 1448.58 473.948L1448.56 474.448C1450.22 474.526 1451.88 474.607 1453.54 474.691L1453.56 474.192C1455.22 474.276 1456.88 474.363 1458.53 474.453L1458.5 474.952C1460.15 475.042 1461.8 475.135 1463.45 475.231L1463.48 474.732C1465.12 474.828 1466.77 474.927 1468.41 475.029L1468.38 475.528C1470.06 475.633 1471.74 475.74 1473.41 475.851L1473.44 475.352C1475.12 475.463 1476.8 475.577 1478.47 475.694L1478.44 476.193C1480.11 476.31 1481.78 476.43 1483.44 476.554L1483.48 476.055C1485.15 476.178 1486.81 476.305 1488.47 476.435L1488.43 476.933C1490.09 477.063 1491.75 477.195 1493.41 477.331L1493.45 476.833C1495.1 476.969 1496.75 477.108 1498.4 477.25L1498.36 477.748C1500.01 477.89 1501.66 478.035 1503.3 478.183L1503.34 477.685C1504.99 477.833 1506.63 477.985 1508.26 478.139L1508.22 478.637C1509.89 478.794 1511.55 478.955 1513.22 479.119L1513.27 478.621C1514.94 478.787 1516.61 478.955 1518.28 479.127L1518.23 479.624C1519.9 479.796 1521.57 479.971 1523.23 480.149L1523.28 479.652C1524.94 479.83 1526.6 480.011 1528.26 480.196L1528.21 480.693C1529.86 480.878 1531.51 481.066 1533.16 481.257L1533.22 480.76C1534.87 480.951 1536.52 481.146 1538.16 481.344L1538.1 481.84C1539.74 482.038 1541.38 482.239 1543.02 482.443L1543.08 481.947C1544.72 482.151 1546.35 482.358 1547.98 482.569L1547.92 483.065C1549.58 483.28 1551.24 483.498 1552.9 483.72L1552.96 483.225C1554.63 483.448 1556.3 483.675 1557.96 483.905L1557.89 484.401C1559.56 484.631 1561.21 484.865 1562.87 485.102L1562.94 484.607C1564.6 484.844 1566.25 485.085 1567.9 485.329L1567.82 485.823C1569.47 486.067 1571.11 486.315 1572.75 486.565L1572.83 486.071C1574.47 486.322 1576.11 486.576 1577.74 486.834L1577.66 487.328C1579.3 487.585 1580.92 487.846 1582.55 488.111L1582.63 487.617C1584.26 487.882 1585.88 488.149 1587.5 488.421L1587.42 488.914C1589.08 489.193 1590.74 489.475 1592.4 489.762L1592.48 489.269C1594.14 489.556 1595.8 489.846 1597.45 490.139L1597.36 490.632C1599.01 490.925 1600.66 491.222 1602.3 491.523L1602.39 491.031C1604.03 491.332 1605.67 491.637 1607.31 491.945L1607.22 492.436C1608.85 492.744 1610.48 493.056 1612.11 493.371L1612.2 492.88C1613.83 493.195 1615.45 493.514 1617.07 493.837L1616.97 494.327C1618.59 494.649 1620.2 494.975 1621.81 495.304L1621.91 494.814C1623.55 495.148 1625.17 495.486 1626.8 495.827L1626.7 496.317C1628.35 496.664 1629.99 497.015 1631.64 497.369L1631.74 496.881C1633.38 497.236 1635.02 497.594 1636.66 497.957L1636.55 498.445C1638.18 498.807 1639.81 499.173 1641.44 499.543L1641.55 499.055C1643.17 499.425 1644.79 499.799 1646.41 500.176L1646.3 500.663C1647.91 501.041 1649.52 501.422 1651.13 501.807L1651.24 501.32C1652.85 501.705 1654.45 502.094 1656.05 502.487L1655.93 502.972C1657.54 503.366 1659.13 503.764 1660.73 504.165L1660.85 503.68C1662.49 504.094 1664.13 504.511 1665.76 504.932L1665.63 505.416C1667.26 505.837 1668.88 506.262 1670.5 506.69L1670.63 506.207C1672.25 506.636 1673.87 507.069 1675.48 507.506L1675.35 507.989C1676.96 508.426 1678.56 508.867 1680.16 509.311L1680.29 508.83C1681.89 509.275 1683.49 509.724 1685.08 510.177L1684.94 510.658C1686.53 511.11 1688.11 511.567 1689.69 512.028L1689.83 511.548C1691.41 512.009 1692.99 512.475 1694.56 512.944L1694.42 513.423C1696.04 513.907 1697.65 514.396 1699.26 514.889L1699.41 514.411C1701.02 514.904 1702.63 515.401 1704.23 515.903L1704.08 516.38C1705.68 516.881 1707.27 517.387 1708.86 517.896L1709.01 517.42C1710.6 517.93 1712.18 518.444 1713.76 518.963L1713.6 519.438C1715.18 519.956 1716.75 520.478 1718.31 521.005L1718.47 520.531C1720.04 521.058 1721.6 521.589 1723.15 522.124L1722.99 522.597C1724.55 523.135 1726.11 523.677 1727.66 524.224L1727.83 523.752C1729.43 524.315 1731.02 524.882 1732.6 525.453L1732.43 525.924C1734.01 526.495 1735.59 527.07 1737.16 527.65L1737.33 527.181C1738.9 527.761 1740.47 528.346 1742.03 528.936L1741.85 529.403C1743.41 529.992 1744.96 530.586 1746.5 531.183L1746.68 530.717C1748.23 531.315 1749.77 531.918 1751.3 532.525L1751.12 532.99C1752.65 533.597 1754.18 534.208 1755.7 534.824L1755.88 534.36C1757.43 534.988 1758.98 535.621 1760.51 536.259L1760.32 536.72C1761.88 537.367 1763.43 538.018 1764.98 538.675L1765.18 538.214C1766.72 538.871 1768.26 539.532 1769.79 540.199L1769.59 540.657C1771.13 541.323 1772.65 541.993 1774.17 542.668L1774.37 542.211C1775.89 542.887 1777.4 543.567 1778.91 544.253L1778.7 544.708C1780.2 545.392 1781.7 546.081 1783.19 546.775L1783.4 546.322C1784.9 547.021 1786.39 547.724 1787.87 548.432L1787.65 548.883C1789.18 549.611 1790.7 550.345 1792.21 551.083L1792.43 550.634C1793.94 551.373 1795.45 552.118 1796.95 552.867L1796.72 553.314C1798.22 554.063 1799.71 554.816 1801.19 555.575L1801.41 555.13C1802.89 555.889 1804.37 556.654 1805.83 557.423L1805.6 557.866C1807.07 558.634 1808.52 559.408 1809.97 560.187L1810.21 559.746C1811.66 560.526 1813.1 561.31 1814.53 562.1L1814.29 562.538C1815.77 563.353 1817.25 564.175 1818.71 565.001L1818.96 564.566C1820.42 565.394 1821.88 566.227 1823.33 567.066L1823.08 567.499C1824.53 568.337 1825.97 569.18 1827.4 570.029L1827.66 569.599C1829.09 570.448 1830.51 571.303 1831.93 572.163L1831.67 572.59C1833.08 573.449 1834.48 574.314 1835.88 575.184L1836.14 574.759C1837.54 575.63 1838.93 576.507 1840.31 577.388L1840.04 577.81C1841.47 578.72 1842.88 579.637 1844.29 580.559L1844.56 580.141C1845.97 581.064 1847.37 581.993 1848.76 582.928L1848.48 583.342C1849.86 584.276 1851.24 585.215 1852.61 586.159L1852.89 585.748C1854.26 586.694 1855.62 587.645 1856.97 588.603L1856.68 589.01C1858.03 589.966 1859.37 590.928 1860.7 591.895L1860.99 591.491C1862.33 592.467 1863.66 593.449 1864.98 594.436L1864.68 594.836C1866.03 595.847 1867.37 596.863 1868.71 597.886L1869.01 597.49C1870.34 598.514 1871.66 599.543 1872.97 600.579L1872.66 600.971C1873.97 602.006 1875.27 603.046 1876.56 604.093L1876.87 603.705C1878.16 604.752 1879.44 605.806 1880.71 606.866L1880.39 607.249C1881.65 608.308 1882.91 609.372 1884.15 610.442L1884.48 610.063C1885.75 611.155 1887.01 612.254 1888.25 613.359L1887.92 613.733C1889.18 614.848 1890.43 615.969 1891.66 617.096L1892 616.726C1893.24 617.855 1894.46 618.99 1895.67 620.132L1895.33 620.496C1896.54 621.635 1897.74 622.781 1898.93 623.933L1899.28 623.575C1900.47 624.728 1901.65 625.889 1902.81 627.055L1902.46 627.408C1903.63 628.58 1904.79 629.758 1905.94 630.942L1906.29 630.594C1907.47 631.804 1908.62 633.02 1909.77 634.243L1909.41 634.585C1910.55 635.805 1911.68 637.033 1912.8 638.266L1913.17 637.931C1914.29 639.167 1915.4 640.409 1916.5 641.658L1916.12 641.987C1917.21 643.234 1918.29 644.488 1919.36 645.747L1919.74 645.424C1920.81 646.686 1921.87 647.955 1922.91 649.23L1922.52 649.546C1923.59 650.844 1924.63 652.148 1925.67 653.459L1926.06 653.15C1927.1 654.465 1928.12 655.786 1929.13 657.115L1928.73 657.418C1929.74 658.744 1930.74 660.076 1931.72 661.416L1932.12 661.121C1933.11 662.462 1934.07 663.811 1935.03 665.166L1934.62 665.454C1935.57 666.807 1936.51 668.167 1937.44 669.533L1937.85 669.253C1938.79 670.636 1939.71 672.027 1940.62 673.424L1940.2 673.697C1941.11 675.096 1942.01 676.502 1942.89 677.915L1943.31 677.65C1944.19 679.066 1945.06 680.488 1945.91 681.918L1945.48 682.174C1946.34 683.601 1947.17 685.034 1947.99 686.474L1948.43 686.226C1949.25 687.669 1950.06 689.119 1950.86 690.576L1950.42 690.815C1951.21 692.275 1951.99 693.741 1952.76 695.215L1953.2 694.984C1953.97 696.464 1954.73 697.95 1955.46 699.444L1955.02 699.665C1955.75 701.156 1956.48 702.653 1957.18 704.157L1957.63 703.944C1958.34 705.451 1959.04 706.965 1959.71 708.486L1959.26 708.689C1959.93 710.207 1960.59 711.732 1961.24 713.263L1961.7 713.069C1962.35 714.601 1962.98 716.14 1963.59 717.686L1963.13 717.87C1963.74 719.411 1964.34 720.959 1964.92 722.514L1965.39 722.339C1965.97 723.896 1966.54 725.461 1967.09 727.032L1966.62 727.198C1967.17 728.766 1967.7 730.34 1968.22 731.922L1968.7 731.766Z",stroke:"black",strokeOpacity:"0.5",strokeDasharray:"5 5"}),R.jsx("g",{clipPath:"url(#clip1_759_511)",children:R.jsx("path",{d:"M1211.07 1257.52C1211.07 1257.52 1197.31 1263.37 1192.52 1265.3C1177.92 1271.65 1158.84 1257.75 1158.84 1257.75C1158.84 1257.75 1162.19 1234.49 1176.93 1228.48C1188.03 1223.63 1195.59 1220.62 1195.59 1220.62C1195.59 1220.62 1198.21 1206.32 1209.33 1201.63L1234.36 1260.88C1223.14 1265.52 1211.07 1257.52 1211.07 1257.52ZM1182.26 1239.78C1181.36 1240.16 1180.54 1240.71 1179.86 1241.4C1179.17 1242.09 1178.63 1242.92 1178.26 1243.82C1177.9 1244.72 1177.71 1245.69 1177.72 1246.66C1177.72 1247.64 1177.92 1248.6 1178.3 1249.5C1178.87 1250.85 1179.83 1252 1181.05 1252.81C1182.27 1253.62 1183.71 1254.04 1185.18 1254.03C1186.64 1254.02 1188.07 1253.58 1189.29 1252.76C1190.5 1251.94 1191.45 1250.77 1192 1249.41C1192.55 1248.06 1192.69 1246.56 1192.4 1245.13C1192.1 1243.69 1191.39 1242.37 1190.35 1241.34C1189.3 1240.31 1187.98 1239.61 1186.54 1239.33C1185.1 1239.06 1183.61 1239.21 1182.26 1239.78ZM1246.67 1220.85C1243.9 1227.13 1238.98 1232.23 1232.8 1235.22L1226.7 1220.72C1232.93 1215.25 1246.67 1220.85 1246.67 1220.85Z",fill:"black"})})]}),R.jsxs("defs",{children:[R.jsx("clipPath",{id:"clip0_759_511",children:R.jsx("rect",{width:"1991",height:"1991",fill:"white"})}),R.jsx("clipPath",{id:"clip1_759_511",children:R.jsx("rect",{width:"89",height:"89",fill:"white",transform:"matrix(-0.377237 0.926117 0.926117 0.377237 1178.74 1181.17)"})})]})]});function iR(e){return Mw({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"}}]})(e)}function nR(e){return Mw({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M349.565 98.783C295.978 98.783 251.721 64 184.348 64c-24.955 0-47.309 4.384-68.045 12.013a55.947 55.947 0 0 0 3.586-23.562C118.117 24.015 94.806 1.206 66.338.048 34.345-1.254 8 24.296 8 56c0 19.026 9.497 35.825 24 45.945V488c0 13.255 10.745 24 24 24h16c13.255 0 24-10.745 24-24v-94.4c28.311-12.064 63.582-22.122 114.435-22.122 53.588 0 97.844 34.783 165.217 34.783 48.169 0 86.667-16.294 122.505-40.858C506.84 359.452 512 349.571 512 339.045v-243.1c0-23.393-24.269-38.87-45.485-29.016-34.338 15.948-76.454 31.854-116.95 31.854z"}}]})(e)}const $H="modulepreload",JH=function(e){return"/dmrs-fe/"+e},AS={},Am=function(t,r,i){if(!r||r.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(r.map(s=>{if(s=JH(s),s in AS)return;AS[s]=!0;const a=s.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!i)for(let c=n.length-1;c>=0;c--){const u=n[c];if(u.href===s&&(!a||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${o}`))return;const h=document.createElement("link");if(h.rel=a?"stylesheet":$H,a||(h.as="script",h.crossOrigin=""),h.href=s,document.head.appendChild(h),a)return new Promise((c,u)=>{h.addEventListener("load",c),h.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s})};var eW=Object.create,Tw=Object.defineProperty,tW=Object.getOwnPropertyDescriptor,rW=Object.getOwnPropertyNames,iW=Object.getPrototypeOf,nW=Object.prototype.hasOwnProperty,lf=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),sW=(e,t)=>{for(var r in t)Tw(e,r,{get:t[r],enumerable:!0})},aW=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of rW(t))!nW.call(e,n)&&n!==r&&Tw(e,n,{get:()=>t[n],enumerable:!(i=tW(t,n))||i.enumerable});return e},hf=(e,t,r)=>(r=e!=null?eW(iW(e)):{},aW(t||!e||!e.__esModule?Tw(r,"default",{value:e,enumerable:!0}):r,e)),oW=lf((e,t)=>{(function(r,i){typeof e=="object"?t.exports=i():typeof define=="function"&&define.amd?define(i):r.Alea=i()})(e,function(){return r.importState=function(n){var s=new r;return s.importState(n),s},r;function r(){return function(n){var s=0,a=0,o=0,l=1;n.length==0&&(n=[+new Date]);var h=i();s=h(" "),a=h(" "),o=h(" ");for(var c=0;c<n.length;c++)s-=h(n[c]),s<0&&(s+=1),a-=h(n[c]),a<0&&(a+=1),o-=h(n[c]),o<0&&(o+=1);h=null;var u=function(){var d=2091639*s+l*23283064365386963e-26;return s=a,a=o,o=d-(l=d|0)};return u.next=u,u.uint32=function(){return u()*4294967296},u.fract53=function(){return u()+(u()*2097152|0)*11102230246251565e-32},u.version="Alea 0.9",u.args=n,u.exportState=function(){return[s,a,o,l]},u.importState=function(d){s=+d[0]||0,a=+d[1]||0,o=+d[2]||0,l=+d[3]||0},u}(Array.prototype.slice.call(arguments))}function i(){var n=4022871197,s=function(a){a=a.toString();for(var o=0;o<a.length;o++){n+=a.charCodeAt(o);var l=.02519603282416938*n;n=l>>>0,l-=n,l*=n,n=l>>>0,l-=n,n+=l*4294967296}return(n>>>0)*23283064365386963e-26};return s.version="Mash 0.9",s}})}),sR=lf((e,t)=>{(function(r,i){typeof e=="object"&&typeof t<"u"?i(e):typeof define=="function"&&define.amd?define(["exports"],i):i((r=typeof globalThis<"u"?globalThis:r||self).SVDJS={})})(e,function(r){r.SVD=function(i,n,s,a,o){if(n=n===void 0||n,s=s===void 0||s,o=1e-64/(a=a||Math.pow(2,-52)),!i)throw new TypeError("Matrix a is not defined");var l,h,c,u,d,p,f,m,g,v,y,x,w=i[0].length,_=i.length;if(_<w)throw new TypeError("Invalid matrix: m < n");for(var b=[],S=[],C=[],M=n==="f"?_:w,A=v=f=0;A<_;A++)S[A]=new Array(M).fill(0);for(A=0;A<w;A++)C[A]=new Array(w).fill(0);var T,L=new Array(w).fill(0);for(A=0;A<_;A++)for(l=0;l<w;l++)S[A][l]=i[A][l];for(A=0;A<w;A++){for(b[A]=f,g=0,c=A+1,l=A;l<_;l++)g+=Math.pow(S[l][A],2);if(g<o)f=0;else for(m=(p=S[A][A])*(f=p<0?Math.sqrt(g):-Math.sqrt(g))-g,S[A][A]=p-f,l=c;l<w;l++){for(g=0,h=A;h<_;h++)g+=S[h][A]*S[h][l];for(p=g/m,h=A;h<_;h++)S[h][l]=S[h][l]+p*S[h][A]}for(L[A]=f,g=0,l=c;l<w;l++)g+=Math.pow(S[A][l],2);if(g<o)f=0;else{for(m=(p=S[A][A+1])*(f=p<0?Math.sqrt(g):-Math.sqrt(g))-g,S[A][A+1]=p-f,l=c;l<w;l++)b[l]=S[A][l]/m;for(l=c;l<_;l++){for(g=0,h=c;h<w;h++)g+=S[l][h]*S[A][h];for(h=c;h<w;h++)S[l][h]=S[l][h]+g*b[h]}}v<(y=Math.abs(L[A])+Math.abs(b[A]))&&(v=y)}if(s)for(A=w-1;0<=A;A--){if(f!==0){for(m=S[A][A+1]*f,l=c;l<w;l++)C[l][A]=S[A][l]/m;for(l=c;l<w;l++){for(g=0,h=c;h<w;h++)g+=S[A][h]*C[h][l];for(h=c;h<w;h++)C[h][l]=C[h][l]+g*C[h][A]}}for(l=c;l<w;l++)C[A][l]=0,C[l][A]=0;C[A][A]=1,f=b[A],c=A}if(n){if(n==="f")for(A=w;A<_;A++){for(l=w;l<_;l++)S[A][l]=0;S[A][A]=1}for(A=w-1;0<=A;A--){for(c=A+1,f=L[A],l=c;l<M;l++)S[A][l]=0;if(f!==0){for(m=S[A][A]*f,l=c;l<M;l++){for(g=0,h=c;h<_;h++)g+=S[h][A]*S[h][l];for(p=g/m,h=A;h<_;h++)S[h][l]=S[h][l]+p*S[h][A]}for(l=A;l<_;l++)S[l][A]=S[l][A]/f}else for(l=A;l<_;l++)S[l][A]=0;S[A][A]=S[A][A]+1}}for(a*=v,h=w-1;0<=h;h--)for(var D=0;D<50;D++){for(T=!1,c=h;0<=c;c--){if(Math.abs(b[c])<=a){T=!0;break}if(Math.abs(L[c-1])<=a)break}if(!T){for(d=0,u=c-(g=1),A=c;A<h+1&&(p=g*b[A],b[A]=d*b[A],!(Math.abs(p)<=a));A++)if(f=L[A],L[A]=Math.sqrt(p*p+f*f),d=f/(m=L[A]),g=-p/m,n)for(l=0;l<_;l++)y=S[l][u],x=S[l][A],S[l][u]=y*d+x*g,S[l][A]=-y*g+x*d}if(x=L[h],c===h){if(x<0&&(L[h]=-x,s))for(l=0;l<w;l++)C[l][h]=-C[l][h];break}for(v=L[c],p=(((y=L[h-1])-x)*(y+x)+((f=b[h-1])-(m=b[h]))*(f+m))/(2*m*y),f=Math.sqrt(p*p+1),p=((v-x)*(v+x)+m*(y/(p<0?p-f:p+f)-m))/v,A=c+(g=d=1);A<h+1;A++){if(f=b[A],y=L[A],m=g*f,f*=d,x=Math.sqrt(p*p+m*m),p=v*(d=p/(b[A-1]=x))+f*(g=m/x),f=-v*g+f*d,m=y*g,y*=d,s)for(l=0;l<w;l++)v=C[l][A-1],x=C[l][A],C[l][A-1]=v*d+x*g,C[l][A]=-v*g+x*d;if(x=Math.sqrt(p*p+m*m),p=(d=p/(L[A-1]=x))*f+(g=m/x)*y,v=-g*f+d*y,n)for(l=0;l<_;l++)y=S[l][A-1],x=S[l][A],S[l][A-1]=y*d+x*g,S[l][A]=-y*g+x*d}b[c]=0,b[h]=p,L[h]=v}for(A=0;A<w;A++)L[A]<a&&(L[A]=0);return{u:S,q:L,v:C}},r.VERSION="1.1.1",Object.defineProperty(r,"__esModule",{value:!0})})}),lW=lf((e,t)=>{(function(r,i){typeof e=="object"&&typeof t<"u"?t.exports=i():typeof define=="function"&&define.amd?define(i):(r=r||self,r.TinyQueue=i())})(e,function(){var r=function(n,s){if(n===void 0&&(n=[]),s===void 0&&(s=i),this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(var a=(this.length>>1)-1;a>=0;a--)this._down(a)};r.prototype.push=function(n){this.data.push(n),this.length++,this._up(this.length-1)},r.prototype.pop=function(){if(this.length!==0){var n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}},r.prototype.peek=function(){return this.data[0]},r.prototype._up=function(n){for(var s=this,a=s.data,o=s.compare,l=a[n];n>0;){var h=n-1>>1,c=a[h];if(o(l,c)>=0)break;a[n]=c,n=h}a[n]=l},r.prototype._down=function(n){for(var s=this,a=s.data,o=s.compare,l=this.length>>1,h=a[n];n<l;){var c=(n<<1)+1,u=a[c],d=c+1;if(d<this.length&&o(a[d],u)<0&&(c=d,u=a[d]),o(u,h)>=0)break;a[n]=u,n=c}a[n]=h};function i(n,s){return n<s?-1:n>s?1:0}return r})}),hW=lf((e,t)=>{var r=lW();r.default&&(r=r.default),t.exports=i,t.exports.default=i;function i(h,c,u){c=c||1;for(var d,p,f,m,g=0;g<h[0].length;g++){var v=h[0][g];(!g||v[0]<d)&&(d=v[0]),(!g||v[1]<p)&&(p=v[1]),(!g||v[0]>f)&&(f=v[0]),(!g||v[1]>m)&&(m=v[1])}var y=f-d,x=m-p,w=Math.min(y,x),_=w/2;if(w===0){var b=[d,p];return b.distance=0,b}for(var S=new r(void 0,n),C=d;C<f;C+=w)for(var M=p;M<m;M+=w)S.push(new s(C+_,M+_,_,h));var A=o(h),T=new s(d+y/2,p+x/2,0,h);T.d>A.d&&(A=T);for(var L=S.length;S.length;){var D=S.pop();D.d>A.d&&(A=D,u&&console.log("found best %d after %d probes",Math.round(1e4*D.d)/1e4,L)),!(D.max-A.d<=c)&&(_=D.h/2,S.push(new s(D.x-_,D.y-_,_,h)),S.push(new s(D.x+_,D.y-_,_,h)),S.push(new s(D.x-_,D.y+_,_,h)),S.push(new s(D.x+_,D.y+_,_,h)),L+=4)}u&&(console.log("num probes: "+L),console.log("best distance: "+A.d));var O=[A.x,A.y];return O.distance=A.d,O}function n(h,c){return c.max-h.max}function s(h,c,u,d){this.x=h,this.y=c,this.h=u,this.d=a(h,c,d),this.max=this.d+this.h*Math.SQRT2}function a(h,c,u){for(var d=!1,p=1/0,f=0;f<u.length;f++)for(var m=u[f],g=0,v=m.length,y=v-1;g<v;y=g++){var x=m[g],w=m[y];x[1]>c!=w[1]>c&&h<(w[0]-x[0])*(c-x[1])/(w[1]-x[1])+x[0]&&(d=!d),p=Math.min(p,l(h,c,x,w))}return p===0?0:(d?1:-1)*Math.sqrt(p)}function o(h){for(var c=0,u=0,d=0,p=h[0],f=0,m=p.length,g=m-1;f<m;g=f++){var v=p[f],y=p[g],x=v[0]*y[1]-y[0]*v[1];u+=(v[0]+y[0])*x,d+=(v[1]+y[1])*x,c+=x*3}return c===0?new s(p[0][0],p[0][1],0,h):new s(u/c,d/c,0,h)}function l(h,c,u,d){var p=u[0],f=u[1],m=d[0]-p,g=d[1]-f;if(m!==0||g!==0){var v=((h-p)*m+(c-f)*g)/(m*m+g*g);v>1?(p=d[0],f=d[1]):v>0&&(p+=m*v,f+=g*v)}return m=h-p,g=c-f,m*m+g*g}}),uW=lf(e=>{(function(){var t=function(){this.init()};t.prototype={init:function(){var u=this||r;return u._counter=1e3,u._html5AudioPool=[],u.html5PoolSize=10,u._codecs={},u._howls=[],u._muted=!1,u._volume=1,u._canPlayEvent="canplaythrough",u._navigator=typeof window<"u"&&window.navigator?window.navigator:null,u.masterGain=null,u.noAudio=!1,u.usingWebAudio=!0,u.autoSuspend=!0,u.ctx=null,u.autoUnlock=!0,u._setup(),u},volume:function(u){var d=this||r;if(u=parseFloat(u),d.ctx||c(),typeof u<"u"&&u>=0&&u<=1){if(d._volume=u,d._muted)return d;d.usingWebAudio&&d.masterGain.gain.setValueAtTime(u,r.ctx.currentTime);for(var p=0;p<d._howls.length;p++)if(!d._howls[p]._webAudio)for(var f=d._howls[p]._getSoundIds(),m=0;m<f.length;m++){var g=d._howls[p]._soundById(f[m]);g&&g._node&&(g._node.volume=g._volume*u)}return d}return d._volume},mute:function(u){var d=this||r;d.ctx||c(),d._muted=u,d.usingWebAudio&&d.masterGain.gain.setValueAtTime(u?0:d._volume,r.ctx.currentTime);for(var p=0;p<d._howls.length;p++)if(!d._howls[p]._webAudio)for(var f=d._howls[p]._getSoundIds(),m=0;m<f.length;m++){var g=d._howls[p]._soundById(f[m]);g&&g._node&&(g._node.muted=u?!0:g._muted)}return d},stop:function(){for(var u=this||r,d=0;d<u._howls.length;d++)u._howls[d].stop();return u},unload:function(){for(var u=this||r,d=u._howls.length-1;d>=0;d--)u._howls[d].unload();return u.usingWebAudio&&u.ctx&&typeof u.ctx.close<"u"&&(u.ctx.close(),u.ctx=null,c()),u},codecs:function(u){return(this||r)._codecs[u.replace(/^x-/,"")]},_setup:function(){var u=this||r;if(u.state=u.ctx&&u.ctx.state||"suspended",u._autoSuspend(),!u.usingWebAudio)if(typeof Audio<"u")try{var d=new Audio;typeof d.oncanplaythrough>"u"&&(u._canPlayEvent="canplay")}catch{u.noAudio=!0}else u.noAudio=!0;try{var d=new Audio;d.muted&&(u.noAudio=!0)}catch{}return u.noAudio||u._setupCodecs(),u},_setupCodecs:function(){var u=this||r,d=null;try{d=typeof Audio<"u"?new Audio:null}catch{return u}if(!d||typeof d.canPlayType!="function")return u;var p=d.canPlayType("audio/mpeg;").replace(/^no$/,""),f=u._navigator?u._navigator.userAgent:"",m=f.match(/OPR\/([0-6].)/g),g=m&&parseInt(m[0].split("/")[1],10)<33,v=f.indexOf("Safari")!==-1&&f.indexOf("Chrome")===-1,y=f.match(/Version\/(.*?) /),x=v&&y&&parseInt(y[1],10)<15;return u._codecs={mp3:!!(!g&&(p||d.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!p,opus:!!d.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(d.canPlayType('audio/wav; codecs="1"')||d.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!d.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!d.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(d.canPlayType("audio/x-m4a;")||d.canPlayType("audio/m4a;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(d.canPlayType("audio/x-m4b;")||d.canPlayType("audio/m4b;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(d.canPlayType("audio/x-mp4;")||d.canPlayType("audio/mp4;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!x&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!x&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!d.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(d.canPlayType("audio/x-flac;")||d.canPlayType("audio/flac;")).replace(/^no$/,"")},u},_unlockAudio:function(){var u=this||r;if(!(u._audioUnlocked||!u.ctx)){u._audioUnlocked=!1,u.autoUnlock=!1,!u._mobileUnloaded&&u.ctx.sampleRate!==44100&&(u._mobileUnloaded=!0,u.unload()),u._scratchBuffer=u.ctx.createBuffer(1,1,22050);var d=function(p){for(;u._html5AudioPool.length<u.html5PoolSize;)try{var f=new Audio;f._unlocked=!0,u._releaseHtml5Audio(f)}catch{u.noAudio=!0;break}for(var m=0;m<u._howls.length;m++)if(!u._howls[m]._webAudio)for(var g=u._howls[m]._getSoundIds(),v=0;v<g.length;v++){var y=u._howls[m]._soundById(g[v]);y&&y._node&&!y._node._unlocked&&(y._node._unlocked=!0,y._node.load())}u._autoResume();var x=u.ctx.createBufferSource();x.buffer=u._scratchBuffer,x.connect(u.ctx.destination),typeof x.start>"u"?x.noteOn(0):x.start(0),typeof u.ctx.resume=="function"&&u.ctx.resume(),x.onended=function(){x.disconnect(0),u._audioUnlocked=!0,document.removeEventListener("touchstart",d,!0),document.removeEventListener("touchend",d,!0),document.removeEventListener("click",d,!0),document.removeEventListener("keydown",d,!0);for(var w=0;w<u._howls.length;w++)u._howls[w]._emit("unlock")}};return document.addEventListener("touchstart",d,!0),document.addEventListener("touchend",d,!0),document.addEventListener("click",d,!0),document.addEventListener("keydown",d,!0),u}},_obtainHtml5Audio:function(){var u=this||r;if(u._html5AudioPool.length)return u._html5AudioPool.pop();var d=new Audio().play();return d&&typeof Promise<"u"&&(d instanceof Promise||typeof d.then=="function")&&d.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(u){var d=this||r;return u._unlocked&&d._html5AudioPool.push(u),d},_autoSuspend:function(){var u=this;if(!(!u.autoSuspend||!u.ctx||typeof u.ctx.suspend>"u"||!r.usingWebAudio)){for(var d=0;d<u._howls.length;d++)if(u._howls[d]._webAudio){for(var p=0;p<u._howls[d]._sounds.length;p++)if(!u._howls[d]._sounds[p]._paused)return u}return u._suspendTimer&&clearTimeout(u._suspendTimer),u._suspendTimer=setTimeout(function(){if(u.autoSuspend){u._suspendTimer=null,u.state="suspending";var f=function(){u.state="suspended",u._resumeAfterSuspend&&(delete u._resumeAfterSuspend,u._autoResume())};u.ctx.suspend().then(f,f)}},3e4),u}},_autoResume:function(){var u=this;if(!(!u.ctx||typeof u.ctx.resume>"u"||!r.usingWebAudio))return u.state==="running"&&u.ctx.state!=="interrupted"&&u._suspendTimer?(clearTimeout(u._suspendTimer),u._suspendTimer=null):u.state==="suspended"||u.state==="running"&&u.ctx.state==="interrupted"?(u.ctx.resume().then(function(){u.state="running";for(var d=0;d<u._howls.length;d++)u._howls[d]._emit("resume")}),u._suspendTimer&&(clearTimeout(u._suspendTimer),u._suspendTimer=null)):u.state==="suspending"&&(u._resumeAfterSuspend=!0),u}};var r=new t,i=function(u){var d=this;if(!u.src||u.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}d.init(u)};i.prototype={init:function(u){var d=this;return r.ctx||c(),d._autoplay=u.autoplay||!1,d._format=typeof u.format!="string"?u.format:[u.format],d._html5=u.html5||!1,d._muted=u.mute||!1,d._loop=u.loop||!1,d._pool=u.pool||5,d._preload=typeof u.preload=="boolean"||u.preload==="metadata"?u.preload:!0,d._rate=u.rate||1,d._sprite=u.sprite||{},d._src=typeof u.src!="string"?u.src:[u.src],d._volume=u.volume!==void 0?u.volume:1,d._xhr={method:u.xhr&&u.xhr.method?u.xhr.method:"GET",headers:u.xhr&&u.xhr.headers?u.xhr.headers:null,withCredentials:u.xhr&&u.xhr.withCredentials?u.xhr.withCredentials:!1},d._duration=0,d._state="unloaded",d._sounds=[],d._endTimers={},d._queue=[],d._playLock=!1,d._onend=u.onend?[{fn:u.onend}]:[],d._onfade=u.onfade?[{fn:u.onfade}]:[],d._onload=u.onload?[{fn:u.onload}]:[],d._onloaderror=u.onloaderror?[{fn:u.onloaderror}]:[],d._onplayerror=u.onplayerror?[{fn:u.onplayerror}]:[],d._onpause=u.onpause?[{fn:u.onpause}]:[],d._onplay=u.onplay?[{fn:u.onplay}]:[],d._onstop=u.onstop?[{fn:u.onstop}]:[],d._onmute=u.onmute?[{fn:u.onmute}]:[],d._onvolume=u.onvolume?[{fn:u.onvolume}]:[],d._onrate=u.onrate?[{fn:u.onrate}]:[],d._onseek=u.onseek?[{fn:u.onseek}]:[],d._onunlock=u.onunlock?[{fn:u.onunlock}]:[],d._onresume=[],d._webAudio=r.usingWebAudio&&!d._html5,typeof r.ctx<"u"&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(d),d._autoplay&&d._queue.push({event:"play",action:function(){d.play()}}),d._preload&&d._preload!=="none"&&d.load(),d},load:function(){var u=this,d=null;if(r.noAudio){u._emit("loaderror",null,"No audio support.");return}typeof u._src=="string"&&(u._src=[u._src]);for(var p=0;p<u._src.length;p++){var f,m;if(u._format&&u._format[p])f=u._format[p];else{if(m=u._src[p],typeof m!="string"){u._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}f=/^data:audio\/([^;,]+);/i.exec(m),f||(f=/\.([^.]+)$/.exec(m.split("?",1)[0])),f&&(f=f[1].toLowerCase())}if(f||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),f&&r.codecs(f)){d=u._src[p];break}}if(!d){u._emit("loaderror",null,"No codec support for selected audio sources.");return}return u._src=d,u._state="loading",window.location.protocol==="https:"&&d.slice(0,5)==="http:"&&(u._html5=!0,u._webAudio=!1),new n(u),u._webAudio&&a(u),u},play:function(u,d){var p=this,f=null;if(typeof u=="number")f=u,u=null;else{if(typeof u=="string"&&p._state==="loaded"&&!p._sprite[u])return null;if(typeof u>"u"&&(u="__default",!p._playLock)){for(var m=0,g=0;g<p._sounds.length;g++)p._sounds[g]._paused&&!p._sounds[g]._ended&&(m++,f=p._sounds[g]._id);m===1?u=null:f=null}}var v=f?p._soundById(f):p._inactiveSound();if(!v)return null;if(f&&!u&&(u=v._sprite||"__default"),p._state!=="loaded"){v._sprite=u,v._ended=!1;var y=v._id;return p._queue.push({event:"play",action:function(){p.play(y)}}),y}if(f&&!v._paused)return d||p._loadQueue("play"),v._id;p._webAudio&&r._autoResume();var x=Math.max(0,v._seek>0?v._seek:p._sprite[u][0]/1e3),w=Math.max(0,(p._sprite[u][0]+p._sprite[u][1])/1e3-x),_=w*1e3/Math.abs(v._rate),b=p._sprite[u][0]/1e3,S=(p._sprite[u][0]+p._sprite[u][1])/1e3;v._sprite=u,v._ended=!1;var C=function(){v._paused=!1,v._seek=x,v._start=b,v._stop=S,v._loop=!!(v._loop||p._sprite[u][2])};if(x>=S){p._ended(v);return}var M=v._node;if(p._webAudio){var A=function(){p._playLock=!1,C(),p._refreshBuffer(v);var O=v._muted||p._muted?0:v._volume;M.gain.setValueAtTime(O,r.ctx.currentTime),v._playStart=r.ctx.currentTime,typeof M.bufferSource.start>"u"?v._loop?M.bufferSource.noteGrainOn(0,x,86400):M.bufferSource.noteGrainOn(0,x,w):v._loop?M.bufferSource.start(0,x,86400):M.bufferSource.start(0,x,w),_!==1/0&&(p._endTimers[v._id]=setTimeout(p._ended.bind(p,v),_)),d||setTimeout(function(){p._emit("play",v._id),p._loadQueue()},0)};r.state==="running"&&r.ctx.state!=="interrupted"?A():(p._playLock=!0,p.once("resume",A),p._clearTimer(v._id))}else{var T=function(){M.currentTime=x,M.muted=v._muted||p._muted||r._muted||M.muted,M.volume=v._volume*r.volume(),M.playbackRate=v._rate;try{var O=M.play();if(O&&typeof Promise<"u"&&(O instanceof Promise||typeof O.then=="function")?(p._playLock=!0,C(),O.then(function(){p._playLock=!1,M._unlocked=!0,d?p._loadQueue():p._emit("play",v._id)}).catch(function(){p._playLock=!1,p._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),v._ended=!0,v._paused=!0})):d||(p._playLock=!1,C(),p._emit("play",v._id)),M.playbackRate=v._rate,M.paused){p._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}u!=="__default"||v._loop?p._endTimers[v._id]=setTimeout(p._ended.bind(p,v),_):(p._endTimers[v._id]=function(){p._ended(v),M.removeEventListener("ended",p._endTimers[v._id],!1)},M.addEventListener("ended",p._endTimers[v._id],!1))}catch(z){p._emit("playerror",v._id,z)}};M.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(M.src=p._src,M.load());var L=window&&window.ejecta||!M.readyState&&r._navigator.isCocoonJS;if(M.readyState>=3||L)T();else{p._playLock=!0,p._state="loading";var D=function(){p._state="loaded",T(),M.removeEventListener(r._canPlayEvent,D,!1)};M.addEventListener(r._canPlayEvent,D,!1),p._clearTimer(v._id)}}return v._id},pause:function(u){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"pause",action:function(){d.pause(u)}}),d;for(var p=d._getSoundIds(u),f=0;f<p.length;f++){d._clearTimer(p[f]);var m=d._soundById(p[f]);if(m&&!m._paused&&(m._seek=d.seek(p[f]),m._rateSeek=0,m._paused=!0,d._stopFade(p[f]),m._node))if(d._webAudio){if(!m._node.bufferSource)continue;typeof m._node.bufferSource.stop>"u"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),d._cleanBuffer(m._node)}else(!isNaN(m._node.duration)||m._node.duration===1/0)&&m._node.pause();arguments[1]||d._emit("pause",m?m._id:null)}return d},stop:function(u,d){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"stop",action:function(){p.stop(u)}}),p;for(var f=p._getSoundIds(u),m=0;m<f.length;m++){p._clearTimer(f[m]);var g=p._soundById(f[m]);g&&(g._seek=g._start||0,g._rateSeek=0,g._paused=!0,g._ended=!0,p._stopFade(f[m]),g._node&&(p._webAudio?g._node.bufferSource&&(typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),p._cleanBuffer(g._node)):(!isNaN(g._node.duration)||g._node.duration===1/0)&&(g._node.currentTime=g._start||0,g._node.pause(),g._node.duration===1/0&&p._clearSound(g._node))),d||p._emit("stop",g._id))}return p},mute:function(u,d){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"mute",action:function(){p.mute(u,d)}}),p;if(typeof d>"u")if(typeof u=="boolean")p._muted=u;else return p._muted;for(var f=p._getSoundIds(d),m=0;m<f.length;m++){var g=p._soundById(f[m]);g&&(g._muted=u,g._interval&&p._stopFade(g._id),p._webAudio&&g._node?g._node.gain.setValueAtTime(u?0:g._volume,r.ctx.currentTime):g._node&&(g._node.muted=r._muted?!0:u),p._emit("mute",g._id))}return p},volume:function(){var u=this,d=arguments,p,f;if(d.length===0)return u._volume;if(d.length===1||d.length===2&&typeof d[1]>"u"){var m=u._getSoundIds(),g=m.indexOf(d[0]);g>=0?f=parseInt(d[0],10):p=parseFloat(d[0])}else d.length>=2&&(p=parseFloat(d[0]),f=parseInt(d[1],10));var v;if(typeof p<"u"&&p>=0&&p<=1){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"volume",action:function(){u.volume.apply(u,d)}}),u;typeof f>"u"&&(u._volume=p),f=u._getSoundIds(f);for(var y=0;y<f.length;y++)v=u._soundById(f[y]),v&&(v._volume=p,d[2]||u._stopFade(f[y]),u._webAudio&&v._node&&!v._muted?v._node.gain.setValueAtTime(p,r.ctx.currentTime):v._node&&!v._muted&&(v._node.volume=p*r.volume()),u._emit("volume",v._id))}else return v=f?u._soundById(f):u._sounds[0],v?v._volume:0;return u},fade:function(u,d,p,f){var m=this;if(m._state!=="loaded"||m._playLock)return m._queue.push({event:"fade",action:function(){m.fade(u,d,p,f)}}),m;u=Math.min(Math.max(0,parseFloat(u)),1),d=Math.min(Math.max(0,parseFloat(d)),1),p=parseFloat(p),m.volume(u,f);for(var g=m._getSoundIds(f),v=0;v<g.length;v++){var y=m._soundById(g[v]);if(y){if(f||m._stopFade(g[v]),m._webAudio&&!y._muted){var x=r.ctx.currentTime,w=x+p/1e3;y._volume=u,y._node.gain.setValueAtTime(u,x),y._node.gain.linearRampToValueAtTime(d,w)}m._startFadeInterval(y,u,d,p,g[v],typeof f>"u")}}return m},_startFadeInterval:function(u,d,p,f,m,g){var v=this,y=d,x=p-d,w=Math.abs(x/.01),_=Math.max(4,w>0?f/w:f),b=Date.now();u._fadeTo=p,u._interval=setInterval(function(){var S=(Date.now()-b)/f;b=Date.now(),y+=x*S,y=Math.round(y*100)/100,x<0?y=Math.max(p,y):y=Math.min(p,y),v._webAudio?u._volume=y:v.volume(y,u._id,!0),g&&(v._volume=y),(p<d&&y<=p||p>d&&y>=p)&&(clearInterval(u._interval),u._interval=null,u._fadeTo=null,v.volume(p,u._id),v._emit("fade",u._id))},_)},_stopFade:function(u){var d=this,p=d._soundById(u);return p&&p._interval&&(d._webAudio&&p._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(p._interval),p._interval=null,d.volume(p._fadeTo,u),p._fadeTo=null,d._emit("fade",u)),d},loop:function(){var u=this,d=arguments,p,f,m;if(d.length===0)return u._loop;if(d.length===1)if(typeof d[0]=="boolean")p=d[0],u._loop=p;else return m=u._soundById(parseInt(d[0],10)),m?m._loop:!1;else d.length===2&&(p=d[0],f=parseInt(d[1],10));for(var g=u._getSoundIds(f),v=0;v<g.length;v++)m=u._soundById(g[v]),m&&(m._loop=p,u._webAudio&&m._node&&m._node.bufferSource&&(m._node.bufferSource.loop=p,p&&(m._node.bufferSource.loopStart=m._start||0,m._node.bufferSource.loopEnd=m._stop,u.playing(g[v])&&(u.pause(g[v],!0),u.play(g[v],!0)))));return u},rate:function(){var u=this,d=arguments,p,f;if(d.length===0)f=u._sounds[0]._id;else if(d.length===1){var m=u._getSoundIds(),g=m.indexOf(d[0]);g>=0?f=parseInt(d[0],10):p=parseFloat(d[0])}else d.length===2&&(p=parseFloat(d[0]),f=parseInt(d[1],10));var v;if(typeof p=="number"){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"rate",action:function(){u.rate.apply(u,d)}}),u;typeof f>"u"&&(u._rate=p),f=u._getSoundIds(f);for(var y=0;y<f.length;y++)if(v=u._soundById(f[y]),v){u.playing(f[y])&&(v._rateSeek=u.seek(f[y]),v._playStart=u._webAudio?r.ctx.currentTime:v._playStart),v._rate=p,u._webAudio&&v._node&&v._node.bufferSource?v._node.bufferSource.playbackRate.setValueAtTime(p,r.ctx.currentTime):v._node&&(v._node.playbackRate=p);var x=u.seek(f[y]),w=(u._sprite[v._sprite][0]+u._sprite[v._sprite][1])/1e3-x,_=w*1e3/Math.abs(v._rate);(u._endTimers[f[y]]||!v._paused)&&(u._clearTimer(f[y]),u._endTimers[f[y]]=setTimeout(u._ended.bind(u,v),_)),u._emit("rate",v._id)}}else return v=u._soundById(f),v?v._rate:u._rate;return u},seek:function(){var u=this,d=arguments,p,f;if(d.length===0)u._sounds.length&&(f=u._sounds[0]._id);else if(d.length===1){var m=u._getSoundIds(),g=m.indexOf(d[0]);g>=0?f=parseInt(d[0],10):u._sounds.length&&(f=u._sounds[0]._id,p=parseFloat(d[0]))}else d.length===2&&(p=parseFloat(d[0]),f=parseInt(d[1],10));if(typeof f>"u")return 0;if(typeof p=="number"&&(u._state!=="loaded"||u._playLock))return u._queue.push({event:"seek",action:function(){u.seek.apply(u,d)}}),u;var v=u._soundById(f);if(v)if(typeof p=="number"&&p>=0){var y=u.playing(f);y&&u.pause(f,!0),v._seek=p,v._ended=!1,u._clearTimer(f),!u._webAudio&&v._node&&!isNaN(v._node.duration)&&(v._node.currentTime=p);var x=function(){y&&u.play(f,!0),u._emit("seek",f)};if(y&&!u._webAudio){var w=function(){u._playLock?setTimeout(w,0):x()};setTimeout(w,0)}else x()}else if(u._webAudio){var _=u.playing(f)?r.ctx.currentTime-v._playStart:0,b=v._rateSeek?v._rateSeek-v._seek:0;return v._seek+(b+_*Math.abs(v._rate))}else return v._node.currentTime;return u},playing:function(u){var d=this;if(typeof u=="number"){var p=d._soundById(u);return p?!p._paused:!1}for(var f=0;f<d._sounds.length;f++)if(!d._sounds[f]._paused)return!0;return!1},duration:function(u){var d=this,p=d._duration,f=d._soundById(u);return f&&(p=d._sprite[f._sprite][1]/1e3),p},state:function(){return this._state},unload:function(){for(var u=this,d=u._sounds,p=0;p<d.length;p++)d[p]._paused||u.stop(d[p]._id),u._webAudio||(u._clearSound(d[p]._node),d[p]._node.removeEventListener("error",d[p]._errorFn,!1),d[p]._node.removeEventListener(r._canPlayEvent,d[p]._loadFn,!1),d[p]._node.removeEventListener("ended",d[p]._endFn,!1),r._releaseHtml5Audio(d[p]._node)),delete d[p]._node,u._clearTimer(d[p]._id);var f=r._howls.indexOf(u);f>=0&&r._howls.splice(f,1);var m=!0;for(p=0;p<r._howls.length;p++)if(r._howls[p]._src===u._src||u._src.indexOf(r._howls[p]._src)>=0){m=!1;break}return s&&m&&delete s[u._src],r.noAudio=!1,u._state="unloaded",u._sounds=[],u=null,null},on:function(u,d,p,f){var m=this,g=m["_on"+u];return typeof d=="function"&&g.push(f?{id:p,fn:d,once:f}:{id:p,fn:d}),m},off:function(u,d,p){var f=this,m=f["_on"+u],g=0;if(typeof d=="number"&&(p=d,d=null),d||p)for(g=0;g<m.length;g++){var v=p===m[g].id;if(d===m[g].fn&&v||!d&&v){m.splice(g,1);break}}else if(u)f["_on"+u]=[];else{var y=Object.keys(f);for(g=0;g<y.length;g++)y[g].indexOf("_on")===0&&Array.isArray(f[y[g]])&&(f[y[g]]=[])}return f},once:function(u,d,p){var f=this;return f.on(u,d,p,1),f},_emit:function(u,d,p){for(var f=this,m=f["_on"+u],g=m.length-1;g>=0;g--)(!m[g].id||m[g].id===d||u==="load")&&(setTimeout((function(v){v.call(this,d,p)}).bind(f,m[g].fn),0),m[g].once&&f.off(u,m[g].fn,m[g].id));return f._loadQueue(u),f},_loadQueue:function(u){var d=this;if(d._queue.length>0){var p=d._queue[0];p.event===u&&(d._queue.shift(),d._loadQueue()),u||p.action()}return d},_ended:function(u){var d=this,p=u._sprite;if(!d._webAudio&&u._node&&!u._node.paused&&!u._node.ended&&u._node.currentTime<u._stop)return setTimeout(d._ended.bind(d,u),100),d;var f=!!(u._loop||d._sprite[p][2]);if(d._emit("end",u._id),!d._webAudio&&f&&d.stop(u._id,!0).play(u._id),d._webAudio&&f){d._emit("play",u._id),u._seek=u._start||0,u._rateSeek=0,u._playStart=r.ctx.currentTime;var m=(u._stop-u._start)*1e3/Math.abs(u._rate);d._endTimers[u._id]=setTimeout(d._ended.bind(d,u),m)}return d._webAudio&&!f&&(u._paused=!0,u._ended=!0,u._seek=u._start||0,u._rateSeek=0,d._clearTimer(u._id),d._cleanBuffer(u._node),r._autoSuspend()),!d._webAudio&&!f&&d.stop(u._id,!0),d},_clearTimer:function(u){var d=this;if(d._endTimers[u]){if(typeof d._endTimers[u]!="function")clearTimeout(d._endTimers[u]);else{var p=d._soundById(u);p&&p._node&&p._node.removeEventListener("ended",d._endTimers[u],!1)}delete d._endTimers[u]}return d},_soundById:function(u){for(var d=this,p=0;p<d._sounds.length;p++)if(u===d._sounds[p]._id)return d._sounds[p];return null},_inactiveSound:function(){var u=this;u._drain();for(var d=0;d<u._sounds.length;d++)if(u._sounds[d]._ended)return u._sounds[d].reset();return new n(u)},_drain:function(){var u=this,d=u._pool,p=0,f=0;if(!(u._sounds.length<d)){for(f=0;f<u._sounds.length;f++)u._sounds[f]._ended&&p++;for(f=u._sounds.length-1;f>=0;f--){if(p<=d)return;u._sounds[f]._ended&&(u._webAudio&&u._sounds[f]._node&&u._sounds[f]._node.disconnect(0),u._sounds.splice(f,1),p--)}}},_getSoundIds:function(u){var d=this;if(typeof u>"u"){for(var p=[],f=0;f<d._sounds.length;f++)p.push(d._sounds[f]._id);return p}else return[u]},_refreshBuffer:function(u){var d=this;return u._node.bufferSource=r.ctx.createBufferSource(),u._node.bufferSource.buffer=s[d._src],u._panner?u._node.bufferSource.connect(u._panner):u._node.bufferSource.connect(u._node),u._node.bufferSource.loop=u._loop,u._loop&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop||0),u._node.bufferSource.playbackRate.setValueAtTime(u._rate,r.ctx.currentTime),d},_cleanBuffer:function(u){var d=this,p=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(r._scratchBuffer&&u.bufferSource&&(u.bufferSource.onended=null,u.bufferSource.disconnect(0),p))try{u.bufferSource.buffer=r._scratchBuffer}catch{}return u.bufferSource=null,d},_clearSound:function(u){var d=/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent);d||(u.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var n=function(u){this._parent=u,this.init()};n.prototype={init:function(){var u=this,d=u._parent;return u._muted=d._muted,u._loop=d._loop,u._volume=d._volume,u._rate=d._rate,u._seek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++r._counter,d._sounds.push(u),u.create(),u},create:function(){var u=this,d=u._parent,p=r._muted||u._muted||u._parent._muted?0:u._volume;return d._webAudio?(u._node=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),u._node.gain.setValueAtTime(p,r.ctx.currentTime),u._node.paused=!0,u._node.connect(r.masterGain)):r.noAudio||(u._node=r._obtainHtml5Audio(),u._errorFn=u._errorListener.bind(u),u._node.addEventListener("error",u._errorFn,!1),u._loadFn=u._loadListener.bind(u),u._node.addEventListener(r._canPlayEvent,u._loadFn,!1),u._endFn=u._endListener.bind(u),u._node.addEventListener("ended",u._endFn,!1),u._node.src=d._src,u._node.preload=d._preload===!0?"auto":d._preload,u._node.volume=p*r.volume(),u._node.load()),u},reset:function(){var u=this,d=u._parent;return u._muted=d._muted,u._loop=d._loop,u._volume=d._volume,u._rate=d._rate,u._seek=0,u._rateSeek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++r._counter,u},_errorListener:function(){var u=this;u._parent._emit("loaderror",u._id,u._node.error?u._node.error.code:0),u._node.removeEventListener("error",u._errorFn,!1)},_loadListener:function(){var u=this,d=u._parent;d._duration=Math.ceil(u._node.duration*10)/10,Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue()),u._node.removeEventListener(r._canPlayEvent,u._loadFn,!1)},_endListener:function(){var u=this,d=u._parent;d._duration===1/0&&(d._duration=Math.ceil(u._node.duration*10)/10,d._sprite.__default[1]===1/0&&(d._sprite.__default[1]=d._duration*1e3),d._ended(u)),u._node.removeEventListener("ended",u._endFn,!1)}};var s={},a=function(u){var d=u._src;if(s[d]){u._duration=s[d].duration,h(u);return}if(/^data:[^;]+;base64,/.test(d)){for(var p=atob(d.split(",")[1]),f=new Uint8Array(p.length),m=0;m<p.length;++m)f[m]=p.charCodeAt(m);l(f.buffer,u)}else{var g=new XMLHttpRequest;g.open(u._xhr.method,d,!0),g.withCredentials=u._xhr.withCredentials,g.responseType="arraybuffer",u._xhr.headers&&Object.keys(u._xhr.headers).forEach(function(v){g.setRequestHeader(v,u._xhr.headers[v])}),g.onload=function(){var v=(g.status+"")[0];if(v!=="0"&&v!=="2"&&v!=="3"){u._emit("loaderror",null,"Failed loading audio file with status: "+g.status+".");return}l(g.response,u)},g.onerror=function(){u._webAudio&&(u._html5=!0,u._webAudio=!1,u._sounds=[],delete s[d],u.load())},o(g)}},o=function(u){try{u.send()}catch{u.onerror()}},l=function(u,d){var p=function(){d._emit("loaderror",null,"Decoding audio data failed.")},f=function(m){m&&d._sounds.length>0?(s[d._src]=m,h(d,m)):p()};typeof Promise<"u"&&r.ctx.decodeAudioData.length===1?r.ctx.decodeAudioData(u).then(f).catch(p):r.ctx.decodeAudioData(u,f,p)},h=function(u,d){d&&!u._duration&&(u._duration=d.duration),Object.keys(u._sprite).length===0&&(u._sprite={__default:[0,u._duration*1e3]}),u._state!=="loaded"&&(u._state="loaded",u._emit("load"),u._loadQueue())},c=function(){if(r.usingWebAudio){try{typeof AudioContext<"u"?r.ctx=new AudioContext:typeof webkitAudioContext<"u"?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch{r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var u=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),d=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),p=d?parseInt(d[1],10):null;if(u&&p&&p<9){var f=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!f&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:r,Howl:i}}),typeof e<"u"&&(e.Howler=r,e.Howl=i),typeof global<"u"?(global.HowlerGlobal=t,global.Howler=r,global.Howl=i,global.Sound=n):typeof window<"u"&&(window.HowlerGlobal=t,window.Howler=r,window.Howl=i,window.Sound=n)})(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(r){var i=this;if(!i.ctx||!i.ctx.listener)return i;for(var n=i._howls.length-1;n>=0;n--)i._howls[n].stereo(r);return i},HowlerGlobal.prototype.pos=function(r,i,n){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(i=typeof i!="number"?s._pos[1]:i,n=typeof n!="number"?s._pos[2]:n,typeof r=="number")s._pos=[r,i,n],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(r,i,n,s,a,o){var l=this;if(!l.ctx||!l.ctx.listener)return l;var h=l._orientation;if(i=typeof i!="number"?h[1]:i,n=typeof n!="number"?h[2]:n,s=typeof s!="number"?h[3]:s,a=typeof a!="number"?h[4]:a,o=typeof o!="number"?h[5]:o,typeof r=="number")l._orientation=[r,i,n,s,a,o],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(a,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(r,i,n,s,a,o);else return h;return l},Howl.prototype.init=function(r){return function(i){var n=this;return n._orientation=i.orientation||[1,0,0],n._stereo=i.stereo||null,n._pos=i.pos||null,n._pannerAttr={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:360,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:360,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:0,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:"inverse",maxDistance:typeof i.maxDistance<"u"?i.maxDistance:1e4,panningModel:typeof i.panningModel<"u"?i.panningModel:"HRTF",refDistance:typeof i.refDistance<"u"?i.refDistance:1,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:1},n._onstereo=i.onstereo?[{fn:i.onstereo}]:[],n._onpos=i.onpos?[{fn:i.onpos}]:[],n._onorientation=i.onorientation?[{fn:i.onorientation}]:[],r.call(this,i)}}(Howl.prototype.init),Howl.prototype.stereo=function(r,i){var n=this;if(!n._webAudio)return n;if(n._state!=="loaded")return n._queue.push({event:"stereo",action:function(){n.stereo(r,i)}}),n;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof i>"u")if(typeof r=="number")n._stereo=r,n._pos=[r,0,0];else return n._stereo;for(var a=n._getSoundIds(i),o=0;o<a.length;o++){var l=n._soundById(a[o]);if(l)if(typeof r=="number")l._stereo=r,l._pos=[r,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&t(l,s),s==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(r,0,0):l._panner.pan.setValueAtTime(r,Howler.ctx.currentTime)),n._emit("stereo",l._id);else return l._stereo}return n},Howl.prototype.pos=function(r,i,n,s){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"pos",action:function(){a.pos(r,i,n,s)}}),a;if(i=typeof i!="number"?0:i,n=typeof n!="number"?-.5:n,typeof s>"u")if(typeof r=="number")a._pos=[r,i,n];else return a._pos;for(var o=a._getSoundIds(s),l=0;l<o.length;l++){var h=a._soundById(o[l]);if(h)if(typeof r=="number")h._pos=[r,i,n],h._node&&((!h._panner||h._panner.pan)&&t(h,"spatial"),typeof h._panner.positionX<"u"?(h._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):h._panner.setPosition(r,i,n)),a._emit("pos",h._id);else return h._pos}return a},Howl.prototype.orientation=function(r,i,n,s){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"orientation",action:function(){a.orientation(r,i,n,s)}}),a;if(i=typeof i!="number"?a._orientation[1]:i,n=typeof n!="number"?a._orientation[2]:n,typeof s>"u")if(typeof r=="number")a._orientation=[r,i,n];else return a._orientation;for(var o=a._getSoundIds(s),l=0;l<o.length;l++){var h=a._soundById(o[l]);if(h)if(typeof r=="number")h._orientation=[r,i,n],h._node&&(h._panner||(h._pos||(h._pos=a._pos||[0,0,-.5]),t(h,"spatial")),typeof h._panner.orientationX<"u"?(h._panner.orientationX.setValueAtTime(r,Howler.ctx.currentTime),h._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),h._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):h._panner.setOrientation(r,i,n)),a._emit("orientation",h._id);else return h._orientation}return a},Howl.prototype.pannerAttr=function(){var r=this,i=arguments,n,s,a;if(!r._webAudio)return r;if(i.length===0)return r._pannerAttr;if(i.length===1)if(typeof i[0]=="object")n=i[0],typeof s>"u"&&(n.pannerAttr||(n.pannerAttr={coneInnerAngle:n.coneInnerAngle,coneOuterAngle:n.coneOuterAngle,coneOuterGain:n.coneOuterGain,distanceModel:n.distanceModel,maxDistance:n.maxDistance,refDistance:n.refDistance,rolloffFactor:n.rolloffFactor,panningModel:n.panningModel}),r._pannerAttr={coneInnerAngle:typeof n.pannerAttr.coneInnerAngle<"u"?n.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:typeof n.pannerAttr.coneOuterAngle<"u"?n.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:typeof n.pannerAttr.coneOuterGain<"u"?n.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:typeof n.pannerAttr.distanceModel<"u"?n.pannerAttr.distanceModel:r._distanceModel,maxDistance:typeof n.pannerAttr.maxDistance<"u"?n.pannerAttr.maxDistance:r._maxDistance,refDistance:typeof n.pannerAttr.refDistance<"u"?n.pannerAttr.refDistance:r._refDistance,rolloffFactor:typeof n.pannerAttr.rolloffFactor<"u"?n.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:typeof n.pannerAttr.panningModel<"u"?n.pannerAttr.panningModel:r._panningModel});else return a=r._soundById(parseInt(i[0],10)),a?a._pannerAttr:r._pannerAttr;else i.length===2&&(n=i[0],s=parseInt(i[1],10));for(var o=r._getSoundIds(s),l=0;l<o.length;l++)if(a=r._soundById(o[l]),a){var h=a._pannerAttr;h={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:h.coneOuterAngle,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:h.coneOuterGain,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:h.distanceModel,maxDistance:typeof n.maxDistance<"u"?n.maxDistance:h.maxDistance,refDistance:typeof n.refDistance<"u"?n.refDistance:h.refDistance,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:h.rolloffFactor,panningModel:typeof n.panningModel<"u"?n.panningModel:h.panningModel};var c=a._panner;c?(c.coneInnerAngle=h.coneInnerAngle,c.coneOuterAngle=h.coneOuterAngle,c.coneOuterGain=h.coneOuterGain,c.distanceModel=h.distanceModel,c.maxDistance=h.maxDistance,c.refDistance=h.refDistance,c.rolloffFactor=h.rolloffFactor,c.panningModel=h.panningModel):(a._pos||(a._pos=r._pos||[0,0,-.5]),t(a,"spatial"))}return r},Sound.prototype.init=function(r){return function(){var i=this,n=i._parent;i._orientation=n._orientation,i._stereo=n._stereo,i._pos=n._pos,i._pannerAttr=n._pannerAttr,r.call(this),i._stereo?n.stereo(i._stereo):i._pos&&n.pos(i._pos[0],i._pos[1],i._pos[2],i._id)}}(Sound.prototype.init),Sound.prototype.reset=function(r){return function(){var i=this,n=i._parent;return i._orientation=n._orientation,i._stereo=n._stereo,i._pos=n._pos,i._pannerAttr=n._pannerAttr,i._stereo?n.stereo(i._stereo):i._pos?n.pos(i._pos[0],i._pos[1],i._pos[2],i._id):i._panner&&(i._panner.disconnect(0),i._panner=void 0,n._refreshBuffer(i)),r.call(this)}}(Sound.prototype.reset);var t=function(r,i){i=i||"spatial",i==="spatial"?(r._panner=Howler.ctx.createPanner(),r._panner.coneInnerAngle=r._pannerAttr.coneInnerAngle,r._panner.coneOuterAngle=r._pannerAttr.coneOuterAngle,r._panner.coneOuterGain=r._pannerAttr.coneOuterGain,r._panner.distanceModel=r._pannerAttr.distanceModel,r._panner.maxDistance=r._pannerAttr.maxDistance,r._panner.refDistance=r._pannerAttr.refDistance,r._panner.rolloffFactor=r._pannerAttr.rolloffFactor,r._panner.panningModel=r._pannerAttr.panningModel,typeof r._panner.positionX<"u"?(r._panner.positionX.setValueAtTime(r._pos[0],Howler.ctx.currentTime),r._panner.positionY.setValueAtTime(r._pos[1],Howler.ctx.currentTime),r._panner.positionZ.setValueAtTime(r._pos[2],Howler.ctx.currentTime)):r._panner.setPosition(r._pos[0],r._pos[1],r._pos[2]),typeof r._panner.orientationX<"u"?(r._panner.orientationX.setValueAtTime(r._orientation[0],Howler.ctx.currentTime),r._panner.orientationY.setValueAtTime(r._orientation[1],Howler.ctx.currentTime),r._panner.orientationZ.setValueAtTime(r._orientation[2],Howler.ctx.currentTime)):r._panner.setOrientation(r._orientation[0],r._orientation[1],r._orientation[2])):(r._panner=Howler.ctx.createStereoPanner(),r._panner.pan.setValueAtTime(r._stereo,Howler.ctx.currentTime)),r._panner.connect(r._node),r._paused||r._parent.pause(r._id,!0).play(r._id,!0)}}()}),cW=lf((e,t)=>{t.exports=function(r,i){for(var n=r.split("."),s=i.split("."),a=0;a<3;a++){var o=Number(n[a]),l=Number(s[a]);if(o>l)return 1;if(l>o)return-1;if(!isNaN(o)&&isNaN(l))return 1;if(isNaN(o)&&!isNaN(l))return-1}return 0}}),uf="149",Es={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},dW=0,ES=1,pW=2,Lw=1,fW=2,O1=3,za=0,_i=1,ps=2,ti=0,cp=1,TS=2,LS=3,PS=4,mW=5,vd=100,gW=101,vW=102,DS=103,OS=104,yW=200,xW=201,wW=202,bW=203,aR=204,oR=205,_W=206,CW=207,SW=208,MW=209,AW=210,EW=0,TW=1,LW=2,d7=3,PW=4,DW=5,OW=6,IW=7,lR=0,RW=1,BW=2,wl=0,zW=1,kW=2,NW=3,FW=4,UW=5,hR=300,fc=301,mc=302,p7=303,f7=304,Em=306,ml=1e3,Gr=1001,m7=1002,ur=1003,IS=1004,G4=1005,Lt=1006,jW=1007,Vp=1008,en=1009,VW=1010,GW=1011,uR=1012,HW=1013,mh=1014,fs=1015,Gp=1016,WW=1017,qW=1018,Ku=1020,XW=1021,Ws=1023,YW=1024,QW=1025,$u=1026,gc=1027,ZW=1028,KW=1029,cR=1030,$W=1031,JW=1033,H4=33776,W4=33777,q4=33778,X4=33779,RS=35840,BS=35841,zS=35842,kS=35843,eq=36196,NS=37492,FS=37496,US=37808,jS=37809,VS=37810,GS=37811,HS=37812,WS=37813,qS=37814,XS=37815,YS=37816,QS=37817,ZS=37818,KS=37819,$S=37820,JS=37821,Y4=36492,tq=36283,eM=36284,tM=36285,rM=36286,dR=2200,pR=2201,Pw=2202,n3=2300,s3=2301,Q4=2302,jd=2400,Vd=2401,a3=2402,Dw=2500,rq=2501,Mo=3e3,_t=3001,Bl=3200,fR=3201,iq=0,nq=1,io="srgb",o3="srgb-linear",Z4=7680,sq=519,g7=35044,iM="300 es",v7=1035,Ni=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let r=this._listeners[e];if(r!==void 0){let i=r.indexOf(t);i!==-1&&r.splice(i,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let t=this._listeners[e.type];if(t!==void 0){e.target=this;let r=t.slice(0);for(let i=0,n=r.length;i<n;i++)r[i].call(this,e);e.target=null}}},Vi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],nM=1234567,h0=Math.PI/180,J0=180/Math.PI;function ta(){let e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Vi[e&255]+Vi[e>>8&255]+Vi[e>>16&255]+Vi[e>>24&255]+"-"+Vi[t&255]+Vi[t>>8&255]+"-"+Vi[t>>16&15|64]+Vi[t>>24&255]+"-"+Vi[r&63|128]+Vi[r>>8&255]+"-"+Vi[r>>16&255]+Vi[r>>24&255]+Vi[i&255]+Vi[i>>8&255]+Vi[i>>16&255]+Vi[i>>24&255]).toLowerCase()}function li(e,t,r){return Math.max(t,Math.min(r,e))}function Ow(e,t){return(e%t+t)%t}function aq(e,t,r,i,n){return i+(e-t)*(n-i)/(r-t)}function oq(e,t,r){return e!==t?(r-e)/(t-e):0}function u0(e,t,r){return(1-r)*e+r*t}function lq(e,t,r,i){return u0(e,t,1-Math.exp(-r*i))}function hq(e,t=1){return t-Math.abs(Ow(e,t*2)-t)}function uq(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*(3-2*e))}function cq(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t),e*e*e*(e*(e*6-15)+10))}function dq(e,t){return e+Math.floor(Math.random()*(t-e+1))}function pq(e,t){return e+Math.random()*(t-e)}function fq(e){return e*(.5-Math.random())}function mq(e){e!==void 0&&(nM=e);let t=nM+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function gq(e){return e*h0}function vq(e){return e*J0}function y7(e){return(e&e-1)===0&&e!==0}function mR(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function l3(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function yq(e,t,r,i,n){let s=Math.cos,a=Math.sin,o=s(r/2),l=a(r/2),h=s((t+i)/2),c=a((t+i)/2),u=s((t-i)/2),d=a((t-i)/2),p=s((i-t)/2),f=a((i-t)/2);switch(n){case"XYX":e.set(o*c,l*u,l*d,o*h);break;case"YZY":e.set(l*d,o*c,l*u,o*h);break;case"ZXZ":e.set(l*u,l*d,o*c,o*h);break;case"XZX":e.set(o*c,l*f,l*p,o*h);break;case"YXY":e.set(l*p,o*c,l*f,o*h);break;case"ZYZ":e.set(l*f,l*p,o*c,o*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}function gl(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function lr(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(e*65535);case Uint8Array:return Math.round(e*255);case Int16Array:return Math.round(e*32767);case Int8Array:return Math.round(e*127);default:throw new Error("Invalid component type.")}}var Tt=Object.freeze({__proto__:null,DEG2RAD:h0,RAD2DEG:J0,ceilPowerOfTwo:mR,clamp:li,damp:lq,degToRad:gq,denormalize:gl,euclideanModulo:Ow,floorPowerOfTwo:l3,generateUUID:ta,inverseLerp:oq,isPowerOfTwo:y7,lerp:u0,mapLinear:aq,normalize:lr,pingpong:hq,radToDeg:vq,randFloat:pq,randFloatSpread:fq,randInt:dq,seededRandom:mq,setQuaternionFromProperEuler:yq,smootherstep:cq,smoothstep:uq}),X=class{constructor(e=0,t=0){X.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let r=Math.cos(t),i=Math.sin(t),n=this.x-e.x,s=this.y-e.y;return this.x=n*r-s*i+e.x,this.y=n*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Ci=class{constructor(){Ci.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,r,i,n,s,a,o,l){let h=this.elements;return h[0]=e,h[1]=i,h[2]=a,h[3]=t,h[4]=n,h[5]=o,h[6]=r,h[7]=s,h[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,i=t.elements,n=this.elements,s=r[0],a=r[3],o=r[6],l=r[1],h=r[4],c=r[7],u=r[2],d=r[5],p=r[8],f=i[0],m=i[3],g=i[6],v=i[1],y=i[4],x=i[7],w=i[2],_=i[5],b=i[8];return n[0]=s*f+a*v+o*w,n[3]=s*m+a*y+o*_,n[6]=s*g+a*x+o*b,n[1]=l*f+h*v+c*w,n[4]=l*m+h*y+c*_,n[7]=l*g+h*x+c*b,n[2]=u*f+d*v+p*w,n[5]=u*m+d*y+p*_,n[8]=u*g+d*x+p*b,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],a=e[5],o=e[6],l=e[7],h=e[8];return t*s*h-t*a*l-r*n*h+r*a*o+i*n*l-i*s*o}invert(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],a=e[5],o=e[6],l=e[7],h=e[8],c=h*s-a*l,u=a*o-h*n,d=l*n-s*o,p=t*c+r*u+i*d;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);let f=1/p;return e[0]=c*f,e[1]=(i*l-h*r)*f,e[2]=(a*r-i*s)*f,e[3]=u*f,e[4]=(h*t-i*o)*f,e[5]=(i*n-a*t)*f,e[6]=d*f,e[7]=(r*o-l*t)*f,e[8]=(s*t-r*n)*f,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,n,s,a){let o=Math.cos(n),l=Math.sin(n);return this.set(r*o,r*l,-r*(o*s+l*a)+s+e,-i*l,i*o,-i*(-l*s+o*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(K4.makeScale(e,t)),this}rotate(e){return this.premultiply(K4.makeRotation(-e)),this}translate(e,t){return this.premultiply(K4.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}},K4=new Ci;function gR(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var xq={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function xg(e,t){return new xq[e](t)}function h3(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Ju(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function s2(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}var $4={[io]:{[o3]:Ju},[o3]:{[io]:s2}},rn={legacyMode:!0,get workingColorSpace(){return o3},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,r){if(this.legacyMode||t===r||!t||!r)return e;if($4[t]&&$4[t][r]!==void 0){let i=$4[t][r];return e.r=i(e.r),e.g=i(e.g),e.b=i(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},vR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ri={r:0,g:0,b:0},ua={h:0,s:0,l:0},wg={h:0,s:0,l:0};function J4(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*6*(2/3-r):e}function bg(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var lt=class{constructor(t,r,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,r===void 0&&i===void 0?this.set(t):this.setRGB(t,r,i)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,r=io){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,rn.toWorkingColorSpace(this,r),this}setRGB(t,r,i,n=rn.workingColorSpace){return this.r=t,this.g=r,this.b=i,rn.toWorkingColorSpace(this,n),this}setHSL(t,r,i,n=rn.workingColorSpace){if(t=Ow(t,1),r=li(r,0,1),i=li(i,0,1),r===0)this.r=this.g=this.b=i;else{let s=i<=.5?i*(1+r):i+r-i*r,a=2*i-s;this.r=J4(a,s,t+1/3),this.g=J4(a,s,t),this.b=J4(a,s,t-1/3)}return rn.toWorkingColorSpace(this,n),this}setStyle(t,r=io){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let s,a=n[1],o=n[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,rn.toWorkingColorSpace(this,r),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,rn.toWorkingColorSpace(this,r),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){let l=parseFloat(s[1])/360,h=parseFloat(s[2])/100,c=parseFloat(s[3])/100;return i(s[4]),this.setHSL(l,h,c,r)}break}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){let s=n[1],a=s.length;if(a===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,rn.toWorkingColorSpace(this,r),this;if(a===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,rn.toWorkingColorSpace(this,r),this}return t&&t.length>0?this.setColorName(t,r):this}setColorName(t,r=io){let i=vR[t.toLowerCase()];return i!==void 0?this.setHex(i,r):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Ju(t.r),this.g=Ju(t.g),this.b=Ju(t.b),this}copyLinearToSRGB(t){return this.r=s2(t.r),this.g=s2(t.g),this.b=s2(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=io){return rn.fromWorkingColorSpace(bg(this,ri),t),li(ri.r*255,0,255)<<16^li(ri.g*255,0,255)<<8^li(ri.b*255,0,255)<<0}getHexString(t=io){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,r=rn.workingColorSpace){rn.fromWorkingColorSpace(bg(this,ri),r);let i=ri.r,n=ri.g,s=ri.b,a=Math.max(i,n,s),o=Math.min(i,n,s),l,h,c=(o+a)/2;if(o===a)l=0,h=0;else{let u=a-o;switch(h=c<=.5?u/(a+o):u/(2-a-o),a){case i:l=(n-s)/u+(n<s?6:0);break;case n:l=(s-i)/u+2;break;case s:l=(i-n)/u+4;break}l/=6}return t.h=l,t.s=h,t.l=c,t}getRGB(t,r=rn.workingColorSpace){return rn.fromWorkingColorSpace(bg(this,ri),r),t.r=ri.r,t.g=ri.g,t.b=ri.b,t}getStyle(t=io){return rn.fromWorkingColorSpace(bg(this,ri),t),t!==io?`color(${t} ${ri.r} ${ri.g} ${ri.b})`:`rgb(${ri.r*255|0},${ri.g*255|0},${ri.b*255|0})`}offsetHSL(t,r,i){return this.getHSL(ua),ua.h+=t,ua.s+=r,ua.l+=i,this.setHSL(ua.h,ua.s,ua.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,r){return this.r=t.r+r.r,this.g=t.g+r.g,this.b=t.b+r.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,r){return this.r+=(t.r-this.r)*r,this.g+=(t.g-this.g)*r,this.b+=(t.b-this.b)*r,this}lerpColors(t,r,i){return this.r=t.r+(r.r-t.r)*i,this.g=t.g+(r.g-t.g)*i,this.b=t.b+(r.b-t.b)*i,this}lerpHSL(t,r){this.getHSL(ua),t.getHSL(wg);let i=u0(ua.h,wg.h,r),n=u0(ua.s,wg.s,r),s=u0(ua.l,wg.l,r);return this.setHSL(i,n,s),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,r=0){return this.r=t[r],this.g=t[r+1],this.b=t[r+2],this}toArray(t=[],r=0){return t[r]=this.r,t[r+1]=this.g,t[r+2]=this.b,t}fromBufferAttribute(t,r){return this.r=t.getX(r),this.g=t.getY(r),this.b=t.getZ(r),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};lt.NAMES=vR;var Bc,yR=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Bc===void 0&&(Bc=h3("canvas")),Bc.width=e.width,Bc.height=e.height;let r=Bc.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Bc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=h3("canvas");t.width=e.width,t.height=e.height;let r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);let i=r.getImageData(0,0,e.width,e.height),n=i.data;for(let s=0;s<n.length;s++)n[s]=Ju(n[s]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){let t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Ju(t[r]/255)*255):t[r]=Ju(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},xR=class{constructor(e=null){this.isSource=!0,this.uuid=ta(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let n;if(Array.isArray(i)){n=[];for(let s=0,a=i.length;s<a;s++)i[s].isDataTexture?n.push(e5(i[s].image)):n.push(e5(i[s]))}else n=e5(i);r.url=n}return t||(e.images[this.uuid]=r),r}};function e5(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?yR.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var wq=0,ui=class extends Ni{constructor(e=ui.DEFAULT_IMAGE,t=ui.DEFAULT_MAPPING,r=Gr,i=Gr,n=Lt,s=Vp,a=Ws,o=en,l=ui.DEFAULT_ANISOTROPY,h=Mo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:wq++}),this.uuid=ta(),this.name="",this.source=new xR(e),this.mipmaps=[],this.mapping=t,this.wrapS=r,this.wrapT=i,this.magFilter=n,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new X(0,0),this.repeat=new X(1,1),this.center=new X(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ci,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==hR)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ml:e.x=e.x-Math.floor(e.x);break;case Gr:e.x=e.x<0?0:1;break;case m7:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ml:e.y=e.y-Math.floor(e.y);break;case Gr:e.y=e.y<0?0:1;break;case m7:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};ui.DEFAULT_IMAGE=null;ui.DEFAULT_MAPPING=hR;ui.DEFAULT_ANISOTROPY=1;var Ct=class{constructor(e=0,t=0,r=0,i=1){Ct.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,n=this.w,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i+s[12]*n,this.y=s[1]*t+s[5]*r+s[9]*i+s[13]*n,this.z=s[2]*t+s[6]*r+s[10]*i+s[14]*n,this.w=s[3]*t+s[7]*r+s[11]*i+s[15]*n,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,n,s=e.elements,a=s[0],o=s[4],l=s[8],h=s[1],c=s[5],u=s[9],d=s[2],p=s[6],f=s[10];if(Math.abs(o-h)<.01&&Math.abs(l-d)<.01&&Math.abs(u-p)<.01){if(Math.abs(o+h)<.1&&Math.abs(l+d)<.1&&Math.abs(u+p)<.1&&Math.abs(a+c+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let g=(a+1)/2,v=(c+1)/2,y=(f+1)/2,x=(o+h)/4,w=(l+d)/4,_=(u+p)/4;return g>v&&g>y?g<.01?(r=0,i=.707106781,n=.707106781):(r=Math.sqrt(g),i=x/r,n=w/r):v>y?v<.01?(r=.707106781,i=0,n=.707106781):(i=Math.sqrt(v),r=x/i,n=_/i):y<.01?(r=.707106781,i=.707106781,n=0):(n=Math.sqrt(y),r=w/n,i=_/n),this.set(r,i,n,t),this}let m=Math.sqrt((p-u)*(p-u)+(l-d)*(l-d)+(h-o)*(h-o));return Math.abs(m)<.001&&(m=1),this.x=(p-u)/m,this.y=(l-d)/m,this.z=(h-o)/m,this.w=Math.acos((a+c+f-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},tr=class extends Ni{constructor(e=1,t=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ct(0,0,e,t),this.scissorTest=!1,this.viewport=new Ct(0,0,e,t);let i={width:e,height:t,depth:1};this.texture=new ui(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Lt,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new xR(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},wR=class extends ui{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=ur,this.minFilter=ur,this.wrapR=Gr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},bq=class extends ui{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=ur,this.minFilter=ur,this.wrapR=Gr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},_q=class extends tr{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;let n=this.texture;this.texture=[];for(let s=0;s<r;s++)this.texture[s]=n.clone(),this.texture[s].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,n=this.texture.length;i<n;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}},Et=class{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,n,s,a){let o=r[i+0],l=r[i+1],h=r[i+2],c=r[i+3],u=n[s+0],d=n[s+1],p=n[s+2],f=n[s+3];if(a===0){e[t+0]=o,e[t+1]=l,e[t+2]=h,e[t+3]=c;return}if(a===1){e[t+0]=u,e[t+1]=d,e[t+2]=p,e[t+3]=f;return}if(c!==f||o!==u||l!==d||h!==p){let m=1-a,g=o*u+l*d+h*p+c*f,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){let w=Math.sqrt(y),_=Math.atan2(w,g*v);m=Math.sin(m*_)/w,a=Math.sin(a*_)/w}let x=a*v;if(o=o*m+u*x,l=l*m+d*x,h=h*m+p*x,c=c*m+f*x,m===1-a){let w=1/Math.sqrt(o*o+l*l+h*h+c*c);o*=w,l*=w,h*=w,c*=w}}e[t]=o,e[t+1]=l,e[t+2]=h,e[t+3]=c}static multiplyQuaternionsFlat(e,t,r,i,n,s){let a=r[i],o=r[i+1],l=r[i+2],h=r[i+3],c=n[s],u=n[s+1],d=n[s+2],p=n[s+3];return e[t]=a*p+h*c+o*d-l*u,e[t+1]=o*p+h*u+l*c-a*d,e[t+2]=l*p+h*d+a*u-o*c,e[t+3]=h*p-a*c-o*u-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){let r=e._x,i=e._y,n=e._z,s=e._order,a=Math.cos,o=Math.sin,l=a(r/2),h=a(i/2),c=a(n/2),u=o(r/2),d=o(i/2),p=o(n/2);switch(s){case"XYZ":this._x=u*h*c+l*d*p,this._y=l*d*c-u*h*p,this._z=l*h*p+u*d*c,this._w=l*h*c-u*d*p;break;case"YXZ":this._x=u*h*c+l*d*p,this._y=l*d*c-u*h*p,this._z=l*h*p-u*d*c,this._w=l*h*c+u*d*p;break;case"ZXY":this._x=u*h*c-l*d*p,this._y=l*d*c+u*h*p,this._z=l*h*p+u*d*c,this._w=l*h*c-u*d*p;break;case"ZYX":this._x=u*h*c-l*d*p,this._y=l*d*c+u*h*p,this._z=l*h*p-u*d*c,this._w=l*h*c+u*d*p;break;case"YZX":this._x=u*h*c+l*d*p,this._y=l*d*c+u*h*p,this._z=l*h*p-u*d*c,this._w=l*h*c-u*d*p;break;case"XZY":this._x=u*h*c-l*d*p,this._y=l*d*c-u*h*p,this._z=l*h*p+u*d*c,this._w=l*h*c+u*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,r=t[0],i=t[4],n=t[8],s=t[1],a=t[5],o=t[9],l=t[2],h=t[6],c=t[10],u=r+a+c;if(u>0){let d=.5/Math.sqrt(u+1);this._w=.25/d,this._x=(h-o)*d,this._y=(n-l)*d,this._z=(s-i)*d}else if(r>a&&r>c){let d=2*Math.sqrt(1+r-a-c);this._w=(h-o)/d,this._x=.25*d,this._y=(i+s)/d,this._z=(n+l)/d}else if(a>c){let d=2*Math.sqrt(1+a-r-c);this._w=(n-l)/d,this._x=(i+s)/d,this._y=.25*d,this._z=(o+h)/d}else{let d=2*Math.sqrt(1+c-r-a);this._w=(s-i)/d,this._x=(n+l)/d,this._y=(o+h)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(li(this.dot(e),-1,1)))}rotateTowards(e,t){let r=this.angleTo(e);if(r===0)return this;let i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let r=e._x,i=e._y,n=e._z,s=e._w,a=t._x,o=t._y,l=t._z,h=t._w;return this._x=r*h+s*a+i*l-n*o,this._y=i*h+s*o+n*a-r*l,this._z=n*h+s*l+r*o-i*a,this._w=s*h-r*a-i*o-n*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let r=this._x,i=this._y,n=this._z,s=this._w,a=s*e._w+r*e._x+i*e._y+n*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=r,this._y=i,this._z=n,this;let o=1-a*a;if(o<=Number.EPSILON){let d=1-t;return this._w=d*s+t*this._w,this._x=d*r+t*this._x,this._y=d*i+t*this._y,this._z=d*n+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(o),h=Math.atan2(l,a),c=Math.sin((1-t)*h)/l,u=Math.sin(t*h)/l;return this._w=s*c+this._w*u,this._x=r*c+this._x*u,this._y=i*c+this._y*u,this._z=n*c+this._z*u,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){let e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(n),r*Math.cos(n),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},E=class{constructor(e=0,t=0,r=0){E.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(sM.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(sM.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6]*i,this.y=n[1]*t+n[4]*r+n[7]*i,this.z=n[2]*t+n[5]*r+n[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,n=e.elements,s=1/(n[3]*t+n[7]*r+n[11]*i+n[15]);return this.x=(n[0]*t+n[4]*r+n[8]*i+n[12])*s,this.y=(n[1]*t+n[5]*r+n[9]*i+n[13])*s,this.z=(n[2]*t+n[6]*r+n[10]*i+n[14])*s,this}applyQuaternion(e){let t=this.x,r=this.y,i=this.z,n=e.x,s=e.y,a=e.z,o=e.w,l=o*t+s*i-a*r,h=o*r+a*t-n*i,c=o*i+n*r-s*t,u=-n*t-s*r-a*i;return this.x=l*o+u*-n+h*-a-c*-s,this.y=h*o+u*-s+c*-n-l*-a,this.z=c*o+u*-a+l*-s-h*-n,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[4]*r+n[8]*i,this.y=n[1]*t+n[5]*r+n[9]*i,this.z=n[2]*t+n[6]*r+n[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let r=e.x,i=e.y,n=e.z,s=t.x,a=t.y,o=t.z;return this.x=i*o-n*a,this.y=n*s-r*o,this.z=r*a-i*s,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return t5.copy(this).projectOnVector(e),this.sub(t5)}reflect(e){return this.sub(t5.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let r=this.dot(e)/t;return Math.acos(li(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){let i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},t5=new E,sM=new Et,qr=class{constructor(e=new E(1/0,1/0,1/0),t=new E(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,r=1/0,i=1/0,n=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.length;o<l;o+=3){let h=e[o],c=e[o+1],u=e[o+2];h<t&&(t=h),c<r&&(r=c),u<i&&(i=u),h>n&&(n=h),c>s&&(s=c),u>a&&(a=u)}return this.min.set(t,r,i),this.max.set(n,s,a),this}setFromBufferAttribute(e){let t=1/0,r=1/0,i=1/0,n=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.count;o<l;o++){let h=e.getX(o),c=e.getY(o),u=e.getZ(o);h<t&&(t=h),c<r&&(r=c),u<i&&(i=u),h>n&&(n=h),c>s&&(s=c),u>a&&(a=u)}return this.min.set(t,r,i),this.max.set(n,s,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=au.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let r=e.geometry;if(r!==void 0)if(t&&r.attributes!=null&&r.attributes.position!==void 0){let n=r.attributes.position;for(let s=0,a=n.count;s<a;s++)au.fromBufferAttribute(n,s).applyMatrix4(e.matrixWorld),this.expandByPoint(au)}else r.boundingBox===null&&r.computeBoundingBox(),r5.copy(r.boundingBox),r5.applyMatrix4(e.matrixWorld),this.union(r5);let i=e.children;for(let n=0,s=i.length;n<s;n++)this.expandByObject(i[n],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,au),au.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Gf),_g.subVectors(this.max,Gf),zc.subVectors(e.a,Gf),kc.subVectors(e.b,Gf),Nc.subVectors(e.c,Gf),Fl.subVectors(kc,zc),Ul.subVectors(Nc,kc),ou.subVectors(zc,Nc);let t=[0,-Fl.z,Fl.y,0,-Ul.z,Ul.y,0,-ou.z,ou.y,Fl.z,0,-Fl.x,Ul.z,0,-Ul.x,ou.z,0,-ou.x,-Fl.y,Fl.x,0,-Ul.y,Ul.x,0,-ou.y,ou.x,0];return!i5(t,zc,kc,Nc,_g)||(t=[1,0,0,0,1,0,0,0,1],!i5(t,zc,kc,Nc,_g))?!1:(Cg.crossVectors(Fl,Ul),t=[Cg.x,Cg.y,Cg.z],i5(t,zc,kc,Nc,_g))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return au.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(au).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Bo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Bo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Bo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Bo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Bo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Bo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Bo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Bo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Bo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},Bo=[new E,new E,new E,new E,new E,new E,new E,new E],au=new E,r5=new qr,zc=new E,kc=new E,Nc=new E,Fl=new E,Ul=new E,ou=new E,Gf=new E,_g=new E,Cg=new E,lu=new E;function i5(e,t,r,i,n){for(let s=0,a=e.length-3;s<=a;s+=3){lu.fromArray(e,s);let o=n.x*Math.abs(lu.x)+n.y*Math.abs(lu.y)+n.z*Math.abs(lu.z),l=t.dot(lu),h=r.dot(lu),c=i.dot(lu);if(Math.max(-Math.max(l,h,c),Math.min(l,h,c))>o)return!1}return!0}var Cq=new qr,Hf=new E,n5=new E,_s=class{constructor(e=new E,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let r=this.center;t!==void 0?r.copy(t):Cq.setFromPoints(e).getCenter(r);let i=0;for(let n=0,s=e.length;n<s;n++)i=Math.max(i,r.distanceToSquared(e[n]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Hf.subVectors(e,this.center);let t=Hf.lengthSq();if(t>this.radius*this.radius){let r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Hf,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(n5.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Hf.copy(e.center).add(n5)),this.expandByPoint(Hf.copy(e.center).sub(n5))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},zo=new E,s5=new E,Sg=new E,jl=new E,a5=new E,Mg=new E,o5=new E,cf=class{constructor(e=new E,t=new E(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,zo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=zo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(zo.copy(this.direction).multiplyScalar(t).add(this.origin),zo.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){s5.copy(e).add(t).multiplyScalar(.5),Sg.copy(t).sub(e).normalize(),jl.copy(this.origin).sub(s5);let n=e.distanceTo(t)*.5,s=-this.direction.dot(Sg),a=jl.dot(this.direction),o=-jl.dot(Sg),l=jl.lengthSq(),h=Math.abs(1-s*s),c,u,d,p;if(h>0)if(c=s*o-a,u=s*a-o,p=n*h,c>=0)if(u>=-p)if(u<=p){let f=1/h;c*=f,u*=f,d=c*(c+s*u+2*a)+u*(s*c+u+2*o)+l}else u=n,c=Math.max(0,-(s*u+a)),d=-c*c+u*(u+2*o)+l;else u=-n,c=Math.max(0,-(s*u+a)),d=-c*c+u*(u+2*o)+l;else u<=-p?(c=Math.max(0,-(-s*n+a)),u=c>0?-n:Math.min(Math.max(-n,-o),n),d=-c*c+u*(u+2*o)+l):u<=p?(c=0,u=Math.min(Math.max(-n,-o),n),d=u*(u+2*o)+l):(c=Math.max(0,-(s*n+a)),u=c>0?n:Math.min(Math.max(-n,-o),n),d=-c*c+u*(u+2*o)+l);else u=s>0?-n:n,c=Math.max(0,-(s*u+a)),d=-c*c+u*(u+2*o)+l;return r&&r.copy(this.direction).multiplyScalar(c).add(this.origin),i&&i.copy(Sg).multiplyScalar(u).add(s5),d}intersectSphere(e,t){zo.subVectors(e.center,this.origin);let r=zo.dot(this.direction),i=zo.dot(zo)-r*r,n=e.radius*e.radius;if(i>n)return null;let s=Math.sqrt(n-i),a=r-s,o=r+s;return a<0&&o<0?null:a<0?this.at(o,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){let r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,n,s,a,o,l=1/this.direction.x,h=1/this.direction.y,c=1/this.direction.z,u=this.origin;return l>=0?(r=(e.min.x-u.x)*l,i=(e.max.x-u.x)*l):(r=(e.max.x-u.x)*l,i=(e.min.x-u.x)*l),h>=0?(n=(e.min.y-u.y)*h,s=(e.max.y-u.y)*h):(n=(e.max.y-u.y)*h,s=(e.min.y-u.y)*h),r>s||n>i||((n>r||isNaN(r))&&(r=n),(s<i||isNaN(i))&&(i=s),c>=0?(a=(e.min.z-u.z)*c,o=(e.max.z-u.z)*c):(a=(e.max.z-u.z)*c,o=(e.min.z-u.z)*c),r>o||a>i)||((a>r||r!==r)&&(r=a),(o<i||i!==i)&&(i=o),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,zo)!==null}intersectTriangle(e,t,r,i,n){a5.subVectors(t,e),Mg.subVectors(r,e),o5.crossVectors(a5,Mg);let s=this.direction.dot(o5),a;if(s>0){if(i)return null;a=1}else if(s<0)a=-1,s=-s;else return null;jl.subVectors(this.origin,e);let o=a*this.direction.dot(Mg.crossVectors(jl,Mg));if(o<0)return null;let l=a*this.direction.dot(a5.cross(jl));if(l<0||o+l>s)return null;let h=-a*jl.dot(o5);return h<0?null:this.at(h/s,n)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Ae=class{constructor(){Ae.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,r,i,n,s,a,o,l,h,c,u,d,p,f,m){let g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=n,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=h,g[10]=c,g[14]=u,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ae().fromArray(this.elements)}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){let t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,r=e.elements,i=1/Fc.setFromMatrixColumn(e,0).length(),n=1/Fc.setFromMatrixColumn(e,1).length(),s=1/Fc.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=0,t[8]=r[8]*s,t[9]=r[9]*s,t[10]=r[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,r=e.x,i=e.y,n=e.z,s=Math.cos(r),a=Math.sin(r),o=Math.cos(i),l=Math.sin(i),h=Math.cos(n),c=Math.sin(n);if(e.order==="XYZ"){let u=s*h,d=s*c,p=a*h,f=a*c;t[0]=o*h,t[4]=-o*c,t[8]=l,t[1]=d+p*l,t[5]=u-f*l,t[9]=-a*o,t[2]=f-u*l,t[6]=p+d*l,t[10]=s*o}else if(e.order==="YXZ"){let u=o*h,d=o*c,p=l*h,f=l*c;t[0]=u+f*a,t[4]=p*a-d,t[8]=s*l,t[1]=s*c,t[5]=s*h,t[9]=-a,t[2]=d*a-p,t[6]=f+u*a,t[10]=s*o}else if(e.order==="ZXY"){let u=o*h,d=o*c,p=l*h,f=l*c;t[0]=u-f*a,t[4]=-s*c,t[8]=p+d*a,t[1]=d+p*a,t[5]=s*h,t[9]=f-u*a,t[2]=-s*l,t[6]=a,t[10]=s*o}else if(e.order==="ZYX"){let u=s*h,d=s*c,p=a*h,f=a*c;t[0]=o*h,t[4]=p*l-d,t[8]=u*l+f,t[1]=o*c,t[5]=f*l+u,t[9]=d*l-p,t[2]=-l,t[6]=a*o,t[10]=s*o}else if(e.order==="YZX"){let u=s*o,d=s*l,p=a*o,f=a*l;t[0]=o*h,t[4]=f-u*c,t[8]=p*c+d,t[1]=c,t[5]=s*h,t[9]=-a*h,t[2]=-l*h,t[6]=d*c+p,t[10]=u-f*c}else if(e.order==="XZY"){let u=s*o,d=s*l,p=a*o,f=a*l;t[0]=o*h,t[4]=-c,t[8]=l*h,t[1]=u*c+f,t[5]=s*h,t[9]=d*c-p,t[2]=p*c-d,t[6]=a*h,t[10]=f*c+u}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Sq,e,Mq)}lookAt(e,t,r){let i=this.elements;return es.subVectors(e,t),es.lengthSq()===0&&(es.z=1),es.normalize(),Vl.crossVectors(r,es),Vl.lengthSq()===0&&(Math.abs(r.z)===1?es.x+=1e-4:es.z+=1e-4,es.normalize(),Vl.crossVectors(r,es)),Vl.normalize(),Ag.crossVectors(es,Vl),i[0]=Vl.x,i[4]=Ag.x,i[8]=es.x,i[1]=Vl.y,i[5]=Ag.y,i[9]=es.y,i[2]=Vl.z,i[6]=Ag.z,i[10]=es.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,i=t.elements,n=this.elements,s=r[0],a=r[4],o=r[8],l=r[12],h=r[1],c=r[5],u=r[9],d=r[13],p=r[2],f=r[6],m=r[10],g=r[14],v=r[3],y=r[7],x=r[11],w=r[15],_=i[0],b=i[4],S=i[8],C=i[12],M=i[1],A=i[5],T=i[9],L=i[13],D=i[2],O=i[6],z=i[10],q=i[14],N=i[3],I=i[7],W=i[11],P=i[15];return n[0]=s*_+a*M+o*D+l*N,n[4]=s*b+a*A+o*O+l*I,n[8]=s*S+a*T+o*z+l*W,n[12]=s*C+a*L+o*q+l*P,n[1]=h*_+c*M+u*D+d*N,n[5]=h*b+c*A+u*O+d*I,n[9]=h*S+c*T+u*z+d*W,n[13]=h*C+c*L+u*q+d*P,n[2]=p*_+f*M+m*D+g*N,n[6]=p*b+f*A+m*O+g*I,n[10]=p*S+f*T+m*z+g*W,n[14]=p*C+f*L+m*q+g*P,n[3]=v*_+y*M+x*D+w*N,n[7]=v*b+y*A+x*O+w*I,n[11]=v*S+y*T+x*z+w*W,n[15]=v*C+y*L+x*q+w*P,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[4],i=e[8],n=e[12],s=e[1],a=e[5],o=e[9],l=e[13],h=e[2],c=e[6],u=e[10],d=e[14],p=e[3],f=e[7],m=e[11],g=e[15];return p*(+n*o*c-i*l*c-n*a*u+r*l*u+i*a*d-r*o*d)+f*(+t*o*d-t*l*u+n*s*u-i*s*d+i*l*h-n*o*h)+m*(+t*l*c-t*a*d-n*s*c+r*s*d+n*a*h-r*l*h)+g*(-i*a*h-t*o*c+t*a*u+i*s*c-r*s*u+r*o*h)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){let i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],a=e[5],o=e[6],l=e[7],h=e[8],c=e[9],u=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=c*m*l-f*u*l+f*o*d-a*m*d-c*o*g+a*u*g,y=p*u*l-h*m*l-p*o*d+s*m*d+h*o*g-s*u*g,x=h*f*l-p*c*l+p*a*d-s*f*d-h*a*g+s*c*g,w=p*c*o-h*f*o-p*a*u+s*f*u+h*a*m-s*c*m,_=t*v+r*y+i*x+n*w;if(_===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let b=1/_;return e[0]=v*b,e[1]=(f*u*n-c*m*n-f*i*d+r*m*d+c*i*g-r*u*g)*b,e[2]=(a*m*n-f*o*n+f*i*l-r*m*l-a*i*g+r*o*g)*b,e[3]=(c*o*n-a*u*n-c*i*l+r*u*l+a*i*d-r*o*d)*b,e[4]=y*b,e[5]=(h*m*n-p*u*n+p*i*d-t*m*d-h*i*g+t*u*g)*b,e[6]=(p*o*n-s*m*n-p*i*l+t*m*l+s*i*g-t*o*g)*b,e[7]=(s*u*n-h*o*n+h*i*l-t*u*l-s*i*d+t*o*d)*b,e[8]=x*b,e[9]=(p*c*n-h*f*n-p*r*d+t*f*d+h*r*g-t*c*g)*b,e[10]=(s*f*n-p*a*n+p*r*l-t*f*l-s*r*g+t*a*g)*b,e[11]=(h*a*n-s*c*n-h*r*l+t*c*l+s*r*d-t*a*d)*b,e[12]=w*b,e[13]=(h*f*i-p*c*i+p*r*u-t*f*u-h*r*m+t*c*m)*b,e[14]=(p*a*i-s*f*i-p*r*o+t*f*o+s*r*m-t*a*m)*b,e[15]=(s*c*i-h*a*i+h*r*o-t*c*o-s*r*u+t*a*u)*b,this}scale(e){let t=this.elements,r=e.x,i=e.y,n=e.z;return t[0]*=r,t[4]*=i,t[8]*=n,t[1]*=r,t[5]*=i,t[9]*=n,t[2]*=r,t[6]*=i,t[10]*=n,t[3]*=r,t[7]*=i,t[11]*=n,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let r=Math.cos(t),i=Math.sin(t),n=1-r,s=e.x,a=e.y,o=e.z,l=n*s,h=n*a;return this.set(l*s+r,l*a-i*o,l*o+i*a,0,l*a+i*o,h*a+r,h*o-i*s,0,l*o-i*a,h*o+i*s,n*o*o+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,n,s){return this.set(1,r,n,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){let i=this.elements,n=t._x,s=t._y,a=t._z,o=t._w,l=n+n,h=s+s,c=a+a,u=n*l,d=n*h,p=n*c,f=s*h,m=s*c,g=a*c,v=o*l,y=o*h,x=o*c,w=r.x,_=r.y,b=r.z;return i[0]=(1-(f+g))*w,i[1]=(d+x)*w,i[2]=(p-y)*w,i[3]=0,i[4]=(d-x)*_,i[5]=(1-(u+g))*_,i[6]=(m+v)*_,i[7]=0,i[8]=(p+y)*b,i[9]=(m-v)*b,i[10]=(1-(u+f))*b,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){let i=this.elements,n=Fc.set(i[0],i[1],i[2]).length(),s=Fc.set(i[4],i[5],i[6]).length(),a=Fc.set(i[8],i[9],i[10]).length();this.determinant()<0&&(n=-n),e.x=i[12],e.y=i[13],e.z=i[14],ca.copy(this);let o=1/n,l=1/s,h=1/a;return ca.elements[0]*=o,ca.elements[1]*=o,ca.elements[2]*=o,ca.elements[4]*=l,ca.elements[5]*=l,ca.elements[6]*=l,ca.elements[8]*=h,ca.elements[9]*=h,ca.elements[10]*=h,t.setFromRotationMatrix(ca),r.x=n,r.y=s,r.z=a,this}makePerspective(e,t,r,i,n,s){let a=this.elements,o=2*n/(t-e),l=2*n/(r-i),h=(t+e)/(t-e),c=(r+i)/(r-i),u=-(s+n)/(s-n),d=-2*s*n/(s-n);return a[0]=o,a[4]=0,a[8]=h,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=u,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,r,i,n,s){let a=this.elements,o=1/(t-e),l=1/(r-i),h=1/(s-n),c=(t+e)*o,u=(r+i)*l,d=(s+n)*h;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-u,a[2]=0,a[6]=0,a[10]=-2*h,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){let t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}},Fc=new E,ca=new Ae,Sq=new E(0,0,0),Mq=new E(1,1,1),Vl=new E,Ag=new E,es=new E,aM=new Ae,oM=new Et,bi=class{constructor(e=0,t=0,r=0,i=bi.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){let i=e.elements,n=i[0],s=i[4],a=i[8],o=i[1],l=i[5],h=i[9],c=i[2],u=i[6],d=i[10];switch(t){case"XYZ":this._y=Math.asin(li(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-h,d),this._z=Math.atan2(-s,n)):(this._x=Math.atan2(u,l),this._z=0);break;case"YXZ":this._x=Math.asin(-li(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-c,n),this._z=0);break;case"ZXY":this._x=Math.asin(li(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,n));break;case"ZYX":this._y=Math.asin(-li(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(u,d),this._z=Math.atan2(o,n)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(li(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-c,n)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-li(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(u,l),this._y=Math.atan2(a,n)):(this._x=Math.atan2(-h,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return aM.makeRotationFromQuaternion(e),this.setFromRotationMatrix(aM,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return oM.setFromEuler(this),this.setFromQuaternion(oM,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};bi.DEFAULT_ORDER="XYZ";var Iw=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},Aq=0,lM=new E,Uc=new Et,ko=new Ae,Eg=new E,Wf=new E,Eq=new E,Tq=new Et,hM=new E(1,0,0),uM=new E(0,1,0),cM=new E(0,0,1),Lq={type:"added"},dM={type:"removed"},ir=class extends Ni{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Aq++}),this.uuid=ta(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ir.DEFAULT_UP.clone();let e=new E,t=new bi,r=new Et,i=new E(1,1,1);function n(){r.setFromEuler(t,!1)}function s(){t.setFromQuaternion(r,void 0,!1)}t._onChange(n),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ae},normalMatrix:{value:new Ci}}),this.matrix=new Ae,this.matrixWorld=new Ae,this.matrixAutoUpdate=ir.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=ir.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Iw,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Uc.setFromAxisAngle(e,t),this.quaternion.multiply(Uc),this}rotateOnWorldAxis(e,t){return Uc.setFromAxisAngle(e,t),this.quaternion.premultiply(Uc),this}rotateX(e){return this.rotateOnAxis(hM,e)}rotateY(e){return this.rotateOnAxis(uM,e)}rotateZ(e){return this.rotateOnAxis(cM,e)}translateOnAxis(e,t){return lM.copy(e).applyQuaternion(this.quaternion),this.position.add(lM.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(hM,e)}translateY(e){return this.translateOnAxis(uM,e)}translateZ(e){return this.translateOnAxis(cM,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ko.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Eg.copy(e):Eg.set(e,t,r);let i=this.parent;this.updateWorldMatrix(!0,!1),Wf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ko.lookAt(Wf,Eg,this.up):ko.lookAt(Eg,Wf,this.up),this.quaternion.setFromRotationMatrix(ko),i&&(ko.extractRotation(i.matrixWorld),Uc.setFromRotationMatrix(ko),this.quaternion.premultiply(Uc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Lq)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(dM)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(dM)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ko.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ko.multiply(e.parent.matrixWorld)),e.applyMatrix4(ko),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){let n=this.children[r].getObjectByProperty(e,t);if(n!==void 0)return n}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let i=0,n=this.children.length;i<n;i++){let s=this.children[i].getObjectsByProperty(e,t);s.length>0&&(r=r.concat(s))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Wf,e,Eq),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Wf,Tq,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){let t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let r=0,i=t.length;r<i;r++){let n=t[r];(n.matrixWorldAutoUpdate===!0||e===!0)&&n.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let i=this.children;for(let n=0,s=i.length;n<s;n++){let a=i[n];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){let t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function n(a,o){return a[o.uuid]===void 0&&(a[o.uuid]=o.toJSON(e)),o.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=n(e.geometries,this.geometry);let a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){let o=a.shapes;if(Array.isArray(o))for(let l=0,h=o.length;l<h;l++){let c=o[l];n(e.shapes,c)}else n(e.shapes,o)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(n(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let a=[];for(let o=0,l=this.material.length;o<l;o++)a.push(n(e.materials,this.material[o]));i.material=a}else i.material=n(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){let o=this.animations[a];i.animations.push(n(e.animations,o))}}if(t){let a=s(e.geometries),o=s(e.materials),l=s(e.textures),h=s(e.images),c=s(e.shapes),u=s(e.skeletons),d=s(e.animations),p=s(e.nodes);a.length>0&&(r.geometries=a),o.length>0&&(r.materials=o),l.length>0&&(r.textures=l),h.length>0&&(r.images=h),c.length>0&&(r.shapes=c),u.length>0&&(r.skeletons=u),d.length>0&&(r.animations=d),p.length>0&&(r.nodes=p)}return r.object=i,r;function s(a){let o=[];for(let l in a){let h=a[l];delete h.metadata,o.push(h)}return o}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){let i=e.children[r];this.add(i.clone())}return this}};ir.DEFAULT_UP=new E(0,1,0);ir.DEFAULT_MATRIX_AUTO_UPDATE=!0;ir.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var da=new E,No=new E,l5=new E,Fo=new E,jc=new E,Vc=new E,pM=new E,h5=new E,u5=new E,c5=new E,Xi=class{constructor(e=new E,t=new E,r=new E){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),da.subVectors(e,t),i.cross(da);let n=i.lengthSq();return n>0?i.multiplyScalar(1/Math.sqrt(n)):i.set(0,0,0)}static getBarycoord(e,t,r,i,n){da.subVectors(i,t),No.subVectors(r,t),l5.subVectors(e,t);let s=da.dot(da),a=da.dot(No),o=da.dot(l5),l=No.dot(No),h=No.dot(l5),c=s*l-a*a;if(c===0)return n.set(-2,-1,-1);let u=1/c,d=(l*o-a*h)*u,p=(s*h-a*o)*u;return n.set(1-d-p,p,d)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Fo),Fo.x>=0&&Fo.y>=0&&Fo.x+Fo.y<=1}static getUV(e,t,r,i,n,s,a,o){return this.getBarycoord(e,t,r,i,Fo),o.set(0,0),o.addScaledVector(n,Fo.x),o.addScaledVector(s,Fo.y),o.addScaledVector(a,Fo.z),o}static isFrontFacing(e,t,r,i){return da.subVectors(r,t),No.subVectors(e,t),da.cross(No).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return da.subVectors(this.c,this.b),No.subVectors(this.a,this.b),da.cross(No).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Xi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Xi.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,n){return Xi.getUV(e,this.a,this.b,this.c,t,r,i,n)}containsPoint(e){return Xi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Xi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let r=this.a,i=this.b,n=this.c,s,a;jc.subVectors(i,r),Vc.subVectors(n,r),h5.subVectors(e,r);let o=jc.dot(h5),l=Vc.dot(h5);if(o<=0&&l<=0)return t.copy(r);u5.subVectors(e,i);let h=jc.dot(u5),c=Vc.dot(u5);if(h>=0&&c<=h)return t.copy(i);let u=o*c-h*l;if(u<=0&&o>=0&&h<=0)return s=o/(o-h),t.copy(r).addScaledVector(jc,s);c5.subVectors(e,n);let d=jc.dot(c5),p=Vc.dot(c5);if(p>=0&&d<=p)return t.copy(n);let f=d*l-o*p;if(f<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(r).addScaledVector(Vc,a);let m=h*p-d*c;if(m<=0&&c-h>=0&&d-p>=0)return pM.subVectors(n,i),a=(c-h)/(c-h+(d-p)),t.copy(i).addScaledVector(pM,a);let g=1/(m+f+u);return s=f*g,a=u*g,t.copy(r).addScaledVector(jc,s).addScaledVector(Vc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},Pq=0,Tm=class extends Ni{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Pq++}),this.uuid=ta(),this.name="",this.type="Material",this.blending=cp,this.side=za,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=aR,this.blendDst=oR,this.blendEquation=vd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=d7,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=sq,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Z4,this.stencilZFail=Z4,this.stencilZPass=Z4,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let r=e[t];if(r===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}let i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==cp&&(r.blending=this.blending),this.side!==za&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(n){let s=[];for(let a in n){let o=n[a];delete o.metadata,s.push(o)}return s}if(t){let n=i(e.textures),s=i(e.images);n.length>0&&(r.textures=n),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,r=null;if(t!==null){let i=t.length;r=new Array(i);for(let n=0;n!==i;++n)r[n]=t[n].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Lm=class extends Tm{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new lt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=lR,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},Xr=new E,Tg=new X,pt=class{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=g7,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,n=this.itemSize;i<n;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Tg.fromBufferAttribute(this,t),Tg.applyMatrix3(e),this.setXY(t,Tg.x,Tg.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Xr.fromBufferAttribute(this,t),Xr.applyMatrix3(e),this.setXYZ(t,Xr.x,Xr.y,Xr.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Xr.fromBufferAttribute(this,t),Xr.applyMatrix4(e),this.setXYZ(t,Xr.x,Xr.y,Xr.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Xr.fromBufferAttribute(this,t),Xr.applyNormalMatrix(e),this.setXYZ(t,Xr.x,Xr.y,Xr.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Xr.fromBufferAttribute(this,t),Xr.transformDirection(e),this.setXYZ(t,Xr.x,Xr.y,Xr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=gl(t,this.array)),t}setX(e,t){return this.normalized&&(t=lr(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=gl(t,this.array)),t}setY(e,t){return this.normalized&&(t=lr(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=gl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=lr(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=gl(t,this.array)),t}setW(e,t){return this.normalized&&(t=lr(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=lr(t,this.array),r=lr(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=lr(t,this.array),r=lr(r,this.array),i=lr(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,n){return e*=this.itemSize,this.normalized&&(t=lr(t,this.array),r=lr(r,this.array),i=lr(i,this.array),n=lr(n,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=n,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==g7&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},bR=class extends pt{constructor(e,t,r){super(new Uint16Array(e),t,r)}},dp=class extends pt{constructor(e,t,r){super(new Uint32Array(e),t,r)}},Ke=class extends pt{constructor(e,t,r){super(new Float32Array(e),t,r)}},Dq=0,Ts=new Ae,d5=new ir,Gc=new E,ts=new qr,qf=new qr,mi=new E,dt=class extends Ni{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Dq++}),this.uuid=ta(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(gR(e)?dp:bR)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let r=this.attributes.normal;if(r!==void 0){let n=new Ci().getNormalMatrix(e);r.applyNormalMatrix(n),r.needsUpdate=!0}let i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ts.makeRotationFromQuaternion(e),this.applyMatrix4(Ts),this}rotateX(e){return Ts.makeRotationX(e),this.applyMatrix4(Ts),this}rotateY(e){return Ts.makeRotationY(e),this.applyMatrix4(Ts),this}rotateZ(e){return Ts.makeRotationZ(e),this.applyMatrix4(Ts),this}translate(e,t,r){return Ts.makeTranslation(e,t,r),this.applyMatrix4(Ts),this}scale(e,t,r){return Ts.makeScale(e,t,r),this.applyMatrix4(Ts),this}lookAt(e){return d5.lookAt(e),d5.updateMatrix(),this.applyMatrix4(d5.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Gc).negate(),this.translate(Gc.x,Gc.y,Gc.z),this}setFromPoints(e){let t=[];for(let r=0,i=e.length;r<i;r++){let n=e[r];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new Ke(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new qr);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new E(-1/0,-1/0,-1/0),new E(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){let n=t[r];ts.setFromBufferAttribute(n),this.morphTargetsRelative?(mi.addVectors(this.boundingBox.min,ts.min),this.boundingBox.expandByPoint(mi),mi.addVectors(this.boundingBox.max,ts.max),this.boundingBox.expandByPoint(mi)):(this.boundingBox.expandByPoint(ts.min),this.boundingBox.expandByPoint(ts.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new _s);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new E,1/0);return}if(e){let r=this.boundingSphere.center;if(ts.setFromBufferAttribute(e),t)for(let n=0,s=t.length;n<s;n++){let a=t[n];qf.setFromBufferAttribute(a),this.morphTargetsRelative?(mi.addVectors(ts.min,qf.min),ts.expandByPoint(mi),mi.addVectors(ts.max,qf.max),ts.expandByPoint(mi)):(ts.expandByPoint(qf.min),ts.expandByPoint(qf.max))}ts.getCenter(r);let i=0;for(let n=0,s=e.count;n<s;n++)mi.fromBufferAttribute(e,n),i=Math.max(i,r.distanceToSquared(mi));if(t)for(let n=0,s=t.length;n<s;n++){let a=t[n],o=this.morphTargetsRelative;for(let l=0,h=a.count;l<h;l++)mi.fromBufferAttribute(a,l),o&&(Gc.fromBufferAttribute(e,l),mi.add(Gc)),i=Math.max(i,r.distanceToSquared(mi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let r=e.array,i=t.position.array,n=t.normal.array,s=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new pt(new Float32Array(4*a),4));let o=this.getAttribute("tangent").array,l=[],h=[];for(let M=0;M<a;M++)l[M]=new E,h[M]=new E;let c=new E,u=new E,d=new E,p=new X,f=new X,m=new X,g=new E,v=new E;function y(M,A,T){c.fromArray(i,M*3),u.fromArray(i,A*3),d.fromArray(i,T*3),p.fromArray(s,M*2),f.fromArray(s,A*2),m.fromArray(s,T*2),u.sub(c),d.sub(c),f.sub(p),m.sub(p);let L=1/(f.x*m.y-m.x*f.y);!isFinite(L)||(g.copy(u).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(L),v.copy(d).multiplyScalar(f.x).addScaledVector(u,-m.x).multiplyScalar(L),l[M].add(g),l[A].add(g),l[T].add(g),h[M].add(v),h[A].add(v),h[T].add(v))}let x=this.groups;x.length===0&&(x=[{start:0,count:r.length}]);for(let M=0,A=x.length;M<A;++M){let T=x[M],L=T.start,D=T.count;for(let O=L,z=L+D;O<z;O+=3)y(r[O+0],r[O+1],r[O+2])}let w=new E,_=new E,b=new E,S=new E;function C(M){b.fromArray(n,M*3),S.copy(b);let A=l[M];w.copy(A),w.sub(b.multiplyScalar(b.dot(A))).normalize(),_.crossVectors(S,A);let T=_.dot(h[M])<0?-1:1;o[M*4]=w.x,o[M*4+1]=w.y,o[M*4+2]=w.z,o[M*4+3]=T}for(let M=0,A=x.length;M<A;++M){let T=x[M],L=T.start,D=T.count;for(let O=L,z=L+D;O<z;O+=3)C(r[O+0]),C(r[O+1]),C(r[O+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new pt(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let u=0,d=r.count;u<d;u++)r.setXYZ(u,0,0,0);let i=new E,n=new E,s=new E,a=new E,o=new E,l=new E,h=new E,c=new E;if(e)for(let u=0,d=e.count;u<d;u+=3){let p=e.getX(u+0),f=e.getX(u+1),m=e.getX(u+2);i.fromBufferAttribute(t,p),n.fromBufferAttribute(t,f),s.fromBufferAttribute(t,m),h.subVectors(s,n),c.subVectors(i,n),h.cross(c),a.fromBufferAttribute(r,p),o.fromBufferAttribute(r,f),l.fromBufferAttribute(r,m),a.add(h),o.add(h),l.add(h),r.setXYZ(p,a.x,a.y,a.z),r.setXYZ(f,o.x,o.y,o.z),r.setXYZ(m,l.x,l.y,l.z)}else for(let u=0,d=t.count;u<d;u+=3)i.fromBufferAttribute(t,u+0),n.fromBufferAttribute(t,u+1),s.fromBufferAttribute(t,u+2),h.subVectors(s,n),c.subVectors(i,n),h.cross(c),r.setXYZ(u+0,h.x,h.y,h.z),r.setXYZ(u+1,h.x,h.y,h.z),r.setXYZ(u+2,h.x,h.y,h.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)mi.fromBufferAttribute(e,t),mi.normalize(),e.setXYZ(t,mi.x,mi.y,mi.z)}toNonIndexed(){function e(a,o){let l=a.array,h=a.itemSize,c=a.normalized,u=new l.constructor(o.length*h),d=0,p=0;for(let f=0,m=o.length;f<m;f++){a.isInterleavedBufferAttribute?d=o[f]*a.data.stride+a.offset:d=o[f]*h;for(let g=0;g<h;g++)u[p++]=l[d++]}return new pt(u,h,c)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new dt,r=this.index.array,i=this.attributes;for(let a in i){let o=i[a],l=e(o,r);t.setAttribute(a,l)}let n=this.morphAttributes;for(let a in n){let o=[],l=n[a];for(let h=0,c=l.length;h<c;h++){let u=l[h],d=e(u,r);o.push(d)}t.morphAttributes[a]=o}t.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,o=s.length;a<o;a++){let l=s[a];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let o=this.parameters;for(let l in o)o[l]!==void 0&&(e[l]=o[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let r=this.attributes;for(let o in r){let l=r[o];e.data.attributes[o]=l.toJSON(e.data)}let i={},n=!1;for(let o in this.morphAttributes){let l=this.morphAttributes[o],h=[];for(let c=0,u=l.length;c<u;c++){let d=l[c];h.push(d.toJSON(e.data))}h.length>0&&(i[o]=h,n=!0)}n&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let r=e.index;r!==null&&this.setIndex(r.clone(t));let i=e.attributes;for(let l in i){let h=i[l];this.setAttribute(l,h.clone(t))}let n=e.morphAttributes;for(let l in n){let h=[],c=n[l];for(let u=0,d=c.length;u<d;u++)h.push(c[u].clone(t));this.morphAttributes[l]=h}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let l=0,h=s.length;l<h;l++){let c=s[l];this.addGroup(c.start,c.count,c.materialIndex)}let a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());let o=e.boundingSphere;return o!==null&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},fM=new Ae,Hc=new cf,p5=new _s,Xf=new E,Yf=new E,Qf=new E,f5=new E,Lg=new E,Pg=new X,Dg=new X,Og=new X,m5=new E,Ig=new E,kn=class extends ir{constructor(e=new dt,t=new Lm){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,n=r.length;i<n;i++){let s=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}getVertexPosition(e,t){let r=this.geometry,i=r.attributes.position,n=r.morphAttributes.position,s=r.morphTargetsRelative;t.fromBufferAttribute(i,e);let a=this.morphTargetInfluences;if(n&&a){Lg.set(0,0,0);for(let o=0,l=n.length;o<l;o++){let h=a[o],c=n[o];h!==0&&(f5.fromBufferAttribute(c,e),s?Lg.addScaledVector(f5,h):Lg.addScaledVector(f5.sub(t),h))}t.add(Lg)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){let r=this.geometry,i=this.material,n=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),p5.copy(r.boundingSphere),p5.applyMatrix4(n),e.ray.intersectsSphere(p5)===!1)||(fM.copy(n).invert(),Hc.copy(e.ray).applyMatrix4(fM),r.boundingBox!==null&&Hc.intersectsBox(r.boundingBox)===!1))return;let s,a=r.index,o=r.attributes.position,l=r.attributes.uv,h=r.attributes.uv2,c=r.groups,u=r.drawRange;if(a!==null)if(Array.isArray(i))for(let d=0,p=c.length;d<p;d++){let f=c[d],m=i[f.materialIndex],g=Math.max(f.start,u.start),v=Math.min(a.count,Math.min(f.start+f.count,u.start+u.count));for(let y=g,x=v;y<x;y+=3){let w=a.getX(y),_=a.getX(y+1),b=a.getX(y+2);s=Rg(this,m,e,Hc,l,h,w,_,b),s&&(s.faceIndex=Math.floor(y/3),s.face.materialIndex=f.materialIndex,t.push(s))}}else{let d=Math.max(0,u.start),p=Math.min(a.count,u.start+u.count);for(let f=d,m=p;f<m;f+=3){let g=a.getX(f),v=a.getX(f+1),y=a.getX(f+2);s=Rg(this,i,e,Hc,l,h,g,v,y),s&&(s.faceIndex=Math.floor(f/3),t.push(s))}}else if(o!==void 0)if(Array.isArray(i))for(let d=0,p=c.length;d<p;d++){let f=c[d],m=i[f.materialIndex],g=Math.max(f.start,u.start),v=Math.min(o.count,Math.min(f.start+f.count,u.start+u.count));for(let y=g,x=v;y<x;y+=3){let w=y,_=y+1,b=y+2;s=Rg(this,m,e,Hc,l,h,w,_,b),s&&(s.faceIndex=Math.floor(y/3),s.face.materialIndex=f.materialIndex,t.push(s))}}else{let d=Math.max(0,u.start),p=Math.min(o.count,u.start+u.count);for(let f=d,m=p;f<m;f+=3){let g=f,v=f+1,y=f+2;s=Rg(this,i,e,Hc,l,h,g,v,y),s&&(s.faceIndex=Math.floor(f/3),t.push(s))}}}};function Oq(e,t,r,i,n,s,a,o){let l;if(t.side===_i?l=i.intersectTriangle(a,s,n,!0,o):l=i.intersectTriangle(n,s,a,t.side===za,o),l===null)return null;Ig.copy(o),Ig.applyMatrix4(e.matrixWorld);let h=r.ray.origin.distanceTo(Ig);return h<r.near||h>r.far?null:{distance:h,point:Ig.clone(),object:e}}function Rg(e,t,r,i,n,s,a,o,l){e.getVertexPosition(a,Xf),e.getVertexPosition(o,Yf),e.getVertexPosition(l,Qf);let h=Oq(e,t,r,i,Xf,Yf,Qf,m5);if(h){n&&(Pg.fromBufferAttribute(n,a),Dg.fromBufferAttribute(n,o),Og.fromBufferAttribute(n,l),h.uv=Xi.getUV(m5,Xf,Yf,Qf,Pg,Dg,Og,new X)),s&&(Pg.fromBufferAttribute(s,a),Dg.fromBufferAttribute(s,o),Og.fromBufferAttribute(s,l),h.uv2=Xi.getUV(m5,Xf,Yf,Qf,Pg,Dg,Og,new X));let c={a,b:o,c:l,normal:new E,materialIndex:0};Xi.getNormal(Xf,Yf,Qf,c.normal),h.face=c}return h}var Ao=class extends dt{constructor(e=1,t=1,r=1,i=1,n=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:n,depthSegments:s};let a=this;i=Math.floor(i),n=Math.floor(n),s=Math.floor(s);let o=[],l=[],h=[],c=[],u=0,d=0;p("z","y","x",-1,-1,r,t,e,s,n,0),p("z","y","x",1,-1,r,t,-e,s,n,1),p("x","z","y",1,1,e,r,t,i,s,2),p("x","z","y",1,-1,e,r,-t,i,s,3),p("x","y","z",1,-1,e,t,r,i,n,4),p("x","y","z",-1,-1,e,t,-r,i,n,5),this.setIndex(o),this.setAttribute("position",new Ke(l,3)),this.setAttribute("normal",new Ke(h,3)),this.setAttribute("uv",new Ke(c,2));function p(f,m,g,v,y,x,w,_,b,S,C){let M=x/b,A=w/S,T=x/2,L=w/2,D=_/2,O=b+1,z=S+1,q=0,N=0,I=new E;for(let W=0;W<z;W++){let P=W*A-L;for(let V=0;V<O;V++){let G=V*M-T;I[f]=G*v,I[m]=P*y,I[g]=D,l.push(I.x,I.y,I.z),I[f]=0,I[m]=0,I[g]=_>0?1:-1,h.push(I.x,I.y,I.z),c.push(V/b),c.push(1-W/S),q+=1}}for(let W=0;W<S;W++)for(let P=0;P<b;P++){let V=u+P+O*W,G=u+P+O*(W+1),Q=u+(P+1)+O*(W+1),U=u+(P+1)+O*W;o.push(V,G,U),o.push(G,Q,U),N+=6}a.addGroup(d,N,C),d+=N,u+=q}}static fromJSON(e){return new Ao(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Hp(e){let t={};for(let r in e){t[r]={};for(let i in e[r]){let n=e[r][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?t[r][i]=n.clone():Array.isArray(n)?t[r][i]=n.slice():t[r][i]=n}}return t}function ln(e){let t={};for(let r=0;r<e.length;r++){let i=Hp(e[r]);for(let n in i)t[n]=i[n]}return t}function Iq(e){let t=[];for(let r=0;r<e.length;r++)t.push(e[r].clone());return t}function _R(e){return e.getRenderTarget()===null&&e.outputEncoding===_t?io:o3}var df={clone:Hp,merge:ln},Rq=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Bq=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,cr=class extends Tm{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Rq,this.fragmentShader=Bq,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Hp(e.uniforms),this.uniformsGroups=Iq(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let i in this.uniforms){let n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let r={};for(let i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}},pf=class extends ir{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ae,this.projectionMatrix=new Ae,this.projectionMatrixInverse=new Ae}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Wi=class extends pf{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=J0*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(h0*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return J0*2*Math.atan(Math.tan(h0*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,n,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(h0*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,n=-.5*i,s=this.view;if(this.view!==null&&this.view.enabled){let o=s.fullWidth,l=s.fullHeight;n+=s.offsetX*i/o,t-=s.offsetY*r/l,i*=s.width/o,r*=s.height/l}let a=this.filmOffset;a!==0&&(n+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+i,t,t-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},Wc=-90,qc=1,zq=class extends ir{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r;let i=new Wi(Wc,qc,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);let n=new Wi(Wc,qc,e,t);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(-1,0,0),this.add(n);let s=new Wi(Wc,qc,e,t);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(0,1,0),this.add(s);let a=new Wi(Wc,qc,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);let o=new Wi(Wc,qc,e,t);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(0,0,1),this.add(o);let l=new Wi(Wc,qc,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){this.parent===null&&this.updateMatrixWorld();let r=this.renderTarget,[i,n,s,a,o,l]=this.children,h=e.getRenderTarget(),c=e.toneMapping,u=e.xr.enabled;e.toneMapping=wl,e.xr.enabled=!1;let d=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,n),e.setRenderTarget(r,2),e.render(t,s),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,o),r.texture.generateMipmaps=d,e.setRenderTarget(r,5),e.render(t,l),e.setRenderTarget(h),e.toneMapping=c,e.xr.enabled=u,r.texture.needsPMREMUpdate=!0}},Rw=class extends ui{constructor(e,t,r,i,n,s,a,o,l,h){e=e!==void 0?e:[],t=t!==void 0?t:fc,super(e,t,r,i,n,s,a,o,l,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},kq=class extends tr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new Rw(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Lt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Ao(5,5,5),n=new cr({name:"CubemapFromEquirect",uniforms:Hp(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:_i,blending:ti});n.uniforms.tEquirect.value=t;let s=new kn(i,n),a=t.minFilter;return t.minFilter===Vp&&(t.minFilter=Lt),new zq(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,r,i){let n=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,r,i);e.setRenderTarget(n)}},g5=new E,Nq=new E,Fq=new Ci,hs=class{constructor(e=new E(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){let i=g5.subVectors(r,t).cross(Nq.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let r=e.delta(g5),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let n=-(e.start.dot(this.normal)+this.constant)/i;return n<0||n>1?null:t.copy(r).multiplyScalar(n).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let r=t||Fq.getNormalMatrix(e),i=this.coplanarPoint(g5).applyMatrix4(e),n=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(n),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},Xc=new _s,Bg=new E,Bw=class{constructor(e=new hs,t=new hs,r=new hs,i=new hs,n=new hs,s=new hs){this.planes=[e,t,r,i,n,s]}set(e,t,r,i,n,s){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(n),a[5].copy(s),this}copy(e){let t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){let t=this.planes,r=e.elements,i=r[0],n=r[1],s=r[2],a=r[3],o=r[4],l=r[5],h=r[6],c=r[7],u=r[8],d=r[9],p=r[10],f=r[11],m=r[12],g=r[13],v=r[14],y=r[15];return t[0].setComponents(a-i,c-o,f-u,y-m).normalize(),t[1].setComponents(a+i,c+o,f+u,y+m).normalize(),t[2].setComponents(a+n,c+l,f+d,y+g).normalize(),t[3].setComponents(a-n,c-l,f-d,y-g).normalize(),t[4].setComponents(a-s,c-h,f-p,y-v).normalize(),t[5].setComponents(a+s,c+h,f+p,y+v).normalize(),this}intersectsObject(e){let t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Xc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Xc)}intersectsSprite(e){return Xc.center.set(0,0,0),Xc.radius=.7071067811865476,Xc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Xc)}intersectsSphere(e){let t=this.planes,r=e.center,i=-e.radius;for(let n=0;n<6;n++)if(t[n].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){let t=this.planes;for(let r=0;r<6;r++){let i=t[r];if(Bg.x=i.normal.x>0?e.max.x:e.min.x,Bg.y=i.normal.y>0?e.max.y:e.min.y,Bg.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Bg)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function CR(){let e=null,t=!1,r=null,i=null;function n(s,a){r(s,a),i=e.requestAnimationFrame(n)}return{start:function(){t!==!0&&r!==null&&(i=e.requestAnimationFrame(n),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(s){r=s},setContext:function(s){e=s}}}function Uq(e,t){let r=t.isWebGL2,i=new WeakMap;function n(h,c){let u=h.array,d=h.usage,p=e.createBuffer();e.bindBuffer(c,p),e.bufferData(c,u,d),h.onUploadCallback();let f;if(u instanceof Float32Array)f=5126;else if(u instanceof Uint16Array)if(h.isFloat16BufferAttribute)if(r)f=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else f=5123;else if(u instanceof Int16Array)f=5122;else if(u instanceof Uint32Array)f=5125;else if(u instanceof Int32Array)f=5124;else if(u instanceof Int8Array)f=5120;else if(u instanceof Uint8Array)f=5121;else if(u instanceof Uint8ClampedArray)f=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:p,type:f,bytesPerElement:u.BYTES_PER_ELEMENT,version:h.version}}function s(h,c,u){let d=c.array,p=c.updateRange;e.bindBuffer(u,h),p.count===-1?e.bufferSubData(u,0,d):(r?e.bufferSubData(u,p.offset*d.BYTES_PER_ELEMENT,d,p.offset,p.count):e.bufferSubData(u,p.offset*d.BYTES_PER_ELEMENT,d.subarray(p.offset,p.offset+p.count)),p.count=-1),c.onUploadCallback()}function a(h){return h.isInterleavedBufferAttribute&&(h=h.data),i.get(h)}function o(h){h.isInterleavedBufferAttribute&&(h=h.data);let c=i.get(h);c&&(e.deleteBuffer(c.buffer),i.delete(h))}function l(h,c){if(h.isGLBufferAttribute){let d=i.get(h);(!d||d.version<h.version)&&i.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}h.isInterleavedBufferAttribute&&(h=h.data);let u=i.get(h);u===void 0?i.set(h,n(h,c)):u.version<h.version&&(s(u.buffer,h,c),u.version=h.version)}return{get:a,remove:o,update:l}}var _y=class extends dt{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};let n=e/2,s=t/2,a=Math.floor(r),o=Math.floor(i),l=a+1,h=o+1,c=e/a,u=t/o,d=[],p=[],f=[],m=[];for(let g=0;g<h;g++){let v=g*u-s;for(let y=0;y<l;y++){let x=y*c-n;p.push(x,-v,0),f.push(0,0,1),m.push(y/a),m.push(1-g/o)}}for(let g=0;g<o;g++)for(let v=0;v<a;v++){let y=v+l*g,x=v+l*(g+1),w=v+1+l*(g+1),_=v+1+l*g;d.push(y,x,_),d.push(x,w,_)}this.setIndex(d),this.setAttribute("position",new Ke(p,3)),this.setAttribute("normal",new Ke(f,3)),this.setAttribute("uv",new Ke(m,2))}static fromJSON(e){return new _y(e.width,e.height,e.widthSegments,e.heightSegments)}},jq=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Vq=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Gq=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Hq=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Wq=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,qq=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Xq="vec3 transformed = vec3( position );",Yq=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Qq=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,Zq=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Kq=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,$q=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Jq=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,eX=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,tX=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,rX=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,iX=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,nX=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,sX=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,aX=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,oX=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,lX=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,hX=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,uX=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,cX=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,dX=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,pX="gl_FragColor = linearToOutputTexel( gl_FragColor );",fX=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,mX=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,gX=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,vX=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,yX=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,xX=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,wX=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,bX=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,_X=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,CX=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,SX=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,MX=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,AX=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,EX=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,TX=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,LX=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,PX=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,DX=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,OX=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,IX=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,RX=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,BX=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,zX=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,kX=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,NX=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,FX=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,UX=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,jX=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,VX=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,GX=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,HX=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,WX=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,qX=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,XX=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,YX=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,QX=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,ZX=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,KX=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,$X=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,JX=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,eY=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,tY=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,rY=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,iY=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,nY=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,sY=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,aY=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,oY=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,lY=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,hY=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,uY=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,cY=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,dY=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,pY=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,fY=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,mY=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,gY=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,vY=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,yY=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,xY=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,wY=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,bY=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,_Y=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,CY=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,SY=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,MY=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,AY=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,EY=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,TY=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,LY=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,PY=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,DY=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,OY=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,IY=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,RY=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,BY=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,zY=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,kY=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,NY=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,FY=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,UY=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,jY=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,VY=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,GY=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,HY=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,WY=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,qY=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,XY=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,YY=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,QY=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,ZY=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,KY=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,$Y=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,JY=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,eQ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tQ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rQ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iQ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,nQ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sQ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,aQ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,oQ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lQ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hQ=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,uQ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cQ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,dQ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pQ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fQ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,mQ=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gQ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,vQ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,yQ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,At={alphamap_fragment:jq,alphamap_pars_fragment:Vq,alphatest_fragment:Gq,alphatest_pars_fragment:Hq,aomap_fragment:Wq,aomap_pars_fragment:qq,begin_vertex:Xq,beginnormal_vertex:Yq,bsdfs:Qq,iridescence_fragment:Zq,bumpmap_pars_fragment:Kq,clipping_planes_fragment:$q,clipping_planes_pars_fragment:Jq,clipping_planes_pars_vertex:eX,clipping_planes_vertex:tX,color_fragment:rX,color_pars_fragment:iX,color_pars_vertex:nX,color_vertex:sX,common:aX,cube_uv_reflection_fragment:oX,defaultnormal_vertex:lX,displacementmap_pars_vertex:hX,displacementmap_vertex:uX,emissivemap_fragment:cX,emissivemap_pars_fragment:dX,encodings_fragment:pX,encodings_pars_fragment:fX,envmap_fragment:mX,envmap_common_pars_fragment:gX,envmap_pars_fragment:vX,envmap_pars_vertex:yX,envmap_physical_pars_fragment:PX,envmap_vertex:xX,fog_vertex:wX,fog_pars_vertex:bX,fog_fragment:_X,fog_pars_fragment:CX,gradientmap_pars_fragment:SX,lightmap_fragment:MX,lightmap_pars_fragment:AX,lights_lambert_fragment:EX,lights_lambert_pars_fragment:TX,lights_pars_begin:LX,lights_toon_fragment:DX,lights_toon_pars_fragment:OX,lights_phong_fragment:IX,lights_phong_pars_fragment:RX,lights_physical_fragment:BX,lights_physical_pars_fragment:zX,lights_fragment_begin:kX,lights_fragment_maps:NX,lights_fragment_end:FX,logdepthbuf_fragment:UX,logdepthbuf_pars_fragment:jX,logdepthbuf_pars_vertex:VX,logdepthbuf_vertex:GX,map_fragment:HX,map_pars_fragment:WX,map_particle_fragment:qX,map_particle_pars_fragment:XX,metalnessmap_fragment:YX,metalnessmap_pars_fragment:QX,morphcolor_vertex:ZX,morphnormal_vertex:KX,morphtarget_pars_vertex:$X,morphtarget_vertex:JX,normal_fragment_begin:eY,normal_fragment_maps:tY,normal_pars_fragment:rY,normal_pars_vertex:iY,normal_vertex:nY,normalmap_pars_fragment:sY,clearcoat_normal_fragment_begin:aY,clearcoat_normal_fragment_maps:oY,clearcoat_pars_fragment:lY,iridescence_pars_fragment:hY,output_fragment:uY,packing:cY,premultiplied_alpha_fragment:dY,project_vertex:pY,dithering_fragment:fY,dithering_pars_fragment:mY,roughnessmap_fragment:gY,roughnessmap_pars_fragment:vY,shadowmap_pars_fragment:yY,shadowmap_pars_vertex:xY,shadowmap_vertex:wY,shadowmask_pars_fragment:bY,skinbase_vertex:_Y,skinning_pars_vertex:CY,skinning_vertex:SY,skinnormal_vertex:MY,specularmap_fragment:AY,specularmap_pars_fragment:EY,tonemapping_fragment:TY,tonemapping_pars_fragment:LY,transmission_fragment:PY,transmission_pars_fragment:DY,uv_pars_fragment:OY,uv_pars_vertex:IY,uv_vertex:RY,uv2_pars_fragment:BY,uv2_pars_vertex:zY,uv2_vertex:kY,worldpos_vertex:NY,background_vert:FY,background_frag:UY,backgroundCube_vert:jY,backgroundCube_frag:VY,cube_vert:GY,cube_frag:HY,depth_vert:WY,depth_frag:qY,distanceRGBA_vert:XY,distanceRGBA_frag:YY,equirect_vert:QY,equirect_frag:ZY,linedashed_vert:KY,linedashed_frag:$Y,meshbasic_vert:JY,meshbasic_frag:eQ,meshlambert_vert:tQ,meshlambert_frag:rQ,meshmatcap_vert:iQ,meshmatcap_frag:nQ,meshnormal_vert:sQ,meshnormal_frag:aQ,meshphong_vert:oQ,meshphong_frag:lQ,meshphysical_vert:hQ,meshphysical_frag:uQ,meshtoon_vert:cQ,meshtoon_frag:dQ,points_vert:pQ,points_frag:fQ,shadow_vert:mQ,shadow_frag:gQ,sprite_vert:vQ,sprite_frag:yQ},Ie={common:{diffuse:{value:new lt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ci},uv2Transform:{value:new Ci},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new X(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new lt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new lt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ci}},sprite:{diffuse:{value:new lt(16777215)},opacity:{value:1},center:{value:new X(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ci}}},no={basic:{uniforms:ln([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.fog]),vertexShader:At.meshbasic_vert,fragmentShader:At.meshbasic_frag},lambert:{uniforms:ln([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.fog,Ie.lights,{emissive:{value:new lt(0)}}]),vertexShader:At.meshlambert_vert,fragmentShader:At.meshlambert_frag},phong:{uniforms:ln([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.fog,Ie.lights,{emissive:{value:new lt(0)},specular:{value:new lt(1118481)},shininess:{value:30}}]),vertexShader:At.meshphong_vert,fragmentShader:At.meshphong_frag},standard:{uniforms:ln([Ie.common,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.roughnessmap,Ie.metalnessmap,Ie.fog,Ie.lights,{emissive:{value:new lt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:At.meshphysical_vert,fragmentShader:At.meshphysical_frag},toon:{uniforms:ln([Ie.common,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.gradientmap,Ie.fog,Ie.lights,{emissive:{value:new lt(0)}}]),vertexShader:At.meshtoon_vert,fragmentShader:At.meshtoon_frag},matcap:{uniforms:ln([Ie.common,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.fog,{matcap:{value:null}}]),vertexShader:At.meshmatcap_vert,fragmentShader:At.meshmatcap_frag},points:{uniforms:ln([Ie.points,Ie.fog]),vertexShader:At.points_vert,fragmentShader:At.points_frag},dashed:{uniforms:ln([Ie.common,Ie.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:At.linedashed_vert,fragmentShader:At.linedashed_frag},depth:{uniforms:ln([Ie.common,Ie.displacementmap]),vertexShader:At.depth_vert,fragmentShader:At.depth_frag},normal:{uniforms:ln([Ie.common,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,{opacity:{value:1}}]),vertexShader:At.meshnormal_vert,fragmentShader:At.meshnormal_frag},sprite:{uniforms:ln([Ie.sprite,Ie.fog]),vertexShader:At.sprite_vert,fragmentShader:At.sprite_frag},background:{uniforms:{uvTransform:{value:new Ci},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:At.background_vert,fragmentShader:At.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:At.backgroundCube_vert,fragmentShader:At.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:At.cube_vert,fragmentShader:At.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:At.equirect_vert,fragmentShader:At.equirect_frag},distanceRGBA:{uniforms:ln([Ie.common,Ie.displacementmap,{referencePosition:{value:new E},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:At.distanceRGBA_vert,fragmentShader:At.distanceRGBA_frag},shadow:{uniforms:ln([Ie.lights,Ie.fog,{color:{value:new lt(0)},opacity:{value:1}}]),vertexShader:At.shadow_vert,fragmentShader:At.shadow_frag}};no.physical={uniforms:ln([no.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new X(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new lt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new X},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new lt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new lt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:At.meshphysical_vert,fragmentShader:At.meshphysical_frag};var zg={r:0,b:0,g:0};function xQ(e,t,r,i,n,s,a){let o=new lt(0),l=s===!0?0:1,h,c,u=null,d=0,p=null;function f(g,v){let y=!1,x=v.isScene===!0?v.background:null;x&&x.isTexture&&(x=(v.backgroundBlurriness>0?r:t).get(x));let w=e.xr,_=w.getSession&&w.getSession();_&&_.environmentBlendMode==="additive"&&(x=null),x===null?m(o,l):x&&x.isColor&&(m(x,1),y=!0),(e.autoClear||y)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),x&&(x.isCubeTexture||x.mapping===Em)?(c===void 0&&(c=new kn(new Ao(1,1,1),new cr({name:"BackgroundCubeMaterial",uniforms:Hp(no.backgroundCube.uniforms),vertexShader:no.backgroundCube.vertexShader,fragmentShader:no.backgroundCube.fragmentShader,side:_i,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(b,S,C){this.matrixWorld.copyPosition(C.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(c)),c.material.uniforms.envMap.value=x,c.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=x.encoding!==_t,(u!==x||d!==x.version||p!==e.toneMapping)&&(c.material.needsUpdate=!0,u=x,d=x.version,p=e.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null)):x&&x.isTexture&&(h===void 0&&(h=new kn(new _y(2,2),new cr({name:"BackgroundMaterial",uniforms:Hp(no.background.uniforms),vertexShader:no.background.vertexShader,fragmentShader:no.background.fragmentShader,side:za,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(h)),h.material.uniforms.t2D.value=x,h.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,h.material.toneMapped=x.encoding!==_t,x.matrixAutoUpdate===!0&&x.updateMatrix(),h.material.uniforms.uvTransform.value.copy(x.matrix),(u!==x||d!==x.version||p!==e.toneMapping)&&(h.material.needsUpdate=!0,u=x,d=x.version,p=e.toneMapping),h.layers.enableAll(),g.unshift(h,h.geometry,h.material,0,0,null))}function m(g,v){g.getRGB(zg,_R(e)),i.buffers.color.setClear(zg.r,zg.g,zg.b,v,a)}return{getClearColor:function(){return o},setClearColor:function(g,v=1){o.set(g),l=v,m(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,m(o,l)},render:f}}function wQ(e,t,r,i){let n=e.getParameter(34921),s=i.isWebGL2?null:t.get("OES_vertex_array_object"),a=i.isWebGL2||s!==null,o={},l=g(null),h=l,c=!1;function u(O,z,q,N,I){let W=!1;if(a){let P=m(N,q,z);h!==P&&(h=P,p(h.object)),W=v(O,N,q,I),W&&y(O,N,q,I)}else{let P=z.wireframe===!0;(h.geometry!==N.id||h.program!==q.id||h.wireframe!==P)&&(h.geometry=N.id,h.program=q.id,h.wireframe=P,W=!0)}I!==null&&r.update(I,34963),(W||c)&&(c=!1,C(O,z,q,N),I!==null&&e.bindBuffer(34963,r.get(I).buffer))}function d(){return i.isWebGL2?e.createVertexArray():s.createVertexArrayOES()}function p(O){return i.isWebGL2?e.bindVertexArray(O):s.bindVertexArrayOES(O)}function f(O){return i.isWebGL2?e.deleteVertexArray(O):s.deleteVertexArrayOES(O)}function m(O,z,q){let N=q.wireframe===!0,I=o[O.id];I===void 0&&(I={},o[O.id]=I);let W=I[z.id];W===void 0&&(W={},I[z.id]=W);let P=W[N];return P===void 0&&(P=g(d()),W[N]=P),P}function g(O){let z=[],q=[],N=[];for(let I=0;I<n;I++)z[I]=0,q[I]=0,N[I]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:z,enabledAttributes:q,attributeDivisors:N,object:O,attributes:{},index:null}}function v(O,z,q,N){let I=h.attributes,W=z.attributes,P=0,V=q.getAttributes();for(let G in V)if(V[G].location>=0){let Q=I[G],U=W[G];if(U===void 0&&(G==="instanceMatrix"&&O.instanceMatrix&&(U=O.instanceMatrix),G==="instanceColor"&&O.instanceColor&&(U=O.instanceColor)),Q===void 0||Q.attribute!==U||U&&Q.data!==U.data)return!0;P++}return h.attributesNum!==P||h.index!==N}function y(O,z,q,N){let I={},W=z.attributes,P=0,V=q.getAttributes();for(let G in V)if(V[G].location>=0){let Q=W[G];Q===void 0&&(G==="instanceMatrix"&&O.instanceMatrix&&(Q=O.instanceMatrix),G==="instanceColor"&&O.instanceColor&&(Q=O.instanceColor));let U={};U.attribute=Q,Q&&Q.data&&(U.data=Q.data),I[G]=U,P++}h.attributes=I,h.attributesNum=P,h.index=N}function x(){let O=h.newAttributes;for(let z=0,q=O.length;z<q;z++)O[z]=0}function w(O){_(O,0)}function _(O,z){let q=h.newAttributes,N=h.enabledAttributes,I=h.attributeDivisors;q[O]=1,N[O]===0&&(e.enableVertexAttribArray(O),N[O]=1),I[O]!==z&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](O,z),I[O]=z)}function b(){let O=h.newAttributes,z=h.enabledAttributes;for(let q=0,N=z.length;q<N;q++)z[q]!==O[q]&&(e.disableVertexAttribArray(q),z[q]=0)}function S(O,z,q,N,I,W){i.isWebGL2===!0&&(q===5124||q===5125)?e.vertexAttribIPointer(O,z,q,I,W):e.vertexAttribPointer(O,z,q,N,I,W)}function C(O,z,q,N){if(i.isWebGL2===!1&&(O.isInstancedMesh||N.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;x();let I=N.attributes,W=q.getAttributes(),P=z.defaultAttributeValues;for(let V in W){let G=W[V];if(G.location>=0){let Q=I[V];if(Q===void 0&&(V==="instanceMatrix"&&O.instanceMatrix&&(Q=O.instanceMatrix),V==="instanceColor"&&O.instanceColor&&(Q=O.instanceColor)),Q!==void 0){let U=Q.normalized,Y=Q.itemSize,H=r.get(Q);if(H===void 0)continue;let ie=H.buffer,J=H.type,ee=H.bytesPerElement;if(Q.isInterleavedBufferAttribute){let ne=Q.data,he=ne.stride,ge=Q.offset;if(ne.isInstancedInterleavedBuffer){for(let ce=0;ce<G.locationSize;ce++)_(G.location+ce,ne.meshPerAttribute);O.isInstancedMesh!==!0&&N._maxInstanceCount===void 0&&(N._maxInstanceCount=ne.meshPerAttribute*ne.count)}else for(let ce=0;ce<G.locationSize;ce++)w(G.location+ce);e.bindBuffer(34962,ie);for(let ce=0;ce<G.locationSize;ce++)S(G.location+ce,Y/G.locationSize,J,U,he*ee,(ge+Y/G.locationSize*ce)*ee)}else{if(Q.isInstancedBufferAttribute){for(let ne=0;ne<G.locationSize;ne++)_(G.location+ne,Q.meshPerAttribute);O.isInstancedMesh!==!0&&N._maxInstanceCount===void 0&&(N._maxInstanceCount=Q.meshPerAttribute*Q.count)}else for(let ne=0;ne<G.locationSize;ne++)w(G.location+ne);e.bindBuffer(34962,ie);for(let ne=0;ne<G.locationSize;ne++)S(G.location+ne,Y/G.locationSize,J,U,Y*ee,Y/G.locationSize*ne*ee)}}else if(P!==void 0){let U=P[V];if(U!==void 0)switch(U.length){case 2:e.vertexAttrib2fv(G.location,U);break;case 3:e.vertexAttrib3fv(G.location,U);break;case 4:e.vertexAttrib4fv(G.location,U);break;default:e.vertexAttrib1fv(G.location,U)}}}}b()}function M(){L();for(let O in o){let z=o[O];for(let q in z){let N=z[q];for(let I in N)f(N[I].object),delete N[I];delete z[q]}delete o[O]}}function A(O){if(o[O.id]===void 0)return;let z=o[O.id];for(let q in z){let N=z[q];for(let I in N)f(N[I].object),delete N[I];delete z[q]}delete o[O.id]}function T(O){for(let z in o){let q=o[z];if(q[O.id]===void 0)continue;let N=q[O.id];for(let I in N)f(N[I].object),delete N[I];delete q[O.id]}}function L(){D(),c=!0,h!==l&&(h=l,p(h.object))}function D(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:L,resetDefaultState:D,dispose:M,releaseStatesOfGeometry:A,releaseStatesOfProgram:T,initAttributes:x,enableAttribute:w,disableUnusedAttributes:b}}function bQ(e,t,r,i){let n=i.isWebGL2,s;function a(h){s=h}function o(h,c){e.drawArrays(s,h,c),r.update(c,s,1)}function l(h,c,u){if(u===0)return;let d,p;if(n)d=e,p="drawArraysInstanced";else if(d=t.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[p](s,h,c,u),r.update(c,s,u)}this.setMode=a,this.render=o,this.renderInstances=l}function _Q(e,t,r){let i;function n(){if(i!==void 0)return i;if(t.has("EXT_texture_filter_anisotropic")===!0){let S=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(S.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(S){if(S==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";S="mediump"}return S==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let a=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext,o=r.precision!==void 0?r.precision:"highp",l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);let h=a||t.has("WEBGL_draw_buffers"),c=r.logarithmicDepthBuffer===!0,u=e.getParameter(34930),d=e.getParameter(35660),p=e.getParameter(3379),f=e.getParameter(34076),m=e.getParameter(34921),g=e.getParameter(36347),v=e.getParameter(36348),y=e.getParameter(36349),x=d>0,w=a||t.has("OES_texture_float"),_=x&&w,b=a?e.getParameter(36183):0;return{isWebGL2:a,drawBuffers:h,getMaxAnisotropy:n,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:d,maxTextureSize:p,maxCubemapSize:f,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:y,vertexTextures:x,floatFragmentTextures:w,floatVertexTextures:_,maxSamples:b}}function CQ(e){let t=this,r=null,i=0,n=!1,s=!1,a=new hs,o=new Ci,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,d){let p=u.length!==0||d||i!==0||n;return n=d,i=u.length,p},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(u,d){r=c(u,d,0)},this.setState=function(u,d,p){let f=u.clippingPlanes,m=u.clipIntersection,g=u.clipShadows,v=e.get(u);if(!n||f===null||f.length===0||s&&!g)s?c(null):h();else{let y=s?0:i,x=y*4,w=v.clippingState||null;l.value=w,w=c(f,d,x,p);for(let _=0;_!==x;++_)w[_]=r[_];v.clippingState=w,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=y}};function h(){l.value!==r&&(l.value=r,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function c(u,d,p,f){let m=u!==null?u.length:0,g=null;if(m!==0){if(g=l.value,f!==!0||g===null){let v=p+m*4,y=d.matrixWorldInverse;o.getNormalMatrix(y),(g===null||g.length<v)&&(g=new Float32Array(v));for(let x=0,w=p;x!==m;++x,w+=4)a.copy(u[x]).applyMatrix4(y,o),a.normal.toArray(g,w),g[w+3]=a.constant}l.value=g,l.needsUpdate=!0}return t.numPlanes=m,t.numIntersection=0,g}}function SQ(e){let t=new WeakMap;function r(a,o){return o===p7?a.mapping=fc:o===f7&&(a.mapping=mc),a}function i(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){let o=a.mapping;if(o===p7||o===f7)if(t.has(a)){let l=t.get(a).texture;return r(l,a.mapping)}else{let l=a.image;if(l&&l.height>0){let h=new kq(l.height/2);return h.fromEquirectangularTexture(e,a),t.set(a,h),a.addEventListener("dispose",n),r(h.texture,a.mapping)}else return null}}return a}function n(a){let o=a.target;o.removeEventListener("dispose",n);let l=t.get(o);l!==void 0&&(t.delete(o),l.dispose())}function s(){t=new WeakMap}return{get:i,dispose:s}}var zw=class extends pf{constructor(e=-1,t=1,r=1,i=-1,n=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=n,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,n,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2,n=r-e,s=r+e,a=i+t,o=i-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;n+=l*this.view.offsetX,s=n+l*this.view.width,a-=h*this.view.offsetY,o=a-h*this.view.height}this.projectionMatrix.makeOrthographic(n,s,a,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},Gd=4,mM=[.125,.215,.35,.446,.526,.582],Cu=20,v5=new zw,gM=new lt,y5=null,xu=(1+Math.sqrt(5))/2,Yc=1/xu,vM=[new E(1,1,1),new E(-1,1,1),new E(1,1,-1),new E(-1,1,-1),new E(0,xu,Yc),new E(0,xu,-Yc),new E(Yc,0,xu),new E(-Yc,0,xu),new E(xu,Yc,0),new E(-xu,Yc,0)],yM=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){y5=this._renderer.getRenderTarget(),this._setSize(256);let n=this._allocateTargets();return n.depthBuffer=!0,this._sceneToCubeUV(e,r,i,n),t>0&&this._blur(n,0,0,t),this._applyPMREM(n),this._cleanup(n),n}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=bM(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=wM(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(y5),e.scissorTest=!1,kg(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===fc||e.mapping===mc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),y5=this._renderer.getRenderTarget();let r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:Lt,minFilter:Lt,generateMipmaps:!1,type:Gp,format:Ws,encoding:Mo,depthBuffer:!1},i=xM(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=xM(e,t,r);let{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=MQ(n)),this._blurMaterial=AQ(n,e,t)}return i}_compileMaterial(e){let t=new kn(this._lodPlanes[0],e);this._renderer.compile(t,v5)}_sceneToCubeUV(e,t,r,i){let n=new Wi(90,1,t,r),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,h=o.toneMapping;o.getClearColor(gM),o.toneMapping=wl,o.autoClear=!1;let c=new Lm({name:"PMREM.Background",side:_i,depthWrite:!1,depthTest:!1}),u=new kn(new Ao,c),d=!1,p=e.background;p?p.isColor&&(c.color.copy(p),e.background=null,d=!0):(c.color.copy(gM),d=!0);for(let f=0;f<6;f++){let m=f%3;m===0?(n.up.set(0,s[f],0),n.lookAt(a[f],0,0)):m===1?(n.up.set(0,0,s[f]),n.lookAt(0,a[f],0)):(n.up.set(0,s[f],0),n.lookAt(0,0,a[f]));let g=this._cubeSize;kg(i,m*g,f>2?g:0,g,g),o.setRenderTarget(i),d&&o.render(u,n),o.render(e,n)}u.geometry.dispose(),u.material.dispose(),o.toneMapping=h,o.autoClear=l,e.background=p}_textureToCubeUV(e,t){let r=this._renderer,i=e.mapping===fc||e.mapping===mc;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=bM()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=wM());let n=i?this._cubemapMaterial:this._equirectMaterial,s=new kn(this._lodPlanes[0],n),a=n.uniforms;a.envMap.value=e;let o=this._cubeSize;kg(t,0,0,3*o,2*o),r.setRenderTarget(t),r.render(s,v5)}_applyPMREM(e){let t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){let n=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),s=vM[(i-1)%vM.length];this._blur(e,i-1,i,n,s)}t.autoClear=r}_blur(e,t,r,i,n){let s=this._pingPongRenderTarget;this._halfBlur(e,s,t,r,i,"latitudinal",n),this._halfBlur(s,e,r,r,i,"longitudinal",n)}_halfBlur(e,t,r,i,n,s,a){let o=this._renderer,l=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let h=3,c=new kn(this._lodPlanes[i],l),u=l.uniforms,d=this._sizeLods[r]-1,p=isFinite(n)?Math.PI/(2*d):2*Math.PI/(2*Cu-1),f=n/p,m=isFinite(n)?1+Math.floor(h*f):Cu;m>Cu&&console.warn(`sigmaRadians, ${n}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${Cu}`);let g=[],v=0;for(let b=0;b<Cu;++b){let S=b/f,C=Math.exp(-S*S/2);g.push(C),b===0?v+=C:b<m&&(v+=2*C)}for(let b=0;b<g.length;b++)g[b]=g[b]/v;u.envMap.value=e.texture,u.samples.value=m,u.weights.value=g,u.latitudinal.value=s==="latitudinal",a&&(u.poleAxis.value=a);let{_lodMax:y}=this;u.dTheta.value=p,u.mipInt.value=y-r;let x=this._sizeLods[i],w=3*x*(i>y-Gd?i-y+Gd:0),_=4*(this._cubeSize-x);kg(t,w,_,3*x,2*x),o.setRenderTarget(t),o.render(c,v5)}};function MQ(e){let t=[],r=[],i=[],n=e,s=e-Gd+1+mM.length;for(let a=0;a<s;a++){let o=Math.pow(2,n);r.push(o);let l=1/o;a>e-Gd?l=mM[a-e+Gd-1]:a===0&&(l=0),i.push(l);let h=1/(o-2),c=-h,u=1+h,d=[c,c,u,c,u,u,c,c,u,u,c,u],p=6,f=6,m=3,g=2,v=1,y=new Float32Array(m*f*p),x=new Float32Array(g*f*p),w=new Float32Array(v*f*p);for(let b=0;b<p;b++){let S=b%3*2/3-1,C=b>2?0:-1,M=[S,C,0,S+2/3,C,0,S+2/3,C+1,0,S,C,0,S+2/3,C+1,0,S,C+1,0];y.set(M,m*f*b),x.set(d,g*f*b);let A=[b,b,b,b,b,b];w.set(A,v*f*b)}let _=new dt;_.setAttribute("position",new pt(y,m)),_.setAttribute("uv",new pt(x,g)),_.setAttribute("faceIndex",new pt(w,v)),t.push(_),n>Gd&&n--}return{lodPlanes:t,sizeLods:r,sigmas:i}}function xM(e,t,r){let i=new tr(e,t,r);return i.texture.mapping=Em,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function kg(e,t,r,i,n){e.viewport.set(t,r,i,n),e.scissor.set(t,r,i,n)}function AQ(e,t,r){let i=new Float32Array(Cu),n=new E(0,1,0);return new cr({name:"SphericalGaussianBlur",defines:{n:Cu,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:kw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ti,depthTest:!1,depthWrite:!1})}function wM(){return new cr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:kw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ti,depthTest:!1,depthWrite:!1})}function bM(){return new cr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:kw(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ti,depthTest:!1,depthWrite:!1})}function kw(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function EQ(e){let t=new WeakMap,r=null;function i(o){if(o&&o.isTexture){let l=o.mapping,h=l===p7||l===f7,c=l===fc||l===mc;if(h||c)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let u=t.get(o);return r===null&&(r=new yM(e)),u=h?r.fromEquirectangular(o,u):r.fromCubemap(o,u),t.set(o,u),u.texture}else{if(t.has(o))return t.get(o).texture;{let u=o.image;if(h&&u&&u.height>0||c&&u&&n(u)){r===null&&(r=new yM(e));let d=h?r.fromEquirectangular(o):r.fromCubemap(o);return t.set(o,d),o.addEventListener("dispose",s),d.texture}else return null}}}return o}function n(o){let l=0,h=6;for(let c=0;c<h;c++)o[c]!==void 0&&l++;return l===h}function s(o){let l=o.target;l.removeEventListener("dispose",s);let h=t.get(l);h!==void 0&&(t.delete(l),h.dispose())}function a(){t=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:i,dispose:a}}function TQ(e){let t={};function r(i){if(t[i]!==void 0)return t[i];let n;switch(i){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(i)}return t[i]=n,n}return{has:function(i){return r(i)!==null},init:function(i){i.isWebGL2?r("EXT_color_buffer_float"):(r("WEBGL_depth_texture"),r("OES_texture_float"),r("OES_texture_half_float"),r("OES_texture_half_float_linear"),r("OES_standard_derivatives"),r("OES_element_index_uint"),r("OES_vertex_array_object"),r("ANGLE_instanced_arrays")),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture")},get:function(i){let n=r(i);return n===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),n}}}function LQ(e,t,r,i){let n={},s=new WeakMap;function a(u){let d=u.target;d.index!==null&&t.remove(d.index);for(let f in d.attributes)t.remove(d.attributes[f]);d.removeEventListener("dispose",a),delete n[d.id];let p=s.get(d);p&&(t.remove(p),s.delete(d)),i.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,r.memory.geometries--}function o(u,d){return n[d.id]===!0||(d.addEventListener("dispose",a),n[d.id]=!0,r.memory.geometries++),d}function l(u){let d=u.attributes;for(let f in d)t.update(d[f],34962);let p=u.morphAttributes;for(let f in p){let m=p[f];for(let g=0,v=m.length;g<v;g++)t.update(m[g],34962)}}function h(u){let d=[],p=u.index,f=u.attributes.position,m=0;if(p!==null){let y=p.array;m=p.version;for(let x=0,w=y.length;x<w;x+=3){let _=y[x+0],b=y[x+1],S=y[x+2];d.push(_,b,b,S,S,_)}}else{let y=f.array;m=f.version;for(let x=0,w=y.length/3-1;x<w;x+=3){let _=x+0,b=x+1,S=x+2;d.push(_,b,b,S,S,_)}}let g=new(gR(d)?dp:bR)(d,1);g.version=m;let v=s.get(u);v&&t.remove(v),s.set(u,g)}function c(u){let d=s.get(u);if(d){let p=u.index;p!==null&&d.version<p.version&&h(u)}else h(u);return s.get(u)}return{get:o,update:l,getWireframeAttribute:c}}function PQ(e,t,r,i){let n=i.isWebGL2,s;function a(d){s=d}let o,l;function h(d){o=d.type,l=d.bytesPerElement}function c(d,p){e.drawElements(s,p,o,d*l),r.update(p,s,1)}function u(d,p,f){if(f===0)return;let m,g;if(n)m=e,g="drawElementsInstanced";else if(m=t.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[g](s,p,o,d*l,f),r.update(p,s,f)}this.setMode=a,this.setIndex=h,this.render=c,this.renderInstances=u}function DQ(e){let t={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(r.calls++,a){case 4:r.triangles+=o*(s/3);break;case 1:r.lines+=o*(s/2);break;case 3:r.lines+=o*(s-1);break;case 2:r.lines+=o*s;break;case 0:r.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function n(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:t,render:r,programs:null,autoReset:!0,reset:n,update:i}}function OQ(e,t){return e[0]-t[0]}function IQ(e,t){return Math.abs(t[1])-Math.abs(e[1])}function RQ(e,t,r){let i={},n=new Float32Array(8),s=new WeakMap,a=new Ct,o=[];for(let h=0;h<8;h++)o[h]=[h,0];function l(h,c,u,d){let p=h.morphTargetInfluences;if(t.isWebGL2===!0){let f=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,m=f!==void 0?f.length:0,g=s.get(c);if(g===void 0||g.count!==m){let x=function(){O.dispose(),s.delete(c),c.removeEventListener("dispose",x)};g!==void 0&&g.texture.dispose();let w=c.morphAttributes.position!==void 0,_=c.morphAttributes.normal!==void 0,b=c.morphAttributes.color!==void 0,S=c.morphAttributes.position||[],C=c.morphAttributes.normal||[],M=c.morphAttributes.color||[],A=0;w===!0&&(A=1),_===!0&&(A=2),b===!0&&(A=3);let T=c.attributes.position.count*A,L=1;T>t.maxTextureSize&&(L=Math.ceil(T/t.maxTextureSize),T=t.maxTextureSize);let D=new Float32Array(T*L*4*m),O=new wR(D,T,L,m);O.type=fs,O.needsUpdate=!0;let z=A*4;for(let q=0;q<m;q++){let N=S[q],I=C[q],W=M[q],P=T*L*4*q;for(let V=0;V<N.count;V++){let G=V*z;w===!0&&(a.fromBufferAttribute(N,V),D[P+G+0]=a.x,D[P+G+1]=a.y,D[P+G+2]=a.z,D[P+G+3]=0),_===!0&&(a.fromBufferAttribute(I,V),D[P+G+4]=a.x,D[P+G+5]=a.y,D[P+G+6]=a.z,D[P+G+7]=0),b===!0&&(a.fromBufferAttribute(W,V),D[P+G+8]=a.x,D[P+G+9]=a.y,D[P+G+10]=a.z,D[P+G+11]=W.itemSize===4?a.w:1)}}g={count:m,texture:O,size:new X(T,L)},s.set(c,g),c.addEventListener("dispose",x)}let v=0;for(let x=0;x<p.length;x++)v+=p[x];let y=c.morphTargetsRelative?1:1-v;d.getUniforms().setValue(e,"morphTargetBaseInfluence",y),d.getUniforms().setValue(e,"morphTargetInfluences",p),d.getUniforms().setValue(e,"morphTargetsTexture",g.texture,r),d.getUniforms().setValue(e,"morphTargetsTextureSize",g.size)}else{let f=p===void 0?0:p.length,m=i[c.id];if(m===void 0||m.length!==f){m=[];for(let w=0;w<f;w++)m[w]=[w,0];i[c.id]=m}for(let w=0;w<f;w++){let _=m[w];_[0]=w,_[1]=p[w]}m.sort(IQ);for(let w=0;w<8;w++)w<f&&m[w][1]?(o[w][0]=m[w][0],o[w][1]=m[w][1]):(o[w][0]=Number.MAX_SAFE_INTEGER,o[w][1]=0);o.sort(OQ);let g=c.morphAttributes.position,v=c.morphAttributes.normal,y=0;for(let w=0;w<8;w++){let _=o[w],b=_[0],S=_[1];b!==Number.MAX_SAFE_INTEGER&&S?(g&&c.getAttribute("morphTarget"+w)!==g[b]&&c.setAttribute("morphTarget"+w,g[b]),v&&c.getAttribute("morphNormal"+w)!==v[b]&&c.setAttribute("morphNormal"+w,v[b]),n[w]=S,y+=S):(g&&c.hasAttribute("morphTarget"+w)===!0&&c.deleteAttribute("morphTarget"+w),v&&c.hasAttribute("morphNormal"+w)===!0&&c.deleteAttribute("morphNormal"+w),n[w]=0)}let x=c.morphTargetsRelative?1:1-y;d.getUniforms().setValue(e,"morphTargetBaseInfluence",x),d.getUniforms().setValue(e,"morphTargetInfluences",n)}}return{update:l}}function BQ(e,t,r,i){let n=new WeakMap;function s(l){let h=i.render.frame,c=l.geometry,u=t.get(l,c);return n.get(u)!==h&&(t.update(u),n.set(u,h)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.update(l.instanceMatrix,34962),l.instanceColor!==null&&r.update(l.instanceColor,34962)),u}function a(){n=new WeakMap}function o(l){let h=l.target;h.removeEventListener("dispose",o),r.remove(h.instanceMatrix),h.instanceColor!==null&&r.remove(h.instanceColor)}return{update:s,dispose:a}}var SR=new ui,MR=new wR,AR=new bq,ER=new Rw,_M=[],CM=[],SM=new Float32Array(16),MM=new Float32Array(9),AM=new Float32Array(4);function ff(e,t,r){let i=e[0];if(i<=0||i>0)return e;let n=t*r,s=_M[n];if(s===void 0&&(s=new Float32Array(n),_M[n]=s),t!==0){i.toArray(s,0);for(let a=1,o=0;a!==t;++a)o+=r,e[a].toArray(s,o)}return s}function di(e,t){if(e.length!==t.length)return!1;for(let r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0}function pi(e,t){for(let r=0,i=t.length;r<i;r++)e[r]=t[r]}function Cy(e,t){let r=CM[t];r===void 0&&(r=new Int32Array(t),CM[t]=r);for(let i=0;i!==t;++i)r[i]=e.allocateTextureUnit();return r}function zQ(e,t){let r=this.cache;r[0]!==t&&(e.uniform1f(this.addr,t),r[0]=t)}function kQ(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(di(r,t))return;e.uniform2fv(this.addr,t),pi(r,t)}}function NQ(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(t.r!==void 0)(r[0]!==t.r||r[1]!==t.g||r[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(di(r,t))return;e.uniform3fv(this.addr,t),pi(r,t)}}function FQ(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(di(r,t))return;e.uniform4fv(this.addr,t),pi(r,t)}}function UQ(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(di(r,t))return;e.uniformMatrix2fv(this.addr,!1,t),pi(r,t)}else{if(di(r,i))return;AM.set(i),e.uniformMatrix2fv(this.addr,!1,AM),pi(r,i)}}function jQ(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(di(r,t))return;e.uniformMatrix3fv(this.addr,!1,t),pi(r,t)}else{if(di(r,i))return;MM.set(i),e.uniformMatrix3fv(this.addr,!1,MM),pi(r,i)}}function VQ(e,t){let r=this.cache,i=t.elements;if(i===void 0){if(di(r,t))return;e.uniformMatrix4fv(this.addr,!1,t),pi(r,t)}else{if(di(r,i))return;SM.set(i),e.uniformMatrix4fv(this.addr,!1,SM),pi(r,i)}}function GQ(e,t){let r=this.cache;r[0]!==t&&(e.uniform1i(this.addr,t),r[0]=t)}function HQ(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(di(r,t))return;e.uniform2iv(this.addr,t),pi(r,t)}}function WQ(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(di(r,t))return;e.uniform3iv(this.addr,t),pi(r,t)}}function qQ(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(di(r,t))return;e.uniform4iv(this.addr,t),pi(r,t)}}function XQ(e,t){let r=this.cache;r[0]!==t&&(e.uniform1ui(this.addr,t),r[0]=t)}function YQ(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(di(r,t))return;e.uniform2uiv(this.addr,t),pi(r,t)}}function QQ(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(di(r,t))return;e.uniform3uiv(this.addr,t),pi(r,t)}}function ZQ(e,t){let r=this.cache;if(t.x!==void 0)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(di(r,t))return;e.uniform4uiv(this.addr,t),pi(r,t)}}function KQ(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture2D(t||SR,n)}function $Q(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture3D(t||AR,n)}function JQ(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTextureCube(t||ER,n)}function eZ(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture2DArray(t||MR,n)}function tZ(e){switch(e){case 5126:return zQ;case 35664:return kQ;case 35665:return NQ;case 35666:return FQ;case 35674:return UQ;case 35675:return jQ;case 35676:return VQ;case 5124:case 35670:return GQ;case 35667:case 35671:return HQ;case 35668:case 35672:return WQ;case 35669:case 35673:return qQ;case 5125:return XQ;case 36294:return YQ;case 36295:return QQ;case 36296:return ZQ;case 35678:case 36198:case 36298:case 36306:case 35682:return KQ;case 35679:case 36299:case 36307:return $Q;case 35680:case 36300:case 36308:case 36293:return JQ;case 36289:case 36303:case 36311:case 36292:return eZ}}function rZ(e,t){e.uniform1fv(this.addr,t)}function iZ(e,t){let r=ff(t,this.size,2);e.uniform2fv(this.addr,r)}function nZ(e,t){let r=ff(t,this.size,3);e.uniform3fv(this.addr,r)}function sZ(e,t){let r=ff(t,this.size,4);e.uniform4fv(this.addr,r)}function aZ(e,t){let r=ff(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,r)}function oZ(e,t){let r=ff(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,r)}function lZ(e,t){let r=ff(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,r)}function hZ(e,t){e.uniform1iv(this.addr,t)}function uZ(e,t){e.uniform2iv(this.addr,t)}function cZ(e,t){e.uniform3iv(this.addr,t)}function dZ(e,t){e.uniform4iv(this.addr,t)}function pZ(e,t){e.uniform1uiv(this.addr,t)}function fZ(e,t){e.uniform2uiv(this.addr,t)}function mZ(e,t){e.uniform3uiv(this.addr,t)}function gZ(e,t){e.uniform4uiv(this.addr,t)}function vZ(e,t,r){let i=this.cache,n=t.length,s=Cy(r,n);di(i,s)||(e.uniform1iv(this.addr,s),pi(i,s));for(let a=0;a!==n;++a)r.setTexture2D(t[a]||SR,s[a])}function yZ(e,t,r){let i=this.cache,n=t.length,s=Cy(r,n);di(i,s)||(e.uniform1iv(this.addr,s),pi(i,s));for(let a=0;a!==n;++a)r.setTexture3D(t[a]||AR,s[a])}function xZ(e,t,r){let i=this.cache,n=t.length,s=Cy(r,n);di(i,s)||(e.uniform1iv(this.addr,s),pi(i,s));for(let a=0;a!==n;++a)r.setTextureCube(t[a]||ER,s[a])}function wZ(e,t,r){let i=this.cache,n=t.length,s=Cy(r,n);di(i,s)||(e.uniform1iv(this.addr,s),pi(i,s));for(let a=0;a!==n;++a)r.setTexture2DArray(t[a]||MR,s[a])}function bZ(e){switch(e){case 5126:return rZ;case 35664:return iZ;case 35665:return nZ;case 35666:return sZ;case 35674:return aZ;case 35675:return oZ;case 35676:return lZ;case 5124:case 35670:return hZ;case 35667:case 35671:return uZ;case 35668:case 35672:return cZ;case 35669:case 35673:return dZ;case 5125:return pZ;case 36294:return fZ;case 36295:return mZ;case 36296:return gZ;case 35678:case 36198:case 36298:case 36306:case 35682:return vZ;case 35679:case 36299:case 36307:return yZ;case 35680:case 36300:case 36308:case 36293:return xZ;case 36289:case 36303:case 36311:case 36292:return wZ}}var _Z=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=tZ(t.type)}},CZ=class{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=bZ(t.type)}},SZ=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){let i=this.seq;for(let n=0,s=i.length;n!==s;++n){let a=i[n];a.setValue(e,t[a.id],r)}}},x5=/(\w+)(\])?(\[|\.)?/g;function EM(e,t){e.seq.push(t),e.map[t.id]=t}function MZ(e,t,r){let i=e.name,n=i.length;for(x5.lastIndex=0;;){let s=x5.exec(i),a=x5.lastIndex,o=s[1],l=s[2]==="]",h=s[3];if(l&&(o=o|0),h===void 0||h==="["&&a+2===n){EM(r,h===void 0?new _Z(o,e,t):new CZ(o,e,t));break}else{let c=r.map[o];c===void 0&&(c=new SZ(o),EM(r,c)),r=c}}}var a2=class{constructor(e,t){this.seq=[],this.map={};let r=e.getProgramParameter(t,35718);for(let i=0;i<r;++i){let n=e.getActiveUniform(t,i),s=e.getUniformLocation(t,n.name);MZ(n,s,this)}}setValue(e,t,r,i){let n=this.map[t];n!==void 0&&n.setValue(e,r,i)}setOptional(e,t,r){let i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let n=0,s=t.length;n!==s;++n){let a=t[n],o=r[a.id];o.needsUpdate!==!1&&a.setValue(e,o.value,i)}}static seqWithValue(e,t){let r=[];for(let i=0,n=e.length;i!==n;++i){let s=e[i];s.id in t&&r.push(s)}return r}};function TM(e,t,r){let i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),i}var AZ=0;function EZ(e,t){let r=e.split(`
`),i=[],n=Math.max(t-6,0),s=Math.min(t+6,r.length);for(let a=n;a<s;a++){let o=a+1;i.push(`${o===t?">":" "} ${o}: ${r[a]}`)}return i.join(`
`)}function TZ(e){switch(e){case Mo:return["Linear","( value )"];case _t:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function LM(e,t,r){let i=e.getShaderParameter(t,35713),n=e.getShaderInfoLog(t).trim();if(i&&n==="")return"";let s=/ERROR: 0:(\d+)/.exec(n);if(s){let a=parseInt(s[1]);return r.toUpperCase()+`

`+n+`

`+EZ(e.getShaderSource(t),a)}else return n}function LZ(e,t){let r=TZ(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function PZ(e,t){let r;switch(t){case zW:r="Linear";break;case kW:r="Reinhard";break;case NW:r="OptimizedCineon";break;case FW:r="ACESFilmic";break;case UW:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),r="Linear"}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function DZ(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(I1).join(`
`)}function OZ(e){let t=[];for(let r in e){let i=e[r];i!==!1&&t.push("#define "+r+" "+i)}return t.join(`
`)}function IZ(e,t){let r={},i=e.getProgramParameter(t,35721);for(let n=0;n<i;n++){let s=e.getActiveAttrib(t,n),a=s.name,o=1;s.type===35674&&(o=2),s.type===35675&&(o=3),s.type===35676&&(o=4),r[a]={type:s.type,location:e.getAttribLocation(t,a),locationSize:o}}return r}function I1(e){return e!==""}function PM(e,t){let r=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function DM(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var RZ=/^[ \t]*#include +<([\w\d./]+)>/gm;function x7(e){return e.replace(RZ,BZ)}function BZ(e,t){let r=At[t];if(r===void 0)throw new Error("Can not resolve #include <"+t+">");return x7(r)}var zZ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function OM(e){return e.replace(zZ,kZ)}function kZ(e,t,r,i){let n="";for(let s=parseInt(t);s<parseInt(r);s++)n+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return n}function IM(e){let t="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function NZ(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===Lw?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===fW?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===O1&&(t="SHADOWMAP_TYPE_VSM"),t}function FZ(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case fc:case mc:t="ENVMAP_TYPE_CUBE";break;case Em:t="ENVMAP_TYPE_CUBE_UV";break}return t}function UZ(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case mc:t="ENVMAP_MODE_REFRACTION";break}return t}function jZ(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case lR:t="ENVMAP_BLENDING_MULTIPLY";break;case RW:t="ENVMAP_BLENDING_MIX";break;case BW:t="ENVMAP_BLENDING_ADD";break}return t}function VZ(e){let t=e.envMapCubeUVHeight;if(t===null)return null;let r=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,r),7*16)),texelHeight:i,maxMip:r}}function GZ(e,t,r,i){let n=e.getContext(),s=r.defines,a=r.vertexShader,o=r.fragmentShader,l=NZ(r),h=FZ(r),c=UZ(r),u=jZ(r),d=VZ(r),p=r.isWebGL2?"":DZ(r),f=OZ(s),m=n.createProgram(),g,v,y=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(g=[f].filter(I1).join(`
`),g.length>0&&(g+=`
`),v=[p,f].filter(I1).join(`
`),v.length>0&&(v+=`
`)):(g=[IM(r),"#define SHADER_NAME "+r.shaderName,f,r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+c:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors&&r.isWebGL2?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(I1).join(`
`),v=[p,IM(r),"#define SHADER_NAME "+r.shaderName,f,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+h:"",r.envMap?"#define "+c:"",r.envMap?"#define "+u:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+l:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==wl?"#define TONE_MAPPING":"",r.toneMapping!==wl?At.tonemapping_pars_fragment:"",r.toneMapping!==wl?PZ("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",At.encodings_pars_fragment,LZ("linearToOutputTexel",r.outputEncoding),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(I1).join(`
`)),a=x7(a),a=PM(a,r),a=DM(a,r),o=x7(o),o=PM(o,r),o=DM(o,r),a=OM(a),o=OM(o),r.isWebGL2&&r.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,v=["#define varying in",r.glslVersion===iM?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===iM?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);let x=y+g+a,w=y+v+o,_=TM(n,35633,x),b=TM(n,35632,w);if(n.attachShader(m,_),n.attachShader(m,b),r.index0AttributeName!==void 0?n.bindAttribLocation(m,0,r.index0AttributeName):r.morphTargets===!0&&n.bindAttribLocation(m,0,"position"),n.linkProgram(m),e.debug.checkShaderErrors){let M=n.getProgramInfoLog(m).trim(),A=n.getShaderInfoLog(_).trim(),T=n.getShaderInfoLog(b).trim(),L=!0,D=!0;if(n.getProgramParameter(m,35714)===!1){L=!1;let O=LM(n,_,"vertex"),z=LM(n,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+n.getError()+" - VALIDATE_STATUS "+n.getProgramParameter(m,35715)+`

Program Info Log: `+M+`
`+O+`
`+z)}else M!==""?console.warn("THREE.WebGLProgram: Program Info Log:",M):(A===""||T==="")&&(D=!1);D&&(this.diagnostics={runnable:L,programLog:M,vertexShader:{log:A,prefix:g},fragmentShader:{log:T,prefix:v}})}n.deleteShader(_),n.deleteShader(b);let S;this.getUniforms=function(){return S===void 0&&(S=new a2(n,m)),S};let C;return this.getAttributes=function(){return C===void 0&&(C=IZ(n,m)),C},this.destroy=function(){i.releaseStatesOfProgram(this),n.deleteProgram(m),this.program=void 0},this.name=r.shaderName,this.id=AZ++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=_,this.fragmentShader=b,this}var HZ=0,WZ=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),n=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(n)===!1&&(s.add(n),n.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){let t=this.shaderCache,r=t.get(e);return r===void 0&&(r=new qZ(e),t.set(e,r)),r}},qZ=class{constructor(e){this.id=HZ++,this.code=e,this.usedTimes=0}};function XZ(e,t,r,i,n,s,a){let o=new Iw,l=new WZ,h=[],c=n.isWebGL2,u=n.logarithmicDepthBuffer,d=n.vertexTextures,p=n.precision,f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(C,M,A,T,L){let D=T.fog,O=L.geometry,z=C.isMeshStandardMaterial?T.environment:null,q=(C.isMeshStandardMaterial?r:t).get(C.envMap||z),N=q&&q.mapping===Em?q.image.height:null,I=f[C.type];C.precision!==null&&(p=n.getMaxPrecision(C.precision),p!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",p,"instead."));let W=O.morphAttributes.position||O.morphAttributes.normal||O.morphAttributes.color,P=W!==void 0?W.length:0,V=0;O.morphAttributes.position!==void 0&&(V=1),O.morphAttributes.normal!==void 0&&(V=2),O.morphAttributes.color!==void 0&&(V=3);let G,Q,U,Y;if(I){let ne=no[I];G=ne.vertexShader,Q=ne.fragmentShader}else G=C.vertexShader,Q=C.fragmentShader,l.update(C),U=l.getVertexShaderID(C),Y=l.getFragmentShaderID(C);let H=e.getRenderTarget(),ie=C.alphaTest>0,J=C.clearcoat>0,ee=C.iridescence>0;return{isWebGL2:c,shaderID:I,shaderName:C.type,vertexShader:G,fragmentShader:Q,defines:C.defines,customVertexShaderID:U,customFragmentShaderID:Y,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:p,instancing:L.isInstancedMesh===!0,instancingColor:L.isInstancedMesh===!0&&L.instanceColor!==null,supportsVertexTextures:d,outputEncoding:H===null?e.outputEncoding:H.isXRRenderTarget===!0?H.texture.encoding:Mo,map:!!C.map,matcap:!!C.matcap,envMap:!!q,envMapMode:q&&q.mapping,envMapCubeUVHeight:N,lightMap:!!C.lightMap,aoMap:!!C.aoMap,emissiveMap:!!C.emissiveMap,bumpMap:!!C.bumpMap,normalMap:!!C.normalMap,objectSpaceNormalMap:C.normalMapType===nq,tangentSpaceNormalMap:C.normalMapType===iq,decodeVideoTexture:!!C.map&&C.map.isVideoTexture===!0&&C.map.encoding===_t,clearcoat:J,clearcoatMap:J&&!!C.clearcoatMap,clearcoatRoughnessMap:J&&!!C.clearcoatRoughnessMap,clearcoatNormalMap:J&&!!C.clearcoatNormalMap,iridescence:ee,iridescenceMap:ee&&!!C.iridescenceMap,iridescenceThicknessMap:ee&&!!C.iridescenceThicknessMap,displacementMap:!!C.displacementMap,roughnessMap:!!C.roughnessMap,metalnessMap:!!C.metalnessMap,specularMap:!!C.specularMap,specularIntensityMap:!!C.specularIntensityMap,specularColorMap:!!C.specularColorMap,opaque:C.transparent===!1&&C.blending===cp,alphaMap:!!C.alphaMap,alphaTest:ie,gradientMap:!!C.gradientMap,sheen:C.sheen>0,sheenColorMap:!!C.sheenColorMap,sheenRoughnessMap:!!C.sheenRoughnessMap,transmission:C.transmission>0,transmissionMap:!!C.transmissionMap,thicknessMap:!!C.thicknessMap,combine:C.combine,vertexTangents:!!C.normalMap&&!!O.attributes.tangent,vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!O.attributes.color&&O.attributes.color.itemSize===4,vertexUvs:!!C.map||!!C.bumpMap||!!C.normalMap||!!C.specularMap||!!C.alphaMap||!!C.emissiveMap||!!C.roughnessMap||!!C.metalnessMap||!!C.clearcoatMap||!!C.clearcoatRoughnessMap||!!C.clearcoatNormalMap||!!C.iridescenceMap||!!C.iridescenceThicknessMap||!!C.displacementMap||!!C.transmissionMap||!!C.thicknessMap||!!C.specularIntensityMap||!!C.specularColorMap||!!C.sheenColorMap||!!C.sheenRoughnessMap,uvsVertexOnly:!(C.map||C.bumpMap||C.normalMap||C.specularMap||C.alphaMap||C.emissiveMap||C.roughnessMap||C.metalnessMap||C.clearcoatNormalMap||C.iridescenceMap||C.iridescenceThicknessMap||C.transmission>0||C.transmissionMap||C.thicknessMap||C.specularIntensityMap||C.specularColorMap||C.sheen>0||C.sheenColorMap||C.sheenRoughnessMap)&&!!C.displacementMap,fog:!!D,useFog:C.fog===!0,fogExp2:D&&D.isFogExp2,flatShading:!!C.flatShading,sizeAttenuation:C.sizeAttenuation,logarithmicDepthBuffer:u,skinning:L.isSkinnedMesh===!0,morphTargets:O.morphAttributes.position!==void 0,morphNormals:O.morphAttributes.normal!==void 0,morphColors:O.morphAttributes.color!==void 0,morphTargetsCount:P,morphTextureStride:V,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:C.dithering,shadowMapEnabled:e.shadowMap.enabled&&A.length>0,shadowMapType:e.shadowMap.type,toneMapping:C.toneMapped?e.toneMapping:wl,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===ps,flipSided:C.side===_i,useDepthPacking:!!C.depthPacking,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionDerivatives:C.extensions&&C.extensions.derivatives,extensionFragDepth:C.extensions&&C.extensions.fragDepth,extensionDrawBuffers:C.extensions&&C.extensions.drawBuffers,extensionShaderTextureLOD:C.extensions&&C.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||i.has("EXT_shader_texture_lod"),customProgramCacheKey:C.customProgramCacheKey()}}function g(C){let M=[];if(C.shaderID?M.push(C.shaderID):(M.push(C.customVertexShaderID),M.push(C.customFragmentShaderID)),C.defines!==void 0)for(let A in C.defines)M.push(A),M.push(C.defines[A]);return C.isRawShaderMaterial===!1&&(v(M,C),y(M,C),M.push(e.outputEncoding)),M.push(C.customProgramCacheKey),M.join()}function v(C,M){C.push(M.precision),C.push(M.outputEncoding),C.push(M.envMapMode),C.push(M.envMapCubeUVHeight),C.push(M.combine),C.push(M.vertexUvs),C.push(M.fogExp2),C.push(M.sizeAttenuation),C.push(M.morphTargetsCount),C.push(M.morphAttributeCount),C.push(M.numDirLights),C.push(M.numPointLights),C.push(M.numSpotLights),C.push(M.numSpotLightMaps),C.push(M.numHemiLights),C.push(M.numRectAreaLights),C.push(M.numDirLightShadows),C.push(M.numPointLightShadows),C.push(M.numSpotLightShadows),C.push(M.numSpotLightShadowsWithMaps),C.push(M.shadowMapType),C.push(M.toneMapping),C.push(M.numClippingPlanes),C.push(M.numClipIntersection),C.push(M.depthPacking)}function y(C,M){o.disableAll(),M.isWebGL2&&o.enable(0),M.supportsVertexTextures&&o.enable(1),M.instancing&&o.enable(2),M.instancingColor&&o.enable(3),M.map&&o.enable(4),M.matcap&&o.enable(5),M.envMap&&o.enable(6),M.lightMap&&o.enable(7),M.aoMap&&o.enable(8),M.emissiveMap&&o.enable(9),M.bumpMap&&o.enable(10),M.normalMap&&o.enable(11),M.objectSpaceNormalMap&&o.enable(12),M.tangentSpaceNormalMap&&o.enable(13),M.clearcoat&&o.enable(14),M.clearcoatMap&&o.enable(15),M.clearcoatRoughnessMap&&o.enable(16),M.clearcoatNormalMap&&o.enable(17),M.iridescence&&o.enable(18),M.iridescenceMap&&o.enable(19),M.iridescenceThicknessMap&&o.enable(20),M.displacementMap&&o.enable(21),M.specularMap&&o.enable(22),M.roughnessMap&&o.enable(23),M.metalnessMap&&o.enable(24),M.gradientMap&&o.enable(25),M.alphaMap&&o.enable(26),M.alphaTest&&o.enable(27),M.vertexColors&&o.enable(28),M.vertexAlphas&&o.enable(29),M.vertexUvs&&o.enable(30),M.vertexTangents&&o.enable(31),M.uvsVertexOnly&&o.enable(32),C.push(o.mask),o.disableAll(),M.fog&&o.enable(0),M.useFog&&o.enable(1),M.flatShading&&o.enable(2),M.logarithmicDepthBuffer&&o.enable(3),M.skinning&&o.enable(4),M.morphTargets&&o.enable(5),M.morphNormals&&o.enable(6),M.morphColors&&o.enable(7),M.premultipliedAlpha&&o.enable(8),M.shadowMapEnabled&&o.enable(9),M.physicallyCorrectLights&&o.enable(10),M.doubleSided&&o.enable(11),M.flipSided&&o.enable(12),M.useDepthPacking&&o.enable(13),M.dithering&&o.enable(14),M.specularIntensityMap&&o.enable(15),M.specularColorMap&&o.enable(16),M.transmission&&o.enable(17),M.transmissionMap&&o.enable(18),M.thicknessMap&&o.enable(19),M.sheen&&o.enable(20),M.sheenColorMap&&o.enable(21),M.sheenRoughnessMap&&o.enable(22),M.decodeVideoTexture&&o.enable(23),M.opaque&&o.enable(24),C.push(o.mask)}function x(C){let M=f[C.type],A;if(M){let T=no[M];A=df.clone(T.uniforms)}else A=C.uniforms;return A}function w(C,M){let A;for(let T=0,L=h.length;T<L;T++){let D=h[T];if(D.cacheKey===M){A=D,++A.usedTimes;break}}return A===void 0&&(A=new GZ(e,M,C,s),h.push(A)),A}function _(C){if(--C.usedTimes===0){let M=h.indexOf(C);h[M]=h[h.length-1],h.pop(),C.destroy()}}function b(C){l.remove(C)}function S(){l.dispose()}return{getParameters:m,getProgramCacheKey:g,getUniforms:x,acquireProgram:w,releaseProgram:_,releaseShaderCache:b,programs:h,dispose:S}}function YZ(){let e=new WeakMap;function t(s){let a=e.get(s);return a===void 0&&(a={},e.set(s,a)),a}function r(s){e.delete(s)}function i(s,a,o){e.get(s)[a]=o}function n(){e=new WeakMap}return{get:t,remove:r,update:i,dispose:n}}function QZ(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function RM(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function BM(){let e=[],t=0,r=[],i=[],n=[];function s(){t=0,r.length=0,i.length=0,n.length=0}function a(u,d,p,f,m,g){let v=e[t];return v===void 0?(v={id:u.id,object:u,geometry:d,material:p,groupOrder:f,renderOrder:u.renderOrder,z:m,group:g},e[t]=v):(v.id=u.id,v.object=u,v.geometry=d,v.material=p,v.groupOrder=f,v.renderOrder=u.renderOrder,v.z=m,v.group=g),t++,v}function o(u,d,p,f,m,g){let v=a(u,d,p,f,m,g);p.transmission>0?i.push(v):p.transparent===!0?n.push(v):r.push(v)}function l(u,d,p,f,m,g){let v=a(u,d,p,f,m,g);p.transmission>0?i.unshift(v):p.transparent===!0?n.unshift(v):r.unshift(v)}function h(u,d){r.length>1&&r.sort(u||QZ),i.length>1&&i.sort(d||RM),n.length>1&&n.sort(d||RM)}function c(){for(let u=t,d=e.length;u<d;u++){let p=e[u];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:r,transmissive:i,transparent:n,init:s,push:o,unshift:l,finish:c,sort:h}}function ZZ(){let e=new WeakMap;function t(i,n){let s=e.get(i),a;return s===void 0?(a=new BM,e.set(i,[a])):n>=s.length?(a=new BM,s.push(a)):a=s[n],a}function r(){e=new WeakMap}return{get:t,dispose:r}}function KZ(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let r;switch(t.type){case"DirectionalLight":r={direction:new E,color:new lt};break;case"SpotLight":r={position:new E,direction:new E,color:new lt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new E,color:new lt,distance:0,decay:0};break;case"HemisphereLight":r={direction:new E,skyColor:new lt,groundColor:new lt};break;case"RectAreaLight":r={color:new lt,position:new E,halfWidth:new E,halfHeight:new E};break}return e[t.id]=r,r}}}function $Z(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let r;switch(t.type){case"DirectionalLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new X};break;case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new X};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new X,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=r,r}}}var JZ=0;function eK(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function tK(e,t){let r=new KZ,i=$Z(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)n.probe.push(new E);let s=new E,a=new Ae,o=new Ae;function l(c,u){let d=0,p=0,f=0;for(let T=0;T<9;T++)n.probe[T].set(0,0,0);let m=0,g=0,v=0,y=0,x=0,w=0,_=0,b=0,S=0,C=0;c.sort(eK);let M=u!==!0?Math.PI:1;for(let T=0,L=c.length;T<L;T++){let D=c[T],O=D.color,z=D.intensity,q=D.distance,N=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)d+=O.r*z*M,p+=O.g*z*M,f+=O.b*z*M;else if(D.isLightProbe)for(let I=0;I<9;I++)n.probe[I].addScaledVector(D.sh.coefficients[I],z);else if(D.isDirectionalLight){let I=r.get(D);if(I.color.copy(D.color).multiplyScalar(D.intensity*M),D.castShadow){let W=D.shadow,P=i.get(D);P.shadowBias=W.bias,P.shadowNormalBias=W.normalBias,P.shadowRadius=W.radius,P.shadowMapSize=W.mapSize,n.directionalShadow[m]=P,n.directionalShadowMap[m]=N,n.directionalShadowMatrix[m]=D.shadow.matrix,w++}n.directional[m]=I,m++}else if(D.isSpotLight){let I=r.get(D);I.position.setFromMatrixPosition(D.matrixWorld),I.color.copy(O).multiplyScalar(z*M),I.distance=q,I.coneCos=Math.cos(D.angle),I.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),I.decay=D.decay,n.spot[v]=I;let W=D.shadow;if(D.map&&(n.spotLightMap[S]=D.map,S++,W.updateMatrices(D),D.castShadow&&C++),n.spotLightMatrix[v]=W.matrix,D.castShadow){let P=i.get(D);P.shadowBias=W.bias,P.shadowNormalBias=W.normalBias,P.shadowRadius=W.radius,P.shadowMapSize=W.mapSize,n.spotShadow[v]=P,n.spotShadowMap[v]=N,b++}v++}else if(D.isRectAreaLight){let I=r.get(D);I.color.copy(O).multiplyScalar(z),I.halfWidth.set(D.width*.5,0,0),I.halfHeight.set(0,D.height*.5,0),n.rectArea[y]=I,y++}else if(D.isPointLight){let I=r.get(D);if(I.color.copy(D.color).multiplyScalar(D.intensity*M),I.distance=D.distance,I.decay=D.decay,D.castShadow){let W=D.shadow,P=i.get(D);P.shadowBias=W.bias,P.shadowNormalBias=W.normalBias,P.shadowRadius=W.radius,P.shadowMapSize=W.mapSize,P.shadowCameraNear=W.camera.near,P.shadowCameraFar=W.camera.far,n.pointShadow[g]=P,n.pointShadowMap[g]=N,n.pointShadowMatrix[g]=D.shadow.matrix,_++}n.point[g]=I,g++}else if(D.isHemisphereLight){let I=r.get(D);I.skyColor.copy(D.color).multiplyScalar(z*M),I.groundColor.copy(D.groundColor).multiplyScalar(z*M),n.hemi[x]=I,x++}}y>0&&(t.isWebGL2||e.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Ie.LTC_FLOAT_1,n.rectAreaLTC2=Ie.LTC_FLOAT_2):e.has("OES_texture_half_float_linear")===!0?(n.rectAreaLTC1=Ie.LTC_HALF_1,n.rectAreaLTC2=Ie.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=d,n.ambient[1]=p,n.ambient[2]=f;let A=n.hash;(A.directionalLength!==m||A.pointLength!==g||A.spotLength!==v||A.rectAreaLength!==y||A.hemiLength!==x||A.numDirectionalShadows!==w||A.numPointShadows!==_||A.numSpotShadows!==b||A.numSpotMaps!==S)&&(n.directional.length=m,n.spot.length=v,n.rectArea.length=y,n.point.length=g,n.hemi.length=x,n.directionalShadow.length=w,n.directionalShadowMap.length=w,n.pointShadow.length=_,n.pointShadowMap.length=_,n.spotShadow.length=b,n.spotShadowMap.length=b,n.directionalShadowMatrix.length=w,n.pointShadowMatrix.length=_,n.spotLightMatrix.length=b+S-C,n.spotLightMap.length=S,n.numSpotLightShadowsWithMaps=C,A.directionalLength=m,A.pointLength=g,A.spotLength=v,A.rectAreaLength=y,A.hemiLength=x,A.numDirectionalShadows=w,A.numPointShadows=_,A.numSpotShadows=b,A.numSpotMaps=S,n.version=JZ++)}function h(c,u){let d=0,p=0,f=0,m=0,g=0,v=u.matrixWorldInverse;for(let y=0,x=c.length;y<x;y++){let w=c[y];if(w.isDirectionalLight){let _=n.directional[d];_.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),_.direction.sub(s),_.direction.transformDirection(v),d++}else if(w.isSpotLight){let _=n.spot[f];_.position.setFromMatrixPosition(w.matrixWorld),_.position.applyMatrix4(v),_.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),_.direction.sub(s),_.direction.transformDirection(v),f++}else if(w.isRectAreaLight){let _=n.rectArea[m];_.position.setFromMatrixPosition(w.matrixWorld),_.position.applyMatrix4(v),o.identity(),a.copy(w.matrixWorld),a.premultiply(v),o.extractRotation(a),_.halfWidth.set(w.width*.5,0,0),_.halfHeight.set(0,w.height*.5,0),_.halfWidth.applyMatrix4(o),_.halfHeight.applyMatrix4(o),m++}else if(w.isPointLight){let _=n.point[p];_.position.setFromMatrixPosition(w.matrixWorld),_.position.applyMatrix4(v),p++}else if(w.isHemisphereLight){let _=n.hemi[g];_.direction.setFromMatrixPosition(w.matrixWorld),_.direction.transformDirection(v),g++}}}return{setup:l,setupView:h,state:n}}function zM(e,t){let r=new tK(e,t),i=[],n=[];function s(){i.length=0,n.length=0}function a(c){i.push(c)}function o(c){n.push(c)}function l(c){r.setup(i,c)}function h(c){r.setupView(i,c)}return{init:s,state:{lightsArray:i,shadowsArray:n,lights:r},setupLights:l,setupLightsView:h,pushLight:a,pushShadow:o}}function rK(e,t){let r=new WeakMap;function i(s,a=0){let o=r.get(s),l;return o===void 0?(l=new zM(e,t),r.set(s,[l])):a>=o.length?(l=new zM(e,t),o.push(l)):l=o[a],l}function n(){r=new WeakMap}return{get:i,dispose:n}}var TR=class extends Tm{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Bl,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},iK=class extends Tm{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new E,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},nK=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,sK=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function aK(e,t,r){let i=new Bw,n=new X,s=new X,a=new Ct,o=new TR({depthPacking:fR}),l=new iK,h={},c=r.maxTextureSize,u={[za]:_i,[_i]:za,[ps]:ps},d=new cr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new X},radius:{value:4}},vertexShader:nK,fragmentShader:sK}),p=d.clone();p.defines.HORIZONTAL_PASS=1;let f=new dt;f.setAttribute("position",new pt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let m=new kn(f,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Lw,this.render=function(w,_,b){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||w.length===0)return;let S=e.getRenderTarget(),C=e.getActiveCubeFace(),M=e.getActiveMipmapLevel(),A=e.state;A.setBlending(ti),A.buffers.color.setClear(1,1,1,1),A.buffers.depth.setTest(!0),A.setScissorTest(!1);for(let T=0,L=w.length;T<L;T++){let D=w[T],O=D.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",D,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;n.copy(O.mapSize);let z=O.getFrameExtents();if(n.multiply(z),s.copy(O.mapSize),(n.x>c||n.y>c)&&(n.x>c&&(s.x=Math.floor(c/z.x),n.x=s.x*z.x,O.mapSize.x=s.x),n.y>c&&(s.y=Math.floor(c/z.y),n.y=s.y*z.y,O.mapSize.y=s.y)),O.map===null){let N=this.type!==O1?{minFilter:ur,magFilter:ur}:{};O.map=new tr(n.x,n.y,N),O.map.texture.name=D.name+".shadowMap",O.camera.updateProjectionMatrix()}e.setRenderTarget(O.map),e.clear();let q=O.getViewportCount();for(let N=0;N<q;N++){let I=O.getViewport(N);a.set(s.x*I.x,s.y*I.y,s.x*I.z,s.y*I.w),A.viewport(a),O.updateMatrices(D,N),i=O.getFrustum(),x(_,b,O.camera,D,this.type)}O.isPointLightShadow!==!0&&this.type===O1&&v(O,b),O.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(S,C,M)};function v(w,_){let b=t.update(m);d.defines.VSM_SAMPLES!==w.blurSamples&&(d.defines.VSM_SAMPLES=w.blurSamples,p.defines.VSM_SAMPLES=w.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new tr(n.x,n.y)),d.uniforms.shadow_pass.value=w.map.texture,d.uniforms.resolution.value=w.mapSize,d.uniforms.radius.value=w.radius,e.setRenderTarget(w.mapPass),e.clear(),e.renderBufferDirect(_,null,b,d,m,null),p.uniforms.shadow_pass.value=w.mapPass.texture,p.uniforms.resolution.value=w.mapSize,p.uniforms.radius.value=w.radius,e.setRenderTarget(w.map),e.clear(),e.renderBufferDirect(_,null,b,p,m,null)}function y(w,_,b,S,C,M){let A=null,T=b.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(T!==void 0)A=T;else if(A=b.isPointLight===!0?l:o,e.localClippingEnabled&&_.clipShadows===!0&&Array.isArray(_.clippingPlanes)&&_.clippingPlanes.length!==0||_.displacementMap&&_.displacementScale!==0||_.alphaMap&&_.alphaTest>0||_.map&&_.alphaTest>0){let L=A.uuid,D=_.uuid,O=h[L];O===void 0&&(O={},h[L]=O);let z=O[D];z===void 0&&(z=A.clone(),O[D]=z),A=z}return A.visible=_.visible,A.wireframe=_.wireframe,M===O1?A.side=_.shadowSide!==null?_.shadowSide:_.side:A.side=_.shadowSide!==null?_.shadowSide:u[_.side],A.alphaMap=_.alphaMap,A.alphaTest=_.alphaTest,A.map=_.map,A.clipShadows=_.clipShadows,A.clippingPlanes=_.clippingPlanes,A.clipIntersection=_.clipIntersection,A.displacementMap=_.displacementMap,A.displacementScale=_.displacementScale,A.displacementBias=_.displacementBias,A.wireframeLinewidth=_.wireframeLinewidth,A.linewidth=_.linewidth,b.isPointLight===!0&&A.isMeshDistanceMaterial===!0&&(A.referencePosition.setFromMatrixPosition(b.matrixWorld),A.nearDistance=S,A.farDistance=C),A}function x(w,_,b,S,C){if(w.visible===!1)return;if(w.layers.test(_.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&C===O1)&&(!w.frustumCulled||i.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,w.matrixWorld);let A=t.update(w),T=w.material;if(Array.isArray(T)){let L=A.groups;for(let D=0,O=L.length;D<O;D++){let z=L[D],q=T[z.materialIndex];if(q&&q.visible){let N=y(w,q,S,b.near,b.far,C);e.renderBufferDirect(b,null,A,N,w,z)}}}else if(T.visible){let L=y(w,T,S,b.near,b.far,C);e.renderBufferDirect(b,null,A,L,w,null)}}let M=w.children;for(let A=0,T=M.length;A<T;A++)x(M[A],_,b,S,C)}}function oK(e,t,r){let i=r.isWebGL2;function n(){let j=!1,se=new Ct,ae=null,me=new Ct(0,0,0,0);return{setMask:function(Oe){ae!==Oe&&!j&&(e.colorMask(Oe,Oe,Oe,Oe),ae=Oe)},setLocked:function(Oe){j=Oe},setClear:function(Oe,tt,nt,gt,Ze){Ze===!0&&(Oe*=gt,tt*=gt,nt*=gt),se.set(Oe,tt,nt,gt),me.equals(se)===!1&&(e.clearColor(Oe,tt,nt,gt),me.copy(se))},reset:function(){j=!1,ae=null,me.set(-1,0,0,0)}}}function s(){let j=!1,se=null,ae=null,me=null;return{setTest:function(Oe){Oe?ie(2929):J(2929)},setMask:function(Oe){se!==Oe&&!j&&(e.depthMask(Oe),se=Oe)},setFunc:function(Oe){if(ae!==Oe){switch(Oe){case EW:e.depthFunc(512);break;case TW:e.depthFunc(519);break;case LW:e.depthFunc(513);break;case d7:e.depthFunc(515);break;case PW:e.depthFunc(514);break;case DW:e.depthFunc(518);break;case OW:e.depthFunc(516);break;case IW:e.depthFunc(517);break;default:e.depthFunc(515)}ae=Oe}},setLocked:function(Oe){j=Oe},setClear:function(Oe){me!==Oe&&(e.clearDepth(Oe),me=Oe)},reset:function(){j=!1,se=null,ae=null,me=null}}}function a(){let j=!1,se=null,ae=null,me=null,Oe=null,tt=null,nt=null,gt=null,Ze=null;return{setTest:function(Re){j||(Re?ie(2960):J(2960))},setMask:function(Re){se!==Re&&!j&&(e.stencilMask(Re),se=Re)},setFunc:function(Re,mt,Pt){(ae!==Re||me!==mt||Oe!==Pt)&&(e.stencilFunc(Re,mt,Pt),ae=Re,me=mt,Oe=Pt)},setOp:function(Re,mt,Pt){(tt!==Re||nt!==mt||gt!==Pt)&&(e.stencilOp(Re,mt,Pt),tt=Re,nt=mt,gt=Pt)},setLocked:function(Re){j=Re},setClear:function(Re){Ze!==Re&&(e.clearStencil(Re),Ze=Re)},reset:function(){j=!1,se=null,ae=null,me=null,Oe=null,tt=null,nt=null,gt=null,Ze=null}}}let o=new n,l=new s,h=new a,c=new WeakMap,u=new WeakMap,d={},p={},f=new WeakMap,m=[],g=null,v=!1,y=null,x=null,w=null,_=null,b=null,S=null,C=null,M=!1,A=null,T=null,L=null,D=null,O=null,z=e.getParameter(35661),q=!1,N=0,I=e.getParameter(7938);I.indexOf("WebGL")!==-1?(N=parseFloat(/^WebGL (\d)/.exec(I)[1]),q=N>=1):I.indexOf("OpenGL ES")!==-1&&(N=parseFloat(/^OpenGL ES (\d)/.exec(I)[1]),q=N>=2);let W=null,P={},V=e.getParameter(3088),G=e.getParameter(2978),Q=new Ct().fromArray(V),U=new Ct().fromArray(G);function Y(j,se,ae){let me=new Uint8Array(4),Oe=e.createTexture();e.bindTexture(j,Oe),e.texParameteri(j,10241,9728),e.texParameteri(j,10240,9728);for(let tt=0;tt<ae;tt++)e.texImage2D(se+tt,0,6408,1,1,0,6408,5121,me);return Oe}let H={};H[3553]=Y(3553,3553,1),H[34067]=Y(34067,34069,6),o.setClear(0,0,0,1),l.setClear(1),h.setClear(0),ie(2929),l.setFunc(d7),ze(!1),K(ES),ie(2884),Le(ti);function ie(j){d[j]!==!0&&(e.enable(j),d[j]=!0)}function J(j){d[j]!==!1&&(e.disable(j),d[j]=!1)}function ee(j,se){return p[j]!==se?(e.bindFramebuffer(j,se),p[j]=se,i&&(j===36009&&(p[36160]=se),j===36160&&(p[36009]=se)),!0):!1}function ne(j,se){let ae=m,me=!1;if(j)if(ae=f.get(se),ae===void 0&&(ae=[],f.set(se,ae)),j.isWebGLMultipleRenderTargets){let Oe=j.texture;if(ae.length!==Oe.length||ae[0]!==36064){for(let tt=0,nt=Oe.length;tt<nt;tt++)ae[tt]=36064+tt;ae.length=Oe.length,me=!0}}else ae[0]!==36064&&(ae[0]=36064,me=!0);else ae[0]!==1029&&(ae[0]=1029,me=!0);me&&(r.isWebGL2?e.drawBuffers(ae):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(ae))}function he(j){return g!==j?(e.useProgram(j),g=j,!0):!1}let ge={[vd]:32774,[gW]:32778,[vW]:32779};if(i)ge[DS]=32775,ge[OS]=32776;else{let j=t.get("EXT_blend_minmax");j!==null&&(ge[DS]=j.MIN_EXT,ge[OS]=j.MAX_EXT)}let ce={[yW]:0,[xW]:1,[wW]:768,[aR]:770,[AW]:776,[SW]:774,[_W]:772,[bW]:769,[oR]:771,[MW]:775,[CW]:773};function Le(j,se,ae,me,Oe,tt,nt,gt){if(j===ti){v===!0&&(J(3042),v=!1);return}if(v===!1&&(ie(3042),v=!0),j!==mW){if(j!==y||gt!==M){if((x!==vd||b!==vd)&&(e.blendEquation(32774),x=vd,b=vd),gt)switch(j){case cp:e.blendFuncSeparate(1,771,1,771);break;case TS:e.blendFunc(1,1);break;case LS:e.blendFuncSeparate(0,769,0,1);break;case PS:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",j);break}else switch(j){case cp:e.blendFuncSeparate(770,771,1,771);break;case TS:e.blendFunc(770,1);break;case LS:e.blendFuncSeparate(0,769,0,1);break;case PS:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",j);break}w=null,_=null,S=null,C=null,y=j,M=gt}return}Oe=Oe||se,tt=tt||ae,nt=nt||me,(se!==x||Oe!==b)&&(e.blendEquationSeparate(ge[se],ge[Oe]),x=se,b=Oe),(ae!==w||me!==_||tt!==S||nt!==C)&&(e.blendFuncSeparate(ce[ae],ce[me],ce[tt],ce[nt]),w=ae,_=me,S=tt,C=nt),y=j,M=!1}function _e(j,se){j.side===ps?J(2884):ie(2884);let ae=j.side===_i;se&&(ae=!ae),ze(ae),j.blending===cp&&j.transparent===!1?Le(ti):Le(j.blending,j.blendEquation,j.blendSrc,j.blendDst,j.blendEquationAlpha,j.blendSrcAlpha,j.blendDstAlpha,j.premultipliedAlpha),l.setFunc(j.depthFunc),l.setTest(j.depthTest),l.setMask(j.depthWrite),o.setMask(j.colorWrite);let me=j.stencilWrite;h.setTest(me),me&&(h.setMask(j.stencilWriteMask),h.setFunc(j.stencilFunc,j.stencilRef,j.stencilFuncMask),h.setOp(j.stencilFail,j.stencilZFail,j.stencilZPass)),Me(j.polygonOffset,j.polygonOffsetFactor,j.polygonOffsetUnits),j.alphaToCoverage===!0?ie(32926):J(32926)}function ze(j){A!==j&&(j?e.frontFace(2304):e.frontFace(2305),A=j)}function K(j){j!==dW?(ie(2884),j!==T&&(j===ES?e.cullFace(1029):j===pW?e.cullFace(1028):e.cullFace(1032))):J(2884),T=j}function Ce(j){j!==L&&(q&&e.lineWidth(j),L=j)}function Me(j,se,ae){j?(ie(32823),(D!==se||O!==ae)&&(e.polygonOffset(se,ae),D=se,O=ae)):J(32823)}function Ge(j){j?ie(3089):J(3089)}function ke(j){j===void 0&&(j=33984+z-1),W!==j&&(e.activeTexture(j),W=j)}function F(j,se,ae){ae===void 0&&(W===null?ae=33984+z-1:ae=W);let me=P[ae];me===void 0&&(me={type:void 0,texture:void 0},P[ae]=me),(me.type!==j||me.texture!==se)&&(W!==ae&&(e.activeTexture(ae),W=ae),e.bindTexture(j,se||H[j]),me.type=j,me.texture=se)}function B(){let j=P[W];j!==void 0&&j.type!==void 0&&(e.bindTexture(j.type,null),j.type=void 0,j.texture=void 0)}function le(){try{e.compressedTexImage2D.apply(e,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function xe(){try{e.compressedTexImage3D.apply(e,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function ye(){try{e.texSubImage2D.apply(e,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Ee(){try{e.texSubImage3D.apply(e,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Ue(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Ne(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function fe(){try{e.texStorage2D.apply(e,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function je(){try{e.texStorage3D.apply(e,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Fe(){try{e.texImage2D.apply(e,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Qe(){try{e.texImage3D.apply(e,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function $(j){Q.equals(j)===!1&&(e.scissor(j.x,j.y,j.z,j.w),Q.copy(j))}function te(j){U.equals(j)===!1&&(e.viewport(j.x,j.y,j.z,j.w),U.copy(j))}function ve(j,se){let ae=u.get(se);ae===void 0&&(ae=new WeakMap,u.set(se,ae));let me=ae.get(j);me===void 0&&(me=e.getUniformBlockIndex(se,j.name),ae.set(j,me))}function Te(j,se){let ae=u.get(se).get(j);c.get(se)!==ae&&(e.uniformBlockBinding(se,ae,j.__bindingPointIndex),c.set(se,ae))}function He(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),i===!0&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),d={},W=null,P={},p={},f=new WeakMap,m=[],g=null,v=!1,y=null,x=null,w=null,_=null,b=null,S=null,C=null,M=!1,A=null,T=null,L=null,D=null,O=null,Q.set(0,0,e.canvas.width,e.canvas.height),U.set(0,0,e.canvas.width,e.canvas.height),o.reset(),l.reset(),h.reset()}return{buffers:{color:o,depth:l,stencil:h},enable:ie,disable:J,bindFramebuffer:ee,drawBuffers:ne,useProgram:he,setBlending:Le,setMaterial:_e,setFlipSided:ze,setCullFace:K,setLineWidth:Ce,setPolygonOffset:Me,setScissorTest:Ge,activeTexture:ke,bindTexture:F,unbindTexture:B,compressedTexImage2D:le,compressedTexImage3D:xe,texImage2D:Fe,texImage3D:Qe,updateUBOMapping:ve,uniformBlockBinding:Te,texStorage2D:fe,texStorage3D:je,texSubImage2D:ye,texSubImage3D:Ee,compressedTexSubImage2D:Ue,compressedTexSubImage3D:Ne,scissor:$,viewport:te,reset:He}}function lK(e,t,r,i,n,s,a){let o=n.isWebGL2,l=n.maxTextures,h=n.maxCubemapSize,c=n.maxTextureSize,u=n.maxSamples,d=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap,m,g=new WeakMap,v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(F,B){return v?new OffscreenCanvas(F,B):h3("canvas")}function x(F,B,le,xe){let ye=1;if((F.width>xe||F.height>xe)&&(ye=xe/Math.max(F.width,F.height)),ye<1||B===!0)if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap){let Ee=B?l3:Math.floor,Ue=Ee(ye*F.width),Ne=Ee(ye*F.height);m===void 0&&(m=y(Ue,Ne));let fe=le?y(Ue,Ne):m;return fe.width=Ue,fe.height=Ne,fe.getContext("2d").drawImage(F,0,0,Ue,Ne),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+F.width+"x"+F.height+") to ("+Ue+"x"+Ne+")."),fe}else return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+F.width+"x"+F.height+")."),F;return F}function w(F){return y7(F.width)&&y7(F.height)}function _(F){return o?!1:F.wrapS!==Gr||F.wrapT!==Gr||F.minFilter!==ur&&F.minFilter!==Lt}function b(F,B){return F.generateMipmaps&&B&&F.minFilter!==ur&&F.minFilter!==Lt}function S(F){e.generateMipmap(F)}function C(F,B,le,xe,ye=!1){if(o===!1)return B;if(F!==null){if(e[F]!==void 0)return e[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let Ee=B;return B===6403&&(le===5126&&(Ee=33326),le===5131&&(Ee=33325),le===5121&&(Ee=33321)),B===33319&&(le===5126&&(Ee=33328),le===5131&&(Ee=33327),le===5121&&(Ee=33323)),B===6408&&(le===5126&&(Ee=34836),le===5131&&(Ee=34842),le===5121&&(Ee=xe===_t&&ye===!1?35907:32856),le===32819&&(Ee=32854),le===32820&&(Ee=32855)),(Ee===33325||Ee===33326||Ee===33327||Ee===33328||Ee===34842||Ee===34836)&&t.get("EXT_color_buffer_float"),Ee}function M(F,B,le){return b(F,le)===!0||F.isFramebufferTexture&&F.minFilter!==ur&&F.minFilter!==Lt?Math.log2(Math.max(B.width,B.height))+1:F.mipmaps!==void 0&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?B.mipmaps.length:1}function A(F){return F===ur||F===IS||F===G4?9728:9729}function T(F){let B=F.target;B.removeEventListener("dispose",T),D(B),B.isVideoTexture&&f.delete(B)}function L(F){let B=F.target;B.removeEventListener("dispose",L),z(B)}function D(F){let B=i.get(F);if(B.__webglInit===void 0)return;let le=F.source,xe=g.get(le);if(xe){let ye=xe[B.__cacheKey];ye.usedTimes--,ye.usedTimes===0&&O(F),Object.keys(xe).length===0&&g.delete(le)}i.remove(F)}function O(F){let B=i.get(F);e.deleteTexture(B.__webglTexture);let le=F.source,xe=g.get(le);delete xe[B.__cacheKey],a.memory.textures--}function z(F){let B=F.texture,le=i.get(F),xe=i.get(B);if(xe.__webglTexture!==void 0&&(e.deleteTexture(xe.__webglTexture),a.memory.textures--),F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(let ye=0;ye<6;ye++)e.deleteFramebuffer(le.__webglFramebuffer[ye]),le.__webglDepthbuffer&&e.deleteRenderbuffer(le.__webglDepthbuffer[ye]);else{if(e.deleteFramebuffer(le.__webglFramebuffer),le.__webglDepthbuffer&&e.deleteRenderbuffer(le.__webglDepthbuffer),le.__webglMultisampledFramebuffer&&e.deleteFramebuffer(le.__webglMultisampledFramebuffer),le.__webglColorRenderbuffer)for(let ye=0;ye<le.__webglColorRenderbuffer.length;ye++)le.__webglColorRenderbuffer[ye]&&e.deleteRenderbuffer(le.__webglColorRenderbuffer[ye]);le.__webglDepthRenderbuffer&&e.deleteRenderbuffer(le.__webglDepthRenderbuffer)}if(F.isWebGLMultipleRenderTargets)for(let ye=0,Ee=B.length;ye<Ee;ye++){let Ue=i.get(B[ye]);Ue.__webglTexture&&(e.deleteTexture(Ue.__webglTexture),a.memory.textures--),i.remove(B[ye])}i.remove(B),i.remove(F)}let q=0;function N(){q=0}function I(){let F=q;return F>=l&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+l),q+=1,F}function W(F){let B=[];return B.push(F.wrapS),B.push(F.wrapT),B.push(F.wrapR||0),B.push(F.magFilter),B.push(F.minFilter),B.push(F.anisotropy),B.push(F.internalFormat),B.push(F.format),B.push(F.type),B.push(F.generateMipmaps),B.push(F.premultiplyAlpha),B.push(F.flipY),B.push(F.unpackAlignment),B.push(F.encoding),B.join()}function P(F,B){let le=i.get(F);if(F.isVideoTexture&&Ge(F),F.isRenderTargetTexture===!1&&F.version>0&&le.__version!==F.version){let xe=F.image;if(xe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(xe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{J(le,F,B);return}}r.bindTexture(3553,le.__webglTexture,33984+B)}function V(F,B){let le=i.get(F);if(F.version>0&&le.__version!==F.version){J(le,F,B);return}r.bindTexture(35866,le.__webglTexture,33984+B)}function G(F,B){let le=i.get(F);if(F.version>0&&le.__version!==F.version){J(le,F,B);return}r.bindTexture(32879,le.__webglTexture,33984+B)}function Q(F,B){let le=i.get(F);if(F.version>0&&le.__version!==F.version){ee(le,F,B);return}r.bindTexture(34067,le.__webglTexture,33984+B)}let U={[ml]:10497,[Gr]:33071,[m7]:33648},Y={[ur]:9728,[IS]:9984,[G4]:9986,[Lt]:9729,[jW]:9985,[Vp]:9987};function H(F,B,le){if(le?(e.texParameteri(F,10242,U[B.wrapS]),e.texParameteri(F,10243,U[B.wrapT]),(F===32879||F===35866)&&e.texParameteri(F,32882,U[B.wrapR]),e.texParameteri(F,10240,Y[B.magFilter]),e.texParameteri(F,10241,Y[B.minFilter])):(e.texParameteri(F,10242,33071),e.texParameteri(F,10243,33071),(F===32879||F===35866)&&e.texParameteri(F,32882,33071),(B.wrapS!==Gr||B.wrapT!==Gr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(F,10240,A(B.magFilter)),e.texParameteri(F,10241,A(B.minFilter)),B.minFilter!==ur&&B.minFilter!==Lt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){let xe=t.get("EXT_texture_filter_anisotropic");if(B.magFilter===ur||B.minFilter!==G4&&B.minFilter!==Vp||B.type===fs&&t.has("OES_texture_float_linear")===!1||o===!1&&B.type===Gp&&t.has("OES_texture_half_float_linear")===!1)return;(B.anisotropy>1||i.get(B).__currentAnisotropy)&&(e.texParameterf(F,xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,n.getMaxAnisotropy())),i.get(B).__currentAnisotropy=B.anisotropy)}}function ie(F,B){let le=!1;F.__webglInit===void 0&&(F.__webglInit=!0,B.addEventListener("dispose",T));let xe=B.source,ye=g.get(xe);ye===void 0&&(ye={},g.set(xe,ye));let Ee=W(B);if(Ee!==F.__cacheKey){ye[Ee]===void 0&&(ye[Ee]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,le=!0),ye[Ee].usedTimes++;let Ue=ye[F.__cacheKey];Ue!==void 0&&(ye[F.__cacheKey].usedTimes--,Ue.usedTimes===0&&O(B)),F.__cacheKey=Ee,F.__webglTexture=ye[Ee].texture}return le}function J(F,B,le){let xe=3553;(B.isDataArrayTexture||B.isCompressedArrayTexture)&&(xe=35866),B.isData3DTexture&&(xe=32879);let ye=ie(F,B),Ee=B.source;r.bindTexture(xe,F.__webglTexture,33984+le);let Ue=i.get(Ee);if(Ee.version!==Ue.__version||ye===!0){r.activeTexture(33984+le),e.pixelStorei(37440,B.flipY),e.pixelStorei(37441,B.premultiplyAlpha),e.pixelStorei(3317,B.unpackAlignment),e.pixelStorei(37443,0);let Ne=_(B)&&w(B.image)===!1,fe=x(B.image,Ne,!1,c);fe=ke(B,fe);let je=w(fe)||o,Fe=s.convert(B.format,B.encoding),Qe=s.convert(B.type),$=C(B.internalFormat,Fe,Qe,B.encoding,B.isVideoTexture);H(xe,B,je);let te,ve=B.mipmaps,Te=o&&B.isVideoTexture!==!0,He=Ue.__version===void 0||ye===!0,j=M(B,fe,je);if(B.isDepthTexture)$=6402,o?B.type===fs?$=36012:B.type===mh?$=33190:B.type===Ku?$=35056:$=33189:B.type===fs&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),B.format===$u&&$===6402&&B.type!==uR&&B.type!==mh&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),B.type=mh,Qe=s.convert(B.type)),B.format===gc&&$===6402&&($=34041,B.type!==Ku&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),B.type=Ku,Qe=s.convert(B.type))),He&&(Te?r.texStorage2D(3553,1,$,fe.width,fe.height):r.texImage2D(3553,0,$,fe.width,fe.height,0,Fe,Qe,null));else if(B.isDataTexture)if(ve.length>0&&je){Te&&He&&r.texStorage2D(3553,j,$,ve[0].width,ve[0].height);for(let se=0,ae=ve.length;se<ae;se++)te=ve[se],Te?r.texSubImage2D(3553,se,0,0,te.width,te.height,Fe,Qe,te.data):r.texImage2D(3553,se,$,te.width,te.height,0,Fe,Qe,te.data);B.generateMipmaps=!1}else Te?(He&&r.texStorage2D(3553,j,$,fe.width,fe.height),r.texSubImage2D(3553,0,0,0,fe.width,fe.height,Fe,Qe,fe.data)):r.texImage2D(3553,0,$,fe.width,fe.height,0,Fe,Qe,fe.data);else if(B.isCompressedTexture)if(B.isCompressedArrayTexture){Te&&He&&r.texStorage3D(35866,j,$,ve[0].width,ve[0].height,fe.depth);for(let se=0,ae=ve.length;se<ae;se++)te=ve[se],B.format!==Ws?Fe!==null?Te?r.compressedTexSubImage3D(35866,se,0,0,0,te.width,te.height,fe.depth,Fe,te.data,0,0):r.compressedTexImage3D(35866,se,$,te.width,te.height,fe.depth,0,te.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Te?r.texSubImage3D(35866,se,0,0,0,te.width,te.height,fe.depth,Fe,Qe,te.data):r.texImage3D(35866,se,$,te.width,te.height,fe.depth,0,Fe,Qe,te.data)}else{Te&&He&&r.texStorage2D(3553,j,$,ve[0].width,ve[0].height);for(let se=0,ae=ve.length;se<ae;se++)te=ve[se],B.format!==Ws?Fe!==null?Te?r.compressedTexSubImage2D(3553,se,0,0,te.width,te.height,Fe,te.data):r.compressedTexImage2D(3553,se,$,te.width,te.height,0,te.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Te?r.texSubImage2D(3553,se,0,0,te.width,te.height,Fe,Qe,te.data):r.texImage2D(3553,se,$,te.width,te.height,0,Fe,Qe,te.data)}else if(B.isDataArrayTexture)Te?(He&&r.texStorage3D(35866,j,$,fe.width,fe.height,fe.depth),r.texSubImage3D(35866,0,0,0,0,fe.width,fe.height,fe.depth,Fe,Qe,fe.data)):r.texImage3D(35866,0,$,fe.width,fe.height,fe.depth,0,Fe,Qe,fe.data);else if(B.isData3DTexture)Te?(He&&r.texStorage3D(32879,j,$,fe.width,fe.height,fe.depth),r.texSubImage3D(32879,0,0,0,0,fe.width,fe.height,fe.depth,Fe,Qe,fe.data)):r.texImage3D(32879,0,$,fe.width,fe.height,fe.depth,0,Fe,Qe,fe.data);else if(B.isFramebufferTexture){if(He)if(Te)r.texStorage2D(3553,j,$,fe.width,fe.height);else{let se=fe.width,ae=fe.height;for(let me=0;me<j;me++)r.texImage2D(3553,me,$,se,ae,0,Fe,Qe,null),se>>=1,ae>>=1}}else if(ve.length>0&&je){Te&&He&&r.texStorage2D(3553,j,$,ve[0].width,ve[0].height);for(let se=0,ae=ve.length;se<ae;se++)te=ve[se],Te?r.texSubImage2D(3553,se,0,0,Fe,Qe,te):r.texImage2D(3553,se,$,Fe,Qe,te);B.generateMipmaps=!1}else Te?(He&&r.texStorage2D(3553,j,$,fe.width,fe.height),r.texSubImage2D(3553,0,0,0,Fe,Qe,fe)):r.texImage2D(3553,0,$,Fe,Qe,fe);b(B,je)&&S(xe),Ue.__version=Ee.version,B.onUpdate&&B.onUpdate(B)}F.__version=B.version}function ee(F,B,le){if(B.image.length!==6)return;let xe=ie(F,B),ye=B.source;r.bindTexture(34067,F.__webglTexture,33984+le);let Ee=i.get(ye);if(ye.version!==Ee.__version||xe===!0){r.activeTexture(33984+le),e.pixelStorei(37440,B.flipY),e.pixelStorei(37441,B.premultiplyAlpha),e.pixelStorei(3317,B.unpackAlignment),e.pixelStorei(37443,0);let Ue=B.isCompressedTexture||B.image[0].isCompressedTexture,Ne=B.image[0]&&B.image[0].isDataTexture,fe=[];for(let se=0;se<6;se++)!Ue&&!Ne?fe[se]=x(B.image[se],!1,!0,h):fe[se]=Ne?B.image[se].image:B.image[se],fe[se]=ke(B,fe[se]);let je=fe[0],Fe=w(je)||o,Qe=s.convert(B.format,B.encoding),$=s.convert(B.type),te=C(B.internalFormat,Qe,$,B.encoding),ve=o&&B.isVideoTexture!==!0,Te=Ee.__version===void 0||xe===!0,He=M(B,je,Fe);H(34067,B,Fe);let j;if(Ue){ve&&Te&&r.texStorage2D(34067,He,te,je.width,je.height);for(let se=0;se<6;se++){j=fe[se].mipmaps;for(let ae=0;ae<j.length;ae++){let me=j[ae];B.format!==Ws?Qe!==null?ve?r.compressedTexSubImage2D(34069+se,ae,0,0,me.width,me.height,Qe,me.data):r.compressedTexImage2D(34069+se,ae,te,me.width,me.height,0,me.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ve?r.texSubImage2D(34069+se,ae,0,0,me.width,me.height,Qe,$,me.data):r.texImage2D(34069+se,ae,te,me.width,me.height,0,Qe,$,me.data)}}}else{j=B.mipmaps,ve&&Te&&(j.length>0&&He++,r.texStorage2D(34067,He,te,fe[0].width,fe[0].height));for(let se=0;se<6;se++)if(Ne){ve?r.texSubImage2D(34069+se,0,0,0,fe[se].width,fe[se].height,Qe,$,fe[se].data):r.texImage2D(34069+se,0,te,fe[se].width,fe[se].height,0,Qe,$,fe[se].data);for(let ae=0;ae<j.length;ae++){let me=j[ae].image[se].image;ve?r.texSubImage2D(34069+se,ae+1,0,0,me.width,me.height,Qe,$,me.data):r.texImage2D(34069+se,ae+1,te,me.width,me.height,0,Qe,$,me.data)}}else{ve?r.texSubImage2D(34069+se,0,0,0,Qe,$,fe[se]):r.texImage2D(34069+se,0,te,Qe,$,fe[se]);for(let ae=0;ae<j.length;ae++){let me=j[ae];ve?r.texSubImage2D(34069+se,ae+1,0,0,Qe,$,me.image[se]):r.texImage2D(34069+se,ae+1,te,Qe,$,me.image[se])}}}b(B,Fe)&&S(34067),Ee.__version=ye.version,B.onUpdate&&B.onUpdate(B)}F.__version=B.version}function ne(F,B,le,xe,ye){let Ee=s.convert(le.format,le.encoding),Ue=s.convert(le.type),Ne=C(le.internalFormat,Ee,Ue,le.encoding);i.get(B).__hasExternalTextures||(ye===32879||ye===35866?r.texImage3D(ye,0,Ne,B.width,B.height,B.depth,0,Ee,Ue,null):r.texImage2D(ye,0,Ne,B.width,B.height,0,Ee,Ue,null)),r.bindFramebuffer(36160,F),Me(B)?d.framebufferTexture2DMultisampleEXT(36160,xe,ye,i.get(le).__webglTexture,0,Ce(B)):(ye===3553||ye>=34069&&ye<=34074)&&e.framebufferTexture2D(36160,xe,ye,i.get(le).__webglTexture,0),r.bindFramebuffer(36160,null)}function he(F,B,le){if(e.bindRenderbuffer(36161,F),B.depthBuffer&&!B.stencilBuffer){let xe=33189;if(le||Me(B)){let ye=B.depthTexture;ye&&ye.isDepthTexture&&(ye.type===fs?xe=36012:ye.type===mh&&(xe=33190));let Ee=Ce(B);Me(B)?d.renderbufferStorageMultisampleEXT(36161,Ee,xe,B.width,B.height):e.renderbufferStorageMultisample(36161,Ee,xe,B.width,B.height)}else e.renderbufferStorage(36161,xe,B.width,B.height);e.framebufferRenderbuffer(36160,36096,36161,F)}else if(B.depthBuffer&&B.stencilBuffer){let xe=Ce(B);le&&Me(B)===!1?e.renderbufferStorageMultisample(36161,xe,35056,B.width,B.height):Me(B)?d.renderbufferStorageMultisampleEXT(36161,xe,35056,B.width,B.height):e.renderbufferStorage(36161,34041,B.width,B.height),e.framebufferRenderbuffer(36160,33306,36161,F)}else{let xe=B.isWebGLMultipleRenderTargets===!0?B.texture:[B.texture];for(let ye=0;ye<xe.length;ye++){let Ee=xe[ye],Ue=s.convert(Ee.format,Ee.encoding),Ne=s.convert(Ee.type),fe=C(Ee.internalFormat,Ue,Ne,Ee.encoding),je=Ce(B);le&&Me(B)===!1?e.renderbufferStorageMultisample(36161,je,fe,B.width,B.height):Me(B)?d.renderbufferStorageMultisampleEXT(36161,je,fe,B.width,B.height):e.renderbufferStorage(36161,fe,B.width,B.height)}}e.bindRenderbuffer(36161,null)}function ge(F,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(36160,F),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(B.depthTexture).__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),P(B.depthTexture,0);let le=i.get(B.depthTexture).__webglTexture,xe=Ce(B);if(B.depthTexture.format===$u)Me(B)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,le,0,xe):e.framebufferTexture2D(36160,36096,3553,le,0);else if(B.depthTexture.format===gc)Me(B)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,le,0,xe):e.framebufferTexture2D(36160,33306,3553,le,0);else throw new Error("Unknown depthTexture format")}function ce(F){let B=i.get(F),le=F.isWebGLCubeRenderTarget===!0;if(F.depthTexture&&!B.__autoAllocateDepthBuffer){if(le)throw new Error("target.depthTexture not supported in Cube render targets");ge(B.__webglFramebuffer,F)}else if(le){B.__webglDepthbuffer=[];for(let xe=0;xe<6;xe++)r.bindFramebuffer(36160,B.__webglFramebuffer[xe]),B.__webglDepthbuffer[xe]=e.createRenderbuffer(),he(B.__webglDepthbuffer[xe],F,!1)}else r.bindFramebuffer(36160,B.__webglFramebuffer),B.__webglDepthbuffer=e.createRenderbuffer(),he(B.__webglDepthbuffer,F,!1);r.bindFramebuffer(36160,null)}function Le(F,B,le){let xe=i.get(F);B!==void 0&&ne(xe.__webglFramebuffer,F,F.texture,36064,3553),le!==void 0&&ce(F)}function _e(F){let B=F.texture,le=i.get(F),xe=i.get(B);F.addEventListener("dispose",L),F.isWebGLMultipleRenderTargets!==!0&&(xe.__webglTexture===void 0&&(xe.__webglTexture=e.createTexture()),xe.__version=B.version,a.memory.textures++);let ye=F.isWebGLCubeRenderTarget===!0,Ee=F.isWebGLMultipleRenderTargets===!0,Ue=w(F)||o;if(ye){le.__webglFramebuffer=[];for(let Ne=0;Ne<6;Ne++)le.__webglFramebuffer[Ne]=e.createFramebuffer()}else{if(le.__webglFramebuffer=e.createFramebuffer(),Ee)if(n.drawBuffers){let Ne=F.texture;for(let fe=0,je=Ne.length;fe<je;fe++){let Fe=i.get(Ne[fe]);Fe.__webglTexture===void 0&&(Fe.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&F.samples>0&&Me(F)===!1){let Ne=Ee?B:[B];le.__webglMultisampledFramebuffer=e.createFramebuffer(),le.__webglColorRenderbuffer=[],r.bindFramebuffer(36160,le.__webglMultisampledFramebuffer);for(let fe=0;fe<Ne.length;fe++){let je=Ne[fe];le.__webglColorRenderbuffer[fe]=e.createRenderbuffer(),e.bindRenderbuffer(36161,le.__webglColorRenderbuffer[fe]);let Fe=s.convert(je.format,je.encoding),Qe=s.convert(je.type),$=C(je.internalFormat,Fe,Qe,je.encoding,F.isXRRenderTarget===!0),te=Ce(F);e.renderbufferStorageMultisample(36161,te,$,F.width,F.height),e.framebufferRenderbuffer(36160,36064+fe,36161,le.__webglColorRenderbuffer[fe])}e.bindRenderbuffer(36161,null),F.depthBuffer&&(le.__webglDepthRenderbuffer=e.createRenderbuffer(),he(le.__webglDepthRenderbuffer,F,!0)),r.bindFramebuffer(36160,null)}}if(ye){r.bindTexture(34067,xe.__webglTexture),H(34067,B,Ue);for(let Ne=0;Ne<6;Ne++)ne(le.__webglFramebuffer[Ne],F,B,36064,34069+Ne);b(B,Ue)&&S(34067),r.unbindTexture()}else if(Ee){let Ne=F.texture;for(let fe=0,je=Ne.length;fe<je;fe++){let Fe=Ne[fe],Qe=i.get(Fe);r.bindTexture(3553,Qe.__webglTexture),H(3553,Fe,Ue),ne(le.__webglFramebuffer,F,Fe,36064+fe,3553),b(Fe,Ue)&&S(3553)}r.unbindTexture()}else{let Ne=3553;(F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(o?Ne=F.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),r.bindTexture(Ne,xe.__webglTexture),H(Ne,B,Ue),ne(le.__webglFramebuffer,F,B,36064,Ne),b(B,Ue)&&S(Ne),r.unbindTexture()}F.depthBuffer&&ce(F)}function ze(F){let B=w(F)||o,le=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let xe=0,ye=le.length;xe<ye;xe++){let Ee=le[xe];if(b(Ee,B)){let Ue=F.isWebGLCubeRenderTarget?34067:3553,Ne=i.get(Ee).__webglTexture;r.bindTexture(Ue,Ne),S(Ue),r.unbindTexture()}}}function K(F){if(o&&F.samples>0&&Me(F)===!1){let B=F.isWebGLMultipleRenderTargets?F.texture:[F.texture],le=F.width,xe=F.height,ye=16384,Ee=[],Ue=F.stencilBuffer?33306:36096,Ne=i.get(F),fe=F.isWebGLMultipleRenderTargets===!0;if(fe)for(let je=0;je<B.length;je++)r.bindFramebuffer(36160,Ne.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+je,36161,null),r.bindFramebuffer(36160,Ne.__webglFramebuffer),e.framebufferTexture2D(36009,36064+je,3553,null,0);r.bindFramebuffer(36008,Ne.__webglMultisampledFramebuffer),r.bindFramebuffer(36009,Ne.__webglFramebuffer);for(let je=0;je<B.length;je++){Ee.push(36064+je),F.depthBuffer&&Ee.push(Ue);let Fe=Ne.__ignoreDepthValues!==void 0?Ne.__ignoreDepthValues:!1;if(Fe===!1&&(F.depthBuffer&&(ye|=256),F.stencilBuffer&&(ye|=1024)),fe&&e.framebufferRenderbuffer(36008,36064,36161,Ne.__webglColorRenderbuffer[je]),Fe===!0&&(e.invalidateFramebuffer(36008,[Ue]),e.invalidateFramebuffer(36009,[Ue])),fe){let Qe=i.get(B[je]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,Qe,0)}e.blitFramebuffer(0,0,le,xe,0,0,le,xe,ye,9728),p&&e.invalidateFramebuffer(36008,Ee)}if(r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,null),fe)for(let je=0;je<B.length;je++){r.bindFramebuffer(36160,Ne.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+je,36161,Ne.__webglColorRenderbuffer[je]);let Fe=i.get(B[je]).__webglTexture;r.bindFramebuffer(36160,Ne.__webglFramebuffer),e.framebufferTexture2D(36009,36064+je,3553,Fe,0)}r.bindFramebuffer(36009,Ne.__webglMultisampledFramebuffer)}}function Ce(F){return Math.min(u,F.samples)}function Me(F){let B=i.get(F);return o&&F.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&B.__useRenderToTexture!==!1}function Ge(F){let B=a.render.frame;f.get(F)!==B&&(f.set(F,B),F.update())}function ke(F,B){let le=F.encoding,xe=F.format,ye=F.type;return F.isCompressedTexture===!0||F.isVideoTexture===!0||F.format===v7||le!==Mo&&(le===_t?o===!1?t.has("EXT_sRGB")===!0&&xe===Ws?(F.format=v7,F.minFilter=Lt,F.generateMipmaps=!1):B=yR.sRGBToLinear(B):(xe!==Ws||ye!==en)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",le)),B}this.allocateTextureUnit=I,this.resetTextureUnits=N,this.setTexture2D=P,this.setTexture2DArray=V,this.setTexture3D=G,this.setTextureCube=Q,this.rebindTextures=Le,this.setupRenderTarget=_e,this.updateRenderTargetMipmap=ze,this.updateMultisampleRenderTarget=K,this.setupDepthRenderbuffer=ce,this.setupFrameBufferTexture=ne,this.useMultisampledRTT=Me}function hK(e,t,r){let i=r.isWebGL2;function n(s,a=null){let o;if(s===en)return 5121;if(s===WW)return 32819;if(s===qW)return 32820;if(s===VW)return 5120;if(s===GW)return 5122;if(s===uR)return 5123;if(s===HW)return 5124;if(s===mh)return 5125;if(s===fs)return 5126;if(s===Gp)return i?5131:(o=t.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===XW)return 6406;if(s===Ws)return 6408;if(s===YW)return 6409;if(s===QW)return 6410;if(s===$u)return 6402;if(s===gc)return 34041;if(s===v7)return o=t.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(s===ZW)return 6403;if(s===KW)return 36244;if(s===cR)return 33319;if(s===$W)return 33320;if(s===JW)return 36249;if(s===H4||s===W4||s===q4||s===X4)if(a===_t)if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(s===H4)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===W4)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===q4)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===X4)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===H4)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===W4)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===q4)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===X4)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===RS||s===BS||s===zS||s===kS)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===RS)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===BS)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===zS)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===kS)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===eq)return o=t.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===NS||s===FS)if(o=t.get("WEBGL_compressed_texture_etc"),o!==null){if(s===NS)return a===_t?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(s===FS)return a===_t?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===US||s===jS||s===VS||s===GS||s===HS||s===WS||s===qS||s===XS||s===YS||s===QS||s===ZS||s===KS||s===$S||s===JS)if(o=t.get("WEBGL_compressed_texture_astc"),o!==null){if(s===US)return a===_t?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===jS)return a===_t?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===VS)return a===_t?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===GS)return a===_t?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===HS)return a===_t?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===WS)return a===_t?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===qS)return a===_t?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===XS)return a===_t?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===YS)return a===_t?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===QS)return a===_t?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===ZS)return a===_t?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===KS)return a===_t?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===$S)return a===_t?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===JS)return a===_t?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Y4)if(o=t.get("EXT_texture_compression_bptc"),o!==null){if(s===Y4)return a===_t?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===tq||s===eM||s===tM||s===rM)if(o=t.get("EXT_texture_compression_rgtc"),o!==null){if(s===Y4)return o.COMPRESSED_RED_RGTC1_EXT;if(s===eM)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===tM)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===rM)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Ku?i?34042:(o=t.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):e[s]!==void 0?e[s]:null}return{convert:n}}var uK=class extends Wi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},Hd=class extends ir{constructor(){super(),this.isGroup=!0,this.type="Group"}},cK={type:"move"},w5=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Hd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Hd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new E,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new E),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Hd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new E,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new E),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,n=null,s=null,a=this._targetRay,o=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){s=!0;for(let f of e.hand.values()){let m=t.getJointPose(f,r),g=this._getHandJoint(l,f);m!==null&&(g.matrix.fromArray(m.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.jointRadius=m.radius),g.visible=m!==null}let h=l.joints["index-finger-tip"],c=l.joints["thumb-tip"],u=h.position.distanceTo(c.position),d=.02,p=.005;l.inputState.pinching&&u>d+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&u<=d-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else o!==null&&e.gripSpace&&(n=t.getPose(e.gripSpace,r),n!==null&&(o.matrix.fromArray(n.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),n.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(n.linearVelocity)):o.hasLinearVelocity=!1,n.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(n.angularVelocity)):o.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&n!==null&&(i=n),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(cK)))}return a!==null&&(a.visible=i!==null),o!==null&&(o.visible=n!==null),l!==null&&(l.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let r=new Hd;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}},Wp=class extends ui{constructor(e,t,r,i,n,s,a,o,l,h){if(h=h!==void 0?h:$u,h!==$u&&h!==gc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&h===$u&&(r=mh),r===void 0&&h===gc&&(r=Ku),super(null,i,n,s,a,o,h,r,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:ur,this.minFilter=o!==void 0?o:ur,this.flipY=!1,this.generateMipmaps=!1}},dK=class extends Ni{constructor(e,t){super();let r=this,i=null,n=1,s=null,a="local-floor",o=1,l=null,h=null,c=null,u=null,d=null,p=null,f=t.getContextAttributes(),m=null,g=null,v=[],y=[],x=new Set,w=new Map,_=new Wi;_.layers.enable(1),_.viewport=new Ct;let b=new Wi;b.layers.enable(2),b.viewport=new Ct;let S=[_,b],C=new uK;C.layers.enable(1),C.layers.enable(2);let M=null,A=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(V){let G=v[V];return G===void 0&&(G=new w5,v[V]=G),G.getTargetRaySpace()},this.getControllerGrip=function(V){let G=v[V];return G===void 0&&(G=new w5,v[V]=G),G.getGripSpace()},this.getHand=function(V){let G=v[V];return G===void 0&&(G=new w5,v[V]=G),G.getHandSpace()};function T(V){let G=y.indexOf(V.inputSource);if(G===-1)return;let Q=v[G];Q!==void 0&&Q.dispatchEvent({type:V.type,data:V.inputSource})}function L(){i.removeEventListener("select",T),i.removeEventListener("selectstart",T),i.removeEventListener("selectend",T),i.removeEventListener("squeeze",T),i.removeEventListener("squeezestart",T),i.removeEventListener("squeezeend",T),i.removeEventListener("end",L),i.removeEventListener("inputsourceschange",D);for(let V=0;V<v.length;V++){let G=y[V];G!==null&&(y[V]=null,v[V].disconnect(G))}M=null,A=null,e.setRenderTarget(m),d=null,u=null,c=null,i=null,g=null,P.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(V){n=V,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(V){a=V,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(V){l=V},this.getBaseLayer=function(){return u!==null?u:d},this.getBinding=function(){return c},this.getFrame=function(){return p},this.getSession=function(){return i},this.setSession=async function(V){if(i=V,i!==null){if(m=e.getRenderTarget(),i.addEventListener("select",T),i.addEventListener("selectstart",T),i.addEventListener("selectend",T),i.addEventListener("squeeze",T),i.addEventListener("squeezestart",T),i.addEventListener("squeezeend",T),i.addEventListener("end",L),i.addEventListener("inputsourceschange",D),f.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){let G={antialias:i.renderState.layers===void 0?f.antialias:!0,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:n};d=new XRWebGLLayer(i,t,G),i.updateRenderState({baseLayer:d}),g=new tr(d.framebufferWidth,d.framebufferHeight,{format:Ws,type:en,encoding:e.outputEncoding,stencilBuffer:f.stencil})}else{let G=null,Q=null,U=null;f.depth&&(U=f.stencil?35056:33190,G=f.stencil?gc:$u,Q=f.stencil?Ku:mh);let Y={colorFormat:32856,depthFormat:U,scaleFactor:n};c=new XRWebGLBinding(i,t),u=c.createProjectionLayer(Y),i.updateRenderState({layers:[u]}),g=new tr(u.textureWidth,u.textureHeight,{format:Ws,type:en,depthTexture:new Wp(u.textureWidth,u.textureHeight,Q,void 0,void 0,void 0,void 0,void 0,void 0,G),stencilBuffer:f.stencil,encoding:e.outputEncoding,samples:f.antialias?4:0});let H=e.properties.get(g);H.__ignoreDepthValues=u.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(o),l=null,s=await i.requestReferenceSpace(a),P.setContext(i),P.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function D(V){for(let G=0;G<V.removed.length;G++){let Q=V.removed[G],U=y.indexOf(Q);U>=0&&(y[U]=null,v[U].disconnect(Q))}for(let G=0;G<V.added.length;G++){let Q=V.added[G],U=y.indexOf(Q);if(U===-1){for(let H=0;H<v.length;H++)if(H>=y.length){y.push(Q),U=H;break}else if(y[H]===null){y[H]=Q,U=H;break}if(U===-1)break}let Y=v[U];Y&&Y.connect(Q)}}let O=new E,z=new E;function q(V,G,Q){O.setFromMatrixPosition(G.matrixWorld),z.setFromMatrixPosition(Q.matrixWorld);let U=O.distanceTo(z),Y=G.projectionMatrix.elements,H=Q.projectionMatrix.elements,ie=Y[14]/(Y[10]-1),J=Y[14]/(Y[10]+1),ee=(Y[9]+1)/Y[5],ne=(Y[9]-1)/Y[5],he=(Y[8]-1)/Y[0],ge=(H[8]+1)/H[0],ce=ie*he,Le=ie*ge,_e=U/(-he+ge),ze=_e*-he;G.matrixWorld.decompose(V.position,V.quaternion,V.scale),V.translateX(ze),V.translateZ(_e),V.matrixWorld.compose(V.position,V.quaternion,V.scale),V.matrixWorldInverse.copy(V.matrixWorld).invert();let K=ie+_e,Ce=J+_e,Me=ce-ze,Ge=Le+(U-ze),ke=ee*J/Ce*K,F=ne*J/Ce*K;V.projectionMatrix.makePerspective(Me,Ge,ke,F,K,Ce)}function N(V,G){G===null?V.matrixWorld.copy(V.matrix):V.matrixWorld.multiplyMatrices(G.matrixWorld,V.matrix),V.matrixWorldInverse.copy(V.matrixWorld).invert()}this.updateCamera=function(V){if(i===null)return;C.near=b.near=_.near=V.near,C.far=b.far=_.far=V.far,(M!==C.near||A!==C.far)&&(i.updateRenderState({depthNear:C.near,depthFar:C.far}),M=C.near,A=C.far);let G=V.parent,Q=C.cameras;N(C,G);for(let Y=0;Y<Q.length;Y++)N(Q[Y],G);C.matrixWorld.decompose(C.position,C.quaternion,C.scale),V.matrix.copy(C.matrix),V.matrix.decompose(V.position,V.quaternion,V.scale);let U=V.children;for(let Y=0,H=U.length;Y<H;Y++)U[Y].updateMatrixWorld(!0);Q.length===2?q(C,_,b):C.projectionMatrix.copy(_.projectionMatrix)},this.getCamera=function(){return C},this.getFoveation=function(){if(!(u===null&&d===null))return o},this.setFoveation=function(V){o=V,u!==null&&(u.fixedFoveation=V),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=V)},this.getPlanes=function(){return x};let I=null;function W(V,G){if(h=G.getViewerPose(l||s),p=G,h!==null){let Q=h.views;d!==null&&(e.setRenderTargetFramebuffer(g,d.framebuffer),e.setRenderTarget(g));let U=!1;Q.length!==C.cameras.length&&(C.cameras.length=0,U=!0);for(let Y=0;Y<Q.length;Y++){let H=Q[Y],ie=null;if(d!==null)ie=d.getViewport(H);else{let ee=c.getViewSubImage(u,H);ie=ee.viewport,Y===0&&(e.setRenderTargetTextures(g,ee.colorTexture,u.ignoreDepthValues?void 0:ee.depthStencilTexture),e.setRenderTarget(g))}let J=S[Y];J===void 0&&(J=new Wi,J.layers.enable(Y),J.viewport=new Ct,S[Y]=J),J.matrix.fromArray(H.transform.matrix),J.projectionMatrix.fromArray(H.projectionMatrix),J.viewport.set(ie.x,ie.y,ie.width,ie.height),Y===0&&C.matrix.copy(J.matrix),U===!0&&C.cameras.push(J)}}for(let Q=0;Q<v.length;Q++){let U=y[Q],Y=v[Q];U!==null&&Y!==void 0&&Y.update(U,G,l||s)}if(I&&I(V,G),G.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:G.detectedPlanes});let Q=null;for(let U of x)G.detectedPlanes.has(U)||(Q===null&&(Q=[]),Q.push(U));if(Q!==null)for(let U of Q)x.delete(U),w.delete(U),r.dispatchEvent({type:"planeremoved",data:U});for(let U of G.detectedPlanes)if(!x.has(U))x.add(U),w.set(U,G.lastChangedTime),r.dispatchEvent({type:"planeadded",data:U});else{let Y=w.get(U);U.lastChangedTime>Y&&(w.set(U,U.lastChangedTime),r.dispatchEvent({type:"planechanged",data:U}))}}p=null}let P=new CR;P.setAnimationLoop(W),this.setAnimationLoop=function(V){I=V},this.dispose=function(){}}};function pK(e,t){function r(m,g){g.color.getRGB(m.fogColor.value,_R(e)),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)}function i(m,g,v,y,x){g.isMeshBasicMaterial||g.isMeshLambertMaterial?n(m,g):g.isMeshToonMaterial?(n(m,g),c(m,g)):g.isMeshPhongMaterial?(n(m,g),h(m,g)):g.isMeshStandardMaterial?(n(m,g),u(m,g),g.isMeshPhysicalMaterial&&d(m,g,x)):g.isMeshMatcapMaterial?(n(m,g),p(m,g)):g.isMeshDepthMaterial?n(m,g):g.isMeshDistanceMaterial?(n(m,g),f(m,g)):g.isMeshNormalMaterial?n(m,g):g.isLineBasicMaterial?(s(m,g),g.isLineDashedMaterial&&a(m,g)):g.isPointsMaterial?o(m,g,v,y):g.isSpriteMaterial?l(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function n(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,g.side===_i&&(m.bumpScale.value*=-1)),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),g.side===_i&&m.normalScale.value.negate()),g.specularMap&&(m.specularMap.value=g.specularMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let v=t.get(g).envMap;if(v&&(m.envMap.value=v,m.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;let w=e.physicallyCorrectLights!==!0?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*w}g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity);let y;g.map?y=g.map:g.specularMap?y=g.specularMap:g.displacementMap?y=g.displacementMap:g.normalMap?y=g.normalMap:g.bumpMap?y=g.bumpMap:g.roughnessMap?y=g.roughnessMap:g.metalnessMap?y=g.metalnessMap:g.alphaMap?y=g.alphaMap:g.emissiveMap?y=g.emissiveMap:g.clearcoatMap?y=g.clearcoatMap:g.clearcoatNormalMap?y=g.clearcoatNormalMap:g.clearcoatRoughnessMap?y=g.clearcoatRoughnessMap:g.iridescenceMap?y=g.iridescenceMap:g.iridescenceThicknessMap?y=g.iridescenceThicknessMap:g.specularIntensityMap?y=g.specularIntensityMap:g.specularColorMap?y=g.specularColorMap:g.transmissionMap?y=g.transmissionMap:g.thicknessMap?y=g.thicknessMap:g.sheenColorMap?y=g.sheenColorMap:g.sheenRoughnessMap&&(y=g.sheenRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix));let x;g.aoMap?x=g.aoMap:g.lightMap&&(x=g.lightMap),x!==void 0&&(x.isWebGLRenderTarget&&(x=x.texture),x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uv2Transform.value.copy(x.matrix))}function s(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity}function a(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}function o(m,g,v,y){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*v,m.scale.value=y*.5,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let x;g.map?x=g.map:g.alphaMap&&(x=g.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uvTransform.value.copy(x.matrix))}function l(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let v;g.map?v=g.map:g.alphaMap&&(v=g.alphaMap),v!==void 0&&(v.matrixAutoUpdate===!0&&v.updateMatrix(),m.uvTransform.value.copy(v.matrix))}function h(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}function c(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}function u(m,g){m.roughness.value=g.roughness,m.metalness.value=g.metalness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap),t.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}function d(m,g,v){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),m.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===_i&&m.clearcoatNormalScale.value.negate())),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=v.texture,m.transmissionSamplerSize.value.set(v.width,v.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap)}function p(m,g){g.matcap&&(m.matcap.value=g.matcap)}function f(m,g){m.referencePosition.value.copy(g.referencePosition),m.nearDistance.value=g.nearDistance,m.farDistance.value=g.farDistance}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function fK(e,t,r,i){let n={},s={},a=[],o=r.isWebGL2?e.getParameter(35375):0;function l(y,x){let w=x.program;i.uniformBlockBinding(y,w)}function h(y,x){let w=n[y.id];w===void 0&&(f(y),w=c(y),n[y.id]=w,y.addEventListener("dispose",g));let _=x.program;i.updateUBOMapping(y,_);let b=t.render.frame;s[y.id]!==b&&(d(y),s[y.id]=b)}function c(y){let x=u();y.__bindingPointIndex=x;let w=e.createBuffer(),_=y.__size,b=y.usage;return e.bindBuffer(35345,w),e.bufferData(35345,_,b),e.bindBuffer(35345,null),e.bindBufferBase(35345,x,w),w}function u(){for(let y=0;y<o;y++)if(a.indexOf(y)===-1)return a.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(y){let x=n[y.id],w=y.uniforms,_=y.__cache;e.bindBuffer(35345,x);for(let b=0,S=w.length;b<S;b++){let C=w[b];if(p(C,b,_)===!0){let M=C.__offset,A=Array.isArray(C.value)?C.value:[C.value],T=0;for(let L=0;L<A.length;L++){let D=A[L],O=m(D);typeof D=="number"?(C.__data[0]=D,e.bufferSubData(35345,M+T,C.__data)):D.isMatrix3?(C.__data[0]=D.elements[0],C.__data[1]=D.elements[1],C.__data[2]=D.elements[2],C.__data[3]=D.elements[0],C.__data[4]=D.elements[3],C.__data[5]=D.elements[4],C.__data[6]=D.elements[5],C.__data[7]=D.elements[0],C.__data[8]=D.elements[6],C.__data[9]=D.elements[7],C.__data[10]=D.elements[8],C.__data[11]=D.elements[0]):(D.toArray(C.__data,T),T+=O.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,M,C.__data)}}e.bindBuffer(35345,null)}function p(y,x,w){let _=y.value;if(w[x]===void 0){if(typeof _=="number")w[x]=_;else{let b=Array.isArray(_)?_:[_],S=[];for(let C=0;C<b.length;C++)S.push(b[C].clone());w[x]=S}return!0}else if(typeof _=="number"){if(w[x]!==_)return w[x]=_,!0}else{let b=Array.isArray(w[x])?w[x]:[w[x]],S=Array.isArray(_)?_:[_];for(let C=0;C<b.length;C++){let M=b[C];if(M.equals(S[C])===!1)return M.copy(S[C]),!0}}return!1}function f(y){let x=y.uniforms,w=0,_=16,b=0;for(let S=0,C=x.length;S<C;S++){let M=x[S],A={boundary:0,storage:0},T=Array.isArray(M.value)?M.value:[M.value];for(let L=0,D=T.length;L<D;L++){let O=T[L],z=m(O);A.boundary+=z.boundary,A.storage+=z.storage}if(M.__data=new Float32Array(A.storage/Float32Array.BYTES_PER_ELEMENT),M.__offset=w,S>0){b=w%_;let L=_-b;b!==0&&L-A.boundary<0&&(w+=_-b,M.__offset=w)}w+=A.storage}return b=w%_,b>0&&(w+=_-b),y.__size=w,y.__cache={},this}function m(y){let x={boundary:0,storage:0};return typeof y=="number"?(x.boundary=4,x.storage=4):y.isVector2?(x.boundary=8,x.storage=8):y.isVector3||y.isColor?(x.boundary=16,x.storage=12):y.isVector4?(x.boundary=16,x.storage=16):y.isMatrix3?(x.boundary=48,x.storage=48):y.isMatrix4?(x.boundary=64,x.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),x}function g(y){let x=y.target;x.removeEventListener("dispose",g);let w=a.indexOf(x.__bindingPointIndex);a.splice(w,1),e.deleteBuffer(n[x.id]),delete n[x.id],delete s[x.id]}function v(){for(let y in n)e.deleteBuffer(n[y]);a=[],n={},s={}}return{bind:l,update:h,dispose:v}}function mK(){let e=h3("canvas");return e.style.display="block",e}function LR(e={}){this.isWebGLRenderer=!0;let t=e.canvas!==void 0?e.canvas:mK(),r=e.context!==void 0?e.context:null,i=e.depth!==void 0?e.depth:!0,n=e.stencil!==void 0?e.stencil:!0,s=e.antialias!==void 0?e.antialias:!1,a=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,o=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,l=e.powerPreference!==void 0?e.powerPreference:"default",h=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1,c;r!==null?c=r.getContextAttributes().alpha:c=e.alpha!==void 0?e.alpha:!1;let u=null,d=null,p=[],f=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Mo,this.physicallyCorrectLights=!1,this.toneMapping=wl,this.toneMappingExposure=1;let m=this,g=!1,v=0,y=0,x=null,w=-1,_=null,b=new Ct,S=new Ct,C=null,M=t.width,A=t.height,T=1,L=null,D=null,O=new Ct(0,0,M,A),z=new Ct(0,0,M,A),q=!1,N=new Bw,I=!1,W=!1,P=null,V=new Ae,G=new X,Q=new E,U={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Y(){return x===null?T:1}let H=r;function ie(k,re){for(let de=0;de<k.length;de++){let Z=k[de],ue=t.getContext(Z,re);if(ue!==null)return ue}return null}try{let k={alpha:!0,depth:i,stencil:n,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:o,powerPreference:l,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${uf}`),t.addEventListener("webglcontextlost",$,!1),t.addEventListener("webglcontextrestored",te,!1),t.addEventListener("webglcontextcreationerror",ve,!1),H===null){let re=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&re.shift(),H=ie(re,k),H===null)throw ie(re)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}H.getShaderPrecisionFormat===void 0&&(H.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(k){throw console.error("THREE.WebGLRenderer: "+k.message),k}let J,ee,ne,he,ge,ce,Le,_e,ze,K,Ce,Me,Ge,ke,F,B,le,xe,ye,Ee,Ue,Ne,fe,je;function Fe(){J=new TQ(H),ee=new _Q(H,J,e),J.init(ee),Ne=new hK(H,J,ee),ne=new oK(H,J,ee),he=new DQ,ge=new YZ,ce=new lK(H,J,ne,ge,ee,Ne,he),Le=new SQ(m),_e=new EQ(m),ze=new Uq(H,ee),fe=new wQ(H,J,ze,ee),K=new LQ(H,ze,he,fe),Ce=new BQ(H,K,ze,he),ye=new RQ(H,ee,ce),B=new CQ(ge),Me=new XZ(m,Le,_e,J,ee,fe,B),Ge=new pK(m,ge),ke=new ZZ,F=new rK(J,ee),xe=new xQ(m,Le,_e,ne,Ce,c,a),le=new aK(m,Ce,ee),je=new fK(H,he,ee,ne),Ee=new bQ(H,J,he,ee),Ue=new PQ(H,J,he,ee),he.programs=Me.programs,m.capabilities=ee,m.extensions=J,m.properties=ge,m.renderLists=ke,m.shadowMap=le,m.state=ne,m.info=he}Fe();let Qe=new dK(m,H);this.xr=Qe,this.getContext=function(){return H},this.getContextAttributes=function(){return H.getContextAttributes()},this.forceContextLoss=function(){let k=J.get("WEBGL_lose_context");k&&k.loseContext()},this.forceContextRestore=function(){let k=J.get("WEBGL_lose_context");k&&k.restoreContext()},this.getPixelRatio=function(){return T},this.setPixelRatio=function(k){k!==void 0&&(T=k,this.setSize(M,A,!1))},this.getSize=function(k){return k.set(M,A)},this.setSize=function(k,re,de){if(Qe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}M=k,A=re,t.width=Math.floor(k*T),t.height=Math.floor(re*T),de!==!1&&(t.style.width=k+"px",t.style.height=re+"px"),this.setViewport(0,0,k,re)},this.getDrawingBufferSize=function(k){return k.set(M*T,A*T).floor()},this.setDrawingBufferSize=function(k,re,de){M=k,A=re,T=de,t.width=Math.floor(k*de),t.height=Math.floor(re*de),this.setViewport(0,0,k,re)},this.getCurrentViewport=function(k){return k.copy(b)},this.getViewport=function(k){return k.copy(O)},this.setViewport=function(k,re,de,Z){k.isVector4?O.set(k.x,k.y,k.z,k.w):O.set(k,re,de,Z),ne.viewport(b.copy(O).multiplyScalar(T).floor())},this.getScissor=function(k){return k.copy(z)},this.setScissor=function(k,re,de,Z){k.isVector4?z.set(k.x,k.y,k.z,k.w):z.set(k,re,de,Z),ne.scissor(S.copy(z).multiplyScalar(T).floor())},this.getScissorTest=function(){return q},this.setScissorTest=function(k){ne.setScissorTest(q=k)},this.setOpaqueSort=function(k){L=k},this.setTransparentSort=function(k){D=k},this.getClearColor=function(k){return k.copy(xe.getClearColor())},this.setClearColor=function(){xe.setClearColor.apply(xe,arguments)},this.getClearAlpha=function(){return xe.getClearAlpha()},this.setClearAlpha=function(){xe.setClearAlpha.apply(xe,arguments)},this.clear=function(k=!0,re=!0,de=!0){let Z=0;k&&(Z|=16384),re&&(Z|=256),de&&(Z|=1024),H.clear(Z)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",$,!1),t.removeEventListener("webglcontextrestored",te,!1),t.removeEventListener("webglcontextcreationerror",ve,!1),ke.dispose(),F.dispose(),ge.dispose(),Le.dispose(),_e.dispose(),Ce.dispose(),fe.dispose(),je.dispose(),Me.dispose(),Qe.dispose(),Qe.removeEventListener("sessionstart",me),Qe.removeEventListener("sessionend",Oe),P&&(P.dispose(),P=null),tt.stop()};function $(k){k.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function te(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;let k=he.autoReset,re=le.enabled,de=le.autoUpdate,Z=le.needsUpdate,ue=le.type;Fe(),he.autoReset=k,le.enabled=re,le.autoUpdate=de,le.needsUpdate=Z,le.type=ue}function ve(k){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",k.statusMessage)}function Te(k){let re=k.target;re.removeEventListener("dispose",Te),He(re)}function He(k){j(k),ge.remove(k)}function j(k){let re=ge.get(k).programs;re!==void 0&&(re.forEach(function(de){Me.releaseProgram(de)}),k.isShaderMaterial&&Me.releaseShaderCache(k))}this.renderBufferDirect=function(k,re,de,Z,ue,De){re===null&&(re=U);let Ve=ue.isMesh&&ue.matrixWorld.determinant()<0,Ye=yt(k,re,de,Z,ue);ne.setMaterial(Z,Ve);let $e=de.index,Mt=1;Z.wireframe===!0&&($e=K.getWireframeAttribute(de),Mt=2);let wt=de.drawRange,vt=de.attributes.position,Wt=wt.start*Mt,Zt=(wt.start+wt.count)*Mt;De!==null&&(Wt=Math.max(Wt,De.start*Mt),Zt=Math.min(Zt,(De.start+De.count)*Mt)),$e!==null?(Wt=Math.max(Wt,0),Zt=Math.min(Zt,$e.count)):vt!=null&&(Wt=Math.max(Wt,0),Zt=Math.min(Zt,vt.count));let Ti=Zt-Wt;if(Ti<0||Ti===1/0)return;fe.setup(ue,Z,Ye,de,$e);let As,zt=Ee;if($e!==null&&(As=ze.get($e),zt=Ue,zt.setIndex(As)),ue.isMesh)Z.wireframe===!0?(ne.setLineWidth(Z.wireframeLinewidth*Y()),zt.setMode(1)):zt.setMode(4);else if(ue.isLine){let st=Z.linewidth;st===void 0&&(st=1),ne.setLineWidth(st*Y()),ue.isLineSegments?zt.setMode(1):ue.isLineLoop?zt.setMode(2):zt.setMode(3)}else ue.isPoints?zt.setMode(0):ue.isSprite&&zt.setMode(4);if(ue.isInstancedMesh)zt.renderInstances(Wt,Ti,ue.count);else if(de.isInstancedBufferGeometry){let st=de._maxInstanceCount!==void 0?de._maxInstanceCount:1/0,En=Math.min(de.instanceCount,st);zt.renderInstances(Wt,Ti,En)}else zt.render(Wt,Ti)},this.compile=function(k,re){function de(Z,ue,De){Z.transparent===!0&&Z.side===ps&&Z.forceSinglePass===!1?(Z.side=_i,Z.needsUpdate=!0,Pt(Z,ue,De),Z.side=za,Z.needsUpdate=!0,Pt(Z,ue,De),Z.side=ps):Pt(Z,ue,De)}d=F.get(k),d.init(),f.push(d),k.traverseVisible(function(Z){Z.isLight&&Z.layers.test(re.layers)&&(d.pushLight(Z),Z.castShadow&&d.pushShadow(Z))}),d.setupLights(m.physicallyCorrectLights),k.traverse(function(Z){let ue=Z.material;if(ue)if(Array.isArray(ue))for(let De=0;De<ue.length;De++){let Ve=ue[De];de(Ve,k,Z)}else de(ue,k,Z)}),f.pop(),d=null};let se=null;function ae(k){se&&se(k)}function me(){tt.stop()}function Oe(){tt.start()}let tt=new CR;tt.setAnimationLoop(ae),typeof self<"u"&&tt.setContext(self),this.setAnimationLoop=function(k){se=k,Qe.setAnimationLoop(k),k===null?tt.stop():tt.start()},Qe.addEventListener("sessionstart",me),Qe.addEventListener("sessionend",Oe),this.render=function(k,re){if(re!==void 0&&re.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g===!0)return;k.matrixWorldAutoUpdate===!0&&k.updateMatrixWorld(),re.parent===null&&re.matrixWorldAutoUpdate===!0&&re.updateMatrixWorld(),Qe.enabled===!0&&Qe.isPresenting===!0&&(Qe.cameraAutoUpdate===!0&&Qe.updateCamera(re),re=Qe.getCamera()),k.isScene===!0&&k.onBeforeRender(m,k,re,x),d=F.get(k,f.length),d.init(),f.push(d),V.multiplyMatrices(re.projectionMatrix,re.matrixWorldInverse),N.setFromProjectionMatrix(V),W=this.localClippingEnabled,I=B.init(this.clippingPlanes,W),u=ke.get(k,p.length),u.init(),p.push(u),nt(k,re,0,m.sortObjects),u.finish(),m.sortObjects===!0&&u.sort(L,D),I===!0&&B.beginShadows();let de=d.state.shadowsArray;if(le.render(de,k,re),I===!0&&B.endShadows(),this.info.autoReset===!0&&this.info.reset(),xe.render(u,k),d.setupLights(m.physicallyCorrectLights),re.isArrayCamera){let Z=re.cameras;for(let ue=0,De=Z.length;ue<De;ue++){let Ve=Z[ue];gt(u,k,Ve,Ve.viewport)}}else gt(u,k,re);x!==null&&(ce.updateMultisampleRenderTarget(x),ce.updateRenderTargetMipmap(x)),k.isScene===!0&&k.onAfterRender(m,k,re),fe.resetDefaultState(),w=-1,_=null,f.pop(),f.length>0?d=f[f.length-1]:d=null,p.pop(),p.length>0?u=p[p.length-1]:u=null};function nt(k,re,de,Z){if(k.visible===!1)return;if(k.layers.test(re.layers)){if(k.isGroup)de=k.renderOrder;else if(k.isLOD)k.autoUpdate===!0&&k.update(re);else if(k.isLight)d.pushLight(k),k.castShadow&&d.pushShadow(k);else if(k.isSprite){if(!k.frustumCulled||N.intersectsSprite(k)){Z&&Q.setFromMatrixPosition(k.matrixWorld).applyMatrix4(V);let De=Ce.update(k),Ve=k.material;Ve.visible&&u.push(k,De,Ve,de,Q.z,null)}}else if((k.isMesh||k.isLine||k.isPoints)&&(k.isSkinnedMesh&&k.skeleton.frame!==he.render.frame&&(k.skeleton.update(),k.skeleton.frame=he.render.frame),!k.frustumCulled||N.intersectsObject(k))){Z&&Q.setFromMatrixPosition(k.matrixWorld).applyMatrix4(V);let De=Ce.update(k),Ve=k.material;if(Array.isArray(Ve)){let Ye=De.groups;for(let $e=0,Mt=Ye.length;$e<Mt;$e++){let wt=Ye[$e],vt=Ve[wt.materialIndex];vt&&vt.visible&&u.push(k,De,vt,de,Q.z,wt)}}else Ve.visible&&u.push(k,De,Ve,de,Q.z,null)}}let ue=k.children;for(let De=0,Ve=ue.length;De<Ve;De++)nt(ue[De],re,de,Z)}function gt(k,re,de,Z){let ue=k.opaque,De=k.transmissive,Ve=k.transparent;d.setupLightsView(de),I===!0&&B.setGlobalState(m.clippingPlanes,de),De.length>0&&Ze(ue,re,de),Z&&ne.viewport(b.copy(Z)),ue.length>0&&Re(ue,re,de),De.length>0&&Re(De,re,de),Ve.length>0&&Re(Ve,re,de),ne.buffers.depth.setTest(!0),ne.buffers.depth.setMask(!0),ne.buffers.color.setMask(!0),ne.setPolygonOffset(!1)}function Ze(k,re,de){let Z=ee.isWebGL2;P===null&&(P=new tr(1,1,{generateMipmaps:!0,type:J.has("EXT_color_buffer_half_float")?Gp:en,minFilter:Vp,samples:Z&&s===!0?4:0})),m.getDrawingBufferSize(G),Z?P.setSize(G.x,G.y):P.setSize(l3(G.x),l3(G.y));let ue=m.getRenderTarget();m.setRenderTarget(P),m.clear();let De=m.toneMapping;m.toneMapping=wl,Re(k,re,de),m.toneMapping=De,ce.updateMultisampleRenderTarget(P),ce.updateRenderTargetMipmap(P),m.setRenderTarget(ue)}function Re(k,re,de){let Z=re.isScene===!0?re.overrideMaterial:null;for(let ue=0,De=k.length;ue<De;ue++){let Ve=k[ue],Ye=Ve.object,$e=Ve.geometry,Mt=Z===null?Ve.material:Z,wt=Ve.group;Ye.layers.test(de.layers)&&mt(Ye,re,de,$e,Mt,wt)}}function mt(k,re,de,Z,ue,De){k.onBeforeRender(m,re,de,Z,ue,De),k.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,k.matrixWorld),k.normalMatrix.getNormalMatrix(k.modelViewMatrix),ue.onBeforeRender(m,re,de,Z,k,De),ue.transparent===!0&&ue.side===ps&&ue.forceSinglePass===!1?(ue.side=_i,ue.needsUpdate=!0,m.renderBufferDirect(de,re,Z,ue,k,De),ue.side=za,ue.needsUpdate=!0,m.renderBufferDirect(de,re,Z,ue,k,De),ue.side=ps):m.renderBufferDirect(de,re,Z,ue,k,De),k.onAfterRender(m,re,de,Z,ue,De)}function Pt(k,re,de){re.isScene!==!0&&(re=U);let Z=ge.get(k),ue=d.state.lights,De=d.state.shadowsArray,Ve=ue.state.version,Ye=Me.getParameters(k,ue.state,De,re,de),$e=Me.getProgramCacheKey(Ye),Mt=Z.programs;Z.environment=k.isMeshStandardMaterial?re.environment:null,Z.fog=re.fog,Z.envMap=(k.isMeshStandardMaterial?_e:Le).get(k.envMap||Z.environment),Mt===void 0&&(k.addEventListener("dispose",Te),Mt=new Map,Z.programs=Mt);let wt=Mt.get($e);if(wt!==void 0){if(Z.currentProgram===wt&&Z.lightsStateVersion===Ve)return We(k,Ye),wt}else Ye.uniforms=Me.getUniforms(k),k.onBuild(de,Ye,m),k.onBeforeCompile(Ye,m),wt=Me.acquireProgram(Ye,$e),Mt.set($e,wt),Z.uniforms=Ye.uniforms;let vt=Z.uniforms;(!k.isShaderMaterial&&!k.isRawShaderMaterial||k.clipping===!0)&&(vt.clippingPlanes=B.uniform),We(k,Ye),Z.needsLights=St(k),Z.lightsStateVersion=Ve,Z.needsLights&&(vt.ambientLightColor.value=ue.state.ambient,vt.lightProbe.value=ue.state.probe,vt.directionalLights.value=ue.state.directional,vt.directionalLightShadows.value=ue.state.directionalShadow,vt.spotLights.value=ue.state.spot,vt.spotLightShadows.value=ue.state.spotShadow,vt.rectAreaLights.value=ue.state.rectArea,vt.ltc_1.value=ue.state.rectAreaLTC1,vt.ltc_2.value=ue.state.rectAreaLTC2,vt.pointLights.value=ue.state.point,vt.pointLightShadows.value=ue.state.pointShadow,vt.hemisphereLights.value=ue.state.hemi,vt.directionalShadowMap.value=ue.state.directionalShadowMap,vt.directionalShadowMatrix.value=ue.state.directionalShadowMatrix,vt.spotShadowMap.value=ue.state.spotShadowMap,vt.spotLightMatrix.value=ue.state.spotLightMatrix,vt.spotLightMap.value=ue.state.spotLightMap,vt.pointShadowMap.value=ue.state.pointShadowMap,vt.pointShadowMatrix.value=ue.state.pointShadowMatrix);let Wt=wt.getUniforms(),Zt=a2.seqWithValue(Wt.seq,vt);return Z.currentProgram=wt,Z.uniformsList=Zt,wt}function We(k,re){let de=ge.get(k);de.outputEncoding=re.outputEncoding,de.instancing=re.instancing,de.skinning=re.skinning,de.morphTargets=re.morphTargets,de.morphNormals=re.morphNormals,de.morphColors=re.morphColors,de.morphTargetsCount=re.morphTargetsCount,de.numClippingPlanes=re.numClippingPlanes,de.numIntersection=re.numClipIntersection,de.vertexAlphas=re.vertexAlphas,de.vertexTangents=re.vertexTangents,de.toneMapping=re.toneMapping}function yt(k,re,de,Z,ue){re.isScene!==!0&&(re=U),ce.resetTextureUnits();let De=re.fog,Ve=Z.isMeshStandardMaterial?re.environment:null,Ye=x===null?m.outputEncoding:x.isXRRenderTarget===!0?x.texture.encoding:Mo,$e=(Z.isMeshStandardMaterial?_e:Le).get(Z.envMap||Ve),Mt=Z.vertexColors===!0&&!!de.attributes.color&&de.attributes.color.itemSize===4,wt=!!Z.normalMap&&!!de.attributes.tangent,vt=!!de.morphAttributes.position,Wt=!!de.morphAttributes.normal,Zt=!!de.morphAttributes.color,Ti=Z.toneMapped?m.toneMapping:wl,As=de.morphAttributes.position||de.morphAttributes.normal||de.morphAttributes.color,zt=As!==void 0?As.length:0,st=ge.get(Z),En=d.state.lights;if(I===!0&&(W===!0||k!==_)){let Jn=k===_&&Z.id===w;B.setState(Z,k,Jn)}let iu=!1;Z.version===st.__version?(st.needsLights&&st.lightsStateVersion!==En.state.version||st.outputEncoding!==Ye||ue.isInstancedMesh&&st.instancing===!1||!ue.isInstancedMesh&&st.instancing===!0||ue.isSkinnedMesh&&st.skinning===!1||!ue.isSkinnedMesh&&st.skinning===!0||st.envMap!==$e||Z.fog===!0&&st.fog!==De||st.numClippingPlanes!==void 0&&(st.numClippingPlanes!==B.numPlanes||st.numIntersection!==B.numIntersection)||st.vertexAlphas!==Mt||st.vertexTangents!==wt||st.morphTargets!==vt||st.morphNormals!==Wt||st.morphColors!==Zt||st.toneMapping!==Ti||ee.isWebGL2===!0&&st.morphTargetsCount!==zt)&&(iu=!0):(iu=!0,st.__version=Z.version);let Ua=st.currentProgram;iu===!0&&(Ua=Pt(Z,re,ue));let kl=!1,Fi=!1,Ro=!1,Tr=Ua.getUniforms(),$n=st.uniforms;if(ne.useProgram(Ua.program)&&(kl=!0,Fi=!0,Ro=!0),Z.id!==w&&(w=Z.id,Fi=!0),kl||_!==k){if(Tr.setValue(H,"projectionMatrix",k.projectionMatrix),ee.logarithmicDepthBuffer&&Tr.setValue(H,"logDepthBufFC",2/(Math.log(k.far+1)/Math.LN2)),_!==k&&(_=k,Fi=!0,Ro=!0),Z.isShaderMaterial||Z.isMeshPhongMaterial||Z.isMeshToonMaterial||Z.isMeshStandardMaterial||Z.envMap){let Jn=Tr.map.cameraPosition;Jn!==void 0&&Jn.setValue(H,Q.setFromMatrixPosition(k.matrixWorld))}(Z.isMeshPhongMaterial||Z.isMeshToonMaterial||Z.isMeshLambertMaterial||Z.isMeshBasicMaterial||Z.isMeshStandardMaterial||Z.isShaderMaterial)&&Tr.setValue(H,"isOrthographic",k.isOrthographicCamera===!0),(Z.isMeshPhongMaterial||Z.isMeshToonMaterial||Z.isMeshLambertMaterial||Z.isMeshBasicMaterial||Z.isMeshStandardMaterial||Z.isShaderMaterial||Z.isShadowMaterial||ue.isSkinnedMesh)&&Tr.setValue(H,"viewMatrix",k.matrixWorldInverse)}if(ue.isSkinnedMesh){Tr.setOptional(H,ue,"bindMatrix"),Tr.setOptional(H,ue,"bindMatrixInverse");let Jn=ue.skeleton;Jn&&(ee.floatVertexTextures?(Jn.boneTexture===null&&Jn.computeBoneTexture(),Tr.setValue(H,"boneTexture",Jn.boneTexture,ce),Tr.setValue(H,"boneTextureSize",Jn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let Xy=de.morphAttributes;if((Xy.position!==void 0||Xy.normal!==void 0||Xy.color!==void 0&&ee.isWebGL2===!0)&&ye.update(ue,de,Z,Ua),(Fi||st.receiveShadow!==ue.receiveShadow)&&(st.receiveShadow=ue.receiveShadow,Tr.setValue(H,"receiveShadow",ue.receiveShadow)),Z.isMeshGouraudMaterial&&Z.envMap!==null&&($n.envMap.value=$e,$n.flipEnvMap.value=$e.isCubeTexture&&$e.isRenderTargetTexture===!1?-1:1),Fi&&(Tr.setValue(H,"toneMappingExposure",m.toneMappingExposure),st.needsLights&&rt($n,Ro),De&&Z.fog===!0&&Ge.refreshFogUniforms($n,De),Ge.refreshMaterialUniforms($n,Z,T,A,P),a2.upload(H,st.uniformsList,$n,ce)),Z.isShaderMaterial&&Z.uniformsNeedUpdate===!0&&(a2.upload(H,st.uniformsList,$n,ce),Z.uniformsNeedUpdate=!1),Z.isSpriteMaterial&&Tr.setValue(H,"center",ue.center),Tr.setValue(H,"modelViewMatrix",ue.modelViewMatrix),Tr.setValue(H,"normalMatrix",ue.normalMatrix),Tr.setValue(H,"modelMatrix",ue.matrixWorld),ue.previousModelViewMatrix&&Tr.setValue(H,"previousModelViewMatrix",ue.previousModelViewMatrix),k.previousProjectionMatrix&&Tr.setValue(H,"previousProjectionMatrix",k.previousProjectionMatrix),Z.isShaderMaterial||Z.isRawShaderMaterial){let Jn=Z.uniformsGroups;for(let Yy=0,TN=Jn.length;Yy<TN;Yy++)if(ee.isWebGL2){let h_=Jn[Yy];je.update(h_,Ua),je.bind(h_,Ua)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ua}function rt(k,re){k.ambientLightColor.needsUpdate=re,k.lightProbe.needsUpdate=re,k.directionalLights.needsUpdate=re,k.directionalLightShadows.needsUpdate=re,k.pointLights.needsUpdate=re,k.pointLightShadows.needsUpdate=re,k.spotLights.needsUpdate=re,k.spotLightShadows.needsUpdate=re,k.rectAreaLights.needsUpdate=re,k.hemisphereLights.needsUpdate=re}function St(k){return k.isMeshLambertMaterial||k.isMeshToonMaterial||k.isMeshPhongMaterial||k.isMeshStandardMaterial||k.isShadowMaterial||k.isShaderMaterial&&k.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(k,re,de){ge.get(k.texture).__webglTexture=re,ge.get(k.depthTexture).__webglTexture=de;let Z=ge.get(k);Z.__hasExternalTextures=!0,Z.__hasExternalTextures&&(Z.__autoAllocateDepthBuffer=de===void 0,Z.__autoAllocateDepthBuffer||J.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Z.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(k,re){let de=ge.get(k);de.__webglFramebuffer=re,de.__useDefaultFramebuffer=re===void 0},this.setRenderTarget=function(k,re=0,de=0){x=k,v=re,y=de;let Z=!0,ue=null,De=!1,Ve=!1;if(k){let Ye=ge.get(k);Ye.__useDefaultFramebuffer!==void 0?(ne.bindFramebuffer(36160,null),Z=!1):Ye.__webglFramebuffer===void 0?ce.setupRenderTarget(k):Ye.__hasExternalTextures&&ce.rebindTextures(k,ge.get(k.texture).__webglTexture,ge.get(k.depthTexture).__webglTexture);let $e=k.texture;($e.isData3DTexture||$e.isDataArrayTexture||$e.isCompressedArrayTexture)&&(Ve=!0);let Mt=ge.get(k).__webglFramebuffer;k.isWebGLCubeRenderTarget?(ue=Mt[re],De=!0):ee.isWebGL2&&k.samples>0&&ce.useMultisampledRTT(k)===!1?ue=ge.get(k).__webglMultisampledFramebuffer:ue=Mt,b.copy(k.viewport),S.copy(k.scissor),C=k.scissorTest}else b.copy(O).multiplyScalar(T).floor(),S.copy(z).multiplyScalar(T).floor(),C=q;if(ne.bindFramebuffer(36160,ue)&&ee.drawBuffers&&Z&&ne.drawBuffers(k,ue),ne.viewport(b),ne.scissor(S),ne.setScissorTest(C),De){let Ye=ge.get(k.texture);H.framebufferTexture2D(36160,36064,34069+re,Ye.__webglTexture,de)}else if(Ve){let Ye=ge.get(k.texture),$e=re||0;H.framebufferTextureLayer(36160,36064,Ye.__webglTexture,de||0,$e)}w=-1},this.readRenderTargetPixels=function(k,re,de,Z,ue,De,Ve){if(!(k&&k.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ye=ge.get(k).__webglFramebuffer;if(k.isWebGLCubeRenderTarget&&Ve!==void 0&&(Ye=Ye[Ve]),Ye){ne.bindFramebuffer(36160,Ye);try{let $e=k.texture,Mt=$e.format,wt=$e.type;if(Mt!==Ws&&Ne.convert(Mt)!==H.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let vt=wt===Gp&&(J.has("EXT_color_buffer_half_float")||ee.isWebGL2&&J.has("EXT_color_buffer_float"));if(wt!==en&&Ne.convert(wt)!==H.getParameter(35738)&&!(wt===fs&&(ee.isWebGL2||J.has("OES_texture_float")||J.has("WEBGL_color_buffer_float")))&&!vt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}re>=0&&re<=k.width-Z&&de>=0&&de<=k.height-ue&&H.readPixels(re,de,Z,ue,Ne.convert(Mt),Ne.convert(wt),De)}finally{let $e=x!==null?ge.get(x).__webglFramebuffer:null;ne.bindFramebuffer(36160,$e)}}},this.copyFramebufferToTexture=function(k,re,de=0){let Z=Math.pow(2,-de),ue=Math.floor(re.image.width*Z),De=Math.floor(re.image.height*Z);ce.setTexture2D(re,0),H.copyTexSubImage2D(3553,de,0,0,k.x,k.y,ue,De),ne.unbindTexture()},this.copyTextureToTexture=function(k,re,de,Z=0){let ue=re.image.width,De=re.image.height,Ve=Ne.convert(de.format),Ye=Ne.convert(de.type);ce.setTexture2D(de,0),H.pixelStorei(37440,de.flipY),H.pixelStorei(37441,de.premultiplyAlpha),H.pixelStorei(3317,de.unpackAlignment),re.isDataTexture?H.texSubImage2D(3553,Z,k.x,k.y,ue,De,Ve,Ye,re.image.data):re.isCompressedTexture?H.compressedTexSubImage2D(3553,Z,k.x,k.y,re.mipmaps[0].width,re.mipmaps[0].height,Ve,re.mipmaps[0].data):H.texSubImage2D(3553,Z,k.x,k.y,Ve,Ye,re.image),Z===0&&de.generateMipmaps&&H.generateMipmap(3553),ne.unbindTexture()},this.copyTextureToTexture3D=function(k,re,de,Z,ue=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let De=k.max.x-k.min.x+1,Ve=k.max.y-k.min.y+1,Ye=k.max.z-k.min.z+1,$e=Ne.convert(Z.format),Mt=Ne.convert(Z.type),wt;if(Z.isData3DTexture)ce.setTexture3D(Z,0),wt=32879;else if(Z.isDataArrayTexture)ce.setTexture2DArray(Z,0),wt=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}H.pixelStorei(37440,Z.flipY),H.pixelStorei(37441,Z.premultiplyAlpha),H.pixelStorei(3317,Z.unpackAlignment);let vt=H.getParameter(3314),Wt=H.getParameter(32878),Zt=H.getParameter(3316),Ti=H.getParameter(3315),As=H.getParameter(32877),zt=de.isCompressedTexture?de.mipmaps[0]:de.image;H.pixelStorei(3314,zt.width),H.pixelStorei(32878,zt.height),H.pixelStorei(3316,k.min.x),H.pixelStorei(3315,k.min.y),H.pixelStorei(32877,k.min.z),de.isDataTexture||de.isData3DTexture?H.texSubImage3D(wt,ue,re.x,re.y,re.z,De,Ve,Ye,$e,Mt,zt.data):de.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),H.compressedTexSubImage3D(wt,ue,re.x,re.y,re.z,De,Ve,Ye,$e,zt.data)):H.texSubImage3D(wt,ue,re.x,re.y,re.z,De,Ve,Ye,$e,Mt,zt),H.pixelStorei(3314,vt),H.pixelStorei(32878,Wt),H.pixelStorei(3316,Zt),H.pixelStorei(3315,Ti),H.pixelStorei(32877,As),ue===0&&Z.generateMipmaps&&H.generateMipmap(wt),ne.unbindTexture()},this.initTexture=function(k){k.isCubeTexture?ce.setTextureCube(k,0):k.isData3DTexture?ce.setTexture3D(k,0):k.isDataArrayTexture||k.isCompressedArrayTexture?ce.setTexture2DArray(k,0):ce.setTexture2D(k,0),ne.unbindTexture()},this.resetState=function(){v=0,y=0,x=null,ne.reset(),fe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var gK=class extends LR{};gK.prototype.isWebGL1Renderer=!0;var PR=class{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new lt(e),this.near=t,this.far=r}clone(){return new PR(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},Bh=class extends ir{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}},vK=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=g7,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ta()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,n=this.stride;i<n;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ta()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ta()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},nn=new E,w7=class{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)nn.fromBufferAttribute(this,t),nn.applyMatrix4(e),this.setXYZ(t,nn.x,nn.y,nn.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)nn.fromBufferAttribute(this,t),nn.applyNormalMatrix(e),this.setXYZ(t,nn.x,nn.y,nn.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)nn.fromBufferAttribute(this,t),nn.transformDirection(e),this.setXYZ(t,nn.x,nn.y,nn.z);return this}setX(e,t){return this.normalized&&(t=lr(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=lr(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=lr(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=lr(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=gl(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=gl(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=gl(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=gl(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=lr(t,this.array),r=lr(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=lr(t,this.array),r=lr(r,this.array),i=lr(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=lr(t,this.array),r=lr(r,this.array),i=lr(i,this.array),n=lr(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=n,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[i+n])}return new pt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new w7(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let r=0;r<this.count;r++){let i=r*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[i+n])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},DR=class extends ir{constructor(){super(),this.isBone=!0,this.type="Bone"}},u3=class extends ui{constructor(e=null,t=1,r=1,i,n,s,a,o,l=ur,h=ur,c,u){super(null,s,a,o,l,h,i,n,c,u),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},kM=new Ae,yK=new Ae,Nw=class{constructor(e=[],t=[]){this.uuid=ta(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Ae)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let r=new Ae;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){let e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let n=0,s=e.length;n<s;n++){let a=e[n]?e[n].matrixWorld:yK;kM.multiplyMatrices(a,t[n]),kM.toArray(r,n*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Nw(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=mR(e),e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let r=new u3(t,e,e,Ws,fs);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){let i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){let n=e.bones[r],s=t[n];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",n),s=new DR),this.bones.push(s),this.boneInverses.push(new Ae().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){let e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,r=this.boneInverses;for(let i=0,n=t.length;i<n;i++){let s=t[i];e.bones.push(s.uuid);let a=r[i];e.boneInverses.push(a.toArray())}return e}},xK=class extends pt{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},eu=class extends Tm{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new lt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},NM=new E,FM=new E,UM=new Ae,b5=new cf,Ng=new _s,c3=class extends ir{constructor(e=new dt,t=new eu){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[0];for(let i=1,n=t.count;i<n;i++)NM.fromBufferAttribute(t,i-1),FM.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=NM.distanceTo(FM);e.setAttribute("lineDistance",new Ke(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let r=this.geometry,i=this.matrixWorld,n=e.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Ng.copy(r.boundingSphere),Ng.applyMatrix4(i),Ng.radius+=n,e.ray.intersectsSphere(Ng)===!1)return;UM.copy(i).invert(),b5.copy(e.ray).applyMatrix4(UM);let a=n/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=new E,h=new E,c=new E,u=new E,d=this.isLineSegments?2:1,p=r.index,f=r.attributes.position;if(p!==null){let m=Math.max(0,s.start),g=Math.min(p.count,s.start+s.count);for(let v=m,y=g-1;v<y;v+=d){let x=p.getX(v),w=p.getX(v+1);if(l.fromBufferAttribute(f,x),h.fromBufferAttribute(f,w),b5.distanceSqToSegment(l,h,u,c)>o)continue;u.applyMatrix4(this.matrixWorld);let _=e.ray.origin.distanceTo(u);_<e.near||_>e.far||t.push({distance:_,point:c.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else{let m=Math.max(0,s.start),g=Math.min(f.count,s.start+s.count);for(let v=m,y=g-1;v<y;v+=d){if(l.fromBufferAttribute(f,v),h.fromBufferAttribute(f,v+1),b5.distanceSqToSegment(l,h,u,c)>o)continue;u.applyMatrix4(this.matrixWorld);let x=e.ray.origin.distanceTo(u);x<e.near||x>e.far||t.push({distance:x,point:c.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let r=e[t[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,n=r.length;i<n;i++){let s=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}},jM=new E,VM=new E,Pm=class extends c3{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,r=[];for(let i=0,n=t.count;i<n;i+=2)jM.fromBufferAttribute(t,i),VM.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+jM.distanceTo(VM);e.setAttribute("lineDistance",new Ke(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},wK=class extends ui{constructor(e,t,r,i,n,s,a,o,l){super(e,t,r,i,n,s,a,o,l),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:Lt,this.magFilter=n!==void 0?n:Lt,this.generateMipmaps=!1;let h=this;function c(){h.needsUpdate=!0,e.requestVideoFrameCallback(c)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(c)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},Po=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],r,i=this.getPoint(0),n=0;t.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),n+=r.distanceTo(i),t.push(n),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let r=this.getLengths(),i=0,n=r.length,s;t?s=t:s=e*r[n-1];let a=0,o=n-1,l;for(;a<=o;)if(i=Math.floor(a+(o-a)/2),l=r[i]-s,l<0)a=i+1;else if(l>0)o=i-1;else{o=i;break}if(i=o,r[i]===s)return i/(n-1);let h=r[i],c=r[i+1]-h,u=(s-h)/c;return(i+u)/(n-1)}getTangent(e,t){let r=e-1e-4,i=e+1e-4;r<0&&(r=0),i>1&&(i=1);let n=this.getPoint(r),s=this.getPoint(i),a=t||(n.isVector2?new X:new E);return a.copy(s).sub(n).normalize(),a}getTangentAt(e,t){let r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){let r=new E,i=[],n=[],s=[],a=new E,o=new Ae;for(let d=0;d<=e;d++){let p=d/e;i[d]=this.getTangentAt(p,new E)}n[0]=new E,s[0]=new E;let l=Number.MAX_VALUE,h=Math.abs(i[0].x),c=Math.abs(i[0].y),u=Math.abs(i[0].z);h<=l&&(l=h,r.set(1,0,0)),c<=l&&(l=c,r.set(0,1,0)),u<=l&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),n[0].crossVectors(i[0],a),s[0].crossVectors(i[0],n[0]);for(let d=1;d<=e;d++){if(n[d]=n[d-1].clone(),s[d]=s[d-1].clone(),a.crossVectors(i[d-1],i[d]),a.length()>Number.EPSILON){a.normalize();let p=Math.acos(li(i[d-1].dot(i[d]),-1,1));n[d].applyMatrix4(o.makeRotationAxis(a,p))}s[d].crossVectors(i[d],n[d])}if(t===!0){let d=Math.acos(li(n[0].dot(n[e]),-1,1));d/=e,i[0].dot(a.crossVectors(n[0],n[e]))>0&&(d=-d);for(let p=1;p<=e;p++)n[p].applyMatrix4(o.makeRotationAxis(i[p],d*p)),s[p].crossVectors(i[p],n[p])}return{tangents:i,normals:n,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},Sy=class extends Po{constructor(e=0,t=0,r=1,i=1,n=0,s=Math.PI*2,a=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=n,this.aEndAngle=s,this.aClockwise=a,this.aRotation=o}getPoint(e,t){let r=t||new X,i=Math.PI*2,n=this.aEndAngle-this.aStartAngle,s=Math.abs(n)<Number.EPSILON;for(;n<0;)n+=i;for(;n>i;)n-=i;n<Number.EPSILON&&(s?n=0:n=i),this.aClockwise===!0&&!s&&(n===i?n=-i:n=n-i);let a=this.aStartAngle+e*n,o=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){let h=Math.cos(this.aRotation),c=Math.sin(this.aRotation),u=o-this.aX,d=l-this.aY;o=u*h-d*c+this.aX,l=u*c+d*h+this.aY}return r.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},bK=class extends Sy{constructor(e,t,r,i,n,s){super(e,t,r,r,i,n,s),this.isArcCurve=!0,this.type="ArcCurve"}};function Fw(){let e=0,t=0,r=0,i=0;function n(s,a,o,l){e=s,t=o,r=-3*s+3*a-2*o-l,i=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,h){n(a,o,h*(o-s),h*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,h,c,u){let d=(a-s)/h-(o-s)/(h+c)+(o-a)/c,p=(o-a)/c-(l-a)/(c+u)+(l-o)/u;d*=c,p*=c,n(a,o,d,p)},calc:function(s){let a=s*s,o=a*s;return e+t*s+r*a+i*o}}}var Fg=new E,_5=new Fw,C5=new Fw,S5=new Fw,_K=class extends Po{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new E){let r=t,i=this.points,n=i.length,s=(n-(this.closed?0:1))*e,a=Math.floor(s),o=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/n)+1)*n:o===0&&a===n-1&&(a=n-2,o=1);let l,h;this.closed||a>0?l=i[(a-1)%n]:(Fg.subVectors(i[0],i[1]).add(i[0]),l=Fg);let c=i[a%n],u=i[(a+1)%n];if(this.closed||a+2<n?h=i[(a+2)%n]:(Fg.subVectors(i[n-1],i[n-2]).add(i[n-1]),h=Fg),this.curveType==="centripetal"||this.curveType==="chordal"){let d=this.curveType==="chordal"?.5:.25,p=Math.pow(l.distanceToSquared(c),d),f=Math.pow(c.distanceToSquared(u),d),m=Math.pow(u.distanceToSquared(h),d);f<1e-4&&(f=1),p<1e-4&&(p=f),m<1e-4&&(m=f),_5.initNonuniformCatmullRom(l.x,c.x,u.x,h.x,p,f,m),C5.initNonuniformCatmullRom(l.y,c.y,u.y,h.y,p,f,m),S5.initNonuniformCatmullRom(l.z,c.z,u.z,h.z,p,f,m)}else this.curveType==="catmullrom"&&(_5.initCatmullRom(l.x,c.x,u.x,h.x,this.tension),C5.initCatmullRom(l.y,c.y,u.y,h.y,this.tension),S5.initCatmullRom(l.z,c.z,u.z,h.z,this.tension));return r.set(_5.calc(o),C5.calc(o),S5.calc(o)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(new E().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function GM(e,t,r,i,n){let s=(i-t)*.5,a=(n-r)*.5,o=e*e,l=e*o;return(2*r-2*i+s+a)*l+(-3*r+3*i-2*s-a)*o+s*e+r}function CK(e,t){let r=1-e;return r*r*t}function SK(e,t){return 2*(1-e)*e*t}function MK(e,t){return e*e*t}function c0(e,t,r,i){return CK(e,t)+SK(e,r)+MK(e,i)}function AK(e,t){let r=1-e;return r*r*r*t}function EK(e,t){let r=1-e;return 3*r*r*e*t}function TK(e,t){return 3*(1-e)*e*e*t}function LK(e,t){return e*e*e*t}function d0(e,t,r,i,n){return AK(e,t)+EK(e,r)+TK(e,i)+LK(e,n)}var Aa=class extends Po{constructor(t=new X,r=new X,i=new X,n=new X){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=r,this.v2=i,this.v3=n}getPoint(t,r=new X){let i=r,n=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(d0(t,n.x,s.x,a.x,o.x),d0(t,n.y,s.y,a.y,o.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},o2=class extends Po{constructor(e=new E,t=new E,r=new E,i=new E){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new E){let r=t,i=this.v0,n=this.v1,s=this.v2,a=this.v3;return r.set(d0(e,i.x,n.x,s.x,a.x),d0(e,i.y,n.y,s.y,a.y),d0(e,i.z,n.z,s.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Ra=class extends Po{constructor(t=new X,r=new X){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=r}getPoint(t,r=new X){let i=r;return t===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,r){return this.getPoint(t,r)}getTangent(t,r){let i=r||new X;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},OR=class extends Po{constructor(e=new E,t=new E){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new E){let r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},qh=class extends Po{constructor(e=new X,t=new X,r=new X){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new X){let r=t,i=this.v0,n=this.v1,s=this.v2;return r.set(c0(e,i.x,n.x,s.x),c0(e,i.y,n.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},PK=class extends Po{constructor(e=new E,t=new E,r=new E){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new E){let r=t,i=this.v0,n=this.v1,s=this.v2;return r.set(c0(e,i.x,n.x,s.x),c0(e,i.y,n.y,s.y),c0(e,i.z,n.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},Uw=class extends Po{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new X){let r=t,i=this.points,n=(i.length-1)*e,s=Math.floor(n),a=n-s,o=i[s===0?s:s-1],l=i[s],h=i[s>i.length-2?i.length-1:s+1],c=i[s>i.length-3?i.length-1:s+2];return r.set(GM(a,o.x,l.x,h.x,c.x),GM(a,o.y,l.y,h.y,c.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(i.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let i=e.points[t];this.points.push(new X().fromArray(i))}return this}},DK=Object.freeze({__proto__:null,ArcCurve:bK,CatmullRomCurve3:_K,CubicBezierCurve:Aa,CubicBezierCurve3:o2,EllipseCurve:Sy,LineCurve:Ra,LineCurve3:OR,QuadraticBezierCurve:qh,QuadraticBezierCurve3:PK,SplineCurve:Uw}),IR=class extends Po{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ra(t,e))}getPoint(e,t){let r=e*this.getLength(),i=this.getCurveLengths(),n=0;for(;n<i.length;){if(i[n]>=r){let s=i[n]-r,a=this.curves[n],o=a.getLength(),l=o===0?0:1-s/o;return a.getPointAt(l,t)}n++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],r;for(let i=0,n=this.curves;i<n.length;i++){let s=n[i],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,o=s.getPoints(a);for(let l=0;l<o.length;l++){let h=o[l];r&&r.equals(h)||(t.push(h),r=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){let i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let i=e.curves[t];this.curves.push(new DK[i.type]().fromJSON(i))}return this}},d3=class extends IR{constructor(e){super(),this.type="Path",this.currentPoint=new X,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let r=new Ra(this.currentPoint.clone(),new X(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){let n=new qh(this.currentPoint.clone(),new X(e,t),new X(r,i));return this.curves.push(n),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,n,s){let a=new Aa(this.currentPoint.clone(),new X(e,t),new X(r,i),new X(n,s));return this.curves.push(a),this.currentPoint.set(n,s),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),r=new Uw(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,n,s){let a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+a,t+o,r,i,n,s),this}absarc(e,t,r,i,n,s){return this.absellipse(e,t,r,r,i,n,s),this}ellipse(e,t,r,i,n,s,a,o){let l=this.currentPoint.x,h=this.currentPoint.y;return this.absellipse(e+l,t+h,r,i,n,s,a,o),this}absellipse(e,t,r,i,n,s,a,o){let l=new Sy(e,t,r,i,n,s,a,o);if(this.curves.length>0){let c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);let h=l.getPoint(1);return this.currentPoint.copy(h),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},RR=class extends dt{constructor(e=[new X(0,-.5),new X(.5,0),new X(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=li(i,0,Math.PI*2);let n=[],s=[],a=[],o=[],l=[],h=1/t,c=new E,u=new X,d=new E,p=new E,f=new E,m=0,g=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=g*1,d.y=-m,d.z=g*0,f.copy(d),d.normalize(),o.push(d.x,d.y,d.z);break;case e.length-1:o.push(f.x,f.y,f.z);break;default:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=g*1,d.y=-m,d.z=g*0,p.copy(d),d.x+=f.x,d.y+=f.y,d.z+=f.z,d.normalize(),o.push(d.x,d.y,d.z),f.copy(p)}for(let v=0;v<=t;v++){let y=r+v*h*i,x=Math.sin(y),w=Math.cos(y);for(let _=0;_<=e.length-1;_++){c.x=e[_].x*x,c.y=e[_].y,c.z=e[_].x*w,s.push(c.x,c.y,c.z),u.x=v/t,u.y=_/(e.length-1),a.push(u.x,u.y);let b=o[3*_+0]*x,S=o[3*_+1],C=o[3*_+0]*w;l.push(b,S,C)}}for(let v=0;v<t;v++)for(let y=0;y<e.length-1;y++){let x=y+v*e.length,w=x,_=x+e.length,b=x+e.length+1,S=x+1;n.push(w,_,S),n.push(b,S,_)}this.setIndex(n),this.setAttribute("position",new Ke(s,3)),this.setAttribute("uv",new Ke(a,2)),this.setAttribute("normal",new Ke(l,3))}static fromJSON(e){return new RR(e.points,e.segments,e.phiStart,e.phiLength)}},jw=class extends dt{constructor(e=1,t=1,r=1,i=32,n=1,s=!1,a=0,o=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:n,openEnded:s,thetaStart:a,thetaLength:o};let l=this;i=Math.floor(i),n=Math.floor(n);let h=[],c=[],u=[],d=[],p=0,f=[],m=r/2,g=0;v(),s===!1&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(h),this.setAttribute("position",new Ke(c,3)),this.setAttribute("normal",new Ke(u,3)),this.setAttribute("uv",new Ke(d,2));function v(){let x=new E,w=new E,_=0,b=(t-e)/r;for(let S=0;S<=n;S++){let C=[],M=S/n,A=M*(t-e)+e;for(let T=0;T<=i;T++){let L=T/i,D=L*o+a,O=Math.sin(D),z=Math.cos(D);w.x=A*O,w.y=-M*r+m,w.z=A*z,c.push(w.x,w.y,w.z),x.set(O,b,z).normalize(),u.push(x.x,x.y,x.z),d.push(L,1-M),C.push(p++)}f.push(C)}for(let S=0;S<i;S++)for(let C=0;C<n;C++){let M=f[C][S],A=f[C+1][S],T=f[C+1][S+1],L=f[C][S+1];h.push(M,A,L),h.push(A,T,L),_+=6}l.addGroup(g,_,0),g+=_}function y(x){let w=p,_=new X,b=new E,S=0,C=x===!0?e:t,M=x===!0?1:-1;for(let T=1;T<=i;T++)c.push(0,m*M,0),u.push(0,M,0),d.push(.5,.5),p++;let A=p;for(let T=0;T<=i;T++){let L=T/i*o+a,D=Math.cos(L),O=Math.sin(L);b.x=C*O,b.y=m*M,b.z=C*D,c.push(b.x,b.y,b.z),u.push(0,M,0),_.x=D*.5+.5,_.y=O*.5*M+.5,d.push(_.x,_.y),p++}for(let T=0;T<i;T++){let L=w+T,D=A+T;x===!0?h.push(D,D+1,L):h.push(D+1,D,L),S+=3}l.addGroup(g,S,x===!0?1:2),g+=S}}static fromJSON(e){return new jw(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},BR=class extends jw{constructor(e=1,t=1,r=32,i=1,n=!1,s=0,a=Math.PI*2){super(0,e,t,r,i,n,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:n,thetaStart:s,thetaLength:a}}static fromJSON(e){return new BR(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},Vw=class extends dt{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};let n=[],s=[];a(i),l(r),h(),this.setAttribute("position",new Ke(n,3)),this.setAttribute("normal",new Ke(n.slice(),3)),this.setAttribute("uv",new Ke(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(v){let y=new E,x=new E,w=new E;for(let _=0;_<t.length;_+=3)d(t[_+0],y),d(t[_+1],x),d(t[_+2],w),o(y,x,w,v)}function o(v,y,x,w){let _=w+1,b=[];for(let S=0;S<=_;S++){b[S]=[];let C=v.clone().lerp(x,S/_),M=y.clone().lerp(x,S/_),A=_-S;for(let T=0;T<=A;T++)T===0&&S===_?b[S][T]=C:b[S][T]=C.clone().lerp(M,T/A)}for(let S=0;S<_;S++)for(let C=0;C<2*(_-S)-1;C++){let M=Math.floor(C/2);C%2===0?(u(b[S][M+1]),u(b[S+1][M]),u(b[S][M])):(u(b[S][M+1]),u(b[S+1][M+1]),u(b[S+1][M]))}}function l(v){let y=new E;for(let x=0;x<n.length;x+=3)y.x=n[x+0],y.y=n[x+1],y.z=n[x+2],y.normalize().multiplyScalar(v),n[x+0]=y.x,n[x+1]=y.y,n[x+2]=y.z}function h(){let v=new E;for(let y=0;y<n.length;y+=3){v.x=n[y+0],v.y=n[y+1],v.z=n[y+2];let x=m(v)/2/Math.PI+.5,w=g(v)/Math.PI+.5;s.push(x,1-w)}p(),c()}function c(){for(let v=0;v<s.length;v+=6){let y=s[v+0],x=s[v+2],w=s[v+4],_=Math.max(y,x,w),b=Math.min(y,x,w);_>.9&&b<.1&&(y<.2&&(s[v+0]+=1),x<.2&&(s[v+2]+=1),w<.2&&(s[v+4]+=1))}}function u(v){n.push(v.x,v.y,v.z)}function d(v,y){let x=v*3;y.x=e[x+0],y.y=e[x+1],y.z=e[x+2]}function p(){let v=new E,y=new E,x=new E,w=new E,_=new X,b=new X,S=new X;for(let C=0,M=0;C<n.length;C+=9,M+=6){v.set(n[C+0],n[C+1],n[C+2]),y.set(n[C+3],n[C+4],n[C+5]),x.set(n[C+6],n[C+7],n[C+8]),_.set(s[M+0],s[M+1]),b.set(s[M+2],s[M+3]),S.set(s[M+4],s[M+5]),w.copy(v).add(y).add(x).divideScalar(3);let A=m(w);f(_,M+0,v,A),f(b,M+2,y,A),f(S,M+4,x,A)}}function f(v,y,x,w){w<0&&v.x===1&&(s[y]=v.x-1),x.x===0&&x.z===0&&(s[y]=w/2/Math.PI+.5)}function m(v){return Math.atan2(v.z,-v.x)}function g(v){return Math.atan2(-v.y,Math.sqrt(v.x*v.x+v.z*v.z))}}static fromJSON(e){return new Vw(e.vertices,e.indices,e.radius,e.details)}},zR=class extends Vw{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2,i=1/r,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(n,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new zR(e.radius,e.detail)}},p3=class extends d3{constructor(e){super(e),this.uuid=ta(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){let i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let i=e.holes[t];this.holes.push(new d3().fromJSON(i))}return this}},OK={triangulate:function(e,t,r=2){let i=t&&t.length,n=i?t[0]*r:e.length,s=kR(e,0,n,r,!0),a=[];if(!s||s.next===s.prev)return a;let o,l,h,c,u,d,p;if(i&&(s=kK(e,t,s,r)),e.length>80*r){o=h=e[0],l=c=e[1];for(let f=r;f<n;f+=r)u=e[f],d=e[f+1],u<o&&(o=u),d<l&&(l=d),u>h&&(h=u),d>c&&(c=d);p=Math.max(h-o,c-l),p=p!==0?32767/p:0}return em(s,a,r,o,l,p,0),a}};function kR(e,t,r,i,n){let s,a;if(n===YK(e,t,r,i)>0)for(s=t;s<r;s+=i)a=HM(s,e[s],e[s+1],a);else for(s=r-i;s>=t;s-=i)a=HM(s,e[s],e[s+1],a);return a&&My(a,a.next)&&(rm(a),a=a.next),a}function vc(e,t){if(!e)return e;t||(t=e);let r=e,i;do if(i=!1,!r.steiner&&(My(r,r.next)||Mr(r.prev,r,r.next)===0)){if(rm(r),r=t=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==t);return t}function em(e,t,r,i,n,s,a){if(!e)return;!a&&s&&VK(e,i,n,s);let o=e,l,h;for(;e.prev!==e.next;){if(l=e.prev,h=e.next,s?RK(e,i,n,s):IK(e)){t.push(l.i/r|0),t.push(e.i/r|0),t.push(h.i/r|0),rm(e),e=h.next,o=h.next;continue}if(e=h,e===o){a?a===1?(e=BK(vc(e),t,r),em(e,t,r,i,n,s,2)):a===2&&zK(e,t,r,i,n,s):em(vc(e),t,r,i,n,s,1);break}}}function IK(e){let t=e.prev,r=e,i=e.next;if(Mr(t,r,i)>=0)return!1;let n=t.x,s=r.x,a=i.x,o=t.y,l=r.y,h=i.y,c=n<s?n<a?n:a:s<a?s:a,u=o<l?o<h?o:h:l<h?l:h,d=n>s?n>a?n:a:s>a?s:a,p=o>l?o>h?o:h:l>h?l:h,f=i.next;for(;f!==t;){if(f.x>=c&&f.x<=d&&f.y>=u&&f.y<=p&&Wd(n,o,s,l,a,h,f.x,f.y)&&Mr(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function RK(e,t,r,i){let n=e.prev,s=e,a=e.next;if(Mr(n,s,a)>=0)return!1;let o=n.x,l=s.x,h=a.x,c=n.y,u=s.y,d=a.y,p=o<l?o<h?o:h:l<h?l:h,f=c<u?c<d?c:d:u<d?u:d,m=o>l?o>h?o:h:l>h?l:h,g=c>u?c>d?c:d:u>d?u:d,v=b7(p,f,t,r,i),y=b7(m,g,t,r,i),x=e.prevZ,w=e.nextZ;for(;x&&x.z>=v&&w&&w.z<=y;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==n&&x!==a&&Wd(o,c,l,u,h,d,x.x,x.y)&&Mr(x.prev,x,x.next)>=0||(x=x.prevZ,w.x>=p&&w.x<=m&&w.y>=f&&w.y<=g&&w!==n&&w!==a&&Wd(o,c,l,u,h,d,w.x,w.y)&&Mr(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;x&&x.z>=v;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==n&&x!==a&&Wd(o,c,l,u,h,d,x.x,x.y)&&Mr(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;w&&w.z<=y;){if(w.x>=p&&w.x<=m&&w.y>=f&&w.y<=g&&w!==n&&w!==a&&Wd(o,c,l,u,h,d,w.x,w.y)&&Mr(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function BK(e,t,r){let i=e;do{let n=i.prev,s=i.next.next;!My(n,s)&&NR(n,i,i.next,s)&&tm(n,s)&&tm(s,n)&&(t.push(n.i/r|0),t.push(i.i/r|0),t.push(s.i/r|0),rm(i),rm(i.next),i=e=s),i=i.next}while(i!==e);return vc(i)}function zK(e,t,r,i,n,s){let a=e;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&WK(a,o)){let l=FR(a,o);a=vc(a,a.next),l=vc(l,l.next),em(a,t,r,i,n,s,0),em(l,t,r,i,n,s,0);return}o=o.next}a=a.next}while(a!==e)}function kK(e,t,r,i){let n=[],s,a,o,l,h;for(s=0,a=t.length;s<a;s++)o=t[s]*i,l=s<a-1?t[s+1]*i:e.length,h=kR(e,o,l,i,!1),h===h.next&&(h.steiner=!0),n.push(HK(h));for(n.sort(NK),s=0;s<n.length;s++)r=FK(n[s],r);return r}function NK(e,t){return e.x-t.x}function FK(e,t){let r=UK(e,t);if(!r)return t;let i=FR(r,e);return vc(i,i.next),vc(r,r.next)}function UK(e,t){let r=t,i=-1/0,n,s=e.x,a=e.y;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){let d=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(d<=s&&d>i&&(i=d,n=r.x<r.next.x?r:r.next,d===s))return n}r=r.next}while(r!==t);if(!n)return null;let o=n,l=n.x,h=n.y,c=1/0,u;r=n;do s>=r.x&&r.x>=l&&s!==r.x&&Wd(a<h?s:i,a,l,h,a<h?i:s,a,r.x,r.y)&&(u=Math.abs(a-r.y)/(s-r.x),tm(r,e)&&(u<c||u===c&&(r.x>n.x||r.x===n.x&&jK(n,r)))&&(n=r,c=u)),r=r.next;while(r!==o);return n}function jK(e,t){return Mr(e.prev,e,t.prev)<0&&Mr(t.next,e,e.next)<0}function VK(e,t,r,i){let n=e;do n.z===0&&(n.z=b7(n.x,n.y,t,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,GK(n)}function GK(e){let t,r,i,n,s,a,o,l,h=1;do{for(r=e,e=null,s=null,a=0;r;){for(a++,i=r,o=0,t=0;t<h&&(o++,i=i.nextZ,!!i);t++);for(l=h;o>0||l>0&&i;)o!==0&&(l===0||!i||r.z<=i.z)?(n=r,r=r.nextZ,o--):(n=i,i=i.nextZ,l--),s?s.nextZ=n:e=n,n.prevZ=s,s=n;r=i}s.nextZ=null,h*=2}while(a>1);return e}function b7(e,t,r,i,n){return e=(e-r)*n|0,t=(t-i)*n|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function HK(e){let t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function Wd(e,t,r,i,n,s,a,o){return(n-a)*(t-o)>=(e-a)*(s-o)&&(e-a)*(i-o)>=(r-a)*(t-o)&&(r-a)*(s-o)>=(n-a)*(i-o)}function WK(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!qK(e,t)&&(tm(e,t)&&tm(t,e)&&XK(e,t)&&(Mr(e.prev,e,t.prev)||Mr(e,t.prev,t))||My(e,t)&&Mr(e.prev,e,e.next)>0&&Mr(t.prev,t,t.next)>0)}function Mr(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function My(e,t){return e.x===t.x&&e.y===t.y}function NR(e,t,r,i){let n=jg(Mr(e,t,r)),s=jg(Mr(e,t,i)),a=jg(Mr(r,i,e)),o=jg(Mr(r,i,t));return!!(n!==s&&a!==o||n===0&&Ug(e,r,t)||s===0&&Ug(e,i,t)||a===0&&Ug(r,e,i)||o===0&&Ug(r,t,i))}function Ug(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function jg(e){return e>0?1:e<0?-1:0}function qK(e,t){let r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&NR(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function tm(e,t){return Mr(e.prev,e,e.next)<0?Mr(e,t,e.next)>=0&&Mr(e,e.prev,t)>=0:Mr(e,t,e.prev)<0||Mr(e,e.next,t)<0}function XK(e,t){let r=e,i=!1,n=(e.x+t.x)/2,s=(e.y+t.y)/2;do r.y>s!=r.next.y>s&&r.next.y!==r.y&&n<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==e);return i}function FR(e,t){let r=new _7(e.i,e.x,e.y),i=new _7(t.i,t.x,t.y),n=e.next,s=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,s.next=i,i.prev=s,i}function HM(e,t,r,i){let n=new _7(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function rm(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function _7(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function YK(e,t,r,i){let n=0;for(let s=t,a=r-i;s<r;s+=i)n+=(e[a]-e[s])*(e[s+1]+e[a+1]),a=s;return n}var UR=class{static area(e){let t=e.length,r=0;for(let i=t-1,n=0;n<t;i=n++)r+=e[i].x*e[n].y-e[n].x*e[i].y;return r*.5}static isClockWise(e){return UR.area(e)<0}static triangulateShape(e,t){let r=[],i=[],n=[];WM(e),qM(r,e);let s=e.length;t.forEach(WM);for(let o=0;o<t.length;o++)i.push(s),s+=t[o].length,qM(r,t[o]);let a=OK.triangulate(r,i);for(let o=0;o<a.length;o+=3)n.push(a.slice(o,o+3));return n}};function WM(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function qM(e,t){for(let r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}var jR=class extends Vw{constructor(e=1,t=0){let r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,n,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new jR(e.radius,e.detail)}},Gw=class extends dt{constructor(e=1,t=32,r=16,i=0,n=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:n,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));let o=Math.min(s+a,Math.PI),l=0,h=[],c=new E,u=new E,d=[],p=[],f=[],m=[];for(let g=0;g<=r;g++){let v=[],y=g/r,x=0;g==0&&s==0?x=.5/t:g==r&&o==Math.PI&&(x=-.5/t);for(let w=0;w<=t;w++){let _=w/t;c.x=-e*Math.cos(i+_*n)*Math.sin(s+y*a),c.y=e*Math.cos(s+y*a),c.z=e*Math.sin(i+_*n)*Math.sin(s+y*a),p.push(c.x,c.y,c.z),u.copy(c).normalize(),f.push(u.x,u.y,u.z),m.push(_+x,1-y),v.push(l++)}h.push(v)}for(let g=0;g<r;g++)for(let v=0;v<t;v++){let y=h[g][v+1],x=h[g][v],w=h[g+1][v],_=h[g+1][v+1];(g!==0||s>0)&&d.push(y,x,_),(g!==r-1||o<Math.PI)&&d.push(x,w,_)}this.setIndex(d),this.setAttribute("position",new Ke(p,3)),this.setAttribute("normal",new Ke(f,3)),this.setAttribute("uv",new Ke(m,2))}static fromJSON(e){return new Gw(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},VR=class extends dt{constructor(e=1,t=.4,r=64,i=8,n=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:n,q:s},r=Math.floor(r),i=Math.floor(i);let a=[],o=[],l=[],h=[],c=new E,u=new E,d=new E,p=new E,f=new E,m=new E,g=new E;for(let y=0;y<=r;++y){let x=y/r*n*Math.PI*2;v(x,n,s,e,d),v(x+.01,n,s,e,p),m.subVectors(p,d),g.addVectors(p,d),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let w=0;w<=i;++w){let _=w/i*Math.PI*2,b=-t*Math.cos(_),S=t*Math.sin(_);c.x=d.x+(b*g.x+S*f.x),c.y=d.y+(b*g.y+S*f.y),c.z=d.z+(b*g.z+S*f.z),o.push(c.x,c.y,c.z),u.subVectors(c,d).normalize(),l.push(u.x,u.y,u.z),h.push(y/r),h.push(w/i)}}for(let y=1;y<=r;y++)for(let x=1;x<=i;x++){let w=(i+1)*(y-1)+(x-1),_=(i+1)*y+(x-1),b=(i+1)*y+x,S=(i+1)*(y-1)+x;a.push(w,_,S),a.push(_,b,S)}this.setIndex(a),this.setAttribute("position",new Ke(o,3)),this.setAttribute("normal",new Ke(l,3)),this.setAttribute("uv",new Ke(h,2));function v(y,x,w,_,b){let S=Math.cos(y),C=Math.sin(y),M=w/x*y,A=Math.cos(M);b.x=_*(2+A)*.5*S,b.y=_*(2+A)*C*.5,b.z=_*Math.sin(M)*.5}}static fromJSON(e){return new VR(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}};function Gl(e,t,r){return GR(e)?new e.constructor(e.subarray(t,r!==void 0?r:e.length)):e.slice(t,r)}function Vg(e,t,r){return!e||!r&&e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)}function GR(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function QK(e){function t(n,s){return e[n]-e[s]}let r=e.length,i=new Array(r);for(let n=0;n!==r;++n)i[n]=n;return i.sort(t),i}function XM(e,t,r){let i=e.length,n=new e.constructor(i);for(let s=0,a=0;a!==i;++s){let o=r[s]*t;for(let l=0;l!==t;++l)n[a++]=e[o+l]}return n}function HR(e,t,r,i){let n=1,s=e[0];for(;s!==void 0&&s[i]===void 0;)s=e[n++];if(s===void 0)return;let a=s[i];if(a!==void 0)if(Array.isArray(a))do a=s[i],a!==void 0&&(t.push(s.time),r.push.apply(r,a)),s=e[n++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[i],a!==void 0&&(t.push(s.time),a.toArray(r,r.length)),s=e[n++];while(s!==void 0);else do a=s[i],a!==void 0&&(t.push(s.time),r.push(a)),s=e[n++];while(s!==void 0)}var Ay=class{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,r=this._cachedIndex,i=t[r],n=t[r-1];e:{t:{let s;r:{i:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<n)break i;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(n=i,i=t[++r],e<i)break t}s=t.length;break r}if(!(e>=n)){let a=t[1];e<a&&(r=2,n=a);for(let o=r-2;;){if(n===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===o)break;if(i=n,n=t[--r-1],e>=n)break t}s=r,r=0;break r}break e}for(;r<s;){let a=r+s>>>1;e<t[a]?s=a:r=a+1}if(i=t[r],n=t[r-1],n===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,n,i)}return this.interpolate_(r,n,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,n=e*i;for(let s=0;s!==i;++s)t[s]=r[n+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},ZK=class extends Ay{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:jd,endingEnd:jd}}intervalChanged_(e,t,r){let i=this.parameterPositions,n=e-2,s=e+1,a=i[n],o=i[s];if(a===void 0)switch(this.getSettings_().endingStart){case Vd:n=e,a=2*t-r;break;case a3:n=i.length-2,a=t+i[n]-i[n+1];break;default:n=e,a=r}if(o===void 0)switch(this.getSettings_().endingEnd){case Vd:s=e,o=2*r-t;break;case a3:s=1,o=r+i[1]-i[0];break;default:s=e-1,o=t}let l=(r-t)*.5,h=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(o-r),this._offsetPrev=n*h,this._offsetNext=s*h}interpolate_(e,t,r,i){let n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,h=this._offsetPrev,c=this._offsetNext,u=this._weightPrev,d=this._weightNext,p=(r-t)/(i-t),f=p*p,m=f*p,g=-u*m+2*u*f-u*p,v=(1+u)*m+(-1.5-2*u)*f+(-.5+u)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,x=d*m-d*f;for(let w=0;w!==a;++w)n[w]=g*s[h+w]+v*s[l+w]+y*s[o+w]+x*s[c+w];return n}},WR=class extends Ay{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){let n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,h=(r-t)/(i-t),c=1-h;for(let u=0;u!==a;++u)n[u]=s[l+u]*c+s[o+u]*h;return n}},KK=class extends Ay{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}},Do=class{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Vg(t,this.TimeBufferType),this.values=Vg(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Vg(e.times,Array),values:Vg(e.values,Array)};let i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new KK(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new WR(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new ZK(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case n3:t=this.InterpolantFactoryMethodDiscrete;break;case s3:t=this.InterpolantFactoryMethodLinear;break;case Q4:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return n3;case this.InterpolantFactoryMethodLinear:return s3;case this.InterpolantFactoryMethodSmooth:return Q4}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){let r=this.times,i=r.length,n=0,s=i-1;for(;n!==i&&r[n]<e;)++n;for(;s!==-1&&r[s]>t;)--s;if(++s,n!==0||s!==i){n>=s&&(s=Math.max(s,1),n=s-1);let a=this.getValueSize();this.times=Gl(r,n,s),this.values=Gl(this.values,n*a,s*a)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let r=this.times,i=this.values,n=r.length;n===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==n;a++){let o=r[a];if(typeof o=="number"&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,o),e=!1;break}if(s!==null&&s>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,o,s),e=!1;break}s=o}if(i!==void 0&&GR(i))for(let a=0,o=i.length;a!==o;++a){let l=i[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e}optimize(){let e=Gl(this.times),t=Gl(this.values),r=this.getValueSize(),i=this.getInterpolation()===Q4,n=e.length-1,s=1;for(let a=1;a<n;++a){let o=!1,l=e[a],h=e[a+1];if(l!==h&&(a!==1||l!==e[0]))if(i)o=!0;else{let c=a*r,u=c-r,d=c+r;for(let p=0;p!==r;++p){let f=t[c+p];if(f!==t[u+p]||f!==t[d+p]){o=!0;break}}}if(o){if(a!==s){e[s]=e[a];let c=a*r,u=s*r;for(let d=0;d!==r;++d)t[u+d]=t[c+d]}++s}}if(n>0){e[s]=e[n];for(let a=n*r,o=s*r,l=0;l!==r;++l)t[o+l]=t[a+l];++s}return s!==e.length?(this.times=Gl(e,0,s),this.values=Gl(t,0,s*r)):(this.times=e,this.values=t),this}clone(){let e=Gl(this.times,0),t=Gl(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}};Do.prototype.TimeBufferType=Float32Array;Do.prototype.ValueBufferType=Float32Array;Do.prototype.DefaultInterpolation=s3;var mf=class extends Do{};mf.prototype.ValueTypeName="bool";mf.prototype.ValueBufferType=Array;mf.prototype.DefaultInterpolation=n3;mf.prototype.InterpolantFactoryMethodLinear=void 0;mf.prototype.InterpolantFactoryMethodSmooth=void 0;var qR=class extends Do{};qR.prototype.ValueTypeName="color";var f3=class extends Do{};f3.prototype.ValueTypeName="number";var $K=class extends Ay{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){let n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(r-t)/(i-t),l=e*a;for(let h=l+a;l!==h;l+=4)Et.slerpFlat(n,0,s,l-a,s,l,o);return n}},Dm=class extends Do{InterpolantFactoryMethodLinear(e){return new $K(this.times,this.values,this.getValueSize(),e)}};Dm.prototype.ValueTypeName="quaternion";Dm.prototype.DefaultInterpolation=s3;Dm.prototype.InterpolantFactoryMethodSmooth=void 0;var gf=class extends Do{};gf.prototype.ValueTypeName="string";gf.prototype.ValueBufferType=Array;gf.prototype.DefaultInterpolation=n3;gf.prototype.InterpolantFactoryMethodLinear=void 0;gf.prototype.InterpolantFactoryMethodSmooth=void 0;var m3=class extends Do{};m3.prototype.ValueTypeName="vector";var C7=class{constructor(e,t=-1,r,i=Dw){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=ta(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],r=e.tracks,i=1/(e.fps||1);for(let s=0,a=r.length;s!==a;++s)t.push(e$(r[s]).scale(i));let n=new this(e.name,e.duration,t,e.blendMode);return n.uuid=e.uuid,n}static toJSON(e){let t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let n=0,s=r.length;n!==s;++n)t.push(Do.toJSON(r[n]));return i}static CreateFromMorphTargetSequence(e,t,r,i){let n=t.length,s=[];for(let a=0;a<n;a++){let o=[],l=[];o.push((a+n-1)%n,a,(a+1)%n),l.push(0,1,0);let h=QK(o);o=XM(o,1,h),l=XM(l,1,h),!i&&o[0]===0&&(o.push(n),l.push(l[0])),s.push(new f3(".morphTargetInfluences["+t[a].name+"]",o,l).scale(1/r))}return new this(e,-1,s)}static findByName(e,t){let r=e;if(!Array.isArray(e)){let i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){let i={},n=/^([\w-]*?)([\d]+)$/;for(let a=0,o=e.length;a<o;a++){let l=e[a],h=l.name.match(n);if(h&&h.length>1){let c=h[1],u=i[c];u||(i[c]=u=[]),u.push(l)}}let s=[];for(let a in i)s.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let r=function(h,c,u,d,p){if(u.length!==0){let f=[],m=[];HR(u,f,m,d),f.length!==0&&p.push(new h(c,f,m))}},i=[],n=e.name||"default",s=e.fps||30,a=e.blendMode,o=e.length||-1,l=e.hierarchy||[];for(let h=0;h<l.length;h++){let c=l[h].keys;if(!(!c||c.length===0))if(c[0].morphTargets){let u={},d;for(d=0;d<c.length;d++)if(c[d].morphTargets)for(let p=0;p<c[d].morphTargets.length;p++)u[c[d].morphTargets[p]]=-1;for(let p in u){let f=[],m=[];for(let g=0;g!==c[d].morphTargets.length;++g){let v=c[d];f.push(v.time),m.push(v.morphTarget===p?1:0)}i.push(new f3(".morphTargetInfluence["+p+"]",f,m))}o=u.length*s}else{let u=".bones["+t[h].name+"]";r(m3,u+".position",c,"pos",i),r(Dm,u+".quaternion",c,"rot",i),r(m3,u+".scale",c,"scl",i)}}return i.length===0?null:new this(n,o,i,a)}resetDuration(){let e=this.tracks,t=0;for(let r=0,i=e.length;r!==i;++r){let n=this.tracks[r];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function JK(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return f3;case"vector":case"vector2":case"vector3":case"vector4":return m3;case"color":return qR;case"quaternion":return Dm;case"bool":case"boolean":return mf;case"string":return gf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function e$(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=JK(e.type);if(e.times===void 0){let r=[],i=[];HR(e.keys,r,i,"value"),e.times=r,e.values=i}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var YM={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},XR=class{constructor(e,t,r){let i=this,n=!1,s=0,a=0,o,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(h){a++,n===!1&&i.onStart!==void 0&&i.onStart(h,s,a),n=!0},this.itemEnd=function(h){s++,i.onProgress!==void 0&&i.onProgress(h,s,a),s===a&&(n=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(h){i.onError!==void 0&&i.onError(h)},this.resolveURL=function(h){return o?o(h):h},this.setURLModifier=function(h){return o=h,this},this.addHandler=function(h,c){return l.push(h,c),this},this.removeHandler=function(h){let c=l.indexOf(h);return c!==-1&&l.splice(c,2),this},this.getHandler=function(h){for(let c=0,u=l.length;c<u;c+=2){let d=l[c],p=l[c+1];if(d.global&&(d.lastIndex=0),d.test(h))return p}return null}}},t$=new XR,Hw=class{constructor(e){this.manager=e!==void 0?e:t$,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let r=this;return new Promise(function(i,n){r.load(e,i,t,n)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},Uo={},r$=class extends Error{constructor(e,t){super(e),this.response=t}},S7=class extends Hw{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let n=YM.get(e);if(n!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(n),this.manager.itemEnd(e)},0),n;if(Uo[e]!==void 0){Uo[e].push({onLoad:t,onProgress:r,onError:i});return}Uo[e]=[],Uo[e].push({onLoad:t,onProgress:r,onError:i});let s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,o=this.responseType;fetch(s).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let h=Uo[e],c=l.body.getReader(),u=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),d=u?parseInt(u):0,p=d!==0,f=0,m=new ReadableStream({start(g){v();function v(){c.read().then(({done:y,value:x})=>{if(y)g.close();else{f+=x.byteLength;let w=new ProgressEvent("progress",{lengthComputable:p,loaded:f,total:d});for(let _=0,b=h.length;_<b;_++){let S=h[_];S.onProgress&&S.onProgress(w)}g.enqueue(x),v()}})}}});return new Response(m)}else throw new r$(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(o){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(h=>new DOMParser().parseFromString(h,a));case"json":return l.json();default:if(a===void 0)return l.text();{let h=/charset="?([^;"\s]*)"?/i.exec(a),c=h&&h[1]?h[1].toLowerCase():void 0,u=new TextDecoder(c);return l.arrayBuffer().then(d=>u.decode(d))}}}).then(l=>{YM.add(e,l);let h=Uo[e];delete Uo[e];for(let c=0,u=h.length;c<u;c++){let d=h[c];d.onLoad&&d.onLoad(l)}}).catch(l=>{let h=Uo[e];if(h===void 0)throw this.manager.itemError(e),l;delete Uo[e];for(let c=0,u=h.length;c<u;c++){let d=h[c];d.onError&&d.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},Om=class extends ir{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new lt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}},i$=class extends Om{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ir.DEFAULT_UP),this.updateMatrix(),this.groundColor=new lt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},M5=new Ae,QM=new E,ZM=new E,Ww=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new X(512,512),this.map=null,this.mapPass=null,this.matrix=new Ae,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Bw,this._frameExtents=new X(1,1),this._viewportCount=1,this._viewports=[new Ct(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,r=this.matrix;QM.setFromMatrixPosition(e.matrixWorld),t.position.copy(QM),ZM.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(ZM),t.updateMatrixWorld(),M5.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(M5),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(M5)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},n$=class extends Ww{constructor(){super(new Wi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,r=J0*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,n=e.distance||t.far;(r!==t.fov||i!==t.aspect||n!==t.far)&&(t.fov=r,t.aspect=i,t.far=n,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},s$=class extends Om{constructor(e,t,r=0,i=Math.PI/3,n=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ir.DEFAULT_UP),this.updateMatrix(),this.target=new ir,this.distance=r,this.angle=i,this.penumbra=n,this.decay=s,this.map=null,this.shadow=new n$}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},KM=new Ae,Zf=new E,A5=new E,a$=class extends Ww{constructor(){super(new Wi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new X(4,2),this._viewportCount=6,this._viewports=[new Ct(2,1,1,1),new Ct(0,1,1,1),new Ct(3,1,1,1),new Ct(1,1,1,1),new Ct(3,0,1,1),new Ct(1,0,1,1)],this._cubeDirections=[new E(1,0,0),new E(-1,0,0),new E(0,0,1),new E(0,0,-1),new E(0,1,0),new E(0,-1,0)],this._cubeUps=[new E(0,1,0),new E(0,1,0),new E(0,1,0),new E(0,1,0),new E(0,0,1),new E(0,0,-1)]}updateMatrices(e,t=0){let r=this.camera,i=this.matrix,n=e.distance||r.far;n!==r.far&&(r.far=n,r.updateProjectionMatrix()),Zf.setFromMatrixPosition(e.matrixWorld),r.position.copy(Zf),A5.copy(r.position),A5.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(A5),r.updateMatrixWorld(),i.makeTranslation(-Zf.x,-Zf.y,-Zf.z),KM.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(KM)}},o$=class extends Om{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new a$}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},l$=class extends Ww{constructor(){super(new zw(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},h$=class extends Om{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ir.DEFAULT_UP),this.updateMatrix(),this.target=new ir,this.shadow=new l$}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},u$=class extends dt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},YR=class extends Hw{constructor(e){super(e)}load(e,t,r,i){let n=this,s=new S7(n.manager);s.setPath(n.path),s.setRequestHeader(n.requestHeader),s.setWithCredentials(n.withCredentials),s.load(e,function(a){try{t(n.parse(JSON.parse(a)))}catch(o){i?i(o):console.error(o),n.manager.itemError(e)}},r,i)}parse(e){let t={},r={};function i(u,d){if(t[d]!==void 0)return t[d];let p=u.interleavedBuffers[d],f=n(u,p.buffer),m=xg(p.type,f),g=new vK(m,p.stride);return g.uuid=p.uuid,t[d]=g,g}function n(u,d){if(r[d]!==void 0)return r[d];let p=u.arrayBuffers[d],f=new Uint32Array(p).buffer;return r[d]=f,f}let s=e.isInstancedBufferGeometry?new u$:new dt,a=e.data.index;if(a!==void 0){let u=xg(a.type,a.array);s.setIndex(new pt(u,1))}let o=e.data.attributes;for(let u in o){let d=o[u],p;if(d.isInterleavedBufferAttribute){let f=i(e.data,d.data);p=new w7(f,d.itemSize,d.offset,d.normalized)}else{let f=xg(d.type,d.array),m=d.isInstancedBufferAttribute?xK:pt;p=new m(f,d.itemSize,d.normalized)}d.name!==void 0&&(p.name=d.name),d.usage!==void 0&&p.setUsage(d.usage),d.updateRange!==void 0&&(p.updateRange.offset=d.updateRange.offset,p.updateRange.count=d.updateRange.count),s.setAttribute(u,p)}let l=e.data.morphAttributes;if(l)for(let u in l){let d=l[u],p=[];for(let f=0,m=d.length;f<m;f++){let g=d[f],v;if(g.isInterleavedBufferAttribute){let y=i(e.data,g.data);v=new w7(y,g.itemSize,g.offset,g.normalized)}else{let y=xg(g.type,g.array);v=new pt(y,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),p.push(v)}s.morphAttributes[u]=p}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);let h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let u=0,d=h.length;u!==d;++u){let p=h[u];s.addGroup(p.start,p.count,p.materialIndex)}let c=e.data.boundingSphere;if(c!==void 0){let u=new E;c.center!==void 0&&u.fromArray(c.center),s.boundingSphere=new _s(u,c.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}},c$=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=$M(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=$M();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function $M(){return(typeof performance>"u"?Date:performance).now()}var d$=class{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,n,s;switch(t){case"quaternion":i=this._slerp,n=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,n=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,n=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=n,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let r=this.buffer,i=this.valueSize,n=e*i+i,s=this.cumulativeWeight;if(s===0){for(let a=0;a!==i;++a)r[n+a]=r[a];s=t}else{s+=t;let a=t/s;this._mixBufferRegion(r,n,0,a,i)}this.cumulativeWeight=s}accumulateAdditive(e){let t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,r=this.buffer,i=e*t+t,n=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,n<1){let o=t*this._origIndex;this._mixBufferRegion(r,i,o,1-n,t)}s>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let o=t,l=t+t;o!==l;++o)if(r[o]!==r[o+t]){a.setValue(r,i);break}}saveOriginalState(){let e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let n=r,s=i;n!==s;++n)t[n]=t[i+n%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,n){if(i>=.5)for(let s=0;s!==n;++s)e[t+s]=e[r+s]}_slerp(e,t,r,i){Et.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,n){let s=this._workIndex*n;Et.multiplyQuaternionsFlat(e,s,e,t,e,r),Et.slerpFlat(e,t,e,t,e,s,i)}_lerp(e,t,r,i,n){let s=1-i;for(let a=0;a!==n;++a){let o=t+a;e[o]=e[o]*s+e[r+a]*i}}_lerpAdditive(e,t,r,i,n){for(let s=0;s!==n;++s){let a=t+s;e[a]=e[a]+e[r+s]*i}}},qw="\\[\\]\\.:\\/",p$=new RegExp("["+qw+"]","g"),Xw="[^"+qw+"]",f$="[^"+qw.replace("\\.","")+"]",m$=/((?:WC+[\/:])*)/.source.replace("WC",Xw),g$=/(WCOD+)?/.source.replace("WCOD",f$),v$=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Xw),y$=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Xw),x$=new RegExp("^"+m$+g$+v$+y$+"$"),w$=["material","materials","bones","map"],b$=class{constructor(e,t,r){let i=r||sr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();let r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){let r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,n=r.length;i!==n;++i)r[i].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}},sr=class{constructor(e,t,r){this.path=t,this.parsedPath=r||sr.parseTrackName(t),this.node=sr.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new sr.Composite(e,t,r):new sr(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(p$,"")}static parseTrackName(e){let t=x$.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){let n=r.nodeName.substring(i+1);w$.indexOf(n)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=n)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){let r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){let r=function(n){for(let s=0;s<n.length;s++){let a=n[s];if(a.name===t||a.uuid===t)return a;let o=r(a.children);if(o)return o}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,r=t.objectName,i=t.propertyName,n=t.propertyIndex;if(e||(e=sr.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let l=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===l){l=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}let s=e[i];if(s===void 0){let l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(n!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[n]!==void 0&&(n=e.morphTargetDictionary[n])}o=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=n}else s.fromArray!==void 0&&s.toArray!==void 0?(o=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(o=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};sr.Composite=b$;sr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};sr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};sr.prototype.GetterByBindingType=[sr.prototype._getValue_direct,sr.prototype._getValue_array,sr.prototype._getValue_arrayElement,sr.prototype._getValue_toArray];sr.prototype.SetterByBindingTypeAndVersioning=[[sr.prototype._setValue_direct,sr.prototype._setValue_direct_setNeedsUpdate,sr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[sr.prototype._setValue_array,sr.prototype._setValue_array_setNeedsUpdate,sr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[sr.prototype._setValue_arrayElement,sr.prototype._setValue_arrayElement_setNeedsUpdate,sr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[sr.prototype._setValue_fromArray,sr.prototype._setValue_fromArray_setNeedsUpdate,sr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var _$=class{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;let n=t.tracks,s=n.length,a=new Array(s),o={endingStart:jd,endingEnd:jd};for(let l=0;l!==s;++l){let h=n[l].createInterpolant(null);a[l]=h,h.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=pR,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){let i=this._clip.duration,n=e._clip.duration,s=n/i,a=i/n;e.warp(1,s,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){let i=this._mixer,n=i.time,s=this.timeScale,a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);let o=a.parameterPositions,l=a.sampleValues;return o[0]=n,o[1]=n+r,l[0]=e/s,l[1]=t/s,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}let n=this._startTime;if(n!==null){let o=(e-n)*r;o<0||r===0?t=0:(this._startTime=null,t=r*o)}t*=this._updateTimeScale(e);let s=this._updateTime(t),a=this._updateWeight(e);if(a>0){let o=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case rq:for(let h=0,c=o.length;h!==c;++h)o[h].evaluate(s),l[h].accumulateAdditive(a);break;case Dw:default:for(let h=0,c=o.length;h!==c;++h)o[h].evaluate(s),l[h].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let r=this._weightInterpolant;if(r!==null){let i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let r=this._timeScaleInterpolant;if(r!==null){let i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,r=this.loop,i=this.time+e,n=this._loopCount,s=r===Pw;if(e===0)return n===-1?i:s&&(n&1)===1?t-i:i;if(r===dR){n===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(n===-1&&(e>=0?(n=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=t||i<0){let a=Math.floor(i/t);i-=t*a,n+=Math.abs(a);let o=this.repetitions-n;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(o===1){let l=e<0;this._setEndings(l,!l,s)}else this._setEndings(!1,!1,s);this._loopCount=n,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(s&&(n&1)===1)return t-i}return i}_setEndings(e,t,r){let i=this._interpolantSettings;r?(i.endingStart=Vd,i.endingEnd=Vd):(e?i.endingStart=this.zeroSlopeAtStart?Vd:jd:i.endingStart=a3,t?i.endingEnd=this.zeroSlopeAtEnd?Vd:jd:i.endingEnd=a3)}_scheduleFading(e,t,r){let i=this._mixer,n=i.time,s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);let a=s.parameterPositions,o=s.sampleValues;return a[0]=n,o[0]=t,a[1]=n+e,o[1]=r,this}},C$=new Float32Array(1),S$=class extends Ni{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let r=e._localRoot||this._root,i=e._clip.tracks,n=i.length,s=e._propertyBindings,a=e._interpolants,o=r.uuid,l=this._bindingsByRootAndName,h=l[o];h===void 0&&(h={},l[o]=h);for(let c=0;c!==n;++c){let u=i[c],d=u.name,p=h[d];if(p!==void 0)++p.referenceCount,s[c]=p;else{if(p=s[c],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,o,d));continue}let f=t&&t._propertyBindings[c].binding.parsedPath;p=new d$(sr.create(r,d,f),u.ValueTypeName,u.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,o,d),s[c]=p}a[c].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){let r=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,i,r)}let t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){let n=t[r];n.useCount++===0&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){let n=t[r];--n.useCount===0&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){let i=this._actions,n=this._actionsByClip,s=n[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,n[t]=s;else{let a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[r]=e}_removeInactiveAction(e){let t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;let n=e._clip.uuid,s=this._actionsByClip,a=s[n],o=a.knownActions,l=o[o.length-1],h=e._byClipCacheIndex;l._byClipCacheIndex=h,o[h]=l,o.pop(),e._byClipCacheIndex=null;let c=a.actionByRoot,u=(e._localRoot||this._root).uuid;delete c[u],o.length===0&&delete s[n],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){let n=t[r];--n.referenceCount===0&&this._removeInactiveBinding(n)}}_lendAction(e){let t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_takeBackAction(e){let t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_addInactiveBinding(e,t,r){let i=this._bindingsByRootAndName,n=this._bindings,s=i[t];s===void 0&&(s={},i[t]=s),s[r]=e,e._cacheIndex=n.length,n.push(e)}_removeInactiveBinding(e){let t=this._bindings,r=e.binding,i=r.rootNode.uuid,n=r.path,s=this._bindingsByRootAndName,a=s[i],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete a[n],Object.keys(a).length===0&&delete s[i]}_lendBinding(e){let t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_takeBackBinding(e){let t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return r===void 0&&(r=new WR(new Float32Array(2),new Float32Array(2),1,C$),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){let t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,n=t[i];e.__cacheIndex=i,t[i]=e,n.__cacheIndex=r,t[r]=n}clipAction(e,t,r){let i=t||this._root,n=i.uuid,s=typeof e=="string"?C7.findByName(i,e):e,a=s!==null?s.uuid:e,o=this._actionsByClip[a],l=null;if(r===void 0&&(s!==null?r=s.blendMode:r=Dw),o!==void 0){let c=o.actionByRoot[n];if(c!==void 0&&c.blendMode===r)return c;l=o.knownActions[0],s===null&&(s=l._clip)}if(s===null)return null;let h=new _$(this,s,t,r);return this._bindAction(h,l),this._addInactiveAction(h,a,n),h}existingAction(e,t){let r=t||this._root,i=r.uuid,n=typeof e=="string"?C7.findByName(r,e):e,s=n?n.uuid:e,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){let e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;let t=this._actions,r=this._nActiveActions,i=this.time+=e,n=Math.sign(e),s=this._accuIndex^=1;for(let l=0;l!==r;++l)t[l]._update(i,e,n,s);let a=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)a[l].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,r=e.uuid,i=this._actionsByClip,n=i[r];if(n!==void 0){let s=n.knownActions;for(let a=0,o=s.length;a!==o;++a){let l=s[a];this._deactivateAction(l);let h=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=h,t[h]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[r]}}uncacheRoot(e){let t=e.uuid,r=this._actionsByClip;for(let s in r){let a=r[s].actionByRoot,o=a[t];o!==void 0&&(this._deactivateAction(o),this._removeInactiveAction(o))}let i=this._bindingsByRootAndName,n=i[t];if(n!==void 0)for(let s in n){let a=n[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){let r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}},Se=class{constructor(e){this.value=e}clone(){return new Se(this.value.clone===void 0?this.value:this.value.clone())}},QR=class{constructor(e,t,r=0,i=1/0){this.ray=new cf(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Iw,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return M7(e,this,r,t),r.sort(JM),r}intersectObjects(e,t=!0,r=[]){for(let i=0,n=e.length;i<n;i++)M7(e[i],this,r,t);return r.sort(JM),r}};function JM(e,t){return e.distance-t.distance}function M7(e,t,r,i){if(e.layers.test(t.layers)&&e.raycast(t,r),i===!0){let n=e.children;for(let s=0,a=n.length;s<a;s++)M7(n[s],t,r,!0)}}var eA=class{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(li(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},tA=new X,M$=class{constructor(e=new X(1/0,1/0),t=new X(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=tA.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return tA.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},rA=new E,Gg=new E,ra=class{constructor(e=new E,t=new E){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){rA.subVectors(e,this.start),Gg.subVectors(this.end,this.start);let r=Gg.dot(Gg),i=Gg.dot(rA)/r;return t&&(i=li(i,0,1)),i}closestPointToPoint(e,t,r){let i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},iA=new E,A$=class extends ir{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let r=new dt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,o=32;s<o;s++,a++){let l=s/o*Math.PI*2,h=a/o*Math.PI*2;i.push(Math.cos(l),Math.sin(l),1,Math.cos(h),Math.sin(h),1)}r.setAttribute("position",new Ke(i,3));let n=new eu({fog:!1,toneMapped:!1});this.cone=new Pm(r,n),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),iA.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(iA),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},E$=class extends kn{constructor(e,t,r){let i=new Gw(t,4,2),n=new Lm({wireframe:!0,fog:!1,toneMapped:!1});super(i,n),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},nA=new E,Hg=new E,sA=new E,T$=class extends ir{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new dt;i.setAttribute("position",new Ke([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let n=new eu({fog:!1,toneMapped:!1});this.lightPlane=new c3(i,n),this.add(this.lightPlane),i=new dt,i.setAttribute("position",new Ke([0,0,0,0,0,1],3)),this.targetLine=new c3(i,n),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),nA.setFromMatrixPosition(this.light.matrixWorld),Hg.setFromMatrixPosition(this.light.target.matrixWorld),sA.subVectors(Hg,nA),this.lightPlane.lookAt(Hg),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Hg),this.targetLine.scale.z=sA.length()}},Wg=new E,Lr=new pf,g3=class extends Pm{constructor(e){let t=new dt,r=new eu({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],n=[],s={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(p,f){o(p),o(f)}function o(p){i.push(0,0,0),n.push(0,0,0),s[p]===void 0&&(s[p]=[]),s[p].push(i.length/3-1)}t.setAttribute("position",new Ke(i,3)),t.setAttribute("color",new Ke(n,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();let l=new lt(16755200),h=new lt(16711680),c=new lt(43775),u=new lt(16777215),d=new lt(3355443);this.setColors(l,h,c,u,d)}setColors(e,t,r,i,n){let s=this.geometry.getAttribute("color");s.setXYZ(0,e.r,e.g,e.b),s.setXYZ(1,e.r,e.g,e.b),s.setXYZ(2,e.r,e.g,e.b),s.setXYZ(3,e.r,e.g,e.b),s.setXYZ(4,e.r,e.g,e.b),s.setXYZ(5,e.r,e.g,e.b),s.setXYZ(6,e.r,e.g,e.b),s.setXYZ(7,e.r,e.g,e.b),s.setXYZ(8,e.r,e.g,e.b),s.setXYZ(9,e.r,e.g,e.b),s.setXYZ(10,e.r,e.g,e.b),s.setXYZ(11,e.r,e.g,e.b),s.setXYZ(12,e.r,e.g,e.b),s.setXYZ(13,e.r,e.g,e.b),s.setXYZ(14,e.r,e.g,e.b),s.setXYZ(15,e.r,e.g,e.b),s.setXYZ(16,e.r,e.g,e.b),s.setXYZ(17,e.r,e.g,e.b),s.setXYZ(18,e.r,e.g,e.b),s.setXYZ(19,e.r,e.g,e.b),s.setXYZ(20,e.r,e.g,e.b),s.setXYZ(21,e.r,e.g,e.b),s.setXYZ(22,e.r,e.g,e.b),s.setXYZ(23,e.r,e.g,e.b),s.setXYZ(24,t.r,t.g,t.b),s.setXYZ(25,t.r,t.g,t.b),s.setXYZ(26,t.r,t.g,t.b),s.setXYZ(27,t.r,t.g,t.b),s.setXYZ(28,t.r,t.g,t.b),s.setXYZ(29,t.r,t.g,t.b),s.setXYZ(30,t.r,t.g,t.b),s.setXYZ(31,t.r,t.g,t.b),s.setXYZ(32,r.r,r.g,r.b),s.setXYZ(33,r.r,r.g,r.b),s.setXYZ(34,r.r,r.g,r.b),s.setXYZ(35,r.r,r.g,r.b),s.setXYZ(36,r.r,r.g,r.b),s.setXYZ(37,r.r,r.g,r.b),s.setXYZ(38,i.r,i.g,i.b),s.setXYZ(39,i.r,i.g,i.b),s.setXYZ(40,n.r,n.g,n.b),s.setXYZ(41,n.r,n.g,n.b),s.setXYZ(42,n.r,n.g,n.b),s.setXYZ(43,n.r,n.g,n.b),s.setXYZ(44,n.r,n.g,n.b),s.setXYZ(45,n.r,n.g,n.b),s.setXYZ(46,n.r,n.g,n.b),s.setXYZ(47,n.r,n.g,n.b),s.setXYZ(48,n.r,n.g,n.b),s.setXYZ(49,n.r,n.g,n.b),s.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap,r=1,i=1;Lr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),kr("c",t,e,Lr,0,0,-1),kr("t",t,e,Lr,0,0,1),kr("n1",t,e,Lr,-r,-i,-1),kr("n2",t,e,Lr,r,-i,-1),kr("n3",t,e,Lr,-r,i,-1),kr("n4",t,e,Lr,r,i,-1),kr("f1",t,e,Lr,-r,-i,1),kr("f2",t,e,Lr,r,-i,1),kr("f3",t,e,Lr,-r,i,1),kr("f4",t,e,Lr,r,i,1),kr("u1",t,e,Lr,r*.7,i*1.1,-1),kr("u2",t,e,Lr,-r*.7,i*1.1,-1),kr("u3",t,e,Lr,0,i*2,-1),kr("cf1",t,e,Lr,-r,0,1),kr("cf2",t,e,Lr,r,0,1),kr("cf3",t,e,Lr,0,-i,1),kr("cf4",t,e,Lr,0,i,1),kr("cn1",t,e,Lr,-r,0,-1),kr("cn2",t,e,Lr,r,0,-1),kr("cn3",t,e,Lr,0,-i,-1),kr("cn4",t,e,Lr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function kr(e,t,r,i,n,s,a){Wg.set(n,s,a).unproject(i);let o=t[e];if(o!==void 0){let l=r.getAttribute("position");for(let h=0,c=o.length;h<c;h++)l.setXYZ(o[h],Wg.x,Wg.y,Wg.z)}}var v3=class extends Pm{constructor(e,t=16776960){let r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],n=new dt;n.setIndex(new pt(r,1)),n.setAttribute("position",new Ke(i,3)),super(n,new eu({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},L$=class extends Pm{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new dt;i.setAttribute("position",new Ke(t,3)),i.setAttribute("color",new Ke(r,3));let n=new eu({vertexColors:!0,toneMapped:!1});super(i,n),this.type="AxesHelper"}setColors(e,t,r){let i=new lt,n=this.geometry.attributes.color.array;return i.set(e),i.toArray(n,0),i.toArray(n,3),i.set(t),i.toArray(n,6),i.toArray(n,9),i.set(r),i.toArray(n,12),i.toArray(n,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:uf}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=uf);var Kf=".",Yw=Symbol("target"),ZR=Symbol("unsubscribe");function A7(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}function P$(e){return(typeof e=="object"?e===null:typeof e!="function")||e instanceof RegExp}var ho=Array.isArray;function Qw(e){return typeof e=="symbol"}var D$={after:(e,t)=>ho(e)?e.slice(t.length):t===""?e:e.slice(t.length+1),concat:(e,t)=>ho(e)?(e=[...e],t&&e.push(t),e):t&&t.toString!==void 0?(e!==""&&(e+=Kf),Qw(t)?e+t.toString():e+t):e,initial:e=>{if(ho(e))return e.slice(0,-1);if(e==="")return e;let t=e.lastIndexOf(Kf);return t===-1?"":e.slice(0,t)},last:e=>{if(ho(e))return e[e.length-1]||"";if(e==="")return e;let t=e.lastIndexOf(Kf);return t===-1?e:e.slice(t+1)},walk:(e,t)=>{if(ho(e))for(let r of e)t(r);else if(e!==""){let r=0,i=e.indexOf(Kf);if(i===-1)t(e);else for(;r<e.length;)i===-1&&(i=e.length),t(e.slice(r,i)),r=i+1,i=e.indexOf(Kf,r)}},get(e,t){return this.walk(t,r=>{e&&(e=e[r])}),e}},ks=D$;function O$(e){return typeof e=="object"&&typeof e.next=="function"}function I$(e,t,r,i,n){let s=e.next;if(t.name==="entries")e.next=function(){let a=s.call(this);return a.done===!1&&(a.value[0]=n(a.value[0],t,a.value[0],i),a.value[1]=n(a.value[1],t,a.value[0],i)),a};else if(t.name==="values"){let a=r[Yw].keys();e.next=function(){let o=s.call(this);return o.done===!1&&(o.value=n(o.value,t,a.next().value,i)),o}}else e.next=function(){let a=s.call(this);return a.done===!1&&(a.value=n(a.value,t,a.value,i)),a};return e}function aA(e,t,r){return e.isUnsubscribed||t.ignoreSymbols&&Qw(r)||t.ignoreUnderscores&&r.charAt(0)==="_"||"ignoreKeys"in t&&t.ignoreKeys.includes(r)}var R$=class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return this._descriptorCache===void 0&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let t=this._getDescriptorCache(),r=t.get(e);return r===void 0&&(r={},t.set(e,r)),r}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);let r=this._getProperties(e),i=r[t];return i===void 0&&(i=Reflect.getOwnPropertyDescriptor(e,t),r[t]=i),i}getProxy(e,t,r,i){if(this.isUnsubscribed)return e;let n=e[i],s=n||e;this._pathCache.set(s,t);let a=this._proxyCache.get(s);return a===void 0&&(a=n===void 0?new Proxy(e,r):e,this._proxyCache.set(s,a)),a}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,ks.get(t,this.getPath(e)))}defineProperty(e,t,r){return Reflect.defineProperty(e,t,r)?(this.isUnsubscribed||(this._getProperties(e)[t]=r),!0):!1}setProperty(e,t,r,i,n){if(!this._equals(n,r)||!(t in e)){let s=this._getOwnPropertyDescriptor(e,t);return s!==void 0&&"set"in s?Reflect.set(e,t,r,i):Reflect.set(e,t,r)}return!0}deleteProperty(e,t,r){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){let i=this._getDescriptorCache().get(e);i&&(delete i[t],this._pathCache.delete(r))}return!0}return!1}isSameDescriptor(e,t,r){let i=this._getOwnPropertyDescriptor(t,r);return e!==void 0&&i!==void 0&&Object.is(e.value,i.value)&&(e.writable||!1)===(i.writable||!1)&&(e.enumerable||!1)===(i.enumerable||!1)&&(e.configurable||!1)===(i.configurable||!1)&&e.get===i.get&&e.set===i.set}isGetInvariant(e,t){let r=this._getOwnPropertyDescriptor(e,t);return r!==void 0&&r.configurable!==!0&&r.writable!==!0}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function E7(e){return toString.call(e)==="[object Object]"}function qg(){return!0}function Qc(e,t){return e.length!==t.length||e.some((r,i)=>t[i]!==r)}var KR=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),B$=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),$R={push:qg,pop:qg,shift:qg,unshift:qg,copyWithin:Qc,reverse:Qc,sort:Qc,splice:Qc,flat:Qc,fill:Qc},z$=new Set([...KR,...B$,...Object.keys($R)]);function Xg(e,t){if(e.size!==t.size)return!0;for(let r of e)if(!t.has(r))return!0;return!1}var JR=["keys","values","entries"],eB=new Set(["has","toString"]),tB={add:Xg,clear:Xg,delete:Xg,forEach:Xg},k$=new Set([...eB,...Object.keys(tB),...JR]);function Yg(e,t){if(e.size!==t.size)return!0;let r;for(let[i,n]of e)if(r=t.get(i),r!==n||r===void 0&&!t.has(i))return!0;return!1}var N$=new Set([...eB,"get"]),rB={set:Yg,clear:Yg,delete:Yg,forEach:Yg},F$=new Set([...N$,...Object.keys(rB),...JR]),Xh=class{constructor(e,t,r,i){this._path=t,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=i,this._changes=i?[]:null,this.clone=t===void 0?e:this._shallowClone(e)}static isHandledMethod(e){return KR.has(e)}_shallowClone(e){let t=e;if(E7(e))t={...e};else if(ho(e))t=[...e];else if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set([...e].map(r=>this._shallowClone(r)));else if(e instanceof Map){t=new Map;for(let[r,i]of e.entries())t.set(r,this._shallowClone(i))}return this._clonedCache.add(t),t}preferredThisArg(e,t,r,i){return e?(ho(i)?this._onIsChanged=$R[t]:i instanceof Set?this._onIsChanged=tB[t]:i instanceof Map&&(this._onIsChanged=rB[t]),i):r}update(e,t,r){let i=ks.after(e,this._path);if(t!=="length"){let n=this.clone;ks.walk(i,s=>{n&&n[s]&&(this._clonedCache.has(n[s])||(n[s]=this._shallowClone(n[s])),n=n[s])}),this._hasOnValidate&&this._changes.push({path:i,property:t,previous:r}),n&&n[t]&&(n[t]=r)}this._isChanged=!0}undo(e){let t;for(let r=this._changes.length-1;r!==-1;r--)t=this._changes[r],ks.get(e,t.path)[t.property]=t.previous}isChanged(e){return this._onIsChanged===void 0?this._isChanged:this._onIsChanged(this.clone,e)}},oA=class extends Xh{static isHandledMethod(e){return z$.has(e)}},U$=class extends Xh{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}},lA=class extends Xh{static isHandledMethod(e){return k$.has(e)}undo(e){for(let t of this.clone)e.add(t);for(let t of e)this.clone.has(t)||e.delete(t)}},hA=class extends Xh{static isHandledMethod(e){return F$.has(e)}undo(e){for(let[t,r]of this.clone.entries())e.set(t,r);for(let t of e.keys())this.clone.has(t)||e.delete(t)}},j$=class extends Xh{constructor(e,t,r,i){super(void 0,t,r,i),this._arg1=r[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},V$=class extends Xh{constructor(e,t,r,i){super(void 0,t,r,i),this._weakKey=r[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},yd=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return E7(e)||ho(e)||A7(e)}static isHandledMethod(e,t){return E7(e)?Xh.isHandledMethod(t):ho(e)?oA.isHandledMethod(t):e instanceof Set?lA.isHandledMethod(t):e instanceof Map?hA.isHandledMethod(t):A7(e)}get isCloning(){return this._stack.length>0}start(e,t,r){let i=Xh;ho(e)?i=oA:e instanceof Date?i=U$:e instanceof Set?i=lA:e instanceof Map?i=hA:e instanceof WeakSet?i=j$:e instanceof WeakMap&&(i=V$),this._stack.push(new i(e,t,r,this._hasOnValidate))}update(e,t,r){this._stack[this._stack.length-1].update(e,t,r)}preferredThisArg(e,t,r){let{name:i}=e,n=yd.isHandledMethod(r,i);return this._stack[this._stack.length-1].preferredThisArg(n,i,t,r)}isChanged(e,t,r){return this._stack[this._stack.length-1].isChanged(e,t,r)}undo(e){this._previousClone!==void 0&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},G$={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},Zw=(e,t,r={})=>{r={...G$,...r};let i=Symbol("ProxyTarget"),{equals:n,isShallow:s,ignoreDetached:a,details:o}=r,l=new R$(n),h=typeof r.onValidate=="function",c=new yd(h),u=(y,x,w,_,b)=>!h||c.isCloning||r.onValidate(ks.concat(l.getPath(y),x),w,_,b)===!0,d=(y,x,w,_)=>{!aA(l,r,x)&&!(a&&l.isDetached(y,e))&&p(l.getPath(y),x,w,_)},p=(y,x,w,_,b)=>{c.isCloning?c.update(y,x,_):t(ks.concat(y,x),w,_,b)},f=y=>y&&(y[i]||y),m=(y,x,w,_)=>P$(y)||w==="constructor"||s&&!yd.isHandledMethod(x,w)||aA(l,r,w)||l.isGetInvariant(x,w)||a&&l.isDetached(x,e)?y:(_===void 0&&(_=l.getPath(x)),l.getProxy(y,ks.concat(_,w),g,i)),g={get(y,x,w){if(Qw(x)){if(x===i||x===Yw)return y;if(x===ZR&&!l.isUnsubscribed&&l.getPath(y).length===0)return l.unsubscribe(),y}let _=A7(y)?Reflect.get(y,x):Reflect.get(y,x,w);return m(_,y,x)},set(y,x,w,_){w=f(w);let b=y[i]||y,S=b[x];if(n(S,w)&&x in y)return!0;let C=u(y,x,w,S);return C&&l.setProperty(b,x,w,_,S)?(d(y,x,y[x],S),!0):!C},defineProperty(y,x,w){if(!l.isSameDescriptor(w,y,x)){let _=y[x];u(y,x,w.value,_)&&l.defineProperty(y,x,w,_)&&d(y,x,w.value,_)}return!0},deleteProperty(y,x){if(!Reflect.has(y,x))return!0;let w=Reflect.get(y,x),_=u(y,x,void 0,w);return _&&l.deleteProperty(y,x,w)?(d(y,x,void 0,w),!0):!_},apply(y,x,w){let _=x[i]||x;if(l.isUnsubscribed)return Reflect.apply(y,_,w);if((o===!1||o!==!0&&!o.includes(y.name))&&yd.isHandledType(_)){let b=ks.initial(l.getPath(y)),S=yd.isHandledMethod(_,y.name);c.start(_,b,w);let C=Reflect.apply(y,c.preferredThisArg(y,x,_),S?w.map(T=>f(T)):w),M=c.isChanged(_,n),A=c.stop();if(yd.isHandledType(C)&&S&&(x instanceof Map&&y.name==="get"&&(b=ks.concat(b,w[0])),C=l.getProxy(C,b,g)),M){let T={name:y.name,args:w,result:C},L=c.isCloning?ks.initial(b):b,D=c.isCloning?ks.last(b):"";u(ks.get(e,L),D,_,A,T)?p(L,D,_,A,T):c.undo(_)}return(x instanceof Map||x instanceof Set)&&O$(C)?I$(C,y,x,b,m):C}return Reflect.apply(y,x,w)}},v=l.getProxy(e,r.pathAsArray?[]:"",g);return t=t.bind(v),h&&(r.onValidate=r.onValidate.bind(v)),v};Zw.target=e=>e&&e[Yw]||e;Zw.unsubscribe=e=>e[ZR]||e;var uA=Zw,H$=typeof global=="object"&&global&&global.Object===Object&&global,iB=H$,W$=typeof self=="object"&&self&&self.Object===Object&&self,q$=iB||W$||Function("return this")(),Na=q$,X$=Na.Symbol,oa=X$,nB=Object.prototype,Y$=nB.hasOwnProperty,Q$=nB.toString,$f=oa?oa.toStringTag:void 0;function Z$(e){var t=Y$.call(e,$f),r=e[$f];try{e[$f]=void 0;var i=!0}catch{}var n=Q$.call(e);return i&&(t?e[$f]=r:delete e[$f]),n}var K$=Z$,$$=Object.prototype,J$=$$.toString;function eJ(e){return J$.call(e)}var tJ=eJ,rJ="[object Null]",iJ="[object Undefined]",cA=oa?oa.toStringTag:void 0;function nJ(e){return e==null?e===void 0?iJ:rJ:cA&&cA in Object(e)?K$(e):tJ(e)}var Ac=nJ;function sJ(e){return e!=null&&typeof e=="object"}var Pl=sJ,aJ="[object Symbol]";function oJ(e){return typeof e=="symbol"||Pl(e)&&Ac(e)==aJ}var Ey=oJ;function lJ(e,t){for(var r=-1,i=e==null?0:e.length,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n}var sB=lJ,hJ=Array.isArray,Eo=hJ,uJ=1/0,dA=oa?oa.prototype:void 0,pA=dA?dA.toString:void 0;function aB(e){if(typeof e=="string")return e;if(Eo(e))return sB(e,aB)+"";if(Ey(e))return pA?pA.call(e):"";var t=e+"";return t=="0"&&1/e==-uJ?"-0":t}var cJ=aB,dJ=/\s/;function pJ(e){for(var t=e.length;t--&&dJ.test(e.charAt(t)););return t}var fJ=pJ,mJ=/^\s+/;function gJ(e){return e&&e.slice(0,fJ(e)+1).replace(mJ,"")}var vJ=gJ;function yJ(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ka=yJ,fA=0/0,xJ=/^[-+]0x[0-9a-f]+$/i,wJ=/^0b[01]+$/i,bJ=/^0o[0-7]+$/i,_J=parseInt;function CJ(e){if(typeof e=="number")return e;if(Ey(e))return fA;if(ka(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ka(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=vJ(e);var r=wJ.test(e);return r||bJ.test(e)?_J(e.slice(2),r?2:8):xJ.test(e)?fA:+e}var mA=CJ;function SJ(e){return e}var MJ=SJ,AJ="[object AsyncFunction]",EJ="[object Function]",TJ="[object GeneratorFunction]",LJ="[object Proxy]";function PJ(e){if(!ka(e))return!1;var t=Ac(e);return t==EJ||t==TJ||t==AJ||t==LJ}var oB=PJ,DJ=Na["__core-js_shared__"],E5=DJ,gA=function(){var e=/[^.]+$/.exec(E5&&E5.keys&&E5.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function OJ(e){return!!gA&&gA in e}var IJ=OJ,RJ=Function.prototype,BJ=RJ.toString;function zJ(e){if(e!=null){try{return BJ.call(e)}catch{}try{return e+""}catch{}}return""}var Ec=zJ,kJ=/[\\^$.*+?()[\]{}|]/g,NJ=/^\[object .+?Constructor\]$/,FJ=Function.prototype,UJ=Object.prototype,jJ=FJ.toString,VJ=UJ.hasOwnProperty,GJ=RegExp("^"+jJ.call(VJ).replace(kJ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function HJ(e){if(!ka(e)||IJ(e))return!1;var t=oB(e)?GJ:NJ;return t.test(Ec(e))}var WJ=HJ;function qJ(e,t){return e==null?void 0:e[t]}var XJ=qJ;function YJ(e,t){var r=XJ(e,t);return WJ(r)?r:void 0}var Tc=YJ,QJ=Tc(Na,"WeakMap"),T7=QJ,vA=Object.create,ZJ=function(){function e(){}return function(t){if(!ka(t))return{};if(vA)return vA(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),KJ=ZJ;function $J(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var JJ=$J;function eee(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}var tee=eee,ree=800,iee=16,nee=Date.now;function see(e){var t=0,r=0;return function(){var i=nee(),n=iee-(i-r);if(r=i,n>0){if(++t>=ree)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var aee=see;function oee(e){return function(){return e}}var lee=oee,hee=function(){try{var e=Tc(Object,"defineProperty");return e({},"",{}),e}catch{}}(),y3=hee,uee=y3?function(e,t){return y3(e,"toString",{configurable:!0,enumerable:!1,value:lee(t),writable:!0})}:MJ,cee=uee,dee=aee(cee),pee=dee;function fee(e,t){for(var r=-1,i=e==null?0:e.length;++r<i&&t(e[r],r,e)!==!1;);return e}var mee=fee,gee=9007199254740991,vee=/^(?:0|[1-9]\d*)$/;function yee(e,t){var r=typeof e;return t=t??gee,!!t&&(r=="number"||r!="symbol"&&vee.test(e))&&e>-1&&e%1==0&&e<t}var Kw=yee;function xee(e,t,r){t=="__proto__"&&y3?y3(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var lB=xee;function wee(e,t){return e===t||e!==e&&t!==t}var $w=wee,bee=Object.prototype,_ee=bee.hasOwnProperty;function Cee(e,t,r){var i=e[t];(!(_ee.call(e,t)&&$w(i,r))||r===void 0&&!(t in e))&&lB(e,t,r)}var Jw=Cee;function See(e,t,r,i){var n=!r;r||(r={});for(var s=-1,a=t.length;++s<a;){var o=t[s],l=i?i(r[o],e[o],o,r,e):void 0;l===void 0&&(l=e[o]),n?lB(r,o,l):Jw(r,o,l)}return r}var Im=See,yA=Math.max;function Mee(e,t,r){return t=yA(t===void 0?e.length-1:t,0),function(){for(var i=arguments,n=-1,s=yA(i.length-t,0),a=Array(s);++n<s;)a[n]=i[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=i[n];return o[t]=r(a),JJ(e,this,o)}}var Aee=Mee,Eee=9007199254740991;function Tee(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Eee}var eb=Tee;function Lee(e){return e!=null&&eb(e.length)&&!oB(e)}var hB=Lee,Pee=Object.prototype;function Dee(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Pee;return e===r}var tb=Dee;function Oee(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var Iee=Oee,Ree="[object Arguments]";function Bee(e){return Pl(e)&&Ac(e)==Ree}var xA=Bee,uB=Object.prototype,zee=uB.hasOwnProperty,kee=uB.propertyIsEnumerable,Nee=xA(function(){return arguments}())?xA:function(e){return Pl(e)&&zee.call(e,"callee")&&!kee.call(e,"callee")},rb=Nee;function Fee(){return!1}var Uee=Fee,cB=typeof gs=="object"&&gs&&!gs.nodeType&&gs,wA=cB&&typeof vs=="object"&&vs&&!vs.nodeType&&vs,jee=wA&&wA.exports===cB,bA=jee?Na.Buffer:void 0,Vee=bA?bA.isBuffer:void 0,Gee=Vee||Uee,x3=Gee,Hee="[object Arguments]",Wee="[object Array]",qee="[object Boolean]",Xee="[object Date]",Yee="[object Error]",Qee="[object Function]",Zee="[object Map]",Kee="[object Number]",$ee="[object Object]",Jee="[object RegExp]",ete="[object Set]",tte="[object String]",rte="[object WeakMap]",ite="[object ArrayBuffer]",nte="[object DataView]",ste="[object Float32Array]",ate="[object Float64Array]",ote="[object Int8Array]",lte="[object Int16Array]",hte="[object Int32Array]",ute="[object Uint8Array]",cte="[object Uint8ClampedArray]",dte="[object Uint16Array]",pte="[object Uint32Array]",gr={};gr[ste]=gr[ate]=gr[ote]=gr[lte]=gr[hte]=gr[ute]=gr[cte]=gr[dte]=gr[pte]=!0;gr[Hee]=gr[Wee]=gr[ite]=gr[qee]=gr[nte]=gr[Xee]=gr[Yee]=gr[Qee]=gr[Zee]=gr[Kee]=gr[$ee]=gr[Jee]=gr[ete]=gr[tte]=gr[rte]=!1;function fte(e){return Pl(e)&&eb(e.length)&&!!gr[Ac(e)]}var mte=fte;function gte(e){return function(t){return e(t)}}var ib=gte,dB=typeof gs=="object"&&gs&&!gs.nodeType&&gs,p0=dB&&typeof vs=="object"&&vs&&!vs.nodeType&&vs,vte=p0&&p0.exports===dB,T5=vte&&iB.process,yte=function(){try{var e=p0&&p0.require&&p0.require("util").types;return e||T5&&T5.binding&&T5.binding("util")}catch{}}(),qp=yte,_A=qp&&qp.isTypedArray,xte=_A?ib(_A):mte,pB=xte,wte=Object.prototype,bte=wte.hasOwnProperty;function _te(e,t){var r=Eo(e),i=!r&&rb(e),n=!r&&!i&&x3(e),s=!r&&!i&&!n&&pB(e),a=r||i||n||s,o=a?Iee(e.length,String):[],l=o.length;for(var h in e)(t||bte.call(e,h))&&!(a&&(h=="length"||n&&(h=="offset"||h=="parent")||s&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||Kw(h,l)))&&o.push(h);return o}var fB=_te;function Cte(e,t){return function(r){return e(t(r))}}var mB=Cte,Ste=mB(Object.keys,Object),Mte=Ste,Ate=Object.prototype,Ete=Ate.hasOwnProperty;function Tte(e){if(!tb(e))return Mte(e);var t=[];for(var r in Object(e))Ete.call(e,r)&&r!="constructor"&&t.push(r);return t}var Lte=Tte;function Pte(e){return hB(e)?fB(e):Lte(e)}var nb=Pte;function Dte(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Ote=Dte,Ite=Object.prototype,Rte=Ite.hasOwnProperty;function Bte(e){if(!ka(e))return Ote(e);var t=tb(e),r=[];for(var i in e)i=="constructor"&&(t||!Rte.call(e,i))||r.push(i);return r}var zte=Bte;function kte(e){return hB(e)?fB(e,!0):zte(e)}var sb=kte,Nte=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fte=/^\w*$/;function Ute(e,t){if(Eo(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Ey(e)?!0:Fte.test(e)||!Nte.test(e)||t!=null&&e in Object(t)}var jte=Ute,Vte=Tc(Object,"create"),im=Vte;function Gte(){this.__data__=im?im(null):{},this.size=0}var Hte=Gte;function Wte(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var qte=Wte,Xte="__lodash_hash_undefined__",Yte=Object.prototype,Qte=Yte.hasOwnProperty;function Zte(e){var t=this.__data__;if(im){var r=t[e];return r===Xte?void 0:r}return Qte.call(t,e)?t[e]:void 0}var Kte=Zte,$te=Object.prototype,Jte=$te.hasOwnProperty;function ere(e){var t=this.__data__;return im?t[e]!==void 0:Jte.call(t,e)}var tre=ere,rre="__lodash_hash_undefined__";function ire(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=im&&t===void 0?rre:t,this}var nre=ire;function vf(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}vf.prototype.clear=Hte;vf.prototype.delete=qte;vf.prototype.get=Kte;vf.prototype.has=tre;vf.prototype.set=nre;var CA=vf;function sre(){this.__data__=[],this.size=0}var are=sre;function ore(e,t){for(var r=e.length;r--;)if($w(e[r][0],t))return r;return-1}var Ty=ore,lre=Array.prototype,hre=lre.splice;function ure(e){var t=this.__data__,r=Ty(t,e);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():hre.call(t,r,1),--this.size,!0}var cre=ure;function dre(e){var t=this.__data__,r=Ty(t,e);return r<0?void 0:t[r][1]}var pre=dre;function fre(e){return Ty(this.__data__,e)>-1}var mre=fre;function gre(e,t){var r=this.__data__,i=Ty(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}var vre=gre;function yf(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}yf.prototype.clear=are;yf.prototype.delete=cre;yf.prototype.get=pre;yf.prototype.has=mre;yf.prototype.set=vre;var Ly=yf,yre=Tc(Na,"Map"),nm=yre;function xre(){this.size=0,this.__data__={hash:new CA,map:new(nm||Ly),string:new CA}}var wre=xre;function bre(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var _re=bre;function Cre(e,t){var r=e.__data__;return _re(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Py=Cre;function Sre(e){var t=Py(this,e).delete(e);return this.size-=t?1:0,t}var Mre=Sre;function Are(e){return Py(this,e).get(e)}var Ere=Are;function Tre(e){return Py(this,e).has(e)}var Lre=Tre;function Pre(e,t){var r=Py(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}var Dre=Pre;function xf(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}xf.prototype.clear=wre;xf.prototype.delete=Mre;xf.prototype.get=Ere;xf.prototype.has=Lre;xf.prototype.set=Dre;var Dy=xf,Ore="Expected a function";function ab(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Ore);var r=function(){var i=arguments,n=t?t.apply(this,i):i[0],s=r.cache;if(s.has(n))return s.get(n);var a=e.apply(this,i);return r.cache=s.set(n,a)||s,a};return r.cache=new(ab.Cache||Dy),r}ab.Cache=Dy;var Ire=ab,Rre=500;function Bre(e){var t=Ire(e,function(i){return r.size===Rre&&r.clear(),i}),r=t.cache;return t}var zre=Bre,kre=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Nre=/\\(\\)?/g,Fre=zre(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(kre,function(r,i,n,s){t.push(n?s.replace(Nre,"$1"):i||r)}),t}),Ure=Fre;function jre(e){return e==null?"":cJ(e)}var Vre=jre;function Gre(e,t){return Eo(e)?e:jte(e,t)?[e]:Ure(Vre(e))}var wf=Gre,Hre=1/0;function Wre(e){if(typeof e=="string"||Ey(e))return e;var t=e+"";return t=="0"&&1/e==-Hre?"-0":t}var Oy=Wre;function qre(e,t){t=wf(t,e);for(var r=0,i=t.length;e!=null&&r<i;)e=e[Oy(t[r++])];return r&&r==i?e:void 0}var gB=qre;function Xre(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e}var ob=Xre,SA=oa?oa.isConcatSpreadable:void 0;function Yre(e){return Eo(e)||rb(e)||!!(SA&&e&&e[SA])}var Qre=Yre;function vB(e,t,r,i,n){var s=-1,a=e.length;for(r||(r=Qre),n||(n=[]);++s<a;){var o=e[s];t>0&&r(o)?t>1?vB(o,t-1,r,i,n):ob(n,o):i||(n[n.length]=o)}return n}var Zre=vB;function Kre(e){var t=e==null?0:e.length;return t?Zre(e,1):[]}var $re=Kre;function Jre(e){return pee(Aee(e,void 0,$re),e+"")}var yB=Jre,eie=mB(Object.getPrototypeOf,Object),lb=eie,tie="[object Object]",rie=Function.prototype,iie=Object.prototype,xB=rie.toString,nie=iie.hasOwnProperty,sie=xB.call(Object);function aie(e){if(!Pl(e)||Ac(e)!=tie)return!1;var t=lb(e);if(t===null)return!0;var r=nie.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&xB.call(r)==sie}var oie=aie;function lie(e,t,r){var i=-1,n=e.length;t<0&&(t=-t>n?0:n+t),r=r>n?n:r,r<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(n);++i<n;)s[i]=e[i+t];return s}var hie=lie;function uie(){this.__data__=new Ly,this.size=0}var cie=uie;function die(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var pie=die;function fie(e){return this.__data__.get(e)}var mie=fie;function gie(e){return this.__data__.has(e)}var vie=gie,yie=200;function xie(e,t){var r=this.__data__;if(r instanceof Ly){var i=r.__data__;if(!nm||i.length<yie-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new Dy(i)}return r.set(e,t),this.size=r.size,this}var wie=xie;function bf(e){var t=this.__data__=new Ly(e);this.size=t.size}bf.prototype.clear=cie;bf.prototype.delete=pie;bf.prototype.get=mie;bf.prototype.has=vie;bf.prototype.set=wie;var l2=bf;function bie(e,t){return e&&Im(t,nb(t),e)}var _ie=bie;function Cie(e,t){return e&&Im(t,sb(t),e)}var Sie=Cie,wB=typeof gs=="object"&&gs&&!gs.nodeType&&gs,MA=wB&&typeof vs=="object"&&vs&&!vs.nodeType&&vs,Mie=MA&&MA.exports===wB,AA=Mie?Na.Buffer:void 0,EA=AA?AA.allocUnsafe:void 0;function Aie(e,t){if(t)return e.slice();var r=e.length,i=EA?EA(r):new e.constructor(r);return e.copy(i),i}var Eie=Aie;function Tie(e,t){for(var r=-1,i=e==null?0:e.length,n=0,s=[];++r<i;){var a=e[r];t(a,r,e)&&(s[n++]=a)}return s}var Lie=Tie;function Pie(){return[]}var bB=Pie,Die=Object.prototype,Oie=Die.propertyIsEnumerable,TA=Object.getOwnPropertySymbols,Iie=TA?function(e){return e==null?[]:(e=Object(e),Lie(TA(e),function(t){return Oie.call(e,t)}))}:bB,hb=Iie;function Rie(e,t){return Im(e,hb(e),t)}var Bie=Rie,zie=Object.getOwnPropertySymbols,kie=zie?function(e){for(var t=[];e;)ob(t,hb(e)),e=lb(e);return t}:bB,_B=kie;function Nie(e,t){return Im(e,_B(e),t)}var Fie=Nie;function Uie(e,t,r){var i=t(e);return Eo(e)?i:ob(i,r(e))}var CB=Uie;function jie(e){return CB(e,nb,hb)}var L7=jie;function Vie(e){return CB(e,sb,_B)}var SB=Vie,Gie=Tc(Na,"DataView"),P7=Gie,Hie=Tc(Na,"Promise"),D7=Hie,Wie=Tc(Na,"Set"),O7=Wie,LA="[object Map]",qie="[object Object]",PA="[object Promise]",DA="[object Set]",OA="[object WeakMap]",IA="[object DataView]",Xie=Ec(P7),Yie=Ec(nm),Qie=Ec(D7),Zie=Ec(O7),Kie=Ec(T7),wu=Ac;(P7&&wu(new P7(new ArrayBuffer(1)))!=IA||nm&&wu(new nm)!=LA||D7&&wu(D7.resolve())!=PA||O7&&wu(new O7)!=DA||T7&&wu(new T7)!=OA)&&(wu=function(e){var t=Ac(e),r=t==qie?e.constructor:void 0,i=r?Ec(r):"";if(i)switch(i){case Xie:return IA;case Yie:return LA;case Qie:return PA;case Zie:return DA;case Kie:return OA}return t});var sm=wu,$ie=Object.prototype,Jie=$ie.hasOwnProperty;function ene(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Jie.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var tne=ene,rne=Na.Uint8Array,w3=rne;function ine(e){var t=new e.constructor(e.byteLength);return new w3(t).set(new w3(e)),t}var ub=ine;function nne(e,t){var r=t?ub(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var sne=nne,ane=/\w*$/;function one(e){var t=new e.constructor(e.source,ane.exec(e));return t.lastIndex=e.lastIndex,t}var lne=one,RA=oa?oa.prototype:void 0,BA=RA?RA.valueOf:void 0;function hne(e){return BA?Object(BA.call(e)):{}}var une=hne;function cne(e,t){var r=t?ub(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var dne=cne,pne="[object Boolean]",fne="[object Date]",mne="[object Map]",gne="[object Number]",vne="[object RegExp]",yne="[object Set]",xne="[object String]",wne="[object Symbol]",bne="[object ArrayBuffer]",_ne="[object DataView]",Cne="[object Float32Array]",Sne="[object Float64Array]",Mne="[object Int8Array]",Ane="[object Int16Array]",Ene="[object Int32Array]",Tne="[object Uint8Array]",Lne="[object Uint8ClampedArray]",Pne="[object Uint16Array]",Dne="[object Uint32Array]";function One(e,t,r){var i=e.constructor;switch(t){case bne:return ub(e);case pne:case fne:return new i(+e);case _ne:return sne(e,r);case Cne:case Sne:case Mne:case Ane:case Ene:case Tne:case Lne:case Pne:case Dne:return dne(e,r);case mne:return new i;case gne:case xne:return new i(e);case vne:return lne(e);case yne:return new i;case wne:return une(e)}}var Ine=One;function Rne(e){return typeof e.constructor=="function"&&!tb(e)?KJ(lb(e)):{}}var Bne=Rne,zne="[object Map]";function kne(e){return Pl(e)&&sm(e)==zne}var Nne=kne,zA=qp&&qp.isMap,Fne=zA?ib(zA):Nne,Une=Fne,jne="[object Set]";function Vne(e){return Pl(e)&&sm(e)==jne}var Gne=Vne,kA=qp&&qp.isSet,Hne=kA?ib(kA):Gne,Wne=Hne,qne=1,Xne=2,Yne=4,MB="[object Arguments]",Qne="[object Array]",Zne="[object Boolean]",Kne="[object Date]",$ne="[object Error]",AB="[object Function]",Jne="[object GeneratorFunction]",ese="[object Map]",tse="[object Number]",EB="[object Object]",rse="[object RegExp]",ise="[object Set]",nse="[object String]",sse="[object Symbol]",ase="[object WeakMap]",ose="[object ArrayBuffer]",lse="[object DataView]",hse="[object Float32Array]",use="[object Float64Array]",cse="[object Int8Array]",dse="[object Int16Array]",pse="[object Int32Array]",fse="[object Uint8Array]",mse="[object Uint8ClampedArray]",gse="[object Uint16Array]",vse="[object Uint32Array]",dr={};dr[MB]=dr[Qne]=dr[ose]=dr[lse]=dr[Zne]=dr[Kne]=dr[hse]=dr[use]=dr[cse]=dr[dse]=dr[pse]=dr[ese]=dr[tse]=dr[EB]=dr[rse]=dr[ise]=dr[nse]=dr[sse]=dr[fse]=dr[mse]=dr[gse]=dr[vse]=!0;dr[$ne]=dr[AB]=dr[ase]=!1;function h2(e,t,r,i,n,s){var a,o=t&qne,l=t&Xne,h=t&Yne;if(r&&(a=n?r(e,i,n,s):r(e)),a!==void 0)return a;if(!ka(e))return e;var c=Eo(e);if(c){if(a=tne(e),!o)return tee(e,a)}else{var u=sm(e),d=u==AB||u==Jne;if(x3(e))return Eie(e,o);if(u==EB||u==MB||d&&!n){if(a=l||d?{}:Bne(e),!o)return l?Fie(e,Sie(a,e)):Bie(e,_ie(a,e))}else{if(!dr[u])return n?e:{};a=Ine(e,u,o)}}s||(s=new l2);var p=s.get(e);if(p)return p;s.set(e,a),Wne(e)?e.forEach(function(g){a.add(h2(g,t,r,g,e,s))}):Une(e)&&e.forEach(function(g,v){a.set(v,h2(g,t,r,v,e,s))});var f=h?l?SB:L7:l?sb:nb,m=c?void 0:f(e);return mee(m||e,function(g,v){m&&(v=g,g=e[v]),Jw(a,v,h2(g,t,r,v,e,s))}),a}var TB=h2,yse=1,xse=4;function wse(e){return TB(e,yse|xse)}var Iy=wse,bse="__lodash_hash_undefined__";function _se(e){return this.__data__.set(e,bse),this}var Cse=_se;function Sse(e){return this.__data__.has(e)}var Mse=Sse;function b3(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Dy;++t<r;)this.add(e[t])}b3.prototype.add=b3.prototype.push=Cse;b3.prototype.has=Mse;var Ase=b3;function Ese(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}var Tse=Ese;function Lse(e,t){return e.has(t)}var Pse=Lse,Dse=1,Ose=2;function Ise(e,t,r,i,n,s){var a=r&Dse,o=e.length,l=t.length;if(o!=l&&!(a&&l>o))return!1;var h=s.get(e),c=s.get(t);if(h&&c)return h==t&&c==e;var u=-1,d=!0,p=r&Ose?new Ase:void 0;for(s.set(e,t),s.set(t,e);++u<o;){var f=e[u],m=t[u];if(i)var g=a?i(m,f,u,t,e,s):i(f,m,u,e,t,s);if(g!==void 0){if(g)continue;d=!1;break}if(p){if(!Tse(t,function(v,y){if(!Pse(p,y)&&(f===v||n(f,v,r,i,s)))return p.push(y)})){d=!1;break}}else if(!(f===m||n(f,m,r,i,s))){d=!1;break}}return s.delete(e),s.delete(t),d}var LB=Ise;function Rse(e){var t=-1,r=Array(e.size);return e.forEach(function(i,n){r[++t]=[n,i]}),r}var Bse=Rse;function zse(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}var kse=zse,Nse=1,Fse=2,Use="[object Boolean]",jse="[object Date]",Vse="[object Error]",Gse="[object Map]",Hse="[object Number]",Wse="[object RegExp]",qse="[object Set]",Xse="[object String]",Yse="[object Symbol]",Qse="[object ArrayBuffer]",Zse="[object DataView]",NA=oa?oa.prototype:void 0,L5=NA?NA.valueOf:void 0;function Kse(e,t,r,i,n,s,a){switch(r){case Zse:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Qse:return!(e.byteLength!=t.byteLength||!s(new w3(e),new w3(t)));case Use:case jse:case Hse:return $w(+e,+t);case Vse:return e.name==t.name&&e.message==t.message;case Wse:case Xse:return e==t+"";case Gse:var o=Bse;case qse:var l=i&Nse;if(o||(o=kse),e.size!=t.size&&!l)return!1;var h=a.get(e);if(h)return h==t;i|=Fse,a.set(e,t);var c=LB(o(e),o(t),i,n,s,a);return a.delete(e),c;case Yse:if(L5)return L5.call(e)==L5.call(t)}return!1}var $se=Kse,Jse=1,eae=Object.prototype,tae=eae.hasOwnProperty;function rae(e,t,r,i,n,s){var a=r&Jse,o=L7(e),l=o.length,h=L7(t),c=h.length;if(l!=c&&!a)return!1;for(var u=l;u--;){var d=o[u];if(!(a?d in t:tae.call(t,d)))return!1}var p=s.get(e),f=s.get(t);if(p&&f)return p==t&&f==e;var m=!0;s.set(e,t),s.set(t,e);for(var g=a;++u<l;){d=o[u];var v=e[d],y=t[d];if(i)var x=a?i(y,v,d,t,e,s):i(v,y,d,e,t,s);if(!(x===void 0?v===y||n(v,y,r,i,s):x)){m=!1;break}g||(g=d=="constructor")}if(m&&!g){var w=e.constructor,_=t.constructor;w!=_&&"constructor"in e&&"constructor"in t&&!(typeof w=="function"&&w instanceof w&&typeof _=="function"&&_ instanceof _)&&(m=!1)}return s.delete(e),s.delete(t),m}var iae=rae,nae=1,FA="[object Arguments]",UA="[object Array]",Qg="[object Object]",sae=Object.prototype,jA=sae.hasOwnProperty;function aae(e,t,r,i,n,s){var a=Eo(e),o=Eo(t),l=a?UA:sm(e),h=o?UA:sm(t);l=l==FA?Qg:l,h=h==FA?Qg:h;var c=l==Qg,u=h==Qg,d=l==h;if(d&&x3(e)){if(!x3(t))return!1;a=!0,c=!1}if(d&&!c)return s||(s=new l2),a||pB(e)?LB(e,t,r,i,n,s):$se(e,t,l,r,i,n,s);if(!(r&nae)){var p=c&&jA.call(e,"__wrapped__"),f=u&&jA.call(t,"__wrapped__");if(p||f){var m=p?e.value():e,g=f?t.value():t;return s||(s=new l2),n(m,g,r,i,s)}}return d?(s||(s=new l2),iae(e,t,r,i,n,s)):!1}var oae=aae;function PB(e,t,r,i,n){return e===t?!0:e==null||t==null||!Pl(e)&&!Pl(t)?e!==e&&t!==t:oae(e,t,r,i,PB,n)}var lae=PB;function hae(e,t){return e!=null&&t in Object(e)}var uae=hae;function cae(e,t,r){t=wf(t,e);for(var i=-1,n=t.length,s=!1;++i<n;){var a=Oy(t[i]);if(!(s=e!=null&&r(e,a)))break;e=e[a]}return s||++i!=n?s:(n=e==null?0:e.length,!!n&&eb(n)&&Kw(a,n)&&(Eo(e)||rb(e)))}var dae=cae;function pae(e,t){return e!=null&&dae(e,t,uae)}var fae=pae,mae=function(){return Na.Date.now()},P5=mae,gae="Expected a function",vae=Math.max,yae=Math.min;function xae(e,t,r){var i,n,s,a,o,l,h=0,c=!1,u=!1,d=!0;if(typeof e!="function")throw new TypeError(gae);t=mA(t)||0,ka(r)&&(c=!!r.leading,u="maxWait"in r,s=u?vae(mA(r.maxWait)||0,t):s,d="trailing"in r?!!r.trailing:d);function p(b){var S=i,C=n;return i=n=void 0,h=b,a=e.apply(C,S),a}function f(b){return h=b,o=setTimeout(v,t),c?p(b):a}function m(b){var S=b-l,C=b-h,M=t-S;return u?yae(M,s-C):M}function g(b){var S=b-l,C=b-h;return l===void 0||S>=t||S<0||u&&C>=s}function v(){var b=P5();if(g(b))return y(b);o=setTimeout(v,m(b))}function y(b){return o=void 0,d&&i?p(b):(i=n=void 0,a)}function x(){o!==void 0&&clearTimeout(o),h=0,i=l=n=o=void 0}function w(){return o===void 0?a:y(P5())}function _(){var b=P5(),S=g(b);if(i=arguments,n=this,l=b,S){if(o===void 0)return f(l);if(u)return clearTimeout(o),o=setTimeout(v,t),p(l)}return o===void 0&&(o=setTimeout(v,t)),a}return _.cancel=x,_.flush=w,_}var cb=xae;function wae(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var bae=wae;function _ae(e,t){return t.length<2?e:gB(e,hie(t,0,-1))}var Cae=_ae;function Sae(e,t){return lae(e,t)}var db=Sae;function Mae(e,t){return t=wf(t,e),e=Cae(e,t),e==null||delete e[Oy(bae(t))]}var Aae=Mae;function Eae(e){return oie(e)?void 0:e}var Tae=Eae,Lae=1,Pae=2,Dae=4,Oae=yB(function(e,t){var r={};if(e==null)return r;var i=!1;t=sB(t,function(s){return s=wf(s,e),i||(i=s.length>1),s}),Im(e,SB(e),r),i&&(r=TB(r,Lae|Pae|Dae,Tae));for(var n=t.length;n--;)Aae(r,t[n]);return r}),I7=Oae;function Iae(e,t,r,i){if(!ka(e))return e;t=wf(t,e);for(var n=-1,s=t.length,a=s-1,o=e;o!=null&&++n<s;){var l=Oy(t[n]),h=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(n!=a){var c=o[l];h=i?i(c,l,o):void 0,h===void 0&&(h=ka(c)?c:Kw(t[n+1])?[]:{})}Jw(o,l,h),o=o[l]}return e}var Rae=Iae;function Bae(e,t,r){for(var i=-1,n=t.length,s={};++i<n;){var a=t[i],o=gB(e,a);r(o,a)&&Rae(s,wf(a,e),o)}return s}var zae=Bae;function kae(e,t){return zae(e,t,function(r,i){return fae(e,i)})}var Nae=kae,Fae=yB(function(e,t){return e==null?{}:Nae(e,t)}),bl=Fae,Uae="Expected a function";function jae(e,t,r){var i=!0,n=!0;if(typeof e!="function")throw new TypeError(Uae);return ka(r)&&(i="leading"in r?!!r.leading:i,n="trailing"in r?!!r.trailing:n),cb(e,t,{leading:i,maxWait:t,trailing:n})}var Vae=jae;function Gae(e){for(let t of Object.keys(e))e[t]===void 0&&delete e[t];return e}function yc(e,t){return Object.setPrototypeOf(e,t),e}var Hae=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),Wae=()=>typeof window>"u"?!1:window.navigator.platform.toUpperCase().includes("MAC"),qae=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(window.navigator.userAgent)||Ry&&"ontouchend"in document,Xae=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,Yae=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,Qae=()=>{if(typeof window>"u")return!1;let e=navigator.userAgent,t=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(t)},Zae=()=>{if(typeof window>"u")return null;let e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]},Kae=()=>{if(typeof window>"u")return;let e=new URLSearchParams(window.location.search).get("desktop-app-version");return e?(window.localStorage.setItem("desktop-app-version",e),e):window.localStorage.getItem("desktop-app-version")??"0.0.6"},$ae=Hae();$ae&&Kae();var Ry=Wae(),DB=qae(),Jae=Xae(),ms=Yae(),VA=Qae(),GA=Number(Zae());function OB(e){return Array.isArray(e)?e:[e]}function eoe(e,t){let r=0;for(;r<e.length&&r<t.length;){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1;r+=1}return r!==t.length?-1:r!==e.length?1:0}function Zg(e){return Ry?e.metaKey:e.ctrlKey}var ht=[],_3={},R1={},u2={};function IB(e){ht.includes(e)||ht.push(e)}function pp(e){delete _3[e.pointerId];for(let t=0;t<ht.length;t++)if(ht[t].pointerId===e.pointerId){ht.splice(t,1);break}}function toe(){ht.splice(0,ht.length)}function C3(e){if(e.pointerType!=="touch")return;let t=_3[e.pointerId];t===void 0&&(t={x:0,y:0},_3[e.pointerId]=t),t.x=e.pageX,t.y=e.pageY}function D5(e){let t=e.pointerId===ht[0].pointerId?ht[1]:ht[0];return _3[t.pointerId]}function RB(e){R1[e.key]=!0,u2[e.key]=u2[e.key]===void 0?1:u2[e.key]+1}function BB(e){if(Ry&&R1.Meta)for(let t in R1)R1[t]=!1;else R1[e.key]=!1;u2={}}function roe(e){e.addEventListener("pointerdown",IB,!0),e.addEventListener("pointerdown",C3,!0),e.addEventListener("pointermove",C3,!0),e.addEventListener("pointerup",pp,!0),e.addEventListener("pointercancel",pp,!0),e.addEventListener("pointerleave",pp,!0),window.addEventListener("keydown",RB,!0),window.addEventListener("keyup",BB,!0)}function ioe(e){e.removeEventListener("pointerdown",IB,!0),e.removeEventListener("pointerdown",C3,!0),e.removeEventListener("pointermove",C3,!0),e.removeEventListener("pointerup",pp,!0),e.removeEventListener("pointercancel",pp,!0),e.removeEventListener("pointerleave",pp,!0),window.removeEventListener("keydown",RB,!0),window.removeEventListener("keyup",BB,!0)}var zB,noe=new Promise(e=>{zB=e}),Kg;function soe(){if(Kg)return Kg;async function e(){let t="https://unpkg.com/@splinetool/navmesh-wasm@0.9.450/build",r=Am(()=>import("./navmesh-0b92f809.js"),[]),[i,n]=await Promise.all([r,fetch(`${t}/navmesh.wasm`).then(o=>o.arrayBuffer())]),s=i.default,a=await s({wasmBinary:n});zB(a)}return Kg=e(),Kg}var kB,aoe=new Promise(e=>{kB=e}),$g;function ooe(){if($g)return $g;async function e(){let t=await Am(()=>import("./physics-dee4de67.js"),[]);await t.init(),kB(t)}return $g=e(),$g}var It=class{modifyById(e,t){let r=this;if(r[e]===void 0)throw new Error("not expected");{let i={...r,[e]:t};return Object.setPrototypeOf(i,It.prototype),i}}add(e,t){var r;return((r=this.runOp({type:1,id:e,data:t}))==null?void 0:r.data)??this}runOp(e){let t=this;if(e.type===1){let r=t[e.id],i;r===void 0?i={type:2,id:e.id}:i={type:1,id:e.id,data:r};let{id:n,data:s}=e,a={...t,[n]:s};return Object.setPrototypeOf(a,It.prototype),{data:a,actual:e,reverse:i}}else if(e.type===2){let{id:r}=e,i=t[r];if(i===void 0)return null;{let n={...t};return Object.setPrototypeOf(n,It.prototype),delete n[r],{data:n,actual:e,reverse:{type:1,id:r,data:i}}}}return null}};function pb(e){if(e.deepFreeze!==void 0){e.deepFreeze(e);return}let t=Object.getOwnPropertyNames(e);for(let r of t){let i=e[r];i&&typeof i=="object"&&pb(i)}return Object.freeze(e)}function loe(e,t){let r=0;for(;r<e.length&&r<t.length;){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1;r+=1}return r!==t.length?-1:r!==e.length?1:0}var NB=class extends Error{};function O5(e){let t={...e};return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}function gh(e,t,r){if(e===void 0?t===void 0?(e=0,t=10):e=t-10:t===void 0&&(t=e+10),e>t){let s=e;e=t,t=s}let i=[],n=1/(r+1);for(let s=0;s<r;s++){let a=e+(t-e)*(s+.75+Math.random()*.5)*n;i.push(a)}return i}function fb(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function hoe(){return typeof process<"u"}function FB(e,t){for(let r of e)t(r.id,r.data)!==!0&&FB(r.children,t)}function UB(e,t){if(t(e.id,e.data)!==!0)for(let r of e.children)UB(r,t)}var qn=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,qn.prototype)}deepFreeze(){let e=0;for(;e<this.length;)pb(this[e]),e++}fillCaches0(e,t){this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let r of e.children)this.fillCaches0(r,e.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}nonExistOrDescendantOf(e,t){if(!this.has(e))return!0;for(;e;){let r=this.parent(e);if(r===t)return!0;e=r}return!1}rootAcestor(e){for(;e;){let t=this.parent(e);if(t)e=t;else return e}return e}isDescendantOf(e,t){for(;e;){let r=this.parent(e);if(r===t)return!0;e=r}return!1}data(e){var t;return(t=this.get(e))==null?void 0:t.data}has(e){return this.childrenOf(e)!==void 0}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){var t;return e===null?this:(t=this.get(e))==null?void 0:t.children}traverseFrom(e,t){if(e===null)this.traverse(t);else{let r=this.get(e);r&&UB(r,t)}}traverse(e){FB(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return e===null?this:this.get(e).children}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let r=this.parent(e),i=this.childrenArray(r),n=i.findIndex(a=>a.id===e);if(n<0)throw new Error("not expected");let s=i[n];return i=[...i],i[n]={...s,data:t},this.modifyArrayBy(r,i)}}modifyArrayBy(e,t){let r=e,i=t;for(;r!==null;){let s=i,a=r;if(r=this.parent(r),r===void 0)throw new Error;i=this.childrenArray(r);let o=i.findIndex(l=>l.id===a);if(o<0)throw new Error;i=[...i],i[o]={...i[o],children:s}}Object.setPrototypeOf(i,qn.prototype);let n=i;return n.fillCaches(),n}runOp(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}return null}checkDuplicatedIdRec({id:e,children:t}){if(this.get(e)!==void 0)return!0;for(let r of t)if(this.checkDuplicatedIdRec(r))return!0;return!1}addOp(e){let{parent:t,fi:r,id:i,data:n,children:s}=e;if(t!==null&&this.get(t)===void 0||this.checkDuplicatedIdRec(e))return null;{let a=t,o=this.childrenArray(a),l={fi:r,id:i,data:n,children:s};return o=[...o,l],o.sort((h,c)=>h.fi-c.fi),e.localIndex=o.indexOf(l),{data:this.modifyArrayBy(a,o),actual:e,reverse:{type:8,id:i}}}}deleteOp(e){let{id:t}=e;if(this.get(t)===null)return null;{let r=this.parent(t);if(r===void 0)return null;let i=this.childrenArray(r),n=i.findIndex(a=>a.id===t);e.localIndex=n,i=[...i];let s=i.splice(n,1)[0];return{data:this.modifyArrayBy(r,i),actual:e,reverse:{type:7,...s,parent:r}}}}moveOp(e){let{parent:t,fi:r,id:i}=e;if(t!==null&&this.get(t)===void 0)return this.deleteOp({type:8,id:i});if(t!==null){let u=t;for(;u!==null;){if(u===void 0)throw new Error;if(u===i)throw new NB("cyclic tree");u=this.parent(u)}}let n=this.parent(i);if(n===void 0)return null;let s=n,a=this.childrenArray(n),o=a.findIndex(u=>u.id===i);a=[...a];let l=a.splice(o,1)[0],h=this.modifyArrayBy(n,a);n=t,a=h.childrenArray(n);let c=l.fi;return l={...l,fi:r},a=[...a,l],a.sort((u,d)=>u.fi-d.fi),e.localIndex=a.indexOf(l),h=h.modifyArrayBy(n,a),{data:h,actual:e,reverse:{type:9,parent:s,fi:c,id:i}}}previous(e,t){if(t===null){let i=this.childrenArray(e);return i.length===0?null:i[i.length-1].id}let r=null;for(let i of this.childrenArray(e)){if(i.id===t)return r;r=i.id}return null}traverseSortNext(e){let t=this.parent(e);if(t!==void 0){let r=this.childrenArray(t),i=r.findIndex(n=>n.id===e)+1;if(i<r.length)return r[i].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(t!==void 0){let r=this.childrenArray(t),i=r.findIndex(n=>n.id===e)-1;return i>=0?this.traverseSortPrevious(r[i].id):t}}getAllSorted(e){let t=[];for(let r of e){let i=this.getWithSortKey(r.id);i!==void 0&&t.push({...r,...i})}t.sort((r,i)=>loe(r.sortKey,i.sortKey));for(let r of t)delete r.sortKey;return t}getWithSortKey(e){var t=e;let r=[],i=this.get(t),n=i;if(i!==void 0){for(;t;)r.splice(0,0,i.fi),t=this.parent(t),t!==null&&(i=this.get(t));return{...n,sortKey:r}}}insertBeforeHelper(e,t,r){return this.insertAfterHelper(e,this.previous(e,t),r)}insertAfterHelper(e,t,r){let i=this.childrenArray(e);if(t===null){if(i.length===0)return gh(0,r,r);{let n=i[0].fi;return gh(n-r,n,r)}}else{let n=this.get(t);if(n===void 0||this.parent(t)!==e)throw new Error("illegal args");let s=i.find(a=>a.fi>n.fi);if(s===void 0){let a=i[i.length-1].fi;return gh(a,a+r,r)}else return gh(n.fi,s.fi,r)}}},S3;(e=>{function t(r,i){if(i.type!==0)return null;if(Array.isArray(r)){let n=i.props,s={},a=[...r],o=!1;if(n)for(let l of Object.keys(n)){let h=parseInt(l);if(isNaN(h))throw new Error("wrong index");s[l]=a[h],a[h]=n[l],o=!0}return o?{data:a,actual:i,reverse:{type:0,props:s}}:null}else{let n=i.props,s={},a={...r},o=!1;if(n)for(let l of Object.keys(n)){s[l]=a[l];let h=n[l];h===void 0?delete a[l]:a[l]=h,o=!0}return o?{data:a,actual:i,reverse:{type:0,props:s}}:null}}e.runOp=t})(S3||(S3={}));var ft=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,ft.prototype)}deepFreeze(){let e=0;for(;e<this.length;)pb(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){var t;return(t=this.get(e))==null?void 0:t.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let r=this,i=r.findIndex(s=>s.id===e);if(i<0)throw new Error("not expected");let n=r[i];return r=[...r],r[i]={...n,data:t},this.modifyArrayBy(r)}}modifyArrayBy(e){Object.setPrototypeOf(e,ft.prototype);let t=e;return hoe()||t.fillCaches(),t}runOp(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}return null}addOp(e){let{fi:t,id:r,data:i}=e,n=this,s={fi:t,id:r,data:i};return n=[...n,s],n.sort((a,o)=>a.fi-o.fi),e.localIndex=n.indexOf(s),{data:this.modifyArrayBy(n),actual:e,reverse:{type:5,id:r}}}deleteOp(e){let{id:t}=e,r=this,i=r.findIndex(s=>s.id===t);if(i===-1)return null;e.localIndex=i,r=[...r];let n=r.splice(i,1)[0];return{data:this.modifyArrayBy(r),actual:e,reverse:{type:4,...n}}}moveOp(e){let{fi:t,id:r}=e,i=this;i=[...i];let n=i.findIndex(o=>o.id===r);if(n===-1)return null;let s=i[n].fi,a={...i[n],fi:t};return i[n]=a,i.sort((o,l)=>o.fi-l.fi),e.localIndex=i.indexOf(a),{data:this.modifyArrayBy(i),actual:e,reverse:{type:6,fi:s,id:r}}}previous(e){if(e===null)return this.length===0?null:this[this.length-1].id;let t=null;for(let r of this){if(r.id===e)return t;t=r.id}return null}insertBeforeHelper(e,t){return this.insertAfterHelper(this.previous(e),t)}insertAfterHelper(e,t){let r=this;if(e===null){if(r.length===0)return gh(0,t,t);{let i=r[0].fi;return gh(i-t,i,t)}}else{let i=this.get(e);if(i===void 0)throw new Error("illegal args");let n=r.find(s=>s.fi>i.fi);if(n===void 0){let s=r[r.length-1].fi;return gh(s,s+t,t)}else return gh(i.fi,n.fi,t)}}};function Xp(e){return e&&typeof e=="object"&&e instanceof ci}var ci=class{unusedFunOverridesTable(e){}runOp(e){let t=[],r=this,i=0,n={};for(;i<e.path.length;){if(t.push(r),r=r===void 0?void 0:r[e.path[i]],r!==void 0&&!Xp(r))return null;i+=1}r=r?O5(r):new ci;for(let[o,l]of Object.entries(e.props)){let h=r[o];n[o]=h,l===void 0?delete r[o]:r[o]=l}for(;i>0;){if(Object.keys(r).length===0){let o=t[i-1];o&&(r=O5(o),delete r[e.path[i-1]])}else{let o=t[i-1];if(o){let l=O5(o);l[e.path[i-1]]=r,r=l}else{let l=new ci;l[e.path[i-1]]=r,r=l}}i-=1}let s=Object.setPrototypeOf(r,ci.prototype),a={...e,props:n};return{data:s,actual:e,reverse:a}}},zh;(e=>{function t(n,s){return am(n,s)??n}e.apply=t;function r(n,s){return gb(n,s)}e.merge=r;function i(n,s){let a=0,o=s.path,l=n;for(;a<o.length&&l!==void 0;){if(l=_o.zoomOnce(l,o[a]),l===void 0)return s;if(!Xp(l))return;a+=1}if(l===void 0)return s;if(Xp(l))if(s.type===0){let h={...s.props};for(let c of Object.keys(l))delete h[c];return{...s,props:h}}else if(s.type===1||s.type===4||s.type===7){let h=mb([s],l);return h?(console.log(h),h):s}else return s}e.filterOp=i})(zh||(zh={}));function mb(e,t){if(t===void 0)return;let r=!1,i=e.map(n=>{let s=n.id,a=am(n.data,t[s]);if(r=r||a!==void 0,a===void 0&&(a=n.data),n.children){let o=mb(n.children,t);return o!==void 0?r=!0:o=n.children,{...n,id:s,data:a,children:o}}else return{...n,id:s,data:a}});if(r)return i}function uoe(e,t){if(t===void 0)return;let r=!1,i=e.map(n=>{let s=n.id,a=am(n.data,t[s]);return r=r||a!==void 0,a===void 0&&(a=n.data),{...n,id:s,data:a}});if(r)return Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}function am(e,t){if(!Xp(t))return t;if(e instanceof qn){let r=mb(e,t);return r!==void 0&&Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}else{if(e instanceof ft)return uoe(e,t);if(Array.isArray(e)){let r=!1,i=e.map((n,s)=>{let a=am(n,t[s]);return r=r||a!==void 0,a===void 0&&(a=n),a});return r?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}else{if(e instanceof ci)return gb(e,t);if(e&&typeof e=="object"){let r={},i=!1;for(let[n,s]of Object.entries(e)){let a=am(s,t[n]);i=i||a!==void 0,a===void 0&&(a=s),r[n]=a}return i?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}}}}function gb(e,t){if(e===void 0)return t;if(t===void 0)return e;if(!Xp(t))return t;if(!Xp(e))return zh.apply(e,t);let r=new Set;for(let n of Object.keys(e))r.add(n);for(let n of Object.keys(t))r.add(n);let i=new ci;for(let n of r){let s=gb(e===void 0?void 0:e[n],t===void 0?void 0:t[n]);i[n]=s}return i}function coe(e,t){let r={cur:[],result:[],len:0};return e=om(e,t,r)??e,[e,r.result]}function M3(e,t){return e===null?null:(e.cur[e.len]=t,e.len+=1,e)}function A3(e){e&&(e.len-=1)}function doe(e){if(e===null)return null;e.result.push(e.cur.slice(0,e.len))}function jB(e,t,r){let i=!1,n=e.map(s=>{let a=s.id,o=t[a];if(o!==void 0&&typeof o=="string"&&(i=!0,a=o,r!==null))throw new Error("not supported");let l=om(s.data,t,M3(r,a));A3(r),i=i||l!==void 0,l===void 0&&(l=s.data);let h=jB(s.children,t,r);return h!==void 0?i=!0:h=s.children,{...s,id:a,data:l,children:h}});if(i)return n}function poe(e,t,r){let i=!1,n=e.map(s=>{let a=s.id,o=t[a];if(o!==void 0&&typeof o=="string"&&(i=!0,a=o,r!==null))throw new Error("not supported");let l=om(s.data,t,M3(r,a));return A3(r),i=i||l!==void 0,l===void 0&&(l=s.data),{...s,id:a,data:l}});if(i)return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n}function om(e,t,r){if(e instanceof qn){let i=jB(e,t,r);return i!==void 0&&Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}else{if(e instanceof ft)return poe(e,t,r);if(Array.isArray(e)){let i=!1,n=e.map((s,a)=>{let o=om(s,t,M3(r,a));return A3(r),i=i||o!==void 0,o===void 0&&(o=s),o});return i?(Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n):void 0}else if(e&&typeof e=="object"&&!fb(e)){let i={},n=!1;for(let[s,a]of Object.entries(e))if(s!=="name"&&s!=="text"){let o=t[s];if(typeof o=="string"){if(r!==null)throw new Error("not supported");n=!0,s=o}let l=om(a,t,M3(r,s));A3(r),n=n||l!==void 0,l===void 0&&(l=a),i[s]=l}else i[s]=a;return n?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}else if(typeof e=="string"){let i=t[e];return i!==void 0&&doe(r),i}else return}}var R7;(e=>{function t(r,i){let n=_o.zoom(i,r.path);if(typeof n=="object"){let s={};for(let a of Object.keys(r.props))s[a]=n[a];return{...r,props:s}}else return{...r,props:{}}}e.replaceProps=t})(R7||(R7={}));var yn;(e=>{function t(l,h){return{...l,path:l.path.slice(h)}}e.drop=t;function r(l,h){var c;return((c=i(l,h))==null?void 0:c.data)??l}e.applySimple=r;function i(l,h){var d,p;let c=h.path;for(var u=[];;){let f;if(l instanceof ci&&h.type===0&&(f=l.runOp({...h,path:c.slice(u.length)}),f===null&&(f=void 0)),f===void 0&&u.length===c.length&&(l instanceof qn||l instanceof ft||l instanceof It?f=l.runOp(h):f=S3.runOp(l,h)),f!==void 0)if(f!==null){let v=f.data;for(let y=u.length-1;y>=0;y--){let x=c[y],w=u[y];if(w instanceof qn){if(typeof x=="number")throw new Error("illegal arg");v=w.modifyById(x,v)}else if(w instanceof ft){if(typeof x=="number")throw new Error("illegal arg");v=w.modifyById(x,v)}else if(w instanceof It){if(typeof x=="number")throw new Error("illegal arg");v=w.modifyById(x,v)}else if(w instanceof ci){let _={...w,[x]:v};v=Object.setPrototypeOf(_,ci.prototype)}else if(typeof w=="object")if(Array.isArray(w)){if(typeof x=="string"&&(x=parseInt(x),isNaN(x)))throw new Error("Invalid path");let _=v;v=[...w],v[x]=_}else v={...w,[x]:v};else return null}return{data:v,actual:{...f.actual,path:c},reverse:{...f.reverse,path:c}}}else return null;let m=c[u.length],g;if(l instanceof qn){if(typeof m=="number")throw new Error("");g=(d=l.get(m))==null?void 0:d.data}else if(l instanceof ft){if(typeof m=="number")throw new Error("");g=(p=l.get(m))==null?void 0:p.data}else l!==null&&(g=l[m]);if(g!==void 0)u.push(l),l=g;else return null}}e.apply=i;function n(l,h){for(let c=0;c<l.length&&c<h.length;c++)if(l[c]!==h[c])return!0;return!1}e.pathDisjoint=n;function s(l,h){if(l.length!==h.length)return!1;for(let c=0;c<l.length;c++)if(l[c]!==h[c])return!1;return!0}e.pathEq=s;function a(l,h){return n(l.path,h.path)}e.commutative=a;function o(l,h){return l.type===0&&h.type===0&&s(l.path,h.path)?Object.keys(l.props).every(c=>h.props[c]!==void 0):!1}e.subsumed=o})(yn||(yn={}));var B7;(e=>{function t(){return[]}e.empty=t;function r(h,c){let u=[];for(let d of h){let[p,...f]=d.path;p===c&&u.push({...d,path:f})}return u}e.removePrefix=r;function i(h,c){return h.map(u=>({...u,path:[c,...u.path]}))}e.addPrefix=i;function n(h,c){return[...h,...c]}e.concat=n;function s(h,c){return[...h.filter(u=>!c.some(d=>yn.subsumed(u,d))),...c]}e.compress=s;function a(h,c){return h.every(u=>c.every(d=>yn.commutative(u,d)))}e.commutative=a;function o(h,c){for(let u of c){let d=l(h,u);d!==null&&(h=d.data)}return h}e.applyAll=o;function l(h,c){var u=h;let d=[],p=[];for(let f of c)try{if(f.type===3){let m=_o.zoom(u,[...f.path,f.id]),g=yn.apply(u,{...f,type:2});if(g!==null){u=g.data;let[v,y]=coe(u,{[f.id]:m});u=v;for(let x of y){let w=x[x.length-1];x.splice(x.length-1,1),d.push({type:0,path:x,props:{[w]:m}}),p.push({type:0,path:x,props:{[w]:f.id}})}p.push(g.reverse),d.push(g.actual)}}else{let m=yn.apply(u,f);m!==null&&(d.push(m.actual),u=m.data,p.push(m.reverse))}}catch(m){if(m instanceof NB)return null;throw m}return{data:u,actual:d,reverse:p.reverse()}}e.apply=l})(B7||(B7={}));var VB=Symbol(),foe=Symbol(),By=Symbol(),Rm=class{reportOp(e,t,r=[]){let i=this;if(t===null)return;i._current=t.data;let n=r;for(;!(i instanceof HB);){let s=i._path,a=i._current;if(s!==""&&n.splice(0,0,s),i=i._parent,i===null)return;i.update(s,a)}i.push(n,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let r=t[By];r&&r(),delete this._children[e]}}}},moe=class extends Rm{constructor(e,t,r){super(),this._parent=e,this._path=t,this._current=r}update(e,t){if(Array.isArray(this._current)){if(typeof e=="string"&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else this._current={...this._current,[e]:t}}runOp(e){this.reportOp(e,S3.runOp(this._current,e),e.path)}},goe=class extends Rm{constructor(e,t,r){super(),this._parent=e,this._path=t,this._current=r}update(e,t){this._current={...this._current,[e]:t},Object.setPrototypeOf(this._current,It.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},GB={get(e,t){if(t===By)return()=>{e._parent=null};if(t===VB)return e._current;if(t===foe)return e;let{_current:r,_children:i}=e;if(t==="push"&&Array.isArray(r))throw new Error("not supported to expand array");let n=i===void 0?void 0:i[t];if(n!==void 0)return n;let s=r[t],a=zy(e,t,s);return a!==s?(i===void 0&&(i={},e._children=i),i[t]=a,a):s},has(e,t){return t in e._current},ownKeys(e){return Reflect.ownKeys(e._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(e){return Object.getPrototypeOf(e._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,t){let r=e._current,i=Reflect.getOwnPropertyDescriptor(r,t);return i&&{writable:!0,configurable:!0,enumerable:i.enumerable,value:r[t]}}},voe={...GB,set(e,t,r){let i={type:0,props:{[t]:Mi(r)??r}};return e.deleteChildren(t),e.runOp(i),!0},deleteProperty(e,t){let r={type:0,props:{[t]:void 0}};return e.deleteChildren(t),e.runOp(r),!0}},yoe={...GB,set(e,t,r){return r===void 0?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:1,id:t,data:r})),!0},deleteProperty(e,t){return e.runOp({type:2,id:t}),!0}},vb=class extends Rm{constructor(e,t,r){super(),this._children={},this._parent=e,this._path=t,this._current=r,this[By]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse((t,r)=>{e(t,this.data(t))})}data(e){var a;let{_current:t,_children:r}=this,i=r===void 0?void 0:r[e];if(i!==void 0)return i;let n=(a=t.get(e))==null?void 0:a.data,s=zy(this,e,n);return s!==n?(r===void 0&&(r={},this._children=r),r[e]=s,s):n}add(e,t,r,i,n){this.runOp({type:7,parent:e,fi:t,id:r,data:i,children:n})}move(e,t,r){this.runOp({type:9,parent:e,fi:t,id:r})}insertAfter(e,t,r){let i=this._current.insertAfterHelper(e,t,r.length);for(let n=0;n<r.length;n++){let s=r[n];this.add(e,i[n],s.id,s.data,s.children)}}insertBefore(e,t,r){let i=this._current.insertBeforeHelper(e,t,r.length);for(let n=0;n<r.length;n++){let s=r[n];this.add(e,i[n],s.id,s.data,s.children)}}moveAfter(e,t,r){let i=this._current.insertAfterHelper(e,t,r.length);for(let n=0;n<r.length;n++){let s=r[n];this.move(e,i[n],s)}}moveBefore(e,t,r){let i=this._current.insertBeforeHelper(e,t,r.length);for(let n=0;n<r.length;n++){let s=r[n];this.move(e,i[n],s)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},yb=class extends Rm{constructor(e,t,r){super(),this._children={},this._parent=e,this._path=t,this._current=r,this[By]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let r=0;r<t;r++){let i=this._current[r].id,n=this._current[r].fi;e(this.data(this._current[r].id),i,n)}}find(e){let t=this.length;for(let r=0;r<t;r++){let i=this._current[r].id;if(e(this.data(i),i))return this.get(i)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){var a;let{_current:t,_children:r}=this,i=r===void 0?void 0:r[e];if(i!==void 0)return i;let n=(a=t.get(e))==null?void 0:a.data,s=zy(this,e,n);return s!==n?(r===void 0&&(r={},this._children=r),r[e]=s,s):n}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,r){this.runOp({type:4,fi:e,id:t,data:r})}move(e,t){this.runOp({type:6,fi:e,id:t})}insertAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.add(r[i],n.id,n.data)}}insertBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.add(r[i],n.id,n.data)}}moveAfter(e,t){let r=this._current.insertAfterHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.move(r[i],n)}}moveBefore(e,t){let r=this._current.insertBeforeHelper(e,t.length);for(let i=0;i<t.length;i++){let n=t[i];this.move(r[i],n)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function I5(e,t,r){if(e.length>0){let i=e[e.length-1];if(i.type===0&&t.type===0&&_o.equal(i.path,r)){Object.assign(i.props,t.props);return}}e.push({...t,path:r})}var HB=class extends Rm{constructor(e){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(e!=="")throw new Error("");this._current=t}push(e,t,r,i){I5(this.ts,t,e),I5(this.actual,r,e),I5(this.reverse,i,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function zy(e,t,r){return r instanceof qn?new vb(e,t,r):r instanceof ft?new yb(e,t,r):r instanceof It?new Proxy(new goe(e,t,r),yoe):r!==null&&typeof r=="object"?fb(r)?r:new Proxy(new moe(e,t,r),voe):r}function WB(e){let t=new HB(e);return[zy(t,"",e),t]}function lm(e,t){let[r,i]=WB(e);return t(r),i.result()}function Mi(e){return e instanceof vb||e instanceof yb?e._current:e!==null&&typeof e=="object"?e[VB]:e}var _o;(e=>{function t(s,a){if(a.length===s.length)for(var o=0;o<s.length;){if(s[o]!==a[o])return!1;o+=1}else return!1;return!0}e.equal=t;function r(s,a,o){let l=n(o,s);if(l!==void 0&&typeof l=="object"&&l!==null){let h={...a};return Object.keys(l).forEach(c=>{delete h[c]}),h}else return a}e.removeOverridden=r;function i(s,a){if((s instanceof qn||s instanceof vb)&&typeof a=="string"||(s instanceof ft||s instanceof yb)&&typeof a=="string")return s.data(a);if(typeof a=="number"&&Array.isArray(s)||typeof a=="string"&&typeof s=="object"&&s!==null)return s[a]}e.zoomOnce=i;function n(s,a,o=0){for(;o<a.length&&s!==void 0;)s=i(s,a[o]),o+=1;return s}e.zoom=n})(_o||(_o={}));function xoe(e,t){let r=[];if(t.length===e.length)for(var i=0;i<e.length;){if(t[i]==="*")r.push(e[i]);else if(e[i]!==t[i])return null;i+=1}else return null;return r}function qs(e,t){let r=[];if(t.length<=e.length)for(var i=0;i<t.length;){if(t[i]==="*")r.push(e[i]);else if(e[i]!==t[i])return null;i+=1}else return null;return r}var qB=class{},HA=class extends qB{constructor(e){super(),this.id=e}},WA=class extends qB{constructor(e){super(),this.data=e}},z7;try{z7=new TextDecoder}catch{}var Xe,kh,oe=0,Rn={},Xt,vh,Ns=0,uo=0,ls,_l,Cn=[],Kt,qA={useRecords:!1,mapsAsObjects:!0},XB=class{},YB=new XB;YB.name="MessagePack 0xC1";var Yp=!1,E3=class{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if(Xe)return ez(()=>(N7(),this?this.unpack(e,t):E3.prototype.unpack.call(qA,e,t)));kh=t>-1?t:e.length,oe=0,uo=0,vh=null,ls=null,Xe=e;try{Kt=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(r){throw Xe=null,e instanceof Uint8Array?r:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof E3){if(Rn=this,this.structures)return Xt=this.structures,Jg();(!Xt||Xt.length>0)&&(Xt=[])}else Rn=qA,(!Xt||Xt.length>0)&&(Xt=[]);return Jg()}unpackMultiple(e,t){let r,i=0;try{Yp=!0;let n=e.length,s=this?this.unpack(e,n):Ny.unpack(e,n);if(t){for(t(s);oe<n;)if(i=oe,t(Jg())===!1)return}else{for(r=[s];oe<n;)i=oe,r.push(Jg());return r}}catch(n){throw n.lastPosition=i,n.values=r,n}finally{Yp=!1,N7()}}_mergeStructures(e,t){e=e||[];for(let r=0,i=e.length;r<i;r++){let n=e[r];n&&(n.isShared=!0,r>=32&&(n.highByte=r-32>>5))}e.sharedLength=e.length;for(let r in t||[])if(r>=0){let i=e[r],n=t[r];n&&(i&&((e.restoreStructures||(e.restoreStructures=[]))[r]=i),e[r]=n)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function Jg(){try{if(!Rn.trusted&&!Yp){let t=Xt.sharedLength||0;t<Xt.length&&(Xt.length=t)}let e=Ir();if(oe==kh)Xt.restoreStructures&&XA(),Xt=null,Xe=null,_l&&(_l=null);else if(oe>kh){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}else if(!Yp)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw Xt.restoreStructures&&XA(),N7(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function XA(){for(let e in Xt.restoreStructures)Xt[e]=Xt.restoreStructures[e];Xt.restoreStructures=null}function Ir(){let e=Xe[oe++];if(e<160)if(e<128){if(e<64)return e;{let t=Xt[e&63]||Rn.getStructures&&QB()[e&63];return t?(t.read||(t.read=xb(t,e&63)),t.read()):e}}else if(e<144)if(e-=128,Rn.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[KB()]=Ir();return t}else{let t=new Map;for(let r=0;r<e;r++)t.set(Ir(),Ir());return t}else{e-=144;let t=new Array(e);for(let r=0;r<e;r++)t[r]=Ir();return t}else if(e<192){let t=e-160;if(uo>=oe)return vh.slice(oe-Ns,(oe+=t)-Ns);if(uo==0&&kh<140){let r=t<16?wb(t):ZB(t);if(r!=null)return r}return k7(t)}else{let t;switch(e){case 192:return null;case 193:return ls?(t=Ir(),t>0?ls[1].slice(ls.position1,ls.position1+=t):ls[0].slice(ls.position0,ls.position0-=t)):YB;case 194:return!1;case 195:return!0;case 196:return R5(Xe[oe++]);case 197:return t=Kt.getUint16(oe),oe+=2,R5(t);case 198:return t=Kt.getUint32(oe),oe+=4,R5(t);case 199:return hu(Xe[oe++]);case 200:return t=Kt.getUint16(oe),oe+=2,hu(t);case 201:return t=Kt.getUint32(oe),oe+=4,hu(t);case 202:if(t=Kt.getFloat32(oe),Rn.useFloat32>2){let r=bb[(Xe[oe]&127)<<1|Xe[oe+1]>>7];return oe+=4,(r*t+(t>0?.5:-.5)>>0)/r}return oe+=4,t;case 203:return t=Kt.getFloat64(oe),oe+=8,t;case 204:return Xe[oe++];case 205:return t=Kt.getUint16(oe),oe+=2,t;case 206:return t=Kt.getUint32(oe),oe+=4,t;case 207:return Rn.int64AsNumber?(t=Kt.getUint32(oe)*4294967296,t+=Kt.getUint32(oe+4)):t=Kt.getBigUint64(oe),oe+=8,t;case 208:return Kt.getInt8(oe++);case 209:return t=Kt.getInt16(oe),oe+=2,t;case 210:return t=Kt.getInt32(oe),oe+=4,t;case 211:return Rn.int64AsNumber?(t=Kt.getInt32(oe)*4294967296,t+=Kt.getUint32(oe+4)):t=Kt.getBigInt64(oe),oe+=8,t;case 212:if(t=Xe[oe++],t==114)return $A(Xe[oe++]&63);{let r=Cn[t];if(r)return r.read?(oe++,r.read(Ir())):r.noBuffer?(oe++,r()):r(Xe.subarray(oe,++oe));throw new Error("Unknown extension "+t)}case 213:return t=Xe[oe],t==114?(oe++,$A(Xe[oe++]&63,Xe[oe++])):hu(2);case 214:return hu(4);case 215:return hu(8);case 216:return hu(16);case 217:return t=Xe[oe++],uo>=oe?vh.slice(oe-Ns,(oe+=t)-Ns):boe(t);case 218:return t=Kt.getUint16(oe),oe+=2,uo>=oe?vh.slice(oe-Ns,(oe+=t)-Ns):_oe(t);case 219:return t=Kt.getUint32(oe),oe+=4,uo>=oe?vh.slice(oe-Ns,(oe+=t)-Ns):Coe(t);case 220:return t=Kt.getUint16(oe),oe+=2,QA(t);case 221:return t=Kt.getUint32(oe),oe+=4,QA(t);case 222:return t=Kt.getUint16(oe),oe+=2,ZA(t);case 223:return t=Kt.getUint32(oe),oe+=4,ZA(t);default:if(e>=224)return e-256;if(e===void 0){let r=new Error("Unexpected end of MessagePack data");throw r.incomplete=!0,r}throw new Error("Unknown MessagePack token "+e)}}}var woe=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function xb(e,t){function r(){if(r.count++>2){let n=e.read=new Function("r","return function(){return {"+e.map(s=>woe.test(s)?s+":r()":"["+JSON.stringify(s)+"]:r()").join(",")+"}}")(Ir);return e.highByte===0&&(e.read=YA(t,e.read)),n()}let i={};for(let n=0,s=e.length;n<s;n++){let a=e[n];i[a]=Ir()}return i}return r.count=0,e.highByte===0?YA(t,r):r}var YA=(e,t)=>function(){let r=Xe[oe++];if(r===0)return t();let i=e<32?-(e+(r<<5)):e+(r<<5),n=Xt[i]||QB()[i];if(!n)throw new Error("Record id is not defined for "+i);return n.read||(n.read=xb(n,e)),n.read()};function QB(){let e=ez(()=>(Xe=null,Rn.getStructures()));return Xt=Rn._mergeStructures(e,Xt)}var k7=ky,boe=ky,_oe=ky,Coe=ky;function ky(e){let t;if(e<16&&(t=wb(e)))return t;if(e>64&&z7)return z7.decode(Xe.subarray(oe,oe+=e));let r=oe+e,i=[];for(t="";oe<r;){let n=Xe[oe++];if(!(n&128))i.push(n);else if((n&224)===192){let s=Xe[oe++]&63;i.push((n&31)<<6|s)}else if((n&240)===224){let s=Xe[oe++]&63,a=Xe[oe++]&63;i.push((n&31)<<12|s<<6|a)}else if((n&248)===240){let s=Xe[oe++]&63,a=Xe[oe++]&63,o=Xe[oe++]&63,l=(n&7)<<18|s<<12|a<<6|o;l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|l&1023),i.push(l)}else i.push(n);i.length>=4096&&(t+=yi.apply(String,i),i.length=0)}return i.length>0&&(t+=yi.apply(String,i)),t}function QA(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=Ir();return t}function ZA(e){if(Rn.mapsAsObjects){let t={};for(let r=0;r<e;r++)t[KB()]=Ir();return t}else{let t=new Map;for(let r=0;r<e;r++)t.set(Ir(),Ir());return t}}var yi=String.fromCharCode;function ZB(e){let t=oe,r=new Array(e);for(let i=0;i<e;i++){let n=Xe[oe++];if((n&128)>0){oe=t;return}r[i]=n}return yi.apply(String,r)}function wb(e){if(e<4)if(e<2){if(e===0)return"";{let t=Xe[oe++];if((t&128)>1){oe-=1;return}return yi(t)}}else{let t=Xe[oe++],r=Xe[oe++];if((t&128)>0||(r&128)>0){oe-=2;return}if(e<3)return yi(t,r);let i=Xe[oe++];if((i&128)>0){oe-=3;return}return yi(t,r,i)}else{let t=Xe[oe++],r=Xe[oe++],i=Xe[oe++],n=Xe[oe++];if((t&128)>0||(r&128)>0||(i&128)>0||(n&128)>0){oe-=4;return}if(e<6){if(e===4)return yi(t,r,i,n);{let s=Xe[oe++];if((s&128)>0){oe-=5;return}return yi(t,r,i,n,s)}}else if(e<8){let s=Xe[oe++],a=Xe[oe++];if((s&128)>0||(a&128)>0){oe-=6;return}if(e<7)return yi(t,r,i,n,s,a);let o=Xe[oe++];if((o&128)>0){oe-=7;return}return yi(t,r,i,n,s,a,o)}else{let s=Xe[oe++],a=Xe[oe++],o=Xe[oe++],l=Xe[oe++];if((s&128)>0||(a&128)>0||(o&128)>0||(l&128)>0){oe-=8;return}if(e<10){if(e===8)return yi(t,r,i,n,s,a,o,l);{let h=Xe[oe++];if((h&128)>0){oe-=9;return}return yi(t,r,i,n,s,a,o,l,h)}}else if(e<12){let h=Xe[oe++],c=Xe[oe++];if((h&128)>0||(c&128)>0){oe-=10;return}if(e<11)return yi(t,r,i,n,s,a,o,l,h,c);let u=Xe[oe++];if((u&128)>0){oe-=11;return}return yi(t,r,i,n,s,a,o,l,h,c,u)}else{let h=Xe[oe++],c=Xe[oe++],u=Xe[oe++],d=Xe[oe++];if((h&128)>0||(c&128)>0||(u&128)>0||(d&128)>0){oe-=12;return}if(e<14){if(e===12)return yi(t,r,i,n,s,a,o,l,h,c,u,d);{let p=Xe[oe++];if((p&128)>0){oe-=13;return}return yi(t,r,i,n,s,a,o,l,h,c,u,d,p)}}else{let p=Xe[oe++],f=Xe[oe++];if((p&128)>0||(f&128)>0){oe-=14;return}if(e<15)return yi(t,r,i,n,s,a,o,l,h,c,u,d,p,f);let m=Xe[oe++];if((m&128)>0){oe-=15;return}return yi(t,r,i,n,s,a,o,l,h,c,u,d,p,f,m)}}}}}function R5(e){return Rn.copyBuffers?Uint8Array.prototype.slice.call(Xe,oe,oe+=e):Xe.subarray(oe,oe+=e)}function hu(e){let t=Xe[oe++];if(Cn[t])return Cn[t](Xe.subarray(oe,oe+=e));throw new Error("Unknown extension type "+t)}var KA=new Array(4096);function KB(){let e=Xe[oe++];if(e>=160&&e<192){if(e=e-160,uo>=oe)return vh.slice(oe-Ns,(oe+=e)-Ns);if(!(uo==0&&kh<180))return k7(e)}else return oe--,Ir();let t=(e<<5^(e>1?Kt.getUint16(oe):e>0?Xe[oe]:0))&4095,r=KA[t],i=oe,n=oe+e-3,s,a=0;if(r&&r.bytes==e){for(;i<n;){if(s=Kt.getUint32(i),s!=r[a++]){i=1879048192;break}i+=4}for(n+=3;i<n;)if(s=Xe[i++],s!=r[a++]){i=1879048192;break}if(i===n)return oe=i,r.string;n-=3,i=oe}for(r=[],KA[t]=r,r.bytes=e;i<n;)s=Kt.getUint32(i),r.push(s),i+=4;for(n+=3;i<n;)s=Xe[i++],r.push(s);let o=e<16?wb(e):ZB(e);return o!=null?r.string=o:r.string=k7(e)}var $A=(e,t)=>{var r=Ir();let i=e;t!==void 0&&(e=e<32?-((t<<5)+e):(t<<5)+e,r.highByte=t);let n=Xt[e];return n&&n.isShared&&((Xt.restoreStructures||(Xt.restoreStructures=[]))[e]=n),Xt[e]=r,r.read=xb(r,i),r.read()},$B=typeof self=="object"?self:global;Cn[0]=()=>{};Cn[0].noBuffer=!0;Cn[101]=()=>{let e=Ir();return($B[e[0]]||Error)(e[1])};Cn[105]=e=>{let t=Kt.getUint32(oe-4);_l||(_l=new Map);let r=Xe[oe],i;r>=144&&r<160||r==220||r==221?i=[]:i={};let n={target:i};_l.set(t,n);let s=Ir();return n.used?Object.assign(i,s):(n.target=s,s)};Cn[112]=e=>{let t=Kt.getUint32(oe-4),r=_l.get(t);return r.used=!0,r.target};Cn[115]=()=>new Set(Ir());var JB=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");Cn[116]=e=>{let t=e[0],r=JB[t];if(!r)throw new Error("Could not find typed array for code "+t);return new $B[r](Uint8Array.prototype.slice.call(e,1).buffer)};Cn[120]=()=>{let e=Ir();return new RegExp(e[0],e[1])};Cn[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],r=oe;oe+=t-4,ls=[Ir(),Ir()],ls.position0=0,ls.position1=0;let i=oe;oe=r;try{return Ir()}finally{oe=i}};Cn[255]=e=>e.length==4?new Date((e[0]*16777216+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):e.length==8?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((e[3]&3)*4294967296+e[4]*16777216+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):e.length==12?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((e[4]&128?-281474976710656:0)+e[6]*1099511627776+e[7]*4294967296+e[8]*16777216+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");function ez(e){let t=kh,r=oe,i=Ns,n=uo,s=vh,a=_l,o=ls,l=new Uint8Array(Xe.slice(0,kh)),h=Xt,c=Xt.slice(0,Xt.length),u=Rn,d=Yp,p=e();return kh=t,oe=r,Ns=i,uo=n,vh=s,_l=a,ls=o,Xe=l,Yp=d,Xt=h,Xt.splice(0,Xt.length,...c),Rn=u,Kt=new DataView(Xe.buffer,Xe.byteOffset,Xe.byteLength),p}function N7(){Xe=null,_l=null,Xt=null}function Soe(e){e.unpack?Cn[e.type]=e.unpack:Cn[e.type]=e}var bb=new Array(147);for(let e=0;e<256;e++)bb[e]=+("1e"+Math.floor(45.15-e*.30103));var Ny=new E3({useRecords:!1});Ny.unpack;Ny.unpackMultiple;Ny.unpack;var Moe=new Float32Array(1);new Uint8Array(Moe.buffer,0,4);var c2;try{c2=new TextEncoder}catch{}var T3,_b,Fy=typeof Buffer<"u",B5=Fy?Buffer.allocUnsafeSlow:Uint8Array,tz=Fy?Buffer:Uint8Array,JA=Fy?4294967296:2144337920,we,Nr,pe=0,Va,Ga=null,Aoe=/[\u0080-\uFFFF]/,Jf=Symbol("record-id"),rz=class extends E3{constructor(e){super(e),this.offset=0;let t,r,i,n,s,a=0,o=tz.prototype.utf8Write?function(b,S,C){return we.utf8Write(b,S,C)}:c2&&c2.encodeInto?function(b,S){return c2.encodeInto(b,we.subarray(S)).written}:!1,l=this;e||(e={});let h=e&&e.sequential,c=e.structures||e.saveStructures,u=e.maxSharedStructures;if(u==null&&(u=c?32:0),u>8160)throw new Error("Maximum maxSharedStructure is 8160");let d=e.maxOwnStructures;d==null&&(d=c?32:64),h&&!e.saveStructures&&(this.structures=[]);let p=u>32||d+u>64,f=u+64,m=u+d+64;if(m>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let g=[],v=0,y=0;this.pack=this.encode=function(b,S){if(we||(we=new B5(8192),Nr=new DataView(we.buffer,0,8192),pe=0),Va=we.length-10,Va-pe<2048?(we=new B5(we.length),Nr=new DataView(we.buffer,0,we.length),Va=we.length-10,pe=0):pe=pe+7&2147483640,t=pe,s=l.structuredClone?new Map:null,l.bundleStrings?(Ga=["",""],we[pe++]=214,we[pe++]=98,Ga.position=pe-t,pe+=4):Ga=null,r=l.structures,r){r.uninitialized&&(r=l._mergeStructures(l.getStructures()));let C=r.sharedLength||0;if(C>u)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+r.sharedLength);if(!r.transitions){r.transitions=Object.create(null);for(let M=0;M<C;M++){let A=r[M];if(!A)continue;let T,L=r.transitions;for(let D=0,O=A.length;D<O;D++){let z=A[D];T=L[z],T||(T=L[z]=Object.create(null)),L=T}L[Jf]=M+64}a=C}h||(r.nextId=C+64)}i&&(i=!1),n=r||[];try{if(x(b),Ga){Nr.setUint32(Ga.position+t,pe-Ga.position-t);let C=Ga;Ga=null,x(C[0]),x(C[1])}if(l.offset=pe,s&&s.idsToInsert){pe+=s.idsToInsert.length*6,pe>Va&&_(pe),l.offset=pe;let C=Toe(we.subarray(t,pe),s.idsToInsert);return s=null,C}return S&Loe?(we.start=t,we.end=pe,we):we.subarray(t,pe)}finally{if(r){if(y<10&&y++,v>1e4)r.transitions=null,y=0,v=0,g.length>0&&(g=[]);else if(g.length>0&&!h){for(let C=0,M=g.length;C<M;C++)g[C][Jf]=0;g=[]}if(i&&l.saveStructures){let C=r.sharedLength||u;r.length>C&&(r=r.slice(0,C));let M=we.subarray(t,pe);return l.saveStructures(r,a)===!1?(l._mergeStructures(l.getStructures()),l.pack(b)):(a=C,M)}}S&Poe&&(pe=t)}};let x=b=>{pe>Va&&(we=_(pe));var S=typeof b,C;if(S==="string"){let M=b.length;if(Ga&&M>=8&&M<4096){let L=Aoe.test(b);Ga[L?0:1]+=b,we[pe++]=193,x(L?-M:M);return}let A;M<32?A=1:M<256?A=2:M<65536?A=3:A=5;let T=M*3;if(pe+T>Va&&(we=_(pe+T)),M<64||!o){let L,D,O,z=pe+A;for(L=0;L<M;L++)D=b.charCodeAt(L),D<128?we[z++]=D:D<2048?(we[z++]=D>>6|192,we[z++]=D&63|128):(D&64512)===55296&&((O=b.charCodeAt(L+1))&64512)===56320?(D=65536+((D&1023)<<10)+(O&1023),L++,we[z++]=D>>18|240,we[z++]=D>>12&63|128,we[z++]=D>>6&63|128,we[z++]=D&63|128):(we[z++]=D>>12|224,we[z++]=D>>6&63|128,we[z++]=D&63|128);C=z-pe-A}else C=o(b,pe+A,T);C<32?we[pe++]=160|C:C<256?(A<2&&we.copyWithin(pe+2,pe+1,pe+1+C),we[pe++]=217,we[pe++]=C):C<65536?(A<3&&we.copyWithin(pe+3,pe+2,pe+2+C),we[pe++]=218,we[pe++]=C>>8,we[pe++]=C&255):(A<5&&we.copyWithin(pe+5,pe+3,pe+3+C),we[pe++]=219,Nr.setUint32(pe,C),pe+=4),pe+=C}else if(S==="number")if(b>>>0===b)b<64?we[pe++]=b:b<256?(we[pe++]=204,we[pe++]=b):b<65536?(we[pe++]=205,we[pe++]=b>>8,we[pe++]=b&255):(we[pe++]=206,Nr.setUint32(pe,b),pe+=4);else if(b>>0===b)b>=-32?we[pe++]=256+b:b>=-128?(we[pe++]=208,we[pe++]=b+256):b>=-32768?(we[pe++]=209,Nr.setInt16(pe,b),pe+=2):(we[pe++]=210,Nr.setInt32(pe,b),pe+=4);else{let M;if((M=this.useFloat32)>0&&b<4294967296&&b>=-2147483648){we[pe++]=202,Nr.setFloat32(pe,b);let A;if(M<4||(A=b*bb[(we[pe]&127)<<1|we[pe+1]>>7])>>0===A){pe+=4;return}else pe--}we[pe++]=203,Nr.setFloat64(pe,b),pe+=8}else if(S==="object")if(!b)we[pe++]=192;else{if(s){let A=s.get(b);if(A){if(!A.id){let T=s.idsToInsert||(s.idsToInsert=[]);A.id=T.push(A)}we[pe++]=214,we[pe++]=112,Nr.setUint32(pe,A.id),pe+=4;return}else s.set(b,{offset:pe-t})}let M=b.constructor;if(M===Object)w(b,!0);else if(M===Array){C=b.length,C<16?we[pe++]=144|C:C<65536?(we[pe++]=220,we[pe++]=C>>8,we[pe++]=C&255):(we[pe++]=221,Nr.setUint32(pe,C),pe+=4);for(let A=0;A<C;A++)x(b[A])}else if(M===Map){C=b.size,C<16?we[pe++]=128|C:C<65536?(we[pe++]=222,we[pe++]=C>>8,we[pe++]=C&255):(we[pe++]=223,Nr.setUint32(pe,C),pe+=4);for(let[A,T]of b)x(A),x(T)}else{for(let A=0,T=T3.length;A<T;A++){let L=_b[A];if(b instanceof L){let D=T3[A];if(D.write){D.type&&(we[pe++]=212,we[pe++]=D.type,we[pe++]=0),x(D.write.call(this,b));return}let O=we,z=Nr,q=pe;we=null;let N;try{N=D.pack.call(this,b,I=>(we=O,O=null,pe+=I,pe>Va&&_(pe),{target:we,targetView:Nr,position:pe-I}),x)}finally{O&&(we=O,Nr=z,pe=q,Va=we.length-10)}N&&(N.length+pe>Va&&_(N.length+pe),pe=Eoe(N,we,pe,D.type));return}}w(b,!b.hasOwnProperty)}}else if(S==="boolean")we[pe++]=b?195:194;else if(S==="bigint"){if(b<BigInt(1)<<BigInt(63)&&b>=-(BigInt(1)<<BigInt(63)))we[pe++]=211,Nr.setBigInt64(pe,b);else if(b<BigInt(1)<<BigInt(64)&&b>0)we[pe++]=207,Nr.setBigUint64(pe,b);else if(this.largeBigIntToFloat)we[pe++]=203,Nr.setFloat64(pe,Number(b));else throw new RangeError(b+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");pe+=8}else if(S==="undefined")this.encodeUndefinedAsNil?we[pe++]=192:(we[pe++]=212,we[pe++]=0,we[pe++]=0);else if(S==="function")x(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+S)},w=this.useRecords===!1?this.variableMapSize?b=>{let S=Object.keys(b),C=S.length;C<16?we[pe++]=128|C:C<65536?(we[pe++]=222,we[pe++]=C>>8,we[pe++]=C&255):(we[pe++]=223,Nr.setUint32(pe,C),pe+=4);let M;for(let A=0;A<C;A++)x(M=S[A]),x(b[M])}:(b,S)=>{we[pe++]=222;let C=pe-t;pe+=2;let M=0;for(let A in b)(S||b.hasOwnProperty(A))&&(x(A),x(b[A]),M++);we[C+++t]=M>>8,we[C+t]=M&255}:b=>{let S=Object.keys(b),C,M=n.transitions||(n.transitions=Object.create(null)),A=0;for(let L=0,D=S.length;L<D;L++){let O=S[L];C=M[O],C||(C=M[O]=Object.create(null),A++),M=C}let T=M[Jf];if(T)T>=96&&p?(we[pe++]=((T-=96)&31)+96,we[pe++]=T>>5):we[pe++]=T;else{T=n.nextId,T||(T=64),T<f&&this.shouldShareStructure&&!this.shouldShareStructure(S)?(T=n.nextOwnId,T<m||(T=f),n.nextOwnId=T+1):(T>=m&&(T=f),n.nextId=T+1);let L=S.highByte=T>=96&&p?T-96>>5:-1;M[Jf]=T,n[T-64]=S,T<f?(S.isShared=!0,n.sharedLength=T-63,i=!0,L>=0?(we[pe++]=(T&31)+96,we[pe++]=L):we[pe++]=T):(L>=0?(we[pe++]=213,we[pe++]=114,we[pe++]=(T&31)+96,we[pe++]=L):(we[pe++]=212,we[pe++]=114,we[pe++]=T),A&&(v+=y*A),g.length>=d&&(g.shift()[Jf]=0),g.push(M),x(S))}for(let L=0,D=S.length;L<D;L++)x(b[S[L]])},_=b=>{let S;if(b>16777216){if(b-t>JA)throw new Error("Packed buffer would be larger than maximum buffer size");S=Math.min(JA,Math.round(Math.max((b-t)*(b>67108864?1.25:2),4194304)/4096)*4096)}else S=(Math.max(b-t<<2,we.length-1)>>12)+1<<12;let C=new B5(S);return Nr=new DataView(C.buffer,0,S),we.copy?we.copy(C,0,t,b):C.set(we.slice(t,b)),pe-=t,t=0,Va=C.length-10,we=C}}useBuffer(e){we=e,Nr=new DataView(we.buffer,we.byteOffset,we.byteLength),pe=0}};_b=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,XB];T3=[{pack(e,t,r){let i=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&i>=0&&i<4294967296){let{target:n,targetView:s,position:a}=t(6);n[a++]=214,n[a++]=255,s.setUint32(a,i)}else if(i>0&&i<17179869184){let{target:n,targetView:s,position:a}=t(10);n[a++]=215,n[a++]=255,s.setUint32(a,e.getMilliseconds()*4e6+(i/1e3/4294967296>>0)),s.setUint32(a+4,i)}else if(isNaN(i)){if(this.onInvalidDate)return t(0),r(this.onInvalidDate());let{target:n,targetView:s,position:a}=t(3);n[a++]=212,n[a++]=255,n[a++]=255}else{let{target:n,targetView:s,position:a}=t(15);n[a++]=199,n[a++]=12,n[a++]=255,s.setUint32(a,e.getMilliseconds()*1e6),s.setBigInt64(a+4,BigInt(Math.floor(i)))}}},{pack(e,t,r){let i=Array.from(e),{target:n,position:s}=t(this.structuredClone?3:0);this.structuredClone&&(n[s++]=212,n[s++]=115,n[s++]=0),r(i)}},{pack(e,t,r){let{target:i,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(i[n++]=212,i[n++]=101,i[n++]=0),r([e.name,e.message])}},{pack(e,t,r){let{target:i,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(i[n++]=212,i[n++]=120,i[n++]=0),r([e.source,e.flags])}},{pack(e,t){this.structuredClone?eE(e,16,t):tE(Fy?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let r=e.constructor;r!==tz&&this.structuredClone?eE(e,JB.indexOf(r.name),t):tE(e,t)}},{pack(e,t){let{target:r,position:i}=t(1);r[i]=193}}];function eE(e,t,r,i){let n=e.byteLength;if(n+1<256){var{target:s,position:a}=r(4+n);s[a++]=199,s[a++]=n+1}else if(n+1<65536){var{target:s,position:a}=r(5+n);s[a++]=200,s[a++]=n+1>>8,s[a++]=n+1&255}else{var{target:s,position:a,targetView:o}=r(7+n);s[a++]=201,o.setUint32(a,n+1),a+=4}s[a++]=116,s[a++]=t,s.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),a)}function tE(e,t){let r=e.byteLength;var i,n;if(r<256){var{target:i,position:n}=t(r+2);i[n++]=196,i[n++]=r}else if(r<65536){var{target:i,position:n}=t(r+3);i[n++]=197,i[n++]=r>>8,i[n++]=r&255}else{var{target:i,position:n,targetView:s}=t(r+5);i[n++]=198,s.setUint32(n,r),n+=4}i.set(e,n)}function Eoe(e,t,r,i){let n=e.length;switch(n){case 1:t[r++]=212;break;case 2:t[r++]=213;break;case 4:t[r++]=214;break;case 8:t[r++]=215;break;case 16:t[r++]=216;break;default:n<256?(t[r++]=199,t[r++]=n):n<65536?(t[r++]=200,t[r++]=n>>8,t[r++]=n&255):(t[r++]=201,t[r++]=n>>24,t[r++]=n>>16&255,t[r++]=n>>8&255,t[r++]=n&255)}return t[r++]=i,t.set(e,r),r+=n,r}function Toe(e,t){let r,i=t.length*6,n=e.length-i;for(t.sort((s,a)=>s.offset>a.offset?1:-1);r=t.pop();){let s=r.offset,a=r.id;e.copyWithin(s+i,s,n),i-=6;let o=s+i;e[o++]=214,e[o++]=105,e[o++]=a>>24,e[o++]=a>>16&255,e[o++]=a>>8&255,e[o++]=a&255,n=s}return e}function _f(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");_b.unshift(e.Class),T3.unshift(e)}Soe(e)}var iz=new rz({useRecords:!1});iz.pack;iz.pack;var Loe=512,Poe=1024,rE=new rz({structuredClone:!0});_f({Class:It.prototype.constructor,type:1,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,It.prototype),e}});_f({Class:ft.prototype.constructor,type:2,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,ft.prototype),e}});_f({Class:qn.prototype.constructor,type:3,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,qn.prototype),e}});_f({Class:HA.prototype.constructor,type:4,write(e){return e.id},read(e){return new HA(e)}});_f({Class:WA.prototype.constructor,type:5,write(e){return e.data},read(e){return new WA(e)}});_f({Class:ci.prototype.constructor,type:6,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,ci.prototype),e}});function Doe(e){var t=0;if(e.length===0)return t;for(let r=0;r<e.length;r++){let i=e[r];t=(t<<5)-t+i,t=t&t}return t}function F7(e){if(fb(e))return e;if(Array.isArray(e))return e.map(F7);if(typeof e=="object"&&e!==null){let t={};for(let r of Object.keys(e).sort())t[r]=F7(e[r]);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}else return e}var U7;(e=>{function t(n){return rE.pack(n)}e.serialize=t;function r(n){return rE.unpack(n)}e.deserialize=r;function i(n){return Doe(t(F7(n))).toString()}e.checksum=i})(U7||(U7={}));var Ha={LookAt:[],Follow:["Create"],DragDrop:["Transition","Animation","Audio","Create"],MouseHover:["Transition","Animation","Create","Destroy","SwitchCamera","SceneTransition"],Scroll:["Transition","Animation","Create"],Start:["Transition","Animation","Audio","Video","Create","Destroy","SwitchCamera","SceneTransition"],Conditional:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset"],MouseDown:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset"],MouseUp:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset"],MousePress:["Transition","Animation","Audio","Video","Link","Create","SwitchCamera","SceneTransition","Reset"],KeyDown:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset"],KeyUp:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset"],KeyPress:["Transition","Animation","Audio","Video","Link","Create","SwitchCamera","Reset"],GameControl:["Transition","Animation","Audio","Video","Create"],Collision:["Transition","Animation","Audio","Video","Create","Destroy","Reset"],Trigger:["Transition","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset"],Resize:["Transition","Animation","Audio","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset"]},iE;(e=>{function t(i){return i.type==="MouseDown"||i.type==="MouseUp"||i.type==="MousePress"||i.type==="KeyDown"||i.type==="KeyUp"||i.type==="KeyPress"}e.is=t;function r(i){return i==="MouseDown"||i==="MouseUp"||i==="MousePress"?{type:i,mode:"Object",disabled:!1,toggle:!1,actions:new ft}:{type:i,disabled:!1,key:void 0,toggle:!1,actions:new ft}}e.defaultData=r})(iE||(iE={}));var L3;(e=>{function t(r){return{type:"Property",value:[r??null,"position","x"]}}e.propertyDefaultData=t,e.valueDefaultData={type:"Literal",value:0}})(L3||(L3={}));var j7;(e=>{function t(n){return{type:"Comparison",operator:"==",lOperand:L3.propertyDefaultData(n),rOperand:{...L3.valueDefaultData}}}e.comparisonDefaultData=t;function r(n){return{type:"Distance",toObject:n??null,fromObject:n??null,distance:200}}e.distanceDefaultData=r;function i(n,s){return{type:"State",object:n??null,state:s??null}}e.stateDefaultData=i})(j7||(j7={}));var nE;(e=>{function t(i){return i.type==="Conditional"}e.is=t;function r(i){return{type:"Conditional",disabled:!1,inActions:new ft,outActions:new ft,condition:j7.distanceDefaultData(i)}}e.defaultData=r})(nE||(nE={}));var sE;(e=>e.defaultData={type:"DragDrop",cursor:"hand",disabled:!1,dampingFactor:1,objects:[],snapTo:"center",snapSurfaceMode:"bbox",snapSurfaceOffset:0,dropOn:"all",autoOrient:!0,dropDestinations:[],plane:"adaptive",planeMode:"locked",referenceFrame:"global",limits:[-1/0,1/0,-1/0,1/0,-1/0,1/0],drop:!1,resetOnSnapFail:!1,snapSpeed:20,resetSpeed:20,dragDropActions:{drag:new ft,drop:new ft}})(sE||(sE={}));var V7;(e=>e.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5,actions:new ft})(V7||(V7={}));var G7;(e=>e.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5})(G7||(G7={}));var aE;(e=>{function t(i){return i.type==="MouseHover"}e.is=t;function r(){return{type:"MouseHover",disabled:!1,actions:new ft}}e.defaultData=r})(aE||(aE={}));var oE;(e=>{function t(i){return i.type==="Scroll"}e.is=t;function r(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new ft}}e.defaultData=r})(oE||(oE={}));var lE;(e=>{function t(i){return i.type==="Start"}e.is=t;function r(){return{type:"Start",disabled:!1,actions:new ft}}e.defaultData=r})(lE||(lE={}));var hE;(e=>{function t(i){return i.type==="Collision"}e.is=t;function r(){return{type:"Collision",disabled:!1,toggle:!1,target:"character",actions:new ft}}e.defaultData=r})(hE||(hE={}));var uE;(e=>{function t(i){return i.type==="Trigger"}e.is=t;function r(i,n){return{type:"Trigger",disabled:!1,toggle:!1,target:"all",triggeringObjects:[],actions:new ft,triggerZone:"box",position:n.toArray(),rotation:[0,0,0],size:i.toArray(),radius:i.length()/2,helperVisible:!0}}e.defaultData=r})(uE||(uE={}));var H7;(e=>{e.defaultSizes={mobile:[480,480],tablet:[768,768],desktop:[1200,1200],custom:[769,1200]};function t(a){return a.type==="Resize"}e.is=t;function r(a){return typeof a=="string"?a:"custom"}e.sizeToDevice=r;function i(a){return typeof a=="string"?[...e.defaultSizes[a]]:[...a]}e.deviceToSize=i;function n(){let a={size:"mobile",operator:"<",actions:new ft},o={size:"tablet",operator:"<",actions:new ft},l={size:[...e.defaultSizes.custom],operator:"<>",actions:new ft},h=new ft;return h.push({id:Tt.generateUUID(),fi:0,data:a},{id:Tt.generateUUID(),fi:1,data:o},{id:Tt.generateUUID(),fi:2,data:l}),{type:"Resize",disabled:!1,orientation:"horizontal",breakpoints:h}}e.defaultData=n;function s(){return{size:[...e.defaultSizes.custom],operator:"<>",actions:new ft}}e.defaultBreakpointData=s})(H7||(H7={}));var Cf="personal camera",f0="a218fcc3-276b-49b9-b485-49037fd14f5f",Ooe=2960946,la=5526619,qd;(e=>{function t(i,n){return i[0]===n[0]&&i[1]===n[1]}e.isEqual=t;function r(i,n,s){return[i[0]+(n[0]-i[0])*s,i[1]+(n[1]-i[1])*s]}e.lerp=r})(qd||(qd={}));var ec;(e=>{function t(l,h){return l[0]===h[0]&&l[1]===h[1]&&l[2]===h[2]}e.isEqual=t;function r(l,h){return[l[0]+h[0],l[1]+h[1],l[2]+h[2]]}e.add=r;function i(l,h){return[l[0]-h[0],l[1]-h[1],l[2]-h[2]]}e.sub=i;function n(l,h){return[l[0]/h[0],l[1]/h[1],l[2]/h[2]]}e.div=n;function s(l,h){return[l[0]*h[0],l[1]*h[1],l[2]*h[2]]}e.mul=s;function a(l,h){return Math.hypot(l[0]-h[0],l[1]-h[1],l[2]-h[2])}e.dist=a;function o(l,h,c){return[l[0]+(h[0]-l[0])*c,l[1]+(h[1]-l[1])*c,l[2]+(h[2]-l[2])*c]}e.lerp=o})(ec||(ec={}));var P3;(e=>{function t(i,n){return i[0]===n[0]&&i[1]===n[1]&&i[2]===n[2]&&i[3]===n[3]}e.isEqual=t;function r(i,n,s){return[i[0]+(n[0]-i[0])*s,i[1]+(n[1]-i[1])*s,i[2]+(n[2]-i[2])*s,i[3]+(n[3]-i[3])*s]}e.lerp=r})(P3||(P3={}));var Qp;(e=>{e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(n,s){for(let a=0;a<16;a++)if(n[a]!==s[a])return!1;return!0}e.isEqual=t;function r(n){return n??e.identity}e.simplify=r;function i(n,s){let a=s.slice(0);for(var o=0,l=s.length;o<l;o+=3){let h=n[3]*s[o]+n[7]*s[o+1]+n[11]*s[o+2]+n[15];a[o]=(n[0]*s[o]+n[4]*s[o+1]+n[8]*s[o+2]+n[12])/h,a[o+1]=(n[1]*s[o]+n[5]*s[o+1]+n[9]*s[o+2]+n[13])/h,a[o+2]=(n[2]*s[o]+n[6]*s[o+1]+n[10]*s[o+2]+n[14])/h}return a}e.applyMatrix4=i})(Qp||(Qp={}));var pn;(e=>{function t(l){return typeof l=="object"&&typeof l.r=="number"&&typeof l.g=="number"&&typeof l.b=="number"}e.isRGB=t,e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0};function r(l){return{r:Math.round(l.r*255),g:Math.round(l.g*255),b:Math.round(l.b*255),a:1}}e.toRgb255a1=r;function i(l){return{r:l.r,g:l.g,b:l.b}}e.clone=i;function n(l){return l=Math.floor(l),{r:(l>>16&255)/255,g:(l>>8&255)/255,b:(l&255)/255}}e.fromHex=n;function s(l){return Math.round(l.r*255)*65536+Math.round(l.g*255)*256+Math.round(l.b*255)}e.toHex=s;function a(l,h){return l.r===h.r&&l.g===h.g&&l.b===h.b}e.equals=a;function o(l,h,c){return{r:l.r+(h.r-l.r)*c,g:l.g+(h.g-l.g)*c,b:l.b+(h.b-l.b)*c}}e.lerp=o})(pn||(pn={}));var Ea;(e=>{e.white={...pn.white,a:1},e.transparent={...pn.white,a:0};function t(a){return{r:a[0],g:a[1],b:a[2],a:a[3]}}e.from0to1=t;function r(a,o){return{...pn.fromHex(a),a:o}}e.fromHexAndA=r;function i(a){return{r:Math.round(a.r*255),g:Math.round(a.g*255),b:Math.round(a.b*255),a:a.a}}e.toRgb255a1=i;function n(a,o){return pn.equals(a,o)&&a.a===o.a}e.equals=n;function s(a,o,l){return{r:a.r+(o.r-a.r)*l,g:a.g+(o.g-a.g)*l,b:a.b+(o.b-a.b)*l,a:a.a+(o.a-a.a)*l}}e.lerp=s})(Ea||(Ea={}));var W7;(e=>e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(W7||(W7={}));var cE;(e=>e.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(cE||(cE={}));var dE;(e=>e.defaultData={control1:[.5,0],control2:[.5,1]})(dE||(dE={}));var rh;(e=>(e.linear=[0,0,1,1],e.ease=[.25,.1,.25,1],e.easeIn=[.42,0,1,1],e.easeOut=[0,0,.58,1],e.easeInOut=[.42,0,.58,1]))(rh||(rh={}));var xc;(e=>{e.all=["PerspectiveCamera","OrthographicCamera"];function t(r){return e.all.includes(r)}e.is=t})(xc||(xc={}));var Zp;(e=>{e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset};function t(r){return r.type==="PerspectiveCamera"?r.perspective.zoom:r.orthographic.zoom}e.getZoom=t})(Zp||(Zp={}));var yh;(e=>{function t(i,n=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:Math.max(i[0],i[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[i[0]+i[0]*n,0,0]},grid:{count:[2,2,2],size:i.map(s=>s*(1+n)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}}e.defaultData=t;function r(i,n){let s={...i};if(nz.forEach(a=>{Object.assign(s,{[a]:n[a]??i[a]})}),s.radial={...i.radial},n.radial){let a=i.radial,o=n.radial;sz.forEach(l=>{Object.assign(s.radial,{[l]:o[l]??a[l]})})}if(s.linear={...i.linear},n.linear){let a=i.linear,o=n.linear;az.forEach(l=>{Object.assign(s.linear,{[l]:o[l]??a[l]})})}if(s.grid={...i.grid},n.grid){let a=i.grid,o=n.grid;oz.forEach(l=>{Object.assign(s.grid,{[l]:o[l]??a[l]})})}if(s.toObject={...i.toObject},n.toObject){let a=i.toObject,o=n.toObject;lz.forEach(l=>{Object.assign(s.toObject,{[l]:o[l]??a[l]})})}if(s.randomnessObject={...i.randomnessObject},n.randomnessObject){let a=i.randomnessObject,o=n.randomnessObject;hz.forEach(l=>{Object.assign(s.randomnessObject,{[l]:o[l]??a[l]})})}return s}e.merge=r})(yh||(yh={}));var q7;(e=>{e.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let t=["radial","linear","grid","toObject","randomnessObject"];function r(i,n){let s=[];i.count!==void 0&&s.push({type:0,path:n,props:{count:i.count}});for(let a of t){let o=i[a];o&&Object.keys(o).length>0&&s.push({type:0,path:[...n,a],props:o})}return s}e.toOps=r})(q7||(q7={}));var nz=["count"],sz=["radius","start","end","position","scale","rotation"],az=["position","scale","rotation"],oz=["count","size"],lz=["count","position","scale","rotation"],hz=["strength","scale","rotation","position","movement","seed","freqScale"],X7;(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function t(r){return e.all.includes(r)}e.is=t})(X7||(X7={}));var Y7;(e=>{function t(i){return r(i)}e.defaultData=t;function r(i){if(i==="PointLight")return{type:i,color:Ea.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,penumbraSize:.5,depth:1e5};if(i==="SpotLight")return{type:i,color:Ea.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};if(i==="DirectionalLight")return{type:i,color:Ea.white,intensity:1,shadows:!0,size:2e3,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(Y7||(Y7={}));var Kp;(e=>e.defaultData={enabled:"visibility",fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(Kp||(Kp={}));var Q7;(e=>{e.defaultData={castShadow:!0,receiveShadow:!0};function t(r,i){return r.castShadow===i.castShadow&&r.receiveShadow===i.receiveShadow}e.equals=t})(Q7||(Q7={}));var Z7;(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0};function t(r,i){return r.flatShading===i.flatShading&&r.side===i.side&&r.wireframe===i.wireframe}e.equals=t})(Z7||(Z7={}));var K7;(e=>e.defaultData={...Z7.defaultData,...Q7.defaultData})(K7||(K7={}));var pE;(e=>{function t(r,i){var s,a;let n=[];if("material"in r){let o=typeof r.material=="string"?i.materials[r.material]??((s=i.lib.materials[r.material])==null?void 0:s.asset):r.material;o&&n.push(o)}else if("materials"in r)for(let o of r.materials){let l=typeof o=="string"?i.materials[o]??((a=i.lib.materials[o])==null?void 0:a.asset):o;l&&n.push(l)}return n}e.getMaterialData=t})(pE||(pE={}));var D3;(e=>(e.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},e.maxSize=3e7))(D3||(D3={}));var fE;(e=>{function t(r){return r==="texture"||r==="video"||r==="color"||r==="depth"||r==="normal"||r==="gradient"||r==="noise"||r==="fresnel"||r==="rainbow"||r==="toon"||r==="outline"||r==="transmission"||r==="matcap"||r==="displace"||r==="pattern"||r==="light"}e.is=t})(fE||(fE={}));function Ioe(e){return e.type!=="displace"}var mE;(e=>{function t(r){return r==="phong"||r==="toon"||r==="lambert"||r==="physical"}e.is=t})(mE||(mE={}));var uz=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],Roe=["wrapping","image","video","name"],Dn;(e=>{function t(s,a){let{texture:o,...l}=a;if(Object.assign(s,l),o){let h=s.texture;h&&Object.assign(h,o)}}e.patch=t;function r(s,a){return s==="light"&&a?i(a):n(s)}e.defaultData=r;function i(s){let a={mode:0,isMask:!1,visible:!0,bumpMap:void 0,bumpMapIntensity:5,roughnessMap:void 0,alphaOverride:1};switch(s){case"phong":return{...a,category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",visible:!0,mode:0,occlusion:!0,alpha:.6};case"toon":return{...a,category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1};case"lambert":return{...a,category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0,occlusion:!0};case"physical":return{...a,category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0,occlusion:!0}}}function n(s){let a={alpha:1,mode:0,isMask:!1,visible:!0};switch(s){case"texture":return{...a,type:"texture",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0]},crop:!1};case"video":return{...a,type:"video",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{video:D3.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!1};case"color":return{...a,type:"color",color:pn.fromHex(la)};case"depth":return{...a,type:"depth",gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{...a,type:"normal",cnormal:[1,1,1]};case"gradient":return{...a,type:"gradient",gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{...a,type:"noise",size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...pn.fromHex(6710886),a:1},colorB:{...pn.fromHex(6710886),a:1},colorC:{...pn.fromHex(16777215),a:1},colorD:{...pn.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8],voronoiStyle:0,highCut:1,lowCut:0,smoothness:.3,seed:0,quality:1};case"fresnel":return{...a,type:"fresnel",color:Ea.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{...a,type:"rainbow",filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{...a,type:"toon",positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:Ea.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{...a,type:"outline",outlineColor:Ea.fromHexAndA(0,1),contourColor:Ea.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{...a,type:"matcap",texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}};case"transmission":return{...a,type:"transmission",thickness:10,ior:1.5,roughness:1};case"displace":return{visible:!0,type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,voronoiStyle:0,smoothness:.3,seed:0,highCut:1,lowCut:0,quality:1};case"pattern":return{...a,type:"pattern",style:0,projection:0,axis:"y",blending:0,offset:[0,0],colorA:{...pn.fromHex(0),a:1},colorB:{...pn.fromHex(16777215),a:1},frequency:[10,10],size:.5,variation:0,smoothness:.5,zigzag:0,rotation:0,vertical:[0,1],horizontal:[0,1],sides:6}}}})(Dn||(Dn={}));var Ki;(e=>{function t(h){return!h.layers.some(c=>c.data.type==="texture"&&c.data.projection!==0||c.data.type==="depth"&&!c.data.isWorldSpace||c.data.type==="noise"||c.data.type==="displace")}e.isMergable=t;function r(h){let c="";return h.layers.forEach(u=>{Object.entries(u.data).forEach(([d,p])=>{c+=`${d}${p}`,Array.isArray(p)?p.forEach(f=>c+=`${f}`):typeof p=="object"?Object.values(p).forEach(f=>{typeof f=="number"?c+=`${f.toFixed(4)}`:c+=`${f}`}):c+=`${p}`})}),c}e.getHash=r;function i(){return{layers:new ft}}e.defaultEmptyData=i;function n(h="layer1",c="layer2"){return a("phong",h,c)}e.defaultData=n;function s(h,c){return{...h,name:c}}e.withName=s;function a(h,c="layer1",u="layer2"){let d=new ft;return d.push({fi:0,data:Dn.defaultData("light",h),id:c}),d.push({fi:1,data:Dn.defaultData("color"),id:u}),{layers:d}}e.defaultTwoLayerData=a;function o(h,c="phong",u="layer1",d="layer2"){let p=Dn.defaultData("texture");Object.assign(p.texture,{image:h});let f=new ft;return f.push({fi:0,data:p,id:u}),f.push({fi:1,data:Dn.defaultData("light",c),id:d}),{layers:f}}e.defaultTwoLayerTextureData=o;function l(h,c="phong",u="layer1",d="layer2"){let p=Dn.defaultData("video");Object.assign(p.texture,{video:h});let f=new ft;return f.push({fi:0,data:p,id:u}),f.push({fi:1,data:Dn.defaultData("light",c),id:d}),{layers:f}}e.defaultTwoLayerVideoTextureData=l})(Ki||(Ki={}));var O3;(e=>{function t(){return{points:new ft,roundness:0,shapeHoles:[],isClosed:!1}}e.defaultData=t})(O3||(O3={}));var I3;(e=>{function t(){return{points:new ft,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}e.defaultData=t})(I3||(I3={}));var cz={type:"Ellipse",width:50,height:50,spikes:16,angle:360,innerRadius:0},$7;(e=>{function t(r,i){let n={...r};return pz.forEach(s=>{Object.assign(n,{[s]:i[s]??r[s]})}),n}e.merge=t})($7||($7={}));var dz={shape:cz,depth:1,offset:0,bevel:50,bevelSides:6,angle:0,twist:0,startScale:1,endScale:1,capType:"flat"},pz=["depth","offset","angle","twist","startScale","endScale"],R3;(e=>{function t(i){return i==="PolygonGeometry"||i==="RectangleGeometry"||i==="StarGeometry"||i==="TriangleGeometry"||i==="EllipseGeometry"}e.is2DParametricMesh=t;function r(i){return i==="PolygonGeometry"||i==="PolygonGeometry"||i==="RectangleGeometry"||i==="StarGeometry"||i==="TriangleGeometry"||i==="EllipseGeometry"||i==="PathGeometry"||i==="VectorGeometry"||i==="ConeGeometry"||i==="CubeGeometry"||i==="CylinderGeometry"||i==="DodecahedronGeometry"||i==="HelixGeometry"||i==="IcosahedronGeometry"||i==="LatheGeometry"||i==="PyramidGeometry"||i==="SphereGeometry"||i==="PlaneGeometry"||i==="BackdropGeometry"||i==="TorusGeometry"||i==="TorusKnotGeometry"||i==="BooleanGeometry"||i==="TextGeometry"}e.isParametricMesh=r})(R3||(R3={}));var J7;(e=>{function t(r,i){let n={...r};return Object.assign(n,i),n.type==="PathGeometry"&&"extrusion"in i&&i.extrusion&&(n.extrusion={...r.extrusion},Object.assign(n.extrusion,$7.merge(n.extrusion,i.extrusion))),n}e.merge=t})(J7||(J7={}));var fp;(e=>{function t(r){if(r==="RectangleGeometry")return{width:320,height:320,type:r,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="PathGeometry")return{type:r,width:1,height:1,depth:1,path:I3.defaultData(),extrusion:dz};if(r==="VectorGeometry")return{width:1,height:1,type:r,subdivisions:12,shape:O3.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="BooleanGeometry")return{type:r,operation:2,width:0,height:0,depth:0,phongAngle:35};if(r==="TextGeometry")return{type:r,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:"",textTransform:1,font:"Roboto_regular",extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="SphereGeometry")return{type:"SphereGeometry",width:100,height:100,depth:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI};throw new Error("not implemented")}e.defaultData=t})(fp||(fp={}));var gE=["width","height","depth"],e8;(e=>e.defaultData={enabled:!1,useBackgroundColor:!1,color:pn.white,near:.1,far:2e3})(e8||(e8={}));var B3;(e=>{let t={opacity:1,blendFunction:13,enabled:!1};e.defaultData={enabled:!1,pixelation:{...t,blendFunction:16,granularity:15},bloom:{...t,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...t,offset:[2,2]},vignette:{...t,darkness:1,offset:0},hueSaturation:{...t,hue:3,saturation:0},brightnessContrast:{...t,brightness:.25,contrast:0},depthOfField:{...t,focalLength:2,focusDistance:2,bokehScale:2},noise:{...t,blendFunction:16}}})(B3||(B3={}));var t8;(e=>e.defaultData={softShadowQuality:"low"})(t8||(t8={}));var r8;(e=>e.defaultData={enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75})(r8||(r8={}));var i8;(e=>e.defaultData={occlusion:!1,aoFullRes:!1,radius:256,bias:.5,aoColor:{r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}})(i8||(i8={}));var $p;(e=>e.defaultData={usePhysics:!1,gravity:-10})($p||($p={}));var n8;(e=>e.defaultData={playCamera:Cf,gameControlObject:null})(n8||(n8={}));var s8;(e=>e.defaultData={backgroundColor:Ea.fromHexAndA(Ooe,1),postprocessing:B3.defaultData,fog:e8.defaultData,globalPhysics:$p.defaultData,ambient:r8.defaultData,ao:i8.defaultData,shadow:t8.defaultData,publish:n8.defaultData})(s8||(s8={}));var vE;(e=>{function t(i){return i==="Component"||i==="Instance"}e.isComponentRelated=t;function r(i){return i==="Empty"||i==="Instance"}e.isEmptyOrComponent=r})(vE||(vE={}));var Jp;(e=>{e.identity={...W7.identity,hiddenMatrix:Qp.identity};function t(n){return{position:n.position,rotation:n.rotation,scale:n.scale,hiddenMatrix:n.hiddenMatrix}}e.fromObject=t;function r(n,s){return{position:(s==null?void 0:s.position)||n.position,rotation:(s==null?void 0:s.rotation)||n.rotation,scale:(s==null?void 0:s.scale)||n.scale,hiddenMatrix:(s==null?void 0:s.hiddenMatrix)||n.hiddenMatrix}}e.merge=r;function i(n,s){return Gae({position:ec.isEqual(n.position,s.position)?void 0:s.position,rotation:ec.isEqual(n.rotation,s.rotation)?void 0:s.rotation,scale:ec.isEqual(n.scale,s.scale)?null:s.scale,hiddenMatrix:Qp.isEqual(n.hiddenMatrix,s.hiddenMatrix)?void 0:s.hiddenMatrix})}e.diff=i})(Jp||(Jp={}));var _n;(e=>e.defaultData={states:new ft,events:new ft,visible:!0,raycastLock:!1,physics:Kp.defaultData,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...Jp.identity,cloner:null})(_n||(_n={}));var a8;(e=>e.defaultData={type:"Empty",..._n.defaultData})(a8||(a8={}));var yE;(e=>e.defaultData={type:"Component",..._n.defaultData})(yE||(yE={}));var mp;(e=>e.defaultData={type:"Mesh",..._n.defaultData,...K7.defaultData})(mp||(mp={}));var hm;(e=>e.defaultData={..._n.defaultData,...Jp.identity,position:[0,0,Zp.DefaultTargetOffset],...Zp.defaultData})(hm||(hm={}));var o8;(e=>{function t(r){return{..._n.defaultData,...Y7.defaultData(r)}}e.defaultData=t,e.defaultDirectionalLightData={...e.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7}})(o8||(o8={}));var z3;(e=>{function t(i,n,s=0){for(;s<n.length;){let a=i?i[n[s]]:void 0;if(n.length===s+1)return a;if(a)i=a.descendants,s+=1;else return}}e.resolveWithDes=t;function r(i,n,s=0){let a=t(i,n,s);if(a){let o=Object.keys(a);if(o.length===1&&o[0]==="descendants")return}return a}e.resolve=r})(z3||(z3={}));var xh;(e=>{e.rootOverrideProps=["physics","events"],e.compositeNonOptionalOverrideProps=["geometry"],e.compositeEntireOverrideOverrideProps=["material"];function t(i,n){return{..._n.defaultData,...n,component:i,overrides:new ci,physics:void 0,events:void 0,type:"Instance"}}e.ofComponent=t;function r(i){let n=Jp.fromObject(i.data);return t(i.id,n)}e.fromComponentData=r})(xh||(xh={}));var ef;(e=>e.defaultData={type:"Page",..._n.defaultData,physics:{...Kp.defaultData,fusedBody:!1},...s8.defaultData,camera:hm.defaultData})(ef||(ef={}));var l8;(e=>(e.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:Qp.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:Kp.defaultData,states:new ft,events:new ft,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...Zp.defaultData},e.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},e.defaultMeshObject={name:"Rectangle",..._n.defaultData,...mp.defaultData,geometry:fp.defaultData("RectangleGeometry"),material:Ki.defaultTwoLayerData("phong","layer1","layer2")},e.defaultBooleanObject={name:"Boolean",..._n.defaultData,...mp.defaultData,geometry:fp.defaultData("BooleanGeometry"),material:Ki.defaultTwoLayerData("phong","layer1","layer2")},e.defaultTextObject={name:"Text",..._n.defaultData,...mp.defaultData,geometry:fp.defaultData("TextGeometry"),material:Ki.defaultTwoLayerData("phong","layer1","layer2")}))(l8||(l8={}));var Bu;(e=>{function t(s,a){let o={name:a};return s.type==="Mesh"?(o.geometry={},"material"in s&&(o.material={layers:new ci}),"materials"in s&&(o.materials=s.materials.map(l=>({layers:new ci})))):xc.is(s.type)&&(o.perspective={},o.orthographic={}),o}e.newEmpty=t;function r(s,a){if(a===void 0)return s;let o={...s};return"material"in o&&"material"in a&&a.material&&(o.material=lm(o.material,l=>{if(typeof l!="string")for(let[h,c]of Object.entries(a.material.layers)){let u=l.layers.data(h);u&&Dn.patch(u,c)}}).data),o.materials&&a.materials&&(o.materials=lm(o.materials,l=>{var h,c;for(let u=0;u<o.materials.length;u++){let d=a.materials[u];if(typeof d!="string")for(let[p,f]of Object.entries(d.layers)){let m=(c=(h=l[u])==null?void 0:h.layers)==null?void 0:c.data(p);m&&Dn.patch(m,f)}}}).data),o}function i(s,a){let o,l=[],h={orthographic:0,perspective:0,geometry:0};function c(u,d){for(let[p,f]of Object.entries(d.layers)){let{texture:m,...g}=f;if(m!==void 0&&Object.keys(m).length>0){let v={path:[...u,"layers",p,"texture"],props:m,type:0};l.push(v)}if(Object.keys(g).length>0){let v={path:[...u,"layers",p],props:g,type:0};l.push(v)}}}for(let[u,d]of Object.entries(a))if(u!=="name")if(u==="cloner")l.push(...q7.toOps(d,["cloner"]));else if(u==="pathSnapping")l.push({path:[u],props:{slide:d.slide,offset:d.offset},type:0});else if(u==="material")c(["material"],d);else if(u==="materials")for(let[p,f]of Object.entries(d))c(["materials",p],f);else if(h[u]===0){if(u==="geometry"&&d.extrusion!==void 0){let p={path:[u,"extrusion"],props:d.extrusion,type:0};l.push(p),d={...d},delete d.extrusion}if(Object.keys(d).length>0){let p={path:[u],props:d,type:0};l.push(p)}}else o===void 0&&(o={path:[],props:{},type:0},l.push(o)),o.props[u]=d;return l}e.toOps=i;function n(s,a){var l,h,c,u,d,p;if(a===void 0)return s;let o={...s};if(Object.assign(o,Jp.merge(o,a)),Object.assign(o,{pathSnapping:Object.assign({},o.pathSnapping,{slide:((l=a.pathSnapping)==null?void 0:l.slide)??((h=o.pathSnapping)==null?void 0:h.slide)??0,offset:((c=a.pathSnapping)==null?void 0:c.offset)??((u=o.pathSnapping)==null?void 0:u.offset)??0})}),xc.is(s.type)){o.orthographic={...o.orthographic},o.perspective={...o.perspective};let f=a;((d=f.orthographic)==null?void 0:d.zoom)!==void 0&&(o.orthographic.zoom=f.orthographic.zoom),((p=f.perspective)==null?void 0:p.zoom)!==void 0&&(o.perspective.zoom=f.perspective.zoom),f.isUpVectorFlipped!==void 0&&(o.isUpVectorFlipped=f.isUpVectorFlipped),f.targetOffset!==void 0&&(o.targetOffset=f.targetOffset)}else if(s.type==="Mesh")"geometry"in a&&Object.assign(o,{geometry:J7.merge(o.geometry,a.geometry)}),(a.material||a.materials)&&(o=r(o,a)),o.cloner&&"cloner"in a&&Object.assign(o,{cloner:yh.merge(o.cloner,a.cloner)});else if(s.type==="Empty")o.cloner&&"cloner"in a&&Object.assign(o,{cloner:yh.merge(o.cloner,a.cloner)});else if(X7.is(s.type)){let f=a;f.intensity!==void 0&&(o.intensity=f.intensity),f.color!==void 0&&(typeof f.color=="string"?o.color=f.color:o.color=pn.clone(f.color))}return o}e.patch=n})(Bu||(Bu={}));var k3;(e=>e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0})(k3||(k3={}));var tc;(e=>e.defaultData={orbitControls:k3.defaultData,playPage:f0,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",joystickSizeAndXYOffset:Array(12).fill(0).map((t,r)=>{let i=0,n=0;return r<5?n=-30:r<10&&(n=30),r===0||r===10||r===5?i=30:(r===4||r===11||r===9)&&(i=-30),[120,[i,n],"show"]}),settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:Math.max(1,typeof window<"u"?Math.floor(window.devicePixelRatio):1),stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1}},stopRaycast:!0,hdTransmission:!1})(tc||(tc={}));var h8;(e=>e.defaultData={id:"basic",label:"Basic",style:"None",prompt:""})(h8||(h8={}));var u8;(e=>e.defaultData={weather:0,shadows:0,lightOrigin:0,temperature:0,sun:0,camera:0,environment:0,particles:0,nature:0,floor:0})(u8||(u8={}));var gp;(e=>(e.defaultData=()=>({mode:"line-art-both",prompt:"",negativePrompt:"",style:{...h8.defaultData},isRandomSeed:!0,seed:e.generateSeed(),guessMode:!1,advanced:!1,steps:20,guidanceScale:7.5,controlNetScale:1,modifiers:u8.defaultData}),e.generateSeed=()=>Math.round(Math.random()*1e5)))(gp||(gp={}));var um;(e=>{function t(i){return i.find(n=>n.data.type==="Page"&&n.data.globalPhysics.usePhysics)!==void 0}e.physicsEnabled=t;function r(i,n,s){i.scene.objects.traverseFrom(n,(a,o)=>{var l;if(o.type==="Instance"){let h=(l=U3.getComponentData(i,o.component))==null?void 0:l.data;h&&s(a,o,h.events)}else s(a,o,o.events)})}e.traverseModuleInstances=r})(um||(um={}));var vp;(e=>{e.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222";function t(n={withLight:!0,withSquare:!0}){let s=[],a=l8.defaultMeshObject;n.withLight===!0&&s.push({fi:-1,data:o8.defaultDirectionalLightData,id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]}),n.withSquare===!0&&s.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:a,children:[]});let o=new qn;return o.push({fi:1,id:f0,data:{...ef.defaultData,name:"Scene 1"},children:s}),o}e.defaultData={objects:t(),publish:tc.defaultData,styles:gp.defaultData()},e.emptyDataWithoutPage=function(){return{objects:new qn,publish:tc.defaultData,styles:gp.defaultData()}},e.emptyDataWithPage=function(n){return{objects:t(n),publish:tc.defaultData,styles:gp.defaultData()}};function r(n){return{...e.defaultData,objects:yc(n,qn.prototype)}}e.withObjs=r;function i(n,s){return r([{id:n,data:s,children:[],fi:0}])}e.withObj=i})(vp||(vp={}));var m0;(e=>e.defaultData={preset:"fullscreen",allowResponsive:!1,size:[512,512],coords:[0,0],sceneScale:1,color:{r:0,g:0,b:0,a:.5}})(m0||(m0={}));var N3;(e=>e.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",name:"empty"})(N3||(N3={}));var c8;(e=>e.all=["images","videos","colors","audios","fonts","materials"])(c8||(c8={}));var xE;(e=>e.all=[...c8.all,"components"])(xE||(xE={}));var wE;(e=>{function t(){return{images:new It,videos:new It,colors:new It,audios:new It,fonts:new It,materials:new It,components:new It}}e.defaultData=t})(wE||(wE={}));var cm;(e=>{function t(){return{images:new It,videos:new It,colors:new It,audios:new It,fonts:new It,materials:new It,components:new It}}e.defaultData=t})(cm||(cm={}));var il;(e=>{function t(){let n={};return n["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},yc(n,It.prototype)}e.defaultColors=t;function r(n){let s={};return n!=null&&n.withAITexture&&(s["a1b10010-844c-a8a3-11ec-0242ac2011ec"]={...N3.emptyImage,name:"AI generated image"}),yc(s,It.prototype)}e.defaultImages=r;function i(){return{catelogs:new It,materials:new It,images:new It,videos:new It,colors:new It,audios:new It,fonts:new It,lib:cm.defaultData()}}e.emptyData=i})(il||(il={}));var d8;(e=>e.list=["idle","move","jump","run"])(d8||(d8={}));var F3;(e=>(e.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},e.defaultDataThirdPerson={moveMode:"walk",forwardDirection:"+z",speedTranslate:1e3,speedRotate:100,runMultiplier:2,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","▲"],["rotPosY","◀"],["rotNegX","▼"],["rotNegY","▶"],["jump","Space"],["run","⇧"],["none","Ctrl"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:e.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new ft,move:new ft,jump:new ft,run:new ft},navmesh:{enabled:!1,ch:6,cs:6,walkableClimb:5,walkableHeight:1,walkableRadius:0,zones:"all",objects:[],helperVisible:!0,destinationHelperRadius:0,destinationHelperColor:Ea.fromHexAndA(3728051,1)}}))(F3||(F3={}));function bE(e){e.layers.forEach(t=>{if(t.type==="depth"&&t.colorA!==void 0){let r=t.colorA,i=t.colorB,n=[[r.r,r.g,r.b,r.a],[i.r,i.g,i.b,i.a]],s=[0,1];for(let o=2;o<10;o++)n.push(n[1]),s.push(1);let a={...bl(Mi(t),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,t.near),far:Math.max(0,t.far),colors:n,steps:s,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(t,a)}else if(t.type==="depth"&&t.gradientType===1&&(t.near<0||t.far<0)){let r={...Mi(t),near:Math.max(t.near,0),far:Math.max(t.far,0)};Object.assign(t,r)}})}function sh(e,t){Object.values(e.shared.materials).forEach(r=>t(r))}function ah(e,t){e.scene.objects.traverse((r,i)=>{"materials"in i?i.materials.forEach((n,s)=>{n===void 0&&(i.materials[s]=Ki.defaultData(),n=i.materials[s]),typeof n!="string"&&t(n)}):"material"in i?typeof i.material!="string"&&(i.material===void 0&&(i.material=Ki.defaultData()),t(i.material)):i.type==="Mesh"&&(i.material===void 0&&(i.material=Ki.defaultData()),t(i.material)),"overrides"in i&&Object.values(i.overrides).forEach(n=>{n.material&&typeof n.material!="string"&&t(n.material)})})}function Boe(e){Object.assign(e.scene.publish,{orbitControls:{...k3.defaultData,...Mi(e.scene.publish.orbitControls)}})}function zoe(e){Object.assign(e.scene.publish.settings,{video:{...tc.defaultData.settings.video,...Mi(e.scene.publish.settings.video)}})}function koe(e){function t(r){if(r.layers){for(let i of Object.values(r.layers))if(i){for(let[n,s]of Object.entries(i))if((uz.includes(n)||typeof s=="boolean")&&delete i[n],n==="texture")for(let[a,o]of Object.entries(s))(Roe.includes(a)||typeof o=="boolean")&&delete s[a]}}}e.scene.objects.traverse((r,i)=>{i.states.forEach(n=>{let s=n;s.material?t(s.material):s.materials&&s.materials.forEach(a=>{t(a)})})})}function Noe(e){e.scene.publish.withBackground=!0}function Foe(e){e.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}function Uoe(e){e.scene.objects.traverse((t,r)=>{let i=r.cloner;i&&(i.radial.scale=i.radial.scale.map(n=>n+1),i.linear.scale=i.linear.scale.map(n=>n+1))})}function joe(e){e.scene.objects.traverse((t,r)=>{let i=r.geometry;i&&(i.type==="DodecahedronGeometry"||i.type==="IcosahedronGeometry")&&(i.detail=Math.round(i.detail))})}function Voe(e){e.scene.objects.traverse((t,r)=>{let i=e.scene.objects.unproxy().parent(t);if(i){let n=Mi(e.scene.objects.data(i));n&&n.type==="Mesh"&&n.geometry.type==="BooleanGeometry"&&r.type==="Mesh"&&(r.visible=Mi(r).booleanExclude!==!0)}})}function Goe(e){e.scene.objects.traverse((t,r)=>{if(r.type==="Mesh"){let i=r;r.geometry.type==="NonParametricGeometry"?i.material!==void 0&&delete i.material:i.materials!==void 0&&delete i.materials}})}function Hoe(e){function t(i){Object.setPrototypeOf(i,ci.prototype),i.texture&&Object.setPrototypeOf(i.texture,ci.prototype)}function r(i){Object.setPrototypeOf(i,ci.prototype);for(let n in i)t(i[n])}e.scene.objects.traverse((i,n)=>{n.states.forEach(s=>{let a=s;if(a.material){let o=Mi(a.material).layers;r(o),a.material.layers=o}if(a.materials)for(let o=0;o<a.materials.length;o++){let l=a.materials[o],h=Mi(l).layers;r(h),l.layers=h}})})}function _E(e){e.layers===void 0&&Object.assign(e,Ki.defaultTwoLayerData("lambert"))}function z5(e){!e.layers||e.layers.forEach(t=>{if(t.type==="depth"&&t.colors.length===10){let r=[...t.colors];r.push(t.colors[9]);let i=[...t.steps];i.push(t.steps[9]);let n={...Mi(t),colors:r,steps:i};Object.assign(t,n)}})}function Woe(e){e.scene.objects.traverse((t,r)=>{r.type==="Mesh"&&(r.geometry.type==="BooleanGeometry"||r.geometry.type==="SubdivGeometry")&&(r.geometry.phongAngle=35)})}function CE(e){e.scene.objects.traverse((t,r)=>{"materials"in r?r.materials.forEach(i=>{typeof i!="string"&&z5(i)}):"material"in r&&typeof r.material!="string"&&z5(r.material)}),Object.values(e.shared.materials).forEach(t=>z5(t))}function qoe(e){e.scene.environment.ambientLight.softShadows=!1,e.scene.environment.ambientLight.softShadowQuality="low",e.scene.objects.traverse((t,r)=>{(r.type==="DirectionalLight"||r.type==="SpotLight")&&(r.shadowResolution=1024,r.shadowRadius=1,r.depth=1e5)}),e.shared.penumbraSize=new Array(5).fill(.5)}function Xoe(e){e.shared.audios=yc({},It.prototype)}function Yoe(e){e.shared.videos=yc({},It.prototype)}function Qoe(e){let t=e.shared.materials;Object.entries(t).forEach(([r,i])=>{if(!i.layers){let n={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(t,{[r]:n})}})}function Zoe(e){Object.entries(Mi(e.shared.images)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.images[t]}),Object.entries(Mi(e.shared.audios)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.audios[t]})}function Koe(e){e.scene.publish.settings.web.preload=!1}function SE(e){e.layers&&e.layers.forEach(t=>{t.type==="depth"&&t.num!==void 0&&(t.colors=t.colors.slice(0,t.num),t.steps=t.steps.slice(0,t.num),delete t.num)})}function ME(e){e.layers&&e.layers.forEach(t=>{Ioe(t)&&t.isMask===void 0&&(t.isMask=!1),(t.type==="texture"||t.type==="video")&&t.blending===void 0&&(t.blending=0),(t.type==="noise"||t.type==="displace"&&t.displacementType==="noise")&&(t.voronoiStyle===void 0&&(t.voronoiStyle=0),t.highCut===void 0&&(t.highCut=1),t.lowCut===void 0&&(t.lowCut=0),t.smoothness===void 0&&(t.smoothness=.3),t.seed===void 0&&(t.seed=0),t.quality===void 0&&(t.quality=1))})}function $oe(e){e.shared.fonts=yc({},It.prototype)}function Joe(e){return e.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function ele(e){let t=[];e.scene.objects.traverse((r,i)=>{let n=i;if(n.type==="TextFrame"){let s=Ki.defaultTwoLayerData("phong"),a=typeof n.color=="string"?e.shared.colors[n.color]:n.color;s.layers[1].data.color={r:a.r,g:a.g,b:a.b},s.layers[1].data.alpha=n.alpha;let o=Joe(n.font);e.shared.fonts[o]===void 0&&(e.shared.fonts[o]={name:o});let l={name:n.name,..._n.defaultData,...mp.defaultData,flatShading:!1,wireframe:!1,geometry:{...fp.defaultData("TextGeometry"),width:n.width,height:n.height,font:o,depth:0,horizontalAlign:n.horizontalAlign,verticalAlign:n.verticalAlign,fontSize:n.fontSize*1.40625,lineHeight:n.lineHeight/1.40625,letterSpacing:n.letterSpacing-1,text:n.text,textTransform:n.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:s,states:Mi(n.states),events:Mi(n.events),visible:n.visible,raycastLock:n.raycastLock,position:n.position,rotation:n.rotation,scale:n.scale,hiddenMatrix:n.hiddenMatrix},h=Mi(e.scene.objects).parent(r);e.scene.objects.insertAfter(h??null,r,[{id:r+"new",data:l,children:[]}]),t.push(r)}}),t.forEach(r=>{e.scene.objects.delete(r)})}function tle(e){let t={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};e.scene.objects.traverse((r,i)=>{i.events.forEach(n=>{if(t[Number(n.type)])if(Object.assign(n,{type:t[Number(n.type)]}),n.type==="Audio"&&"audioEvent"in n&&(Object.assign(n,{playAudio:n.audioEvent}),delete n.audioEvent),n.type==="GameControl")Object.assign(n,{gameActions:{idle:new ft,move:new ft,jump:new ft}});else{let s=new ft;Object.assign(n,{actions:s}),(n.type==="MouseDown"||n.type==="MouseUp"||n.type==="KeyDown"||n.type==="KeyUp")&&"url"in n&&s.push({fi:0,id:Tt.generateUUID(),data:{type:"Link",url:n.url,delay:0}}),"targets"in n&&(n.targets.forEach((a,o,l)=>{let h={state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4},c={easing:a.easing,duration:a.duration};a.easing===6?Object.assign(c,bl(a,"mass","stiffness","damping","velocity")):a.easing===5&&Object.assign(c,{control1:{...a.control1},control2:{...a.control2}});let u={repeat:a.repeat?-1:0,delay:a.delay,delayDirection:a.delayDirection,direction:a.cycle&&a.rewind?"pingpong-rewind":a.cycle?"pingpong":"normal"},d={state:a.state,...u,...c},p={allowSlerp:!0,type:"Transition",object:a.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new ft({fi:0,id:Tt.generateUUID(),data:h},{fi:1,id:Tt.generateUUID(),data:d})};s.push({fi:l,id:o,data:p})}),delete n.targets)}})})}function rle(e){e.scene.objects.traverse((t,r)=>{function i(n,s){var l;let a=new ft,o=[];if(r.events.forEach((h,c,u)=>{if(h.type==="Audio"&&h.trigger===s){let d;o.push(c),h.interaction==="play"?d={...bl(h,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in h?h.after:void 0,toggle:"after"in h?h.toggle:void 0,type:"Audio"}:(h.interaction==="pause"||h.interaction==="stop")&&(d={...bl(h,"interaction","delay","object","playAudio"),type:"Audio"}),d&&a.push({fi:u,id:c,data:d})}}),o.forEach(h=>r.events.delete(h)),a.length){let h=(l=r.events.find(c=>c.type===n))==null?void 0:l.data;h?"actions"in h&&h.actions.insertBefore(null,a):r.events.insertBefore(null,[{id:Tt.generateUUID(),data:{type:n,actions:a}}])}}i("Start","start"),i("MouseDown","mouseDown"),i("MouseUp","mouseUp"),i("KeyDown","keyDown"),i("KeyUp","keyUp")})}function AE(e){var r;let t=(r=e.layers.find(i=>i.type==="light"))==null?void 0:r.data;if((t==null?void 0:t.category)==="basic"){let i=Dn.defaultData("light","phong"),n=t;Object.assign(n,i),n.visible=!1}}function EE(e){sh(e,AE),ah(e,AE)}function ile(e){e.scene.objects.traverse((t,r)=>{r.type==="Mesh"&&r.geometry.type==="SubdivGeometry"&&(r.geometry.scaleBaked||(r.geometry.scaleBaked=[1,1,1]))})}function nle(e){e.scene.objects.traverse((t,r)=>{(r.type==="Empty"||r.type==="Mesh")&&r.cloner&&!r.cloner.randomnessObject&&!r.cloner.toObject&&!r.cloner.randomness&&(r.cloner={...r.cloner,toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}})})}function sle(e){e.scene.objects.traverse((t,r)=>{r.type==="Mesh"&&r.geometry.type==="NonParametricGeometry"&&!("material"in r)&&!("materials"in r)&&(r.material=Ki.defaultTwoLayerData("phong"))})}function ale(e){e.scene.publish.orbitControls.autoZoom===void 0&&(e.scene.publish.orbitControls.autoZoom=!1),e.scene.objects.traverse((t,r)=>{(r.type==="OrthographicCamera"||r.type==="PerspectiveCamera")&&(r.orthographic.autoZoom===void 0&&(r.orthographic.autoZoom=!1),r.orthographic.autoZoomFrustumSize===void 0&&(r.orthographic.autoZoomFrustumSize=790))})}function ole(e){e.scene.objects.traverse((t,r)=>{r.pathSnapping===void 0&&(r.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),r.pathSnapping.offset===void 0&&(r.pathSnapping.offset=0)})}function lle(e){e.scene.publish.mouseEventTarget===void 0&&(e.scene.publish.mouseEventTarget="canvas"),e.scene.publish.settings.web.hint===void 0&&(e.scene.publish.settings.web.hint=!1)}function hle(e){let{video:t}=e.scene.publish.settings;t.format==="gif"&&t.fps>48&&(t.fps=15)}function ule(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(i=>{i.type==="GameControl"&&(i.resetYPosition=Math.abs(i.resetYPosition-r.position[1]))})})}function cle(e){let t=e.scene.environment.usePhysics;e.scene.objects.traverse((r,i)=>{t&&i.physics===null?i.collision=!1:i.collision="visibility"})}function dle(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(i=>{i.type==="GameControl"&&(i.navmesh=F3.defaultDataThirdPerson.navmesh)})})}function ple(e){e.scene.styles||(e.scene.styles=gp.defaultData())}function TE(e){e.layers.forEach(t=>{t.type==="light"&&t.category!=="toon"&&t.occlusion===void 0&&(t.occlusion=!0)})}function fle(e){e.scene.environment.ambientLight.occlusion===void 0&&(e.scene.environment.ambientLight.occlusion=!1),e.scene.environment.ambientLight.aoFullRes===void 0&&(e.scene.environment.ambientLight.aoFullRes=!1),e.scene.environment.ambientLight.radius===void 0&&(e.scene.environment.ambientLight.radius=256),e.scene.environment.ambientLight.bias===void 0&&(e.scene.environment.ambientLight.bias=.5),e.scene.environment.ambientLight.aoColor===void 0&&(e.scene.environment.ambientLight.aoColor={r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}),ah(e,TE),sh(e,TE)}function mle(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(i=>{i.type==="GameControl"&&Object.assign(i.gameActions,{run:new ft})})})}function gle(e){e.scene.objects.traverse((t,r)=>{r.events.forEach(i=>{i.type==="GameControl"&&(i.keyAssignments=[...i.keyAssignments,["run","⇧"],["none","Ctrl"]])})})}function LE(e){e.layers&&e.layers.forEach(t=>{t.type==="light"&&t.bumpMapIntensity===void 0&&(t.bumpMapIntensity=5)})}function vle(e,t){if(t<1&&(ah(e,bE),sh(e,bE),e.schema=1),t<2&&(Boe(e),e.schema=2),t<3&&(koe(e),e.schema=3),t<4&&(Noe(e),e.schema=4),t<5&&(Foe(e),e.schema=5),t<6&&(Uoe(e),e.schema=6),t<7&&(joe(e),e.schema=7),t<8&&(e.schema=8),t<9&&(CE(e),e.schema=9),t<10&&(Woe(e),e.schema=10),t<11&&(qoe(e),e.schema=11),t<12&&(CE(e),e.schema=12),t<13&&(Xoe(e),e.schema=13),t<14&&(Qoe(e),e.schema=14),t<15&&(Zoe(e),e.schema=15),t<16&&(Koe(e),e.schema=16),t<17&&(ah(e,SE),sh(e,SE),e.schema=17),t<18&&(ah(e,_E),sh(e,_E),e.schema=18),t<19&&(zoe(e),e.schema=19),t<20&&($oe(e),ele(e),e.schema=20),t<21&&(tle(e),rle(e),e.schema=21),t<22&&(EE(e),e.schema=22),t<23&&(ile(e),e.schema=23),t<24&&(nle(e),e.schema=24),(t<25||e.shared.videos===void 0)&&(Yoe(e),t<25&&(e.schema=25)),t<26&&(Voe(e),e.schema=26),t<27&&(Goe(e),e.schema=27),t<28&&(EE(e),e.schema=28),t<29&&(Hoe(e),e.schema=29),t<30&&(sle(e),e.schema=30),t<31&&(ale(e),e.schema=31),t<33&&(ole(e),e.schema=33),t<34&&(lle(e),e.schema=34),t<35&&(hle(e),e.schema=35),t<36&&(ule(e),e.schema=36),t<37&&(cle(e),e.schema=37),t<38&&(ah(e,ME),sh(e,ME),e.schema=38),t<39&&(dle(e),e.schema=39),t<40&&(ple(e),e.schema=40),t<41&&(fle(e),e.schema=41),t<42&&(mle(e),e.schema=42),t<43&&(gle(e),e.schema=43),t<99){ah(e,LE),sh(e,LE),e.scene.publish.playCamera===null&&(e.scene.publish.playCamera=Cf);let r=Mi(e.scene.objects),i=e.scene.objects;e.scene.publish.playPage=f0,i.insertBefore(null,null,[{id:f0,data:{...ef.defaultData,backgroundColor:e.scene.backgroundColor,fog:e.scene.fog,postprocessing:e.scene.postprocessing,ao:bl(e.scene.environment.ambientLight,"occlusion","aoFullRes","radius","bias","aoColor"),publish:{playCamera:e.scene.publish.playCamera,gameControlObject:e.scene.publish.gameControlObject},shadow:bl(e.scene.environment.ambientLight,"softShadowQuality"),globalPhysics:{...$p.defaultData,...bl(e.scene.environment,"usePhysics","gravity")},camera:Mi(e.scene.ownerCamera)??ef.defaultData.camera,name:"Scene"},children:[]}]);for(let a of r)a.id!==vp.TRASH_CAN_ID&&i.move(f0,a.fi,a.id);let n=0,s=0;e.shared.penumbraSize&&e.scene.objects.traverse((a,o)=>{o.type==="DirectionalLight"?(o.penumbraSize=e.shared.penumbraSize[Math.min(n,2)],n+=1):o.type==="SpotLight"&&(o.penumbraSize=e.shared.penumbraSize[3+Math.min(s,1)],s+=1),(o.physics===void 0||o.physics===null)&&o.type!=="Instance"&&(o.physics={},Object.assign(o.physics,Kp.defaultData)),o.physics!==void 0&&o.physics!==null&&(o.physics.enabled=o.collision??"visibility",delete o.collision)}),e.schema=99}}function PE(e){e.layers&&e.layers.forEach(t=>{t.type==="light"&&t.alphaOverride===void 0&&(t.alphaOverride=1)})}function yle(e){e.scene.objects.traverse((t,r)=>{let i=r.geometry;i&&i.type==="PathGeometry"&&(i.extrusion.capType="flat",i.extrusion.bevel=50,i.extrusion.bevelSides=6,i.extrusion.shape.type==="Custom"&&(i.extrusion.shape.shapeQuality="low"))})}var Su=104;function fz(e){let t=e.schema??0;t!==Su&&(console.warn("updating from ",t,"to ",Su),vle(e,t),t<100&&(e.scene.publish.joystickSizeAndXYOffset===void 0&&(e.scene.publish.joystickSizeAndXYOffset=tc.defaultData.joystickSizeAndXYOffset),e.schema=100),t<101&&(ah(e,PE),sh(e,PE),e.schema=101),t<102&&(yle(e),e.schema=102),t<104&&(e.shared.catelogs=new It,e.shared.lib=cm.defaultData(),e.schema=104))}var U3;(e=>{e.defaultData={schema:Su,scene:vp.defaultData,frames:new It().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",m0.defaultData),shared:{...il.emptyData(),colors:il.defaultColors()}},e.emptyDataForImports=function(n){let s=vp.emptyDataWithPage(n);return{schema:Su,scene:s,frames:new It().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",m0.defaultData),shared:{...il.emptyData(),colors:il.defaultColors(),images:il.defaultImages(n)}}},e.emptyData=function(){return{schema:Su,scene:vp.emptyDataWithPage(),frames:new It().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",m0.defaultData),shared:il.emptyData()}},e.collabHelper={...B7,updateSchema(n){return(n.schema??0)<Su?lm(n,fz):(n.schema??0)-Su}};function t(n){let s=e.collabHelper.updateSchema(n);return typeof s=="number"?s===0?n:null:s.data}e.updateSchemaDirectly=t;function r(n){return{...n,shared:{...n.shared,lib:cm.defaultData()}}}e.withoutLib=r;function i(n,s){let a=n.scene.objects.get(s);if(a&&a.data.type==="Component")return a;{let o=n.shared.lib.components[s];if(o)return o.asset}}e.getComponentData=i})(U3||(U3={}));function zu(e,t=!1){let r=e[0].index!==null,i=new Set(Object.keys(e[0].attributes)),n=new Set(Object.keys(e[0].morphAttributes)),s={},a={},o=e[0].morphTargetsRelative,l=new dt,h=0;for(let c=0;c<e.length;++c){let u=e[c],d=0;if(r!==(u.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let p in u.attributes){if(!i.has(p))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+p+'" attribute exists among all geometries, or in none of them.'),null;s[p]===void 0&&(s[p]=[]),s[p].push(u.attributes[p]),d++}if(d!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(o!==u.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let p in u.morphAttributes){if(!n.has(p))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;a[p]===void 0&&(a[p]=[]),a[p].push(u.morphAttributes[p])}if(t){let p;if(r)p=u.index.count;else if(u.attributes.position!==void 0)p=u.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;l.addGroup(h,p,c),h+=p}}if(r){let c=0,u=[];for(let d=0;d<e.length;++d){let p=e[d].index;for(let f=0;f<p.count;++f)u.push(p.getX(f)+c);c+=e[d].attributes.position.count}l.setIndex(u)}for(let c in s){let u=DE(s[c]);if(!u)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+c+" attribute."),null;l.setAttribute(c,u)}for(let c in a){let u=a[c][0].length;if(u===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[c]=[];for(let d=0;d<u;++d){let p=[];for(let m=0;m<a[c].length;++m)p.push(a[c][m][d]);let f=DE(p);if(!f)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+c+" morphAttribute."),null;l.morphAttributes[c].push(f)}}return l}function DE(e){let t,r,i,n=0;for(let o=0;o<e.length;++o){let l=e[o];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(t===void 0&&(t=l.array.constructor),t!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(r===void 0&&(r=l.itemSize),r!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(i===void 0&&(i=l.normalized),i!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;n+=l.array.length}let s=new t(n),a=0;for(let o=0;o<e.length;++o)s.set(e[o].array,a),a+=e[o].array.length;return new pt(s,r,i)}var xle=Math.pow(2,-24),ev=class{constructor(){}};function co(e,t,r){return r.min.x=t[e],r.min.y=t[e+1],r.min.z=t[e+2],r.max.x=t[e+3],r.max.y=t[e+4],r.max.z=t[e+5],r}function OE(e){let t=-1,r=-1/0;for(let i=0;i<3;i++){let n=e[i+3]-e[i];n>r&&(r=n,t=i)}return t}function IE(e,t){t.set(e)}function RE(e,t,r){let i,n;for(let s=0;s<3;s++){let a=s+3;i=e[s],n=t[s],r[s]=i<n?i:n,i=e[a],n=t[a],r[a]=i>n?i:n}}function tv(e,t,r){for(let i=0;i<3;i++){let n=t[e+2*i],s=t[e+2*i+1],a=n-s,o=n+s;a<r[i]&&(r[i]=a),o>r[i+3]&&(r[i+3]=o)}}function e1(e){let t=e[3]-e[0],r=e[4]-e[1],i=e[5]-e[2];return 2*(t*r+r*i+i*t)}function wle(e,t){if(!e.index){let r=e.attributes.position.count,i=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,n;r>65535?n=new Uint32Array(new i(4*r)):n=new Uint16Array(new i(2*r)),e.setIndex(new pt(n,1));for(let s=0;s<r;s++)n[s]=s}}function ble(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let t=[],r=new Set;for(let n of e.groups)r.add(n.start),r.add(n.start+n.count);let i=Array.from(r.values()).sort((n,s)=>n-s);for(let n=0;n<i.length-1;n++){let s=i[n],a=i[n+1];t.push({offset:s/3,count:(a-s)/3})}return t}function k5(e,t,r,i,n=null){let s=1/0,a=1/0,o=1/0,l=-1/0,h=-1/0,c=-1/0,u=1/0,d=1/0,p=1/0,f=-1/0,m=-1/0,g=-1/0,v=n!==null;for(let y=t*6,x=(t+r)*6;y<x;y+=6){let w=e[y+0],_=e[y+1],b=w-_,S=w+_;b<s&&(s=b),S>l&&(l=S),v&&w<u&&(u=w),v&&w>f&&(f=w);let C=e[y+2],M=e[y+3],A=C-M,T=C+M;A<a&&(a=A),T>h&&(h=T),v&&C<d&&(d=C),v&&C>m&&(m=C);let L=e[y+4],D=e[y+5],O=L-D,z=L+D;O<o&&(o=O),z>c&&(c=z),v&&L<p&&(p=L),v&&L>g&&(g=L)}i[0]=s,i[1]=a,i[2]=o,i[3]=l,i[4]=h,i[5]=c,v&&(n[0]=u,n[1]=d,n[2]=p,n[3]=f,n[4]=m,n[5]=g)}function _le(e,t,r,i){let n=1/0,s=1/0,a=1/0,o=-1/0,l=-1/0,h=-1/0;for(let c=t*6,u=(t+r)*6;c<u;c+=6){let d=e[c+0];d<n&&(n=d),d>o&&(o=d);let p=e[c+2];p<s&&(s=p),p>l&&(l=p);let f=e[c+4];f<a&&(a=f),f>h&&(h=f)}i[0]=n,i[1]=s,i[2]=a,i[3]=o,i[4]=l,i[5]=h}function Cle(e,t,r,i,n){let s=r,a=r+i-1,o=n.pos,l=n.axis*2;for(;;){for(;s<=a&&t[s*6+l]<o;)s++;for(;s<=a&&t[a*6+l]>=o;)a--;if(s<a){for(let h=0;h<3;h++){let c=e[s*3+h];e[s*3+h]=e[a*3+h],e[a*3+h]=c;let u=t[s*6+h*2+0];t[s*6+h*2+0]=t[a*6+h*2+0],t[a*6+h*2+0]=u;let d=t[s*6+h*2+1];t[s*6+h*2+1]=t[a*6+h*2+1],t[a*6+h*2+1]=d}s++,a--}else return s}}var Xo=32,Sle=(e,t)=>e.candidate-t.candidate,Hl=new Array(Xo).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),rv=new Float32Array(6);function Mle(e,t,r,i,n,s){let a=-1,o=0;if(s===0)a=OE(t),a!==-1&&(o=(t[a]+t[a+3])/2);else if(s===1)a=OE(e),a!==-1&&(o=Ale(r,i,n,a));else if(s===2){let l=e1(e),h=1.25*n,c=i*6,u=(i+n)*6;for(let d=0;d<3;d++){let p=t[d],f=(t[d+3]-p)/Xo;if(n<Xo/4){let m=[...Hl];m.length=n;let g=0;for(let y=c;y<u;y+=6,g++){let x=m[g];x.candidate=r[y+2*d],x.count=0;let{bounds:w,leftCacheBounds:_,rightCacheBounds:b}=x;for(let S=0;S<3;S++)b[S]=1/0,b[S+3]=-1/0,_[S]=1/0,_[S+3]=-1/0,w[S]=1/0,w[S+3]=-1/0;tv(y,r,w)}m.sort(Sle);let v=n;for(let y=0;y<v;y++){let x=m[y];for(;y+1<v&&m[y+1].candidate===x.candidate;)m.splice(y+1,1),v--}for(let y=c;y<u;y+=6){let x=r[y+2*d];for(let w=0;w<v;w++){let _=m[w];x>=_.candidate?tv(y,r,_.rightCacheBounds):(tv(y,r,_.leftCacheBounds),_.count++)}}for(let y=0;y<v;y++){let x=m[y],w=x.count,_=n-x.count,b=x.leftCacheBounds,S=x.rightCacheBounds,C=0;w!==0&&(C=e1(b)/l);let M=0;_!==0&&(M=e1(S)/l);let A=1+1.25*(C*w+M*_);A<h&&(a=d,h=A,o=x.candidate)}}else{for(let v=0;v<Xo;v++){let y=Hl[v];y.count=0,y.candidate=p+f+v*f;let x=y.bounds;for(let w=0;w<3;w++)x[w]=1/0,x[w+3]=-1/0}for(let v=c;v<u;v+=6){let y=~~((r[v+2*d]-p)/f);y>=Xo&&(y=Xo-1);let x=Hl[y];x.count++,tv(v,r,x.bounds)}let m=Hl[Xo-1];IE(m.bounds,m.rightCacheBounds);for(let v=Xo-2;v>=0;v--){let y=Hl[v],x=Hl[v+1];RE(y.bounds,x.rightCacheBounds,y.rightCacheBounds)}let g=0;for(let v=0;v<Xo-1;v++){let y=Hl[v],x=y.count,w=y.bounds,_=Hl[v+1].rightCacheBounds;x!==0&&(g===0?IE(w,rv):RE(w,rv,rv)),g+=x;let b=0,S=0;g!==0&&(b=e1(rv)/l);let C=n-g;C!==0&&(S=e1(_)/l);let M=1+1.25*(b*g+S*C);M<h&&(a=d,h=M,o=y.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:a,pos:o}}function Ale(e,t,r,i){let n=0;for(let s=t,a=t+r;s<a;s++)n+=e[s*6+i*2];return n/r}function Ele(e,t){let r=e.attributes.position,i=e.index.array,n=i.length/3,s=new Float32Array(n*6),a=r.normalized,o=r.array,l=r.offset||0,h=3;r.isInterleavedBufferAttribute&&(h=r.data.stride);let c=["getX","getY","getZ"];for(let u=0;u<n;u++){let d=u*3,p=u*6,f,m,g;a?(f=i[d+0],m=i[d+1],g=i[d+2]):(f=i[d+0]*h+l,m=i[d+1]*h+l,g=i[d+2]*h+l);for(let v=0;v<3;v++){let y,x,w;a?(y=r[c[v]](f),x=r[c[v]](m),w=r[c[v]](g)):(y=o[f+v],x=o[m+v],w=o[g+v]);let _=y;x<_&&(_=x),w<_&&(_=w);let b=y;x>b&&(b=x),w>b&&(b=w);let S=(b-_)/2,C=v*2;s[p+C+0]=_+S,s[p+C+1]=S+(Math.abs(_)+S)*xle,_<t[v]&&(t[v]=_),b>t[v+3]&&(t[v+3]=b)}}return s}function Tle(e,t){function r(v){d&&d(v/p)}function i(v,y,x,w=null,_=0){if(!f&&_>=l&&(f=!0,h&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(e))),x<=c||_>=l)return r(y+x),v.offset=y,v.count=x,v;let b=Mle(v.boundingData,w,a,y,x,u);if(b.axis===-1)return r(y+x),v.offset=y,v.count=x,v;let S=Cle(o,a,y,x,b);if(S===y||S===y+x)r(y+x),v.offset=y,v.count=x;else{v.splitAxis=b.axis;let C=new ev,M=y,A=S-y;v.left=C,C.boundingData=new Float32Array(6),k5(a,M,A,C.boundingData,s),i(C,M,A,s,_+1);let T=new ev,L=S,D=x-A;v.right=T,T.boundingData=new Float32Array(6),k5(a,L,D,T.boundingData,s),i(T,L,D,s,_+1)}return v}wle(e,t);let n=new Float32Array(6),s=new Float32Array(6),a=Ele(e,n),o=e.index.array,l=t.maxDepth,h=t.verbose,c=t.maxLeafTris,u=t.strategy,d=t.onProgress,p=e.index.count/3,f=!1,m=[],g=ble(e);if(g.length===1){let v=g[0],y=new ev;y.boundingData=n,_le(a,v.offset,v.count,s),i(y,v.offset,v.count,s),m.push(y)}else for(let v of g){let y=new ev;y.boundingData=new Float32Array(6),k5(a,v.offset,v.count,y.boundingData,s),i(y,v.offset,v.count,s),m.push(y)}return m}function Lle(e,t){let r=Tle(e,t),i,n,s,a=[],o=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let c=0;c<r.length;c++){let u=r[c],d=l(u),p=new o(32*d);i=new Float32Array(p),n=new Uint32Array(p),s=new Uint16Array(p),h(0,u),a.push(p)}return a;function l(c){return c.count?1:1+l(c.left)+l(c.right)}function h(c,u){let d=c/4,p=c/2,f=!!u.count,m=u.boundingData;for(let g=0;g<6;g++)i[d+g]=m[g];if(f){let g=u.offset,v=u.count;return n[d+6]=g,s[p+14]=v,s[p+15]=65535,c+32}else{let g=u.left,v=u.right,y=u.splitAxis,x;if(x=h(c+32,g),x/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return n[d+6]=x/4,x=h(x,v),n[d+7]=y,x}}}var Dl=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(t,r){let i=1/0,n=-1/0;for(let s=0,a=t.length;s<a;s++){let o=t[s][r];i=o<i?o:i,n=o>n?o:n}this.min=i,this.max=n}setFromPoints(t,r){let i=1/0,n=-1/0;for(let s=0,a=r.length;s<a;s++){let o=r[s],l=t.dot(o);i=l<i?l:i,n=l>n?l:n}this.min=i,this.max=n}isSeparated(t){return this.min>t.max||t.min>this.max}};Dl.prototype.setFromBox=function(){let e=new E;return function(t,r){let i=r.min,n=r.max,s=1/0,a=-1/0;for(let o=0;o<=1;o++)for(let l=0;l<=1;l++)for(let h=0;h<=1;h++){e.x=i.x*o+n.x*(1-o),e.y=i.y*l+n.y*(1-l),e.z=i.z*h+n.z*(1-h);let c=t.dot(e);s=Math.min(c,s),a=Math.max(c,a)}this.min=s,this.max=a}}();var Ple=function(){let e=new E,t=new E,r=new E;return function(i,n,s){let a=i.start,o=e,l=n.start,h=t;r.subVectors(a,l),e.subVectors(i.end,i.start),t.subVectors(n.end,n.start);let c=r.dot(h),u=h.dot(o),d=h.dot(h),p=r.dot(o),f=o.dot(o)*d-u*u,m,g;f!==0?m=(c*u-p*d)/f:m=0,g=(c+m*u)/d,s.x=m,s.y=g}}(),Cb=function(){let e=new X,t=new E,r=new E;return function(i,n,s,a){Ple(i,n,e);let o=e.x,l=e.y;if(o>=0&&o<=1&&l>=0&&l<=1){i.at(o,s),n.at(l,a);return}else if(o>=0&&o<=1){l<0?n.at(0,a):n.at(1,a),i.closestPointToPoint(a,!0,s);return}else if(l>=0&&l<=1){o<0?i.at(0,s):i.at(1,s),n.closestPointToPoint(s,!0,a);return}else{let h;o<0?h=i.start:h=i.end;let c;l<0?c=n.start:c=n.end;let u=t,d=r;if(i.closestPointToPoint(c,!0,t),n.closestPointToPoint(h,!0,r),u.distanceToSquared(c)<=d.distanceToSquared(h)){s.copy(u),a.copy(c);return}else{s.copy(h),a.copy(d);return}}}}(),Dle=function(){let e=new E,t=new E,r=new hs,i=new ra;return function(n,s){let{radius:a,center:o}=n,{a:l,b:h,c}=s;if(i.start=l,i.end=h,i.closestPointToPoint(o,!0,e).distanceTo(o)<=a||(i.start=l,i.end=c,i.closestPointToPoint(o,!0,e).distanceTo(o)<=a)||(i.start=h,i.end=c,i.closestPointToPoint(o,!0,e).distanceTo(o)<=a))return!0;let u=s.getPlane(r);if(Math.abs(u.distanceToPoint(o))<=a){let d=u.projectPoint(o,t);if(s.containsPoint(d))return!0}return!1}}(),Ole=1e-15;function Zc(e){return Math.abs(e)<Ole}var Ol=class extends Xi{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new E),this.satBounds=new Array(4).fill().map(()=>new Dl),this.points=[this.a,this.b,this.c],this.sphere=new _s,this.plane=new hs,this.needsUpdate=!0}intersectsSphere(e){return Dle(e,this)}update(){let e=this.a,t=this.b,r=this.c,i=this.points,n=this.satAxes,s=this.satBounds,a=n[0],o=s[0];this.getNormal(a),o.setFromPoints(a,i);let l=n[1],h=s[1];l.subVectors(e,t),h.setFromPoints(l,i);let c=n[2],u=s[2];c.subVectors(t,r),u.setFromPoints(c,i);let d=n[3],p=s[3];d.subVectors(r,e),p.setFromPoints(d,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}};Ol.prototype.closestPointToSegment=function(){let e=new E,t=new E,r=new ra;return function(i,n=null,s=null){let{start:a,end:o}=i,l=this.points,h,c=1/0;for(let u=0;u<3;u++){let d=(u+1)%3;r.start.copy(l[u]),r.end.copy(l[d]),Cb(r,i,e,t),h=e.distanceToSquared(t),h<c&&(c=h,n&&n.copy(e),s&&s.copy(t))}return this.closestPointToPoint(a,e),h=a.distanceToSquared(e),h<c&&(c=h,n&&n.copy(e),s&&s.copy(a)),this.closestPointToPoint(o,e),h=o.distanceToSquared(e),h<c&&(c=h,n&&n.copy(e),s&&s.copy(o)),Math.sqrt(c)}}();Ol.prototype.intersectsTriangle=function(){let e=new Ol,t=new Array(3),r=new Array(3),i=new Dl,n=new Dl,s=new E,a=new E,o=new E,l=new E,h=new ra,c=new ra,u=new ra;return function(d,p=null,f=!1){this.needsUpdate&&this.update(),d.isExtendedTriangle?d.needsUpdate&&d.update():(e.copy(d),e.update(),d=e);let m=this.plane,g=d.plane;if(Math.abs(m.normal.dot(g.normal))>1-1e-10){let v=this.satBounds,y=this.satAxes;r[0]=d.a,r[1]=d.b,r[2]=d.c;for(let _=0;_<4;_++){let b=v[_],S=y[_];if(i.setFromPoints(S,r),b.isSeparated(i))return!1}let x=d.satBounds,w=d.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let _=0;_<4;_++){let b=x[_],S=w[_];if(i.setFromPoints(S,t),b.isSeparated(i))return!1}for(let _=0;_<4;_++){let b=y[_];for(let S=0;S<4;S++){let C=w[S];if(s.crossVectors(b,C),i.setFromPoints(s,t),n.setFromPoints(s,r),i.isSeparated(n))return!1}}return p&&(f||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),p.start.set(0,0,0),p.end.set(0,0,0)),!0}else{let v=this.points,y=!1,x=0;for(let D=0;D<3;D++){let O=v[D],z=v[(D+1)%3];h.start.copy(O),h.end.copy(z),h.delta(a);let q=y?c.start:c.end,N=Zc(g.distanceToPoint(O));if(Zc(g.normal.dot(a))&&N){c.copy(h),x=2;break}if((g.intersectLine(h,q)||N)&&!Zc(q.distanceTo(z))){if(x++,y)break;y=!0}}if(x===1&&d.containsPoint(c.end))return p&&(p.start.copy(c.end),p.end.copy(c.end)),!0;if(x!==2)return!1;let w=d.points,_=!1,b=0;for(let D=0;D<3;D++){let O=w[D],z=w[(D+1)%3];h.start.copy(O),h.end.copy(z),h.delta(o);let q=_?u.start:u.end,N=Zc(m.distanceToPoint(O));if(Zc(m.normal.dot(o))&&N){u.copy(h),b=2;break}if((m.intersectLine(h,q)||N)&&!Zc(q.distanceTo(z))){if(b++,_)break;_=!0}}if(b===1&&this.containsPoint(u.end))return p&&(p.start.copy(u.end),p.end.copy(u.end)),!0;if(b!==2)return!1;if(c.delta(a),u.delta(o),a.dot(o)<0){let D=u.start;u.start=u.end,u.end=D}let S=c.start.dot(a),C=c.end.dot(a),M=u.start.dot(a),A=u.end.dot(a),T=C<M,L=S<A;return S!==A&&M!==C&&T===L?!1:(p&&(l.subVectors(c.start,u.start),l.dot(a)>0?p.start.copy(c.start):p.start.copy(u.start),l.subVectors(c.end,u.end),l.dot(a)<0?p.end.copy(c.end):p.end.copy(u.end)),!0)}}}();Ol.prototype.distanceToPoint=function(){let e=new E;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();Ol.prototype.distanceToTriangle=function(){let e=new E,t=new E,r=["a","b","c"],i=new ra,n=new ra;return function(s,a=null,o=null){let l=a||o?i:null;if(this.intersectsTriangle(s,l))return(a||o)&&(a&&l.getCenter(a),o&&l.getCenter(o)),0;let h=1/0;for(let c=0;c<3;c++){let u,d=r[c],p=s[d];this.closestPointToPoint(p,e),u=p.distanceToSquared(e),u<h&&(h=u,a&&a.copy(e),o&&o.copy(p));let f=this[d];s.closestPointToPoint(f,e),u=f.distanceToSquared(e),u<h&&(h=u,a&&a.copy(f),o&&o.copy(e))}for(let c=0;c<3;c++){let u=r[c],d=r[(c+1)%3];i.set(this[u],this[d]);for(let p=0;p<3;p++){let f=r[p],m=r[(p+1)%3];n.set(s[f],s[m]),Cb(i,n,e,t);let g=e.distanceToSquared(t);g<h&&(h=g,a&&a.copy(e),o&&o.copy(t))}}return Math.sqrt(h)}}();var To=class{constructor(e,t,r){this.isOrientedBox=!0,this.min=new E,this.max=new E,this.matrix=new Ae,this.invMatrix=new Ae,this.points=new Array(8).fill().map(()=>new E),this.satAxes=new Array(3).fill().map(()=>new E),this.satBounds=new Array(3).fill().map(()=>new Dl),this.alignedSatBounds=new Array(3).fill().map(()=>new Dl),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),r&&this.matrix.copy(r)}set(e,t,r){this.min.copy(e),this.max.copy(t),this.matrix.copy(r),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}};To.prototype.update=function(){return function(){let e=this.matrix,t=this.min,r=this.max,i=this.points;for(let l=0;l<=1;l++)for(let h=0;h<=1;h++)for(let c=0;c<=1;c++){let u=1*l|2*h|4*c,d=i[u];d.x=l?r.x:t.x,d.y=h?r.y:t.y,d.z=c?r.z:t.z,d.applyMatrix4(e)}let n=this.satBounds,s=this.satAxes,a=i[0];for(let l=0;l<3;l++){let h=s[l],c=n[l],u=1<<l,d=i[u];h.subVectors(a,d),c.setFromPoints(h,i)}let o=this.alignedSatBounds;o[0].setFromPointsField(i,"x"),o[1].setFromPointsField(i,"y"),o[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();To.prototype.intersectsBox=function(){let e=new Dl;return function(t){this.needsUpdate&&this.update();let r=t.min,i=t.max,n=this.satBounds,s=this.satAxes,a=this.alignedSatBounds;if(e.min=r.x,e.max=i.x,a[0].isSeparated(e)||(e.min=r.y,e.max=i.y,a[1].isSeparated(e))||(e.min=r.z,e.max=i.z,a[2].isSeparated(e)))return!1;for(let o=0;o<3;o++){let l=s[o],h=n[o];if(e.setFromBox(l,t),h.isSeparated(e))return!1}return!0}}();To.prototype.intersectsTriangle=function(){let e=new Ol,t=new Array(3),r=new Dl,i=new Dl,n=new E;return function(s){this.needsUpdate&&this.update(),s.isExtendedTriangle?s.needsUpdate&&s.update():(e.copy(s),e.update(),s=e);let a=this.satBounds,o=this.satAxes;t[0]=s.a,t[1]=s.b,t[2]=s.c;for(let u=0;u<3;u++){let d=a[u],p=o[u];if(r.setFromPoints(p,t),d.isSeparated(r))return!1}let l=s.satBounds,h=s.satAxes,c=this.points;for(let u=0;u<3;u++){let d=l[u],p=h[u];if(r.setFromPoints(p,c),d.isSeparated(r))return!1}for(let u=0;u<3;u++){let d=o[u];for(let p=0;p<4;p++){let f=h[p];if(n.crossVectors(d,f),r.setFromPoints(n,t),i.setFromPoints(n,c),r.isSeparated(i))return!1}}return!0}}();To.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();To.prototype.distanceToPoint=function(){let e=new E;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();To.prototype.distanceToBox=function(){let e=["x","y","z"],t=new Array(12).fill().map(()=>new ra),r=new Array(12).fill().map(()=>new ra),i=new E,n=new E;return function(s,a=0,o=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(s))return(o||l)&&(s.getCenter(n),this.closestPointToPoint(n,i),s.closestPointToPoint(i,n),o&&o.copy(i),l&&l.copy(n)),0;let h=a*a,c=s.min,u=s.max,d=this.points,p=1/0;for(let m=0;m<8;m++){let g=d[m];n.copy(g).clamp(c,u);let v=g.distanceToSquared(n);if(v<p&&(p=v,o&&o.copy(g),l&&l.copy(n),v<h))return Math.sqrt(v)}let f=0;for(let m=0;m<3;m++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){let y=(m+1)%3,x=(m+2)%3,w=g<<y|v<<x,_=1<<m|g<<y|v<<x,b=d[w],S=d[_];t[f].set(b,S);let C=e[m],M=e[y],A=e[x],T=r[f],L=T.start,D=T.end;L[C]=c[C],L[M]=g?c[M]:u[M],L[A]=v?c[A]:u[M],D[C]=u[C],D[M]=g?c[M]:u[M],D[A]=v?c[A]:u[M],f++}for(let m=0;m<=1;m++)for(let g=0;g<=1;g++)for(let v=0;v<=1;v++){n.x=m?u.x:c.x,n.y=g?u.y:c.y,n.z=v?u.z:c.z,this.closestPointToPoint(n,i);let y=n.distanceToSquared(i);if(y<p&&(p=y,o&&o.copy(i),l&&l.copy(n),y<h))return Math.sqrt(y)}for(let m=0;m<12;m++){let g=t[m];for(let v=0;v<12;v++){let y=r[v];Cb(g,y,i,n);let x=i.distanceToSquared(n);if(x<p&&(p=x,o&&o.copy(i),l&&l.copy(n),x<h))return Math.sqrt(x)}}return Math.sqrt(p)}}();var Kc=new E,$c=new E,Jc=new E,iv=new X,nv=new X,sv=new X,BE=new E,zE=new E,kE=new E,av=new E;function Ile(e,t,r,i,n,s){let a;return s===_i?a=e.intersectTriangle(i,r,t,!0,n):a=e.intersectTriangle(t,r,i,s!==ps,n),a===null?null:{distance:e.origin.distanceTo(n),point:n.clone()}}function Rle(e,t,r,i,n,s,a,o,l){Kc.fromBufferAttribute(t,s),$c.fromBufferAttribute(t,a),Jc.fromBufferAttribute(t,o);let h=Ile(e,Kc,$c,Jc,av,l);if(h){i&&(iv.fromBufferAttribute(i,s),nv.fromBufferAttribute(i,a),sv.fromBufferAttribute(i,o),h.uv=Xi.getInterpolation(av,Kc,$c,Jc,iv,nv,sv,new X)),n&&(iv.fromBufferAttribute(n,s),nv.fromBufferAttribute(n,a),sv.fromBufferAttribute(n,o),h.uv1=Xi.getInterpolation(av,Kc,$c,Jc,iv,nv,sv,new X)),r&&(BE.fromBufferAttribute(r,s),zE.fromBufferAttribute(r,a),kE.fromBufferAttribute(r,o),h.normal=Xi.getInterpolation(av,Kc,$c,Jc,BE,zE,kE,new E),h.normal.dot(e.direction)>0&&h.normal.multiplyScalar(-1));let c={a:s,b:a,c:o,normal:new E,materialIndex:0};Xi.getNormal(Kc,$c,Jc,c.normal),h.face=c,h.faceIndex=s}return h}function mz(e,t,r,i,n){let s=i*3,a=e.index.getX(s),o=e.index.getX(s+1),l=e.index.getX(s+2),{position:h,normal:c,uv:u,uv1:d}=e.attributes,p=Rle(r,h,c,u,d,a,o,l,t);return p?(p.faceIndex=i,n&&n.push(p),p):null}function Ble(e,t,r,i,n,s){for(let a=i,o=i+n;a<o;a++)mz(e,t,r,a,s)}function zle(e,t,r,i,n){let s=1/0,a=null;for(let o=i,l=i+n;o<l;o++){let h=mz(e,t,r,o);h&&h.distance<s&&(a=h,s=h.distance)}return a}function so(e,t,r,i){let n=e.a,s=e.b,a=e.c,o=t,l=t+1,h=t+2;r&&(o=r.getX(t),l=r.getX(t+1),h=r.getX(t+2)),n.x=i.getX(o),n.y=i.getY(o),n.z=i.getZ(o),s.x=i.getX(l),s.y=i.getY(l),s.z=i.getZ(l),a.x=i.getX(h),a.y=i.getY(h),a.z=i.getZ(h)}function NE(e,t,r,i,n,s,a){let o=r.index,l=r.attributes.position;for(let h=e,c=t+e;h<c;h++)if(so(a,h*3,o,l),a.needsUpdate=!0,i(a,h,n,s))return!0;return!1}var gz=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function oh(e,t){return t[e+15]===65535}function yp(e,t){return t[e+6]}function dm(e,t){return t[e+14]}function pm(e){return e+8}function fm(e,t){return t[e+6]}function kle(e,t){return t[e+7]}var Xd=new qr,j3=new E,Nle=["x","y","z"];function p8(e,t,r,i,n){let s=e*2,a=Sf,o=Nh,l=Fh;if(oh(s,o)){let h=yp(e,l),c=dm(s,o);Ble(t,r,i,h,c,n)}else{let h=pm(e);V3(h,a,i,j3)&&p8(h,t,r,i,n);let c=fm(e,l);V3(c,a,i,j3)&&p8(c,t,r,i,n)}}function f8(e,t,r,i){let n=e*2,s=Sf,a=Nh,o=Fh;if(oh(n,a)){let l=yp(e,o),h=dm(n,a);return zle(t,r,i,l,h)}else{let l=kle(e,o),h=Nle[l],c=i.direction[h]>=0,u,d;c?(u=pm(e),d=fm(e,o)):(u=fm(e,o),d=pm(e));let p=V3(u,s,i,j3)?f8(u,t,r,i):null;if(p){let m=p.point[h];if(c?m<=s[d+l]:m>=s[d+l+3])return p}let f=V3(d,s,i,j3)?f8(d,t,r,i):null;return p&&f?p.distance<=f.distance?p:f:p||f||null}}var Fle=function(){let e,t,r=[],i=new gz(()=>new qr);return function(...s){e=i.getPrimitive(),t=i.getPrimitive(),r.push(e,t);let a=n(...s);i.releasePrimitive(e),i.releasePrimitive(t),r.pop(),r.pop();let o=r.length;return o>0&&(t=r[o-1],e=r[o-2]),a};function n(s,a,o,l,h=null,c=0,u=0){function d(y){let x=y*2,w=Nh,_=Fh;for(;!oh(x,w);)y=pm(y),x=y*2;return yp(y,_)}function p(y){let x=y*2,w=Nh,_=Fh;for(;!oh(x,w);)y=fm(y,_),x=y*2;return yp(y,_)+dm(x,w)}let f=s*2,m=Sf,g=Nh,v=Fh;if(oh(f,g)){let y=yp(s,v),x=dm(f,g);return co(s,m,e),l(y,x,!1,u,c+s,e)}else{let y=pm(s),x=fm(s,v),w=y,_=x,b,S,C,M;if(h&&(C=e,M=t,co(w,m,C),co(_,m,M),b=h(C),S=h(M),S<b)){w=x,_=y;let q=b;b=S,S=q,C=M}C||(C=e,co(w,m,C));let A=oh(w*2,g),T=o(C,A,b,u+1,c+w),L;if(T===2){let q=d(w),N=p(w)-q;L=l(q,N,!0,u+1,c+w,C)}else L=T&&n(w,a,o,l,h,c,u+1);if(L)return!0;M=t,co(_,m,M);let D=oh(_*2,g),O=o(M,D,S,u+1,c+_),z;if(O===2){let q=d(_),N=p(_)-q;z=l(q,N,!0,u+1,c+_,M)}else z=O&&n(_,a,o,l,h,c,u+1);return!!z}}}(),Ule=function(){let e=new Ol,t=new Ol,r=new Ae,i=new To,n=new To;return function s(a,o,l,h,c=null){let u=a*2,d=Sf,p=Nh,f=Fh;if(c===null&&(l.boundingBox||l.computeBoundingBox(),i.set(l.boundingBox.min,l.boundingBox.max,h),c=i),oh(u,p)){let m=o,g=m.index,v=m.attributes.position,y=l.index,x=l.attributes.position,w=yp(a,f),_=dm(u,p);if(r.copy(h).invert(),l.boundsTree)return co(a,d,n),n.matrix.copy(r),n.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:b=>n.intersectsBox(b),intersectsTriangle:b=>{b.a.applyMatrix4(h),b.b.applyMatrix4(h),b.c.applyMatrix4(h),b.needsUpdate=!0;for(let S=w*3,C=(_+w)*3;S<C;S+=3)if(so(t,S,g,v),t.needsUpdate=!0,b.intersectsTriangle(t))return!0;return!1}});for(let b=w*3,S=_+w*3;b<S;b+=3){so(e,b,g,v),e.a.applyMatrix4(r),e.b.applyMatrix4(r),e.c.applyMatrix4(r),e.needsUpdate=!0;for(let C=0,M=y.count;C<M;C+=3)if(so(t,C,y,x),t.needsUpdate=!0,e.intersectsTriangle(t))return!0}}else{let m=a+8,g=f[a+6];return co(m,d,Xd),!!(c.intersectsBox(Xd)&&s(m,o,l,h,c)||(co(g,d,Xd),c.intersectsBox(Xd)&&s(g,o,l,h,c)))}}}();function V3(e,t,r,i){return co(e,t,Xd),r.intersectBox(Xd,i)}var m8=[],d2,Sf,Nh,Fh;function B1(e){d2&&m8.push(d2),d2=e,Sf=new Float32Array(e),Nh=new Uint16Array(e),Fh=new Uint32Array(e)}function ov(){d2=null,Sf=null,Nh=null,Fh=null,m8.length&&B1(m8.pop())}var N5=Symbol("skip tree generation"),F5=new qr,U5=new qr,ed=new Ae,uu=new To,t1=new To,r1=new E,lv=new E,jle=new E,Vle=new E,Gle=new E,FE=new qr,Wa=new gz(()=>new Ol),g0=class{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),g0.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};let r=e.geometry,i=e._roots,n=r.getIndex(),s;return t.cloneBuffers?s={roots:i.map(a=>a.slice()),index:n.array.slice()}:s={roots:i,index:n.array},s}static deserialize(e,t,r={}){if(typeof r=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),g0.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});r={setIndex:!0,...r};let{index:i,roots:n}=e,s=new g0(t,{...r,[N5]:!0});if(s._roots=n,r.setIndex){let a=t.getIndex();if(a===null){let o=new pt(e.index,1,!1);t.setIndex(o)}else a.array!==i&&(a.array.set(i),a.needsUpdate=!0)}return s}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[N5]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[N5]||(this._roots=Lle(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new qr))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));let t=this.geometry,r=t.index.array,i=t.attributes.position,n,s,a,o,l=0,h=this._roots;for(let u=0,d=h.length;u<d;u++)n=h[u],s=new Uint32Array(n),a=new Uint16Array(n),o=new Float32Array(n),c(0,l),l+=n.byteLength;function c(u,d,p=!1){let f=u*2;if(a[f+15]===65535){let m=s[u+6],g=a[f+14],v=1/0,y=1/0,x=1/0,w=-1/0,_=-1/0,b=-1/0;for(let S=3*m,C=3*(m+g);S<C;S++){let M=r[S],A=i.getX(M),T=i.getY(M),L=i.getZ(M);A<v&&(v=A),A>w&&(w=A),T<y&&(y=T),T>_&&(_=T),L<x&&(x=L),L>b&&(b=L)}return o[u+0]!==v||o[u+1]!==y||o[u+2]!==x||o[u+3]!==w||o[u+4]!==_||o[u+5]!==b?(o[u+0]=v,o[u+1]=y,o[u+2]=x,o[u+3]=w,o[u+4]=_,o[u+5]=b,!0):!1}else{let m=u+8,g=s[u+6],v=m+d,y=g+d,x=p,w=!1,_=!1;e?x||(w=e.has(v),_=e.has(y),x=!w&&!_):(w=!0,_=!0);let b=x||w,S=x||_,C=!1;b&&(C=c(m,d,x));let M=!1;S&&(M=c(g,d,x));let A=C||M;if(A)for(let T=0;T<3;T++){let L=m+T,D=g+T,O=o[L],z=o[L+3],q=o[D],N=o[D+3];o[u+T]=O<q?O:q,o[u+T+3]=z>N?z:N}return A}}}traverse(e,t=0){let r=this._roots[t],i=new Uint32Array(r),n=new Uint16Array(r);s(0);function s(a,o=0){let l=a*2,h=n[l+15]===65535;if(h){let c=i[a+6],u=n[l+14];e(o,h,new Float32Array(r,a*4,6),c,u)}else{let c=a+8,u=i[a+6],d=i[a+7];e(o,h,new Float32Array(r,a*4,6),d)||(s(c,o+1),s(u,o+1))}}}raycast(e,t=za){let r=this._roots,i=this.geometry,n=[],s=t.isMaterial,a=Array.isArray(t),o=i.groups,l=s?t.side:t;for(let h=0,c=r.length;h<c;h++){let u=a?t[o[h].materialIndex].side:l,d=n.length;if(B1(r[h]),p8(0,i,u,e,n),ov(),a){let p=o[h].materialIndex;for(let f=d,m=n.length;f<m;f++)n[f].face.materialIndex=p}}return n}raycastFirst(e,t=za){let r=this._roots,i=this.geometry,n=t.isMaterial,s=Array.isArray(t),a=null,o=i.groups,l=n?t.side:t;for(let h=0,c=r.length;h<c;h++){let u=s?t[o[h].materialIndex].side:l;B1(r[h]);let d=f8(0,i,u,e);ov(),d!=null&&(a==null||d.distance<a.distance)&&(a=d,s&&(d.face.materialIndex=o[h].materialIndex))}return a}intersectsGeometry(e,t){let r=this.geometry,i=!1;for(let n of this._roots)if(B1(n),i=Ule(0,r,e,t),ov(),i)break;return i}shapecast(e,t,r){let i=this.geometry;if(e instanceof Function){if(t){let u=t;t=(d,p,f,m)=>{let g=p*3;return u(d,g,g+1,g+2,f,m)}}e={boundsTraverseOrder:r,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let n=Wa.getPrimitive(),{boundsTraverseOrder:s,intersectsBounds:a,intersectsRange:o,intersectsTriangle:l}=e;if(o&&l){let u=o;o=(d,p,f,m,g)=>u(d,p,f,m,g)?!0:NE(d,p,i,l,f,m,n)}else o||(l?o=(u,d,p,f)=>NE(u,d,i,l,p,f,n):o=(u,d,p)=>p);let h=!1,c=0;for(let u of this._roots){if(B1(u),h=Fle(0,i,a,o,s,c),ov(),h)break;c+=u.byteLength}return Wa.releasePrimitive(n),h}bvhcast(e,t,r){let{intersectsRanges:i,intersectsTriangles:n}=r,s=this.geometry.index,a=this.geometry.attributes.position,o=e.geometry.index,l=e.geometry.attributes.position;ed.copy(t).invert();let h=Wa.getPrimitive(),c=Wa.getPrimitive();if(n){let d=function(p,f,m,g,v,y,x,w){for(let _=m,b=m+g;_<b;_++){so(c,_*3,o,l),c.a.applyMatrix4(t),c.b.applyMatrix4(t),c.c.applyMatrix4(t),c.needsUpdate=!0;for(let S=p,C=p+f;S<C;S++)if(so(h,S*3,s,a),h.needsUpdate=!0,n(h,c,S,_,v,y,x,w))return!0}return!1};if(i){let p=i;i=function(f,m,g,v,y,x,w,_){return p(f,m,g,v,y,x,w,_)?!0:d(f,m,g,v,y,x,w,_)}}else i=d}e.getBoundingBox(U5),U5.applyMatrix4(t);let u=this.shapecast({intersectsBounds:d=>U5.intersectsBox(d),intersectsRange:(d,p,f,m,g,v)=>(F5.copy(v),F5.applyMatrix4(ed),e.shapecast({intersectsBounds:y=>F5.intersectsBox(y),intersectsRange:(y,x,w,_,b)=>i(d,p,y,x,m,g,_,b)}))});return Wa.releasePrimitive(h),Wa.releasePrimitive(c),u}intersectsBox(e,t){return uu.set(e.min,e.max,t),uu.needsUpdate=!0,this.shapecast({intersectsBounds:r=>uu.intersectsBox(r),intersectsTriangle:r=>uu.intersectsTriangle(r)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,r={},i={},n=0,s=1/0){e.boundingBox||e.computeBoundingBox(),uu.set(e.boundingBox.min,e.boundingBox.max,t),uu.needsUpdate=!0;let a=this.geometry,o=a.attributes.position,l=a.index,h=e.attributes.position,c=e.index,u=Wa.getPrimitive(),d=Wa.getPrimitive(),p=lv,f=jle,m=null,g=null;i&&(m=Vle,g=Gle);let v=1/0,y=null,x=null;return ed.copy(t).invert(),t1.matrix.copy(ed),this.shapecast({boundsTraverseOrder:w=>uu.distanceToBox(w),intersectsBounds:(w,_,b)=>b<v&&b<s?(_&&(t1.min.copy(w.min),t1.max.copy(w.max),t1.needsUpdate=!0),!0):!1,intersectsRange:(w,_)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:b=>t1.distanceToBox(b),intersectsBounds:(b,S,C)=>C<v&&C<s,intersectsRange:(b,S)=>{for(let C=b*3,M=(b+S)*3;C<M;C+=3){so(d,C,c,h),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let A=w*3,T=(w+_)*3;A<T;A+=3){so(u,A,l,o),u.needsUpdate=!0;let L=u.distanceToTriangle(d,p,m);if(L<v&&(f.copy(p),g&&g.copy(m),v=L,y=A/3,x=C/3),L<n)return!0}}}});{let b=c?c.count:h.count;for(let S=0,C=b;S<C;S+=3){so(d,S,c,h),d.a.applyMatrix4(t),d.b.applyMatrix4(t),d.c.applyMatrix4(t),d.needsUpdate=!0;for(let M=w*3,A=(w+_)*3;M<A;M+=3){so(u,M,l,o),u.needsUpdate=!0;let T=u.distanceToTriangle(d,p,m);if(T<v&&(f.copy(p),g&&g.copy(m),v=T,y=M/3,x=S/3),T<n)return!0}}}}}),Wa.releasePrimitive(u),Wa.releasePrimitive(d),v===1/0?null:(r.point?r.point.copy(f):r.point=f.clone(),r.distance=v,r.faceIndex=y,i&&(i.point?i.point.copy(g):i.point=g.clone(),i.point.applyMatrix4(ed),f.applyMatrix4(ed),i.distance=f.sub(i.point).length(),i.faceIndex=x),r)}closestPointToPoint(e,t={},r=0,i=1/0){let n=r*r,s=i*i,a=1/0,o=null;if(this.shapecast({boundsTraverseOrder:h=>(r1.copy(e).clamp(h.min,h.max),r1.distanceToSquared(e)),intersectsBounds:(h,c,u)=>u<a&&u<s,intersectsTriangle:(h,c)=>{h.closestPointToPoint(e,r1);let u=e.distanceToSquared(r1);return u<a&&(lv.copy(r1),a=u,o=c),u<n}}),a===1/0)return null;let l=Math.sqrt(a);return t.point?t.point.copy(lv):t.point=lv.clone(),t.distance=l,t.faceIndex=o,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{co(0,new Float32Array(t),FE),e.union(FE)}),e}},i1=hf(oW()),Hle=.5*(Math.sqrt(3)-1),n1=(3-Math.sqrt(3))/6,Wle=1/3,qa=1/6,v0=e=>Math.floor(e)|0,UE=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),j5=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function V5(e=Math.random){let t=vz(e),r=new Float64Array(t).map(n=>UE[n%12*2]),i=new Float64Array(t).map(n=>UE[n%12*2+1]);return function(n,s){let a=0,o=0,l=0,h=(n+s)*Hle,c=v0(n+h),u=v0(s+h),d=(c+u)*n1,p=c-d,f=u-d,m=n-p,g=s-f,v,y;m>g?(v=1,y=0):(v=0,y=1);let x=m-v+n1,w=g-y+n1,_=m-1+2*n1,b=g-1+2*n1,S=c&255,C=u&255,M=.5-m*m-g*g;if(M>=0){let L=S+t[C],D=r[L],O=i[L];M*=M,a=M*M*(D*m+O*g)}let A=.5-x*x-w*w;if(A>=0){let L=S+v+t[C+y],D=r[L],O=i[L];A*=A,o=A*A*(D*x+O*w)}let T=.5-_*_-b*b;if(T>=0){let L=S+1+t[C+1],D=r[L],O=i[L];T*=T,l=T*T*(D*_+O*b)}return 70*(a+o+l)}}function qle(e=Math.random){let t=vz(e),r=new Float64Array(t).map(s=>j5[s%12*3]),i=new Float64Array(t).map(s=>j5[s%12*3+1]),n=new Float64Array(t).map(s=>j5[s%12*3+2]);return function(s,a,o){let l,h,c,u,d=(s+a+o)*Wle,p=v0(s+d),f=v0(a+d),m=v0(o+d),g=(p+f+m)*qa,v=p-g,y=f-g,x=m-g,w=s-v,_=a-y,b=o-x,S,C,M,A,T,L;w>=_?_>=b?(S=1,C=0,M=0,A=1,T=1,L=0):w>=b?(S=1,C=0,M=0,A=1,T=0,L=1):(S=0,C=0,M=1,A=1,T=0,L=1):_<b?(S=0,C=0,M=1,A=0,T=1,L=1):w<b?(S=0,C=1,M=0,A=0,T=1,L=1):(S=0,C=1,M=0,A=1,T=1,L=0);let D=w-S+qa,O=_-C+qa,z=b-M+qa,q=w-A+2*qa,N=_-T+2*qa,I=b-L+2*qa,W=w-1+3*qa,P=_-1+3*qa,V=b-1+3*qa,G=p&255,Q=f&255,U=m&255,Y=.6-w*w-_*_-b*b;if(Y<0)l=0;else{let ee=G+t[Q+t[U]];Y*=Y,l=Y*Y*(r[ee]*w+i[ee]*_+n[ee]*b)}let H=.6-D*D-O*O-z*z;if(H<0)h=0;else{let ee=G+S+t[Q+C+t[U+M]];H*=H,h=H*H*(r[ee]*D+i[ee]*O+n[ee]*z)}let ie=.6-q*q-N*N-I*I;if(ie<0)c=0;else{let ee=G+A+t[Q+T+t[U+L]];ie*=ie,c=ie*ie*(r[ee]*q+i[ee]*N+n[ee]*I)}let J=.6-W*W-P*P-V*V;if(J<0)u=0;else{let ee=G+1+t[Q+1+t[U+1]];J*=J,u=J*J*(r[ee]*W+i[ee]*P+n[ee]*V)}return 32*(l+h+c+u)}}function vz(e){let t=new Uint8Array(512);for(let r=0;r<512/2;r++)t[r]=r;for(let r=0;r<512/2-1;r++){let i=r+~~(e()*(256-r)),n=t[r];t[r]=t[i],t[i]=n}for(let r=256;r<512;r++)t[r]=t[r-256];return t}var pa=new Xi,Xle=class{constructor(e){this.weightAttribute=null;let t=e.geometry;if(!t.isBufferGeometry||t.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let e=this.positionAttribute,t=new Float32Array(e.count/3);for(let i=0;i<e.count;i+=3){let n=1;pa.a.fromBufferAttribute(e,i),pa.b.fromBufferAttribute(e,i+1),pa.c.fromBufferAttribute(e,i+2),n*=pa.getArea(),t[i/3]=n}this.distribution=new Float32Array(e.count/3);let r=0;for(let i=0;i<t.length;i++)r+=t[i],this.distribution[i]=r;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t){if(this.distribution){let r=this.distribution[this.distribution.length-1],i=this.binarySearch(this.randomFunction()*r);return this.sampleFace(i,e,t)}}binarySearch(e){if(!this.distribution)return 0;let t=this.distribution,r=0,i=t.length-1,n=-1;for(;r<=i;){let s=Math.ceil((r+i)/2);if(s===0||t[s-1]<=e&&t[s]>e){n=s;break}else e<t[s]?i=s-1:r=s+1}return n}sampleFace(e,t,r){let i=this.randomFunction(),n=this.randomFunction();return i+n>1&&(i=1-i,n=1-n),pa.a.fromBufferAttribute(this.positionAttribute,e*3),pa.b.fromBufferAttribute(this.positionAttribute,e*3+1),pa.c.fromBufferAttribute(this.positionAttribute,e*3+2),t.set(0,0,0).addScaledVector(pa.a,i).addScaledVector(pa.b,n).addScaledVector(pa.c,1-(i+n)),pa.getNormal(r),this}},Yle=hf(sR()),Qle=new Ae,Zle=new Ae,Kle=new Ae,mm;(e=>{function t(r){return r&&r.__isSPEObject}e.is=t})(mm||(mm={}));var Sb=e=>class extends e{constructor(){super(...arguments),this.previousModelViewMatrix=new Ae,this.copyPreviousMatrix=!0,this.hiddenMatrix=new Ae,this.matrixWorldRigid=new Ae,this.shearScale=new Ae,this.shearScaleInv=new Ae}get __isSPEObject(){return!0}isDescendantOf(t){t instanceof ir&&(t=t.uuid);let r=this;for(;r.parent;){if(r.parent.uuid===t)return!0;r=r.parent}return!1}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);for(let r of this.children)r.updateMatrixWorld(t)}updateWorldMatrix(t,r){let i=this.parent;if(t&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),r)for(let n of this.children)n.updateWorldMatrix(!1,!0)}traverseChildren(t,r=0){for(let i of this.children)mm.is(i)&&i.traverseObject(t,r+1)}traverseObject(t,r=0){if(t(this,r)!==!0)for(let i of this.children)mm.is(i)&&i.traverseObject(t,r+1)}updateMatrixWorldSVD(){let t=this.matrixWorld.elements,r=[[t[0],t[4],t[8]],[t[1],t[5],t[9]],[t[2],t[6],t[10]]],{u:i,v:n,q:s}=(0,Yle.SVD)(r),a=Qle.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),o=Zle.set(n[0][0],n[0][1],n[0][2],0,n[1][0],n[1][1],n[1][2],0,n[2][0],n[2][1],n[2][2],0,0,0,0,1),l=Kle.copy(o).transpose();this.shearScale.makeScale(s[0],s[1],s[2]).multiply(l).premultiply(o),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(a,l).copyPosition(this.matrixWorld),s.every(h=>Math.abs(s[0]-h)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(t,r){this.updateWorldMatrix(!0,!1);let i=new Ae().copy(this.matrixWorld).invert();return t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),i.multiply(t.parent.matrixWorld)),"hiddenMatrix"in t&&t.hiddenMatrix instanceof Ae?t.hiddenMatrix.premultiply(i):t.applyMatrix4(i),t.updateWorldMatrix(!1,!1),this.add(t),r!==void 0&&(this.children.pop(),this.children.splice(r,0,t)),this}copy(t,r=!1){return super.copy(t,r),this.hasNonUniformScale=t.hasNonUniformScale,this}onAfterRender(t,r,i,n,s,a){this.copyPreviousMatrix&&this.previousModelViewMatrix.copy(this.modelViewMatrix)}},$le=class extends Sb(ir){},Jle=e=>e.type==="Mesh",Yi=class extends $le{constructor(e){super(),this.object=e,this.matrixAutoUpdate=!1,this.hasNonUniformScale=e.hasNonUniformScale}raycast(e,t){}expand(){let e=0,t=this.object.entityChildren(e);for(;t;){let r=this.children[e];(r==null?void 0:r.object)!==t&&(r&&this.remove(r),r=new Yi(t),this.add(r),this.children.splice(e,0,this.children.pop()),r.matrixWorldNeedsUpdate=!0,r.matrixAutoUpdate=!1,r.matrix=t.matrix,r.hiddenMatrix=t.hiddenMatrix),r.expand(),e+=1,t=this.object.entityChildren(e)}for(;this.children.length>e;)this.remove(this.children[e])}get visible(){var e;return this.playModeVisible!==void 0?this.playModeVisible:this.object.visible||this.object.dataPatched.visible&&((e=this.object.dataPatched.cloner)==null?void 0:e.hideBase)===!0}set visible(e){}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return Jle(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},Mu=new E,Au=new E,xp=new Ae,yz=[new E(-1,1,1),new E(-1,-1,1),new E(1,-1,1),new E(1,1,1),new E(-1,1,-1),new E(-1,-1,-1),new E(1,-1,-1),new E(1,1,-1)],ehe=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],the=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],jE=(e,t,r)=>{e.updateEntityBoxSize(Mu,Au),xp.copy(t).multiply(e.matrixWorld),Au.x===0&&Au.y===0&&Au.z===0?r.push(new E(Mu.x,Mu.y,Mu.z).applyMatrix4(xp)):yz.forEach(i=>{r.push(i.clone().multiply(Au).add(Mu).applyMatrix4(xp))})},VE=class extends qr{constructor(){super(...arguments),this.matrix=new Ae,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(t=>t.clone()),this.faces=e.faces.map(t=>t.clone()),this.edges=e.edges.map(t=>t.clone()),this.centerEdges=e.centerEdges.map(t=>t.clone()),this}setFromObjectSize(e,t=!1){e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let r=new Ae().copy(e.matrixWorld).invert();return this.expandByObjectSize(e,r,t)}expandByObjectSize(e,t,r=!1){let i=[];return r===!0?e.traverseEntity(n=>{if(n.visible||n.cloner&&n.data.visible){if(!("geometry"in n)){i.push(new E);return}jE(n,t,i)}}):jE(e,t,i),this.setFromPoints(i)}getCenter(e){return e=super.getCenter(e),e.applyMatrix4(this.matrix),e}getPositionToCenter(e){return e=super.getCenter(e),e.applyMatrix4(xp.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(Au).multiplyScalar(.5),this.getCenter(Mu),xp.copy(this.matrix).setPosition(Mu),this.vertices=yz.map(e=>e.clone().multiply(Au).applyMatrix4(xp))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=ehe.map(([e,t])=>new ra(this.vertices[e],this.vertices[t])),this.centerEdges=this.edges.map(e=>e.getCenter(new E))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=the.map(([e,t])=>this.vertices[e].clone().add(this.vertices[t]).multiplyScalar(.5))}},wh={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},rhe=class extends IR{constructor(){super()}getPoints(e=12){let t=[],r,i=this.getCurveLengths(),n=i[i.length-1]/i.length;for(let s=0,a=this.curves;s<a.length;s++){let o=a[s],l=s===0?i[s]:i[s]-i[s-1],h=Math.ceil(e*l/n),c=o.getPoints(h);for(let u=0;u<c.length;u++){let d=c[u];r&&r.equals(d)||(t.push(d),r=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}},g8=.001;function v8(e,t,r){return t.clone().sub(e).cross(t.clone().sub(r)).length()<=g8}function G5(e,t){let r=new E(...e.position),i=new E(...e.controlNext.position),n=new E(...t.controlPrevious.position),s=new E(...t.position);return v8(r,i,s)&&v8(r,n,s)}function xz(e){let t=e.points.map(c=>new E(...c.data.position)),r=[e.points[0]],i=new E(...r[0].data.position);for(let c=0;c<e.points.length-1;c++)v8(i,t[c],t[c+1])||(r.push(e.points[c]),i=t[c]);r.push(e.points[e.points.length-1]);let n=e.isClosed,s=r.length-(n?0:1),a=r.length,o=[];for(let c=0;c<a;c++){let u=r[c].data,d=new E(...u.position),p=new E(...u.controlPrevious.position),f=new E(...u.controlNext.position),m={position:d,baseRoundness:u.roundness,controlPrevious:p,controlNext:f};if(u.roundness===0||!e.isClosed&&(c===0||c===a-1)){o[c]={...m,removedLength:0};continue}let g=n&&c==0?a-1:c-1,v=n&&c==a-1?0:c+1,y=r[g].data,x=r[v].data,w=new E(...y.position),_=new E(...x.position),b=w.clone().sub(d).normalize(),S=_.clone().sub(d).normalize();Object.assign(m,{prevDir:b,nextDir:S});let C=G5(y,u),M=G5(u,x);if(!C||!M)o[c]={...m,removedLength:0};else{let A=b.clone().add(S).normalize(),T=A.clone().cross(b).length()/b.dot(A);o[c]={...m,tan:T,removedLength:u.roundness/T}}}for(let c=0;c<s;c++){let u=c,d=n&&c===a-1?0:c+1,p=o[u],f=o[d];if(p.removedLength!==0||f.removedLength!==0){let m=p.position.distanceTo(f.position);p.removedLength=Math.min(p.removedLength,m/2),f.removedLength=Math.min(f.removedLength,m/2)}}let l=[];for(let c=0;c<s;c++){let u=c,d=n&&c===a-1?0:c+1,p=o[u],f=o[d],m=null;if(!G5(r[u].data,r[d].data))p.position.distanceTo(f.position)>g8&&(m=new o2(p.position,p.controlNext,f.controlPrevious,f.position));else{let g=p.position.clone(),v=f.position.clone();(p.removedLength!==0||f.removedLength!==0)&&(p.nextDir&&g.add(p.nextDir.clone().setLength(p.removedLength)),f.prevDir&&v.add(f.prevDir.clone().setLength(f.removedLength))),g.distanceTo(v)>g8&&(m=new o2(g,g.clone().lerp(v,.3),v.clone().lerp(g,.3),v))}l[2*c+1]=m}for(let c=0;c<a;c++){let u=o[c];if(u.removedLength===0){l[2*c]=null;continue}let d=u.position,p=u.prevDir.clone().multiplyScalar(u.removedLength).add(d),f=u.nextDir.clone().multiplyScalar(u.removedLength).add(d),m=u.tan*u.removedLength,g=u.prevDir.clone().add(u.nextDir).normalize(),v=p.clone().lerp(f,.5),y=p.distanceTo(f)/2,x=g.clone().multiplyScalar(Math.sqrt(Math.pow(m,2)-Math.pow(y,2))).add(v),w=g.clone().multiplyScalar(-m).add(x),_=d.distanceTo(w)/d.distanceTo(v),b=u.prevDir.clone().multiplyScalar(_*d.distanceTo(p)).add(d),S=b.clone().lerp(w,2),C=p.clone().lerp(b,4/3),M=f.clone().lerp(S,4/3);l[2*c]=new o2(p,C,M,f)}let h=new rhe;return l.forEach(c=>{c&&h.add(c)}),h}var Gt;(e=>{function t(r){return r&&r.__isEntity}e.is=t})(Gt||(Gt={}));var nl=e=>Gt.is(e),ihe={type:"completeState",isfromEntity:!0},Mb=e=>class extends Sb(e){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new VE,this._recursiveBBox=new VE,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(t){let r=this.children[t];if(Gt.is(r))return r}entityChildrenCount(){let t=this.children.length;for(;t--;)if(Gt.is(this.children[t]))return t+1;return 0}get isConcreteEntity(){return typeof this.identity=="string"}get isVirtualEntity(){return typeof this.identity!="string"}get isInstanceRoot(){return this.isConcreteEntity&&this.data.type==="Instance"}nearestInstanceSelfOrParent(){let t=this;for(;t.data.type!=="Instance";){let r=t.parent;if(Gt.is(r))t=r;else return}return t}forInstancesRec(t){this.instances.forEach(r=>{r.disposed||t(r),r.forInstancesRec(t)})}super_Entity(t,r){typeof t=="string"&&(this.uuid=t),this.identity=t,this.data=r,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(t,r,i=!1){if(!(this.data.states.length===0&&!i)){for(let n of this.data.states)Bu.toOps(this.data,n.data).forEach(s=>{let a=R7.replaceProps(s,this.data);this.dataPatched=this.data,this.updateByPatchedOp(a,this.data,r)});if(t!==null){let n=this.data.states.data(t);n&&(this.dataPatched=Bu.patch(this.data,n),Bu.toOps(this.data,n).forEach(s=>{this.updateByPatchedOp(s,this.dataPatched,r)}))}i&&this.updateTransformState(this.dataPatched),this.stateSelection=t,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(t,r){t.setScalar(0),r.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(t=>{nl(t)&&t.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(t=>{t.resetBBoxNeedsUpdateSelf()})}find(t){let r;return this.traverseEntity(i=>{i.uuid===t&&(r=i)}),r}traverseSortNextHelper(){let t=this.parent;if(t){let r=t.children,i=r.indexOf(this)+1;if(Gt.is(r[i]))return r[i];if(Gt.is(t))return t.traverseSortNextHelper()}}sortNext(){let t=this.children;return this.children.length>0&&Gt.is(this.children[0])?t[0]:this.traverseSortNextHelper()}goUp(t){let r=this;for(;t>0&&r!==null;)r=r.parent,t-=1;return r}hasAnccestorOrSelf(t){return this===t||this.hasAnccestor(t)}hasAnccestor(t){let r=this.parent;for(;r;){if(t===r)return!0;r=r.parent}return!1}countToAccestor(t){let r=0,i=this;for(;i!==t;){if(i===null)return-1;i=i.parent,r+=1}return r}forEachEntity(t){for(let r of this.children)nl(r)&&t(r)}traverseEntityAncestors(t){this.traverseAncestors(r=>{Gt.is(r)&&t(r)})}traverseConcreteEntity(t,r=0){if(t(this,r)!==!0)for(let i of this.children)nl(i)&&i.isConcreteEntity&&i.traverseEntity(t,r+1)}traverseEntity(t,r=0){if(t(this,r)!==!0)for(let i of this.children)nl(i)&&i.traverseEntity(t,r+1)}traverseVisibleEntity(t){t(this);for(let r of this.children)nl(r)&&r.visible&&r.traverseVisibleEntity(t)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}copy(t,r=!1){return super.copy(t,r),this.dataPatched=t.dataPatched,this.raycastLock=t.raycastLock,this.scaleLock=t.scaleLock,this.hiddenMatrix.copy(t.hiddenMatrix),this}hasEntityChild(){return this.children.some(t=>nl(t))}isAncestorOf(t){if(this.uuid===t)return!1;let r=!1;return this.traverseEntity(i=>{i.uuid===t&&(r=!0)}),r}toObjectTransformState(t=[]){this.updateWorldMatrix(!0,!1);let r={position:this.position.toArray(),rotation:[this.rotation.x,this.rotation.y,this.rotation.z],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return I7(r,t)}updateTransformState(t){let r=!1;return t.position&&(this.position.fromArray(t.position),r=!0),t.rotation&&(this.rotation.fromArray(t.rotation),r=!0),t.scale&&(r=!0,this.scale.fromArray(t.scale)),t.hiddenMatrix!==void 0&&(r=!0,this.hiddenMatrix.fromArray(t.hiddenMatrix??Qp.identity)),r&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(i=>{i.invalidateClonerTransform(this)})),t.position&&t.rotation&&t.scale&&t.hiddenMatrix!==void 0&&this.updateWorldMatrix(!1,!0),r}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let t of this.children)Gt.is(t)&&t.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(t=>{Gt.is(t)&&t.disposeRecursively()})}toState(t=[]){let r={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(t)};return I7(r,t)}updateByObjUpdateOp(t,r){t!==void 0&&this.updateByOp({type:0,props:t,path:[]},{...this.data,...t},r,!1)}updateByOp(t,r,i,n){let s=this.data;this.data=r;let a=t,o=qs(t.path,["states","*"]);if(o!==null){if(t.type===0){let[l]=o;if((this==null?void 0:this.stateSelection)===l){let h={...t.props};if(delete h.name,Object.values(t.props).some(c=>c===void 0)){let c=this.data;if(c!==void 0){let u=_o.zoom(c,t.path.slice(2));if(u)for(let d in t.props)t.props[d]===void 0&&d in u&&(h[d]=u[d])}}a={...t,props:h,path:t.path.slice(2)}}}}else if(t.type===0){let l=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(l!==void 0){if(t.props.name!==void 0&&l.name){let{name:c,...u}=l;l=u}if(t.props.material!==void 0&&"material"in l){let{material:c,...u}=l;l=u}let h=_o.removeOverridden(t.path,t.props,l);a={...t,props:h}}}if(this.updateByPatchedOpBase(a,Bu.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),i),qs(t.path,["overrides"])){let l=[],h=[...t.path];for(l.push(h[1]),h.splice(0,2);h.length>0&&h[0]==="descendants";)l.push(h[1]),h.splice(0,2);if(l[l.length-1]===void 0){if(t.type===0)for(let c of Object.keys(t.props)){l[l.length-1]=c;let u=i.scene.findInstance([this.uuid,...l]);u&&(u.overrideData=t.props[c],u.updateState(zh.apply(u.component.data,u.overrideData),i))}}else{let c=i.scene.findInstance([this.uuid,...l]);if(c){let u=_o.zoom(c.component.data,h);if(t={...t,path:h},t.type===0){let d=t.props;if(u)for(let[p,f]of Object.entries(t.props))f===void 0&&(d===t.props&&(d={...t.props}),d[p]=u[p]);t={...t,props:d}}c.overrideData=z3.resolve(r.overrides,l),c.updateByOp(t,yn.applySimple(c.data,t),i,!1)}}}else if(this.instances.length>0){let l;if(t.path.length===0&&t.type===0){let h;for(let c of xh.rootOverrideProps)c in t.props&&(h===void 0&&(h={}),h[c]=t.props[c]);h&&(l={...t,props:h})}else for(let h of xh.rootOverrideProps)if(qs(t.path,[h])){l=t;break}l!==void 0&&this.instances.forEach(h=>{if(h.isInstanceRoot){let c=zh.filterOp(h.overrideData,l);c&&h.updateByOp(c,yn.applySimple(h.data,c),i,!0)}}),this.instances.forEach(h=>{if(!h.isInstanceRoot){let c=zh.filterOp(h.overrideData,t);if(c){let u;s===h.data&&t===c?u=r:u=yn.applySimple(h.data,c),h.updateByOp(c,u,i,!0)}}})}}updateByPatchedOpBase(t,r,i){if(this.dataPatched=r,t.path.length===0&&t.type===0)t.props.type!==void 0&&!xc.is(t.props.type)&&wh.changeEntityProptotype(this,r,i);else if(t.path.length===1&&t.path[0]==="geometry"&&t.type===0&&"type"in t.props){wh.changeEntityProptotype(this,r,i);for(let n of this.children)Gt.is(n)&&n.updateVisible()}this.updateByPatchedOp(t,r,i)}updateByPatchedOp(t,r,i){if(t.path.length===0&&t.type===0&&this.updateState(t.props,i),qs(t.path,["pathSnapping"])!==null&&this.updatePathSnapping(r.pathSnapping),qs(t.path,["cloner"])!==null){let n=yn.drop(t,1);n.path.length===0&&n.type===0&&n.props.disabled===!0?this.setFromClonerState(null,i):this.cloner?this.cloner.updateState(r.cloner,i.scene):(this.setFromClonerState(r.cloner,i),this.expandCloner(i.scene)),this.updateVisible()}}updatePathSnapping(t){this._updatedPathSnapping=t,this._needApplyPathSnapping=!0}get updatedPathSnapping(){return this._updatedPathSnapping}applyPathSnapping(t){var f,m,g,v,y;let r=((f=this._updatedPathSnapping)==null?void 0:f.pathId)??this.dataPatched.pathSnapping.pathId,i=((m=this._updatedPathSnapping)==null?void 0:m.slide)??this.dataPatched.pathSnapping.slide??0,n=((g=this._updatedPathSnapping)==null?void 0:g.offset)??this.dataPatched.pathSnapping.offset,s=((v=this._updatedPathSnapping)==null?void 0:v.orientation)??this.dataPatched.pathSnapping.orientation;if(r===null)return;let a=t.find(r);if(!a||this._needApplyPathSnapping===!1)return;this._needApplyPathSnapping=!1;let o=a.data;if(o.geometry.path.points.length<=1)return;let l=xz(o.geometry.path),h=(i+n)%1;i+n===1&&h===0&&(h=1);let c=l.getPointAt(h),u=this.parent?(y=this.parent)==null?void 0:y.matrixWorld:new Ae;a.updateMatrixWorld();let d=new Ae().multiplyMatrices(u.clone().invert(),a.matrixWorld);c.applyMatrix4(d);let p={position:c.toArray(),rotation:o.rotation};if(s==="tangential"){let x=new Ae().extractRotation(a.matrixWorld),w=l.getTangentAt(h).applyMatrix4(x).add(c),_=new Ae().lookAt(c,w,new E(0,1,0)),b=new bi().setFromRotationMatrix(_);p={...p,rotation:[b.x,b.y,b.z]}}this.updateTransformState(p),this.traverseEntity(x=>{x._cameraType&&x.dispatchEvent(ihe)})}updateVisible(){var t;this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||((t=this.dataPatched.cloner)==null?void 0:t.hideBase)!==!0)}updateState_Entity(t,r){t.name!==void 0&&(this.name=t.name),t.raycastLock!==void 0&&(this.raycastLock=t.raycastLock),t.visible!==void 0&&(this.updateVisible(),this.resetBBoxNeedsUpdate()),r&&"cloner"in t&&t.cloner!==void 0&&(this.setFromClonerState(t.cloner,r),this.updateVisible()),this.updateTransformState(t)}get attachedSurfaceCloners(){return this.children.filter(t=>t instanceof wh.Cloner&&t.parameters.type==="toObject")}setFromClonerState(t,r){this.disposed||(t===null||t.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):this.cloner===void 0?(this.cloner=new wh.Cloner(this,t),r.scene.addPendingExpandCloner(this)):this.cloner.updateState(t,r.scene))}expandCloner(t){!this.disposed&&this.cloner&&this.cloner.expandClones(t)}invalidateClonerTransform(t){this.cloner&&this.cloner.invalidateTransform(t)}},wz=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},e.parameters),i=r.width/2,n=r.radiusTop??i,s=r.radiusBottom??i;return n===s?(n=i,s=i):n>s?(n=i,s=s*i/n):(n=n*i/s,s=i),{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width),radiusTop:n,radiusBottom:s})}}static build(e){let{width:t,depth:r,height:i,radialSegments:n,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l,radiusTop:h,radiusBottom:c,cornerRadius:u,cornerSegments:d,hollow:p}=e.parameters,f;return u||p?f=new bz(h,c,i,n,s,a,o,l*Math.PI/180,u,u,d,p):f=new jw(h,c,i,n,s,a,o,l*Math.PI/180),f.scale(1,1,r/t),Object.assign(f,{userData:{...e,type:"CylinderGeometry"}})}};function Wl(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function GE(e){return new X(e.y,-e.x)}var bz=class extends dt{constructor(e,t,r,i,n,s,a,o,l,h,c,u,d=!1){super(),this.type="RoundedCylinderBufferGeometry",e=e!==void 0?e:1,t=t!==void 0?t:1,r=r||1,i=Math.floor(i)||8,n=Math.floor(n)||1,s=s!==void 0?s:!1,a=a!==void 0?a:0,o=o!==void 0?o:Math.PI*2,s&&(l=0,h=0);let p=[],f=[],m=[],g=[],v=0,y=r/2,x=new E,w=new E;d&&e==0&&(e=l),d&&t==0&&(t=h);let _=new X(e,y),b=new X(t,-y),S=null,C=null,M=null,A=null,T=_.clone().sub(b),L=0,D=0,O=0;u>0&&(L=Math.min(e,t)*(1-u),D=e-L,O=t-L);let z=_.clone();z.x-=L;let q=Math.PI-T.angle(),N=T.angle(),I=Math.tan(N/2),W=Math.tan(q/2),P=I+W,V=u?P:W,G=u?P:I;if(l=Math.min(l,(e-D)/V,T.length()/P),h=Math.min(h,(t-O)/G,T.length()/P),l>0){let J=l/I;S=_.clone().sub(new X(J,l)),u&&(M=S.clone(),M.x-=L-P*l),_.sub(T.clone().setLength(J))}if(h>0){let J=h/W;C=b.clone().sub(new X(J,-h)),b.add(T.clone().setLength(J)),u&&(A=C.clone(),A.x-=L-P*h,z.sub(T.clone().setLength(J)))}T=_.clone().sub(b);let Q=T.length()<.5,U=[];for(let J=0;J<=i;J++){let ee=[],ne=J/i,he=ne*o+a,ge=new X(Math.sin(he),Math.cos(he));A&&C?(Y(ee,ne,ge,q,h,A,-1,!0),Y(ee,ne,ge,N,h,C,-1,!1)):C?(H(ee,ge,C.x,0,-1),Y(ee,ne,ge,N,h,C,-1,!1)):s||H(ee,ge,t,O,-1);let ce=GE(T).normalize();if(Wl(ce,ge,x),!Q)for(let Le=0;Le<=n;Le++){let _e=Le/n,ze=T.clone().multiplyScalar(_e).add(b);Wl(ze,ge,w),f.push(w.x,w.y,w.z),m.push(x.x,x.y,x.z),g.push(ne,.5+w.y/r),ee.push(v++)}if(M&&S?(Y(ee,ne,ge,q,l,S,1,!1),Y(ee,ne,ge,N,l,M,1,!0)):S?(Y(ee,ne,ge,q,l,S,1,!1),H(ee,ge,S.x,0,1)):s||H(ee,ge,e,D,1),u&&!Q){let Le=GE(T).multiplyScalar(-1).normalize();Wl(Le,ge,x);for(let _e=0;_e<=n;_e++){let ze=_e/n,K=T.clone().multiplyScalar(-ze).add(z);Wl(K,ge,w),f.push(w.x,w.y,w.z),m.push(x.x,x.y,x.z),g.push(ne,.5+w.y/r),ee.push(v++)}}u&&!s&&ee.push(ee[0]),U.push(ee)}for(let J=0;J<U.length-1;J++)for(let ee=0;ee<U[0].length-1;ee++){if(s&&u&&ee==n)continue;let ne=U[J][ee],he=U[J+1][ee],ge=U[J+1][ee+1],ce=U[J][ee+1],Le=f[ge*3+0],_e=f[ge*3+2];p.push(ne,he,ce),(Le!=0||_e!=0)&&p.push(he,ge,ce)}o<Math.PI*2&&(ie(-1,U[0],a),ie(1,U[U.length-1],a+o)),this.setIndex(p),this.setAttribute("position",new Ke(f,3)),this.setAttribute("normal",new Ke(m,3)),this.setAttribute("uv",new Ke(g,2));function Y(J,ee,ne,he,ge,ce,Le,_e){for(let ze=0;ze<c+1;ze++){let K=ze/c,Ce=Le<0?K:1-K;_e&&(Ce-=1),Ce*=he;let Me=new X(Math.sin(Ce),Math.cos(Ce)*Le),Ge=Me.clone().multiplyScalar(ge).add(ce);Wl(Ge,ne,w),f.push(w.x,w.y,w.z),Wl(Me,ne,x),m.push(x.x,x.y,x.z),g.push(ee,.5+w.y/r),J.push(v++)}}function H(J,ee,ne,he,ge){let ce=new E,Le=new X,_e=[ne,he];ge<0&&_e.reverse();for(let ze of _e)Le.set(ze,y*ge),Wl(Le,ee,ce),f.push(ce.x,ce.y,ce.z),m.push(0,ge,0),g.push(.5,.5),J.push(v++)}function ie(J,ee,ne){let he=new X(Math.sin(ne),Math.cos(ne)),ge=new X(-Math.cos(ne),Math.sin(ne)),ce=new E,Le=J<0?(K,Ce,Me)=>p.push(K,Ce,Me):(K,Ce,Me)=>p.push(K,Me,Ce),_e=new X((e+t+D+O)/4,0);Wl(_e,he,ce),f.push(ce.x,ce.y,ce.z),m.push(ge.x,0,ge.y),g.push(.5,.5);let ze=v++;for(let K of ee){let Ce=f.slice(K*3,K*3+3);f.push(...Ce),m.push(ge.x,0,ge.y);let Me=g.slice(K*2,K*2+2);g.push(...Me),v++}for(let K=ze+1;K<v-1;K++)Le(ze,K,K+1);Le(ze,v-1,ze+1)}}},nhe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,depth:r,height:i,radialSegments:n,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l,cornerRadiusTop:h,cornerRadiusBottom:c,cornerSegments:u}=e.parameters,d;return h>0||c>0||l<360?d=new bz(0,t/2,i,n,s,a,o,l*Math.PI/180,h,c,u,0,!0):d=new BR(t/2,i,n,s,a),d.scale(1,1,r/t),Object.assign(d,{userData:{...e,type:"ConeGeometry"}})}},she=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,widthSegments:n,heightSegments:s,depthSegments:a,cornerRadius:o,cornerSegments:l}=e.parameters,h;return o==0?h=new Ao(t,r,i,n,s,a):h=new ahe(t,r,i,n,s,a,o,l),Object.assign(h,{userData:{...e,type:"CubeGeometry"}})}},H5=Math.PI/2,ahe=class extends dt{constructor(e=1,t=1,r=1,i=1,n=1,s=1,a=0,o=4){super(),this.type="BoxGeometry";let l=this;i=Math.floor(i),n=Math.floor(n),s=Math.floor(s),o=Math.floor(o),a=Math.min(a,e/2,t/2,r/2);let h=[],c=[],u=[],d=[],p=0,f=0;m("z","y","x",-1,-1,r,t,e,s,n,0),m("z","y","x",1,-1,r,t,-e,s,n,1),m("x","z","y",1,1,e,r,t,i,s,2),m("x","z","y",1,-1,e,r,-t,i,s,3),m("x","y","z",1,-1,e,t,r,i,n,4),m("x","y","z",-1,-1,e,t,-r,i,n,5),a>0&&(g("z","y","x",-1,-1,1,r,t,e,s,0),g("z","y","x",1,-1,-1,r,t,e,s,1),g("z","y","x",-1,1,-1,r,t,e,s,1),g("z","y","x",1,1,1,r,t,e,s,0),g("x","y","z",-1,-1,-1,e,t,r,i,0),g("x","y","z",1,-1,1,e,t,r,i,1),g("x","y","z",-1,1,1,e,t,r,i,0),g("x","y","z",1,1,-1,e,t,r,i,1),g("y","x","z",-1,-1,1,t,e,r,n,0),g("y","x","z",1,-1,-1,t,e,r,n,1),g("y","x","z",1,1,1,t,e,r,n,1),g("y","x","z",-1,1,-1,t,e,r,n,0),v(1,1,1),v(-1,1,1),v(1,-1,1),v(-1,-1,1),v(1,1,-1),v(-1,1,-1),v(1,-1,-1),v(-1,-1,-1)),this.setIndex(h),this.setAttribute("position",new Ke(c,3)),this.setAttribute("normal",new Ke(u,3)),this.setAttribute("uv",new Ke(d,2));function m(y,x,w,_,b,S,C,M,A,T,L){let D=(S-2*a)/A,O=(C-2*a)/T,z=S/2-a,q=C/2-a,N=M/2,I=A+1,W=T+1,P=0,V=0,G=new E;for(let Q=0;Q<W;Q++){let U=Q*O-q;for(let Y=0;Y<I;Y++){let H=Y*D-z;G[y]=H*_,G[x]=U*b,G[w]=N,c.push(G.x,G.y,G.z),G[y]=0,G[x]=0,G[w]=M>0?1:-1,u.push(G.x,G.y,G.z),d.push(Y/A),d.push(1-Q/T),P+=1}}for(let Q=0;Q<T;Q++)for(let U=0;U<A;U++){let Y=p+U+I*Q,H=p+U+I*(Q+1),ie=p+(U+1)+I*(Q+1),J=p+(U+1)+I*Q;h.push(Y,H,J),h.push(H,ie,J),V+=6}l.addGroup(f,V,L),f+=V,p+=P}function g(y,x,w,_,b,S,C,M,A,T,L){let D=(C-2*a)/T,O=C/2-a,z=M/2-a,q=A/2,N=T+1,I=0,W=0,P=new E,V=new E;for(let G=0;G<o+1;G++){let Q=G/o*H5,U=Math.sin(Q)*a,Y=(1-Math.cos(Q))*a,H=Math.sin(Q),ie=Math.cos(Q);P[x]=(z+U)*b,P[w]=(q-Y)*S,V[y]=0,V[x]=H*Math.sign(P[x]),V[w]=ie*Math.sign(P[w]);for(let J=0;J<N;J++){let ee=J*D-O;P[y]=ee*_,c.push(P.x,P.y,P.z),u.push(V.x,V.y,V.z),d.push(J/T),d.push(0),I+=1}}for(let G=0;G<o;G++)for(let Q=0;Q<T;Q++){let U=p+Q+N*G,Y=p+Q+N*(G+1),H=p+(Q+1)+N*(G+1),ie=p+(Q+1)+N*G;h.push(U,Y,ie),h.push(Y,H,ie),W+=6}l.addGroup(f,W,L),f+=W,p+=I}function v(y,x,w){let _=new E,b=new E(e/2,t/2,r/2);b.subScalar(a);let S=[],C=y*x*w>0?(A,T,L)=>h.push(A,T,L):(A,T,L)=>h.push(A,L,T);for(let A=0;A<=o;A++){let T=[],L=H5*(1-A/o),D=Math.cos(L),O=Math.sin(L),z=0;for(let q=0;q<=A;q++){let N=Math.cos(z),I=Math.sin(z);_.x=D*N,_.y=O,_.z=D*I;let W=b.clone().addScaledVector(_,a);c.push(y*W.x,x*W.y,w*W.z),u.push(y*_.x,x*_.y,w*_.z),d.push(0,0),T.push(p++),z+=H5/A}S.push(T)}let M=S.length-1;for(let A=0;A<M;A++){let T=S[A],L=S[A+1],D=T.length-1;C(T[0],L[1],L[0]);for(let O=1;O<=D;O++)C(T[O-1],T[O],L[O]),C(T[O],L[O+1],L[O])}}}},Ab=class extends dt{constructor(e=[],t=[],r="",i=1,n=.2,s=4){super(),this.type="PolyhedronGeometryRound";let a=[],o=[],l=[];h(),c(),this.setAttribute("position",new Ke(a,3)),this.setAttribute("normal",new Ke(l,3)),this.setAttribute("uv",new Ke(o,2));return;function h(){var N;n=Math.min(1-1e-5,n),n==0&&(s=0);let u={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[r],d=new E,p=d.clone(),f=new Xi,m=n*i,g=i-m,v=s+1,y=new E,x=(I,W)=>y.subVectors(I,W).normalize(),w=(I,W)=>Array(I).fill(void 0).map(W),_=w(e.length/3,(I,W)=>new E().fromArray(e,W*3).setLength(i)),b=[],S=1e6;for(let I=0;I<_.length;I++){let W=_[I],P=[],V,G,Q,U=1e10,Y=-1;for(;(Y=t.indexOf(I,Y+1))!=-1;){let ee=Y-Y%3;V=t[ee+(Y+1)%3],G=t[ee+(Y+2)%3],Q=W.distanceToSquared(_[V]),U=Math.min(U,Q),P.push([V,G,Q])}U+=1e-6;let H=[],ie=0,J=P.length;for(let ee=0;ee<J;ee++){[V,G,Q]=P[ie];let ne=((N=b[V])==null?void 0:N.includes(I))==!0;Q<=U&&H.push(V+ +ne*S),ie=P.findIndex(he=>he[0]==G)}b.push(H)}let C=[];{let I=0,W=0,P,V,G=u==3;for(let Q=0;Q<=s;Q++){P=Q*(Q+1)/2,V=(Q+1)*(Q+2)/2;for(let U=0;U<s-Q;U++)[I,W]=[P+U+Q+2,V+U+Q+3],C.push(P,V,...G?[W,P]:[I,V],W,I),[P,V]=[I,W];C.push(P,V,P+s+2)}}let M=d.clone(),A=d.clone(),T=d.clone(),L=d.clone(),D=d.clone(),O=[],z=w(_.length,()=>w(u,()=>d.clone()));for(let I=0;I<_.length;I++){d.copy(_[I]).normalize(),M.copy(d).multiplyScalar(g);let W=b[I];for(let H=0;H<W.length;H++){let ie=W[H],J=W[(H+1)%u];f.setFromPointsAndIndices(_,I,ie%S,J%S),f.b.sub(f.a).setLength(1e10).add(f.a),f.c.sub(f.a).setLength(1e10).add(f.a),f.closestPointToPoint(M,z[I][H])}let P=[],V=[],G=[],Q=new E;s==0&&[...z[I]].reduce((H,ie)=>H.add(ie),Q).multiplyScalar(1/u);for(let H=0;H<u;H++){let ie=[],J=(H-1+u)%u,ee=z[I][J],ne=z[I][H];d.copy(ee).sub(M),p.copy(ne).sub(M);let he=M.angleTo(d),ge=d.angleTo(p),ce=Math.cos(he)*m;s==0?A.copy(Q):A.copy(M).setLength(g+ce),V.push(ce);let Le=[A,ee,ne];for(let _e=0;_e<2;_e++){let ze=Le[_e],K=Le[_e+1];L.subVectors(ze,M),D.subVectors(K,M),T.crossVectors(L,D).normalize();for(let Ce=0;Ce<v;Ce++){let Me=[he,ge][_e]*Ce/v;d.copy(L).applyAxisAngle(T,Me).add(M),P.push(d.clone()),_e&&(x(d,M),ie.push([Ce==0?ze:d.clone(),y.clone()]))}_e&&(x(K,M),ie.push([K,y.clone()]))}G.push(ie)}O.push(G);let U=2*v,Y=2;for(let H=0;H<u;H++){let ie=U*H,J=U*((H+1)%u),ee=[P[ie]];for(let he=1;he<v;he++){L=P[ie+he],D=P[J+he],ee.push(L);for(let ge=1,ce=he-Y+1;ge<=ce;ge++)d.lerpVectors(L,D,ge/(ce+1)),d.sub(M).setLength(V[H]).add(M),ee.push(d.clone());ee.push(D)}for(let he=0;he<v;he++)ee.push(P[he+v+ie]);ee.push(P[J+v]);let ne=C.map(he=>ee[he]);a.push(...ne.map(he=>[he.x,he.y,he.z]).flat()),l.push(...ne.map(he=>(x(he,M),[y.x,y.y,y.z])).flat())}}let q=[];for(let I=0;I<b.length;I++)for(let W=0;W<u;W++){let P=b[I][W];if(P<S){let V=b[P].findIndex(U=>U%S==I),G=O[I][W],Q=O[P][V];for(let U=0;U<v;U++){let Y=G[U],H=Q[v-U],ie=G[U+1],J=Q[v-(U+1)];[Y,H,ie,ie,H,J].forEach(ee=>{a.push(ee[0].x,ee[0].y,ee[0].z),l.push(ee[1].x,ee[1].y,ee[1].z)})}q.push(G[0][0],Q[v][0],G[v][0],Q[0][0])}}for(;q.length;){let I,W,P,V;[I,W]=q.splice(0,2);let G=[I];for(;I!=W;)G.push(W),P=q.indexOf(W),V=P%2,W=q.splice(P-V,2)[1-V];y.subVectors(G[0],G[1]).cross(d.subVectors(G[0],G[2])).normalize();let Q=y.dot(G[0])<0;Q&&y.negate();for(let U=1;U<=G.length-2;U++)[G[U+ +Q],G[U+1-+Q],G[0]].forEach(Y=>{a.push(Y.x,Y.y,Y.z),l.push(y.x,y.y,y.z)})}}function c(){let u=new E;for(let b=0;b<a.length;b+=3){u.x=a[b+0],u.y=a[b+1],u.z=a[b+2];let S=w(u)/2/Math.PI+.5,C=_(u)/Math.PI+.5;o.push(S,1-C)}let d=new E,p=new E,f=new E,m=new E,g=new X,v=new X,y=new X,x=(b,S,C,M)=>{M<0&&b.x===1&&(o[S]=b.x-1),C.x===0&&C.z===0&&(o[S]=M/2/Math.PI+.5)};for(let b=0,S=0;b<a.length;b+=9,S+=6){d.set(a[b+0],a[b+1],a[b+2]),p.set(a[b+3],a[b+4],a[b+5]),f.set(a[b+6],a[b+7],a[b+8]),g.set(o[S+0],o[S+1]),v.set(o[S+2],o[S+3]),y.set(o[S+4],o[S+5]),m.copy(d).add(p).add(f).divideScalar(3);let C=w(m);x(g,S+0,d,C),x(v,S+2,p,C),x(y,S+4,f,C)}for(let b=0;b<o.length;b+=6){let S=o[b+0],C=o[b+2],M=o[b+4],A=Math.max(S,C,M),T=Math.min(S,C,M);A>.9&&T<.1&&(S<.2&&(o[b+0]+=1),C<.2&&(o[b+2]+=1),M<.2&&(o[b+4]+=1))}function w(b){return Math.atan2(b.z,-b.x)}function _(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}}}static fromJSON(e){return new Ab(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},ohe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,detail:n,corner:s,cornerSides:a}=e.parameters,o=n===0&&s!==0?new _z(t*.5,s,a):new zR(t*.5,n);return o.scale(1,r/t,i/t),Object.assign(o,{userData:{...e,type:"DodecahedronGeometry"}})}},_z=class extends Ab{constructor(e=1,t=.2,r=4){let i=(1+Math.sqrt(5))/2,n=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],o="DodecahedronGeometry";super(s,a,o,e,t,r),this.type=o}static fromJSON(e){return new _z(e.radius,e.corner,e.cornerSides)}},s1=1e-12,Eb=class{constructor(e){this.position=new X,this.startPosition=new X,this.uuid=Tt.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new Eb(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},y8=class extends Eb{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new y8(this.parent).copy(this)}},wp=class extends Eb{constructor(e,t){super(t),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new y8(this),new y8(this))}static create(e,t){let r=new wp(e,new X(...t.position));return r.controls[0].position.set(...t.controlPrevious.position),r.controls[1].position.set(...t.controlNext.position),r.roundness=t.roundness,r.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,r}getOppositeControl(e){let t=this.controls.indexOf(e);return t===0?this.controls[1]:t===1?this.controls[0]:null}applyOffsetToControls(e,t=1){for(let r=0,i=this.controls.length;r<i;r++){let n=this.controls[r];this.position.distanceTo(n.position)<=t?n.position.copy(this.position):n.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new wp(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var r,i;let e=(r=this.curveBefore)==null?void 0:r.getTangentAt(1),t=(i=this.curveAfter)==null?void 0:i.getTangentAt(0);return[e,t]}computeNormals(e=new X,t=new X){let[r,i]=this.computeTangents();return r&&i&&(HE(r,e),HE(i,t)),[e,t]}computeTangent(e=new X){let[t,r]=this.computeTangents();return t&&r&&e.copy(t).add(r).normalize(),e}computeNormal(e=new X){let[t,r]=this.computeNormals();return e.copy(t).add(r).normalize(),e}};function HE(e,t=new X){let r=e.length();return t.set(-e.y/r,e.x/r)}var Tb=e=>e,Mf=new X,Uy=new X,lhe=new X,hhe=new X,uhe=new X,che=new X,Cz=new E,Sz=new E;function dhe(e){let t=new X;t.addVectors(e.v0,Mf.subVectors(e.v1,e.v0).multiplyScalar(2/3));let r=new X;return r.addVectors(e.v2,Uy.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new Aa(e.v0,t,r,e.v2)}function z1(e,t,r=Number.EPSILON){return Math.abs(e-t)<r}function phe(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function fhe(e,t,r=Number.EPSILON){return e.distanceTo(t)<r}function Mz(e,t,r){let i=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),n=Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2)),s=Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2));return Math.acos((n*n+i*i-s*s)/(2*n*i))}function mhe(e,t,r){return qE(e,t)&&qE(t,r)&&x8(e.position,t.position,r.position)}function x8(e,t,r){return Mf.copy(t).sub(e).cross(Uy.copy(r).sub(e))===0}function ghe(e,t,r,i,n){let s=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),a=(e.y+t.y)/2,o=(e.x+t.x)/2,l=Math.sqrt(Math.pow(r,2)-Math.pow(s/2,2))*(e.y-t.y)/s,h=Math.sqrt(Math.pow(r,2)-Math.pow(s/2,2))*(t.x-e.x)/s;return i.set(o+l,a+h),n.set(o-l,a-h),[i,n]}function vhe(e,t,r){let i=e.distanceTo(r),n=t.distanceTo(r);return i<n?t:e}function yhe(e,t,r,i,n,s){let a=t.x-e.x,o=t.y-e.y,l=r.x-e.x,h=r.y-e.y,c=Math.sqrt((a+l)*(a+l)+(o+h)*(o+h)),u;return Mz(t,e,r)>Math.PI&&(c*=-1),z1(h,o)?u=(o+h)*(i/c-.5)*8/3/(a-l):u=(a+l)*(i/c-.5)*8/3/(h-o),n.set(t.x-u*o,t.y+u*a),s.set(r.x+u*h,r.y-u*l),[n,s]}function WE(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function qE(e,t){return x8(e.position,e.controls[1].position,t.position)&&x8(e.position,t.controls[0].position,t.position)}function xhe(e,t,r,i,n=.5){let s=Mf.subVectors(t,e).multiplyScalar(n).add(e),a=Uy.subVectors(r,t).multiplyScalar(n).add(t),o=lhe.subVectors(i,r).multiplyScalar(n).add(r),l=s,h=hhe.subVectors(a,s).multiplyScalar(n).add(s),c=uhe.subVectors(o,a).multiplyScalar(n).add(a),u=o,d=che.subVectors(c,h).multiplyScalar(n).add(h);return[e.x,e.y,l.x,l.y,h.x,h.y,d.x,d.y,c.x,c.y,u.x,u.y,i.x,i.y]}function whe(e,t,r=12,i=!0){let n=Sz.set(0,0,0),s,a=0;for(let o=0;o<t.length;o++){let l=Tb(t[o]),h=Mf,c=rc(l,r);for(let u=0;u<=c;u++)if(l instanceof Aa||l instanceof qh||l instanceof Ra){if(l.getPoint(u/c,h),n.set(h.x,h.y,0),s!==void 0&&fhe(s,n))continue;s===void 0&&(s=Cz),s.copy(n),e.setXYZ(a,n.x,n.y,n.z),a++}}return i&&a>1&&!(e.getX(a-1)===e.getX(0)&&e.getY(a-1)===e.getY(0)&&e.getZ(a-1)===e.getZ(0))&&(e.setXYZ(a,e.getX(0),e.getY(0),e.getZ(0)),a++),e}function bhe(e,t,r,i=12,n=!0){let s=Sz.set(0,0,0),a=0,o=[];for(let l=0;l<t.length;l++){if(r[l]===!1)continue;let h,c=Tb(t[l]),u=Mf,d=rc(c,i);o.push(d);for(let p=0;p<=d;p++)if(c instanceof Aa||c instanceof qh||c instanceof Ra){if(c.getPoint(p/d,u),s.set(u.x,u.y,0),h==null?void 0:h.equals(s))continue;h===void 0?h=Cz:(e.setXYZ(a,h.x,h.y,h.z),a++,e.setXYZ(a,s.x,s.y,s.z),a++),h.copy(s)}}return n&&a>1&&!(e.getX(a-1)===e.getX(0)&&e.getY(a-1)===e.getY(0)&&e.getZ(a-1)===e.getZ(0))&&(e.setXYZ(a,e.getX(0),e.getY(0),e.getZ(0)),a++),o}function XE(e,t=12,r=!1){let i=[];for(let n=0,s=e.length;n<s;n++){let a=e[n],o=0;if(r&&a.roundedCurveCorner!==void 0){let l=rc(a.roundedCurveCorner,t)*.5;n>0&&(i[n-1]+=l),o+=l}a.curveAfter!==void 0&&(o+=rc(a.curveAfter,t)),i.push(o)}return e.length>0&&r&&e[0].roundedCurveCorner!==void 0&&(i[e.length-1]+=rc(e[0].roundedCurveCorner,t)*.5),i}function rc(e,t=12){return e&&e instanceof Sy?t*2:e&&(e instanceof Ra||e instanceof OR)?1:e&&e instanceof Uw?t*e.points.length:t}function _he(e,t,r=12,i=!0){let n,s=0;for(let a=0;a<t.length;a++){let o=Tb(t[a]),l=rc(o,r),h=Mf;for(let c=0;c<=l;c++)if(o instanceof Aa||o instanceof qh||o instanceof Ra){if(o.getPoint(c/l,h),n!==void 0&&phe(n,h,s1))continue;n===void 0&&(n=Uy),n.copy(h),e.push(h.x,h.y),s++}}return z1(e[0],e[e.length-2],s1)&&z1(e[1],e[e.length-1],s1)&&(e.pop(),e.pop()),i&&s>1&&!(z1(e[s-1],e[1],s1)&&z1(e[s-2],e[0],s1))&&(e.push(e[0],e[1]),s++),e}var W5=new X,Che=new X,She=new X,Mhe=new X,Ahe=new X,Ehe=new X,Rr=class extends p3{constructor(e=100,t=100){super(),this.points=[],this.shapeHoles=[],this.plane=new hs(new E(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=Tt.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=t}static createFromState(e,t,r){let i=new Rr;return i.isClosed=e.isClosed,i.points=e.points.map(n=>wp.create(n.id,n.data)),typeof e.roundness=="number"&&(i.roundness=e.roundness),i.shapeHoles=e.shapeHoles.map(n=>Rr.createFromState(n)),t!==void 0&&r!==void 0&&i.applySize(t,r),i.update(),i}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let t=0,r=this.points.length;t<r;t++)this.points[t].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(t=>this.getPointIndexById(t)).filter(t=>t>=0)}getPointIndexById(e){let t=this.points.length,r=this.points.findIndex(i=>i.uuid===e);if(r<0){let i=t;for(let n=0,s=this.shapeHoles.length;n<s;n++){let a=this.shapeHoles[n],o=a.points.length,l=a.getPointIndexById(e);if(l<0)i+=o;else return l+i}}return r}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0){let t=this.points.length;for(let r=0,i=this.shapeHoles.length;r<i;r++){let n=this.shapeHoles[r],s=e-t;if(s<=n.points.length-1)return n.points[s];t+=n.points.length}}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(let r=0,i=this.shapeHoles.length;r<i;r++){let n=this.shapeHoles[r],s=n.points.indexOf(e);if(s>=0)return t+s;t+=n.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(t=>t.points));return[...this.points,...e]}applySize(e,t){e===0&&(e=.001),t===0&&(t=.001),this._width=e,this._height=t}applyScale(e,t){let r=W5.set(e,t);for(let i=0,n=this.points.length;i<n;i++){let s=this.points[i];s.position.multiply(r),s.controls[0].position.multiply(r),s.controls[1].position.multiply(r)}for(let i=0,n=this.shapeHoles.length;i<n;i++)this.shapeHoles[i].applyScale(e,t);this._update()}createPoint(e,t=0,r=Tt.generateUUID()){let i;e instanceof X?i=e:i=new X(e,t);let n=new wp(r,i);return n.roundness=this.roundness,n}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];if(i.uuid===e)return i}for(let t=0,r=this.shapeHoles.length;t<r;t++){let i=this.shapeHoles[t].getPointByUuid(e);if(i)return i}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}removePointById(e){let t=this.points.find(r=>r.uuid===e);t&&this.removePoint(t)}update(){for(let e=0,t=this.shapeHoles.length;e<t;e++)this.shapeHoles[e].update();this._update()}extractShapePointsToBuffer(e,t=12,r=!1){this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t);let i=r?this.roundedCurveDivisions:this.curveDivisions;return whe(e,r?this.roundedCurves:this.curves,t,this.autoClose),i.reduce((n,s)=>n+s,0)+1}computeCurveDivisions(e=12){return this.curveDivisions=XE(this.points,e,!1),this.roundedCurveDivisions=XE(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,t,r=12){return bhe(e,this.curves,t,r,this.autoClose).reduce((i,n)=>i+n,0)*2}extractShapePointsToFlatArray(e,t=12){return this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t),_he(e,this.roundedCurves,t,this.autoClose)}getCurveIndexFromVertexId(e,t=!1){let r=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let i=t?this.roundedCurveDivisions:this.curveDivisions,n=0;t&&this.points[0].roundedCurveCorner!==void 0&&(n=rc(this.points[0].roundedCurveCorner,this.subdivision)*.5);let s=e-n;s<0&&(s+=i.reduce((a,o)=>a+o,0));for(let a=0,o=i.length;a<o;a++){let l=i[a];if(s<r+l)return[a,(s-r+1)/l];r+=l}return[0,1]}getCurveT(e,t,r){let i=this.points[e],n=this.points[e>=this.points.length-1?0:e+1],s=this.curveDivisions,a=s[e];if(WE(i,n)){let l=i.position.distanceTo(n.position);return i.position.distanceTo(W5.set(r.x,r.y))/l}let o=0;for(let l=0;l<e;l++)o+=s[l];return(t-o)/a}dispose(){}_applyCurveForPoint(e,t){WE(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let r=this.curves[this.curves.length-1];e.curveBefore=r,t.curveAfter=r;let i=r.clone();e.roundedCurveBefore=i,t.roundedCurveAfter=i,e.roundedCurveCorner=void 0,this.roundedCurves.push(i)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let t=0,r=this.points.length;t<r;t++){let i=this.points[t];if(t===0)this.moveTo(i.position.x,i.position.y);else{let n=this.points[t-1];this._applyCurveForPoint(i,n)}}let e=this.getLastPoint();if(e!=null&&e.curveAfter&&(e.curveAfter=void 0),this.isClosed){let t=this.points[0],r=this.points[this.points.length-1];this._applyCurveForPoint(t,r)}if(this.points.length>2){let t=0;for(let r=0,i=this.points.length;r<i;r++){let n=this.points[r],s=this.points[r-1]??this.points[this.points.length-1],a=this.points[r+1]??this.points[0],o=n.roundness,l=s&&a&&mhe(s,n,a);if(!n.controlsMoved()&&o>0&&!l){let h=n.curveBefore,c=n.curveAfter;if(h===void 0||c===void 0)continue;let u=n.roundedCurveBefore,d=n.roundedCurveAfter,p=h.getLength(),f=c.getLength(),m=Math.min(o,p*.499),g=Math.min(o,f*.499),v=Math.min(m,g),y=1-v/p,x=v/f,w=h.getPointAt(y,W5),_=c.getPointAt(x,Che);this._subSplitCurve(h,u,y,w,void 0),this._subSplitCurve(c,d,x,void 0,_);let b;if(this.useCubicForRoundedCorners){let S=Mz(w,n.position,_)/2,C=Math.tan(S)*w.distanceTo(n.position),[M,A]=ghe(w,_,C,She,Mhe),T=vhe(M,A,n.position),[L,D]=yhe(T,w,_,C,Ahe,Ehe);b=new Aa(w.clone(),L.clone(),D.clone(),_.clone())}else b=new qh(w.clone(),n.position.clone(),_.clone());n.roundedCurveCorner=b,this.roundedCurves.splice(r+t,0,b),t++}}}}_subSplitCurve(e,t,r,i,n){if(e instanceof Ra)i!==void 0&&t.v2.copy(i),n!==void 0&&t.v1.copy(n);else{let s=e,a=t,o=s.getUtoTmapping(r,0),l=xhe(s.v0,s.v1,s.v2,s.v3,o);return i!==void 0&&(a.v0.set(l[0],l[1]),a.v1.set(l[2],l[3]),a.v2.set(l[4],l[5]),a.v3.set(l[6],l[7])),n!==void 0&&(a.v0.set(l[6],l[7]),a.v1.set(l[8],l[9]),a.v2.set(l[10],l[11]),a.v3.set(l[12],l[13])),a}return t}clone(){let e=new Rr(this._width,this._height);return e.points=this.points.map(t=>t.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(t=>t.clone()),e}toJSON(){return{points:this.points.reduce((e,t)=>e.concat(t.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var r;this.points=[],this.pointIDs=0;let t=e.points.length/7;for(let i=0;i<t;i++){let n=i*7,s=e.points[n+0],a=e.points[n+1],o=e.points[n+2],l=e.points[n+3],h=e.points[n+4],c=e.points[n+5],u=e.points[n+6],d=new wp(Tt.generateUUID(),new X(s,a));d.controls[0].position.set(o,l),d.controls[1].position.set(h,c),d.roundness=u,this.points.push(d)}return this.shapeHoles=(r=e.shapeHoles)!=null&&r.length?e.shapeHoles.map(i=>{let n=new Rr;return n.fromJSON(i),n}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e){let t=(i,n)=>{n instanceof Aa&&n.v3.equals(i.position)&&i.controls[0].position.copy(n.v2)},r=i=>{let n=[],s,a;for(s=0,a=i.length;s<a;s++)i[s]instanceof qh&&(i[s]=dhe(i[s]));for(s=0,a=i.length;s<a;s++){let h=i[s],c=s>0?i[s-1]:null,u;h instanceof Aa?(u=this.createPoint(h.v0),u.controls[1].position.copy(h.v1)):h instanceof Ra&&(u=this.createPoint(h.v1)),u!==void 0&&(c!==null&&t(u,c),n.push(u))}let o=i[i.length-1],l=!1;return o instanceof Aa?o.v3.equals(n[0].position)&&(n[0].controls[0].position.copy(o.v2),l=!0):o instanceof Ra&&o.v2.equals(n[0].position)&&(l=!0),this.isClosed=l,n};return this.points=r(e.curves),e instanceof p3&&(this.shapeHoles=e.holes.map(i=>{let n=new Rr;return n.fromShape(i),n})),this.update(),this}updatePoint(e,t){let r=this.getPointByUuid(e);r&&(t.position!==void 0&&r.position.fromArray(t.position),t.roundness!==void 0&&(r.roundness=t.roundness),t.areControlsDirectionsMirrored!==void 0&&(r.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(e,t){var i;let r=(i=this.getPointByUuid(e))==null?void 0:i.controls[0];r&&(t.position&&r.position.fromArray(t.position),this.needsUpdate=!0)}updateNextControl(e,t){var i;let r=(i=this.getPointByUuid(e))==null?void 0:i.controls[1];r&&(t.position&&r.position.fromArray(t.position),this.needsUpdate=!0)}},w8=Math.PI*2;function q5({x:e,y:t},r,i,n,s){return{x:e*r+n,y:t*i+s}}function The(e,t){let r=t===1.5707963267948966?.551915024494:t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),i=Math.cos(e),n=Math.sin(e),s=Math.cos(e+t),a=Math.sin(e+t);return[{x:i-n*r,y:n+i*r},{x:s+a*r,y:a-s*r},{x:s,y:a}]}function YE(e,t,r,i){let n=e*i-t*r<0?-1:1,s=Math.min(1,Math.max(-1,e*r+t*i));return n*Math.acos(s)}function Lhe(e,t,r,i,n,s,a,o,l,h){let c=Math.pow(n,2),u=Math.pow(s,2),d=Math.pow(a,2),p=Math.pow(o,2),f=c*u-c*p-u*d;f<0&&(f=0),f/=c*p+u*d,f=Math.sqrt(f)*(l===h?-1:1);let m=f*n/s*o,g=f*-s/n*a,v=m+(e+r)/2,y=g+(t+i)/2,x=(a-m)/n,w=(o-g)/s,_=(-a-m)/n,b=(-o-g)/s,S=YE(1,0,x,w),C=YE(x,w,_,b);return!h&&C>0&&(C-=w8),h&&C<0&&(C+=w8),{centerx:v,centery:y,ang1:S,ang2:C}}function Phe({px:e,py:t,cx:r,cy:i,rx:n,ry:s,largeArcFlag:a,sweepFlag:o}){let l=[];if(n===0||s===0)return[];let h=(e-r)/2,c=(t-i)/2;if(h===0&&c===0)return[];n=Math.abs(n),s=Math.abs(s);let u=Math.pow(h,2)/Math.pow(n,2)+Math.pow(c,2)/Math.pow(s,2);u>1&&(n*=Math.sqrt(u),s*=Math.sqrt(u));let d=Lhe(e,t,r,i,n,s,h,c,a,o),{ang1:p,ang2:f}=d,{centerx:m,centery:g}=d,v=Math.abs(f)/(w8/4);Math.abs(1-v)<1e-7&&(v=1);let y=Math.max(Math.ceil(v),1);f/=y;for(let x=0;x<y;x++)l.push(The(p,f)),p+=f;return l.map(x=>{let{x:w,y:_}=q5(x[0],n,s,m,g),{x:b,y:S}=q5(x[1],n,s,m,g),{x:C,y:M}=q5(x[2],n,s,m,g);return{x1:w,y1:_,x2:b,y2:S,x:C,y:M}})}var er;(function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(er||(er={}));var Jr;(function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(Jr||(Jr={}));function ut(e,t){if(!e)throw t||"Assertion Failed!"}var it=function(){function e(){}return e.vertEq=function(t,r){return t.s===r.s&&t.t===r.t},e.vertLeq=function(t,r){return t.s<r.s||t.s===r.s&&t.t<=r.t},e.transLeq=function(t,r){return t.t<r.t||t.t===r.t&&t.s<=r.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(t,r){return Math.abs(t.s-r.s)+Math.abs(t.t-r.t)},e.edgeEval=function(t,r,i){ut(e.vertLeq(t,r)&&e.vertLeq(r,i));var n=r.s-t.s,s=i.s-r.s;return n+s>0?n<s?r.t-t.t+(t.t-i.t)*(n/(n+s)):r.t-i.t+(i.t-t.t)*(s/(n+s)):0},e.edgeSign=function(t,r,i){ut(e.vertLeq(t,r)&&e.vertLeq(r,i));var n=r.s-t.s,s=i.s-r.s;return n+s>0?(r.t-i.t)*n+(r.t-t.t)*s:0},e.transEval=function(t,r,i){ut(e.transLeq(t,r)&&e.transLeq(r,i));var n=r.t-t.t,s=i.t-r.t;return n+s>0?n<s?r.s-t.s+(t.s-i.s)*(n/(n+s)):r.s-i.s+(i.s-t.s)*(s/(n+s)):0},e.transSign=function(t,r,i){ut(e.transLeq(t,r)&&e.transLeq(r,i));var n=r.t-t.t,s=i.t-r.t;return n+s>0?(r.s-i.s)*n+(r.s-t.s)*s:0},e.vertCCW=function(t,r,i){return t.s*(r.t-i.t)+r.s*(i.t-t.t)+i.s*(t.t-r.t)>=0},e.interpolate=function(t,r,i,n){return t=t<0?0:t,i=i<0?0:i,t<=i?i===0?(r+n)/2:r+(n-r)*(t/(t+i)):n+(r-n)*(i/(t+i))},e.intersect=function(t,r,i,n,s){var a,o,l;e.vertLeq(t,r)||(l=t,t=r,r=l),e.vertLeq(i,n)||(l=i,i=n,n=l),e.vertLeq(t,i)||(l=t,t=i,i=l,l=r,r=n,n=l),e.vertLeq(i,r)?e.vertLeq(r,n)?(a=e.edgeEval(t,i,r),o=e.edgeEval(i,r,n),a+o<0&&(a=-a,o=-o),s.s=e.interpolate(a,i.s,o,r.s)):(a=e.edgeSign(t,i,r),o=-e.edgeSign(t,n,r),a+o<0&&(a=-a,o=-o),s.s=e.interpolate(a,i.s,o,n.s)):s.s=(i.s+r.s)/2,e.transLeq(t,r)||(l=t,t=r,r=l),e.transLeq(i,n)||(l=i,i=n,n=l),e.transLeq(t,i)||(l=t,t=i,i=l,l=r,r=n,n=l),e.transLeq(i,r)?e.transLeq(r,n)?(a=e.transEval(t,i,r),o=e.transEval(i,r,n),a+o<0&&(a=-a,o=-o),s.t=e.interpolate(a,i.t,o,r.t)):(a=e.transSign(t,i,r),o=-e.transSign(t,n,r),a+o<0&&(a=-a,o=-o),s.t=e.interpolate(a,i.t,o,n.t)):s.t=(i.t+r.t)/2},e}(),a1=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return e}(),hv=function(){function e(t){this.side=t,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(t){this.Sym.Lface=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(t){this.Sym.Org=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(t){this.Sym.Lnext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(t){this.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(t){this.Lnext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(t){this.Sym.Onext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(t){this.Sym.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(t){this.Sym.Lnext.Sym=t},enumerable:!0,configurable:!0}),e}(),xd=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return e}(),QE=function(){function e(){var t=new xd,r=new a1,i=new hv(0),n=new hv(1);t.next=t.prev=t,t.anEdge=null,r.next=r.prev=r,i.next=i,i.Sym=n,n.next=n,n.Sym=i,this.vHead=t,this.fHead=r,this.eHead=i,this.eHeadSym=n}return e.prototype.makeEdge_=function(t){var r=new hv(0),i=new hv(1);t.Sym.side<t.side&&(t=t.Sym);var n=t.Sym.next;return i.next=n,n.Sym.next=r,r.next=t,t.Sym.next=i,r.Sym=i,r.Onext=r,r.Lnext=i,r.Org=null,r.Lface=null,r.winding=0,r.activeRegion=null,i.Sym=r,i.Onext=i,i.Lnext=r,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,r},e.prototype.splice_=function(t,r){var i=t.Onext,n=r.Onext;i.Sym.Lnext=r,n.Sym.Lnext=t,t.Onext=n,r.Onext=i},e.prototype.makeVertex_=function(t,r,i){var n=t;ut(n,"Vertex can't be null!");var s=i.prev;n.prev=s,s.next=n,n.next=i,i.prev=n,n.anEdge=r;var a=r;do a.Org=n,a=a.Onext;while(a!==r)},e.prototype.makeFace_=function(t,r,i){var n=t;ut(n,"Face can't be null");var s=i.prev;n.prev=s,s.next=n,n.next=i,i.prev=n,n.anEdge=r,n.trail=null,n.marked=!1,n.inside=i.inside;var a=r;do a.Lface=n,a=a.Lnext;while(a!==r)},e.prototype.killEdge_=function(t){t.Sym.side<t.side&&(t=t.Sym);var r=t.next,i=t.Sym.next;r.Sym.next=i,i.Sym.next=r},e.prototype.killVertex_=function(t,r){var i=t.anEdge,n=i;do n.Org=r,n=n.Onext;while(n!==i);var s=t.prev,a=t.next;a.prev=s,s.next=a},e.prototype.killFace_=function(t,r){var i=t.anEdge,n=i;do n.Lface=r,n=n.Lnext;while(n!==i);var s=t.prev,a=t.next;a.prev=s,s.next=a},e.prototype.makeEdge=function(){var t=new xd,r=new xd,i=new a1,n=this.makeEdge_(this.eHead);return this.makeVertex_(t,n,this.vHead),this.makeVertex_(r,n.Sym,this.vHead),this.makeFace_(i,n,this.fHead),n},e.prototype.splice=function(t,r){var i=!1,n=!1;if(t!==r){if(r.Org!==t.Org&&(n=!0,this.killVertex_(r.Org,t.Org)),r.Lface!==t.Lface&&(i=!0,this.killFace_(r.Lface,t.Lface)),this.splice_(r,t),!n){var s=new xd;this.makeVertex_(s,r,t.Org),t.Org.anEdge=t}if(!i){var a=new a1;this.makeFace_(a,r,t.Lface),t.Lface.anEdge=t}}},e.prototype.delete=function(t){var r=t.Sym,i=!1;if(t.Lface!==t.Rface&&(i=!0,this.killFace_(t.Lface,t.Rface)),t.Onext===t)this.killVertex_(t.Org,null);else if(t.Rface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev),!i){var n=new a1;this.makeFace_(n,t,t.Lface)}r.Onext===r?(this.killVertex_(r.Org,null),this.killFace_(r.Lface,null)):(t.Lface.anEdge=r.Oprev,r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),this.killEdge_(t)},e.prototype.addEdgeVertex=function(t){var r=this.makeEdge_(t),i=r.Sym;this.splice_(r,t.Lnext),r.Org=t.Dst;var n=new xd;return this.makeVertex_(n,i,r.Org),r.Lface=i.Lface=t.Lface,r},e.prototype.splitEdge=function(t){var r=this.addEdgeVertex(t),i=r.Sym;return this.splice_(t.Sym,t.Sym.Oprev),this.splice_(t.Sym,i),t.Dst=i.Org,i.Dst.anEdge=i.Sym,i.Rface=t.Rface,i.winding=t.winding,i.Sym.winding=t.Sym.winding,i.idx=t.idx,i.Sym.idx=t.Sym.idx,i},e.prototype.connect=function(t,r){var i=!1,n=this.makeEdge_(t),s=n.Sym;if(r.Lface!==t.Lface&&(i=!0,this.killFace_(r.Lface,t.Lface)),this.splice_(n,t.Lnext),this.splice_(s,r),n.Org=t.Dst,s.Org=r.Org,n.Lface=s.Lface=t.Lface,t.Lface.anEdge=s,!i){var a=new a1;this.makeFace_(a,n,t.Lface)}return n},e.prototype.zapFace=function(t){var r=t.anEdge,i,n,s,a,o;n=r.Lnext;do i=n,n=i.Lnext,i.Lface=null,i.Rface===null&&(i.Onext===i?this.killVertex_(i.Org,null):(i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),s=i.Sym,s.Onext===s?this.killVertex_(s.Org,null):(s.Org.anEdge=s.Onext,this.splice_(s,s.Oprev)),this.killEdge_(i));while(i!=r);a=t.prev,o=t.next,o.prev=a,a.next=o},e.prototype.countFaceVerts_=function(t){var r=t.anEdge,i=0;do i++,r=r.Lnext;while(r!==t.anEdge);return i},e.prototype.mergeConvexFaces=function(t){var r,i,n,s,a,o,l;for(r=this.fHead.next;r!==this.fHead;r=r.next)if(r.inside)for(i=r.anEdge,a=i.Org;n=i.Lnext,s=i.Sym,s&&s.Lface&&s.Lface.inside&&(o=this.countFaceVerts_(r),l=this.countFaceVerts_(s.Lface),o+l-2<=t&&it.vertCCW(i.Lprev.Org,i.Org,s.Lnext.Lnext.Org)&&it.vertCCW(s.Lprev.Org,s.Org,i.Lnext.Lnext.Org)&&(n=s.Lnext,this.delete(s),i=null,s=null)),!(i&&i.Lnext.Org===a);)i=n;return!0},e.prototype.check=function(){var t=this.fHead,r=this.vHead,i=this.eHead,n,s,a,o,l,h;for(s=t,s=t;(n=s.next)!==t;s=n){ut(n.prev===s),l=n.anEdge;do ut(l.Sym!==l),ut(l.Sym.Sym===l),ut(l.Lnext.Onext.Sym===l),ut(l.Onext.Sym.Lnext===l),ut(l.Lface===n),l=l.Lnext;while(l!==n.anEdge)}for(ut(n.prev===s&&n.anEdge===null),o=r,o=r;(a=o.next)!==r;o=a){ut(a.prev===o),l=a.anEdge;do ut(l.Sym!==l),ut(l.Sym.Sym===l),ut(l.Lnext.Onext.Sym===l),ut(l.Onext.Sym.Lnext===l),ut(l.Org===a),l=l.Onext;while(l!==a.anEdge)}for(ut(a.prev===o&&a.anEdge===null),h=i,h=i;(l=h.next)!==i;h=l)ut(l.Sym.next===h.Sym),ut(l.Sym!==l),ut(l.Sym.Sym===l),ut(l.Org!==null),ut(l.Dst!==null),ut(l.Lnext.Onext.Sym===l),ut(l.Onext.Sym.Lnext===l);ut(l.Sym.next===h.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},e}(),ZE=function(){function e(){this.handle=null}return e}(),KE=function(){function e(){this.key=null,this.node=0}return e}(),Dhe=function(){function e(t,r){this.leq=r,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=t,this.nodes=[],this.handles=[];for(var i=0;i<t+1;i++)this.nodes[i]=new ZE,this.handles[i]=new KE;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(t){var r=this.nodes,i=this.handles,n,s,a;for(n=r[t].handle;;){if(a=t<<1,a<this.size&&this.leq(i[r[a+1].handle].key,i[r[a].handle].key)&&++a,ut(a<=this.max),s=r[a].handle,a>this.size||this.leq(i[n].key,i[s].key)){r[t].handle=n,i[n].node=t;break}r[t].handle=s,i[s].node=t,t=a}},e.prototype.floatUp_=function(t){var r=this.nodes,i=this.handles,n,s,a;for(n=r[t].handle;;){if(a=t>>1,s=r[a].handle,a===0||this.leq(i[s].key,i[n].key)){r[t].handle=n,i[n].node=t;break}r[t].handle=s,i[s].node=t,t=a}},e.prototype.init=function(){for(var t=this.size;t>=1;--t)this.floatDown_(t);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(t){var r,i;if(r=++this.size,r*2>this.max){this.max*=2;var n,s;for(s=this.nodes.length,this.nodes.length=this.max+1,n=s;n<this.nodes.length;n++)this.nodes[n]=new ZE;for(s=this.handles.length,this.handles.length=this.max+1,n=s;n<this.handles.length;n++)this.handles[n]=new KE}return this.freeList===0?i=r:(i=this.freeList,this.freeList=this.handles[i].node),this.nodes[r].handle=i,this.handles[i].node=r,this.handles[i].key=t,this.initialized&&this.floatUp_(r),i},e.prototype.extractMin=function(){var t=this.nodes,r=this.handles,i=t[1].handle,n=r[i].key;return this.size>0&&(t[1].handle=t[this.size].handle,r[t[1].handle].node=1,r[i].key=null,r[i].node=this.freeList,this.freeList=i,--this.size,this.size>0&&this.floatDown_(1)),n},e.prototype.delete=function(t){var r=this.nodes,i=this.handles,n;ut(t>=1&&t<=this.max&&i[t].key!==null),n=i[t].node,r[n].handle=r[this.size].handle,i[r[n].handle].node=n,--this.size,n<=this.size&&(n<=1||this.leq(i[r[n>>1].handle].key,i[r[n].handle].key)?this.floatDown_(n):this.floatUp_(n)),i[t].key=null,i[t].node=this.freeList,this.freeList=t},e}(),X5=function(){function e(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return e}(),$E=function(){function e(){this.key=null,this.next=null,this.prev=null}return e}(),Ohe=function(){function e(t,r){this.frame=t,this.leq=r,this.head=new $E,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(t){return this.insertBefore(this.head,t)},e.prototype.search=function(t){var r=this.head;do r=r.next;while(r.key!==null&&!this.leq(this.frame,t,r.key));return r},e.prototype.insertBefore=function(t,r){do t=t.prev;while(t.key!==null&&!this.leq(this.frame,t.key,r));var i=new $E;return i.key=r,i.next=t.next,t.next.prev=i,i.prev=t,t.next=i,i},e.prototype.delete=function(t){t.next.prev=t.prev,t.prev.next=t.next},e}(),Ihe=function(){function e(){}return e.regionBelow=function(t){return t.nodeUp.prev.key},e.regionAbove=function(t){return t.nodeUp.next.key},e.debugEvent=function(t){},e.addWinding=function(t,r){t.winding+=r.winding,t.Sym.winding+=r.Sym.winding},e.edgeLeq=function(t,r,i){var n=t.event,s=r.eUp,a=i.eUp;if(s.Dst===n)return a.Dst===n?it.vertLeq(s.Org,a.Org)?it.edgeSign(a.Dst,s.Org,a.Org)<=0:it.edgeSign(s.Dst,a.Org,s.Org)>=0:it.edgeSign(a.Dst,n,a.Org)<=0;if(a.Dst===n)return it.edgeSign(s.Dst,n,s.Org)>=0;var o=it.edgeEval(s.Dst,n,s.Org),l=it.edgeEval(a.Dst,n,a.Org);return o>=l},e.deleteRegion=function(t,r){r.fixUpperEdge&&ut(r.eUp.winding===0),r.eUp.activeRegion=null,t.dict.delete(r.nodeUp)},e.fixUpperEdge=function(t,r,i){ut(r.fixUpperEdge),t.mesh.delete(r.eUp),r.fixUpperEdge=!1,r.eUp=i,i.activeRegion=r},e.topLeftRegion=function(t,r){var i=r.eUp.Org,n;do r=e.regionAbove(r);while(r.eUp.Org===i);if(r.fixUpperEdge){if(n=t.mesh.connect(e.regionBelow(r).eUp.Sym,r.eUp.Lnext),n===null)return null;e.fixUpperEdge(t,r,n),r=e.regionAbove(r)}return r},e.topRightRegion=function(t){var r=t.eUp.Dst;do t=e.regionAbove(t);while(t.eUp.Dst===r);return t},e.addRegionBelow=function(t,r,i){var n=new X5;return n.eUp=i,n.nodeUp=t.dict.insertBefore(r.nodeUp,n),n.fixUpperEdge=!1,n.sentinel=!1,n.dirty=!1,i.activeRegion=n,n},e.isWindingInside=function(t,r){switch(t.windingRule){case er.ODD:return(r&1)!==0;case er.NONZERO:return r!==0;case er.POSITIVE:return r>0;case er.NEGATIVE:return r<0;case er.ABS_GEQ_TWO:return r>=2||r<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,r){r.windingNumber=e.regionAbove(r).windingNumber+r.eUp.winding,r.inside=e.isWindingInside(t,r.windingNumber)},e.finishRegion=function(t,r){var i=r.eUp,n=i.Lface;n.inside=r.inside,n.anEdge=i,e.deleteRegion(t,r)},e.finishLeftRegions=function(t,r,i){for(var n,s=null,a=r,o=r.eUp;a!==i;){if(a.fixUpperEdge=!1,s=e.regionBelow(a),n=s.eUp,n.Org!=o.Org){if(!s.fixUpperEdge){e.finishRegion(t,a);break}n=t.mesh.connect(o.Lprev,n.Sym),e.fixUpperEdge(t,s,n)}o.Onext!==n&&(t.mesh.splice(n.Oprev,n),t.mesh.splice(o,n)),e.finishRegion(t,a),o=s.eUp,a=s}return o},e.addRightEdges=function(t,r,i,n,s,a){var o,l,h,c,u=!0;h=i;do ut(it.vertLeq(h.Org,h.Dst)),e.addRegionBelow(t,r,h.Sym),h=h.Onext;while(h!==n);for(s===null&&(s=e.regionBelow(r).eUp.Rprev),l=r,c=s;o=e.regionBelow(l),h=o.eUp.Sym,h.Org===c.Org;)h.Onext!==c&&(t.mesh.splice(h.Oprev,h),t.mesh.splice(c.Oprev,h)),o.windingNumber=l.windingNumber-h.winding,o.inside=e.isWindingInside(t,o.windingNumber),l.dirty=!0,!u&&e.checkForRightSplice(t,l)&&(e.addWinding(h,c),e.deleteRegion(t,l),t.mesh.delete(c)),u=!1,l=o,c=h;l.dirty=!0,ut(l.windingNumber-h.winding===o.windingNumber),a&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(t,r,i){t.mesh.splice(r,i)},e.vertexWeights=function(t,r,i){var n=it.vertL1dist(r,t),s=it.vertL1dist(i,t),a=.5*s/(n+s),o=.5*n/(n+s);t.coords[0]+=a*r.coords[0]+o*i.coords[0],t.coords[1]+=a*r.coords[1]+o*i.coords[1],t.coords[2]+=a*r.coords[2]+o*i.coords[2]},e.getIntersectData=function(t,r,i,n,s,a){r.coords[0]=r.coords[1]=r.coords[2]=0,r.idx=-1,e.vertexWeights(r,i,n),e.vertexWeights(r,s,a)},e.checkForRightSplice=function(t,r){var i=e.regionBelow(r),n=r.eUp,s=i.eUp;if(it.vertLeq(n.Org,s.Org)){if(it.edgeSign(s.Dst,n.Org,s.Org)>0)return!1;it.vertEq(n.Org,s.Org)?n.Org!==s.Org&&(t.pq.delete(n.Org.pqHandle),e.spliceMergeVertices(t,s.Oprev,n)):(t.mesh.splitEdge(s.Sym),t.mesh.splice(n,s.Oprev),r.dirty=i.dirty=!0)}else{if(it.edgeSign(n.Dst,s.Org,n.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(n.Sym),t.mesh.splice(s.Oprev,n)}return!0},e.checkForLeftSplice=function(t,r){var i=e.regionBelow(r),n=r.eUp,s=i.eUp,a;if(ut(!it.vertEq(n.Dst,s.Dst)),it.vertLeq(n.Dst,s.Dst)){if(it.edgeSign(n.Dst,s.Dst,n.Org)<0)return!1;e.regionAbove(r).dirty=r.dirty=!0,a=t.mesh.splitEdge(n),t.mesh.splice(s.Sym,a),a.Lface.inside=r.inside}else{if(it.edgeSign(s.Dst,n.Dst,s.Org)>0)return!1;r.dirty=i.dirty=!0,a=t.mesh.splitEdge(s),t.mesh.splice(n.Lnext,s.Sym),a.Rface.inside=r.inside}return!0},e.checkForIntersect=function(t,r){var i=e.regionBelow(r),n=r.eUp,s=i.eUp,a=n.Org,o=s.Org,l=n.Dst,h=s.Dst,c,u,d=new xd,p,f;if(ut(!it.vertEq(h,l)),ut(it.edgeSign(l,t.event,a)<=0),ut(it.edgeSign(h,t.event,o)>=0),ut(a!==t.event&&o!==t.event),ut(!r.fixUpperEdge&&!i.fixUpperEdge),a===o||(c=Math.min(a.t,l.t),u=Math.max(o.t,h.t),c>u))return!1;if(it.vertLeq(a,o)){if(it.edgeSign(h,a,o)>0)return!1}else if(it.edgeSign(l,o,a)<0)return!1;return e.debugEvent(t),it.intersect(l,a,h,o,d),ut(Math.min(a.t,l.t)<=d.t),ut(d.t<=Math.max(o.t,h.t)),ut(Math.min(h.s,l.s)<=d.s),ut(d.s<=Math.max(o.s,a.s)),it.vertLeq(d,t.event)&&(d.s=t.event.s,d.t=t.event.t),p=it.vertLeq(a,o)?a:o,it.vertLeq(p,d)&&(d.s=p.s,d.t=p.t),it.vertEq(d,a)||it.vertEq(d,o)?(e.checkForRightSplice(t,r),!1):!it.vertEq(l,t.event)&&it.edgeSign(l,t.event,d)>=0||!it.vertEq(h,t.event)&&it.edgeSign(h,t.event,d)<=0?h===t.event?(t.mesh.splitEdge(n.Sym),t.mesh.splice(s.Sym,n),r=e.topLeftRegion(t,r),n=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),i),e.addRightEdges(t,r,n.Oprev,n,n,!0),!0):l===t.event?(t.mesh.splitEdge(s.Sym),t.mesh.splice(n.Lnext,s.Oprev),i=r,r=e.topRightRegion(r),f=e.regionBelow(r).eUp.Rprev,i.eUp=s.Oprev,s=e.finishLeftRegions(t,i,null),e.addRightEdges(t,r,s.Onext,n.Rprev,f,!0),!0):(it.edgeSign(l,t.event,d)>=0&&(e.regionAbove(r).dirty=r.dirty=!0,t.mesh.splitEdge(n.Sym),n.Org.s=t.event.s,n.Org.t=t.event.t),it.edgeSign(h,t.event,d)<=0&&(r.dirty=i.dirty=!0,t.mesh.splitEdge(s.Sym),s.Org.s=t.event.s,s.Org.t=t.event.t),!1):(t.mesh.splitEdge(n.Sym),t.mesh.splitEdge(s.Sym),t.mesh.splice(s.Oprev,n),n.Org.s=d.s,n.Org.t=d.t,n.Org.pqHandle=t.pq.insert(n.Org),e.getIntersectData(t,n.Org,a,l,o,h),e.regionAbove(r).dirty=r.dirty=i.dirty=!0,!1)},e.walkDirtyRegions=function(t,r){for(var i=e.regionBelow(r),n,s;;){for(;i.dirty;)r=i,i=e.regionBelow(i);if(!r.dirty&&(i=r,r=e.regionAbove(r),r===null||!r.dirty))return;if(r.dirty=!1,n=r.eUp,s=i.eUp,n.Dst!==s.Dst&&e.checkForLeftSplice(t,r)&&(i.fixUpperEdge?(e.deleteRegion(t,i),t.mesh.delete(s),i=e.regionBelow(r),s=i.eUp):r.fixUpperEdge&&(e.deleteRegion(t,r),t.mesh.delete(n),r=e.regionAbove(i),n=r.eUp)),n.Org!==s.Org)if(n.Dst!==s.Dst&&!r.fixUpperEdge&&!i.fixUpperEdge&&(n.Dst===t.event||s.Dst===t.event)){if(e.checkForIntersect(t,r))return}else e.checkForRightSplice(t,r);n.Org===s.Org&&n.Dst===s.Dst&&(e.addWinding(s,n),e.deleteRegion(t,r),t.mesh.delete(n),r=e.regionAbove(i))}},e.connectRightVertex=function(t,r,i){var n,s=i.Onext,a=e.regionBelow(r),o=r.eUp,l=a.eUp,h=!1;if(o.Dst!==l.Dst&&e.checkForIntersect(t,r),it.vertEq(o.Org,t.event)&&(t.mesh.splice(s.Oprev,o),r=e.topLeftRegion(t,r),s=e.regionBelow(r).eUp,e.finishLeftRegions(t,e.regionBelow(r),a),h=!0),it.vertEq(l.Org,t.event)&&(t.mesh.splice(i,l.Oprev),i=e.finishLeftRegions(t,a,null),h=!0),h){e.addRightEdges(t,r,i.Onext,s,s,!0);return}it.vertLeq(l.Org,o.Org)?n=l.Oprev:n=o,n=t.mesh.connect(i.Lprev,n),e.addRightEdges(t,r,n,n.Onext,n.Onext,!1),n.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,r)},e.connectLeftDegenerate=function(t,r,i){var n,s,a,o,l;if(n=r.eUp,it.vertEq(n.Org,i)){ut(!1),e.spliceMergeVertices(t,n,i.anEdge);return}if(!it.vertEq(n.Dst,i)){t.mesh.splitEdge(n.Sym),r.fixUpperEdge&&(t.mesh.delete(n.Onext),r.fixUpperEdge=!1),t.mesh.splice(i.anEdge,n),e.sweepEvent(t,i);return}ut(!1),r=e.topRightRegion(r),l=e.regionBelow(r),a=l.eUp.Sym,s=o=a.Onext,l.fixUpperEdge&&(ut(s!==a),e.deleteRegion(t,l),t.mesh.delete(a),a=s.Oprev),t.mesh.splice(i.anEdge,a),it.edgeGoesLeft(s)||(s=null),e.addRightEdges(t,r,a.Onext,o,s,!0)},e.connectLeftVertex=function(t,r){var i,n,s,a,o,l,h=new X5;if(h.eUp=r.anEdge.Sym,i=t.dict.search(h).key,n=e.regionBelow(i),!!n){if(a=i.eUp,o=n.eUp,it.edgeSign(a.Dst,r,a.Org)===0){e.connectLeftDegenerate(t,i,r);return}if(s=it.vertLeq(o.Dst,a.Dst)?i:n,i.inside||s.fixUpperEdge){if(s===i)l=t.mesh.connect(r.anEdge.Sym,a.Lnext);else{var c=t.mesh.connect(o.Dnext,r.anEdge);l=c.Sym}s.fixUpperEdge?e.fixUpperEdge(t,s,l):e.computeWinding(t,e.addRegionBelow(t,i,l)),e.sweepEvent(t,r)}else e.addRightEdges(t,i,r.anEdge,r.anEdge,null,!0)}},e.sweepEvent=function(t,r){t.event=r,e.debugEvent(t);for(var i=r.anEdge;i.activeRegion===null;)if(i=i.Onext,i===r.anEdge){e.connectLeftVertex(t,r);return}var n=e.topLeftRegion(t,i.activeRegion);ut(n!==null);var s=e.regionBelow(n),a=s.eUp,o=e.finishLeftRegions(t,s,null);o.Onext===a?e.connectRightVertex(t,n,o):e.addRightEdges(t,n,o.Onext,a,a,!0)},e.addSentinel=function(t,r,i,n){var s=new X5,a=t.mesh.makeEdge();a.Org.s=i,a.Org.t=n,a.Dst.s=r,a.Dst.t=n,t.event=a.Dst,s.eUp=a,s.windingNumber=0,s.inside=!1,s.fixUpperEdge=!1,s.sentinel=!0,s.dirty=!1,s.nodeUp=t.dict.insert(s)},e.initEdgeDict=function(t){t.dict=new Ohe(t,e.edgeLeq);var r=t.bmax[0]-t.bmin[0],i=t.bmax[1]-t.bmin[1],n=t.bmin[0]-r,s=t.bmax[0]+r,a=t.bmin[1]-i,o=t.bmax[1]+i;e.addSentinel(t,n,s,a),e.addSentinel(t,n,s,o)},e.doneEdgeDict=function(t){for(var r,i=0;(r=t.dict.min().key)!==null;)r.sentinel||(ut(r.fixUpperEdge),ut(++i===1)),ut(r.windingNumber===0),e.deleteRegion(t,r)},e.removeDegenerateEdges=function(t){var r,i,n,s=t.mesh.eHead;for(r=s.next;r!==s;r=i)i=r.next,n=r.Lnext,it.vertEq(r.Org,r.Dst)&&r.Lnext.Lnext!==r&&(e.spliceMergeVertices(t,n,r),t.mesh.delete(r),r=n,n=r.Lnext),n.Lnext===r&&(n!==r&&((n===i||n===i.Sym)&&(i=i.next),t.mesh.delete(n)),(r===i||r===i.Sym)&&(i=i.next),t.mesh.delete(r))},e.initPriorityQ=function(t){var r,i,n,s=0;for(n=t.mesh.vHead,i=n.next;i!==n;i=i.next)s++;for(s+=8,r=t.pq=new Dhe(s,it.vertLeq),n=t.mesh.vHead,i=n.next;i!==n;i=i.next)i.pqHandle=r.insert(i);return i!==n?!1:(r.init(),!0)},e.donePriorityQ=function(t){t.pq=null},e.removeDegenerateFaces=function(t,r){var i,n,s;for(i=r.fHead.next;i!==r.fHead;i=n)n=i.next,s=i.anEdge,ut(s.Lnext!==s),s.Lnext.Lnext===s&&(e.addWinding(s.Onext,s),t.mesh.delete(s));return!0},e.computeInterior=function(t,r){r===void 0&&(r=!0);var i,n;if(e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);(i=t.pq.extractMin())!==null;){for(;n=t.pq.min(),!(n===null||!it.vertEq(n,i));)n=t.pq.extractMin(),e.spliceMergeVertices(t,i.anEdge,n.anEdge);e.sweepEvent(t,i)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),e.removeDegenerateFaces(t,t.mesh)?(r&&t.mesh.check(),!0):!1},e}(),Rhe=function(){function e(){this.mesh=new QE,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=er.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]},e.prototype.normalize_=function(t){var r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(!r)throw"Zero-size vector!";r=Math.sqrt(r),t[0]/=r,t[1]/=r,t[2]/=r},e.prototype.longAxis_=function(t){var r=0;return Math.abs(t[1])>Math.abs(t[0])&&(r=1),Math.abs(t[2])>Math.abs(t[r])&&(r=2),r},e.prototype.computeNormal_=function(t){var r,i,n,s,a,o,l=[0,0,0],h=[0,0,0],c=[0,0,0],u=[0,0,0],d=[0,0,0],p=[null,null,null],f=[null,null,null],m=this.mesh.vHead;r=m.next;for(var g=0;g<3;++g)s=r.coords[g],h[g]=s,f[g]=r,l[g]=s,p[g]=r;for(r=m.next;r!==m;r=r.next)for(var v=0;v<3;++v)s=r.coords[v],s<h[v]&&(h[v]=s,f[v]=r),s>l[v]&&(l[v]=s,p[v]=r);var y=0;if(l[1]-h[1]>l[0]-h[0]&&(y=1),l[2]-h[2]>l[y]-h[y]&&(y=2),h[y]>=l[y]){t[0]=0,t[1]=0,t[2]=1;return}for(o=0,i=f[y],n=p[y],c[0]=i.coords[0]-n.coords[0],c[1]=i.coords[1]-n.coords[1],c[2]=i.coords[2]-n.coords[2],r=m.next;r!==m;r=r.next)u[0]=r.coords[0]-n.coords[0],u[1]=r.coords[1]-n.coords[1],u[2]=r.coords[2]-n.coords[2],d[0]=c[1]*u[2]-c[2]*u[1],d[1]=c[2]*u[0]-c[0]*u[2],d[2]=c[0]*u[1]-c[1]*u[0],a=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],a>o&&(o=a,t[0]=d[0],t[1]=d[1],t[2]=d[2]);o<=0&&(t[0]=t[1]=t[2]=0,t[this.longAxis_(c)]=1)},e.prototype.checkOrientation_=function(){for(var t=this.mesh.fHead,r,i=this.mesh.vHead,n,s=0,a=t.next;a!==t;a=a.next)if(n=a.anEdge,!(n.winding<=0))do s+=(n.Org.s-n.Dst.s)*(n.Org.t+n.Dst.t),n=n.Lnext;while(n!==a.anEdge);if(s<0){for(r=i.next;r!==i;r=r.next)r.t=-r.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var t=this.mesh.vHead,r=[0,0,0],i,n,s=!1;r[0]=this.normal[0],r[1]=this.normal[1],r[2]=this.normal[2],!r[0]&&!r[1]&&!r[2]&&(this.computeNormal_(r),s=!0),i=this.sUnit,n=this.tUnit;var a=this.longAxis_(r);i[a]=0,i[(a+1)%3]=1,i[(a+2)%3]=0,n[a]=0,n[(a+1)%3]=0,n[(a+2)%3]=r[a]>0?1:-1;for(var o=t.next;o!==t;o=o.next)o.s=this.dot_(o.coords,i),o.t=this.dot_(o.coords,n);s&&this.checkOrientation_();for(var l=!0,h=t.next;h!==t;h=h.next)l?(this.bmin[0]=this.bmax[0]=h.s,this.bmin[1]=this.bmax[1]=h.t,l=!1):(h.s<this.bmin[0]&&(this.bmin[0]=h.s),h.s>this.bmax[0]&&(this.bmax[0]=h.s),h.t<this.bmin[1]&&(this.bmin[1]=h.t),h.t>this.bmax[1]&&(this.bmax[1]=h.t))},e.prototype.addWinding_=function(t,r){t.winding+=r.winding,t.Sym.winding+=r.Sym.winding},e.prototype.tessellateMonoRegion_=function(t,r){var i,n;if(i=r.anEdge,!(i.Lnext!==i&&i.Lnext.Lnext!==i))throw"Mono region invalid";for(;it.vertLeq(i.Dst,i.Org);i=i.Lprev);for(;it.vertLeq(i.Org,i.Dst);i=i.Lnext);n=i.Lprev;for(var s=void 0;i.Lnext!==n;)if(it.vertLeq(i.Dst,n.Org)){for(;n.Lnext!==i&&(it.edgeGoesLeft(n.Lnext)||it.edgeSign(n.Org,n.Dst,n.Lnext.Dst)<=0);)s=t.connect(n.Lnext,n),n=s.Sym;n=n.Lprev}else{for(;n.Lnext!==i&&(it.edgeGoesRight(i.Lprev)||it.edgeSign(i.Dst,i.Org,i.Lprev.Org)>=0);)s=t.connect(i,i.Lprev),i=s.Sym;i=i.Lnext}if(n.Lnext===i)throw"Mono region invalid";for(;n.Lnext.Lnext!==i;)s=t.connect(n.Lnext,n),n=s.Sym;return!0},e.prototype.tessellateInterior_=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r)if(r=i.next,i.inside&&!this.tessellateMonoRegion_(t,i))return!1;return!0},e.prototype.discardExterior_=function(t){for(var r,i=t.fHead.next;i!==t.fHead;i=r)r=i.next,i.inside||t.zapFace(i)},e.prototype.setWindingNumber_=function(t,r,i){for(var n,s=t.eHead.next;s!==t.eHead;s=n)n=s.next,s.Rface.inside!==s.Lface.inside?s.winding=s.Lface.inside?r:-r:i?t.delete(s):s.winding=0},e.prototype.getNeighbourFace_=function(t){return!t.Rface||!t.Rface.inside?-1:t.Rface.n},e.prototype.outputPolymesh_=function(t,r,i,n){var s,a=0,o=0,l;i>3&&t.mergeConvexFaces(i);for(var h=t.vHead.next;h!==t.vHead;h=h.next)h.n=-1;for(var c=t.fHead.next;c!==t.fHead;c=c.next)if(c.n=-1,!!c.inside){s=c.anEdge,l=0;do{var h=s.Org;h.n===-1&&(h.n=o,o++),l++,s=s.Lnext}while(s!==c.anEdge);if(l>i)throw"Face vertex greater that support polygon";c.n=a,++a}this.elementCount=a,r===Jr.CONNECTED_POLYGONS&&(a*=2),this.elements=[],this.elements.length=a*i,this.vertexCount=o,this.vertices=[],this.vertices.length=o*n,this.vertexIndices=[],this.vertexIndices.length=o;for(var h=t.vHead.next;h!==t.vHead;h=h.next)if(h.n!==-1){var u=h.n*n;this.vertices[u+0]=h.coords[0],this.vertices[u+1]=h.coords[1],n>2&&(this.vertices[u+2]=h.coords[2]),this.vertexIndices[h.n]=h.idx}for(var d=0,c=t.fHead.next;c!==t.fHead;c=c.next)if(c.inside){s=c.anEdge,l=0;do{var h=s.Org;this.elements[d++]=h.n,l++,s=s.Lnext}while(s!==c.anEdge);for(var p=l;p<i;++p)this.elements[d++]=-1;if(r===Jr.CONNECTED_POLYGONS){s=c.anEdge;do this.elements[d++]=this.getNeighbourFace_(s),s=s.Lnext;while(s!==c.anEdge);for(var f=l;f<i;++f)this.elements[d++]=-1}}},e.prototype.outputContours_=function(t,r){var i,n,s=0,a=0;this.vertexCount=0,this.elementCount=0;for(var o=t.fHead.next;o!==t.fHead;o=o.next)if(o.inside){n=i=o.anEdge;do this.vertexCount++,i=i.Lnext;while(i!==n);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*r,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,h=0,c=0;s=0;for(var o=t.fHead.next;o!==t.fHead;o=o.next)if(o.inside){a=0,n=i=o.anEdge;do this.vertices[l++]=i.Org.coords[0],this.vertices[l++]=i.Org.coords[1],r>2&&(this.vertices[l++]=i.Org.coords[2]),this.vertexIndices[h++]=this.vertexIdCallback?this.vertexIdCallback(i):i.Org.idx,a++,i=i.Lnext;while(i!==n);this.elements[c++]=s,this.elements[c++]=a,s+=a}},e.prototype.addContour=function(t,r){this.mesh===null&&(this.mesh=new QE),t<2&&(t=2),t>3&&(t=3);for(var i=null,n=0;n<r.length;n+=t)i===null?(i=this.mesh.makeEdge(),this.mesh.splice(i,i.Sym)):(this.mesh.splitEdge(i),i=i.Lnext),i.Org.coords[0]=r[n+0],i.Org.coords[1]=r[n+1],t>2?i.Org.coords[2]=r[n+2]:i.Org.coords[2]=0,i.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(i),i.winding=1,i.Sym.winding=-1},e.prototype.tesselate=function(t,r,i,n,s,a){if(t===void 0&&(t=er.ODD),r===void 0&&(r=Jr.POLYGONS),a===void 0&&(a=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,s&&(this.normal[0]=s[0],this.normal[1]=s[1],this.normal[2]=s[2]),this.windingRule=t,n<2&&(n=2),n>3&&(n=3),!this.mesh)return!1;this.projectPolygon_(),Ihe.computeInterior(this,a);var o=this.mesh;return r===Jr.BOUNDARY_CONTOURS?this.setWindingNumber_(o,1,!0):this.tessellateInterior_(o),a&&o.check(),r===Jr.BOUNDARY_CONTOURS?this.outputContours_(o,n):this.outputPolymesh_(o,r,i,n),!0},e}();function bh(e){var t=e.windingRule,r=t===void 0?er.ODD:t,i=e.elementType,n=i===void 0?Jr.POLYGONS:i,s=e.polySize,a=s===void 0?3:s,o=e.vertexSize,l=o===void 0?2:o,h=e.normal,c=h===void 0?[0,0,1]:h,u=e.contours,d=u===void 0?[]:u,p=e.strict,f=p===void 0?!0:p,m=e.debug,g=m===void 0?!1:m;if(!d&&f)throw new Error("Contours can't be empty");if(d){var v=new Rhe;e.edgeCreateCallback&&(v.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(v.vertexIdCallback=e.vertexIdCallback);for(var y=0;y<d.length;y++)v.addContour(l||2,d[y]);return v.tesselate(r,n,a,l,c,f),{vertices:v.vertices,vertexIndices:v.vertexIndices,vertexCount:v.vertexCount,elements:v.elements,elementCount:v.elementCount,mesh:g?v.mesh:void 0}}}er.ODD;er.NONZERO;er.POSITIVE;er.NEGATIVE;er.ABS_GEQ_TWO;Jr.POLYGONS;Jr.CONNECTED_POLYGONS;Jr.BOUNDARY_CONTOURS;var b8=class{constructor(e=256,t=!1){this.capacity=e,this.size=0,this.debug=t,this.debug&&console.log(`allocating with cap ${e}`);let r=e*b8.eSize;this.buffer=new ArrayBuffer(r);let i=Float32Array.BYTES_PER_ELEMENT,n=0;this.positions=new Float32Array(this.buffer,n*i,3*e),n+=3*e,this.normals=new Float32Array(this.buffer,n*i,3*e),n+=3*e,this.uvs=new Float32Array(this.buffer,n*i,2*e)}realloc(e,t=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug&&console.log(`resizing from ${this.capacity} → ${e}`);let r=e*b8.eSize,i=new ArrayBuffer(r),n=Float32Array.BYTES_PER_ELEMENT,s=0,a=new Float32Array(i,s*n,3*e);s+=3*e;let o=new Float32Array(i,s*n,3*e);s+=3*e;let l=new Float32Array(i,s*n,2*e);t?(a.set(this.positions.subarray(0,this.size*3)),o.set(this.normals.subarray(0,this.size*3)),l.set(this.uvs.subarray(0,this.size*2))):(a.set(this.positions),o.set(this.normals),l.set(this.uvs)),this.buffer=i,this.positions=a,this.normals=o,this.uvs=l,this.capacity=e}get(e=1){let t=this.size+e;if(t>this.capacity){let i=this.capacity;for(;t>i;)i*=2;this.realloc(i)}let r=this.size;return this.size=t,r}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} → ${this.size}`),this.realloc(this.size,!0)}},Az=b8;Az.eSize=(3+3+2)*Float32Array.BYTES_PER_ELEMENT;var Bhe=hf(hW()),Lb={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},Ez={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},Tz={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},Y5=(e,t)=>([r,i])=>(i<r&&(i+=t),(e>=r?e:e+t)<=i),Pb=class extends dt{constructor(e,t,r=0,i=12,n=3,s=er.ODD,a=!1){super(),this.forPathBevel=a,this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,this._curveSegments=i,this._bevelSegmentsInput=n;let o=this._shape.extractShapePointsToFlatArray([],i),l=this._shape.shapeHoles.map(M=>{let A=M.extractShapePointsToFlatArray([],i),T=[];for(let L=A.length-1;L>=1;L-=2){let D=A[L-1],O=A[L-0];T.push(D,O)}return T}),h=[],c=[];for(let M=0;M<o.length;M+=2)c.push([o[M],o[M+1]]);h.push(c);for(let M=0;M<l.length;M++){let A=l[M],T=[];for(let L=0;L<A.length;L+=2)T.push([A[L],A[L+1]]);h.push(T)}let u=h[0].length?(0,Bhe.default)(h).distance:r;r<=0?(this._bevel=0,this._bevelSegments=0):(this._bevel=Math.min(r,u,t/2),this._bevelSegments=Math.floor(n));let d;try{d=bh({windingRule:s,elementType:Jr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[o]})}catch{d=Lb}let p;try{p=bh({windingRule:er.ODD,elementType:Jr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...l]})}catch{p=Ez}if(!d)throw new Error("error generating geometry");let f=d.elementCount;if(p){d.elementCount+=p.elementCount;for(let M=0;M<p.elements.length;M++){let A=p.elements[M],T=M%2===0?d.vertexCount:0;d.elements.push(A+T)}for(let M=0;M<p.vertexIndices.length;M++){let A=p.vertexIndices[M],T=d.vertexCount;d.vertexIndices.push(A+T)}for(let M=0;M<p.vertices.length;M++){let A=p.vertices[M];d.vertices.push(A)}}let m=1/0,g=-1/0,v=1/0,y=-1/0;for(let M=0,A=d.vertexCount;M<A;M++){let T=M*2,L=d.vertices[T+0],D=d.vertices[T+1];L<m&&(m=L),L>g&&(g=L),D<v&&(v=D),D>y&&(y=D)}this._minX=m,this._minY=v,this._width=g-m,this._height=y-v,this._buffer=new Az(this._computeBufferEstimatedSize(d));let x=[],w=[];for(let M=d.elementCount-1;M>=0;M--){let A=M>=f,T=M*2,L=d.elements[T+0],D=d.elements[T+1],O=L+D,z={start:L,count:D,normals:[],continuous:[],concave:[]},q=L,N=O-1,I=L+1,W=this._shape.roundedCurves.length;do{let U=q-L,Y=d.vertices[N*2+0],H=d.vertices[N*2+1],ie=d.vertices[q*2+0],J=d.vertices[q*2+1],ee=d.vertices[I*2+0],ne=d.vertices[I*2+1],he=ie-Y,ge=J-H,ce=Math.sqrt(he*he+ge*ge);he/=ce,ge/=ce;let Le=ie-ee,_e=J-ne,ze=Math.sqrt(Le*Le+_e*_e);Le/=ze,_e/=ze,z.normals[U*2+0]=-_e,z.normals[U*2+1]=Le,z.concave[U]=he*_e-ge*Le>0;let K=d.vertexIndices[q];if(Array.isArray(K))z.continuous[U]=!1;else{let[Ce,Me]=this._shape.getCurveIndexFromVertexId(K-1,!0);if(Me>0&&Me<1)z.continuous[U]=!0;else{let Ge=Me===1?Ce+1:Ce-1;Ge=(Ge+W)%W;let ke=Me===1?0:1,F=this._shape.roundedCurves[Ce].getTangent(Me),B=this._shape.roundedCurves[Ge].getTangent(ke);z.continuous[U]=F.dot(B)>.95}}A&&(z.normals[U*2+0]*=-1,z.normals[U*2+1]*=-1),[N,q,I]=[q,I,I+1],I>=O&&(I-=D)}while(I!==L+1);let P=[];P.push({bevelI:0,angle:0,size:0,boundary:{vertices:d.vertices.slice(L*2,O*2),vertexCount:D,vertexIndices:new Array(D).fill(!0).map((U,Y)=>[Y,Y]),elements:[0,D],elementCount:1,mesh:null},reverseMap:[],insetPoints:d.vertices.slice(L*2,O*2)});let V=0;for(let U=1;U<=this._bevelSegments;U++){let Y=U/this._bevelSegments*Math.PI/2,H=(1-Math.cos(Y))*this._bevel,ie=[],J=[],ee=0;for(let he=0;he<D;he++){let ge=he*2,ce=(he-1+D)%D*2,Le=d.vertices[z.start*2+ge+0],_e=d.vertices[z.start*2+ge+1],ze=-z.normals[ce+0]*H,K=-z.normals[ce+1]*H,Ce=-z.normals[ge+0]*H,Me=-z.normals[ge+1]*H;if(z.concave[he]||!z.concave[he]&&A){let Ge=Math.atan2(K,ze),ke=Math.atan2(Me,Ce);ke>Ge&&(ke-=Math.PI*2);let F=ke-Ge;if(z.continuous[he]||A){let B=Ge+F/2,le=Math.cos(B)*H,xe=Math.sin(B)*H;ie[2*ee+0]=Le+le*(A?-1:1),ie[2*ee+1]=_e+xe*(A?-1:1),J[ee]=he,ee++}else{let B=Math.max(1,Math.floor(i/4*Math.abs(F)/Math.PI));for(let le=0;le<=B;le++){let xe=Ge+F*(le/B),ye=Math.cos(xe)*H,Ee=Math.sin(xe)*H;ie[2*ee+0]=Le+ye,ie[2*ee+1]=_e+Ee,J[ee]=he,ee++}}}else ie[2*ee+0]=Le+ze,ie[2*ee+1]=_e+K,J[ee]=he,ee++,ie[2*ee+0]=Le,ie[2*ee+1]=_e,J[ee]=he,ee++,ie[2*ee+0]=Le+Ce,ie[2*ee+1]=_e+Me,J[ee]=he,ee++}let ne=bh({windingRule:er.POSITIVE,elementType:Jr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[ie],edgeCreateCallback:he=>{let ge=he.Org.idx,ce=J[ge],Le=J[(ge+1)%J.length];he.idx=[ce,Le],he.Sym.idx=[Le,ce]},vertexIdCallback:he=>{let ge=he.Lprev.idx;return[ge?ge[1]:0,he.idx?he.idx[0]:0]}});if(!ne)throw console.log("Error"),new Error(`error generating bevel geometry for ${U}'th loop`);if(!ne.vertexCount){let he=(U-1)/this._bevelSegments*Math.PI/2;V=(1-Math.sin(he))*this._bevel;break}for(let he=0;he<ne.vertexIndices.length;he++){let[ge,ce]=ne.vertexIndices[he];if(ge===ce)continue;let Le=ce;ce<ge&&(Le+=D);for(let _e=ge;_e<Le;_e++){let ze=_e%D,K=(_e+1)%D;if(!z.continuous[ze]||!z.continuous[K]){ne.vertexIndices[he]=[ge,ze],ne.vertexIndices.splice(he+1,0,[K,ce]),ne.vertices.splice((he+1)*2,0,ne.vertices[he*2],ne.vertices[he*2+1]);break}}}P.push({bevelI:U,angle:Y,size:H,boundary:ne,reverseMap:J,insetPoints:ie})}let G=(U,Y,H)=>{let ie=0,J=U.boundary.vertexIndices.length;for(;ie<J&&H(U.boundary.vertexIndices[Y]);)Y=(Y+1)%J,ie++;return ie},Q=x.length;for(let U=1;U<P.length;U++){let Y=P[U-1],H=P[U],ie=Y.boundary.vertexIndices.length,J=H.boundary.vertexIndices.length;if(!ie||!J)break;let ee=z.concave.length,ne=0,he=Y5(ne,D);for(;!Y.boundary.vertexIndices.filter(he).length||!H.boundary.vertexIndices.filter(he).length;)ne++,he=Y5(ne,D);let ge=Y.boundary.vertexIndices.findIndex(he),ce=H.boundary.vertexIndices.findIndex(he);do ge=(ge+1)%ie;while(he(Y.boundary.vertexIndices[ge]));do ce=(ce+1)%J;while(he(H.boundary.vertexIndices[ce]));ne=(ne+1)%D;let Le=ne,_e=0,ze=this._buildBevelVert(z,Y,(ge-1+ie)%ie,void 0,_e),K=this._buildBevelVert(z,H,(ce-1+J)%J,void 0,_e),Ce=ze,Me=K,Ge,ke,F=!1;do{_e=(ne||ee)/ee,he=Y5(ne,D);let B=G(Y,ge,he),le=G(H,ce,he),xe=F;if(F=!1,B&&!le){for(let ye=0;ye<B;ye++)Ge=this._buildBevelVert(z,Y,(ge+ye)%ie,ye/(B-1),_e),x.push(Ce.topN,Ge.topP,Me.topN),a===!1&&x.push(Ge.bottomP,Ce.bottomN,Me.bottomN),Ce=Ge;F=!0}else if(!B&&le)for(let ye=0;ye<le;ye++)ke=this._buildBevelVert(z,H,(ce+ye)%J,ye/(le-1),_e),x.push(Me.topN,Ce.topP,ke.topP),a===!1&&x.push(Ce.bottomP,Me.bottomN,ke.bottomP),Me=ke;else if(B&&le)if(Ge=this._buildBevelVert(z,Y,ge,0,_e),ke=this._buildBevelVert(z,H,ce,0,_e),xe?(x.push(Ce.topN,ke.topP,Me.topN),x.push(Ce.topN,Ge.topP,ke.topP),a===!1&&(x.push(ke.bottomP,Ce.bottomN,Me.bottomN),x.push(ke.bottomP,Ge.bottomP,Ce.bottomN))):(x.push(Me.topN,Ce.topN,Ge.topP),x.push(Me.topN,Ge.topP,ke.topP),a===!1&&(x.push(Ge.bottomP,Ce.bottomN,Me.bottomN),x.push(Ge.bottomP,Me.bottomN,ke.bottomP))),Ce=Ge,Me=ke,B===le)for(let ye=1;ye<B;ye++)Ge=this._buildBevelVert(z,Y,(ge+ye)%ie,ye/(B-1),_e),ke=this._buildBevelVert(z,H,(ce+ye)%J,ye/(le-1),_e),x.push(Ce.topN,Ge.topP,Me.topN),x.push(Me.topN,Ge.topP,ke.topP),a===!1&&(x.push(Ge.bottomP,Ce.bottomN,Me.bottomN),x.push(Ge.bottomP,Me.bottomN,ke.bottomP)),Ce=Ge,Me=ke;else if(B>le){let ye=B/le,Ee=0;for(let Ue=1;Ue<B;Ue++)Ge=this._buildBevelVert(z,Y,(ge+Ue)%ie,Ue/(B-1),_e),x.push(Ce.topN,Ge.topP,Me.topN),a===!1&&x.push(Ge.bottomP,Ce.bottomN,Me.bottomN),Ce=Ge,Ue>(Ee+1)*ye&&(Ee++,ke=this._buildBevelVert(z,H,(ce+Ee)%J,Ee/(le-1),_e),x.push(Me.topN,Ge.topP,ke.topP),a===!1&&x.push(Ge.bottomP,Me.bottomN,ke.bottomP),Me=ke)}else{let ye=le/B,Ee=0;for(let Ue=1;Ue<le;Ue++)ke=this._buildBevelVert(z,H,(ce+Ue)%J,Ue/(le-1),_e),x.push(Me.topN,Ge.topP,ke.topP),a===!1&&x.push(Ge.bottomP,Me.bottomN,ke.bottomP),Me=ke,Ue>(Ee+1)*ye&&(Ee++,Ge=this._buildBevelVert(z,Y,(ge+Ee)%ie,Ee/(B-1),_e),x.push(Ce.topN,Ge.topP,Me.topN),a===!1&&x.push(Ge.bottomP,Ce.bottomN,Me.bottomN),Ce=Ge)}ge=(ge+B)%ie,ce=(ce+le)%J,ne=(ne+1)%ee}while(ne!==Le)}if(a===!1&&this._depth>this._bevel*2&&this._buildWall(P,z,x),A){let U=[];for(let Y=x.length-1;Y>=Q+2;Y-=3){let H=x[Y-2],ie=x[Y-1],J=x[Y-0];U.push(J,ie,H)}x.splice(Q,x.length-Q,...U)}if(A){let U=[];for(let Y=P[P.length-1].boundary.vertices.length-1;Y>=1;Y-=2){let H=P[P.length-1].boundary.vertices[Y-1],ie=P[P.length-1].boundary.vertices[Y-0];U.push(H,ie)}w.push(U)}if(!A){let U=P[P.length-1],Y;try{Y=bh({windingRule:P.length>1?er.POSITIVE:er.ODD,elementType:Jr.POLYGONS,vertexSize:2,strict:!0,contours:[U.insetPoints,...w]})}catch{Y=Tz}if(!Y)throw new Error("Error generating geometry for surface");l.length===0&&this._bevel<u&&Object.assign(this,{useNgonForTopBottomFaceDuringBake:!0});for(let H=0;H<Y.elementCount*3;H+=3){let ie=this._buildSurfaceVert(Y,Y.elements[H+0],V),J=this._buildSurfaceVert(Y,Y.elements[H+1],V),ee=this._buildSurfaceVert(Y,Y.elements[H+2],V);x.push(ie.top,J.top,ee.top),a===!1&&x.push(ee.bottom,J.bottom,ie.bottom)}}this.vertexCache={}}this._buffer.shrink();let _=new pt(Uint32Array.from(x),1),b=new pt(this._buffer.positions,3),S=new pt(this._buffer.normals,3),C=new pt(this._buffer.uvs,2);b.needsUpdate=!0,S.needsUpdate=!0,C.needsUpdate=!0,_.needsUpdate=!0,this.setAttribute("position",b),this.setAttribute("normal",S),this.setAttribute("uv",C),this.setIndex(_)}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,r){let i=e[0];for(let n=0,s=i.boundary.vertexCount;n<s;n++){let a=this._buildBevelVert(t,i,n),o=this._buildBevelVert(t,i,(n+1)%s);r.push(o.topP,a.topN,a.bottomN),r.push(o.topP,a.bottomN,o.bottomP)}}_buildSurfaceVert(e,t,r){let i=t.toString();if(i in this.vertexCache)return this.vertexCache[i];let n=e.vertices[t*2+0],s=e.vertices[t*2+1],a=(n-this._minX)/this._width,o=(s-this._minY)/this._height;this.forPathBevel&&(o=1);let l=this._buffer.get(this.forPathBevel?1:2),h=l*3,c=l*2,u={top:l+0,bottom:l+1};return this._buffer.positions[h+0]=n,this._buffer.positions[h+1]=s,this._buffer.positions[h+2]=this.forPathBevel?this._bevel:this._depth-r,this._buffer.normals[h+0]=0,this._buffer.normals[h+1]=0,this._buffer.normals[h+2]=1,this._buffer.uvs[c+0]=a,this._buffer.uvs[c+1]=o,this.forPathBevel===!1&&(this._buffer.positions[h+3]=n,this._buffer.positions[h+4]=s,this._buffer.positions[h+5]=r,this._buffer.normals[h+3]=0,this._buffer.normals[h+4]=0,this._buffer.normals[h+5]=-1,this._buffer.uvs[c+2]=a,this._buffer.uvs[c+3]=o),this.vertexCache[i]=u,u}_buildBevelVert(e,t,r,i=1,n){let s=`${t.bevelI}:${r}`;if(s in this.vertexCache&&n!==0&&n!==1&&(!n||n===this.vertexCache[s].pathBevelUCoord))return this.vertexCache[s];let[a,o]=t.boundary.vertexIndices[r],l,h,c,u;a!==o?(h=a,l=o,u=!1,c=e.continuous[h]&&e.continuous[l]):(l=a,h=(l-1+e.count)%e.count,u=e.concave[l]&&t.bevelI>0,c=e.continuous[l]||u);let d=Math.cos(t.angle),p=Math.sin(t.angle),f=r*2,m=l*2,g=h*2,v=t.boundary.vertices[f+0],y=t.boundary.vertices[f+1],x=(1-p)*this._bevel,w=(v-this._minX)/this._width,_=(y-this._minY)/this._height;this.forPathBevel&&(n!==void 0&&(w=n),_=1);let b=e.normals[m+0],S=e.normals[m+1],C=e.normals[g+0],M=e.normals[g+1];if(u){let O=C-b,z=M-S;b=b+O*(1-i),S=S+z*(1-i);let q=Math.sqrt(b*b+S*S);b/=q,S/=q}let A=this.forPathBevel?this._buffer.get(c?1:2):this._buffer.get(c?2:4),T=A*3,L=A*2,D={i:r,fi:l,topP:A+0,topN:A+0,bottomP:A+1,bottomN:A+1,pathBevelUCoord:n};return this._buffer.positions[T+0]=v,this._buffer.positions[T+1]=y,this._buffer.positions[T+2]=(this.forPathBevel?this._bevel:this._depth)-x,this._buffer.normals[T+0]=b*d,this._buffer.normals[T+1]=S*d,this._buffer.normals[T+2]=p,this._buffer.uvs[L+0]=w,this._buffer.uvs[L+1]=_,this.forPathBevel===!1&&(this._buffer.positions[T+3]=v,this._buffer.positions[T+4]=y,this._buffer.positions[T+5]=x,this._buffer.normals[T+3]=b*d,this._buffer.normals[T+4]=S*d,this._buffer.normals[T+5]=-p,this._buffer.uvs[L+2]=_,this._buffer.uvs[L+3]=w),c||(this.forPathBevel?(A+=1,T+=3,L+=2):(A+=2,T+=6,L+=4),D.topP=A+0,D.bottomP=A+1,this._buffer.positions[T+0]=v,this._buffer.positions[T+1]=y,this._buffer.positions[T+2]=(this.forPathBevel?this._bevel:this._depth)-x,this._buffer.normals[T+0]=C*d,this._buffer.normals[T+1]=M*d,this._buffer.normals[T+2]=p,this._buffer.uvs[L+0]=w,this._buffer.uvs[L+1]=_,this.forPathBevel===!1&&(this._buffer.positions[T+3]=v,this._buffer.positions[T+4]=y,this._buffer.positions[T+5]=x,this._buffer.normals[T+3]=C*d,this._buffer.normals[T+4]=M*d,this._buffer.normals[T+5]=-p,this._buffer.uvs[L+2]=_,this._buffer.uvs[L+3]=w)),this.vertexCache[s]=D,D}clone(){let e=new Pb(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=Iy(this.userData),e}},Lz=class extends dt{constructor(e,t=12,r={}){super(),this.type="ShapeGeometry",this.windingRule=er.ODD,this.elementType=Jr.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=t,this._triangulationOptions=Object.assign({windingRule:er.ODD,elementType:Jr.POLYGONS,polySize:3,vertexSize:2,strict:!0},r);let i=this._shape.extractShapePointsToFlatArray([],this._curveSegments),n=this._shape.shapeHoles.map(d=>d.extractShapePointsToFlatArray([],this._curveSegments)),s,a=!0,o=!0,l,h;for(let d=0,p=i.length/2;d<p;d++){let f=d*2,m=i[f+0],g=i[f+1];if(l!==void 0&&m!==l&&(a=!1),h!==void 0&&g!==h&&(o=!1),l=m,h=g,!a&&!o)break}if(!a&&!o)try{s=bh({contours:[i,...n],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch{s=Lb}let c=(s==null?void 0:s.vertexCount)??1,u=(s==null?void 0:s.elementCount)??1;if(this._positionAttribute=new pt(new Float32Array(c*3),3),this._normalAttribute=new pt(new Float32Array(c*3),3),this._uvAttribute=new pt(new Float32Array(c*2),2),this._indexAttribute=new pt(new Uint32Array(u*3),1),s){let d=1/0,p=-1/0,f=1/0,m=-1/0;for(let y=0,x=c;y<x;y++){let w=y*2,_=s.vertices[w+0],b=s.vertices[w+1];_<d&&(d=_),_>p&&(p=_),b<f&&(f=b),b>m&&(m=b)}let g=p-d,v=m-f;for(let y=0,x=c;y<x;y++){let w=y*2,_=s.vertices[w+0],b=s.vertices[w+1],S=(_-d)/g,C=(b-f)/v;this._positionAttribute.setXYZ(y,_,b,0),this._normalAttribute.setXYZ(y,0,0,1),this._uvAttribute.setXY(y,S,C)}for(let y=0,x=u;y<x;y++){let w=y*3,_=s.elements[w+0],b=s.elements[w+1],S=s.elements[w+2];this._indexAttribute.setX(w+0,_),this._indexAttribute.setX(w+1,b),this._indexAttribute.setX(w+2,S)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((s==null?void 0:s.elementCount)??1)*3)}clone(){let e=new Lz(this._shape,this._curveSegments);return e.userData=Iy(this.userData),e}},Pz=class extends Pb{constructor(e,t,r=0,i=12,n=3,s=er.ODD){super(e,t,r,i,n,s),this.type="ShapeGeometry"}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,r){let i=e[0];for(let n=0,s=i.boundary.vertexCount;n<s;n++){let a=this._buildBevelVert(t,i,n),o=this._buildBevelVert(t,i,(n+1)%s);r.push(o.topP,a.topN,a.bottomN),r.push(o.topP,a.bottomN,o.bottomP)}}clone(){let e=new Pz(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=Iy(this.userData),e}},Lc=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var h,c;let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:er.ODD},e.parameters),i=Math.abs(r.width),n=Math.abs(r.height??r.width),s=Math.abs(r.depth??0),a=e.shape??(t==null?void 0:t.shape),o=(a==null?void 0:a.roundness)??r.roundness;a!==void 0&&(a instanceof Rr?(a.width!==i||a.height!==n)&&a.applySize(i,n):a=new Rr(i,n).fromJSON(a),((h=e.parameters)==null?void 0:h.roundness)!==void 0&&((c=e.parameters)==null?void 0:c.roundness)>0&&a.update());let l=a??new Rr(i,n);return{parameters:Object.assign(r,{width:i,height:n,depth:s,roundness:o}),shape:l}}static build(e){let{depth:t,extrudeBevelSize:r,extrudeBevelSegments:i,subdivisions:n,roundness:s,windingRule:a}=e.parameters;e.shape.roundness=s;let o;return t<=0?o=new Lz(e.shape,n,{windingRule:a}):o=new Pz(e.shape,t,r,n,i,a),Object.assign(o,{userData:{...e,type:"VectorGeometry"}})}},Dz=Math.PI*2,Db=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof Rr?e.shape:new Rr,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r,spikes:i,angle:n,innerRadius:s,depth:a,extrudeBevelSize:o,extrudeBevelSegments:l}=e.parameters,h=e.shape,c=t*.5,u=r*.5,d=zhe(h,c,u,n*Math.PI/180,i,s);h.isClosed=!0,h.update();let p=Lc.create({shape:h,parameters:{subdivisions:d,depth:a,extrudeBevelSize:o,extrudeBevelSegments:l}});return Object.assign(p,{userData:{...e,type:"EllipseGeometry"}})}};function zhe(e,t,r,i,n,s){if(i>=Dz)return n>30||n%4===0?(Nhe(e,t,r,s),Math.round(n/4)):JE(e,i,n,t,r,s);i=Math.max(i,.001);let a={x:0,y:r},o=i+Math.PI*.5,l={x:Math.cos(o)*t,y:Math.sin(o)*r},h=Phe({px:a.x,py:a.y,cx:l.x,cy:l.y,rx:t,ry:r,largeArcFlag:i>Math.PI,sweepFlag:!0});return n>30||n%h.length===0?khe(e,a.x,a.y,h,n,t,r,s):JE(e,i,n,t,r,s)}function khe(e,t,r,i,n,s,a,o){let l=Math.round(n/i.length);e.addPoint(bp(t,r));for(let h=0,c=i.length;h<c;h++){let u=i[h],d=e.points[h],p=bp(u.x,u.y);d.controls[1].position.set(u.x1,u.y1),p.controls[0].position.set(u.x2,u.y2),e.addPoint(p)}return o>0?Oz(e,s,a,o):e.addPoint(bp(0,0)),l}function JE(e,t,r,i,n,s){let a=-t/r;for(let o=0;o<=r;o++){let l=a*o,h=Math.sin(l)*i,c=Math.cos(l)*n;e.addPoint(bp(h,c))}return t<Dz?s>0?Oz(e,i,n,s):e.addPoint(bp(0,0)):(e.removePoint(e.points[e.points.length-1]),s>0&&Iz(e,i,n,s)),1}function Nhe(e,t,r,i=0,n=0,s=0){let a=.5522847498,o=t*a,l=r*a;e.addPoint(uv(n-t,s,n-t,s-l,n-t,s+l)),e.addPoint(uv(n,s+r,n-o,s+r,n+o,s+r)),e.addPoint(uv(n+t,s,n+t,s+l,n+t,s-l)),e.addPoint(uv(n,s-r,n+o,s-r,n-o,s-r)),i>0&&Iz(e,t,r,i)}function bp(e,t){return new wp(Tt.generateUUID(),new X(e,t))}function uv(e,t,r,i,n,s){let a=bp(e,t);return a.controls[0].position.set(r,i),a.controls[1].position.set(n,s),a}function Oz(e,t,r,i){Rz(e,t,r,i).forEach(n=>e.addPoint(n))}function Iz(e,t,r,i){let n=Rz(e,t,r,i),s=new Rr;n.forEach(a=>s.addPoint(a)),s.isClosed=!0,e.shapeHoles.push(s)}function Rz(e,t,r,i){let n=i*t/100,s=n*(Math.abs(r)/Math.abs(t)),a=new X(n/t,s/r),o=e.points.map(l=>{let h=l.clone();return h.uuid=Tt.generateUUID(),h}).reverse();return o.forEach(l=>{l.position.multiply(a);let h=l.controls[0].position.clone().multiply(a),c=l.controls[1].position.clone().multiply(a);l.controls[0].position.copy(c),l.controls[1].position.copy(h)}),o}var Fhe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),i=Math.abs(r.width),n=Math.abs(r.height??i),s=Math.abs(r.depth??i),a=Math.abs(Math.min(i,s))/2;return{parameters:Object.assign(r,{width:i,height:n,depth:s,radius:a,segments:Math.round(r.segments),pathSegments:Math.round(r.pathSegments),cornerSegments:Math.round(r.cornerSegments)})}}static build(e){let{width:t,height:r,depth:i,radius:n,revolutions:s,segments:a,pathRadius:o,pathType:l,pathSegments:h,cornerRadius:c,cornerSegments:u}=e.parameters,d=new Bz(!1,t,r,i,n,s,a,o,l,h,c,u);return Object.assign(d,{userData:{...e,type:"HelixGeometry"}})}},Q5=new dp([0,0,0],1),Bz=class extends dt{constructor(e=!0,t=1,r=1,i=1,n=1,s=1,a=1,o=1,l=1,h=1,c=1,u=1){if(super(),s===0)return;let d=e&&s===1;d&&(u=0),c>100&&(c=100),c===0&&(u=0);let p=()=>new E,f=new E,m=p(),g=p(),v=p(),y,x,w,_,b,S,C,M,A=p(),T=p(),L=p(),D=p(),O=p(),z=p(),q=p(),N=p(),I=r-2*o+.001,W=I/s,P=Math.ceil(a*s),V=P+1,G=I/P,Q=-I/2,U=h+1,Y=2*Math.PI/h,H=Math.PI/2/u,ie=.01,J=Math.min((1-c/100)*o,o-ie),ee=o-J,ne=0,he=2,ge=u*he+he,ce=U*ge/he,Le=ce+U*V,_e=U*(V+ge),[ze,K,Ce]=[3,3,2].map(fe=>Array(_e*fe).fill(0)),Me=[],Ge=n-o;function ke(fe,je){let Fe=Math.PI/2;S=je*G,M=2*Math.PI*(S%W)/W+Fe,S+=Q,C=Math.sin(M)*Ge,b=Math.cos(M)*Ge,e?fe.set(b,C,S):fe.set(b,S,C)}ke(f,-1e-10),ke(m,0),A.copy(f),ke(f,1);let F=f.distanceTo(m),B=d?0:ee+J,le=F*P+2*B,xe=J,ye=le-B;for(let fe=0;fe<=P;fe++){ke(g,fe),N.subVectors(g,A).normalize(),A.copy(g),z.copy(g).setComponent(+e+1,0).normalize(),q.crossVectors(N,z).normalize();let je=fe===0,Fe=fe===P,Qe=je?3*Math.PI/2:H,$=je?xe:ye,te=je?U:Le,ve=je?0:_e-U,Te=N.clone().multiplyScalar(je?-ee:ee).add(g),He=N.clone().multiplyScalar(je?-1:1).normalize();for(let j=0;j<U;j++){let se=j*Y;if(T.addVectors(f.copy(z).multiplyScalar(o*Math.cos(se)),m.copy(q).multiplyScalar(o*Math.sin(se))),L.copy(T).normalize(),je||Fe){d||(ne=ve+j,[0,1,2].forEach(ae=>{ze[ne*3+ae]=Te.getComponent(ae),K[ne*3+ae]=He.getComponent(ae)}),Ce[ne*2]=+Fe,Ce[ne*2+1]=j/h),m.copy(L).multiplyScalar(J),v.addVectors(g,m);for(let ae=0;ae<u;ae++){let me=ae*H+Qe;D.addVectors(f.copy(N).multiplyScalar(ee*Math.sin(me)),m.copy(L).multiplyScalar(ee*Math.cos(me))),O.copy(D).normalize(),m.addVectors(v,D),D.normalize(),ne=te+ae*U+j,[0,1,2].forEach(tt=>{ze[ne*3+tt]=m.getComponent(tt),K[ne*3+tt]=O.getComponent(tt)});let Oe=+je+Math.sin(me);Ce[ne*2]=($+ee*Oe)/le,Ce[ne*2+1]=j/h}}m.addVectors(g,T),ne=ce+fe*U+j,[0,1,2].forEach(ae=>{ze[ne*3+ae]=m.getComponent(ae),K[ne*3+ae]=L.getComponent(ae)}),Ce[ne*2]=(B+fe*F)/le,Ce[ne*2+1]=j/h}}let Ee=V+2*u+he,[Ue,Ne]=[+d,Ee-1];for(let fe=Ue;fe<=Ne-1;fe++){let je=d&&fe===Ne-1;for(let Fe=0;Fe<U-1;Fe++)y=fe*U+Fe,x=y+1,w=(je?Fe:y)+U,_=(je?Fe+1:x)+U,fe===0?Me.push(x,_,w):fe===Ee-2?Me.push(y,x,w):Me.push(y,x,w,x,_,w)}this.setIndex(Me),this.setAttribute("position",new Ke(ze,3)),this.setAttribute("normal",new Ke(K,3)),this.setAttribute("uv",new Ke(Ce,2))}getClosedTorusIndicesForBooleanOrSubdiv(){let e=this.userData.parameters,t=Math.ceil(e.tubularSegments),r=e.radialSegments+1,i=Array.from(this.getIndex().array),n,s,a,o,l=6*(t-1)*e.radialSegments,h=t,c=h===t;for(let u=0;u<e.radialSegments;u++)n=h*r+u,s=n+1,a=(c?u:n)+r,o=(c?u+1:s)+r,i[l++]=n,i[l++]=s,i[l++]=a,i[l++]=s,i[l++]=o,i[l++]=a;return i.length=l,Q5.array=i,Q5.count=i.length,Q5}},Uhe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,detail:n,corner:s,cornerSides:a}=e.parameters,o=n===0&&s!==0?new zz(t*.5,s,a):new jR(t*.5,n);return o.scale(1,r/t,i/t),Object.assign(o,{userData:{...e,type:"IcosahedronGeometry"}})}},zz=class extends Ab{constructor(e=1,t=.2,r=4){let i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a="IcosahedronGeometry";super(n,s,a,e,t,r),this.type=a}static fromJSON(e){return new zz(e.radius,e.corner,e.cornerSides)}},jhe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i;(((i=e.parameters)==null?void 0:i.points)??[]).forEach(n=>{Array.isArray(n)&&(n.x=n[0],n.y=n[1])});let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{points:t,segments:r,verticalSegments:i}=e.parameters,n=new p3;n.moveTo(t[0].x,t[0].y),n.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);let s=new RR(n.extractPoints(i).shape,r);return s.rotateZ(Math.PI),Object.assign(s,{userData:{...e,type:"LatheGeometry"}})}},Xa=new Ae,Z5=new ir,cv=new E,G3=class extends Ni{constructor(){super(),this.uuid=Tt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let t=new Ci().getNormalMatrix(e);for(let r=0,i=this.vertices.length;r<i;r++)this.vertices[r].applyMatrix4(e);for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r];n.normal.applyMatrix3(t).normalize();for(let s=0,a=n.vertexNormals.length;s<a;s++)n.vertexNormals[s].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return Xa.makeRotationX(e),this.applyMatrix4(Xa),this}rotateY(e){return Xa.makeRotationY(e),this.applyMatrix4(Xa),this}rotateZ(e){return Xa.makeRotationZ(e),this.applyMatrix4(Xa),this}translate(e,t,r){return Xa.makeTranslation(e,t,r),this.applyMatrix4(Xa),this}scale(e,t,r){return Xa.makeScale(e,t,r),this.applyMatrix4(Xa),this}lookAt(e){return Z5.lookAt(e),Z5.updateMatrix(),this.applyMatrix4(Z5.matrix),this}fromBufferGeometry(e){let t=this,r=e.index!==null?e.index:void 0,i=e.attributes;if(i.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let n=i.position,s=i.normal,a=i.color,o=i.uv,l=i.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let u=0;u<n.count;u++)t.vertices.push(new E().fromBufferAttribute(n,u)),a!==void 0&&t.colors.push(new lt().fromBufferAttribute(a,u));function h(u,d,p,f){let m=a===void 0?[]:[t.colors[u].clone(),t.colors[d].clone(),t.colors[p].clone()],g=s===void 0?[]:[new E().fromBufferAttribute(s,u),new E().fromBufferAttribute(s,d),new E().fromBufferAttribute(s,p)],v=new _8(u,d,p,g,m,f);t.faces.push(v),o!==void 0&&t.faceVertexUvs[0].push([new X().fromBufferAttribute(o,u),new X().fromBufferAttribute(o,d),new X().fromBufferAttribute(o,p)]),l!==void 0&&t.faceVertexUvs[1].push([new X().fromBufferAttribute(l,u),new X().fromBufferAttribute(l,d),new X().fromBufferAttribute(l,p)])}let c=e.groups;if(c.length>0)for(let u=0;u<c.length;u++){let d=c[u],p=d.start,f=d.count;for(let m=p,g=p+f;m<g;m+=3)r!==void 0?h(r.getX(m),r.getX(m+1),r.getX(m+2),d.materialIndex):h(m,m+1,m+2,d.materialIndex)}else if(r!==void 0)for(let u=0;u<r.count;u+=3)h(r.getX(u),r.getX(u+1),r.getX(u+2));else for(let u=0;u<n.count;u+=3)h(u,u+1,u+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(cv).negate(),this.translate(cv.x,cv.y,cv.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,t=this.boundingSphere.radius,r=t===0?1:1/t,i=new Ae;return i.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix4(i),this}computeFaceNormals(){let e=new E,t=new E;for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r],s=this.vertices[n.a],a=this.vertices[n.b],o=this.vertices[n.c];e.subVectors(o,a),t.subVectors(s,a),e.cross(t),e.normalize(),n.normal.copy(e)}}computeVertexNormals(e=!0){let t=new Array(this.vertices.length);for(let r=0,i=this.vertices.length;r<i;r++)t[r]=new E;if(e){let r=new E,i=new E;for(let n=0,s=this.faces.length;n<s;n++){let a=this.faces[n],o=this.vertices[a.a],l=this.vertices[a.b],h=this.vertices[a.c];r.subVectors(h,l),i.subVectors(o,l),r.cross(i),t[a.a].add(r),t[a.b].add(r),t[a.c].add(r)}}else{this.computeFaceNormals();for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r];t[n.a].add(n.normal),t[n.b].add(n.normal),t[n.c].add(n.normal)}}for(let r=0,i=this.vertices.length;r<i;r++)t[r].normalize();for(let r=0,i=this.faces.length;r<i;r++){let n=this.faces[r],s=n.vertexNormals;s.length===3?(s[0].copy(t[n.a]),s[1].copy(t[n.b]),s[2].copy(t[n.c])):(s[0]=t[n.a].clone(),s[1]=t[n.b].clone(),s[2]=t[n.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){let r=this.faces[e],i=r.vertexNormals;i.length===3?(i[0].copy(r.normal),i[1].copy(r.normal),i[2].copy(r.normal)):(i[0]=r.normal.clone(),i[1]=r.normal.clone(),i[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,r=this.faces.length;t<r;t++){let i=this.faces[t];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(let n=0,s=i.vertexNormals.length;n<s;n++)i.__originalVertexNormals[n]?i.__originalVertexNormals[n].copy(i.vertexNormals[n]):i.__originalVertexNormals[n]=i.vertexNormals[n].clone()}let e=new G3;e.faces=this.faces;for(let t=0,r=this.morphTargets.length;t<r;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];let n=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(let a=0,o=this.faces.length;a<o;a++){let l=new E,h={a:new E,b:new E,c:new E};n.push(l),s.push(h)}}let i=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let n=0,s=this.faces.length;n<s;n++){let a=this.faces[n],o=i.faceNormals[n],l=i.vertexNormals[n];o.copy(a.normal),l.a.copy(a.vertexNormals[0]),l.b.copy(a.vertexNormals[1]),l.c.copy(a.vertexNormals[2])}}for(let t=0,r=this.faces.length;t<r;t++){let i=this.faces[t];i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new qr),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new _s),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,r=0){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let i,n=this.vertices.length,s=this.vertices,a=e.vertices,o=this.faces,l=e.faces,h=this.colors,c=e.colors;t!==void 0&&(i=new Ci().getNormalMatrix(t));for(let u=0,d=a.length;u<d;u++){let p=a[u].clone();t!==void 0&&p.applyMatrix4(t),s.push(p)}for(let u=0,d=c.length;u<d;u++)h.push(c[u].clone());for(let u=0,d=l.length;u<d;u++){let p=l[u],f,m,g=p.vertexNormals,v=p.vertexColors,y=new _8(p.a+n,p.b+n,p.c+n);y.normal.copy(p.normal),i!==void 0&&y.normal.applyMatrix3(i).normalize();for(let x=0,w=g.length;x<w;x++)f=g[x].clone(),i!==void 0&&f.applyMatrix3(i).normalize(),y.vertexNormals.push(f);y.color.copy(p.color);for(let x=0,w=v.length;x<w;x++)m=v[x],y.vertexColors.push(m.clone());y.materialIndex=p.materialIndex+r,o.push(y)}for(let u=0,d=e.faceVertexUvs.length;u<d;u++){let p=e.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let f=0,m=p.length;f<m;f++){let g=p[f],v=[];for(let y=0,x=g.length;y<x;y++)v.push(g[y].clone());this.faceVertexUvs[u].push(v)}}}mergeMesh(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)}mergeVertices(e=4){let t={},r=[],i=[],n=Math.pow(10,e);for(let o=0,l=this.vertices.length;o<l;o++){let h=this.vertices[o],c=Math.round(h.x*n)+"_"+Math.round(h.y*n)+"_"+Math.round(h.z*n);t[c]===void 0?(t[c]=o,r.push(this.vertices[o]),i[o]=r.length-1):i[o]=i[t[c]]}let s=[];for(let o=0,l=this.faces.length;o<l;o++){let h=this.faces[o];h.a=i[h.a],h.b=i[h.b],h.c=i[h.c];let c=[h.a,h.b,h.c];for(let u=0;u<3;u++)if(c[u]===c[(u+1)%3]){s.push(o);break}}for(let o=s.length-1;o>=0;o--){let l=s[o];this.faces.splice(l,1);for(let h=0,c=this.faceVertexUvs.length;h<c;h++)this.faceVertexUvs[h].splice(l,1)}let a=this.vertices.length-r.length;return this.vertices=r,a}setFromPoints(e){this.vertices=[];for(let t=0,r=e.length;t<r;t++){let i=e[t];this.vertices.push(new E(i.x,i.y,i.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,t=e.length;for(let o=0;o<t;o++)e[o]._id=o;function r(o,l){return o.materialIndex-l.materialIndex}e.sort(r);let i=this.faceVertexUvs[0],n=this.faceVertexUvs[1],s,a;i&&i.length===t&&(s=[]),n&&n.length===t&&(a=[]);for(let o=0;o<t;o++){let l=e[o]._id;s&&s.push(i[l]),a&&a.push(n[l])}s&&(this.faceVertexUvs[0]=s),a&&(this.faceVertexUvs[1]=a)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){let p=this.parameters;for(let f in p)p[f]!==void 0&&(e[f]=p[f]);return e}let t=[];for(let p=0;p<this.vertices.length;p++){let f=this.vertices[p];t.push(f.x,f.y,f.z)}let r=[],i=[],n={},s=[],a={},o=[],l={};for(let p=0;p<this.faces.length;p++){let f=this.faces[p],m=!0,g=!1,v=this.faceVertexUvs[0][p]!==void 0,y=f.normal.length()>0,x=f.vertexNormals.length>0,w=f.color.r!==1||f.color.g!==1||f.color.b!==1,_=f.vertexColors.length>0,b=0;if(b=h(b,0,0),b=h(b,1,m),b=h(b,2,g),b=h(b,3,v),b=h(b,4,y),b=h(b,5,x),b=h(b,6,w),b=h(b,7,_),r.push(b),r.push(f.a,f.b,f.c),r.push(f.materialIndex),v){let S=this.faceVertexUvs[0][p];r.push(d(S[0]),d(S[1]),d(S[2]))}if(y&&r.push(c(f.normal)),x){let S=f.vertexNormals;r.push(c(S[0]),c(S[1]),c(S[2]))}if(w&&r.push(u(f.color)),_){let S=f.vertexColors;r.push(u(S[0]),u(S[1]),u(S[2]))}}function h(p,f,m){return m?p|1<<f:p&~(1<<f)}function c(p){let f=p.x.toString()+p.y.toString()+p.z.toString();return n[f]!==void 0||(n[f]=i.length/3,i.push(p.x,p.y,p.z)),n[f]}function u(p){let f=p.r.toString()+p.g.toString()+p.b.toString();return a[f]!==void 0||(a[f]=s.length,s.push(p.getHex())),a[f]}function d(p){let f=p.x.toString()+p.y.toString();return l[f]!==void 0||(l[f]=o.length/2,o.push(p.x,p.y)),l[f]}return e.data={},e.data.vertices=t,e.data.normals=i,s.length>0&&(e.data.colors=s),o.length>0&&(e.data.uvs=[o]),e.data.faces=r,e}clone(){return new G3().copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let t=e.vertices;for(let u=0,d=t.length;u<d;u++)this.vertices.push(t[u].clone());let r=e.colors;for(let u=0,d=r.length;u<d;u++)this.colors.push(r[u].clone());let i=e.faces;for(let u=0,d=i.length;u<d;u++)this.faces.push(i[u].clone());for(let u=0,d=e.faceVertexUvs.length;u<d;u++){let p=e.faceVertexUvs[u];this.faceVertexUvs[u]===void 0&&(this.faceVertexUvs[u]=[]);for(let f=0,m=p.length;f<m;f++){let g=p[f],v=[];for(let y=0,x=g.length;y<x;y++){let w=g[y];v.push(w.clone())}this.faceVertexUvs[u].push(v)}}let n=e.morphTargets;for(let u=0,d=n.length;u<d;u++){let p={};if(p.name=n[u].name,n[u].vertices!==void 0){p.vertices=[];for(let f=0,m=n[u].vertices.length;f<m;f++)p.vertices.push(n[u].vertices[f].clone())}if(n[u].normals!==void 0){p.normals=[];for(let f=0,m=n[u].normals.length;f<m;f++)p.normals.push(n[u].normals[f].clone())}this.morphTargets.push(p)}let s=e.morphNormals;for(let u=0,d=s.length;u<d;u++){let p={};if(s[u].vertexNormals!==void 0){p.vertexNormals=[];for(let f=0,m=s[u].vertexNormals.length;f<m;f++){let g=s[u].vertexNormals[f],v={};v.a=g.a.clone(),v.b=g.b.clone(),v.c=g.c.clone(),p.vertexNormals.push(v)}}if(s[u].faceNormals!==void 0){p.faceNormals=[];for(let f=0,m=s[u].faceNormals.length;f<m;f++)p.faceNormals.push(s[u].faceNormals[f].clone())}this.morphNormals.push(p)}let a=e.skinWeights;for(let u=0,d=a.length;u<d;u++)this.skinWeights.push(a[u].clone());let o=e.skinIndices;for(let u=0,d=o.length;u<d;u++)this.skinIndices.push(o[u].clone());let l=e.lineDistances;for(let u=0,d=l.length;u<d;u++)this.lineDistances.push(l[u]);let h=e.boundingBox;h!==null&&(this.boundingBox=h.clone());let c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=new Vhe().fromGeometry(this),t=new dt,r=new Float32Array(e.vertices.length*3);if(t.setAttribute("position",dv.call(new pt(r,3),e.vertices)),e.normals.length>0){let i=new Float32Array(e.normals.length*3);t.setAttribute("normal",dv.call(new pt(i,3),e.normals))}if(e.colors.length>0){let i=new Float32Array(e.colors.length*3);t.setAttribute("color",eT.call(new pt(i,3),e.colors))}if(e.uvs.length>0){let i=new Float32Array(e.uvs.length*2);t.setAttribute("uv",tT.call(new pt(i,2),e.uvs))}if(e.uvs2.length>0){let i=new Float32Array(e.uvs2.length*2);t.setAttribute("uv2",tT.call(new pt(i,2),e.uvs2))}t.groups=e.groups;for(let i in e.morphTargets){let n=[],s=e.morphTargets[i];for(let a=0,o=s.length;a<o;a++){let l=s[a],h=new Ke(l.data.length*3,3);h.name=l.name,n.push(dv.call(h,l.data))}t.morphAttributes[i]=n}if(e.skinIndices.length>0){let i=new Ke(e.skinIndices.length*4,4);t.setAttribute("skinIndex",rT.call(i,e.skinIndices))}if(e.skinWeights.length>0){let i=new Ke(e.skinWeights.length*4,4);t.setAttribute("skinWeight",rT.call(i,e.skinWeights))}return e.boundingSphere!==null&&(t.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new dt,r=e.geometry;if(e.isPoints||e.isLine){let i=new Ke(r.vertices.length*3,3),n=new Ke(r.colors.length*3,3);if(t.setAttribute("position",dv.call(i,r.vertices)),t.setAttribute("color",eT.call(n,r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length){let s=new Ke(r.lineDistances.length,1);t.setAttribute("lineDistance",Ghe.call(s,r.lineDistances))}r.boundingSphere!==null&&(t.boundingSphere=r.boundingSphere.clone()),r.boundingBox!==null&&(t.boundingBox=r.boundingBox.clone())}else e.isMesh&&(t=r.toBufferGeometry());return t}};G3.prototype.isGeometry=!0;var Vhe=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let t=[],r,i,n,s=e.faces;for(i=0;i<s.length;i++){let a=s[i];a.materialIndex!==n&&(n=a.materialIndex,r!==void 0&&(r.count=i*3-r.start,t.push(r)),r={start:i*3,materialIndex:n})}r!==void 0&&(r.count=i*3-r.start,t.push(r)),this.groups=t}fromGeometry(e){let t=e.faces,r=e.vertices,i=e.faceVertexUvs,n=i[0]&&i[0].length>0,s=i[1]&&i[1].length>0,a=e.morphTargets,o=a.length,l;if(o>0){l=[];for(let g=0;g<o;g++)l[g]={name:a[g].name,data:[]};this.morphTargets.position=l}let h=e.morphNormals,c=h.length,u;if(c>0){u=[];for(let g=0;g<c;g++)u[g]={name:h[g].name,data:[]};this.morphTargets.normal=u}let d=e.skinIndices,p=e.skinWeights,f=d.length===r.length,m=p.length===r.length;r.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let g=0;g<t.length;g++){let v=t[g];this.vertices.push(r[v.a],r[v.b],r[v.c]);let y=v.vertexNormals;if(y.length===3)this.normals.push(y[0],y[1],y[2]);else{let w=v.normal;this.normals.push(w,w,w)}let x=v.vertexColors;if(x.length===3)this.colors.push(x[0],x[1],x[2]);else{let w=v.color;this.colors.push(w,w,w)}if(n===!0){let w=i[0][g];w!==void 0?this.uvs.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",g),this.uvs.push(new X,new X,new X))}if(s===!0){let w=i[1][g];w!==void 0?this.uvs2.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",g),this.uvs2.push(new X,new X,new X))}for(let w=0;w<o;w++){let _=a[w].vertices;l[w].data.push(_[v.a],_[v.b],_[v.c])}for(let w=0;w<c;w++){let _=h[w].vertexNormals[g];u[w].data.push(_.a,_.b,_.c)}f&&this.skinIndices.push(d[v.a],d[v.b],d[v.c]),m&&this.skinWeights.push(p[v.a],p[v.b],p[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}},_8=class{constructor(e,t,r,i,n,s=0){this.a=e,this.b=t,this.c=r,this.normal=i&&i.isVector3?i:new E,this.vertexNormals=Array.isArray(i)?i:[],this.color=n&&n.isColor?n:new lt,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=s}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}};function Ghe(e){return this.array.set(e),this}function eT(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new lt),t[r++]=s.r,t[r++]=s.g,t[r++]=s.b}return this}function tT(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new X),t[r++]=s.x,t[r++]=s.y}return this}function dv(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),s=new E),t[r++]=s.x,t[r++]=s.y,t[r++]=s.z}return this}function rT(e){let t=this.array,r=0;for(let i=0,n=e.length;i<n;i++){let s=e[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new Ct),t[r++]=s.x,t[r++]=s.y,t[r++]=s.z,t[r++]=s.w}return this}var Hhe=["a","b","c"];function Whe(e,t){switch(t){case"c":return e.c;case"b":return e.b;case"a":default:return e.a}}function K5(e,t,r){let i=Math.min(e,t),n=Math.max(e,t),s=i+"_"+n;return r.get(s)}function $5(e,t,r,i,n,s){let a=Math.min(e,t),o=Math.max(e,t),l=a+"_"+o,h;if(i.has(l))h=i.get(l);else{let c=r[a],u=r[o];h={a:c,b:u,newEdge:null,faces:[]},i.set(l,h)}h.faces.push(n),s[e].edges.push(h),s[t].edges.push(h)}function qhe(e,t,r,i){let n,s,a;for(n=0,s=e.length;n<s;n++)r[n]={edges:[]};for(n=0,s=t.length;n<s;n++)a=t[n],$5(a.a,a.b,e,i,a,r),$5(a.b,a.c,e,i,a,r),$5(a.c,a.a,e,i,a,r)}function pv(e,t,r,i,n){e.push(new _8(t,r,i,void 0,void 0,n))}function td(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function fv(e,t,r,i){e.push([t.clone(),r.clone(),i.clone()])}var Xhe=class{constructor(e=1){this.subdivisions=e}modify(e){e instanceof dt?e=new G3().fromBufferGeometry(e):e=e.clone(),e.mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let t=new E,r,i,n,s,a,o=e.vertices,l=e.faces,h=e.faceVertexUvs[0],c=h!==void 0&&h.length>0,u=[],d=new Map;qhe(o,l,u,d);let p=[],f,m,g,v,y,x,w;for(let ie of Array.from(d.keys())){for(m=d.get(ie),g=new E,y=3/8,x=1/8,w=m.faces.length,w!=2&&(y=.5,x=0,w!=1),g.addVectors(m.a,m.b).multiplyScalar(y),t.set(0,0,0),s=0;s<w;s++){for(v=m.faces[s],a=0;a<3&&(f=o[Whe(v,Hhe[a])],!(f!==m.a&&f!==m.b));a++);f&&t.add(f)}t.multiplyScalar(x),g.add(t),m.newEdge=p.length,p.push(g)}let _,b,S,C,M,A,T,L=[];for(i=0,n=o.length;i<n;i++){for(A=o[i],M=u[i].edges,r=M.length,r==3?_=3/16:r>3&&(_=3/(8*r)),b=1-r*Number(_),S=_,r<=2&&(r==2?(b=3/4,S=1/8):r==1||r==0),T=A.clone().multiplyScalar(b),t.set(0,0,0),s=0;s<r;s++)C=M[s],f=C.a!==A?C.a:C.b,t.add(f);t.multiplyScalar(Number(S)),T.add(t),L.push(T)}let D=L.concat(p),O=L.length,z,q,N,I=[],W=[],P,V,G,Q,U=new X,Y=new X,H=new X;for(i=0,n=l.length;i<n;i++)v=l[i],z=Number(K5(v.a,v.b,d).newEdge)+O,q=Number(K5(v.b,v.c,d).newEdge)+O,N=Number(K5(v.c,v.a,d).newEdge)+O,pv(I,z,q,N,v.materialIndex),pv(I,v.a,z,N,v.materialIndex),pv(I,v.b,q,z,v.materialIndex),pv(I,v.c,N,q,v.materialIndex),c&&(P=h[i],V=P[0],G=P[1],Q=P[2],U.set(td(V.x,G.x),td(V.y,G.y)),Y.set(td(G.x,Q.x),td(G.y,Q.y)),H.set(td(V.x,Q.x),td(V.y,Q.y)),fv(W,U,Y,H),fv(W,V,U,H),fv(W,G,Y,U),fv(W,Q,H,Y));e.vertices=D,e.faces=I,c&&(e.faceVertexUvs[0]=W)}},ii=new E,Yhe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=e.geometry??(t==null?void 0:t.geometry)??new dt().copy(new Ao(100,100,100)),i;t===void 0?(r.computeBoundingBox(),r.boundingBox.getSize(ii),i={width:ii.x,height:ii.y,depth:ii.z,subdivisions:0}):i=t.parameters;let n={...i,...e.parameters};return{parameters:{width:Math.abs(n.width),height:Math.abs(n.height),depth:Math.abs(n.depth),subdivisions:Math.abs(n.subdivisions)},geometry:r}}static build(e){let{width:t,height:r,depth:i,subdivisions:n}=e.parameters,s=e.geometry??new dt().copy(new Ao(100,100,100)),a=s.userData.parameters;a===void 0?(s.computeBoundingBox(),s.boundingBox.getSize(ii)):ii.set(a.width,a.height,a.depth),(t!==ii.x||r!==ii.y||i!==ii.z)&&s.scale(ii.x===0?1:t/ii.x,ii.y===0?1:r/ii.y,ii.z===0?1:i/ii.z);let o=s.originalGeometry;try{n>0?(o===void 0||(a==null?void 0:a.subdivisions)!==n)&&(o===void 0&&(o=s),s=new Xhe(n).modify(o).toBufferGeometry()):(o!==void 0&&(s=o),o=void 0,s.getAttribute("normal")===void 0&&s.computeVertexNormals())}catch{o!==void 0&&(s=o),o=void 0,s.getAttribute("normal")===void 0&&s.computeVertexNormals()}return o!==void 0&&Object.assign(s,{originalGeometry:o}),delete e.geometry,Object.assign(s,{userData:{...e,type:"NonParametricGeometry"}})}static loadFromUrl(e,t,r){new YR(r).load(e,i=>{let n=this.normalizeInputs({geometry:i});i.boundingBox.getSize(ii);let s=100/ii.x;Object.assign(n.parameters,{width:100,height:ii.y*s,depth:ii.z*s}),t(this.build(n))})}},kz=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof Rr?e.shape:new Rr,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r,spikes:i,cornerRadius:n,depth:s,extrudeBevelSize:a,extrudeBevelSegments:o}=e.parameters,l=e.shape,h=t*.5,c=r*.5,u=0,d=0,p=2*Math.PI/i;for(let m=0;m<i;m++){let g=p*m,v=u+Math.sin(g)*h,y=d+Math.cos(g)*c;l.addPoint(l.createPoint(v,y))}l.isClosed=!0;for(let m=0,g=l.points.length;m<g;m++)l.points[m].roundness=n;l.roundness=n,l.update();let f=Lc.create({shape:l,parameters:{roundness:n,depth:s,extrudeBevelSize:a,extrudeBevelSegments:o}});return Object.assign(f,{userData:{...e,type:"PolygonGeometry"}})}},Qhe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,radialSegments:n,heightSegments:s,openEnded:a,cornerRadius:o,cornerSegments:l}=e.parameters,h=new Khe(t*.5,r,n,s,a,o,l);return h.scale(1,1,i/t),Object.assign(h,{userData:{...e,type:"PyramidGeometry"}})}};function o1(e,t,r){r.x=e.x*t.x,r.y=e.y,r.z=e.x*t.y}function J5(e,t,r,i,n,s){let a=t.clone().sub(e),o=r.clone().sub(e),l=a.angleTo(o);if(a.normalize(),o.normalize(),i===n){let h=a.add(o).normalize();s.copy(e).addScaledVector(h,i/Math.sin(l/2))}else{let h=a.angleTo(o);s.copy(e),s.addScaledVector(a,n/Math.sin(h)),s.addScaledVector(o,i/Math.sin(h))}}function Zhe(e,t,r){let i=e.clone().sub(t),n=r.clone().sub(t);return i.projectOnVector(n),i.add(t)}var Khe=class extends dt{constructor(e=.5,t=1,r=4,i=1,n=!1,s=0,a=4){super(),r=Math.floor(Math.max(3,r)),i=Math.floor(i),a=Math.floor(a);let o=[],l=[],h=[],c=[],u=0,d=t/2,p=Math.PI/r,f=e*Math.cos(Math.PI/r),m=2*Math.PI/r,g=(r-2)*Math.PI/r,v=Math.PI-g,y=new E(0,-d,0),x=new E(0,d,0),w=new X(e,-d),_=new X(f,-d),b=new X(0,x.y).sub(_),S=new X(0,x.y).sub(w),C=new X(b.y,-b.x).normalize(),M=new X(S.y,-S.x).normalize(),A=e*Math.cos(Math.PI/r)*Math.tan((Math.PI-b.angle())/2)-1e-8;s=Math.min(s,A);let T;{let N=new E(C.x,C.y,0),I=new E(Math.cos(m)*N.x,N.y,Math.sin(m)*N.x);T=N.angleTo(I)}let L=s/Math.tan((Math.PI-b.angle())/2),D=s/Math.tan((Math.PI-T)/2),O=new E;if(!n){l.push(y.x,y.y,y.z),h.push(0,-1,0),c.push(0,0);let N=u++,I=[],W=w.clone(),P=L/Math.cos(Math.PI/r);W.x-=P;for(let V=0;V<r;V++){let G=V/r*Math.PI*2+p,Q=new X(Math.sin(G),Math.cos(G));o1(W,Q,O),l.push(O.x,O.y,O.z),h.push(0,-1,0),c.push(0,0),I.push(u++)}for(let V=0;V<I.length;V++)o.push(I[V],N,I[(V+1)%I.length])}{let N=new E,I=new E,W=new E,P=new E,V=new E,G=new E;for(let Q=0;Q<r;Q++){let U=Q/r*Math.PI*2+p,Y=(Q+.5)/r*Math.PI*2+p,H=(Q+1)/r*Math.PI*2+p,ie=new X(Math.sin(U),Math.cos(U)),J=new X(Math.sin(Y),Math.cos(Y)),ee=new X(Math.sin(H),Math.cos(H));o1(w,ie,I),o1(w,ee,W),o1(C,J,N),J5(x,I,W,D,D,P),l.push(P.x,P.y,P.z),J5(I,x,W,D,L,V),l.push(V.x,V.y,V.z),J5(W,I,x,L,D,G),l.push(G.x,G.y,G.z),h.push(N.x,N.y,N.z),h.push(N.x,N.y,N.z),h.push(N.x,N.y,N.z),c.push(0,0),c.push(0,0),c.push(0,0);let ne=u++,he=u++,ge=u++;if(o.push(ne,he,ge),s>0){{let _e=I.clone().add(W).multiplyScalar(.5),ze=x.clone().sub(_e).normalize(),K=y.clone().sub(_e).normalize().add(ze).normalize().multiplyScalar(-1),Ce=G.clone().sub(V);z(_e,Ce,K,b.angle())}let ce,Le;{let _e=new E;o1(M,ee,_e);let ze=G.clone().add(P).multiplyScalar(.5);ze=Zhe(ze,W,x);let K=G.clone().sub(P);[ce,Le]=z(ze,K,_e,T,P.y)}{let _e=ce,ze=_e.clone().setY(0).normalize(),K=new E(0,-1,0),Ce=ze.clone().cross(K);q(_e,ze,K,Ce)}{let _e=b.angle(),ze=Math.PI-_e,K=x.clone();K.y-=s/Math.sin(_e-Math.PI/2);let Ce=new E,Me=[];for(let ke=0;ke<a;ke++){let F=[],B=Math.PI/2-ze*ke/a,le=Math.cos(B),xe=Math.sin(B),ye=Y;for(let Ee=0;Ee<=ke;Ee++){let Ue=Math.cos(ye),Ne=Math.sin(ye);N.x=le*Ne,N.y=xe,N.z=le*Ue,Ce.copy(K).addScaledVector(N,s),l.push(Ce.x,Ce.y,Ce.z),h.push(N.x,N.y,N.z),c.push(0,0),F.push(u++),ye+=Math.PI*2/ke/r}Me.push(F)}Le.reverse(),Me.push(Le);let Ge=Me.length-1;for(let ke=0;ke<Ge;ke++){let F=Me[ke],B=Me[ke+1],le=F.length-1;o.push(B[1],F[0],B[0]);for(let xe=1;xe<=le;xe++)o.push(F[xe],F[xe-1],B[xe]),o.push(B[xe+1],F[xe],B[xe])}}}}}this.setIndex(o),this.setAttribute("position",new Ke(l,3)),this.setAttribute("normal",new Ke(h,3)),this.setAttribute("uv",new Ke(c,2));function z(N,I,W,P,V){let G=-P/2,Q=(Math.PI-P)/2,U=I.clone().normalize().cross(W);N.addScaledVector(W,-s/Math.sin(Q));let Y=new E,H=new E,ie=1,J=u,ee=[];for(let ne=0;ne<=a;ne++){let he=G+ne/a*P;H.set(0,0,0),H.addScaledVector(U,Math.sin(he)),H.addScaledVector(W,Math.cos(he));for(let ge=0;ge<=ie;ge++){let ce=ge/ie-.5;if(Y.copy(N),Y.addScaledVector(I,ce),Y.addScaledVector(H,s),V!=null){let Le=Math.max(0,Y.y-V);Y.addScaledVector(I,-Le/I.y)}l.push(Y.x,Y.y,Y.z),h.push(H.x,H.y,H.z),c.push(0,0),ge===0&&ee.push(u),u++}}for(let ne=0;ne<a;ne++)for(let he=0;he<ie;he++){let ge=J+he+(ie+1)*ne,ce=ge+(ie+1),Le=ce+1,_e=ge+1;o.push(ge,ce,_e),o.push(ce,Le,_e)}return[N.clone().addScaledVector(I,.5),ee]}function q(N,I,W,P){let V=Math.PI/2,G=S.angle()-V,Q=[],U=new E,Y=new E;for(let ie=0;ie<=a;ie++){let J=[],ee=ie/a;for(let ne=0;ne<=ie;ne++){let he=((ie?ne/ie:0)-.5)*v,ge=Math.cos(he),ce=Math.sin(he),Le=Math.atan(Math.tan(G)*ge),_e=(V+Le)*ee,ze=Math.cos(_e),K=Math.sin(_e);U.set(0,0,0),U.addScaledVector(I,K*ge),U.addScaledVector(W,ze),U.addScaledVector(P,K*ce),Y.copy(N).addScaledVector(U,s),l.push(Y.x,Y.y,Y.z),h.push(U.x,U.y,U.z),c.push(0,0),J.push(u++)}Q.push(J)}let H=Q.length-1;for(let ie=0;ie<H;ie++){let J=Q[ie],ee=Q[ie+1],ne=J.length-1;o.push(J[0],ee[1],ee[0]);for(let he=1;he<=ne;he++)o.push(J[he-1],J[he],ee[he]),o.push(J[he],ee[he+1],ee[he])}}}},Nz=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters),i=Object.assign((t==null?void 0:t.ui)??{enabledIndieCorners:!1},e.ui);return{shape:e.shape&&e.shape instanceof Rr?e.shape:new Rr,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)}),ui:i}}static build(e){let t=e.shape,{width:r,height:i,cornerRadius:n,cornerType:s,depth:a,extrudeBevelSize:o,extrudeBevelSegments:l}=e.parameters,h={x:r*.5,y:i*.5},c={x:-h.x,y:-h.y},u={x:h.x,y:h.y};function d(w,_,b){return _>r&&b>i?Math.min(w*r/_,w*i/b):_>r?w*r/_:b>i?w*i/b:w}let p=[];p[0]=n[0]===0?0:d(n[0],n[0]+n[3],n[0]+n[1]),p[1]=n[1]===0?0:d(n[1],n[1]+n[2],n[1]+n[0]),p[2]=n[2]===0?0:d(n[2],n[2]+n[1],n[2]+n[3]),p[3]=n[3]===0?0:d(n[3],n[3]+n[0],n[3]+n[2]);let f=c.x,m=u.x,g=u.y,v=c.y;t.addPoint(t.createPoint(f,g)),t.addPoint(t.createPoint(m,g)),t.addPoint(t.createPoint(m,v)),t.addPoint(t.createPoint(f,v)),t.isClosed=!0;let y=!0;for(let w=0,_=t.points.length;w<_;w++)t.points[w].roundness=p[w],w>0&&p[w]!==p[w-1]&&(y=!1);y&&(t.roundness=p[0]),t.useCubicForRoundedCorners=s!==1,t.update();let x=Lc.create({shape:t,parameters:{depth:a,extrudeBevelSize:o,extrudeBevelSegments:l}});return Object.assign(x,{userData:{...e,type:"RectangleGeometry"}})}},$he=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t=100,height:r=t,depth:i=t,widthSegments:n=64,heightSegments:s=64,phiStart:a,phiLength:o,thetaStart:l,thetaLength:h}=e.parameters,c=new Gw(.5*t,n,s,a,o,l,h);return c.scale(1,r/t,i/t),Object.assign(c,{userData:{...e,type:"SphereGeometry"}})}},Jhe=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:0})}}static build(e){let{width:t=100,height:r=t,widthSegments:i=8,heightSegments:n=8}=e.parameters,s=new _y(t,r,i,n);return s.scale(1,1,1),Object.assign(s,{userData:{...e,type:"PlaneGeometry"}})}},eue=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{width:t,height:r,depth:i,angle:n,cornerRadius:s,cornerSegments:a}=e.parameters,o=new tue(t,r,i,n,s,a);return Object.assign(o,{userData:{...e,type:"BackdropGeometry"}})}},tue=class extends dt{constructor(e=1,t=1,r=1,i=90,n=10,s=24){super(),this.type="BackdropGeometry";let a=[],o=[],l=[],h=.001;n==0&&(s=1),s=Math.max(1,Math.floor(s)),n=Math.min(n,100),i=Math.min(180-h,i),i*=Math.PI/180;let c=[],u=Math.PI/2,d=(ie=0,J=0,ee=0)=>new E(ie,J,ee),p=d(),f=d(),[m,g,v]=[t/2,e/2,r/2],y=-g,x=+g,[w,_,b]=[d(y,-m,+v),d(y,-m,-v),d(y,+m,-v)],S=(ie,J=!1)=>Math.sin(ie-Math.PI/(1+ +J)),C=(ie,J=!1)=>Math.cos(ie-Math.PI/(1+ +J));b.y=Math.sin(i)*t-m;let M=Math.cos(i)*t-v,A=w.z-h;i<=u?(b.z=Math.min(M,A),b.z==A&&(b.y-=(M-A)/Math.tan(u-i))):_.z=Math.min(_.z-M-v,w.z-h),p.subVectors(w,_),f.subVectors(b,_);let T=Math.min(p.length(),f.length())*n/100,L=T*Math.tan(i/2),D=T/Math.cos(i/2),O=p.clone().normalize().add(f.normalize()).setLength(D).add(_);p.set(0,S(i,!0),C(i,!0)),c.push([b,p.clone()]);let z=(Math.PI-i)/s;for(let ie=0;ie<=s;ie++){let J=u+i+ie*z;p.set(0,Math.sin(J)*L,Math.cos(J)*L),p.add(O),f.set(0,S(J),C(J)),c.push([p.clone(),f.clone()])}c.push([w,d(0,1,0)]);let q=Math.sin(z/2)*L*2,N=c.length-1,I=c[0][0].distanceTo(c[1][0]),W=c[N-1][0].distanceTo(c[N][0]),P=I+q*s+W;c[0].push(1);for(let ie=0;ie<=s;ie++)c[ie+1].push(1-(I+ie*q)/P);c[N].push(0);let[V,G,Q]=c[0],U,Y,H;for(let ie=1;ie<c.length;ie++)[U,Y,H]=c[ie],a.push(y,V.y,V.z,y,U.y,U.z,x,V.y,V.z,x,V.y,V.z,y,U.y,U.z,x,U.y,U.z),o.push(0,G.y,G.z,0,Y.y,Y.z,0,G.y,G.z,0,G.y,G.z,0,Y.y,Y.z,0,Y.y,Y.z),l.push(0,Q,0,H,1,Q,1,Q,0,H,1,H),[V,G,Q]=[U,Y,H];this.setAttribute("position",new Ke(a,3)),this.setAttribute("normal",new Ke(o,3)),this.setAttribute("uv",new Ke(l,2))}},Fz=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof Rr?e.shape:new Rr,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r,innerRadiusPercent:i,spikes:n,cornerRadius:s,angle:a,depth:o,extrudeBevelSize:l,extrudeBevelSegments:h}=e.parameters,c=e.shape,u=t*.5,d=r*.5,p=0,f=0,m=a*Math.PI/360/n,g=Math.PI/2*3*-1,v=u*i/100,y=d*i/100;if(n===3&&i===50){m=2*Math.PI/n;for(let w=0;w<n;w++){let _=m*w,b=p+Math.sin(_)*u,S=f+Math.cos(_)*d;c.addPoint(c.createPoint(b,S))}}else for(let w=0;w<n;w++){let _=p+Math.cos(g)*u,b=f+Math.sin(g)*d;c.addPoint(c.createPoint(_,b)),g+=m,_=p+Math.cos(g)*v,b=f+Math.sin(g)*y,c.addPoint(c.createPoint(_,b)),g+=m}c.isClosed=!0;for(let w=0,_=c.points.length;w<_;w++)c.points[w].roundness=s;c.roundness=s,c.update();let x=Lc.create({shape:c,parameters:{roundness:s,depth:o,extrudeBevelSize:l,extrudeBevelSegments:h}});return Object.assign(x,{userData:{...e,type:"StarGeometry"}})}},rue=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t,height:r}=e.parameters,i=new _y(t,r);return Object.assign(i,{userData:{...e,type:"TextFrameGeometry"}})}},iue=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,radialSegments:32,tubularSegments:64,arc:Math.PI*2,cornerRadius:30,cornerSegments:8},e.parameters),i=Math.abs(r.width),n=Math.abs(r.height??r.width),s=Math.round(Math.abs(r.depth??r.width*.25));return{parameters:Object.assign(r,{width:i,height:n,depth:s})}}static build(e){let{width:t,height:r,depth:i,radialSegments:n,tubularSegments:s,arc:a,cornerRadius:o,cornerSegments:l}=e.parameters,h=nue(t,r,i,t*.5,a,s,0,0,n,o,l);return h.scale(1,r/t,1),Object.assign(h,{userData:{...e,type:"TorusGeometry"}})}};function nue(e,t,r,i,n,s,a,o,l,h,c){return[t,r]=[r,t],a=t/2,n/=2*Math.PI,n==1&&(h=0),new Bz(!0,e,t,r,i,n,s,a,o,l,h,c)}var sue=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width),tube:r.tube??r.width*.125})}}static build(e){let{width:t,tube:r,tubularSegments:i,radialSegments:n,p:s,q:a}=e.parameters,o=t*.5;o!==r&&(o-=r);let l=new VR(o,r,i,n,s,a);return Object.assign(l,{userData:{...e,type:"TorusKnotGeometry"}})}},aue=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof Rr?e.shape:new Rr,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width*(r.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(r.depth??0)})}}static build(e){let{width:t=100,height:r,cornerRadius:i,depth:n,extrudeBevelSize:s,extrudeBevelSegments:a,isRect:o}=e.parameters,l=e.shape,h=t*.5,c=r*.5;o?(l.addPoint(l.createPoint(-h,c)),l.addPoint(l.createPoint(h,-c)),l.addPoint(l.createPoint(-h,-c))):(l.addPoint(l.createPoint(0,c)),l.addPoint(l.createPoint(h,-c)),l.addPoint(l.createPoint(-h,-c))),l.isClosed=!0;for(let d=0,p=l.points.length;d<p;d++)l.points[d].roundness=i;l.roundness=i,l.update();let u=Lc.create({shape:l,parameters:{roundness:i,depth:n,extrudeBevelSize:s,extrudeBevelSegments:a}});return Object.assign(u,{userData:{...e,type:"TriangleGeometry"}})}};function oue(e,t){let r=2*Math.PI;return(e%r+r)%r===(t%r+r)%r}var lue=new Ae,hue=new Ae;function uue(e,t,r){let i=[new E,new E,new E],n=[new E,new E,new E];return e.extractBasis(i[0],i[1],i[2]),t.extractBasis(n[0],n[1],n[2]),i.forEach((s,a)=>{let o=n[a],l=Tt.lerp(s.length(),o.length(),r);s.lerp(o,r).setLength(l)}),new Ae().makeBasis(i[0],i[1],i[2])}var cue=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let r=Object.assign({},(t==null?void 0:t.parameters)??{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),i=Math.abs(r.width),n=Math.abs(r.height??r.width),s=Math.abs(r.depth??0),a=(t==null?void 0:t.shapeData)??Db.create({parameters:cz}).userData.shape;return{path:e.path??I3.defaultData(),parameters:Object.assign(r,{width:i,height:n,depth:s,extrusion:{...dz,...r.extrusion}}),shapeData:a}}static build(e){if(e.path.points.length>=2){let t=new due(e);return Object.assign(t,{userData:{...e,type:"PathGeometry"}})}else return Object.assign(new dt,{userData:{...e,type:"PathGeometry"}})}},due=class extends dt{constructor(e){super(),this.type="PathExtrusionGeometry",this.inputs=e,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&this.inputs.parameters.extrusion.depth===1}_isOpenEnded(){let e=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&e.depth===1)||!oue(e.twist,0)||e.startScale!==e.endScale}build(){let e=this._extractPathPoints();if(e.length<2)return;let t=this._computeBasisMatrices(e),{depth:r,offset:i}=this.inputs.parameters.extrusion,n=this.inputs.path.isClosed?e.length:e.length-1,s=Math.floor(i*n),a=this.inputs.path.isClosed?Math.ceil((r+i)*n):Math.ceil(Math.min(1,r+i)*n),o=Math.min(Math.max(2,a-s+1),n+2),l=[],h=[];for(let N=0;N<o;N++){let I=this.inputs.path.isClosed?(N+s)%e.length:Math.min(N+s,e.length-1);l.push(e[I].clone()),h.push(t[I].clone())}let c=(N,I,W)=>{l[N]=l[N].clone().lerp(l[I],W),h[N]=uue(h[N],h[I],W)},u=0,d=i*n%1;(!this.inputs.path.isClosed||r<=1)&&(d||i===0)&&(u=d,c(0,1,u));let p=0,f=(i+r)*n%1;if((this.inputs.path.isClosed&&r<=1||!this.inputs.path.isClosed&&i+r<1)&&f&&(p=f,c(l.length-1,l.length-2,1-p)),r===0){let N=l.length-1;l[N].copy(l[0]),h[N].copy(h[0])}this._applyPathModifiers(h,u,p);let{bevel:m,bevelSides:g}=this.inputs.parameters.extrusion,v=m>0?this.inputs.parameters.extrusion.capType:"flat",y=5;this.inputs.parameters.extrusion.shape.type==="Custom"&&(y=this.inputs.parameters.extrusion.shape.shapeQuality==="low"?5:12);let{regions:x,infos:w,vertices:_}=this._computeShapePoints(y),b=0,S;v==="round"&&(S=new Pb(this.inputs.shapeData,2*m,m,y,g,void 0,!0),b=S.getAttribute("position").count);let C=0,M=0;w.sort((N,I)=>N.start-I.start),w.forEach(N=>{N.verticesStart=C,N.verticesCount=N.continuous.reduce((I,W,P)=>I+(P===0||!W?2:1),0),M+=N.verticesCount,C=M});let A=M*o,T,L=0;if(this._isOpenEnded()&&v==="flat"){try{T=bh({windingRule:er.ODD,elementType:Jr.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:x})}catch{T=Tz}L=T.vertexCount}let D=A+2*L+b*2,O=A+2*L,z={positions:new Float32Array(D*3),normals:new Float32Array(D*3),uvs:new Float32Array(D*2)},q=[];if(w.forEach(N=>{this._extrudeRegion(N,_,h,l,z,q,this._isGeometryClosed()&&!this._isOpenEnded())}),T&&(this._closeEnd(T,A,q,z,h[0],l[0],!1),this._closeEnd(T,A+L,q,z,h[h.length-1],l[l.length-1],!0)),S){z.positions.set(S.getAttribute("position").array,O*3),z.normals.set(S.getAttribute("normal").array,O*3),z.uvs.set(S.getAttribute("uv").array,O*2);let N=q.length;q.push(...S.getIndex().array.map(P=>P+O)),O+=b,z.positions.set(S.getAttribute("position").array,O*3),z.normals.set(S.getAttribute("normal").array,O*3),z.uvs.set(S.getAttribute("uv").array,O*2);let I=q.length;q.push(...S.getIndex().array.map(P=>P+O)),this.setAttribute("position",new pt(z.positions,3)),this.setAttribute("normal",new pt(z.normals,3)),this.setAttribute("uv",new pt(z.uvs,2)),this.setIndex(q);let W=lue;W.copy(h[h.length-1]).setPosition(l[l.length-1]),this.applyMatrix4OnRange(W,O,D),W.copy(h[0]).setPosition(l[0]).multiply(hue.makeScale(1,1,-1)),this.applyMatrix4OnRange(W,O-b,O),this.reverseIndicesOnRange(N,I)}else this.setAttribute("position",new pt(z.positions,3)),this.setAttribute("normal",new pt(z.normals,3)),this.setAttribute("uv",new pt(z.uvs,2)),this.setIndex(q)}_extractPathPoints(){let e=xz(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(e.length<2)return[];let t=[e[0]];return e.forEach(r=>{t[t.length-1].distanceToSquared(r)>.001&&t.push(r)}),this.inputs.path.isClosed&&t[t.length-1].distanceTo(t[0])<.001&&t.pop(),t}_computeBasisMatrices(e){let t=[],r=e.length,i=this.inputs.path.isClosed,n=new E,s=new E,a=new E,o=new E,l=new E(0,1,0);for(let f=0;f<r;f++){let m=e[f],g;f===0?g=i?e[e.length-2]:m.clone().multiplyScalar(2).sub(e[1]):g=e[f-1];let v;f===r-1?v=i?e[1]:m.clone().multiplyScalar(2).sub(e[f-1]):v=e[f+1];let y=m.clone().sub(g).normalize(),x=v.clone().sub(m).normalize(),w=y.clone().add(x).normalize();a.copy(w),f===0&&(w.equals(l)||w.clone().negate().equals(l))&&l.set(0,0,1);let _=l.clone().cross(w).normalize(),b=w.clone().cross(_).normalize();l.copy(b),o.copy(_),f===0&&(n.copy(b),s.copy(w));let S=new Ae().makeBasis(_,b,w);t.push(S)}let h=i?s:a,c=i?n:new E(0,1,0),u=h.clone().cross(o).normalize(),d=Math.acos(c.dot(u));if(isNaN(d))return t;let p=c.clone().cross(u);h.dot(p)>0&&(d*=-1);for(let f=1;f<t.length;f++){let m=new Ae().makeRotationZ(d*f/t.length);t[f].multiply(m)}return t}_applyPathModifiers(e,t,r){let i=e.length,{angle:n,twist:s,startScale:a,endScale:o}=this.inputs.parameters.extrusion,l=new Ae,h=new Ae;return e.forEach((c,u)=>{let d=u===0?0:u===i-1?1:(u-t)/(i-(r===0?0:1)-(t+(1-r)));l.makeRotationZ(Tt.lerp(n,n+s,d));let p=Tt.lerp(a,o,d);h.makeScale(p,p,p),c.multiply(l).multiply(h)}),e}_computeShapePoints(e=12,t=er.ODD){let r=this.inputs.shapeData,i=r.extractShapePointsToFlatArray([],e),n=r.shapeHoles.map(h=>{let c=h.extractShapePointsToFlatArray([],e),u=[];for(let d=c.length-1;d>=1;d-=2){let p=c[d-1],f=c[d-0];u.push(p,f)}return u}),s;try{s=bh({windingRule:t,elementType:Jr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[i]})}catch{s=Lb}let a;try{a=bh({windingRule:er.ODD,elementType:Jr.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...n]})}catch{a=Ez}if(!s)throw new Error("error generating geometry");let o=s.elementCount;if(a){s.elementCount+=a.elementCount;for(let h=0;h<a.elements.length;h++){let c=a.elements[h],u=h%2===0?s.vertexCount:0;s.elements.push(c+u)}for(let h=0;h<a.vertexIndices.length;h++){let c=a.vertexIndices[h],u=s.vertexCount;s.vertexIndices.push(c+u)}for(let h=0;h<a.vertices.length;h++){let c=a.vertices[h];s.vertices.push(c)}}for(let h=0,c=s.vertexCount;h<c;h++){let u=h*2;s.vertices[u+0],s.vertices[u+1]}let l=[];for(let h=s.elementCount-1;h>=0;h--){let c=h>=o,u=h*2,d=s.elements[u+0],p=s.elements[u+1],f=d+p,m={start:d,count:p,normals:[],isHole:c,continuous:[],verticesStart:0,verticesCount:0};l.push(m);let g=d,v=f-1,y=d+1,x=r.roundedCurves.length;do{let w=g-d;s.vertices[v*2+0],s.vertices[v*2+1];let _=s.vertices[g*2+0],b=s.vertices[g*2+1],S=s.vertices[y*2+0],C=s.vertices[y*2+1],M=_-S,A=b-C,T=Math.sqrt(M*M+A*A);M/=T,A/=T,m.normals[w*2+0]=-A,m.normals[w*2+1]=M;let L=s.vertexIndices[g];if(Array.isArray(L))m.continuous[w]=!1;else{let[D,O]=r.getCurveIndexFromVertexId(L-1,!0);if(O>0&&O<1)m.continuous[w]=!0;else{let z=O===1?D+1:D-1;z=(z+x)%x;let q=O===1?0:1,N=r.roundedCurves[D].getTangent(O),I=r.roundedCurves[z].getTangent(q);m.continuous[w]=N.dot(I)>.95}}c&&(m.normals[w*2+0]*=-1,m.normals[w*2+1]*=-1),[v,g,y]=[g,y,y+1],y>=f&&(y-=p)}while(y!==d+1)}return{regions:[i,...n],infos:l,vertices:s.vertices}}_insertVertex(e,t,r,i,n){let s=t*2,a=t*3;e.positions[a+0]=r.x,e.positions[a+1]=r.y,e.positions[a+2]=r.z,e.normals[a+0]=i.x,e.normals[a+1]=i.y,e.normals[a+2]=i.z,e.uvs[s+0]=n.x,e.uvs[s+1]=n.y}_extrudeRegion(e,t,r,i,n,s,a){let o=new E,l=new E,h=new E,c=new E,u=new X;r.forEach((p,f)=>{let m=i[f],g=e.verticesStart*r.length+e.verticesCount*f;for(let v=0;v<e.count;v++){let y=(e.start+v)*2;if(o.set(t[y+0],t[y+1],0),h.copy(o).applyMatrix4(p).add(m),e.continuous[v])c.set(e.normals[v*2+0],e.normals[v*2+1],0);else{let x=v===0?(e.start+e.count-1)*2:y-2;l.set(t[x+0],t[x+1],0),c.copy(o).sub(l),c.set(-c.y,c.x,0),e.isHole||c.negate()}if(c.applyMatrix4(p).normalize(),u.set(v===0?1:v/e.count,f/(r.length-1)),this._insertVertex(n,g,h,c,u),g++,!e.continuous[v]||v===0){if(v===0)c.set(e.normals[v*2+0],e.normals[v*2+1],0),u.set(0,f/(r.length-1));else{let x=v===e.count-1?e.start*2:y+2;l.set(t[x+0],t[x+1],0),c.copy(l).sub(o),c.set(-c.y,c.x,0),e.isHole||c.negate()}c.applyMatrix4(p).normalize(),this._insertVertex(n,g,h,c,u),g++}}});let d=r.length-1;for(let p=0;p<d;p++){let f=e.verticesStart*r.length+e.verticesCount*p,m=e.verticesStart*r.length+e.verticesCount*(p+1),g=0;for(let v=0;v<e.count;v++){(!e.continuous[v]||v===0)&&g++;let y=v===e.count-1?0:g+1,x=f+g,w=f+y,_=m+y,b=m+g;e.isHole?s.push(x,_,w,x,b,_):s.push(x,w,_,x,_,b),g++}}}_closeEnd(e,t,r,i,n,s,a){let o=e.vertexCount,l=new E(0,0,a?-1:1).applyMatrix4(n),h=new E,c=new X;for(let d=0;d<o;d++){let p=2*d;h.set(e.vertices[p+0],e.vertices[p+1],0).applyMatrix4(n).add(s),this._insertVertex(i,t+d,h,l,c)}let u=e.elements;for(let d=0;d<e.elementCount;d++){let p=3*d,f=u[p+0]+t,m=u[p+(a?1:2)]+t,g=u[p+(a?2:1)]+t;r.push(f,m,g)}}applyMatrix4OnRange(e,t,r){let i=e.elements,n=new Ci().getNormalMatrix(e).elements,s,a,o,l,h=this.attributes.position,c=this.attributes.normal;if(!h||!c)return;let u=h.array,d=c.array,p=h.itemSize;for(let f=t*p,m=r*p;f<m;f+=p){if(f===t)debugger;s=u[f+0],a=u[f+1],o=u[f+2],l=1/(i[3]*s+i[7]*a+i[11]*o+i[15]),u[f+0]=(i[0]*s+i[4]*a+i[8]*o+i[12])*l,u[f+1]=(i[1]*s+i[5]*a+i[9]*o+i[13])*l,u[f+2]=(i[2]*s+i[6]*a+i[10]*o+i[14])*l,s=d[f+0],a=d[f+1],o=d[f+2],d[f+0]=n[0]*s+n[3]*a+n[6]*o,d[f+1]=n[1]*s+n[4]*a+n[7]*o,d[f+2]=n[2]*s+n[5]*a+n[8]*o}h.needsUpdate=!0,c.needsUpdate=!0}reverseIndicesOnRange(e,t){let r=this.index;if(r){for(let i=e;i<t;i+=3){let n=r.getX(i),s=r.getX(i+1),a=r.getX(i+2);r.setXYZ(i,a,s,n)}r.needsUpdate=!0}}};function Uz(){let e=new dt;return e.setAttribute("position",new pt(new Float32Array([]),3)),e.setIndex(new pt(new Uint16Array([]),1)),e}var pue=Uz().attributes,fue=12,mue=1,jz=class extends dt{constructor(e,t){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],Object.assign(this.attributes,pue),this.userData={parameters:e,type:"TextGeometry"};let r=t.getFont(e.font);r!=null&&r.isLoaded?(this.font=r,this.update(e)):this.updateFont(e.font,t).then(()=>{this.update(e),t==null||t.requestRender()})}async updateFont(e,t){let r=t.getFont(e);r&&(this.font=r,await r.loadingPromise)}update(e){let t=this.font;if(this.userData={parameters:e,type:"TextGeometry"},!(t!=null&&t.isLoaded)){console.warn("Cannot update text because its font is not loaded");return}let{width:r,height:i,depth:n,extrudeBevelSize:s,extrudeBevelSegments:a,text:o,textTransform:l}=e,h=l===2?o.toUpperCase():l===3?o.toLowerCase():o,c=gue(e,t,h),{shapes:u,charWidths:d,charCoords:p}=t.generateShapes(c,e),f=r*.5,m=i*.5,g=u.map(x=>new Rr().fromShape(x));this.vectorShapes=g;let v=g.map(x=>Lc.create({shape:x,parameters:{depth:n,extrudeBevelSegments:a,extrudeBevelSize:s,windingRule:n<=0?er.NONZERO:er.ODD,subdivisions:this.isLowResolution&&n>0?mue:fue}})),y=v.length?zu(v):Uz();y.translate(-f,m,0),this.dispose(),this.wrappedText=c,this.charCoords=p,this.charWidths=d,this.deleteAttribute("extrudeNormal"),Object.entries(y.attributes).forEach(([x,w])=>{this.setAttribute(x,w)}),this.setIndex(y.index),this.computeBoundingSphere()}clone(){let e=yc(new dt,jz.prototype);return e.copy(this),console.log("CloneGeometry",this,e),e}copy(e){return Object.entries(e.attributes).forEach(([t,r])=>{this.setAttribute(t,r)}),this.setIndex(e.index),this.userData={parameters:{...e.userData.parameters},type:"TextGeometry"},this}async setText(e){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:e})}get text(){return this.userData.parameters.text??""}};function gue(e,t,r){r=r??e.text;let i=[""],n="";for(let s of r)n+=s,s===" "||s===`
`?(i[i.length-1]+=n,n="",s===`
`&&i.push("")):t.getTextWidth(i[i.length-1]+n,e)>e.width&&(i[i.length-1].length&&i.push(""),t.getTextWidth(i[i.length-1]+n,e)>e.width&&(n.length===1?(i[i.length-1]+=n,n=""):(i[i.length-1]+=n.slice(0,-1),n=n[n.length-1],i.push(""))));return i[i.length-1]+=n,i}var Vz,Ob=new Promise(e=>{Vz=e}),iT=!1,mv;function vue(){if(iT)return;if(mv)return mv;async function e(){let t="https://unpkg.com/@splinetool/modelling-wasm@0.9.450/build",r=Am(()=>import("./process-10f79362.js"),[]),[i,n]=await Promise.all([r,fetch(`${t}/process.wasm`).then(o=>o.arrayBuffer())]),s=i.default,a=await s({wasmBinary:n});Vz(a),iT=!0}return mv=e(),mv}function H3(e,t,r){let i={parameters:e,type:e.type};if(e.type==="PathGeometry")i.path=e.path;else if(e.type==="VectorGeometry"){let s=Rr.createFromState(e.shape,e.width,e.height);i.shape=s}else if(e.type==="NonParametricGeometry")e.data.groups&&e.data.groups.forEach(s=>s.materialIndex=Math.max(s.materialIndex??0,0)),i.geometry=new YR().parse(e);else{if(e.type==="SubdivGeometry")return new fn(e,r);if(e.type==="TextGeometry")return new jz(e,t)}let n;try{n=lT(i)}catch(s){console.error(s)}if(!n){let s=Rr.createFromState(O3.defaultData(),100,100);i.shape=s,n=lT(i)}return n}var yue=new Ae;function C8(e,t,r,i){let n=e.position.array,s=e.normal.array,a=yue.makeScale(t,r,i).invert().elements,o,l,h;for(var c=0,u=n.length;c<u;c+=3)n[c]*=t,n[c+1]*=r,n[c+2]*=i,o=s[c],l=s[c+1],h=s[c+2],s[c]=a[0]*o+a[4]*l+a[8]*h,s[c+1]=a[1]*o+a[5]*l+a[9]*h,s[c+2]=a[2]*o+a[6]*l+a[10]*h;e.position.needsUpdate=!0,e.normal.needsUpdate=!0}var gv=new qr,rd=new E,at;Ob.then(e=>{at=e});var nT=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),sT=new Uint32Array([0,1,2,3]),aT=new Uint8Array([4]),fn=class extends dt{constructor(e,t){super(),this.data=e,this.flatShading=t,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(e,t){this.freeSubdivPointer();let r=this.data.scaleBaked,i=ec.div(t,r);this.subdividedGeometry&&C8(this.subdividedGeometry.attributes,...i),this.originalGeometry&&C8(this.originalGeometry.attributes,...i),this.data=e;let n=this.userData.parameters;this.userData.parameters={width:n.width*i[0],height:n.height*i[1],depth:n.depth*i[2]},this.originalGeometry.boundingSphere.center.multiply(rd.fromArray(i));let s=rd.set(n.width,n.height,n.depth).length();this.originalGeometry.boundingSphere.radius=s/2}ensureSubdivPointer(){return this.subdivPointer===0&&this.rebuild(),this.subdivPointer}rebuild(){let e,t,r;try{({originalGeometry:e,subdividedGeometry:t,subdivPointer:r}=fn.build(this.data,void 0,!this.flatShading,void 0))}catch{e=new Ao(100,100,100),r=0}this.subdivPointer=r,this.originalGeometry=e,this.subdividedGeometry=t??void 0;let i=this.subdividedGeometry??this.originalGeometry;Object.assign(this,i),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(fn.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new _s,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,r=e.boundingSphere.center;gv.setFromBufferAttribute(t),gv.getCenter(r),e.boundingSphere.radius=r.distanceTo(gv.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),gv.getSize(rd);let i={width:rd.x,height:rd.y,depth:rd.z};return this.userData.parameters=i,i}static build(e,t,r,i){let n,s,a,o=(e==null?void 0:e.phongAngle)??35;r===!1&&(o=-1),t&&(at.free_bvh(t),at.free_subdivision_surface(t));try{n=fn.allocate(e,i)}catch(l){console.error(l,e),n=fn.allocate({positionWASM:nT,indexWASM:sT,verticesPerFaceWASM:aT},i)}if(at.set_destination_refinement_level(n,0),s=fn.buildLevel(n,!0,o),e.subdivisions>0)try{at.set_destination_refinement_level(n,e.subdivisions),a=fn.buildLevel(n,!1,o)}catch{try{at.set_destination_refinement_level(n,e.subdivisions-1),a=fn.buildLevel(n,!1,o)}catch{a=null}}else a=null;return{subdivPointer:n,originalGeometry:s,subdividedGeometry:a}}static primitiveToQuads(e,t,r){e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),e.type==="DodecahedronGeometry"&&(e.detail=0);let i=e.shape!==void 0||e.path!==void 0?t.geometry:H3(e,r,!1),n;e.type==="TorusGeometry"&&e.arc===Math.PI*2?n=i.getClosedTorusIndicesForBooleanOrSubdiv():n=i.getIndex();let s,a,o,l;({positions:s,triIndices:l}=jy(i.getAttribute("position"),n));let h;if(e.type==="CylinderGeometry"&&e.cornerRadius===0&&e.hollow===0&&e.openEnded===!1){let c=e.radialSegments*e.heightSegments*3*2,u=c+e.radialSegments*3;h=[c,u]}return{indices:a,verticesPerFace:o}=Gz(s,l,i,h),{positions:s,indices:a,verticesPerFace:o}}static allocate(e,t){var x;let r,i,n,s=[],a=[];e.positionWASM&&e.positionWASM.length>0?(r=e.positionWASM,i=e.indexWASM,n=e.verticesPerFaceWASM):(r=nT,i=sT,n=aT);let o=r.length,l=i.length,h=n.length,c=r.length+s.length+a.length,u=i.length+n.length,d=c*Float32Array.BYTES_PER_ELEMENT+u*Uint32Array.BYTES_PER_ELEMENT,p=c*Float32Array.BYTES_PER_ELEMENT,f=at._malloc(d),m=new Float32Array(at.HEAPF32.buffer,f,c),g=new Uint32Array(at.HEAPU32.buffer,f+p,u);m.set(r,0),m.set(s,r.length),m.set(a,r.length+s.length),g.set(i,0),g.set(n,i.length);let v;(x=e==null?void 0:e.scaleBaked)!=null&&x.some(w=>w!==1)&&(v=new Ae().makeScale(...e.scaleBaked)),t&&(v?v.premultiply(t):v=t);let y=v?at.alloc_subdivision_surface2(f,o,f+p,l,f+p+i.length*Uint32Array.BYTES_PER_ELEMENT,h,v.elements):at.alloc_subdivision_surface(f,o,f+p,l,f+p+i.length*Uint32Array.BYTES_PER_ELEMENT,h);return at._free(f),y}static buildLevel(e,t,r,i,n){let s=n?at.get_mesh_data2(e,t?at.Level.CONTROL:at.Level.REFINED,r,n.elements):at.get_mesh_data(e,t?at.Level.CONTROL:at.Level.REFINED,r),a=8,o=at.HEAPU32.subarray(s>>2,(s>>2)+a),l=o.subarray(4,4+4),h=0,c=at.HEAPU32[o[h]>>2],u=at.HEAPF32.subarray(c>>2,(c>>2)+l[h]);h++;let d=at.HEAPU32[o[h]>>2],p=at.HEAPF32.subarray(d>>2,(d>>2)+l[h]);h++;let f=at.HEAPU32[o[h]>>2],m=at.HEAPU32.subarray(f>>2,(f>>2)+l[h]);h++;let g=at.HEAPU32[o[h]>>2],v=at.HEAPU32.subarray(g>>2,(g>>2)+l[h]);if(h++,i===void 0){let y=new dt;if(y.setIndex(new dp(v,1)),y.setAttribute("position",new Ke(u,3)),y.setAttribute("normal",new Ke(p,3)),t){y.setAttribute("faceMap",new dp(m,1));let x=new Float32Array(p.length/3*4).fill(0);y.setAttribute("color",new pt(x,4))}return at.free_mesh_data(s),y.userData.type="SubdivGeometry",y}i.getAttribute("position").copyArray(u),i.getAttribute("normal").copyArray(p),i.attributes.position.needsUpdate=!0,i.attributes.normal.needsUpdate=!0,at.free_mesh_data(s)}static freeSubdivPointer(e){at.free_bvh(e),at.free_subdivision_surface(e)}static buildControlCageWireframe(e,t,r){let i=at.get_wireframe_data_for_base_level(e),n=4,s=at.HEAPU32.subarray(i>>2,(i>>2)+n),a=s.subarray(2,2+2),o=0,l=at.HEAPU32[s[o]>>2],h=at.HEAPF32.subarray(l>>2,(l>>2)+a[o]);o++;let c=at.HEAPU32[s[o]>>2],u=at.HEAPU32.subarray(c>>2,(c>>2)+a[o]);if(t===void 0){let d=new dt;d.setAttribute("position",new Ke(h,3));let p=new Float32Array(h.length);for(let f=0,m=h.length;f<m;)p[f++]=r.r,p[f++]=r.g,p[f++]=r.b;return d.setAttribute("color",new pt(p,3)),d.setIndex(new dp(u,1)),at.free_wireframe_data_for_base_level(i),d}t.getAttribute("position").copyArray(h),t.attributes.position.needsUpdate=!0,at.free_wireframe_data_for_base_level(i)}static updateCollabMesh(e,t,r){let i=t===0;i||at.set_destination_refinement_level(e,t);let n=r?at.get_topological_data2(e,i?at.Level.CONTROL:at.Level.REFINED,r.elements):at.get_topological_data(e,i?at.Level.CONTROL:at.Level.REFINED),s=6,a=at.HEAPU32.subarray(n>>2,(n>>2)+s),o=a.subarray(3,3+3),l=0,h=at.HEAPU32[a[l]>>2],c=new Float32Array(at.HEAPF32.subarray(h>>2,(h>>2)+o[l]));l++;let u=at.HEAPU32[a[l]>>2],d=new Uint32Array(at.HEAPU32.subarray(u>>2,(u>>2)+o[l]));l++;let p=at.HEAPU32[a[l]>>2],f=new Uint8Array(at.HEAPU32.subarray(p>>2,(p>>2)+o[l]));return at.free_topological_data(n),{positions:c,indices:d,verticesPerFace:f}}},oT=["getX","getY","getZ"];function jy(e,t){let r={},i=t?t.count:e.count,n=0,s=[],a=[],o=1e4;for(let h=0;h<i;h++){let c=t?t.getX(h):h,u="";for(let d=0;d<3;d++)u+=`${~~(e[oT[d]](c)*o)},`;if(u in r)s.push(r[u]);else{for(let d=0;d<3;d++)a.push(e[oT[d]](c));r[u]=n,s.push(n),n++}}let l=[];for(let h=0;h<s.length;h+=3)s[h]===s[h+1]||s[h]===s[h+2]||s[h+1]===s[h+2]||l.push(s[h],s[h+1],s[h+2]);return{positions:a,triIndices:l}}var vv=new E,ex=new E,tx=new E,rx=new E;function Gz(e,t,r,i){let n=[],s=[];if(r.userData.shape!==void 0&&r.userData.parameters.depth===0&&r.userData.shape.shapeHoles.length===0){let l=r.userData.shape.extractShapePointsToFlatArray([]),h=r.userData.parameters.spikes;if(r.userData.type==="EllipseGeometry"&&h<=24&&h%4===0&&r.userData.parameters.angle>=360){let d=l.length/2/h;l=l.filter((p,f)=>Math.floor(f/2)%d===0)}let c=0;for(let d=0;d<l.length;d+=2)c+=(l[d]-l[(d===0?l.length:d)-2])*(l[d+1]+l[(d===0?l.length:d)-1]);e.length=0;let u=0;if(c<0)for(let d=0;d<l.length;d+=2)e.push(l[d],l[d+1],0),n.push(u++);else for(let d=l.length-2;d>=0;d-=2)e.push(l[d],l[d+1],0),n.push(u++);return s.push(u),{indices:n,verticesPerFace:s}}let a=new Float32Array([r.userData.parameters.depth])[0],o=0;for(;o<t.length;){if(r.useNgonForTopBottomFaceDuringBake){let l=0;if((e[t[o]*3+2]===a||e[t[o]*3+2]===0)&&l++,(e[t[o+1]*3+2]===a||e[t[o+1]*3+2]===0)&&l++,(e[t[o+2]*3+2]===a||e[t[o+2]*3+2]===0)&&l++,l===3)break}if(t[o+1]===t[o+3]&&t[o+2]===t[o+5]||t[o+0]===t[o+3]&&t[o+2]===t[o+4]){vv.set(e[t[o]*3],e[t[o]*3+1],e[t[o]*3+2]),ex.set(e[t[o+1]*3],e[t[o+1]*3+1],e[t[o+1]*3+2]),tx.set(e[t[o+4]*3],e[t[o+4]*3+1],e[t[o+4]*3+2]),rx.set(e[t[o+5]*3],e[t[o+5]*3+1],e[t[o+5]*3+2]),ex.sub(vv).normalize(),tx.sub(vv).normalize(),rx.sub(vv).normalize();let l=ex.cross(tx).dot(rx);Math.abs(l)>.005||i&&i.some((h,c)=>c%2===1?!1:o>=i[c]&&o<i[c+1])?(n.push(t[o],t[o+1],t[o+2]),s.push(3),o+=3):(n.push(t[o],t[o+1],t[o+4],t[o+5]),s.push(4),o+=6)}else n.push(t[o],t[o+1],t[o+2]),s.push(3),o+=3}if(r.useNgonForTopBottomFaceDuringBake){let l=[],h=[],c=0;for(let u=0,d=0;u<e.length;u+=3,d++)e[u+2]===0&&(l.push(d),c++),e[u+2]===a&&h.push(d);if(r.userData.parameters.extrudeBevelSize===0){let u=h[0];h[0]=h[1],h[1]=u}l.reverse(),n.push(...l,...h),s.push(c,c)}return{indices:n,verticesPerFace:s}}var $o={};sW($o,{calcBoolean:()=>Cue,calcBooleanTopological:()=>_ue,freeMeshSet:()=>Eue,getMeshSet:()=>Sue,hasOpenEdges:()=>Mue,transformMeshSet:()=>Aue});var Hz,xue=new Promise(e=>{Hz=e}),yv;function wue(){if(yv)return yv;async function e(){let t="https://unpkg.com/@splinetool/boolean-wasm@0.9.450/build",r=Am(()=>import("./boolean-613a7c9c.js"),[]),[i,n]=await Promise.all([r,fetch(`${t}/boolean.wasm`).then(o=>o.arrayBuffer())]),s=i.default,a=await s({wasmBinary:n});Hz(a)}return yv=e(),yv}var Ot,_p;xue.then(e=>Ot=e);function bue(e,t,r){let i,n;e.userData.parameters.type==="TorusGeometry"&&e.userData.parameters.arc===Math.PI*2?n=e.getClosedTorusIndicesForBooleanOrSubdiv():n=e.getIndex();let{positions:s,triIndices:a}=jy(e.getAttribute("position"),n),o;if(t&&r){let{indices:l,verticesPerFace:h}=Gz(s,a,e);o=h.length,i=[];for(let c=0,u=0;c<o;c++){i.push(h[c]);for(let d=0;d<h[c];d++)i.push(l[u++])}}else{let l=a.length;i=Array(l+l/3),o=0;for(let h=0,c=0;c<i.length;)i[c++]=3,o++,i[c++]=a[h++],i[c++]=a[h++],i[c++]=a[h++]}return{positions:s,faceIndices:i,nFaces:o}}function Wz(e){let t=e.length,r=t*Uint32Array.BYTES_PER_ELEMENT,i=t*Float32Array.BYTES_PER_ELEMENT,n=Number.isInteger(e[0])?r:i,s=Ot._malloc(n);return(Number.isInteger(e[0])?new Uint32Array(Ot.HEAPU32.buffer,s,t):new Float32Array(Ot.HEAPF32.buffer,s,t)).set(e,0),s}function qz(e){switch(e){case 0:return Ot.OP.UNION;case 1:return Ot.OP.INTERSECTION;case 2:return Ot.OP.A_MINUS_B;case 3:return Ot.OP.B_MINUS_A;case 4:return Ot.OP.SYMMETRIC_DIFFERENCE;case 5:return Ot.OP.ALL;default:throw new Error("Unknown boolean operation "+e)}}function _ue(e,t){_p===void 0&&(_p=Ot.init_csg());let r=Wz(e),i=Ot.csg_calc_topological(_p,r,e.length,qz(t));Ot._free(r);let n=6,s=Ot.HEAPU32.subarray(i>>2,(i>>2)+n),a=s.subarray(3,3+3),o=0,l=Ot.HEAPU32[s[o]>>2],h=new Float32Array(Ot.HEAPF32.subarray(l>>2,(l>>2)+a[o]));o++;let c=Ot.HEAPU32[s[o]>>2],u=new Uint32Array(Ot.HEAPU32.subarray(c>>2,(c>>2)+a[o]));o++;let d=Ot.HEAPU32[s[o]>>2],p=new Uint8Array(Ot.HEAPU32.subarray(d>>2,(d>>2)+a[o]));return Ot.free_mesh_data(i),{positions:h,indices:u,verticesPerFace:p}}function Cue(e,t,r,i){_p===void 0&&(_p=Ot.init_csg());let n=Wz(e),s=Ot.csg_calc(_p,n,e.length,i,qz(t));Ot._free(n);let a=5,o=Ot.HEAPU32.subarray(s>>2,(s>>2)+a),l=o.subarray(2,2+3),h=0,c=Ot.HEAPU32[o[h]>>2],u=Ot.HEAPF32.subarray(c>>2,(c>>2)+l[h]);h++;let d=Ot.HEAPU32[o[h]>>2],p=Ot.HEAPF32.subarray(d>>2,(d>>2)+l[h]);h++;let f=l[h];r.setAttribute("position",new Ke(u,3)),r.setAttribute("normal",new Ke(p,3));let m=Ot.HEAPF32.subarray((s>>2)+5,(s>>2)+5+6);return r.boundingSphere===null&&(r.boundingSphere=new _s),r.boundingSphere.center.set(m[0],m[1],m[2]),r.boundingSphere.radius=(m[3]**2+m[4]**2+m[5]**2)**.5,r.userData.parameters={width:m[3]*2,height:m[4]*2,depth:m[5]*2},Ot.free_mesh_data(s),f}function Sue(e,t,r){if(Ot===void 0)return-1;let i,n,s;if(t&&e.userData.positions!==void 0){let m=e.userData;s=m.verticesPerFace.length,i=m.positions,n=Array(m.verticesPerFace.reduce((g,v)=>g+v,0)+s);for(let g=0,v=0,y=0;g<m.verticesPerFace.length;g++){n[y++]=m.verticesPerFace[g];for(let x=0;x<m.verticesPerFace[g];x++)n[y++]=m.indices[v++]}}else({positions:i,faceIndices:n,nFaces:s}=bue(e,t,r));let a=i.length,o=n.length,l=i.length,h=n.length,c=l*Float32Array.BYTES_PER_ELEMENT+h*Uint32Array.BYTES_PER_ELEMENT,u=l*Float32Array.BYTES_PER_ELEMENT,d=Ot._malloc(c),p=new Float32Array(Ot.HEAPF32.buffer,d,l),f=new Uint32Array(Ot.HEAPU32.buffer,d+u,h);return p.set(i,0),f.set(n,0),Ot.get_csg_mesh(d,a,d+u,o,s)}function Mue(e){return Ot.has_open_edges(e)}function Aue(e,t){Ot.transform_csg_mesh(e,t.elements)}function Eue(e){Ot.free_csg_mesh(e)}var Tue={ConeGeometry:nhe,CubeGeometry:she,CylinderGeometry:wz,DodecahedronGeometry:ohe,EllipseGeometry:Db,HelixGeometry:Fhe,IcosahedronGeometry:Uhe,LatheGeometry:jhe,NonParametricGeometry:Yhe,PolygonGeometry:kz,PyramidGeometry:Qhe,RectangleGeometry:Nz,SphereGeometry:$he,PlaneGeometry:Jhe,BackdropGeometry:eue,StarGeometry:Fz,TextFrameGeometry:rue,TorusGeometry:iue,TorusKnotGeometry:sue,TriangleGeometry:aue,PathGeometry:cue,VectorGeometry:Lc},lT=e=>Tue[e.type].create(e);function l1(e){return e!==null&&"booleanOp"in e}var Xz=class extends Mb(kn){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new Ae}updateVisible(){super.updateVisible(),this.visible=!l1(this.parent)&&this.visible,l1(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&($o.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(e=!1){return e?this.booleanWasTransformed=!0:this.freeBooleanPointer(),l1(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)e instanceof Xz&&(e.freeBooleanPointer(),l1(e)&&e.invalidateUpstreamBooleanData())}updateTransformState(e){let t=super.updateTransformState(e);return t&&l1(this.parent)&&this.invalidateDownstreamBooleanData(!0),t}},xv=new qr;function Ib(e,t=0,r=e.count,i,n){let s=1/0,a=1/0,o=1/0,l=-1/0,h=-1/0,c=-1/0;for(let u=t;u<r;u++){let d=e.getX(u),p=e.getY(u),f=e.getZ(u);d<s&&(s=d),p<a&&(a=p),f<o&&(o=f),d>l&&(l=d),p>h&&(h=p),f>c&&(c=f)}xv.min.set(s,a,o),xv.max.set(l,h,c),xv.getCenter(i),xv.getSize(n).multiplyScalar(.5)}var Lue=new dt,Pue=new Lm,Qn=class extends Xz{constructor(e,t){super(Lue,Pue),this.super_Entity(e,t)}updateState(e,t){this.updateState_Entity(e,t)}updateEntityBoxSize(e,t){let r=this.geometry.getAttribute("position");r!==void 0?Ib(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,e,t):super.updateEntityBoxSize(e,t)}},hT=class{constructor(e){e=e??{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},tu=class{constructor(e){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=Tt.generateUUID(),this.type=e,this.name=""}analyze(e,t){t=t??{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,r){return r=r??{},this.analyze(e,r),this.flow(e,t,r)}flow(e,t,r){r=r??{},e.addFlow(r.slot,r.cache,r.context);let i={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),i}build(e,t,r){t=t??this.getType(e,t);let i=e.getNodeData(r??this);return e.analyzing&&this.appendDepsNode(e,i,t),e.nodes.indexOf(this)===-1&&e.nodes.push(this),this.updateFrame!==void 0&&e.updaters.indexOf(this)===-1&&e.updaters.push(this),this.generate(e,t,r)}updateFrame(e){}generateReadonly(e,t,r,i,n,s){return""}generate(e,t,r,i,n){return""}parse(e,t,r,i){}appendDepsNode(e,t,r){t.deps=(t.deps||0)+1;let i=e.getTypeLength(r);(i>(t.outputMax||0)||this.getType(e,r))&&(t.outputMax=i,t.output=r)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return t==="sampler2D"||t==="samplerCube"?t:this.type}getHash(){let e="{",t,r;for(t in this)r=this[t],r instanceof tu&&(e+='"'+t+'":'+r.getHash()+",");if(this.hashProperties)for(let i=0;i<this.hashProperties.length;i++)t=this.hashProperties[i],r=this[t],e+='"'+t+'":"'+String(r)+'",';return e+='"id":"'+this.uuid+'"}',e}},Due=class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,r){r=r!==void 0?r:!0,this.keywords[e]={callback:t,cache:r}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return this.nodes[e]!==void 0}containsKeyword(e){return this.keywords[e]!==void 0}},Bn=new Due,nr=class extends tu{constructor(e,t){super(e),this.scope="",t=t??{},this.shared=t.shared!==void 0?t.shared:!0,this.unique=t.unique!==void 0?t.unique:!1}build(e,t,r,i){if(t=t??this.getType(e),this.getShared(e,t)){let n=this.getUnique(e,t);n&&this.uuid===void 0&&(this.uuid=Tt.generateUUID()),r=e.getUUID(r??this.getUUID(),!n);let s=e.getNodeData(r),a=s.output||this.getType(e);if(e.analyzing)return(s.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,s,t),this.generate(e,t,r)):super.build(e,t,r);if(n)return s.name=s.name||super.build(e,t,r),s.name;if(!this.getLabel()&&(!this.getShared(e,a)||e.context.ignoreCache||s.deps===1))return super.build(e,t,r);r=this.getUUID(!1);let o=this.getTemp(e,r);if(o)return e.format(o,a,t);{o=super.generate(e,t,r,s.output,i);let l=this.generate(e,a,r);return e.addNodeCode(o+" = "+l+";"),e.format(o,a,t)}}return super.build(e,t,r)}getShared(e,t){return t!=="sampler2D"&&t!=="samplerCube"&&this.shared}getUnique(e,t){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let t=this.uuid;return typeof this.scope=="string"&&(t=this.scope+"-"+t),t}getTemp(e,t){t=t||this.uuid;let r=e.getVars()[t];return r?r.name:void 0}generate(e,t,r,i,n){return this.getShared(e,t)||console.error("TempNode is not shared"),r=r??this.uuid,e.getTempVar(r,i??this.getType(e),n,this.getLabel()).name}},Kn=class extends nr{constructor(e,t){t=t??{},t.shared=t.shared!==void 0?t.shared:!1,super(e,t),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(e,t,r,i,n,s){r=e.getUUID(r??this.getUUID()),i=i??this.getType(e);let a=e.getNodeData(r);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(e,t,r,i,n,s):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(i,this,n,s,this.getLabel())),e.format(a.vertex.name,i,t)):(a.fragment||(a.fragment=e.createFragmentUniform(i,this,n,s,this.getLabel())),e.format(a.fragment.name,i,t))}},Ii=class extends Kn{constructor(e=0,t){super("v2"),this.nodeType="Vector2",this.value=e instanceof X?e:new X(e,t)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,t,r,i,n,s){return e.format("vec2("+this.value.x+", "+this.value.y+")",i,t)}},Bs=class extends Kn{constructor(t=0,r,i){super("v3"),this.nodeType="Vector3",this.value=t instanceof E?t:new E(t,r,i)}get x(){return this.value.x}set x(t){this.value.x=t}get y(){return this.value.y}set y(t){this.value.y=t}get z(){return this.value.z}set z(t){this.value.z=t}generateReadonly(t,r,i,n,s,a){return t.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",n,r)}},Xn=class extends lt{constructor(e,t,r,i){super(e,t,r),this.isColorA=!0,this.a=i}setRGBA(e,t,r,i){super.setRGB(e,t,r),this.a=i}copy(e){return super.copy(e),this.a="a"in e?e.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}setStyle(e,t="srgb"){let r;if(e==="transparent")return this.setRGBA(0,0,0,0),this;if(r=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(e)){let i,n=r[1],s=r[2];switch(n){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.a=n==="rgba"?parseFloat(i[4]):1,super.setStyle(e,t);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.a=n==="hsla"?parseFloat(i[4]):1,super.setStyle(e,t);break}}return super.setStyle(e,t)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}},Jo=class extends Kn{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof Xn?e:new Xn(e.r,e.g,e.b,e.a)}generateReadonly(e,t,r,i,n,s){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",i,t)}},Oue=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,uT=/[a-z_0-9]+/gi,Be=class extends nr{constructor(e,t,r,i,n){super(n),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=n===void 0,this.isInterface=!1,this.parse(e,t,r,i)}getShared(e,t){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}}getIncludeByName(e){if(this.includes){let t=this.includes.length;for(;t--;)if(this.includes[t].name===e)return this.includes[t]}}generate(e,t,r,i,n){let s,a=0,o=this.src;if(this.includes)for(let h=0;h<this.includes.length;h++)e.include(this.includes[h],this);for(let h in this.extensions)e.extensions[h]=!0;let l=[];for(;s=uT.exec(this.src);)l.push(s);for(let h=0;h<l.length;h++){let c=l[h],u=c[0],d=this.isMethod?!this.getInputByName(u):!0,p=u;if(this.keywords[u]||this.useKeywords&&d&&Bn.containsKeyword(u)){let f=this.keywords[u];if(!f){let m=Bn.getKeywordData(u);m.cache&&(f=e.keywords[u]),f=f||Bn.getKeyword(u,e),m.cache&&(e.keywords[u]=f)}p=f.build(e)}u!==p&&o[c.index+a-1]!=="."&&(o=o.substring(0,c.index+a)+p+o.substring(c.index+u.length+a),a+=p.length-u.length),this.getIncludeByName(p)===void 0&&Bn.contains(p)&&e.include(Bn.get(p))}return t==="source"?o:this.isMethod?(this.isInterface||e.include(this,void 0,o),this.name):e.format("( "+o+" )",this.getType(e),t)}parse(e,t,r,i){if(this.src=e||"",this.includes=t??[],this.extensions=r??{},this.keywords=i??{},this.isMethod){let n=Oue.exec(this.src);if(this.inputs=[],n&&n.length==4){this.type=n[1],this.name=n[2];let s=n[3].match(uT);if(s){let a=0;for(;a<s.length;){let o=s[a++],l;o==="in"||o==="out"||o==="inout"?l=s[a++]:(l=o,o="");let h=s[a++];this.inputs.push({name:h,type:l,qualifier:o})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},Iue=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,Yz=class extends nr{constructor(e="",t){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||Yz.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,r,i,n){this.src=e||"";let s,a,o="",l=Iue.exec(e);this.useDefine=n??this.src.charAt(0)==="#",l&&l.length>1?(a=l[1],s=l[2],o=l[3]):(s=this.src,a="f"),this.name=s,this.type=a,this.value=o}build(e,t){if(t==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,r,i,n){return e.format(this.name,this.getType(e),t)}},Jt=Yz;Jt.PI="PI",Jt.PI2="PI2",Jt.RECIPROCAL_PI="RECIPROCAL_PI",Jt.RECIPROCAL_PI2="RECIPROCAL_PI2",Jt.LOG2="LOG2",Jt.EPSILON="EPSILON";var Rue=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),Bue=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),Qz=class extends nr{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,r,i,n){return t==="source"?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(e=""){this.src=e,this.inputs=[];let t=Rue.exec(e);if(t){let r=t[2],i;for(;i=Bue.exec(r);)this.inputs.push({type:i[1],name:i[2]});this.name=t[1]}else this.name="";this.type=this.name}},Rb=class extends nr{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=e??0}generate(e,t){e.requires.uv[this.index]=!0;let r=this.index>0?this.index+1:"",i=e.isShader("vertex")?"uv"+r:"vUv"+r;return e.format(i,this.getType(e),t)}};Bn.addKeyword("uv",function(){return new Rb});Bn.addKeyword("uv2",function(){return new Rb(1)});var wd=class extends nr{constructor(e,t){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=t??wd.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case Mo:return["Linear"];case _t:return["sRGB"];default:return[]}}generate(e,t){var a;let r=this.input.build(e,"v4"),i=this.getType(e),n=wd.Nodes[this.method],s=e.include(n);if(s===wd.LINEAR_TO_LINEAR)return e.format(r,i,t);if(((a=n.inputs)==null?void 0:a.length)===2){let o=this.factor.build(e,"f");return e.format(s+"( "+r+", "+o+" )",i,t)}else return e.format(s+"( "+r+" )",i,t)}fromEncoding(e){let t=wd.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=wd.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}},mo=wd;mo.Nodes={LinearToLinear:new Be(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new Be(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new Be(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},mo.LINEAR_TO_LINEAR="LinearToLinear",mo.SRGB_TO_LINEAR="sRGBToLinear",mo.LINEAR_TO_SRGB="LinearTosRGB";var pr=class extends Be{constructor(e="",t,r,i,n){super(e,n,i,r,t),this.nodeType="Expression"}},hl=class extends Kn{constructor(e=new ui,t,r,i){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=t??new Rb,this.bias=r,this.project=i!==void 0?i:!1}getTexture(e,t){return super.generate(e,t,this.value.uuid,"t")}generate(e,t){if(t==="sampler2D")return this.getTexture(e,t);let r=this.getTexture(e,t),i=this.uv.build(e,this.project?"v4":"v2"),n=this.bias?this.bias.build(e,"f"):void 0;n===void 0&&e.context.bias&&(n=e.context.bias.setTexture(this).build(e,"f"));let s,a;this.project?s="texture2DProj":s=n?"tex2DBias":"tex2D",n?a=s+"( "+r+", "+i+", "+n+" )":a=s+"( "+r+", "+i+" )";let o={include:e.isShader("vertex"),ignoreCache:!0},l=this.getType(e);return e.addContext(o),this.colorSpace=this.colorSpace??new mo(new pr("",l)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(a),a=this.colorSpace.build(e,l),e.removeContext(),e.format(a,l,t)}},qe=class extends Kn{constructor(e){super("f"),this.nodeType="Float",this.value=e??0}generateReadonly(e,t,r,i,n,s){return e.format(this.value+(this.value%1?"":".0"),i,t)}},cT=class extends nr{constructor(e,t){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=t??[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,r,i,n){i=this.getType(e);let s=this.value,a=s.build(e,t)+"( ",o=[];if(s.inputs){for(let l=0;l<s.inputs.length;l++){let h=s.inputs[l],c=this.inputs[l]||this.inputs[h.name];o.push(c.build(e,e.getTypeByFormat(h.type)))}a+=o.join(", ")+" )"}return e.format(a,i,t)}},Zz=class extends nr{constructor(e,t,r=Zz.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=r}getType(e){let t=this.a.getType(e),r=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(r)>e.getTypeLength(t)?r:t}generate(e,t){let r=this.getType(e);this.type=r;let i=this.a.build(e,r),n=this.b.build(e,r);return e.format("( "+i+" "+this.op+" "+n+" )",r,t)}},Ln=Zz;Ln.ADD="+",Ln.SUB="-",Ln.MUL="*",Ln.DIV="/";var $t=class extends nr{constructor(e,t=$t.ABS,r,i){super(),this.nodeType="Math",this.a=e,typeof t!="string"?this.b=t:i=t,typeof r!="string"?this.c=r:i=r,this.method=i,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case $t.MIX:case $t.CLAMP:case $t.REFRACT:case $t.SMOOTHSTEP:case $t.FACEFORWARD:return 3;case $t.MIN:case $t.MAX:case $t.MOD:case $t.STEP:case $t.REFLECT:case $t.DISTANCE:case $t.DOT:case $t.CROSS:case $t.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),r=this.b?e.getTypeLength(this.b.getType(e)):0,i=this.c?e.getTypeLength(this.c.getType(e)):0;return t>r&&t>i?this.a.getType(e):r>i?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case $t.LENGTH:case $t.DISTANCE:case $t.DOT:return"f";case $t.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let r,i,n,s=this.a?e.getTypeLength(this.a.getType(e)):0,a=this.b?e.getTypeLength(this.b.getType(e)):0,o=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),h=this.getType(e);switch(this.type=h,this.method){case $t.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case $t.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case $t.CROSS:r=this.a.build(e,"v3"),i=this.b.build(e,"v3");break;case $t.STEP:r=this.a.build(e,s===1?"f":l),i=this.b.build(e,l);break;case $t.MIN:case $t.MAX:case $t.MOD:r=this.a.build(e,l),i=this.b.build(e,a===1?"f":l);break;case $t.REFRACT:r=this.a.build(e,l),i=this.b.build(e,l),n=this.c.build(e,"f");break;case $t.MIX:r=this.a.build(e,l),i=this.b.build(e,l),n=this.c.build(e,o===1?"f":l);break;default:r=this.a.build(e,l),this.b&&(i=this.b.build(e,l)),this.c&&(n=this.c.build(e,l));break}let c=[];c.push(r),i&&c.push(i),n&&c.push(n);let u=this.getNumInputs(e);if(c.length!==u)throw Error(`Arguments not match used in "${this.method}". Require ${u}, currently ${c.length}.`);return e.format(this.method+"( "+c.join(", ")+" )",h,t)}},xt=$t;xt.RAD="radians",xt.DEG="degrees",xt.EXP="exp",xt.EXP2="exp2",xt.LOG="log",xt.LOG2="log2",xt.SQRT="sqrt",xt.INV_SQRT="inversesqrt",xt.FLOOR="floor",xt.CEIL="ceil",xt.NORMALIZE="normalize",xt.FRACT="fract",xt.SATURATE="saturate",xt.SIN="sin",xt.COS="cos",xt.TAN="tan",xt.ASIN="asin",xt.ACOS="acos",xt.ARCTAN="atan",xt.ABS="abs",xt.SIGN="sign",xt.LENGTH="length",xt.NEGATE="negate",xt.INVERT="invert",xt.MIN="min",xt.MAX="max",xt.MOD="mod",xt.STEP="step",xt.REFLECT="reflect",xt.DISTANCE="distance",xt.DOT="dot",xt.CROSS="cross",xt.POW="pow",xt.MIX="mix",xt.CLAMP="clamp",xt.REFRACT="refract",xt.SMOOTHSTEP="smoothstep",xt.FACEFORWARD="faceforward";var k1=class extends nr{constructor(e,t,r){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=r}bilinearCubeUV(e,t,r,i){let n=new cT(k1.Nodes.bilinearCubeUV,[t,r,i]);this.colorSpaceTL=this.colorSpaceTL??new mo(new pr("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(n.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new mo(new pr("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(n.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new mo(new pr("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(n.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new mo(new pr("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(n.build(e)+".br");let s={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(s),this.colorSpaceTLExp=new pr(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new pr(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new pr(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new pr(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let a=new pr("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return a.keywords.cubeUV_TL=this.colorSpaceTLExp,a.keywords.cubeUV_TR=this.colorSpaceTRExp,a.keywords.cubeUV_BL=this.colorSpaceBLExp,a.keywords.cubeUV_BR=this.colorSpaceBRExp,a.keywords.cubeUV=n,a}generate(e,t){if(e.isShader("fragment")){let r=this.uv,i=this.bias||e.context.roughness,n=new cT(k1.Nodes.roughnessToMip,[i]),s=new xt(n,k1.Nodes.m0,k1.Nodes.cubeUV_maxMipLevel,xt.CLAMP),a=new xt(s,xt.FLOOR),o=new xt(s,xt.FRACT),l=this.bilinearCubeUV(e,this.value,r,a),h=this.bilinearCubeUV(e,this.value,r,new Ln(a,new qe(1).setReadonly(!0),Ln.ADD)),c=new xt(l,h,o,xt.MIX);return e.format(c.build(e),"v4",t)}else return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}},S8=k1;S8.Nodes=function(){let e=new Qz(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),t=new Jt("float cubeUV_maxMipLevel 8.0",!0),r=new Jt("float cubeUV_minMipLevel 4.0",!0),i=new Jt("float cubeUV_maxTileSize 256.0",!0),n=new Jt("float cubeUV_minTileSize 16.0",!0),s=new Be(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);s.useKeywords=!1;let a=new Be(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);a.useKeywords=!1;let o=new Be(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[e,s,a,t,r,i,n]);o.useKeywords=!1;let l=new Jt("float r0 1.0",!0),h=new Jt("float v0 0.339",!0),c=new Jt("float m0 -2.0",!0),u=new Jt("float r1 0.8",!0),d=new Jt("float v1 0.276",!0),p=new Jt("float m1 -1.0",!0),f=new Jt("float r4 0.4",!0),m=new Jt("float v4 0.046",!0),g=new Jt("float m4 2.0",!0),v=new Jt("float r5 0.305",!0),y=new Jt("float v5 0.016",!0),x=new Jt("float m5 3.0",!0),w=new Jt("float r6 0.21",!0),_=new Jt("float v6 0.0038",!0),b=new Jt("float m6 4.0",!0),S=[l,h,c,u,d,p,f,m,g,v,y,x,w,_,b],C=new Be(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,S);return{bilinearCubeUV:o,roughnessToMip:C,m0:c,cubeUV_maxMipLevel:t}}();var bd=class extends nr{constructor(e){super("v3"),this.nodeType="Normal",this.scope=e??bd.VIEW}getShared(){return this.scope===bd.WORLD}build(e,t,r,i){let n=e.context[this.scope+"Normal"];return n?n.build(e,t,r,i):super.build(e,t,r)}generate(e,t,r,i,n){let s;switch(this.scope){case bd.VIEW:e.isShader("vertex")?s="transformedNormal":s="geometryNormal";break;case bd.LOCAL:e.isShader("vertex")?s="objectNormal":(e.requires.normal=!0,s="vObjectNormal");break;case bd.WORLD:e.isShader("vertex")?s="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,s="vWNormal");break}return e.format(s,this.getType(e),t)}},Nn=bd;Nn.LOCAL="local",Nn.WORLD="world",Nn.VIEW="view",Nn.NORMAL="normal";Bn.addKeyword("viewNormal",function(){return new Nn(Nn.VIEW)});Bn.addKeyword("localNormal",function(){return new Nn(Nn.NORMAL)});Bn.addKeyword("worldNormal",function(){return new Nn(Nn.WORLD)});var Yo=class extends nr{constructor(e){super("v3"),this.nodeType="Position",this.scope=e??Yo.LOCAL}getType(){switch(this.scope){case Yo.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case Yo.LOCAL:case Yo.WORLD:return!1}return!0}generate(e,t,r,i,n){let s;switch(this.scope){case Yo.LOCAL:e.isShader("vertex")?s="transformed":(e.requires.position=!0,s="vPosition");break;case Yo.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,s="vWPosition";break;case Yo.VIEW:s=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case Yo.PROJECTION:s=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return e.format(s,this.getType(),t)}},Ta=Yo;Ta.LOCAL="local",Ta.WORLD="world",Ta.VIEW="view",Ta.PROJECTION="projection";Bn.addKeyword("position",function(){return new Ta});Bn.addKeyword("worldPosition",function(){return new Ta(Ta.WORLD)});Bn.addKeyword("viewPosition",function(){return new Ta(Ta.VIEW)});var eo=class extends nr{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=e??eo.CUBE}getUnique(e){return!e.context.viewNormal}getType(){switch(this.scope){case eo.SPHERE:return"v2"}return this.type}generate(e,t){let r=this.getUnique(e);if(e.isShader("fragment")){let i;switch(this.scope){case eo.VECTOR:{let n=new Nn(Nn.VIEW),s=e.context.roughness,a=n.build(e,"v3"),o=new Ta(Ta.VIEW).build(e,"v3"),l=s?s.build(e,"f"):void 0,h=`reflect( -normalize( ${o} ), ${a} )`;l&&(h=`normalize( mix( ${h}, ${a}, ${l} * ${l} ) )`);let c=`inverseTransformDirection( ${h}, viewMatrix )`;r?(e.addNodeCode(`vec3 reflectVec = ${c};`),i="reflectVec"):i=c;break}case eo.CUBE:{let n=new eo(eo.VECTOR).build(e,"v3"),s="vec3( -"+n+".x, "+n+".yz )";r?(e.addNodeCode(`vec3 reflectCubeVec = ${s};`),i="reflectCubeVec"):i=s;break}case eo.SPHERE:{let n="normalize( ( viewMatrix * vec4( "+new eo(eo.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";r?(e.addNodeCode(`vec2 reflectSphereVec = ${n};`),i="reflectSphereVec"):i=n;break}}return e.format(i,this.getType(),t)}else return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}},Cp=eo;Cp.CUBE="cube",Cp.SPHERE="sphere",Cp.VECTOR="vector";var zue=class extends nr{constructor(e=new hl,t,r){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new S8(this.value,t??new Cp(Cp.VECTOR),r),this.irradianceNode=new S8(this.value,new Nn(Nn.WORLD),new qe(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),(e.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}},kue=class extends Kn{constructor(e=new Rw,t,r){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=t??new Cp,this.bias=r}getTexture(e,t){return super.generate(e,t,this.value.uuid,"tc")}generate(e,t){var l;if(t==="samplerCube")return this.getTexture(e,t);let r=this.getTexture(e,t),i=(l=this.uv)==null?void 0:l.build(e,"v3"),n=this.bias?this.bias.build(e,"f"):void 0;n===void 0&&e.context.bias&&(n=e.context.bias.setTexture(this).build(e,"f"));let s;n?s="texCubeBias( "+r+", "+i+", "+n+" )":s="texCube( "+r+", "+i+" )";let a={include:e.isShader("vertex"),ignoreCache:!0},o=this.getType(e);return e.addContext(a),this.colorSpace=this.colorSpace??new mo(new pr("",o)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(s),s=this.colorSpace.build(e,o),e.removeContext(),e.format(s,o,t)}},Nue=`
uniform int frameIndex;
uniform vec2 resolution;
uniform mat4 previousModelViewMatrix;
uniform mat4 previousProjectionMatrix;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;
`,Fue=`
layout(location = 1) out vec4 gVelocity;

uniform int frameIndex;
uniform vec2 resolution;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;

const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}

// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso
float getNoiseInterleavedGradient(vec2 screenPos) {
    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);
    return fract(magic.z * fract(dot(screenPos, magic.xy)));
}

`,Uue=`
// TODO: This could be generated CPU side and passed to the shader every frame
const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

// TODO: Pass correct view size
vec2 offset = haltonSequence[frameIndex];
offset.x /= resolution.x;
offset.y /= resolution.y;

vec4 currentPosition = gl_Position;
vec4 currentPositionJittered = currentPosition + (vec4(offset.x, offset.y, 0.0, 0.0) * currentPosition.w);

// We want to calculate the velocity with unjittered positions
// so that things that are not moving get a velocity = 0
vCurrentPosition = currentPosition;
vPreviousPosition = previousProjectionMatrix * previousModelViewMatrix * vec4(transformed, 1.0);
#ifdef OUTLINE_COMPENSATION
vPreviousPosition.xy += OUTLINE_COMPENSATION;
#endif
gl_Position = currentPositionJittered;

`,jue=`
vec2 oldPos = vPreviousPosition.xy;
    oldPos /= vPreviousPosition.w;
    oldPos.xy = (oldPos.xy+1.)/2.0;

vec2 newPos = vCurrentPosition.xy;
    newPos /= vCurrentPosition.w;
    newPos.xy = (newPos.xy+1.)/2.0;

vec2 velocity = (newPos - oldPos);

// Discard fully transparent pixels 
if (gl_FragColor.a <= 0.0) discard;

gVelocity = vec4(velocity, 0.0, 1.0);
`,dT=["x","y","z","w"],Vue=["float","vec2","vec3","vec4"],Gue={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},Hue={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},Wue=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.needsJitter=!0,this.getIncludesCode=function(){function e(t,r){return t.deps.length-r.deps.length}return function(t,r){let i=this.getIncludes(t,r);if(!i)return"";let n="";i=i.sort(e);for(let s=0;s<i.length;s++)i[s].src&&(n+=i[s].src+`
`);return n}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.addVertexParsCode(Nue),this.addFragmentParsCode(Fue),this.buildShader("vertex",e),this.buildShader("fragment",t);for(let r=0;r<this.requires.uv.length;r++)if(this.requires.uv[r]){let i=r>0?r+1:"";this.addVaryCode("varying vec2 vUv"+i+";"),r>0&&this.addVertexParsCode("attribute vec2 uv"+i+";"),this.addVertexFinalCode("vUv"+i+" = uv"+i+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this.needsJitter&&(this.addVertexFinalCode(Uue),this.addFragmentFinalCode(jue)),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.defines={},this}addFlow(e,t,r){return this.addSlot(e).addCache(t).addContext(r)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){this.fragmentVariables[e]===void 0&&(this.addFragmentCode(`${t} ${e};`),this.fragmentVariables[e]="")}addFragmentParsVariable(e,t){this.fragmentParsVariables[e]===void 0&&(this.addFragmentParsCode(`${t} ${e};`),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,t){this.vertexParsVariables[e]===void 0&&(this.addVertexParsCode(`${t} ${e};`),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[t??this.shader]+=e+`
`}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[t??this.shader]+=e+`
`}clearNodeCode(e){e=e??this.shader;let t=this.nodeCode[e];return this.nodeCode[e]="",t}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[t??this.shader]+=e+`
`}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[t??this.shader]+=e+`
`}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return this.caches.indexOf(e)!==-1}isSlot(e){return this.slots.indexOf(e)!==-1}define(e,t){this.defines[e]=t===void 0?1:t}require(e){this.requires[e]=!0}isDefined(e){return this.defines[e]!==void 0}getVar(e,t,r,i="varying",n="V",s=""){let a=this.getVars(i),o=a[e];if(!o){let l=a.length;o={name:r||"node"+n+l+(s?"_"+s:""),type:t},a.push(o),a[e]=o}return o}getTempVar(e,t,r,i){return this.getVar(e,t,r,this.shader,"T",i)}getAttribute(e,t){if(!this.attributes[e]){let r=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(r.name+" = "+e+";"),this.attributes[e]={varying:r,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join(`
`)}getVarListCode(e,t){t=t??"";let r="";for(let i=0,n=e.length;i<n;++i){let s=e[i],a=s.type,o=s.name,l=s.size,h=this.getFormatByType(a);if(h===void 0)throw new Error("Node pars "+h+" not found.");h.includes("[]")?r+=t+" "+h.substring(0,h.length-2)+" "+o+`[${l}];
`:r+=t+" "+h+" "+o+`;
`}return r}getVars(e){return this.inputs.vars[e??this.shader]}getNodeData(e){let t=e instanceof tu?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,r,i,n,s){if(t.includes("[]")){let a=this.inputs.arrayUniforms,o=a.list.length,l=new hT({type:t,size:r.size,name:i||"nodeUA"+o+(s?"_"+s:""),node:r,needsUpdate:n});return a.list.push(l),a[e].push(l),a[e][l.name]=l,this.uniforms[l.name]=l,l}else{let a=this.inputs.uniforms,o=a.list.length,l=new hT({type:t,name:i||"nodeU"+o+(s?"_"+s:""),node:r,needsUpdate:n});return a.list.push(l),a[e].push(l),a[e][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(e,t,r,i,n){return this.createUniform("vertex",e,t,r,i,n)}createFragmentUniform(e,t,r,i,n){return this.createUniform("fragment",e,t,r,i,n)}include(e,t,r){var s;let i;if(e=typeof e=="string"?Bn.get(e):e,this.context.include===!1)return e.name;e instanceof Be?i=this.includes.functions:e instanceof Jt?i=this.includes.consts:e instanceof Qz&&(i=this.includes.structs);let n=i[this.shader]=i[this.shader]||[];if(e){let a=n[e.name];if(a||(a=n[e.name]={node:e,deps:[]},n.push(a),a.src=e.build(this,"source")),e instanceof Be&&t&&n[t.name]&&n[t.name].deps.indexOf(e)===-1&&(n[t.name].deps.push(e),(s=e.includes)==null?void 0:s.length)){let o=0;do this.include(e.includes[o++],t);while(o<e.includes.length)}return r&&(a.src=r),e.name}else throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return Vue[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return e==="f"?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return e===1?"f":"v"+e}findNode(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(r!=null&&r.isNode)return r}}resolve(...e){for(let t=0;t<arguments.length;t++){let r=e[t];if(r!==void 0){if(r.isNode)return r;if(r.isTexture)switch(r.mapping){case fc:case mc:return new kue(r);case Em:return new zue(new hl(r));default:return new hl(r)}else{if(r.isVector2)return new Ii(r);if(r.isVector3)return new Bs(r);if(r.isVector4)return new Jo(r)}}}}format(e,t,r){switch(this.colorToVector(r+" <- "+t)){case"f <- v2":return e+".x";case"f <- v3":return e+".x";case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":return e+".xy";case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":return"int( "+e+".x )";case"i <- v3":return"int( "+e+".x )";case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return Gue[e]||e}getFormatByType(e){return Hue[e]||e}getUUID(e,t){return t=t!==void 0?t:!0,t&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return dT[e]}getIndexByElement(e){return dT.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=Mo,t===Mo&&this.context.gamma&&(t=_t),t}},Br=class extends Kn{constructor(e=0,t,r,i){super("c"),this.nodeType="Color",this.value=e instanceof Xn?e:new Xn(e||0,t,r,i)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,r,i,n,s){r=e.getUUID(r??this.getUUID()),i=i??this.getType(e);let a=e.getNodeData(r),o=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let l=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return o?this.generateReadonly(e,t,r,i,n,s):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(i,this,n,s,this.getLabel())),e.format(a.vertex.name,i,t)):(a.fragment||(a.fragment=e.createFragmentUniform(i,this,n,s,this.getLabel())),e.format(a.fragment.name,i,t))}generateReadonly(e,t,r,i,n,s){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",i,t)}},ar=class extends Kn{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(e??0)}generateReadonly(e,t,r,i,n,s){return e.format(this.value.toString(),i,t)}},vn=class extends Kn{constructor(e){super("b"),this.nodeType="Bool",this.value=e??!1}generateReadonly(e,t,r,i){return e.format(this.value?"true":"false",i,t)}},bu=class extends Kn{constructor(e=1,t){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:typeof t=="number"?new Array(e).fill(t):new Array(e).fill(0)}},Bb=class extends Kn{},que=class extends Bb{constructor(e){super("v3"),this.image=e,this._value=new E}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},M8=class extends Bb{constructor(e,t){super("t"),this.image=e,this.wrap=t}get value(){return this.image.getTexture(this.wrap)}},Kz=class extends Kn{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=e??new Ci}generateReadonly(e,t,r,i,n,s){return e.format("mat3("+this.value.elements.join(", ")+")",i,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},Lo=class extends Kn{constructor(t){super("m4"),this.nodeType="Matrix4",this.value=t??new Ae}generateReadonly(t,r,i,n,s,a){return t.format("mat4("+this.value.elements.join(", ")+")",n,r)}get elements(){return this.value.elements}set elements(t){this.value.fromArray(t)}};function pT(e,t,r){e.setUvTransform(r[0],r[1],t[0],t[1],0,0,0)}var Xue=class extends Kz{constructor(e,t){super(new Ci),this.repeat=e,this.offset=t,pT(this.value,e,t)}updateMatrix(){pT(this.value,this.repeat,this.offset)}},_u=class extends Kn{constructor(e=1,t){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof Ct?new Array(e).fill(t):new Array(e).fill(new Ct(0))}},fT=class extends nr{constructor(e,t,r,i){super("v3"),this.nodeType="Blend",this.a=e,this.b=t,this.alpha=r,this.mode=i}generate(e,t){if(e.isShader("fragment")){let r=[];return r.push(this.a.build(e,"c")),r.push(this.b.build(e,"c")),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),e.format("spe_blend("+r.join(",")+")",this.getType(e),t)}else return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},$z=class extends nr{constructor(e,t){super("v3"),this.nodeType="CustomColor",this.color=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let r=e.include($z.Nodes.customColor);e.addFragmentVariable(this.calpha,"float");let i=[];return i.push(this.color.build(e,"v3")),i.push(this.mask?`luminance(${this.mask.build(e,"v3")})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("CustomColorNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},A8=$z;A8.Nodes=function(){return{customColor:new Be(`vec3 customColor(vec3 color, float mask, float alpha, out float calpha) {
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color;
			}`)}}();var Jz=class extends nr{constructor(e,t){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let r=e.include(Jz.Nodes.customNormal);e.addFragmentVariable(this.calpha,"float");let i=[];return i.push(this.cnormal.build(e,"v3")),i.push("normal"),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},ek=Jz;ek.Nodes=function(){return{customNormal:new Be(`vec3 customNormal(vec3 cnormal, vec3 norm, float mask, float alpha, out float calpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return normal;
			}`)}}();var N1=class extends nr{constructor(e,t,r,i,n,s,a,o,l,h,c,u){super("v3"),this.nodeType="CustomTexture",this.texture=e,this.textureSize=t,this.crop=r,this.projection=i,this.axis=n,this.side=s,this.size=a,this.blending=o,this.mat=l,this.isMask=u,this.alpha=h,this.mode=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let r=`g${this.uuid.toString().replace(/-/g,"")}`,i;switch(this.projection.value){case 3:i=e.include(N1.Nodes.cylindrical);break;case 2:i=e.include(N1.Nodes.spherical);break;case 1:let s=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],a=["zy","xz","xy"][this.axis.value],o=new Be(`
		vec3 ${r}_planarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 projected = (1. + (position.${a})) / 2.;
				vec2 uvs = ( mat * vec3( (projected * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, mat * ${s}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`);i=e.include(o);break;case 4:i=e.include(N1.Nodes.triplanar);break;default:i=e.include(N1.Nodes.uv);break}e.addFragmentVariable(this.calpha,"float");let n=[];if(n.push("normal"),n.push(this.texture.generate(e,"t")),n.push(this.textureSize.build(e,"v2")),n.push(this.crop.build(e,"f")),n.push(this.mat.build(e,"mat3")),n.push(this.size.build(e,"v2")),n.push(this.blending.build(e,"f")),n.push(this.isMask.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),this.projection.value===4){let s=`${r}_writeUvs`,a=s+"0",o=s+"1",l=s+"2",h=`${r}_triplanarWeights`;e.addFragmentVariable(a,"vec2"),e.addFragmentVariable(o,"vec2"),e.addFragmentVariable(l,"vec2"),e.addFragmentVariable(h,"vec3"),n.push(a),n.push(o),n.push(l),n.push(h)}else{let s=`${r}_writeUvs`;e.addFragmentVariable(s,"vec2"),n.push(s)}return e.format(i+"("+n.join(",")+")",this.getType(e),t)}},zb=N1;zb.Nodes=function(){let e=new Be(`
vec3 cylindricalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),t=new Be(`
vec3 sphericalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),r=new Be(`vec3 uvTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`),i=new Be(`vec3 triplanarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUvs0, out vec2 writeUvs1, out vec2 writeUvs2, out vec3 writeWeights) {
				vec3 p = position;
				vec2 uv0 = (1.0 + p.xy) / 2.0;     
				vec2 uv1 = (1.0 + p.zy) / 2.0;		
				vec2 uv2 = (1.0 + p.xz) / 2.0;		
	
				uv0 = (mat * vec3((uv0 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv1 = (mat * vec3((uv1 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv2 = (mat * vec3((uv2 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;

				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));

				// Write out all sets of UVs that we generated
				writeUvs0 = uv0;
				writeUvs1 = uv1;
				writeUvs2 = uv2;
				writeWeights = weights;

				// Derivatives for LOD
				vec2 df0 = fwidth(uv0);
				vec2 df1 = fwidth(uv1);
				vec2 df2 = fwidth(uv2);
				if (df0.x > 0.5) df0.x = 0.0;
				if (df1.x > 0.5) df1.x = 0.0;
				if (df2.x > 0.5) df2.x = 0.0;

				#ifdef GL_EXT_shader_texture_lod
                	vec4 tmp = 
						texture2DLodEXT(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						texture2DLodEXT(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						texture2DLodEXT(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#else
                	vec4 tmp = 
						textureLod(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						textureLod(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						textureLod(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;

				// Apply cropping across all 3 planes
				if ( crop > 0.5 ) {
					if ( uv0.x < 0.0 || uv0.x > 1.0 || uv0.y < 0.0 || uv0.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv1.x < 0.0 || uv1.x > 1.0 || uv1.y < 0.0 || uv1.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv2.x < 0.0 || uv2.x > 1.0 || uv2.y < 0.0 || uv2.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;//n * 0.5 + 0.5;
			}			
			`);return{cylindrical:e,spherical:t,uv:r,triplanar:i}}();var F1=class extends nr{constructor(e,t,r,i,n,s,a,o,l,h,c,u){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=r,this.far=i,this.isVector=n,this.isWorldSpace=s,this.origin=a,this.direction=o,this.colors=l,this.steps=h,this.isMask=u,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let r=`g${this.uuid.toString().replace(/-/g,"")}`,i=new Be(`vec3 ${r}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${r}_MAX_COLORS], float steps[${r}_MAX_COLORS], bool isMask, float mask, float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${r}_IS_VECTOR
                   #ifdef ${r}_LINEAR
                       #ifdef ${r}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${r}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${r}_SMOOTH
				for ( int i = 1; i < ${r}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${r}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a * mask;
               calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
			   accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
			   
               return color.rgb;
			}`,[F1.Nodes.vectorLinearWorldSpaceDepth,F1.Nodes.vectorLinearObjectSpaceDepth,F1.Nodes.vectorSphericalObjectSpaceDepth,F1.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${r}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&e.define(`${r}_SMOOTH`),this.isVector.value>.5&&e.define(`${r}_IS_VECTOR`),this.gradientType.value===0&&e.define(`${r}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${r}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let n=e.include(i),s=[];return s.push(this.near.build(e,"f")),s.push(this.far.build(e,"f")),s.push(this.origin.build(e,"v3")),s.push(this.direction.build(e,"v3")),s.push(this.colors.build(e,"v4[]")),s.push(this.steps.build(e,"f[]")),s.push(this.isMask.build(e,"b")),s.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),s.push(this.alpha.build(e,"f")),s.push(this.calpha),e.format(n+"("+s.join(",")+")",this.getType(e),t)}else return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},tk=F1;tk.Nodes=function(){let e=new Be(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),t=new Be(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),r=new Be(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),i=new Be(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:e,vectorLinearObjectSpaceDepth:t,vectorSphericalWorldSpaceDepth:r,vectorSphericalObjectSpaceDepth:i}}();var Yue=class extends nr{constructor(e,t,r,i,n,s,a,o){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=r,this.intensity=i,this.factor=n,this.isMask=o,this.alpha=s,this.mode=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=new Be(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, bool isMask, float mask, float alpha, int mode, out float calpha) {
					float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

					float lalpha = clamp(fresnel, 0.0, 1.0) * alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return color;
				}`),i=e.include(r),n=[];return n.push(this.color.build(e,"c")),n.push(this.bias.build(e,"f")),n.push(this.scale.build(e,"f")),n.push(this.intensity.build(e,"f")),n.push(this.factor.build(e,"f")),n.push(this.isMask.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.mode.build(e,"i")),n.push(this.calpha),e.format(i+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},rk=class extends nr{constructor(e,t,r,i,n,s,a,o,l){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=r,this.steps=i,this.offset=n,this.morph=s,this.angle=a,this.isMask=l,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(rk.Nodes.gradient),i=[];return i.push(this.gradientType.build(e,"i")),i.push(this.smooth.build(e,"b")),i.push(this.colors.build(e,"v4[]")),i.push(this.steps.build(e,"f[]")),i.push(this.offset.build(e,"v2")),i.push(this.morph.build(e,"v2")),i.push(this.angle.build(e,"f")),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},ik=rk;ik.Nodes=function(){return{gradient:new Be(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, bool isMask, float mask, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
				
				return color.xyz;
			}`)}}();var nk=class extends nr{constructor(e,t,r,i){super("v3"),this.nodeType="Matcap",this.texture=e,this.isMask=i,this.alpha=t,this.mode=r,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let r=e.include(nk.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let i=[];return i.push(this.texture.generate(e,"t")),i.push("normal"),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},sk=nk;sk.Nodes=function(){return{matcap:new Be(`vec3 matcap(sampler2D matcapTex, vec3 normal, bool isMask, float mask, float alpha, int mode, out float calpha) {
					vec3 viewDir = normalize( vViewPosition );
					vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
					vec3 y = cross( viewDir, x );
					vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks
					vec4 matcapColor = texture2D( matcapTex, uv );

					float lalpha = alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
					
					return matcapColor.rgb;
            	}`)}}();var kb=(e=>(e.SIMPLEX="simplex3d",e.SIMPLEX_FRACTAL="simplex3dFractal",e.ASHIMA="simplexAshima",e.FBM="fbm",e.PERLIN="perlin",e.VORONOI="voronoi",e))(kb||{}),On=function(){let e=new Be(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),t=new Be(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[e]);t.keywords.F3=new Jt("float F3 0.3333333"),t.keywords.G3=new Jt("float G3 0.1666667");let r=new Be(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[t]),i=new Be("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),n=new Be("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),s=new Be(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[i,n]),a=new Be("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),o=new Be("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[a]),l=new Be(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[o]),h=new Be(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[l]);h.keywords.NUM_OCTAVES=new Jt("int NUM_OCTAVES 5");let c=new Be("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),u=new Be(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[i,n,c]),d=new Be(`float hashwithoutsine13(vec3 p3)
		{
			p3  = fract(p3 * .1031);
			p3 += dot(p3, p3.yzx + 33.33);
			return fract((p3.x + p3.y) * p3.z);
		}`),p=new Be(`vec3 hashwithoutsine33(vec3 p3)
		{
			p3 = fract(p3 * vec3(.1031, .1030, .0973));
			p3 += dot(p3, p3.yxz+33.33);
			return fract((p3.xxy + p3.yxx)*p3.zyx);
		}`),f=new Be(`float metric(in vec3 p)
		{
			// L2 
			return length(p);

			// Chebyshev 
			// vec3 a = abs(p);
			// return max(a.x, max(a.y, a.z));
		}`),m=new Be(`float smin( float a, float b, float k )
		{
			float h = smoothstep(0.0, 1.0, 0.5 + 0.5 * (b - a) / k);
			float correction = k * h * (1.0 - h);
			return mix(b, a, h) - correction;
		}`),g=new Be(`float smax( float a, float b, float k )
		{
			float h = smoothstep(1.0, 0.0, 0.5 + 0.5 * (a - b) / k);
			float correction = k * h * (1.0 - h);
			return mix(a, b, h) + correction;
		}`),v=new Be(`float remap(float value, float input_min, float input_max, float output_min, float output_max) {
			// Compute width of each interval
			float input_width = input_max - input_min;
			float output_width = output_max - output_min;
		
			// Convert input range into a 0-1 range 
			float scaled = (value - input_min) / input_width;
		
			// Convert the 0-1 range into a value in output range
			return output_min + (scaled * output_width);
		}`),y=new Be(`float voronoi(in vec3 x, in int style, in float smoothness, in float seed, in int quality) 
		{
			// Integer and fractional parts of this point's coordinates
			ivec3 p = ivec3(floor(x));
			vec3 f = fract(x);

			// Different variables that we will use to construct noise:
			//
			// f1: distance to the closest feature point
			// f2: distance to the second closest feature point
			// e: distance to the closest edge (cell boundary)
			//
			// We also compute "smooth" versions of all of the above quantites, essentially
			// replacing "hard" minimums with "smooth" minimums (described by IQ)
			float f1_smooth = 8.0;
			float f1 = 8.0;
			float f2_smooth = 8.0;
			float f2 = 8.0;
			float e_smooth = 8.0;
			float e = 8.0;

			// Variables stored from closest cell
			ivec3 mb;
			vec3 mr; 

			int steps = quality;
			
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				ivec3 b = ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d = length(r);
				
				f1_smooth = smin(d, f1_smooth, smoothness);

				// Store un-smoothed distances too 
				if (d < f1) 
				{
					f2 = f1;
					f1 = d;

					mb = ivec3(x, y, z);
					mr = r;
				} 
				else if (d < f2) 
				{
					f2 = d;
				}
			}	
			
			float id = hashwithoutsine13(vec3(p + mb) + seed);

			// Second pass for edge distance  
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				// Start search at the cell that contains the closest point to "x" (found in 1st pass)
				ivec3 b = mb + ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d1 = dot(0.5 * (mr + r), (r - mr)); 				// IQ normalizes "r - mr" but that breaks things for the smooth version?
				float d2 = dot(0.5 * (mr + r), normalize(r - mr));

				e_smooth = smin(d1, e_smooth, smoothness);

				e = min(e, d2);

				// Also compute a smooth version of F2 in this pass
				{
					ivec3 b = ivec3(x, y, z);
					if (b != mb) 
					{
						vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
						float d = length(r);

						f2_smooth = smin(d, f2_smooth, smoothness);
					}
				}
			}

			// Different visualization modes 
			if (style == 0) 
			{
				return f1_smooth;
			}
			if (style == 1) 
			{
				return f2_smooth;
			}
			if (style == 2) 
			{
				return f2_smooth - f1_smooth;
				
				// "Pebbles" also cool
				//return step(0.2, f2_smooth - f1_smooth);
			}
			if (style == 3) 
			{
				// This one is really good for rock / stone effects
				float a = f1; 
				float b = f2;
				float k = 3.0;
				float h = max(k - abs(a - b), 0.0) / k;
				float final = min(a, b) - h * h * k * (1.0 / 4.0);
				return final;
			}
			if (style == 4) 
			{
				// Some random adjustments to make this style stand out more 
				return exp(5.0 * e_smooth);
			}
			if (style == 5) 
			{
				return pow(f1_smooth, 3.0);
			}
			if (style == 6) 
			{				
				const float eps = 0.0125;

				// Thicker lines as the user increases the smoothness slider
				float thickness = smoothness * 0.25 + eps;

				// Blurrier lines as the user increases the smoothness slider
				float blur = pow(smoothness, 3.0) * 0.25 + eps;

				return smoothstep(
					thickness - thickness * blur, 
					thickness + thickness * blur, 
					e
				);
			}
			if (style == 7) 
			{
				return hashwithoutsine13(vec3(p + mb) + seed);
			}
		}
	`,[d,p,f,m,g,v]);return{simplex:t,simplexFractal:r,simplexAshima:s,fbm:h,perlin:u,voronoi:y}}(),ak=class extends nr{constructor(e,t,r,i,n,s,a,o,l,h,c,u,d,p,f,m,g,v,y){super("v3"),this.nodeType="Noise",this.scale=e,this.size=t,this.move=r,this.fA=i,this.fB=n,this.distortion=s,this.colorA=a,this.colorB=o,this.colorC=l,this.colorD=h,this.noiseType=u,this.voronoiStyle=p,this.highCut=f,this.lowCut=m,this.smoothness=g,this.seed=v,this.quality=y,this.isMask=d,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t,r,i,n){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let s=Object.values(kb)[this.noiseType.value],a=s=="voronoi"?`
		float v = ${s}(st + move, voronoiStyle, smoothness, seed, quality);

		// Apply clipping to colors
		v = remap(v, lowCut, highCut, 0.0, 1.0);
		v = smax(v, 0.0, smoothness * 0.25);
		v = smin(v, 1.0, smoothness * 0.25);

		// Note that the voronoi mode only uses colors "A" and "C" from the UI 
		vec4 color = mix(colorA, colorC, v); 
		`:`
		vec3 q = vec3(${s}(st),
					   ${s}(st + vec3(1.0)),
					   ${s}(st + vec3(1.0)));
		vec3 r = vec3(${s}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
					  ${s}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
					  ${s}(st * q));
		float f = ${s}(st + r);
		vec4 color;
		color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
		color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
		color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));
		`,o=new Be(`vec3 ${s}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, int voronoiStyle, float highCut, float lowCut, float smoothness, float seed, int quality, bool isMask, float mask, float alpha, out float calpha) 
			{
                // Prevent scale of zero 
				scale = max(abs(scale), 0.001);

				vec3 st = position / size;
				st /= scale;

				${a}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return clamp(color, 0.0, 1.0).rgb;
			}`,[On.simplex,On.simplexFractal,On.simplexAshima,On.fbm,On.perlin,On.voronoi]),l=e.include(o),h=[];return h.push(this.scale.build(e,"f")),h.push(this.size.build(e,"v3")),h.push(this.move.build(e,"f")),h.push(this.fA.build(e,"v2")),h.push(this.fB.build(e,"v2")),h.push(this.distortion.build(e,"v2")),h.push(this.colorA.build(e,"v4")),h.push(this.colorB.build(e,"v4")),h.push(this.colorC.build(e,"v4")),h.push(this.colorD.build(e,"v4")),h.push(this.voronoiStyle.build(e,"i")),h.push(this.highCut.build(e,"f")),h.push(this.lowCut.build(e,"f")),h.push(this.smoothness.build(e,"f")),h.push(this.seed.build(e,"f")),h.push(this.quality.build(e,"i")),h.push(this.isMask.build(e,"b")),h.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),h.push(this.alpha.build(e,"f")),h.push(this.calpha),e.format(l+"("+h.join(",")+")",this.getType(e),t)}};ak.numOctaves=5;var ok=class extends nr{constructor(e,t,r,i,n,s,a,o,l,h,c,u,d,p,f,m){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=t,this.outlineWidth=r,this.contourWidth=i,this.contourThreshold=n,this.outlineThreshold=s,this.contourFrequency=a,this.outlineSmoothing=o,this.contourDirection=l,this.positionalLines=h,this.compensation=c,this.resolution=u,this.normalMap=d,this.depthMap=p,this.pixelRatio=f,this.alpha=m,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let r=`g${this.uuid.toString().replace(/-/g,"")}`;if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.compensation.value&&e.define("OUTLINE_COMPENSATION",`${r}_offset`),this.firstTime){let i=this.outlineWidth.build(e,"f"),n=this.resolution.build(e,"v2"),s=this.compensation.build(e,"b"),a=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(i,"uniform float"),e.addVertexParsVariable(n,"uniform vec2"),e.addVertexParsVariable(s,"uniform bool"),e.addVertexParsVariable(a,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float"),e.addVertexFinalCode(`
                vID = randomColor.r;
                vec2 ${r}_offset = vec2(0.0);
                if (${s}) {
                    vec4 ${r}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${r}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    ${r}_offset = normalize(${r}_clipNormal.xy) / ${n} * (${i} / 2.0) * ${r}_clipPosition.w * 2.0 * ${a};
                    ${r}_clipPosition.xy += ${r}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${r}_clipPosition;
                }
            `)}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(ok.Nodes.outline),n=[];return n.push(this.outlineColor.build(e,"c")),n.push(this.contourColor.build(e,"c")),n.push(this.outlineWidth.build(e,"f")),n.push(this.contourWidth.build(e,"f")),n.push(this.contourThreshold.build(e,"f")),n.push(this.outlineThreshold.build(e,"f")),n.push(this.contourFrequency.build(e,"f")),n.push(this.outlineSmoothing.build(e,"f")),n.push(this.contourDirection.build(e,"v3")),n.push(this.positionalLines.build(e,"b")),n.push(this.resolution.build(e,"v2")),n.push(this.normalMap.getTexture(e,"t")),n.push(this.depthMap.getTexture(e,"t")),n.push(this.pixelRatio.build(e,"f")),n.push(this.compensation.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),this.firstTime=!this.firstTime,e.format(i+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},lk=ok;lk.Nodes=function(){let e=new Be(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    vec2 texelSize = (vec2(1.0) / resolution);
    vec2 offsetSize = texelSize * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -offsetSize.x, -offsetSize.y) + (vogelDiskSample(0, 9, temporalAngle) * texelSize);
	uvSamples[1] = uv + vec2(0.0, -offsetSize.y) + (vogelDiskSample(1, 9, temporalAngle) * texelSize);
	uvSamples[2] = uv + vec2(  offsetSize.x, -offsetSize.y) + (vogelDiskSample(2, 9, temporalAngle) * texelSize);
	uvSamples[3] = uv + vec2( -offsetSize.x, 0.0) + (vogelDiskSample(3, 9, temporalAngle) * texelSize);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  offsetSize.x, 0.0) + (vogelDiskSample(5, 9, temporalAngle) * texelSize);
	uvSamples[6] = uv + vec2( -offsetSize.x, offsetSize.y) + (vogelDiskSample(6, 9, temporalAngle) * texelSize);
	uvSamples[7] = uv + vec2(0.0, offsetSize.y) + (vogelDiskSample(7, 9, temporalAngle) * texelSize);
	uvSamples[8] = uv + vec2(  offsetSize.x, offsetSize.y) + (vogelDiskSample(8, 9, temporalAngle) * texelSize);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec3 sobel_edge_h = normalSamples[2].rgb + (2.0*normalSamples[5].rgb) + normalSamples[8].rgb - (normalSamples[0].rgb + (2.0*normalSamples[3].rgb) + normalSamples[6].rgb);
  	vec3 sobel_edge_v = normalSamples[0].rgb + (2.0*normalSamples[1].rgb) + normalSamples[2].rgb - (normalSamples[6].rgb + (2.0*normalSamples[7].rgb) + normalSamples[8].rgb);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new Be(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float mask, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                //resultAlpha = 1.0;
                //result = vec3(sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha * mask;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				 
                 return result;
             }`,[e])}}();var Qo=class extends nr{constructor(e,t,r,i,n,s,a,o,l,h,c,u,d,p,f,m,g,v){super("v3"),this.nodeType="Pattern",this.style=e,this.projection=t,this.axis=r,this.blending=i,this.offset=n,this.colorA=s,this.colorB=a,this.frequency=o,this.size=l,this.variation=h,this.smoothness=c,this.zigzag=u,this.rotation=d,this.vertical=p,this.horizontal=f,this.sides=m,this.isMask=v,this.alpha=g,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.require("position"),e.require("uv"),e.requires.uv=[!0],e.require("normal"),e.requires.normal=!0,e.addFragmentVariable(this.calpha,"float");let r;switch(this.style.value){case 0:r="circle";break;case 1:r="ring";break;case 2:r="polygon";break;case 3:r="xcross";break;case 4:r="diamond";break;case 5:r="checkerboard";break;case 6:r="line";break;case 7:r="wave";break;default:r="circle";break}let i=`g${this.uuid.toString().replace(/-/g,"")}`,n=new Be(`float hashwithoutsine12(vec2 p)
				{
					vec3 p3 = fract(vec3(p.xyx) * .1031);
					p3 += dot(p3, p3.yzx + 33.33);
					return fract((p3.x + p3.y) * p3.z);
				}`),s=new Be(`vec2 rotate_uv(in vec2 uv, float a, bool repeat) 
				{
					const float mid = 0.5;
					float radians = a * (PI / 180.0);
					vec2 rotated = vec2(
						cos(radians) * (uv.x - mid) + sin(radians) * (uv.y - mid) + mid,
						cos(radians) * (uv.y - mid) - sin(radians) * (uv.x - mid) + mid
					);
					return repeat ? fract(rotated): rotated;
				}`),a="";if(this.projection.value===4){let c=this.style.value===2?`${r}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,u=this.style.value===2?`${r}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,d=this.style.value===2?`${r}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation)`;a=`
				vec3 p = position;
				float factor = 0.0125;
				vec2 uv0 = fract(p.xy * factor);
				vec2 uv1 = fract(p.zy * factor);
				vec2 uv2 = fract(p.xz * factor);
				
				uv0 = rotate_uv(uv0 + offset, rotation, true);
				uv1 = rotate_uv(uv1 + offset, rotation, true);
				uv2 = rotate_uv(uv2 + offset, rotation, true);
	
				float d0 = ${c};
				float d1 = ${u};
				float d2 = ${d};
				
				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));
				d0 *= weights.z;
				d1 *= weights.x;
				d2 *= weights.y;
				float draw = d0 + d1 + d2;
	
				vec2 custom_uv = uv0 * weights.z + uv1 * weights.x + uv2 * weights.y;
				`}else{let c=this.style.value===2?`${r}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,u="";this.axis.value===0?u=`float radius = length(p);
					float theta = atan(p.y, p.z);
					float phi = acos(p.x / radius);`:this.axis.value===1?u=`float radius = length(p);
					float theta = atan(p.x, p.z);
					float phi = acos(p.y / radius);`:(this.axis.value,u=`float radius = length(p);
					float theta = atan(p.y, p.x);
					float phi = acos(p.z / radius);`);let d="";switch(this.projection.value){case 0:d="custom_uv = vUv.st;";break;case 1:break;case 2:d=`
							vec3 p = position;
							${u}
							custom_uv = vec2(theta, phi);
							custom_uv /= PI;
							`;break}a=`
				vec2 custom_uv;
				${d}
	
				custom_uv += offset;
				custom_uv = fract(custom_uv);
				custom_uv = rotate_uv(custom_uv, rotation, true);
	
				float draw = ${c};
				`}let o=new Be(`vec3 ${i}_pattern(vec3 normal, float blending, int style, vec2 offset, vec4 colorA, vec4 colorB, vec2 frequency, float size, float variation, float smoothness, float zigzag, float rotation, vec2 vertical, vec2 horizontal, int sides, bool isMask, float mask, float alpha, out float calpha) {
					const float TWO_PI = PI * 2.0;
					float smoothness_remapped = pow(smoothness, 5.0);	

					${a}

					// Construct final output color
					vec4 color = mix(colorA, colorB, draw);
					color.a = clamp(color.a, 0.0, 1.0);

					// Apply cuts
					color.a *= 
						step(vertical.x, custom_uv.y) * 
						step(custom_uv.y, vertical.y);
					color.a *= 
						step(horizontal.x, abs(custom_uv.x)) * 
						step(abs(custom_uv.x), horizontal.y);

					// Accumulate alpha 
					float lalpha = alpha * clamp(color.a, 0.0, 1.0) * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return clamp(color, 0.0, 1.0).rgb;
				}`,[s,n,Qo.DrawFunctions.circle,Qo.DrawFunctions.ring,Qo.DrawFunctions.polygon,Qo.DrawFunctions.cross,Qo.DrawFunctions.diamond,Qo.DrawFunctions.checkerboard,Qo.DrawFunctions.line,Qo.DrawFunctions.wave]),l=e.include(o),h=[];return h.push("normal"),h.push(this.blending.build(e,"f")),h.push(this.style.build(e,"i")),h.push(this.offset.build(e,"v2")),h.push(this.colorA.build(e,"v4")),h.push(this.colorB.build(e,"v4")),h.push(this.frequency.build(e,"v2")),h.push(this.size.build(e,"f")),h.push(this.variation.build(e,"f")),h.push(this.smoothness.build(e,"f")),h.push(this.zigzag.build(e,"f")),h.push(this.rotation.build(e,"f")),h.push(this.vertical.build(e,"v2")),h.push(this.horizontal.build(e,"v2")),h.push(this.sides.build(e,"i")),h.push(this.isMask.build(e,"b")),h.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),h.push(this.alpha.build(e,"f")),h.push(this.calpha),e.format(l+"("+h.join(",")+")",this.getType(e),t)}else return console.warn("PatterNode is not compatible with "+e.shader+" shader."),e.format("vec3(0.0)",this.getType(e),t)}},hk=Qo;hk.DrawFunctions=function(){let e=new Be(`float hashwithoutsine12(vec2 p) {
				vec3 p3 = fract(vec3(p.xyx) * 0.1031);
				p3 += dot(p3, p3.yzx + 33.33);
				return fract((p3.x + p3.y) * p3.z);
			}`),t=new Be(`vec2 tile_and_center(in vec2 uv, in vec2 frequency, in float variation, in float zigzag, in float rotation) {
                // Create tiles in UV-space
                uv *= frequency;

                // Integer coords
                vec2 i = floor(uv);

                // Offset every other row based on zigzag param, then compute fractional coords
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = fract(uv);

				// Rotate the tile itself:
				// const float mid = 0.5;
				// f = vec2(
				// 	cos(rotation) * (f.x - mid) + sin(rotation) * (f.y - mid) + mid,
				// 	cos(rotation) * (f.y - mid) - sin(rotation) * (f.x - mid) + mid
				// );
				// f = fract(f);

                f = f * 2.0 - 1.0;

				// Recompute integer coords after shifting - then, random value per tile 
				i = floor(uv);
				float rand = (hashwithoutsine12(i) * 5.0 + 1.0);
				float jitter = mix(1.0, rand, variation);
				f *= jitter;

                return f;
            }`,[e]),r=new Be(`float circle(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(
                    -smoothness, 
                     smoothness, 
                     length(f) - size
                );
            }`,[t]),i=new Be(`float ring(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);

				float d = length(f);
                const float inner_width = 0.5;

                float outer = smoothstep(-smoothness, smoothness, d - size);
                float inner = smoothstep(-smoothness, smoothness, d - size * inner_width);
				return outer + (1.0 - inner);   
            }`,[t]),n=new Be(`float sdf_ngon(in vec2 p, in float r, in int n) {
                float an = (PI * 2.0) / float(n);
                float he = r * tan(0.5 * an);
                
                // Rotate to first sector
                p = -p.yx; 
                float bn = an * floor((atan(p.y, p.x) + 0.5 * an) / an);
                vec2  cs = vec2(cos(bn), sin(bn));
                p = mat2(cs.x, -cs.y, cs.y, cs.x)*p;
            
                // Side of polygon
                return length(p - vec2(r, clamp(p.y, -he, he))) * sign(p.x - r);
            }
            
            float polygon(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation, in int sides) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_ngon(f, size, sides));
            }`,[t]),s=new Be(`float sdf_cross(in vec2 p, in vec2 b, float r ) {
                p = abs(p); 
				p = (p.y > p.x) ? p.yx : p.xy;
                vec2  q = p - b;
                float k = max(q.y, q.x);
                vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);
                return sign(k) * length(max(w, 0.0)) + r;
            }
            
            // Avoid namespace conflicts 
            float xcross(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_cross(f, vec2(size, size * 0.25), smoothness));
            }`,[t]),a=new Be(`float ndot(vec2 a, vec2 b) { 
                return a.x*b.x - a.y*b.y; 
            }
            
            float sdf_diamond(in vec2 p, in vec2 b) {
                p = abs(p);
                float h = clamp(ndot(b - 2.0 * p, b) / dot(b, b), -1.0, 1.0);
                float d = length(p - 0.5 * b * vec2(1.0 - h, 1.0 + h));
                return d * sign(p.x * b.y + p.y * b.x - b.x * b.y);
            }

            float diamond(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
	            return smoothstep(-smoothness, smoothness, sdf_diamond(f, vec2(size)));
            }`,[t]),o=new Be(`float checkerboard(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                uv *= frequency;
                vec2 i = floor(uv);

                float offset = mod(i.y, 2.0);

                uv.x += offset + zigzag * offset;
                float x = floor(uv.x);
                
                return mod(x, 2.0);
            }`),l=new Be(`float line(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, 0.0, zigzag, rotation);
				
				// Different approach for variation param here
				float row = floor(uv * frequency).y;
				float rand = hashwithoutsine12(vec2(row));
				float s = mix(size, size * rand, variation);

				return smoothstep(
					s - smoothness, 
					s + smoothness, 
					abs(f.y)
				);
            }`,[t]),h=new Be(`// Uses bisection 
            float udf_cos(in vec2 p, in float a, in float b, in float c, in float d) {
                // Convert all data to a primitive cosine wave
                p = c * (p - vec2(d, a));
                
                const float TWO_PI = PI * 2.0;

                // Reduce to principal half cycle
                p.x = mod(p.x, TWO_PI); 
                if (p.x > PI) {
                    p.x = TWO_PI - p.x;
                }
            
                // Find zero of derivative (minimize distance)
                float xa = 0.0;
                float xb = TWO_PI;

                // 24 bit precision
                for (int i = 0; i < 24; i++) {
                    float x = 0.5 * (xa + xb);
                    float y = x - p.x + b * c * sin(x) * (p.y - b * c * cos(x));
                    if (y < 0.0) xa = x; 
                    else xb = x;
                }
                float x = 0.5 * (xa + xb);
                
                // Compute distance    
                vec2 q = vec2(x, b * c * cos(x));
                return length(p - q) / c;
            }

            float wave(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                float repeat = frequency.x;
                uv *= repeat;
                vec2 i = floor(uv);
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = vec2(uv.x, fract(uv.y));

                // Generalized cosine: y(x) = a + b * cos(cx + d)
                const float amplitude = 0.125;
                float wave_frequency = frequency.y * 0.1;
                float distance_estimate = udf_cos(f, 0.50, amplitude, wave_frequency * (2.0 * PI), 0.0);

				// Different approach for variation param here
				float rand = hashwithoutsine12(vec2(i.y));
				float s = mix(size, size * rand, variation);

                return smoothstep(-smoothness, smoothness, distance_estimate - s * 0.5);
            }`);return{tileAndCenter:t,circle:r,ring:i,polygon:n,cross:s,diamond:a,checkerboard:o,line:l,wave:h}}();var uk=class extends nr{constructor(e,t,r,i,n,s,a,o){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=r,this.noiseStrength=i,this.noiseScale=n,this.offset=s,this.isMask=o,this.alpha=a,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(uk.Nodes.rainbow),i=[];return i.push(this.filmThickness.build(e,"f")),i.push(this.movement.build(e,"f")),i.push(this.wavelengths.build(e,"v3")),i.push(this.noiseStrength.build(e,"f")),i.push(this.noiseScale.build(e,"f")),i.push(this.offset.build(e,"v3")),i.push(this.isMask.build(e,"b")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},ck=uk;ck.Nodes=function(){let e=new Be(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);
             }`,[On.simplex]);return{rainbow:new Be(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, bool isMask, float mask, float alpha, out float calpha) {
				vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

				float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);

				float lalpha = alpha * rainbowContribution * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return res;
             }`,[e])}}();var dk=class extends nr{constructor(e,t,r,i,n,s,a,o,l,h){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=t,this.steps=r,this.source=i,this.isWorldSpace=n,this.noiseStrength=s,this.noiseScale=a,this.shadowColor=o,this.offset=l,this.alpha=h,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let r=e.include(dk.Nodes.toon),i=[];return i.push(this.positioning.build(e,"i")),i.push(this.colors.build(e,"v4[]")),i.push(this.steps.build(e,"f[]")),i.push(this.source.build(e,"v3")),i.push(this.isWorldSpace.build(e,"b")),i.push(this.noiseStrength.build(e,"f")),i.push(this.noiseScale.build(e,"f")),i.push(this.shadowColor.build(e,"v4")),i.push(this.offset.build(e,"v3")),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},pk=dk;pk.Nodes=function(){let e=new Be(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),t=new Be(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),r=new Be(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[t]),i=new Be(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),n=new Be(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[i]);return{toon:new Be(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float mask, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotLightCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplex3d(st),
					// 	simplex3d(st + vec3(111.1, 143.89, 217.19)),
					// 	simplex3d(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[On.simplex,e,r,n])}}();var Que=function(){return{textureBicubic:new Be(`float w0( float a ) {
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
        }
    
        float w1( float a ) {
            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
        }
    
        float w2( float a ){
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
        }
    
        float w3( float a ) {
            return ( 1.0 / 6.0 ) * ( a * a * a );
        }
    
        // g0 and g1 are the two amplitude functions
        float g0( float a ) {
            return w0( a ) + w1( a );
        }
    
        float g1( float a ) {
            return w2( a ) + w3( a );
        }
    
        // h0 and h1 are the two offset functions
        float h0( float a ) {
            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
        }
    
        float h1( float a ) {
            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
        }
    
        vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
            uv = uv * texelSize.zw + 0.5;
    
            vec2 iuv = floor( uv );
            vec2 fuv = fract( uv );
    
            float g0x = g0( fuv.x );
            float g1x = g1( fuv.x );
            float h0x = h0( fuv.x );
            float h1x = h1( fuv.x );
            float h0y = h0( fuv.y );
            float h1y = h1( fuv.y );
    
            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
    
            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) + 
                   g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
        }

        vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
            vec2 fLodSizeInv = 1.0 / fLodSize;
            vec2 cLodSizeInv = 1.0 / cLodSize;
            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
            return mix( fSample, cSample, fract( lod ) );
        }`)}}();function Zue(e,t){return e>=t?new X(t/e,1):new X(1,e/t)}var fk=class extends nr{constructor(e,t,r,i,n,s,a,o){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=r,this.transmissionSamplerSize=i,this.transmissionSamplerMap=n,this.transmissionDepthMap=s,this.aspectRatio=a,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",6),e.define("BLUR_SLOD",Math.pow(2,ot.transmissionLod.value)),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let r=e.include(fk.Nodes.transmission),i=[];return i.push(this.thickness.build(e,"f")),i.push(this.ior.build(e,"f")),i.push(this.roughness.build(e,"f")),i.push(this.transmissionSamplerSize.build(e,"v2")),i.push(this.transmissionSamplerMap.getTexture(e,"t")),i.push(this.transmissionDepthMap.getTexture(e,"t")),i.push(this.aspectRatio.build(e,"v2")),i.push("normal"),i.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),i.push(this.alpha.build(e,"f")),i.push(this.calpha),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},mk=fk;mk.Nodes=function(){let e=new Be(`vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

				// Special case for blur == 0.0
				if (lod == 0.0) {
					#ifdef TEXTURE_LOD_EXT
					return texture2DLodEXT( sp, U, 0.0).rgb;
					#else
					return textureLod( sp, U, 0.0).rgb;
					#endif
				}
				
				vec2 texelSize = vec2(1.0) / resolution;
                vec2 halton = haltonSequence[frameIndex];
                float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
                float temporalAngle  = temporalOffset * PI2;
				vec3 res = vec3(0.0);
                vec2 uv = vec2(0.0);
                vec2 offset = vec2(0.0);
                vec2 vogelSample = vec2(0.0);
                for (int i = 0; i < NUM_SAMPLES; i++) {
                    vogelSample =  vogelDiskSample(i, NUM_SAMPLES, temporalAngle) * texelSize;
                    offset = vogelSample * scale * (lod * 10.0); // TODO: used to be hardcoded to 20
                    uv = U + offset;
                    float opaqueDepth = unpackRGBAToDepth(textureLod(dm, uv, lod));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    res += textureLod(sp, uv, lod).rgb;
                }
                return res / float(NUM_SAMPLES);
            }`),t=new Be(`vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        
				// Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );

		        // The thickness is specified in local space
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),r=new Be(`float applyIorToRoughness( float roughness, float ior ) {
				// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
				// an IOR of 1.5 results in the default amount of microfacet refraction.
				return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
			}`),i=new Be(`vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
				// Threejs exports do not pass a depth map to this shader, so we have to fallback to the "Threejs method of blurring" - see
				// also the code in convertTransmission.ts, which runs during export
				#ifdef IS_THREEJS_EXPORT
					float lod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness / 5.0, ior);
					return textureBicubic(transmissionSamplerMap, fragCoord.xy, lod).rgb;
				#else
					float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
					float lod = applyIorToRoughness(roughness, ior);
					return blur(transmissionSamplerMap, fragCoord, vec2(lod), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
				#endif
			}`,[Que.textureBicubic,r,e]),n=new Be(`vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;

				// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
				vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;

				vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
				vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
				unrefractedCoords += 1.0;
				unrefractedCoords /= 2.0;

				// Sample framebuffer to get pixel the refracted ray hits.
				return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    		}`,[i,t]);return{transmission:new Be(`vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float mask, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return transmission;
            }`,[n])}}();var E8=(e=>(e.NOISE="noise",e.MAP="map",e))(E8||{}),gk=class extends nr{constructor(e,t,r,i,n,s,a,o,l,h,c){super("v3"),this.displacementTypeIndex=new ar(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=t,Object.values(E8)[this.displacementTypeIndex.value]==="map"&&(this.mat=new Kz(this.movementOrTexture.value.matrix)),this.cropOrOffset=r,this.scale=h,this.noiseFunctionIndex=c,this.voronoiStyle=i,this.smoothness=n,this.seed=s,this.highCut=a,this.lowCut=o,this.quality=l}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let r,i=[];switch(i.push("displaced_position"),i.push("displaced_normal"),Object.values(E8)[this.displacementTypeIndex.value]){case"map":{r=e.include(gk.Nodes.map),i.push(this.movementOrTexture.getTexture(e,"t")),i.push("uv"),i.push(this.cropOrOffset.build(e,"f")),this.mat&&i.push(this.mat.build(e,"mat3"));break}case"noise":{let n=Object.values(kb)[this.noiseFunctionIndex.value],s=new Be(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),a=n=="voronoi"?`
					float v = ${n}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1), voronoiStyle, smoothness, seed, quality);
					v = remap(v, lowCut, highCut, 0.0, 1.0);
					v = smax(v, 0.0, smoothness * 0.25);
					v = smin(v, 1.0, smoothness * 0.25);

					return p + n * v * intensity;
					`:`
					return p + n * ${n}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
					`,o=new Be(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality) {
							${a}
						}`,[On.simplex,On.simplexFractal,On.simplexAshima,On.fbm,On.perlin,On.voronoi]),l=new Be(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[o,s]);r=e.include(l),i.push(this.scale.build(e,"f")),i.push(this.cropOrOffset.build(e,"v3")),i.push(this.movementOrTexture.build(e,"f")),i.push(this.voronoiStyle.build(e,"i")),i.push(this.smoothness.build(e,"f")),i.push(this.seed.build(e,"f")),i.push(this.highCut.build(e,"f")),i.push(this.lowCut.build(e,"f")),i.push(this.quality.build(e,"i"));break}}return i.push(this.intensity.build(e,"f")),i.push("displaced_normal"),e.format(r+"("+i.join(",")+")",this.getType(e),t)}else return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},vk=gk;vk.Nodes=function(){let e=new Be(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),t=new Be(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new Be(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[e,t])}}();var ot={normalRenderTarget:new hl,normalRenderTargetDepth:new hl,transmissionRenderTarget:new hl,aspectRatio:new Ii,transmissionSize:new Ii(2048,2048),transmissionRenderTargetDepth:new hl,aoRenderTarget:new hl,aoEnabled:new vn,pixelRatioNode:new qe(1),resolution:new Ii,penumbraSize:new bu(5,.5),frameIndex:new ar(0),transmissionLod:new ar(2)};for(let e of Object.values(ot))e.isRenderGlobal=!0;var yk=class extends tu{constructor(){super("basic"),this.nodeType="Basic",this.color=new Br(la),this.shadingAlpha=new qe(1),this.shadingBlend=new ar(0),this.previousModelViewMatrix=new Lo,this.previouseProjectionMatrix=new Lo}get category(){return"phong"}generate(e){let t;if(e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:ot.frameIndex}),e.mergeUniform({resolution:ot.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(df.merge([Ie.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{this.color===void 0&&(this.color=new Br(la)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let r=this.color.flow(e,"c",{slot:"color"}),i=this.alpha?this.alpha.flow(e,"f"):void 0,n=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,s=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=i!==void 0,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let a=["#include <normal_fragment_begin>",r.code];i&&a.push(i.code,"#ifdef ALPHATEST"," if ( "+i.result+" <= ALPHATEST ) discard;","#endif"),s?a.push(s.code,`vec3 outgoingLight = ${r.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${s.result}, 1.0, SPE_BLENDING_NORMAL);`):a.push(`vec3 finalColor = ${r.result};`);let o="1.0";this.mask&&(this.mask.analyze(e),o=`luminance(${this.mask.flow(e,"v3").result})`),i?a.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${i.result} * ${o} );`):a.push("gl_FragColor = vec4("+r.result+", 1.0 );"),n&&a.push(`gl_FragColor.a *= ${n.result};`),a.push("#include <fog_fragment>","#include <dithering_fragment>"),t=a.join(`
`)}return t}},Kue=class extends tu{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new Br(la),this.emissive=new Br(0),this.emissiveIntensity=new qe(1),this.previousModelViewMatrix=new Lo,this.previouseProjectionMatrix=new Lo,this.shadingAlpha=new qe(1),this.shadingBlend=new ar(0),this.occlusion=new vn(!0)}get category(){return"lambert"}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:ot.frameIndex}),e.mergeUniform({resolution:ot.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(df.merge([Ie.fog,Ie.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
				`),i.push(`
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:ot.penumbraSize}),e.mergeUniform({frameIndex:ot.frameIndex}),e.mergeUniform({aoMap:ot.aoRenderTarget}),e.mergeUniform({aoEnabled:ot.aoEnabled}),this.color===void 0&&(this.color=new Br(la)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),i=this.emissive.flow(e,"c",{slot:"emissive"}),n=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),s=this.occlusion.flow(e,"b",{slot:"occlusion"}),a=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,h=this.alpha?this.alpha.flow(e,"f"):void 0,c=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=h!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let u=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];u.push(r.code,"vec3 diffuseColor = "+r.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),h&&u.push(h.code,"#ifdef ALPHATEST","if ( "+h.result+" <= ALPHATEST ) discard;","#endif"),u.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),i&&u.push(i.code,"reflectedLight.directDiffuse += "+i.result+" * "+n.result+";"),u.push("vec3 ao = aoEnabled && "+s.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = (reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) ;");let d="1.0";this.mask&&(this.mask.analyze(e),d=`luminance(${this.mask.flow(e,"v3").result})`),u.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * ${d} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result} * ${d}, ${o.result} );

					outgoingLight *= ao;
				}
				`),l&&u.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),h?u.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${h.result} );`):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c&&u.push(`gl_FragColor.a *= ${c.result};`),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=u.join(`
`)}return t}},tf=function(){let e=new Be(`vec2 dHdxy(sampler2D bumpMap, vec2 bumpMapUv, float bumpScale) {

            // Gradient of UVs w.r.t. X coordinate (in screen-space)
            vec2 dSTdx = dFdx(bumpMapUv);

            // Gradient of UVs w.r.t. Y coordinate (in screen-space)
            vec2 dSTdy = dFdy(bumpMapUv);
            
            // Forward differencing
            float Hll = bumpScale * luminance(texture(bumpMap, bumpMapUv).rgb);
            float dBx = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdx).rgb) - Hll;
            float dBy = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdy).rgb) - Hll;
            
            return vec2( dBx, dBy );
        }`),t=new Be(`vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
            vec3 vSigmaX = dFdx( surf_pos.xyz );
            vec3 vSigmaY = dFdy( surf_pos.xyz );
            vec3 vN = surf_norm; // normalized
            
            vN = normalize(vN);

            vec3 R1 = cross( vSigmaY, vN );
            vec3 R2 = cross( vN, vSigmaX );

            R1 = normalize(R1);
            R2 = normalize(R2);
    
            float fDet = dot( vSigmaX, R1 ) * faceDirection;
    
            vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
            return normalize( abs( fDet ) * vN - vGrad );
        }`);return{dHdxy:e,perturbNormalArb:t}}(),$ue=class extends tu{constructor(){super("phong"),this.nodeType="Phong",this.color=new Br(la),this.specular=new Br(1118481),this.shininess=new qe(30),this.previousModelViewMatrix=new Lo,this.previouseProjectionMatrix=new Lo,this.shadingAlpha=new qe(1),this.shadingBlend=new ar(0),this.occlusion=new vn(!0)}get category(){return"phong"}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:ot.frameIndex}),e.mergeUniform({resolution:ot.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(df.merge([Ie.fog,Ie.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif


				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:ot.penumbraSize}),e.mergeUniform({frameIndex:ot.frameIndex}),e.mergeUniform({aoMap:ot.aoRenderTarget}),e.mergeUniform({aoEnabled:ot.aoEnabled}),this.color===void 0&&(this.color=new Br(la)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e);let r=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),n=this.specular.flow(e,"c"),s=this.shininess.flow(e,"f"),a=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,h=this.alpha?this.alpha.flow(e,"f"):void 0,c=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=h!==void 0,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let u=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];if(this.bumpMap){e.include(tf.dHdxy),e.include(tf.perturbNormalArb);let p=this.bumpMap.texture.flow(e,"t"),f=this.bumpMap.flow(e,"v3"),m=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",g="";this.bumpMap.projection.value===4?g=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${p.result}, uv0, ${m});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${p.result}, uv1, ${m});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${p.result}, uv2, ${m});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:g=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${p.result}, bumpMapCachedUv, ${m});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,u.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${f.result};
					${g}
					`)}u.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",n.code,"	vec3 specular = "+n.result+";",s.code,"	float shininess = max( 0.0001, "+s.result+" );","	float specularStrength = 1.0;"),h&&u.push(h.code,"#ifdef ALPHATEST","if ( "+h.result+" <= ALPHATEST ) discard;","#endif"),u.push("material.diffuseColor = diffuseColor;"),u.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),u.push("vec3 ao = aoEnabled && "+r.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;");let d="1.0";this.mask&&(this.mask.analyze(e),d=`luminance(${this.mask.flow(e,"v3").result})`),u.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${a.result} * ${d} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${a.result} * ${d}, ${o.result} );
					
					outgoingLight *= ao;
				}
				`),l&&u.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),h?u.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${h.result});`):u.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c&&u.push(`gl_FragColor.a *= ${c.result};`),u.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=u.join(`
`)}return t}},Jue=class extends tu{constructor(){super("standard"),this.nodeType="Standard",this.color=new Br(la),this.roughness=new qe(.3),this.metalness=new qe(0),this.reflectivity=new qe(.5),this.previousModelViewMatrix=new Lo,this.previouseProjectionMatrix=new Lo,this.shadingAlpha=new qe(1),this.shadingBlend=new ar(0),this.occlusion=new vn(!0)}get category(){return"physical"}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:ot.frameIndex}),e.mergeUniform({resolution:ot.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(df.merge([Ie.fog,Ie.lights])),Ie.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:ot.penumbraSize}),e.mergeUniform({frameIndex:ot.frameIndex}),e.mergeUniform({aoMap:ot.aoRenderTarget}),e.mergeUniform({aoEnabled:ot.aoEnabled});let r={gamma:!0};this.color===void 0&&(this.color=new Br(la)),this.color.analyze(e,{slot:"color",context:r}),this.roughness.analyze(e),this.metalness.analyze(e);let i=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let n=this.color.flow(e,"c",{slot:"color",context:r}),s=this.roughness.flow(e,"f"),a=this.metalness.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),l=this.shadingBlend.flow(e,"i"),h=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0,u=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,d=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=c!==void 0,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let p=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];if(this.bumpMap){e.include(tf.dHdxy),e.include(tf.perturbNormalArb);let m=this.bumpMap.texture.flow(e,"t"),g=this.bumpMap.flow(e,"v3"),v=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",y="";this.bumpMap.projection.value===4?y=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${m.result}, uv0, ${v});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${m.result}, uv1, ${v});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${m.result}, uv2, ${v});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:y=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${m.result}, bumpMapCachedUv, ${v});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,p.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${g.result};
					${y}
					`)}if(p.push(n.code,"	vec3 diffuseColor = "+n.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",a.code,"	float metalnessFactor = "+a.result+";"),this.roughnessMap){let m=this.roughnessMap.texture.flow(e,"t"),g=this.roughnessMap.flow(e,"v3"),v="";this.roughnessMap.projection.value===4?v=`
					float roughnessChange = 1.0;
					{
						vec2 uv0 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						float r0 = luminance(texture(${m.result}, uv0).rgb) * roughnessScale;
						float r1 = luminance(texture(${m.result}, uv1).rgb) * roughnessScale;
						float r2 = luminance(texture(${m.result}, uv2).rgb) * roughnessScale;

						roughnessChange = (r0 * weights.z + r1 * weights.x + r2 * weights.y);
					}
					float roughnessFactor = roughnessChange * ${s.result};
					`:v=`
					vec2 roughnessMapCachedUv = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs;

					vec4 vals = texture(${m.result},  roughnessMapCachedUv);
					float roughnessFactor = luminance(vals.rgb) * ${s.result};
					`,p.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${g.result};

					const float roughnessScale = 1.0;

					${v}
				`)}else p.push(s.code,"	float roughnessFactor = "+s.result+";");c&&p.push(c.code,"#ifdef ALPHATEST","	if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),p.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),p.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),d?p.push(d.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+d.result+" ) ), diffuseColor, metalnessFactor );"):p.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),p.push("#include <lights_fragment_begin>"),p.push("#include <lights_fragment_end>"),p.push("vec3 ao = aoEnabled && "+i.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular;");let f="1.0";this.mask&&(this.mask.analyze(e),f=`luminance(${this.mask.flow(e,"v3").result})`),p.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * ${f} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result} * ${f}, ${l.result} );
					
					outgoingLight *= ao;
				}
				`),h&&p.push(h.code,`outgoingLight = spe_blend(outgoingLight, ${h.result}, 1.0, SPE_BLENDING_NORMAL);`),c?p.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`):p.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u&&p.push(`gl_FragColor.a *= ${u.result};`),p.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=p.join(`
`)}return t}},ece=class extends tu{constructor(){super("toon"),this.nodeType="Toon",this.color=new Br(la),this.specular=new Br(1118481),this.shininess=new qe(30),this.previousModelViewMatrix=new Lo,this.previouseProjectionMatrix=new Lo,this.shadingAlpha=new qe(1),this.shadingBlend=new ar(0)}get category(){return"toon"}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:ot.frameIndex}),e.mergeUniform({resolution:ot.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(df.merge([Ie.fog,Ie.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let i=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&i.push(r.code,r.result?"displaced_position = "+r.result+";":""),i.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),i.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),i.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=i.join(`
`)}else{e.mergeUniform({penumbraSize:ot.penumbraSize}),e.mergeUniform({frameIndex:ot.frameIndex}),e.mergeUniform({aoMap:ot.aoRenderTarget}),e.mergeUniform({aoEnabled:ot.aoEnabled}),this.color===void 0&&(this.color=new Br(la)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),i=this.specular.flow(e,"c"),n=this.shininess.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),a=this.shadingBlend.flow(e,"i"),o=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0,h=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];if(this.bumpMap){e.include(tf.dHdxy),e.include(tf.perturbNormalArb);let d=this.bumpMap.texture.flow(e,"t"),p=this.bumpMap.flow(e,"v3"),f=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",m="";this.bumpMap.projection.value===4?m=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${d.result}, uv0, ${f});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${d.result}, uv1, ${f});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${d.result}, uv2, ${f});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:m=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${d.result}, bumpMapCachedUv, ${f});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,c.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${p.result};
					${m}
					`)}c.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",i.code,"	vec3 specular = "+i.result+";",n.code,"	float shininess = max( 0.0001, "+n.result+" );","	float specularStrength = 1.0;"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("material.diffuseColor = diffuseColor;"),c.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c.push("vec3 ao = aoEnabled ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) * ao) + reflectedLight.directSpecular;");let u="1.0";this.mask&&(this.mask.analyze(e),u=`luminance(${this.mask.flow(e,"v3").result})`),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * ${u} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result} * ${u}, ${a.result} );
				}
				`),o&&c.push(o.code,`outgoingLight = spe_blend(outgoingLight, ${o.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),h&&c.push(`gl_FragColor.a *= ${h.result};`),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=c.join(`
`)}return t}},tce=class{constructor(e=1e3*10){this.timeout=e,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...e){}remove(e){let t=this.cache.get(e);t&&(this.dispose(e,t.data),this.cache.delete(e),t.prev.next=t.next,t.next.prev=t.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let e=Date.now(),t=this.head.next;for(;t.time<e-this.timeout;)this.dispose(t.src,t.data),this.cache.delete(t.src),t=t.next,t.prev=this.head,this.head.next=t;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(e){var t;return(t=this.cache.get(e))==null?void 0:t.data}load(e){let t=Date.now(),r=this.cache.get(e);return r===void 0?(r={data:this.create(e),src:e,time:t,next:null,prev:null},this.cache.set(e,r)):(r.time=t,r.prev.next=r.next,r.next.prev=r.prev),r.prev=this.tail.prev,r.next=this.tail,this.tail.prev.next=r,this.tail.prev=r,this.scheduleCleanup(),r.data}},rce=class extends tce{create(e){return URL.createObjectURL(new Blob([e]))}dispose(e,t){URL.revokeObjectURL(t)}},ix;function ice(e){return typeof e=="string"?e:(ix||(ix=new rce),ix.load(e))}var nce=class{constructor(e,t){this.data=e,this.cache=t,this.refCount=0}deref(){this.refCount,this.refCount-=1,this.refCount===0&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount}},sce=class{constructor(){this.cache=new Map}remove(e){this.cache.delete(e.data)}load(e){let t=this.cache.get(e);return t===void 0&&(t=this.create(e),this.cache.set(e,t)),t.refCount+=1,t}},xk=class extends nce{constructor(e,t){super(e,t.imageHolderCache),this.data=e,this.shared=t,this.loaded=!1,this.isVideo=!1,this.isVideo=e.type==="video",this.updateSrc(e.data)}async updateSrc(e){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let t=()=>{this.loaded=!0;let i=[1e3,1001,1002];for(let n of i){let s=this[n];s&&(s.image=this.img,s.needsUpdate=!0)}this.shared.requestRender()};if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,typeof e!="string"){var r=new FileReader;r.readAsDataURL(new Blob([e],{type:"video/mp4"}));let i;await new Promise(n=>{r.onloadend=s=>{var a;i=(a=s.target)==null?void 0:a.result,n(null)}}),this.img.src=i}else this.img.src=e;this.img.onloadeddata=()=>{t()}}else this.img=new Image,this.img.src=ice(e),this.img.onload=t}getTexture(e){let t=this[e];if(t)return t;{let r;return this.isVideo?r=new wK(this.img,void 0,e,e):r=new ui(this.img,void 0,e,e),this.loaded&&(r.needsUpdate=!0),this[e]=r,r}}disposeTextures(){var e,t,r;(e=this[1e3])==null||e.dispose(),this[1e3]=void 0,(t=this[1001])==null||t.dispose(),this[1001]=void 0,(r=this[1002])==null||r.dispose(),this[1002]=void 0}dispose(){super.dispose(),this.disposeTextures()}},ku=class extends xk{};function xn(e,t){return t.color(e)}function ace(e,t){switch(e.type){case"fresnel":return hce(e,t);case"gradient":return uce(e);case"depth":return cce(e);case"normal":return dce(e);case"noise":return pce(e,t);case"rainbow":return fce(e);case"toon":return mce(e,t);case"outline":return gce(e,t);case"transmission":return vce(e);case"color":return lce(e,t);case"pattern":return yce(e,t)}}function oce(e){return{type:e.type}}function Fa(e){let{alpha:t,mode:r,isMask:i}=e;return{...oce(e),alpha:t,mode:r,isMask:i}}function lce(e,t){return{...Fa(e),color:xn(e.color,t)}}function hce(e,t){let{bias:r,scale:i,intensity:n,factor:s,color:a,isMask:o}=e;return{...Fa(e),color:xn(a,t),bias:r,scale:i,intensity:n,factor:s}}function uce(e){let{gradientType:t,smooth:r,colors:i,steps:n,angle:s,offset:a,morph:o}=e;return{...Fa(e),gradientType:t,smooth:r,colors:i.map(l=>new Ct(l[0],l[1],l[2],l[3])),num:i.length,steps:n,offset:new X(...a),morph:new X(...o),angle:s}}function cce(e){let{gradientType:t,near:r,far:i,isVector:n,isWorldSpace:s,origin:a,direction:o,colors:l,steps:h,smooth:c}=e;return{...Fa(e),gradientType:t,near:r,far:i,isVector:n,isWorldSpace:s,origin:new E(...a),direction:o?new E(...o):new E(1,0,0),colors:l.map(u=>u!==void 0?new Ct(u[0],u[1],u[2],u[3]):new Ct(0,0,0,0)),steps:h.slice(0,l.length),smooth:c}}function dce(e){let{cnormal:t}=e;return{...Fa(e),cnormal:new E(t[0],t[1],t[2])}}function pce(e,t){return{...Fa(e),scale:e.scale,move:e.move,fA:new X(...e.fA),fB:new X(...e.fB),size:new E(...e.size),distortion:new X(...e.distortion),colorA:xn(e.colorA,t),colorB:xn(e.colorB,t),colorC:xn(e.colorC,t),colorD:xn(e.colorD,t),noiseType:e.noiseType,voronoiStyle:e.voronoiStyle,highCut:e.highCut,lowCut:e.lowCut,smoothness:e.smoothness,seed:e.seed,quality:e.quality}}function fce(e){return{...Fa(e),filmThickness:e.filmThickness,movement:e.movement,wavelengths:new E(...e.wavelengths),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:new E(...e.offset)}}function mce(e,t){return{...Fa(e),positioning:e.positioning,colors:e.colors.map(r=>new Ct(r[0],r[1],r[2],r[3])),num:e.colors.length,steps:e.steps,source:new E(...e.source),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:xn(e.shadowColor,t),offset:new E(...e.offset)}}function gce(e,t){return{...Fa(e),outlineColor:xn(e.outlineColor,t),contourColor:xn(e.contourColor,t),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:new E(...e.contourDirection),positionalLines:e.positionalLines,compensation:e.compensation}}function vce(e,t){return{...Fa(e),thickness:e.thickness,ior:e.ior,roughness:e.roughness}}function yce(e,t){return{...Fa(e),style:e.style,projection:e.projection,axis:e.axis,blending:e.blending,offset:new X(...e.offset),colorA:xn(e.colorA,t),colorB:xn(e.colorB,t),frequency:new X(...e.frequency),size:e.size,variation:e.variation,smoothness:e.smoothness,zigzag:e.zigzag,rotation:e.rotation,vertical:new X(...e.vertical),horizontal:new X(...e.horizontal),sides:e.sides}}var W3=class extends Xn{},wk={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],light:["roughnessMap","bumpMap"],depth:["smooth","isWorldSpace","gradientType","isVector"],pattern:["style","projection","axis"]},bk={depth:["colors"]};function xce(e,t,r){var s,a;if(t==="isMask")return!0;let i=wk[e.type],n=bk[e.type];if(n!==void 0){let o=e.color;if(n.includes(t)){let l=(a=(s=o[t])==null?void 0:s.value)==null?void 0:a.length;if(l!==void 0&&l!==r.length)return!0}}return i!==void 0?i.includes(t):!1}function _k(e,t,r){let i=r.uniforms[`f${r.id}_texture`];if(!i)return!1;let n=!1,s=e;if("image"in s){let a=s.image,o=t.image(a),l=i;l.image instanceof ku||l.image.deref(),l.image=o}if("video"in s){let a=s.video,o=t.video(a),l=i;l.image instanceof ku||l.image.deref(),l.image=o}if("wrapping"in s){let a=i;a.wrap=s.wrapping}if("repeat"in s||"offset"in s){let a="mat",o=r.uniforms[`f${r.id}_${a}`];"repeat"in s&&(o.repeat=s.repeat),"offset"in s&&(o.offset=s.offset),o.updateMatrix()}return n}function wce(e,t,r,i){let n=!1;for(let[s,a]of Object.entries(e)){if(s==="bumpMap"||s==="roughnessMap"){n=!0;continue}if(!s||a===void 0)continue;if(Sk(s,r,i)){s==="visible"&&r.type==="light"&&(n=!0);continue}r.visible=i.visible;let o=r.uniforms[`f${r.id}_${s}`];if(o&&!(o instanceof Bb))switch(n=n||xce(r,s,a),o.constructor){case Br:if(typeof a=="string"){let l=t.getColor(a);l&&(o.value=l);break}else{let l=a;o.value instanceof W3?o.value=new Xn(l.r,l.g,l.b,l.a):o.setRGBA(l);break}case Jo:if(typeof a=="string"){let l=t.getColor(a);l&&(o.value=l);break}else{let l=a;o.value instanceof W3?o.value=new Xn(l.r,l.g,l.b,l.a):o.value.setRGBA(l.r,l.g,l.b,l.a);break}case Ii:{let l=a;o.value.setX(l[0]),o.value.setY(l[1]);break}case Bs:{let l=a;o.value.setX(l[0]),o.value.setY(l[1]),o.value.setZ(l[2]);break}case hl:{_k(a,t,r);break}case _u:{o.value=a.map(l=>new Ct(...l));break}default:{o.value=a;break}}}return n}var ic=class{constructor(e,t,r,i){this.id=e,this.uuid=t,this.data=r,this.uniforms={};for(let n in i)this.uniforms[`f${this.id}_${n}`]=i[n];for(let n in r)Sk(n,this,r)}get type(){return this.data.type}static create(e,t,r,i){if(r.type==="light")return el.createLigherLayer(e,t,r,i);if(r.type==="texture"||r.type==="video"){let n=r.type==="texture"?i.image(r.texture.image):i.video(r.texture.video),s=new M8(n,r.texture.wrapping),a=new que(n),o=new Xue(r.texture.repeat,r.texture.offset),l=new qe(r.crop?1:0),h=new ar(r.projection??0),c=new ar(["x","y","z"].indexOf(r.axis)??0),u=new ar(r.side??0),d=new Ii(r.size?new X(r.size[0],r.size[1]):new X(100,100)),p=new qe(r.blending??0),f=new qe(r.alpha??1),m=new ar(r.mode??0),g=new vn(r.isMask??!1),v=new zb(s,a,l,h,c,u,d,p,o,f,m,g),y=new pr(v.calpha,"f");return new Pr(e,t,r,{texture:s,textureSize:a,crop:l,projection:h,axis:c,side:u,size:d,blending:p,mat:o,alpha:f,mode:m,isMask:g},v,m,y,g)}else if(r.type==="matcap"){let n=i.image(r.texture.image),s=new M8(n,r.texture.wrapping),a=new qe(r.alpha??1),o=new ar(r.mode??0),l=new vn(r.isMask??!1),h=new sk(s,a,o,l),c=new pr(h.calpha,"f");return new Pr(e,t,r,{texture:s,alpha:a,mode:o,isMask:l},h,o,c,l)}else if(r.type==="displace")if(r.displacementType==="noise"){let n=new Bs(new E(...r.offset)),s=new qe(r.scale??10),a=new qe(r.intensity??8),o=new qe(r.movement??1),l=new ar(r.noiseType??0),h=new ar(r.voronoiStyle??0),c=new qe(r.smoothness??.5),u=new qe(r.seed??0),d=new qe(r.highCut??1),p=new qe(r.lowCut??0),f=new ar(r.quality??1),m=new vk(a,o,n,h,c,u,d,p,f,s,l);return new Ck(e,t,r,{offset:n,scale:s,intensity:a,movement:o,noiseType:l,voronoiStyle:h,smoothness:c,seed:u,highCut:d,lowCut:p,quality:f},m)}else throw new Error;else return Cce(e,t,r,i)}updateByOp(e,t,r){let i=e;if(i.path[0]===void 0){if(i.type===0)return"type"in i.props||"category"in i.props||"visible"in i.props?(r.scene.markNeedsUpdateRendererDirty(),!0):wce(i.props,r.shared,this,t)}else if(i.path[0]==="texture")return"texture"in t||"video"in t?_k(i.props,r.shared,this):!0;return!1}dispose(){if(bce(this)){let e=this.uniforms[`f${this.id}_texture`];if(!e)return!1;let t=e;t.image instanceof ku||t.image.deref()}}hasValueByKey(e){return this.uniforms[e]!==void 0}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,t){let r=`f${this.id}_${e}`;this.hasValueByKey(r)&&t!==void 0&&(this.uniforms[r].value=t)}getNode(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t]}getValue(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t].value}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let t in this.uniforms){let r=this.getName(t);r&&e.push(r)}return e}},Pr=class extends ic{constructor(e,t,r,i,n,s,a,o){super(e,t,r,i),this.params=i,this.color=n,this.mode=s,this.alpha=a,this.isMask=o}},Ck=class extends ic{constructor(e,t,r,i,n){super(e,t,r,i),this.position=n}},el=class extends ic{constructor(e,t,r,i,n){super(e,t,r,n),this.node=i}static createLigherLayer(e,t,r,i){let n,s=new qe(r.alpha),a=new ar(r.mode),o=new qe(r.bumpMapIntensity),l=new qe(r.alphaOverride),h;if(!r.visible)n=new yk,h={};else if(r.category==="lambert"){n=new Kue;let c=new Br(i.color(r.emissive)??0),u=new vn(r.occlusion??!0);h={emissive:c,occlusion:u},n.emissive=c,n.occlusion=u}else if(r.category==="toon"){n=new ece;let c=new qe(r.shininess??30),u=new Br(i.color(r.specular)??1118481);h={shininess:c,specular:u},n.shininess=c,n.specular=u}else if(r.category==="physical"){n=new Jue;let c=new qe(r.roughness??.3),u=new qe(r.metalness??0),d=new qe(r.reflectivity??.5),p=new vn(r.occlusion??!0);h={roughness:c,metalness:u,reflectivity:d,occlusion:p},n.roughness=c,n.metalness=u,n.reflectivity=d,n.occlusion=p}else{n=new $ue;let c=new qe(r.shininess??30),u=new Br(r.specular!==void 0?i.color(r.specular)??1118481:1118481),d=new vn(r.occlusion??!0);h={shininess:c,specular:u,occlusion:d},n.shininess=c,n.specular=u,n.occlusion=d}return n.alpha=new qe(1),n.shadingAlpha=s,n.shadingBlend=a,n.bumpMapIntensity=o,n.alphaOverride=l,h.alpha=n.shadingAlpha,h.mode=n.shadingBlend,h.bumpMapIntensity=n.bumpMapIntensity,h.alphaOverride=n.alphaOverride,new el(e,t,r,n,h)}get category(){return this.node.category}};function bce(e){let t=e instanceof ic?e.type:e;return t==="texture"||t==="video"||t==="displace_map"||t==="matcap"}function Ls(e){return{alpha:new qe(e.alpha??1),mode:new ar(e.mode??0),isMask:new vn(e.isMask??!1)}}function _ce(e,t,r,i){switch(e.type){case"color":{let n=new Br(i.color??la),s=Ls(i),a=new A8(n,s.alpha),o=new pr(a.calpha,"f");return new Pr(t,r,e,{color:n,...s},a,s.mode,o,s.isMask)}case"fresnel":{let n=new Br(i.color??16777215),s=new qe(i.bias??.1),a=new qe(i.scale??1),o=new qe(i.intensity??2),l=new qe(i.factor??1),h=Ls(i),c=new Yue(n,s,a,o,l,h.alpha,h.mode,h.isMask),u=new pr(c.calpha,"f");return new Pr(t,r,e,{color:n,bias:s,scale:a,intensity:o,factor:l,...h},c,h.mode,u,h.isMask)}case"rainbow":{let n=new qe(i.filmThickness??30),s=new qe(i.movement??0),a=new Bs(i.wavelengths??new E(0,0,0)),o=new qe(i.noiseStrength??0),l=new qe(i.noiseScale??1),h=new Bs(i.offset??new E(0,0,0)),c=Ls(i),u=new ck(n,s,a,o,l,h,c.alpha,c.isMask),d=new pr(u.calpha,"f");return new Pr(t,r,e,{filmThickness:n,movement:s,wavelengths:a,noiseStrength:o,noiseScale:l,offset:h,...c},u,c.mode,d,c.isMask)}case"transmission":{let n=new qe(i.thickness??10),s=new qe(i.ior??1.5),a=new qe(i.roughness??.5),o=ot.transmissionSize,l=ot.transmissionRenderTarget,h=ot.transmissionRenderTargetDepth,c=window.innerWidth,u=window.innerHeight,d=c>=u?new Ii(u/c,1):new Ii(1,c/u),p=Ls(i),f=new mk(n,s,a,o,l,h,d,p.alpha),m=new pr(f.calpha,"f");return new Pr(t,r,e,{thickness:n,ior:s,roughness:a,aspectRatio:d,...p},f,p.mode,m,p.isMask)}case"toon":{let n=new ar(i.positioning??0),s;i.colors?s=new _u(i.colors.length,i.colors):(s=new _u(10,new Ct(0,0,0,1)),s.value[1]=new Ct(1,1,1,1));let a;i.steps?a=new bu(i.steps.length,i.steps):(a=new bu(10,1),a.value[0]=0);let o=new Bs(i.source??new E(0,0,0)),l=new vn(i.isWorldSpace??!0),h=new qe(i.noiseStrength??0),c=new qe(i.noiseScale??1),u=new Jo(i.shadowColor),d=new Bs(i.offset??new E(0,0,0)),p=Ls(i),f=new pk(n,s,a,o,l,h,c,u,d,p.alpha),m=new pr(f.calpha,"f");return new Pr(t,r,e,{positioning:n,colors:s,steps:a,source:o,isWorldSpace:l,noiseStrength:h,noiseScale:c,shadowColor:u,offset:d,...p},f,p.mode,m,p.isMask)}case"outline":{let n=new Br(i.outlineColor??16777215),s=new Br(i.contourColor??16777215),a=new qe(i.outlineWidth??.1),o=new qe(i.contourWidth??.1),l=new qe(i.outlineThreshold??.1),h=new qe(i.contourThreshold??.1),c=new qe(i.outlineSmoothing??.1),u=new qe(i.contourFrequency??.1),d=new Bs(i.contourDirection??new E(0,1,0)),p=new vn(i.positionalLines??!1),f=new vn(i.compensation??!0),m=ot.normalRenderTarget,g=ot.normalRenderTargetDepth,v=ot.pixelRatioNode,y=ot.resolution,x=Ls(i),w=new lk(n,s,a,o,l,h,c,u,d,p,f,y,m,g,v,x.alpha),_=new pr(w.calpha,"f");return new Pr(t,r,e,{outlineColor:n,contourColor:s,outlineWidth:a,contourWidth:o,outlineThreshold:l,contourThreshold:h,outlineSmoothing:c,contourFrequency:u,contourDirection:d,positionalLines:p,compensation:f,...x},w,x.mode,_,x.isMask)}case"depth":{let n=new ar(i.gradientType??0),s=new vn(i.smooth??!1),a=new qe(i.near??50),o=new qe(i.far??200),l=new qe(i.isVector??1),h=new qe(i.isWorldSpace??0),c=new Bs(i.origin??new E),u=new Bs(i.direction??new E),d;i.colors?d=new _u(i.colors.length,i.colors):(d=new _u(2,new Ct(0,0,0,1)),d.value[1]=new Ct(1,1,1,1));let p;i.steps?p=new bu(i.steps.length,i.steps):(p=new bu(2,1),p.value[0]=0);let f=Ls(i),m=new tk(n,s,a,o,l,h,c,u,d,p,f.alpha,f.isMask),g=new pr(m.calpha,"f");return new Pr(t,r,e,{gradientType:n,smooth:s,near:a,far:o,isVector:l,isWorldSpace:h,origin:c,direction:u,colors:d,steps:p,...f},m,f.mode,g,f.isMask)}case"noise":{let n=new qe(i.scale??1),s=new Bs(i.size??new E(100,100,100)),a=new qe(i.move??1),o=new Ii(i.fA??new X(1.7,9.2)),l=new Ii(i.fB??new X(8.3,2.8)),h=new Ii(i.distortion??new X(1,1)),c=new Jo(i.colorA),u=new Jo(i.colorB),d=new Jo(i.colorC),p=new Jo(i.colorD),f=new ar(i.noiseType??0),m=new ar(i.voronoiStyle??0),g=new qe(i.highCut??1),v=new qe(i.lowCut??0),y=new qe(i.smoothness??.5),x=new qe(i.seed??.5),w=new ar(i.quality??1),_=Ls(i),b=new ak(n,s,a,o,l,h,c,u,d,p,_.alpha,f,_.isMask,m,g,v,y,x,w),S=new pr(b.calpha,"f");return new Pr(t,r,e,{scale:n,size:s,move:a,fA:o,fB:l,distortion:h,colorA:c,colorB:u,colorC:d,colorD:p,noiseType:f,..._,voronoiStyle:m,highCut:g,lowCut:v,smoothness:y,seed:x,quality:w},b,_.mode,S,_.isMask)}case"normal":{let n=new Bs(i.cnormal??new E(1,1,1)),s=Ls(i),a=new ek(n,s.alpha),o=new pr(a.calpha,"f");return new Pr(t,r,e,{cnormal:n,...s},a,s.mode,o,s.isMask)}case"gradient":{let n=new ar(i.gradientType??0),s=new vn(i.smooth??!1),a;i.colors?a=new _u(i.colors.length,i.colors):(a=new _u(10,new Ct(0,0,0,1)),a.value[1]=new Ct(1,1,1,1));let o;i.steps?o=new bu(i.steps.length,i.steps):(o=new bu(10,1),o.value[0]=0);let l=new Ii(i.offset??new X(0,0)),h=new Ii(i.morph??new X(0,0)),c=new qe(i.angle??0),u=Ls(i),d=new ik(n,s,a,o,l,h,c,u.alpha,u.isMask),p=new pr(d.calpha,"f");return new Pr(t,r,e,{gradientType:n,smooth:s,colors:a,steps:o,offset:l,morph:h,angle:c,...u},d,u.mode,p,u.isMask)}case"pattern":{let n=new ar(i.style??0),s=new ar(i.projection??0),a=new ar(["x","y","z"].indexOf(i.axis)??0),o=new qe(i.blending??0),l=new Ii(i.offset??new X(0,0)),h=new Jo(i.colorA),c=new Jo(i.colorB),u=new Ii(i.frequency??new X(10,10)),d=new qe(i.size??.5),p=new qe(i.variation??0),f=new qe(i.smoothness??.5),m=new qe(i.zigzag??0),g=new qe(i.rotation??0),v=new Ii(i.vertical??new X(0,1)),y=new Ii(i.horizontal??new X(0,1)),x=new ar(i.sides??6),w=Ls(i),_=new hk(n,s,a,o,l,h,c,u,d,p,f,m,g,v,y,x,w.alpha,w.isMask),b=new pr(_.calpha,"f");return new Pr(t,r,e,{style:n,projection:s,axis:a,blending:o,offset:l,colorA:h,colorB:c,frequency:u,size:d,variation:p,smoothness:f,zigzag:m,rotation:g,vertical:v,horizontal:y,sides:x,...w},_,w.mode,b,w.isMask)}default:{let n=new Br(1,0,0,1),s=Ls(i),a=new A8(n,s.alpha),o=new pr(a.calpha,"f");return new Pr(t,r,e,{color:n,...s},a,s.mode,o,s.isMask)}}}function Cce(e,t,r,i){let n=ace(r,i);return _ce(r,e,t,n)}function Sk(e,t,r){if(r.type==="displace"&&(e==="intensity"||e==="visible")){let i=t.uniforms[`f${t.id}_intensity`];return i?(i.value=r.intensity*(r.visible?1:0),i):void 0}if(r.type!=="displace"&&(e==="alpha"||e==="visible")){let i=t.uniforms[`f${t.id}_alpha`];if(!i)return;if(i.value=r.alpha*(r.visible?1:0),r.type==="outline"&&e==="visible"){let n=t.uniforms[`f${t.id}_compensation`];n&&(n.value=r.compensation&&r.visible)}return i}}function q3(e,t){let r=0,i=e.layers.find(n=>n.data.type==="light");if(i&&i.data.alphaOverride<1)return!0;for(let n of e.layers){if(n.data.type!=="displace"&&n.data.isMask)return!0;if(n.data.type!=="displace"&&"alpha"in n.data&&n.data.type!=="light"&&n.data.type!=="fresnel"&&n.data.type!=="texture"&&n.data.type!=="matcap"&&n.data.type!=="rainbow"&&n.data.type!=="outline"&&n.data.type!=="pattern"){let s=n.data.visible?n.data.alpha:0;if(s===1&&n.data.type==="depth"||n.data.type==="gradient"){for(let a of n.data.colors)if(a[3]<1){s=a[3];break}}else if(s===1&&n.data.type==="noise"){let a=t.color(n.data.colorA).a,o=t.color(n.data.colorB).a,l=t.color(n.data.colorC).a,h=t.color(n.data.colorD).a,c=Math.min(a,Math.min(o,Math.min(l,h)));c<1&&(s=c)}r+=(1-r)*s}}return r<1}var Yh=class extends cr{constructor(){super(void 0),this.flatShading=!1,this.needsJitter=!0,this.cacheKey="",this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return this.cacheKey}},Sce=class extends Yh{constructor(e,t,r,i){super(),this.flatShading=e,this.side=t,this.wireframe=r,this.root=i}updateAfterBuild(){let e=this.root;this.lights=e.lights,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.transparent=e.transparent,this.cacheKey=e.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(e,t){this.root.onBeforeCompile(e)}get data(){return this.root.data}get category(){return this.root.category}get hasAO(){return this.root.hasAO}getFlavor(e,t,r){return this.root.getFlavor(e,t,r)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(e){return this.root.getLayersOfType(e)}getLayerByUuid(e){return this.root.getLayerByUuid(e)}updateByOp(e,t,r){this.root.updateByOp(e,t,r)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},Nb=class extends Yh{constructor(e,t){super(),this.data=e,this.layerIdGen=0,this.flavors=[],this.masks={},this.type="NodeMaterial",this.updaters=[],this.reset0(e,t)}get nodeMaterial(){return this}getFlavor(e,t,r){let i=r?6:(e?3:0)+t;if(i===0)return this;this.flavors===void 0&&(this.flavors=[]),i-=1;let n=this.flavors[i];return n===void 0&&(n=new Sce(e,t,r,this),this.flavors[i]=n,n.flatShading=e,n.side=t,n.updateAfterBuild()),n}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}get hasAO(){var e;return((e=this.lightLayer.getNode("occlusion"))==null?void 0:e.value)??!1}reset(e,t){this.data!==e&&this.reset0(e,t)}reset0(e,t){this.data=e;let r=e.layers??Ki.defaultTwoLayerData("phong").layers;try{this.layers=r.map(i=>ic.create(this.layerIdGen++,i.id,i.data,t.shared))}catch{this.layers=[]}this.layers.reverse(),this.name=e.name??"Untitled Material",this.onUpdate(),this.transparent=q3(e,t.shared)}getLayersOfType(e){return this.layers.filter(t=>t.type===e)}getLayerByUuid(e){return this.layers.find(t=>t.uuid===e)}onUpdate(){this.cacheKey=this.computeCacheKey(),this.lightLayer=this.layers.find(e=>e instanceof el),this.lightLayer===void 0&&(this.lightLayer=new el(0,"",{...Dn.defaultData("light","phong"),visible:!1},new yk,{})),this.dispose();for(let e of this.flavors)e&&e.dispose();this.applyTextureMaps(),this.applyMasks(),this.blendColors(),this.blendAfterColors(),this.blendPositions()}applyTextureMaps(){let e=this.layers.find(n=>n instanceof el);if(!e)return;let t=e.data,r=t.bumpMap,i=t.roughnessMap;e.node.bumpMap=void 0,e.node.roughnessMap=void 0;for(let n=0;n<this.layers.length;++n){let s=this.layers[n];s instanceof Pr&&s.color instanceof zb&&(s.uuid===r&&(e.node.bumpMap=s.color),s.uuid===i&&(e.node.roughnessMap=s.color))}}updateByOp(e,t,r){if(t!==void 0?this.data=t:t=this.data,this.transparent=q3(t,r.shared),e.path[0]==="layers"){this.data=t;let i=r.shared,n=e.path[1];if(n===void 0){if(this.layers.reverse(),e.type===4){let s=ic.create(this.layerIdGen++,e.id,e.data,r.shared);this.layers.splice(e.localIndex,0,s),r.scene.markNeedsUpdateRendererDirty()}else if(e.type===5)this.layers.splice(e.localIndex,1)[0].dispose(),r.scene.markNeedsUpdateRendererDirty();else if(e.type===6){let s=this.layers.findIndex(o=>o.uuid===e.id),a=this.layers[s];this.layers.splice(s,1),this.layers.splice(e.localIndex,0,a),r.scene.markNeedsUpdateRendererDirty()}this.layers.reverse(),this.onUpdate()}else{e.type===0&&e.props.occlusion!==void 0&&r.scene.markNeedsUpdateRendererDirty();let s=this.layers.find(a=>a.uuid===n);if(s){let a=t.layers.data(n);if(s.updateByOp({...e,path:e.path.slice(2)},a,r)){let o=ic.create(this.layerIdGen++,n,a,i);this.layers.splice(this.layers.findIndex(l=>l.uuid===n),1,o),this.onUpdate()}}}}else this.reset(t,r)}applyMasks(){for(let e=0;e<this.layers.length;++e){let t=this.layers[e];t instanceof Pr?t.color.mask=void 0:t instanceof el&&(t.node.mask=void 0)}for(let e=0;e<this.layers.length;++e){let t=this.layers[e];if(t instanceof Pr&&t.isMask.value&&t.data.visible&&e>0){let r=e-1,i=this.layers[r];i instanceof el?i.node.mask=new Ln(t.color,t.alpha,Ln.MUL):i instanceof Pr&&(i.isMask.value||(i.color.mask=new Ln(t.color,t.alpha,Ln.MUL)))}}}blendColors(){let e=this.layers.findIndex(r=>r instanceof Pr),t=this.layers.findIndex(r=>r instanceof el);if(e!==-1&&e<t){let r=this.layers[e].color;for(let i=e+1;i<t;++i){let n=this.layers[i];if(n instanceof Pr){if(n.isMask.value)continue;r=new fT(r,n.color,n.alpha,n.mode)}}this.fragment.color=r}else this.fragment.color=void 0}blendAfterColors(){let e=new pr("outgoingLight","f"),t=this.layers.findIndex(r=>r instanceof el);if(this.layers.length>t+1){for(let r=t+1;r<this.layers.length;++r){let i=this.layers[r];if(i instanceof Pr){if(i.isMask.value)continue;e=new fT(e,i.color,i.alpha,i.mode)}}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter(t=>t instanceof Ck);if(e.length>0){let t=e[0].position;for(let r=1;r<e.length;++r)e[r]&&(t=new Ln(t,e[r].position,Ln.ADD),t=new Ln(t,new qe(.5).setReadonly(!0),Ln.MUL));this.fragment.position=t}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=this.extensions.derivatives===!0,e.extensionFragDepth=this.extensions.fragDepth===!0,e.extensionDrawBuffers=this.extensions.drawBuffers===!0,e.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(e,t){let r=(i,n,s)=>Math.min(Math.max(i,n),s);for(let i of this.layers)if(i.type==="displace"){let n=r(i.uniforms[`f${i.id}_intensity`].value,e,t);i.uniforms[`f${i.id}_intensity`].value=n}}computeCacheKey(){let e="[";for(let{data:t}of this.data.layers)if(t.type==="light")e+=`"${t.visible?t.category.toUpperCase():"Basic"}"`;else{let r=(wk[t.type]??[]).map(o=>t[o]),i=(bk[t.type]??[]).map(o=>{var l;return((l=t[o])==null?void 0:l.length)??0}),n=[...r,...i],s="isMask"in t&&t.isMask,a=`"${t.type}-${t.visible}-${s}"`;n.length?e+=`[${a}, "${n.join('","')}"],`:e+=a}return e=e.slice(0,-1)+"]",e}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(){let e=new Wue;e.needsJitter=this.needsJitter,this.lights=this.lightLayer.data.visible,e.build(this.fragment,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters;for(let t of this.flavors)t&&t.updateAfterBuild();return this}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose();for(let e of this.flavors)e&&e.dispose()}assetsLoaded(){for(let e of this.layers)if(e instanceof Pr){let t=e.params.texture;if(t instanceof M8&&!t.image.loaded)return!1}return!0}getHash(){let e="{";return e+='"fragment":'+this.fragment.getHash(),e+="}",e}};Object.defineProperties(Yh.prototype,{properties:{get:function(){return this.fragment.properties}}});var T8=class extends Nb{},Mce=hf(uW()),mT=new Map;function Ace(e){if(typeof e=="string")return e;let t=mT.get(e);return t||(t={url:URL.createObjectURL(new Blob([e]))},mT.set(e,t)),t.url}var U1=class{constructor({src:e,volume:t,delay:r,loop:i}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let n;typeof e=="string"?n={src:e}:n={src:Ace(e),format:"wav"},this.sound=new Mce.Howl(n),this.sound.on("end",this.onEnd),this.src=e,t!==void 0&&(this.volume=t),r!==void 0&&(this.delay=r),i!==void 0&&(this.loop=i)}get status(){return this._status}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(e,t=1e3){e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,t),this.clearFade()},e)):this.sound.fade(this._volume,0,t)}on(e,t,r){this.sound.on(e,t,r)}off(e,t,r){this.sound.off(e,t,r)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(e=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},Ece=class{constructor(){this.type="ShapePath",this.color=new lt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new d3,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){var r;return(r=this.currentPath)==null||r.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){var n;return(n=this.currentPath)==null||n.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,n,s){var a;return(a=this.currentPath)==null||a.bezierCurveTo(e,t,r,i,n,s),this}splineThru(e){var t;return(t=this.currentPath)==null||t.splineThru(e),this}toShapes(){let e={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},t={loc:e.ORIGIN,t:0};function r(p,f,m,g){let v=p.x,y=f.x,x=m.x,w=g.x,_=p.y,b=f.y,S=m.y,C=g.y,M=(w-x)*(_-S)-(C-S)*(v-x),A=(y-v)*(_-S)-(b-_)*(v-x),T=(C-S)*(y-v)-(w-x)*(b-_),L=M/T,D=A/T;if(T===0&&M!==0||L<=0||L>=1||D<0||D>1)return null;if(M===0&&T===0){for(let O=0;O<2;O++)if(i(O===0?m:g,p,f),t.loc===e.ORIGIN){let z=O===0?m:g;return{x:z.x,y:z.y,t:t.t}}else if(t.loc===e.BETWEEN){let z=+(v+t.t*(y-v)).toPrecision(10),q=+(_+t.t*(b-_)).toPrecision(10);return{x:z,y:q,t:t.t}}return null}else{for(let q=0;q<2;q++)if(i(q===0?m:g,p,f),t.loc===e.ORIGIN){let N=q===0?m:g;return{x:N.x,y:N.y,t:t.t}}let O=+(v+L*(y-v)).toPrecision(10),z=+(_+L*(b-_)).toPrecision(10);return{x:O,y:z,t:L}}}function i(p,f,m){let g=m.x-f.x,v=m.y-f.y,y=p.x-f.x,x=p.y-f.y,w=g*x-y*v;if(p.x===f.x&&p.y===f.y){t.loc=e.ORIGIN,t.t=0;return}if(p.x===m.x&&p.y===m.y){t.loc=e.DESTINATION,t.t=1;return}if(w<-Number.EPSILON){t.loc=e.LEFT;return}if(w>Number.EPSILON){t.loc=e.RIGHT;return}if(g*y<0||v*x<0){t.loc=e.BEHIND;return}if(Math.sqrt(g*g+v*v)<Math.sqrt(y*y+x*x)){t.loc=e.BEYOND;return}let _;g!==0?_=y/g:_=x/v,t.loc=e.BETWEEN,t.t=_}function n(p,f){let m=[],g=[];for(let v=1;v<p.length;v++){let y=p[v-1],x=p[v];for(let w=1;w<f.length;w++){let _=f[w-1],b=f[w],S=r(y,x,_,b);S!==null&&m.find(C=>C.t<=S.t+Number.EPSILON&&C.t>=S.t-Number.EPSILON)===void 0&&(m.push(S),g.push(new X(S.x,S.y)))}}return g}function s(p,f,m){let g=new X;f.getCenter(g);let v=[];return m.forEach(y=>{y.boundingBox.containsPoint(g)&&n(p,y.points).forEach(x=>{v.push({identifier:y.identifier,isCW:y.isCW,point:x})})}),v.sort((y,x)=>y.point.x-x.point.x),v}function a(p,f,m,g,v){(v==null||v==="")&&(v="nonzero");let y=new X;p.boundingBox.getCenter(y);let x=[new X(m,y.y),new X(g,y.y)],w=s(x,p.boundingBox,f);w.sort((A,T)=>A.point.x-T.point.x);let _=[],b=[];w.forEach(A=>{A.identifier===p.identifier?_.push(A):b.push(A)});let S=_[0].point.x,C=[],M=0;for(;M<b.length&&b[M].point.x<S;)C.length>0&&C[C.length-1]===b[M].identifier?C.pop():C.push(b[M].identifier),M++;if(C.push(p.identifier),v==="evenodd"){let A=C.length%2===0,T=C[C.length-2];return{identifier:p.identifier,isHole:A,for:T}}else if(v==="nonzero"){let A=!0,T=null,L=null;for(let D=0;D<C.length;D++){let O=C[D];f[O]&&(A?(L=f[O].isCW,A=!1,T=O):L!==f[O].isCW&&(L=f[O].isCW,A=!0))}return{identifier:p.identifier,isHole:A,for:T}}else console.warn('fill-rule: "'+v+'" is currently not implemented.')}let o=0,l=999999999,h=-999999999,c=[];this.subPaths.forEach(p=>{let f=p.getPoints(),m=-999999999,g=999999999,v=-999999999,y=999999999;for(let x=0;x<f.length;x++){let w=f[x];w.y>m&&(m=w.y),w.y<g&&(g=w.y),w.x>v&&(v=w.x),w.x<y&&(y=w.x)}h<=v&&(h=v+1),l>=y&&(l=y-1),f.length&&c.push({curves:p.curves,points:f,isCW:UR.isClockWise(f),identifier:o++,boundingBox:new M$(new X(y,g),new X(v,m))})});let u=c.map(p=>{var f;return a(p,c,l,h,(f=this.userData)==null?void 0:f.style.fillRule)}),d=[];return c.forEach(p=>{let f=u[p.identifier];if(f&&!f.isHole){let m=new p3;m.curves=p.curves,u.filter(g=>(g==null?void 0:g.isHole)&&g.for===p.identifier).forEach(g=>{if(g){let v=c[g.identifier],y=new d3;y.curves=v.curves,m.holes.push(y)}}),d.push(m)}}),d}},Mk,gT=new Promise(e=>{Mk=e}),vT=!1,wv;function Tce(){if(vT)return;if(wv)return wv;async function e(){let t=await Am(()=>import("./opentype-fc28cde9.js"),[]);Mk(t),vT=!0}return wv=e(),wv}var Lce=class{async load(e,t,r=()=>{}){let{load:i}=await gT;i(e,(n,s)=>{n||!s?r(n??"Something went wrong"):t(s)})}async parse(e){let{parse:t,Bidi:r}=await gT;try{let i=t(e),n=new r,s=a=>i.charToGlyphIndex(a.char);return n.registerModifier("glyphIndex",null,s),n.applyFeatures(i,i.defaultRenderOptions.features),{font:i,bidi:n}}catch(i){console.error(i)}}};async function Pce(e){return await(await fetch(e)).arrayBuffer()}var Dce=new Lce;async function yT(e){let t,r,i=!1;if(e.url?(t=await Pce(e.url),r=e.url,i=e.url.startsWith("/")):e.data&&(t=e.data.buffer.slice(e.data.byteOffset,e.data.byteOffset+e.data.byteLength)),t){let n=await Dce.parse(t);if(n)return{font:n.font,url:r,intercepted:i,arr:t,bidi:n.bidi}}}function Oce(e,t){return t.state.glyphIndex===e||t.state.fina===e||t.state.medi===e||t.state.init===e}var Ice=class{constructor(e){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=yT(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}update(e){this._isLoaded=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=yT(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(e,t,r){if(!this._bidi)return[];let i=this._bidi;i.getTextGlyphs(t);let n=i.tokenizer.tokens,s=[],a=0,o=r.length===n.length;for(let l=0;l<r.length;l++){let h=r[l].index,c=String.fromCharCode(r[l].unicode),u=n[a];if(Oce(h,u)||o)s.push({char:c,index:h,replacements:[u.state.glyphIndex],replacementChars:[u.char]}),a++;else{let d=u.char,p="",f=[u.state.glyphIndex],m=[],g=!1;for(;!g;)a++,p=t.charAt(a),d+=p,f.push(e.charToGlyphIndex(p)),m=e.stringToGlyphs(d),m.length===1&&m[0].index===h&&(g=!0),a>t.length&&(g=!0);s.push({char:c,index:h,replacements:f,replacementChars:Array.from(d)}),a++}}return s}generateShapes(e,t){if(!this._isLoaded)return;let r=this.font,i=t.fontSize/this.unitsPerEm,n=t.fontSize*t.lineHeight,s=e.map(v=>this.getTextWidth(v,t)),a=t.width,o=this.getCharWidth(`
`,t),l=t.horizontalAlign===1?o:0,h=this.computeSpaceWidthForLine(e,0,t),c=this.getLineInitialOffsetX(s[0],a,t.horizontalAlign,e[0],o),u=this.getLineInitialOffsetY(n,e.length,t.height,i,t.verticalAlign),d=[],p=e.map(v=>[]),f=e.map(v=>[]),m;for(let v=0;v<e.length;v++){let y=e[v],x={features:{liga:!0}},w=[];try{w=r.stringToGlyphs(y,x)}catch(b){console.warn(b)}c=this.getLineInitialOffsetX(s[v],a,t.horizontalAlign,y,o);let _=[];try{_=this.reverseLigaturesTable(r,y,w)}catch(b){console.warn(b)}h=this.computeSpaceWidthForLine(e,v,t);for(let b=0;b<w.length;b++){let S=w[b],C=S.index===0?`
`:S.unicode?String.fromCharCode(S.unicode):void 0,M=_[b],A=0,T=0;b===0&&t.horizontalAlign===2&&S.leftSideBearing!==void 0&&(T=-S.leftSideBearing*i),m&&(A=r.getKerningValue(S,m)*i),c+=T+A;let L=0;if(C===`
`)L=l;else if(C===" ")L=h;else{let D=this.createPath(S,i,c,u,t);D&&(L=D.offsetX-(A+T),d.push(D.path))}if(M.replacements.length===1)f[v].push([c,u]),p[v].push(L);else{let D=M.replacements.map(N=>(r.glyphs.get(N).advanceWidth??0)*i),O=D.reduce((N,I)=>N+=I,0),z=D.map(N=>N/O),q=c;for(let N=0;N<z.length;N++){let I=L*z[N];f[v].push([q,u]),p[v].push(I),q+=I}}c+=L,m=S}u-=n}let g=[];for(let v=0,y=d.length;v<y;v++)g.push(...d[v].toShapes());return{shapes:g,charWidths:p,lineWidths:s,charCoords:f}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var e;return((e=this.font)==null?void 0:e.ascender)??0}get descender(){var e;return((e=this.font)==null?void 0:e.descender)??0}get familyName(){var e;return((e=this.font)==null?void 0:e.names.fontFamily)??""}get subfamilyName(){var e;return((e=this.font)==null?void 0:e.names.fontSubfamily)??""}get unitsPerEm(){var e;return((e=this.font)==null?void 0:e.unitsPerEm)??1}getLineInitialOffsetX(e,t,r,i,n){return(r===3||r===2)&&i.indexOf(`
`)>=0&&(e-=n),r===3?t*.5-e*.5:r===2?t-e:0}getLineInitialOffsetY(e,t,r,i,n){let s=t*e,a=Math.abs(this.ascender-this.descender)*i,o=e-a,l=-this.ascender*i-o/2;return n===3?-(r-s-l):n===2?-(r*.5-s*.5-l):l}createPath(e,t,r,i,n){var l;let s=e.getPath(r,-i,n.fontSize,{kerning:!1,letterSpacing:n.letterSpacing});if(!s){console.error('THREE.Font: character "'+e+'" does not exists in font family '+this.familyName+".");return}let a=new Ece,o=(e.advanceWidth??1)*t;if(e)for(let h of s.commands){let c=(l=a.currentPath)==null?void 0:l.currentPoint;if(!(c&&h.type!=="Z"&&c.x===h.x&&-c.y===h.y))switch(h.type){case"M":a.moveTo(h.x,-h.y);break;case"L":a.lineTo(h.x,-h.y);break;case"Q":a.quadraticCurveTo(h.x1,-h.y1,h.x,-h.y);break;case"C":a.bezierCurveTo(h.x1,-h.y1,h.x2,-h.y2,h.x,-h.y);break}}return a.subPaths.forEach(h=>{let c=Rce(h.curves);c!==void 0&&h.currentPoint.distanceTo(c)>0&&h.lineTo(c.x,c.y)}),{offsetX:o+n.fontSize*n.letterSpacing,path:a}}getCharWidth(e,t){var r;return((r=this.font)==null?void 0:r.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}getTextWidth(e,t){var r;return((r=this.font)==null?void 0:r.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}computeSpaceWidthForLine(e,t,r){let i=this.getCharWidth(" ",r),n=e[t];if(n){let s=this.countSpaces(n.trimEnd());if(r.horizontalAlign===4&&t<e.length-1&&s){let a=r.width,o=this.getTextWidth(n,r);return(a-(o-s*i))/s}}return i}countSpaces(e){return(e.match(/ /g)||[]).length}};function Rce(e){if(e.length){let t=e[0];if(t instanceof Ra)return t.v1;if(t instanceof Aa||t instanceof qh)return t.v0}}var Bce=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(e){return this.objects.get(e)}get size(){return this.objects.size}get(e,t){let r=this.objects.get(e);return r===void 0?(r=this.createObject(e,t),this.objects.set(e,r)):r.isShared=!0,r}mutateIfUnique(e,t){let r=this.objects.get(e);if(r&&r.isShared!==!0)return this.objects.delete(e),this.objects.set(t,r),r}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(e,t){let r=this.objects.get(e);t===r&&this.unreachable.delete(e)}endGc(){this.unreachable.forEach(e=>{this.disposeObject(this.objects.get(e)),this.objects.delete(e)}),this.unreachable.clear()}dispose(){this.objects.forEach(e=>{this.disposeObject(e)}),this.objects.clear()}},xT=class extends Bce{constructor(e){super(),this.flatShading=e}disposeObject(e){e.dispose()}createObject(e,t){let r=H3(e,t,this.flatShading);return r.computeBoundingSphere(),r}},zce={markNeedsUpdateRendererDirty:()=>{}},kce=class extends sce{constructor(e){super(),this.shared=e}create(e){return new xk(e,this.shared)}},Fb=class{constructor(e,t={}){if(this.data=e,this.geometryCache=new xT(!0),this.geometryCache2=new xT(!1),this.imageHolderCache=new kce(this),this.thisContext={scene:zce,shared:this},this.deletedMaterial=new T8(Ki.defaultTwoLayerData("phong"),this.thisContext),this.deletedImage=new ku(N3.emptyImage,this),this.deletedVideo=new ku(D3.defaultVideo,this),this.materials={},this.images={},this.videos={},this.colors={},this.audios={},this.fonts={},this.requestRender=()=>{this._requestRender&&this._requestRender()},t.images)for(let[r,i]of Object.entries(t.images))this.addImage(r,i);if(t.videos)for(let[r,i]of Object.entries(t.videos))this.addVideo(r,i);if(t.audios)for(let[r,i]of Object.entries(t.audios))this.addAudio(r,i);this.reset(e)}setRequestRender(e){this._requestRender=e}reset(e){this.resetLib(e.lib);for(let[t,r]of Object.entries(e.images))this.addImage(t,r);for(let[t,r]of Object.entries(e.videos))this.addVideo(t,r);for(let[t,r]of Object.entries(e.colors))this.addColor(t,r);for(let[t,r]of Object.entries(e.materials))this.addMaterial(t,r);for(let[t,r]of Object.entries(e.audios))this.addAudio(t,r);for(let[t,r]of Object.entries(e.fonts))this.addFont(t,r)}addMaterial(e,t){if(this.materials[e]){let r=this.materials[e];r.reset(t,this.thisContext),r.dispose()}else{let r=new T8(t,this.thisContext);r.uuid=e,this.materials[e]=r}}deleteMaterial(e){this.materials[e]&&(this.materials[e].nodeMaterialDispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){return this.materials[e]??this.deletedMaterial}material(e){return typeof e=="string"?this.getMaterialOrDeletedPlaceholder(e):e==null?(console.error("material is undefined or null"),this.deletedMaterial):new Nb(e,this.thisContext)}getMaterials(){return this.materials}addImage(e,t){return this.images[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[e].updateSrc(t.data),!0):(this.images[e]=new ku(t,this),!1)}deleteImage(e){let t=this.images[e];t&&(t.dispose(),delete this.images[e])}getDefaultImage(){return this.images.image_0}getImage(e){return this.images[e]??this.deletedImage}image(e){return typeof e=="string"?this.getImage(e):this.imageHolderCache.load(e)}addVideo(e,t){return this.videos[e]?(this.videos[e].updateSrc(t.data),!0):(this.videos[e]=new ku(t,this),!1)}deleteVideo(e){let t=this.videos[e];t&&(t.dispose(),delete this.videos[e])}getVideo(e){return this.videos[e]??this.deletedVideo}video(e){return typeof e=="string"?this.getVideo(e):this.imageHolderCache.load(e)}addColor(e,t){return this.colors[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in t?this.colors[e].setRGBA(t.r,t.g,t.b,t.a):this.colors[e].setRGBA(t.r,t.g,t.b,1),!0):("a"in t?this.colors[e]=new W3(t.r,t.g,t.b,t.a):this.colors[e]=new W3(t.r,t.g,t.b,1),!1)}updateColor(e,t){if(this.colors[e]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let r=this.colors[e];return this.colors[e].r=t.r??r.r,this.colors[e].g=t.g??r.g,this.colors[e].b=t.b??r.b,this.colors[e].a=t.a??r.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}color(e){let t;if(typeof e=="string"){let r=this.getColor(e);r?t=r:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),t=new Xn(0,0,0,0))}else return"a"in e?new Xn(e.r,e.g,e.b,e.a):new Xn(e.r,e.g,e.b,1);return t}addAudio(e,t){this.audios[e]=t}getAudio(e){let t=this.audios[e];if(t instanceof U1)return t;{let r=new U1({src:t.data});return this.audios[e]=r,r}}deleteAudio(e){let t=this.audios[e];t&&(t instanceof U1&&t.dispose(),delete this.audios[e])}addFont(e,t){this.fonts[e]=new Ice(t),this.fonts[e].loadingPromise.then(()=>this.requestRender())}getFont(e){return this.fonts[e]}deleteFont(e){this.fonts[e]&&delete this.fonts[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this._requestRender=void 0,Object.values(this.audios).forEach(e=>{e instanceof U1&&e.dispose()}),this.audios={},this.geometryCache.dispose(),this.geometryCache2.dispose()}resetLib(e){for(let[t,r]of Object.entries(e.images))this.addImage(t,r.asset);for(let[t,r]of Object.entries(e.audios))this.addAudio(t,r.asset);for(let[t,r]of Object.entries(e.colors))this.addColor(t,r.asset);for(let[t,r]of Object.entries(e.fonts))this.addFont(t,r.asset);for(let[t,r]of Object.entries(e.materials))this.addMaterial(t,r.asset);for(let[t,r]of Object.entries(e.videos))this.addVideo(t,r.asset)}updateLibByOp(e,t){e.path[0]==="images"?e.path.length===1&&e.type===1?this.addImage(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteImage(e.id):e.path[0]==="videos"?e.path.length===1&&e.type===1?this.addVideo(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVideo(e.id):e.path[0]==="audios"?e.path.length===1&&e.type===1?this.addAudio(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteAudio(e.id):e.path[0]==="colors"?e.path.length===1&&e.type===1?this.addColor(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteColor(e.id):e.path[0]==="materials"?e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteMaterial(e.id):e.path[0]==="fonts"?e.path.length===1&&e.type===1?this.addFont(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteFont(e.id):e.path[0]==="components"&&t.updateByLibOp(e,this)}updateByOp(e,t,r){this.data=t,e.path[0]==="images"?e.path.length===2&&e.type===0?e.props.data&&this.getImage(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addImage(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteImage(e.id):e.path[0]==="videos"?e.path.length===2&&e.type===0?e.props.data&&this.getVideo(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addVideo(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteVideo(e.id):e.path[0]==="audios"?e.path.length===2&&e.type===0?e.props.data&&this.addAudio(e.path[1],t.audios[e.path[1]]):e.path.length===1&&e.type===1?this.addAudio(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteAudio(e.id):e.path[0]==="colors"?e.path.length===2&&e.type===0?this.updateColor(e.path[1],e.props):e.path.length===1&&e.type===1?this.addColor(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteColor(e.id):e.path[0]==="materials"?e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data):e.path.length===1&&e.type===2?this.deleteMaterial(e.id):e.path.length>1&&this.getMaterial(e.path[1]).updateByOp(yn.drop(e,2),t.materials[e.path[1]],{shared:this,scene:r}):e.path[0]==="fonts"?e.path.length===2&&e.type===0?this.updateFont(e.path[1],e,r):e.path.length===1&&e.type===1?this.addFont(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteFont(e.id):e.path[0]==="lib"&&this.updateLibByOp(yn.drop(e,1),r)}updateFont(e,t,r){if(t.props.url){let i=this.getFont(e),n={...this.data.fonts[e],url:t.props.url};i.update(n),i.loadingPromise.then(()=>this.requestRender()),r.updateFont(e,this)}}};new Fb(il.emptyData());var Af=class extends Qn{updateByPatchedOp(e,t,r){if(super.updateByPatchedOp(e,t,r),xoe(e.path,["materials"])!==null&&e.type===0&&Array.isArray(this.material))for(let[i,n]of Object.entries(e.props)){let s=r.shared.material(n);this.material[Number(i)]=s}else if(qs(e.path,["material"])&&this.material instanceof Yh)"material"in t&&typeof t.material!="string"&&this.material.updateByOp(yn.drop(e,1),t.material,r);else if(qs(e.path,["materials","*"])&&Array.isArray(this.material)){let i=e.path[1];if("materials"in t&&i<this.material.length){let n=t.materials[i];typeof n!="string"&&this.material[i].updateByOp(yn.drop(e,2),n,r)}}}get needsAO(){return this.material!==void 0?(Array.isArray(this.material)?this.material[0]:this.material).hasAO:!1}updateState(e,t){var i,n;super.updateState(e,t),e.castShadow!==void 0&&(this.castShadow=e.castShadow),e.receiveShadow!==void 0&&(this.receiveShadow=e.receiveShadow);let r=this.dataPatched;if(((i=e.geometry)==null?void 0:i.type)!=="NonParametricGeometry"&&"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=t.shared.material(e.material).getFlavor(r.flatShading,r.side,r.wireframe),t.scene.markNeedsUpdateRendererDirty()),((n=e.geometry)==null?void 0:n.type)==="NonParametricGeometry"&&("materials"in e&&e.materials!==void 0?(this.disposeMaterial(),this.material=e.materials.map(s=>t.shared.material(s).getFlavor(r.flatShading,r.side,r.wireframe)),t.scene.markNeedsUpdateRendererDirty()):"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=[t.shared.material(e.material).getFlavor(r.flatShading,r.side,r.wireframe)],t.scene.markNeedsUpdateRendererDirty())),e.flatShading!==void 0||e.wireframe!==void 0||e.side!==void 0)if(Array.isArray(this.material))for(let s=0;s<this.material.length;s++)this.material[s]=this.material[s].getFlavor(r.flatShading,r.side,r.wireframe);else this.material=this.material.getFlavor(r.flatShading,r.side,r.wireframe)}disposeMaterial(){this.material&&OB(this.material).forEach(e=>{e instanceof Yh&&(e instanceof T8||e.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}},wT=new E,bT=new Ct,_T=new Ct,Nce=new E,CT=new Ae,wn=class extends Af{constructor(e,t,r){super(e,t),this.data=t,this.localGeometry=void 0,t.bindMode&&t.bindMatrix&&(this.isSkinnedMesh=!0,this.bindMode=t.bindMode,this.bindMatrix=new Ae().fromArray(t.bindMatrix),this.bindMatrixInverse=new Ae)}chooseGeoemtryCache(e){return e.geometryCache}markGeometryAsReachable(e){this.geometryCreateDeleyed instanceof dt&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(this.localGeometry!==void 0)return this.localGeometry;if(this.geometryCreateDeleyed instanceof Fb){let e=this.geometryCreateDeleyed,t=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=t.get(this.dataPatched.geometry,e)}return this.geometryCreateDeleyed}set geometry(e){this.localGeometry=e}get is2DAndNoDepth(){let e=this.dataPatched.geometry;return R3.is2DParametricMesh(e.type)&&e.depth===0}get is2DType(){return R3.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return this.geometry.userData.type==="NonParametricGeometry"}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),qs(e.path,["geometry"])&&this.updateByPatchedOpGeometry(yn.drop(e,1),t.geometry,r)}removeInteractionGeometry(){var e;(e=this.localGeometry)==null||e.dispose(),this.localGeometry=void 0}updateGeometryInteractions(e,t){var i;this.invalidateDownstreamBooleanData();let r=this.data.geometry.type;if(r==="NonParametricGeometry"||r==="SubdivGeometry"){let n=e;if(this.localGeometry===void 0){let h={...this.data.geometry,...n};this.localGeometry=H3(h,t,this.data.flatShading)}let s,a,o;n.scaleBaked?[s,a,o]=n.scaleBaked:{width:s,height:a,depth:o}=n;let l=this.localGeometry.userData;l.sxPrev!==void 0&&C8(this.localGeometry.attributes,s/l.sxPrev,a/l.syPrev,o/l.szPrev),l.sxPrev=s,l.syPrev=a,l.szPrev=o}else{let n={...this.data.geometry,...e};(i=this.localGeometry)==null||i.dispose(),this.localGeometry=H3(n,t,this.data.flatShading)}}refreshAttachedCloners(e){for(let t of this.attachedSurfaceCloners)e.scene.addPendingUpdateCloner(t.object)}refreshAttachedPaths(e){for(let t of this.attachedPaths)e.scene.addPendingCommand(()=>t.updateShape())}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e),this.refreshAttachedPaths(e)}updateByPatchedOpGeometry(e,t,r){var n;let i=!1;e.type===0&&e.path.length===0&&db(["scaleBaked"],Object.keys(e.props))&&this.geometryCreateDeleyed instanceof fn&&this.chooseGeoemtryCache(r.shared).mutateIfUnique(this.geometryCreateDeleyed.data,t)===this.geometryCreateDeleyed&&(i=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(t,e.props.scaleBaked),this.refreshAttachedCloners(r),this.refreshAttachedPaths(r)),i||((n=r.scene)==null||n.markGeometryCacheDirty(),this.createGeometryDelayed(r)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(e,t){this.createGeometryDelayed(t)}updateState(e,t){e.geometry!==void 0&&this.updateGeometryOnStateUpdate(e.geometry,t),super.updateState(e,t)}updateGeometryGroupsIfNeeded(){var e;Array.isArray(this.material)&&this.geometry.groups.length===0&&this.geometry.addGroup(0,Math.max(((e=this.geometry.getIndex())==null?void 0:e.count)??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(e,t){let r=this.geometry.userData.parameters;this.is2DType?e.set(0,0,r.depth*.5):this.isNonParametric?(e.setScalar(0),this.geometry.boundingSphere&&e.copy(this.geometry.boundingSphere.center),t.set(r.width,r.height,r.depth??0).multiplyScalar(.5)):e.setScalar(0),t.set(r.width,r.height,r.depth??0).multiplyScalar(.5)}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(e){let t=new Ct,r=this.geometry.attributes.skinWeight;for(let i=0,n=r.count;i<n;i++){t.fromBufferAttribute(r,i);let s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),r.setXYZW(i,t.x,t.y,t.z,t.w)}}boneTransform(e,t){let r=this.skeleton;if(r===void 0)return;let i=this.geometry;bT.fromBufferAttribute(i.attributes.skinIndex,e),_T.fromBufferAttribute(i.attributes.skinWeight,e),wT.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let n=0;n<4;n++){let s=_T.getComponent(n);if(s!==0){let a=bT.getComponent(n);CT.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(Nce.copy(wT).applyMatrix4(CT),s)}}return t.applyMatrix4(this.bindMatrixInverse)}};function Fce(e){var a,o;if(e.geometry.attributes.extrudeNormal||!e.geometry.attributes.position||!e.geometry.attributes.normal)return;let t=new Map,r=e.geometry.attributes,i=r.position.array,n=r.normal.array,s=new Float32Array(i.length);for(let l=0;l<i.length;l+=3){let h=`${i[l]}_${i[l+1]}_${i[l+2]}`,c=new E(n[l],n[l+1],n[l+2]);t.has(h)?(a=t.get(h))==null||a.normals.push(c):t.set(h,{normals:[c],result:new E})}t.forEach((l,h)=>{for(let c of l.normals)l.result.add(c);l.result.divideScalar(l.normals.length)});for(let l=0;l<i.length;l+=3){let h=`${i[l]}_${i[l+1]}_${i[l+2]}`,c=(o=t.get(h))==null?void 0:o.result;c&&(s[l]=c.x,s[l+1]=c.y,s[l+2]=c.z)}e.geometry.setAttribute("extrudeNormal",new Ke(s,3))}function Uce(e){if(e.geometry.attributes.extrudeNormals||!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,r=new Float32Array(t.length),i=new E;for(let n=0;n<t.length;n+=3)i.set(t[n],t[n+1],t[n+2]).normalize(),r[n]=i.x,r[n+1]=i.y,r[n+2]=i.z;e.geometry.setAttribute("extrudeNormal",new Ke(r,3))}function Ub(e){if(Array.isArray(e.material)){for(let t of e.material)if(t.getLayersOfType("outline").length===0)return}else if(!(e.material instanceof Yh)||e.material.getLayersOfType("outline").length===0)return;e instanceof wn&&e.is2DAndNoDepth?Uce(e):Fce(e)}function jb(e){if(!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,r=new Float32Array(t.length),i=parseInt(e.uuid.replace(/\D/g,"")),n=[Tt.seededRandom(i),Tt.seededRandom(i+1e4),Tt.seededRandom(i+2e4)];for(let s=0;s<t.length;s++)r[s]=n[s%3];e.geometry.setAttribute("randomColor",new pt(r,3))}Ob.then(e=>{});var Ya=new qr,h1=new E;function jce(e){let t=!1;return e.scene.objects.traverse((r,i)=>{i.type==="Mesh"&&i.geometry.type==="SubdivGeometry"&&(t=!0)}),t}var gm=class extends wn{constructor(e,t,r){super(e,t,r),this.data=t,this.hiddenMatrixOld=new Ae,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(e){return this.dataPatched.flatShading?e.geometryCache:e.geometryCache2}get subdivPointerNew(){return this.localGeometry!==void 0?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return this.localGeometry!==void 0?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(e,t){let r=this.geometry.userData.parameters;e.copy(this.originalGeometryNew.boundingSphere.center),t.set(r.width,r.height,r.depth??0).multiplyScalar(.5)}createGeometryByControls(e){var s,a,o;if(this.skipReactionUpdate===!0)return;let t=(s=this.localGeometry)==null?void 0:s.uuid,{originalGeometry:r,subdividedGeometry:i,subdivPointer:n}=fn.build(e,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=n,r!==void 0&&((a=this.originalGeometry)==null||a.dispose(),this.originalGeometry=r),i!==void 0&&((o=this.subdividedGeometry)==null||o.dispose(),this.subdividedGeometry=i??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,Ub(this),jb(this),this.calcBoundingBox(),t&&(this.localGeometry.uuid=t)}updateState(e,t){if(super.updateState(e,t),e.flatShading!==void 0){let r=this.material;this.material=r.getFlavor(!1,r.side,r.wireframe),this.smoothShading=!e.flatShading,this.createGeometryDelayed(t)}}updateMesh(e=!1){fn.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&fn.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=fn.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=fn.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(e,t){let r=this.localGeometry;this.localGeometry=this.originalGeometryNew,Qn.prototype.raycast.call(this,e,t),this.localGeometry=r}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new _s,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,r=e.boundingSphere.center;Ya.setFromBufferAttribute(t),Ya.getCenter(r),e.boundingSphere.radius=r.distanceTo(Ya.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Ya.getSize(h1),this.hasNonUniformScale&&h1.divide(this.scale);let i={width:h1.x,height:h1.y,depth:h1.z};return this.geometry.userData.parameters=i,i}updateBoundingSphere(e){let t=this.originalGeometry;Ya.min.set(e[0],e[2],e[4]),Ya.max.set(e[1],e[3],e[5]),this.hasNonUniformScale&&(Ya.min.applyMatrix4(this.shearScaleInv),Ya.max.applyMatrix4(this.shearScaleInv)),t.boundingSphere===null&&(t.boundingSphere=new _s);let r=t.boundingSphere.center;Ya.getCenter(r),t.boundingSphere.radius=r.distanceTo(Ya.max)}freeSubdivPointer(){var e,t;this.subdivPointer&&(fn.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,(e=this.originalGeometry)==null||e.dispose(),(t=this.subdividedGeometry)==null||t.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(e,t,r){super.updateByPatchedOpGeometry(e,t,r),this.localGeometry&&this.createGeometryByControls(t)}},ST=-1,Vce=1,Gce={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},Hce={polygon_center:0,edge:1,vertex:2},bv=(e,t)=>(r,i)=>!t||r===0||e===0?0:e*i/100,bt=(e,t)=>{let r=Math.abs(t),i=r*-1;return(e-ST)*(r-i)/(Vce-ST)+i};function Wce(e){let t=[],r={};for(var i=0,n=e.length;i<n;i++){var s=JSON.stringify(e[i].pos.map(a=>Math.round(a*1e4)/1e4));r[s]||(t.push(e[i]),r[s]=!0)}return t}var qce=new E,_v=new E,Xce=new E,Yce=new E;function Sp(e,t){let r=Xce.fromArray(e),i=Yce.fromArray(t);_v.copy(i).sub(r);let n=_v.length();return _v.normalize().multiplyScalar(n*.5),qce.copy(r).add(_v).toArray()}var Hs=new Xi,Cv=new E,X3=new E,Eu=new E;function Qce(e){let t=[];for(let r=0;r<=e.index.count;r++)if(Cv.fromArray(e.index.array,r*3),Hs.setFromAttributeAndIndices(e.attributes.position,Cv.x,Cv.y,Cv.z),Hs.getNormal(X3),Hs.getMidpoint(Eu),!(isNaN(Eu.x)||isNaN(Eu.y)||isNaN(Eu.z))){let{a:i,b:n,c:s}=Hs,a=i.toArray(),o=n.toArray(),l=s.toArray(),h=i.distanceTo(n),c=n.distanceTo(s),u=s.distanceTo(i),d=Sp(a,o),p=Sp(o,l),f=Sp(l,a),m=[h,c,u],g=Math.max(...m),v=m.filter(w=>Math.round(w)===Math.round(g)).length>1,y=[],x=Hs.getMidpoint(Eu).toArray();g===h&&!v&&(y=[p,f,f],x=d),g===c&&!v&&(y=[d,f,f],x=p),g===u&&!v&&(y=[d,p,p],x=f),v&&(y=[d,p,f]),t.push({vertices:[a,o,l],faceCenters:y,midpoint:x,norm:Hs.getNormal(X3).toArray()})}return t}function Zce(e){let t=[],{position:r}=e.attributes;for(let i=0;i<r.count;i++){Hs.setFromAttributeAndIndices(r,i*3,i*3+1,i*3+2),Hs.getNormal(X3),Hs.getMidpoint(Eu);let n=Hs.a.toArray(),s=Hs.b.toArray(),a=Hs.c.toArray();t.push({vertices:[n,s,a],faceCenters:[Sp(n,s),Sp(s,a),Sp(a,n)],midpoint:Eu.toArray(),norm:X3.toArray()})}return t}var Kce=4,$ce=.5,nx=e=>.5*(1-Math.cos(e*Math.PI)),Jce=class{constructor(){this.perlin=new Array(4095+1)}noise(e,t=0,r=0){if(this.perlin==null){this.perlin=new Array(4095+1);for(let g=0;g<4095+1;g++)this.perlin[g]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),r<0&&(r=-r);let i=Math.floor(e),n=Math.floor(t),s=Math.floor(r),a=e-i,o=t-n,l=r-s,h,c,u=0,d=.5,p,f,m;for(let g=0;g<Kce;g++){let v=i+(n<<4)+(s<<8);h=nx(a),c=nx(o),p=this.perlin[v&4095],p+=h*(this.perlin[v+1&4095]-p),f=this.perlin[v+16&4095],f+=h*(this.perlin[v+16+1&4095]-f),p+=c*(f-p),v+=256,f=this.perlin[v&4095],f+=h*(this.perlin[v+1&4095]-f),m=this.perlin[v+16&4095],m+=h*(this.perlin[v+16+1&4095]-m),f+=c*(m-f),p+=nx(l)*(f-p),u+=p*d,d*=$ce,i<<=1,a*=2,n<<=1,o*=2,s<<=1,l*=2,a>=1&&(i++,a--),o>=1&&(n++,o--),l>=1&&(s++,l--)}return u}noiseSeed(e){let t=(()=>{let r,i;return{setSeed(n){i=r=(n??Math.random()*4294967296)>>>0},getSeed(){return r},rand(){return i=(1664525*i+1013904223)%4294967296,i/4294967296}}})();t.setSeed(e),this.perlin=new Array(4095+1);for(let r=0;r<4095+1;r++)this.perlin[r]=t.rand()}},ede=Jce,MT=new E,AT=new Ae,ET=new cf;function TT(e){let t=!1;return e.scene.objects.traverse((r,i)=>{i.type==="Mesh"&&i.geometry.type==="TextGeometry"&&(t=!0)}),t}var Ak=class extends wn{constructor(e,t,r){super(e,t,r),this.data=t}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var t;let e=this.dataPatched;return((t=this.font)==null?void 0:t.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,e.geometry.height,this.fontScale,e.geometry.verticalAlign))??0}get fontScale(){let e=this.dataPatched;return this.font?e.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var e;return(((e=this.font)==null?void 0:e.ascender)??1)*this.fontScale}get descender(){var e;return(((e=this.font)==null?void 0:e.descender)??1)*this.fontScale}get lineHeight(){let e=this.dataPatched;return e.geometry.fontSize*e.geometry.lineHeight}raycast(e,t){let{matrixWorld:r}=this;if(!(isNaN(e.ray.origin.x)||this.scale.x===0||this.scale.y===0||this.scale.z===0)&&(AT.copy(r).invert(),ET.copy(e.ray).applyMatrix4(AT),ET.intersectBox(this.singleBBox,MT))){let i=MT.applyMatrix4(r),n=e.ray.origin.distanceTo(i);t.push({distance:n,point:i.clone(),object:this})}}},sn=1e-4,Qa,Ek,Tk,Lk,LT=new E,PT=new E;Ob.then(e=>{Qa=e,Ek=[Qa.get_face_center,Qa.get_edge_midpoint,Qa.get_vertex_position],Tk=[Qa.get_face_normal,Qa.get_edge_normal,Qa.get_vertex_normal],Lk=[Qa.face_count,Qa.edge_count,Qa.vertex_count]});var tde=new Ae,rde=new Ae,ql=new E,cu=new E,u1=new E,sx=new E,ide=new E,nde=new E,jo=new ede,La=class extends Sb(ir){constructor(e,t){super(),this.parameters=t,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.object=e}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(e){if(this.parent===null)this.updateState(this.parameters,e);else for(let t of this.children)t instanceof Yi&&t.expand()}invalidateTransform(e){this.matrixWorldNeedsUpdate=!0,this.traverse(t=>{t instanceof Yi&&t.object===e&&(t.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){this.parameters.type!=="toObject"&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let e of this.children)e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD())}_updateCount(e){let t;if(e!==void 0?t=e:t=this.parameters.type==="grid"?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,this.parameters.type==="toObject"&&!this.parameters.toObject.object&&(t=0),this.parameters.type==="toObject"&&this.objectForSample){for(let i=0,n=this.children.length;i<n;++i)this.remove(this.children[0]);let r=this.children;if(r.length===t)return;if(r.length<t)for(let i=0,n=t-r.length;i<n;++i){let s=new Yi(this.object);s.expand(),this.add(s)}else for(let i=0,n=r.length-t;i<n;++i)this.remove(r[i])}else{if(this.children.length===t)return;if(this.children.length<t)for(let r=0,i=t-this.children.length;r<i;++r){let n=new Yi(this.object);n.expand(),this.add(n)}else for(let r=0,i=this.children.length-t;r<i;++r)this.remove(this.children[0])}}_updateRadial(e){let t=e.radial,r=t.start*Tt.DEG2RAD,i=t.end*Tt.DEG2RAD,n=r-i,s=new bi(t.rotation[0],t.rotation[1],t.rotation[2]),a;switch(t.axis){case"z":a=new E(0,0,1);break;case"y":a=new E(0,1,0);break;default:case"x":a=new E(1,0,0);break}let o=e.randomnessObject??yh.defaultData([1,1,1]).randomnessObject,l=o.noiseType==="perlin";jo.noiseSeed(o.seed);let h=V5((0,i1.default)(o.seed)),c=bv(o.strength,this.parameters.randomness);for(let[u,d]of this.children.entries()){let p=u*(o.freqScale/10)+o.movement,f=l?jo.noise(p):h(p,p),m=u+1;d.scale.x=t.scale[0]+c(m,bt(f,o.scale[0]))||sn,d.scale.y=t.scale[1]+c(m,bt(f,o.scale[1]))||sn,d.scale.z=t.scale[2]+c(m,bt(f,o.scale[2]))||sn,d.position.setScalar(0);let g=n/e.count*u-r;switch(t.axis){case"x":d.rotation.set(0,g,0);break;case"y":d.rotation.set(0,0,g);break;case"z":d.rotation.set(g,0,0);break}d.translateOnAxis(a,t.radius),d.position.x+=t.position[0]+c(m,bt(f,o.position[0])),d.position.y+=t.position[1]+c(m,bt(f,o.position[1])),d.position.z+=t.position[2]+c(m,bt(f,o.position[2]));let v=c(m,bt(f,o.rotation[0])),y=c(m,bt(f,o.rotation[1])),x=c(m,bt(f,o.rotation[2]));t.alignment===!0?(d.rotation.x+=s.x+v,d.rotation.y+=s.y+y,d.rotation.z+=s.z+x):d.rotation.set(s.x+v,s.y+y,s.z+x)}}_updateLinear(e){if(e.type!=="linear")throw new Error;let t=e.linear,r=new bi(t.rotation[0],t.rotation[1],t.rotation[2]),i=e.randomnessObject??yh.defaultData([1,1,1]).randomnessObject,n=i.noiseType==="perlin";jo.noiseSeed(i.seed);let s=V5((0,i1.default)(i.seed)),a=bv(i.strength,this.parameters.randomness);for(let[o,l]of this.children.entries()){let h=o*(i.freqScale/10)+i.movement,c=n?jo.noise(h):s(h,h),u=o+1,d=a(u,bt(c,i.rotation[0])),p=a(u,bt(c,i.rotation[1])),f=a(u,bt(c,i.rotation[2]));l.scale.x=1+(t.scale[0]-1)*o+a(u,bt(c,i.scale[0]))||sn,l.scale.y=1+(t.scale[1]-1)*o+a(u,bt(c,i.scale[1]))||sn,l.scale.z=1+(t.scale[2]-1)*o+a(u,bt(c,i.scale[2]))||sn,l.rotation.x=r.x*o+d,l.rotation.y=r.y*o+p,l.rotation.z=r.z*o+f,l.position.x=t.position[0]*o+a(u,bt(c,i.position[0])),l.position.y=t.position[1]*o+a(u,bt(c,i.position[1])),l.position.z=t.position[2]*o+a(u,bt(c,i.position[2]))}}_updateGrid(e){let t=0,r=e.grid,i=e.randomnessObject??yh.defaultData([1,1,1]).randomnessObject,n=bv(i.strength,this.parameters.randomness),s=i.noiseType==="perlin";jo.noiseSeed(i.seed);let a=qle((0,i1.default)(i.seed));if(r.useCenter===!0){let o={x:r.count[0]%2===0?2:1,y:r.count[1]%2===0?2:1,z:r.count[2]%2===0?2:1},l=new E(r.size[0]*(r.count[0]-o.x)*.5,r.size[1]*(r.count[1]-o.y)*.5,r.size[2]*(r.count[2]-o.z)*.5);for(let h=0;h<r.count[0];h++)for(let c=0;c<r.count[1];c++)for(let u=0;u<r.count[2];u++){let d=[(h+1)*(i.freqScale/10)+i.movement,(c+1)*(i.freqScale/10)+i.movement,(u+1)*(i.freqScale/10)+i.movement],p=s?jo.noise(...d):a(...d),f=this.children[t++];f.scale.x=1+n(t,bt(p,i.scale[0]))||sn,f.scale.y=1+n(t,bt(p,i.scale[1]))||sn,f.scale.z=1+n(t,bt(p,i.scale[2]))||sn;let m=n(t,bt(p,i.rotation[0])),g=n(t,bt(p,i.rotation[1])),v=n(t,bt(p,i.rotation[2]));f.rotation.set(m,g,v),f.position.x=r.size[0]*h-l.x+n(t,bt(p,i.position[0])),f.position.y=r.size[1]*c-l.y+n(t,bt(p,i.position[1])),f.position.z=r.size[2]*u-l.z+n(t,bt(p,i.position[2]))}}else for(let o=0;o<r.count[0];o++)for(let l=0;l<r.count[1];l++)for(let h=0;h<r.count[2];h++){let c=[(o+1)*(i.freqScale/10)+i.movement,(l+1)*(i.freqScale/10)+i.movement,(h+1)*(i.freqScale/10)+i.movement],u=s?jo.noise(...c):a(...c),d=this.children[t++];d.scale.x=1+n(t,bt(u,i.scale[0]))||sn,d.scale.y=1+n(t,bt(u,i.scale[1]))||sn,d.scale.z=1+n(t,bt(u,i.scale[2]))||sn;let p=n(t,bt(u,i.rotation[0])),f=n(t,bt(u,i.rotation[1])),m=n(t,bt(u,i.rotation[2]));d.rotation.set(p,f,m),d.position.x=r.size[0]*o+n(t,bt(u,i.position[0])),d.position.y=-r.size[1]*l+n(t,bt(u,i.position[1])),d.position.z=-r.size[2]*h+n(t,bt(u,i.position[2]))}}_updateToObject(e){var m;if(e.type!=="toObject")throw new Error;let{toObject:t}=e,r=new bi(t.rotation[0],t.rotation[1],t.rotation[2]),i=e.randomnessObject??yh.defaultData([1,1,1]).randomnessObject,n=i.noiseType==="perlin";jo.noiseSeed(i.seed);let s=V5((0,i1.default)(i.seed)),a=bv(i.strength,this.parameters.randomness);if(!t.object){for(let[,g]of this.children.entries())g.position.set(0,0,0),g.scale.setScalar(1),g.rotation.set(0,0,0);this.objectForSample=void 0;return}if(!this.objectForSample)return;if(this.objectForSample instanceof Ak)if(!((m=this.objectForSample.font)!=null&&m.isLoaded)||this.objectForSample.geometry.attributes.position===void 0){this._pendingMediaLoad=!0;return}else this._pendingMediaLoad=!1;if(this.objectForSample.geometry===void 0&&this.objectForSample.isAncestorOf(this.object.uuid)){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);return}let o=this.getSubdivData(),l=[],h=g=>{let v=g.length,y=g.map(_=>_[0]).reduce((_,b)=>_+b,0),x=g.map(_=>_[1]).reduce((_,b)=>_+b,0),w=g.map(_=>_[2]).reduce((_,b)=>_+b,0);return[y/v,x/v,w/v]},c=g=>Math.round(g*1e6)/1e6;o.forEach(g=>{let v=o.filter(y=>c(g.pos[0])===c(y.pos[0])&&c(g.pos[1])===c(y.pos[1])&&c(g.pos[2])===c(y.pos[2]));v.length>1?l.push({pos:g.pos,norm:h(v.map(y=>y.norm))}):l.push(g)});let u=Wce(l);if(o.length>0){let g=Math.round(u.length*t.count/100);this._updateCount(g)}else{console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) cannot be cloned on the surface of "${this.objectForSample.name}" (${this.objectForSample.uuid}) because the latter does not have a valid geometry.`);return}this.objectForSample.updateMatrixWorld();let d=new Xle(this.objectForSample).build(),p=Gce[t.axis],f=this.children;d.setRandomGenerator((0,i1.default)(this.object.uuid+t.seed));for(let[g,v]of f.entries()){let y=g*(i.freqScale/10)+i.movement,x=n?jo.noise(y):s(y,y),w=g+1,_=a(w,bt(x,i.rotation[0])),b=a(w,bt(x,i.rotation[1])),S=a(w,bt(x,i.rotation[2]));t.spreadType==="random"?d.sample(u1,sx):(u.length&&(u1.fromArray(u[g].pos),sx.fromArray(u[g].norm)),this.objectForSample instanceof gm&&u1.applyMatrix4(tde.copy(this.objectForSample.matrixWorld).invert())),u1.applyMatrix4(this.object.hiddenMatrix.clone().invert()),v.position.copy(u1),ql.fromArray(p);let C=t.align==="normal"?sx:this.object.getWorldDirection(nde),M=cu.fromArray(t.position);cu.x+=cu.x+a(w,bt(x,i.position[0])),cu.y+=cu.y+a(w,bt(x,i.position[1])),cu.z+=cu.z+a(w,bt(x,i.position[2]));let A=Math.acos(C.dot(ql)),T=ide.crossVectors(ql,C).normalize(),L=rde.makeRotationAxis(T,A),D=C.clone().cross(this.object.up).normalize(),O=D.clone().cross(C).normalize(),z=new Ae().makeBasis(D,C,O),q=new E(ql.y,ql.z,ql.x).normalize(),N=q.clone().cross(ql).normalize(),I=new Ae().makeBasis(q,ql,N).invert(),W=new Ae().multiplyMatrices(z,I);v.rotation.setFromRotationMatrix(W),M.applyMatrix4(L),v.position.add(M),v.rotation.x=v.rotation.x+r.x+_,v.rotation.y=v.rotation.y+r.y+b,v.rotation.z=v.rotation.z+r.z+S,v.scale.setScalar(1),v.scale.x=v.scale.x+t.scale[0]+a(w,bt(x,i.scale[0]))||sn,v.scale.y=v.scale.y+t.scale[1]+a(w,bt(x,i.scale[1]))||sn,v.scale.z=v.scale.z+t.scale[2]+a(w,bt(x,i.scale[2]))||sn,v.scale.multiply(this.object.scale),v.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let e=this.parameters.toObject.spreadType;if(e==="random")return[];if(this.objectForSample instanceof gm){let t=this.objectForSample,r=Hce[e],i=Lk[r],n=Ek[r],s=Tk[r],a=[],o=i(t.subdivPointerNew);for(let l=0;l<=o-1;l++){let h=n(t.subdivPointerNew,l),c=s(t.subdivPointerNew,l);LT.fromArray(h).applyMatrix4(t.matrixWorld),PT.fromArray(c),a.push({pos:LT.toArray(),norm:PT.toArray()})}return a}else return(this.objectForSample.geometry.index?Qce(this.objectForSample.geometry):Zce(this.objectForSample.geometry)).map((t,r)=>e==="polygon_center"?{pos:t.midpoint,norm:t.norm}:e==="vertex"?[{pos:t.vertices[0],norm:t.norm},{pos:t.vertices[1],norm:t.norm},{pos:t.vertices[2],norm:t.norm}]:e==="edge"?[{pos:t.faceCenters[0],norm:t.norm},{pos:t.faceCenters[1],norm:t.norm},{pos:t.faceCenters[2],norm:t.norm}]:[]).flat()}updateState(e,t){var r;if(this.parameters=Iy(e),this.parameters.type!=="toObject")(this.parent===null||this.parent!==this.object)&&(this.removeFromParent(),(r=this.object.parent)==null||r.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(this.parent===null||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let i=t.find(this.parameters.toObject.object);i instanceof Qn?this.objectForSample=i:this.objectForSample=void 0,this.matrix=new Ae,this.hiddenMatrix=new Ae,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,i&&i.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},Bm=e=>{var t;return t=class extends e{},t.geometryHelper=new Ao(30,30,30),t},Sv=new cf,ax=new _s,DT=new Ae,zm=(e,t,r,i,n=!1)=>{let s=t,a=e.matrixWorld;if(s.boundingSphere===null&&s.computeBoundingSphere(),ax.copy(s.boundingSphere),ax.applyMatrix4(a),r.ray.intersectsSphere(ax)===!1||(DT.copy(a).invert(),Sv.copy(r.ray).applyMatrix4(DT),s.boundingBox!==null&&Sv.intersectsBox(s.boundingBox)===!1))return;let o,l,h,c,u=s.index,d=s.attributes.position,p=s.drawRange,f,m;if(n===!1){let v=Math.max(0,p.start),y=Math.min(u.count,p.start+p.count);for(f=v,m=y;f<m;f+=3)if(l=u.getX(f),h=u.getX(f+1),c=u.getX(f+2),o=g(e,r,Sv,d,l,h,c),o){o.faceIndex=Math.floor(f/3),i.push(o);return}}else{let v=s.attributes.position,y=new E,x=new E,w=new E,_=new E,b=2,S=1/((e.scale.x+e.scale.y+e.scale.z)/3),C=S*S,M=Math.max(0,p.start),A=Math.min(v.count,p.start+p.count);for(let T=M,L=A-1;T<L;T+=b){if(y.fromBufferAttribute(v,T),x.fromBufferAttribute(v,T+1),Sv.distanceSqToSegment(y,x,_,w)>C)continue;_.applyMatrix4(e.matrixWorld);let D=r.ray.origin.distanceTo(_);D<r.near||D>r.far||i.push({distance:D,point:w.clone().applyMatrix4(e.matrixWorld),object:e})}}function g(v,y,x,w,_,b,S){let C=new E,M=new E,A=new E,T=new E,L=new E;if(C.fromBufferAttribute(w,_),M.fromBufferAttribute(w,b),A.fromBufferAttribute(w,S),x.intersectTriangle(C,M,A,!1,T)===null)return null;L.copy(T),L.applyMatrix4(v.matrixWorld);let D=y.ray.origin.distanceTo(L);return D<y.near||D>y.far?null:{faceIndex:1,distance:D,point:L.clone(),object:v}}},Mv=new E,Ps=new pf,sde=class extends Pm{constructor(e){let t=new dt,r=new eu({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],n=[],s={},a=new lt(15711266),o=new lt(15711266),l=new lt(2857471);h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",o),h("p","n2",o),h("p","n3",o),h("p","n4",o),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l);function h(u,d,p){c(u,p),c(d,p)}function c(u,d){i.push(0,0,0),n.push(d.r,d.g,d.b),s[u]===void 0&&(s[u]=[]),s[u].push(i.length/3-1)}t.setAttribute("position",new Ke(i,3)),t.setAttribute("color",new Ke(n,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){let e=this.geometry,t=this.pointMap;Ps.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let r=1,i=1,n=.8;fa("n1",t,e,Ps,-r,-i,n),fa("n2",t,e,Ps,r,-i,n),fa("n3",t,e,Ps,-r,i,n),fa("n4",t,e,Ps,r,i,n);let s=n;fa("f1",t,e,Ps,-r,-i,s),fa("f2",t,e,Ps,r,-i,s),fa("f3",t,e,Ps,-r,i,s),fa("f4",t,e,Ps,r,i,s);let a=s,o=.5;fa("u1",t,e,Ps,r*.7*o,i*1.1,a),fa("u2",t,e,Ps,-r*.7*o,i*1.1,a),fa("u3",t,e,Ps,0,i*(1.1+.9*o),a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function fa(e,t,r,i,n,s,a){Mv.set(n,s,a).unproject(i);let o=t[e];if(o!==void 0){let l=r.getAttribute("position");for(let h=0,c=o.length;h<c;h++)l.setXYZ(o[h],Mv.x,Mv.y,Mv.z)}}var ade=class extends Bm(sde){constructor(e){super(e),this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,t){zm(this.object,this.geometry,e,t,!0)}},L8;(e=>e.is=t=>"objectHelper"in t)(L8||(L8={}));var km=(e,t)=>class extends Mb(e){constructor(){super(...arguments),this.objectHelper=new t(this),this.gizmos={}}get geometryHelper(){return t.geometryHelper}raycast(r,i){this.objectHelper.raycast(r,i)}showGizmos(){for(let r in this.gizmos){let i=this.gizmos[r];i instanceof v3&&(i.visible=!0)}}updateEntityBoxSize(r,i){this.objectHelper.visible&&this.geometryHelper instanceof Ao?(r.setScalar(0),i.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(r,i)}hideGizmos(){for(let r in this.gizmos){let i=this.gizmos[r];i instanceof v3&&(i.visible=!1)}}},Av=790,id=new E,ox=new E,lx=new Et,hx=new E,c1=new E,ux=new E,$i=class extends km(pf,ade){constructor(e="",t={...hm.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=Zp.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.wasMovedBySwitchCameraAction=!1,this.super_Entity(e,t),this.previousProjectionMatrix=new Ae,this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let r=this.width,i=this.height;this.orthoCamera=new zw(r*-.5,r*.5,i*.5,i*-.5,-5e4,1e4),this.perspCamera=new Wi(45,r/i,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(e){this.perspCamera.fov=e}get fov(){return this.perspCamera.fov}setNear(e,t){e==="PerspectiveCamera"?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&(e==="PerspectiveCamera"?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){e==="PerspectiveCamera"?this.toPerspective():e==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(e){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e,t,r){typeof e=="number"&&(e=new E(e,t,r)),super.lookAt(e),this.getWorldPosition(id),this.targetOffset=id.distanceTo(e)}getTarget(e=new E){return this.getWorldDirection(ox),this.getWorldPosition(id),ox.multiplyScalar(this.targetOffset),e.copy(id).add(ox),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(id),id.distanceTo(e)}updateUp(){this.getWorldQuaternion(lx),hx.set(0,0,1).applyQuaternion(lx),c1.copy(ir.DEFAULT_UP),this.isUpVectorFlipped&&c1.negate(),c1.applyQuaternion(lx),ux.copy(ir.DEFAULT_UP).projectOnPlane(hx),this.angleOffsetFromUp=ux.angleTo(c1),this.angleOffsetFromUp*=ux.cross(c1).dot(hx)>=0?1:-1}updateTransformState(e){let t=super.updateTransformState(e);return e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateUp(),t}getViewFrontToObject(e){let t=e.getWorldPosition(new E),r=e.getWorldDirection(new E).multiplyScalar(this.targetOffset);return{position:t.clone().add(r),target:t}}getViewToTarget(e){let t=this.getWorldDirection(new E).multiplyScalar(this.targetOffset);return{position:e.clone().sub(t),target:e}}getViewToObject(e){let t=new E;return e.getWorldPosition(t),this.getViewToTarget(t)}setViewplaneSize(e,t,r=!1){if(this.aspect=e/t,r){let i=e>t?this.aspect:1,n=e>t?1:this.aspect;this.left=-Av*.5*i,this.right=Av*.5*i,this.top=Av*.5*(1/n),this.bottom=-Av*.5*(1/n)}else this.left=-e*.5,this.right=e*.5,this.top=t*.5,this.bottom=-t*.5;this.updateProjectionMatrix()}copyViewPlaneSize(e){this.aspect=e.aspect,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,r,i,n,s){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(e,t,r,i,n,s):this.orthoCamera.setViewOffset(e,t,r,i,n,s)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}copyHistory(){this.previousProjectionMatrix&&this.previousProjectionMatrix.copy(this.projectionMatrix)}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.parent=e.parent,this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=e.view===null?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}toCameraState(e=[]){let t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return I7(t,e)}updateCameraSubtype(e,t){let r=e==="perspective"?"PerspectiveCamera":"OrthographicCamera";t.zoom!==void 0&&this.setZoom(r,t.zoom),t.near!==void 0&&this.setNear(r,t.near),t.fov!==void 0&&r==="PerspectiveCamera"&&(this.fov=t.fov)}updateState(e,t){this.updateCameraState(e,t)}updateCameraState(e,t){this.updateState_Entity(e,t),e.far!==void 0&&(this.far=e.far),e.orthographic!==void 0&&this.updateCameraSubtype("orthographic",e.orthographic),e.perspective!==void 0&&this.updateCameraSubtype("perspective",e.perspective),e.type!==void 0&&(this.cameraType=e.type),e.up!==void 0&&this.up.fromArray(e.up),e.targetOffset!==void 0&&(this.targetOffset=e.targetOffset),e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),e.path.length===1&&e.type===0&&this.updateCameraSubtype(e.path[0],e.props)}toState(e){return{...super.toState(e),...this.toCameraState(e),type:this.cameraType}}},nd=new Ae,ode=new Ae;function OT(e){let t=!1;return e.scene.objects.traverse((r,i)=>{var n;((n=i.geometry)==null?void 0:n.type)==="BooleanGeometry"&&(t=!0)}),t}var rf=class extends Af{constructor(e,t,r){super(e,t),this.data=t,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new dt,this.onAfterRender=(i,n,s,a,o,l)=>{super.onAfterRender(i,n,s,a,o,l),this.recomputeBoolean()},this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(e,t,r){super.updateByPatchedOp(e,t,r),e.path.length===1&&e.path[0]==="geometry"&&e.type===0&&e.props.operation!==void 0&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(e,t=!0){var i;if(this.booleanMeshSetAddress!==-1&&!e)return;for(let n=0;n<this.children.length;n++){let s=this.children[n];s instanceof rf&&s.dataPatched.visible===!0&&s.recomputeBoolean(e===!0,t)}this.meshSetAddresses=[];for(let n=0;n<this.children.length;n++){let s=this.children[n];if(s instanceof Qn&&s.dataPatched.visible===!0&&((i=s.geometry.attributes.position)==null?void 0:i.count)>0&&s.geometry.drawRange.count>0){if(nd.multiplyMatrices(s.hiddenMatrix,s.matrix),s.booleanMeshSetAddress===-1){if((s.geometry.index??s.geometry.getAttribute("position")).count/3<15e5&&(s.booleanMeshSetAddress=$o.getMeshSet(s.geometry,e===!0,t)),s.booleanMeshSetAddress===-1)return;$o.transformMeshSet(s.booleanMeshSetAddress,nd),s.booleanMatrixInvOld.copy(nd).invert(),s.booleanWasTransformed=!1}else s instanceof rf&&s.needsTransformForDownstream===!0?($o.transformMeshSet(s.booleanMeshSetAddress,nd),s.needsTransformForDownstream=!1):s.booleanWasTransformed===!0&&($o.transformMeshSet(s.booleanMeshSetAddress,ode.multiplyMatrices(nd,s.booleanMatrixInvOld)),s.booleanMatrixInvOld.copy(nd).invert(),s.booleanWasTransformed=!1);$o.hasOpenEdges(s.booleanMeshSetAddress)===!1||n===this.children.length-1&&this.booleanOp===2?(this.meshSetAddresses.push(s.booleanMeshSetAddress),s.geometry.userData.wasFilteredFromBoolean=!1):s.geometry.userData.wasFilteredFromBoolean=!0}}if(this.meshSetAddresses.length===0){this.geometry.setAttribute("position",new Ke([],0)),this.geometry.setDrawRange(0,0);return}if(e===!0)return $o.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let r=this.geometry;r.dispose(),this.geometry=new dt,this.geometry.userData=r.userData,this.geometry.boundingSphere=r.boundingSphere;try{this.booleanMeshSetAddress=$o.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(n){this.booleanMeshSetAddress=0,console.error(n)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,Ub(this),jb(this)}dispose(){super.dispose(),this.geometry.dispose()}},P8;(e=>{function t(r){return Gt.is(r)&&r instanceof Om}e.is=t})(P8||(P8={}));var Vb=(e,t)=>class extends km(e,t){updateState_Light(r,i){this.updateState_Entity(r,i),r.color!==void 0&&(this.color=i.shared.color(r.color)),r.intensity!==void 0&&(this.intensity=r.intensity),r.depth!==void 0&&(this.shadow.camera.far=r.depth,this.shadow.needsUpdate=!0),r.shadows!==void 0&&(this.castShadow=r.shadows)}},Ma=e=>e instanceof Qn,po=e=>e!==null&&e instanceof rf,lde=e=>e instanceof $i,hde=e=>P8.is(e),D8=e=>L8.is(e),Vy=class extends Bm(L$){constructor(e,t=15){super(t),this.object=e,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.object.isBone&&(this.visible=!1)}raycast(e,t){zm(this.object,Vy.geometryHelper,e,t)}update(){}},vm=class extends km(Hd,Vy){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t)}},Pk={RED:0,GREEN:1,BLUE:2,ALPHA:3},Nm="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",ude=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,Ev=class extends cr{constructor(e=!1,t=!1){super({name:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new Se(null),kernel16:new Se(null),inputBuffer:new Se(null),cocBuffer:new Se(null),texelSize:new Se(new X),scale:new Se(1)},blending:ti,depthWrite:!1,depthTest:!1,fragmentShader:ude,vertexShader:Nm}),this.toneMapped=!1,t&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.uniforms.scale.value=e}setScale(e){this.uniforms.scale.value=e}generateKernel(){let e=2.39996323,t=new Float32Array(128),r=new Float32Array(32),i=0,n=0;for(let o=0;o<80;++o){let l=o*e,h=Math.sqrt(o)/Math.sqrt(80),c=h*Math.cos(l),u=h*Math.sin(l);o%5===0?(r[n++]=c,r[n++]=u):(t[i++]=c,t[i++]=u)}let s=[],a=[];for(let o=0;o<128;)s.push(new Ct(t[o++],t[o++],t[o++],t[o++]));for(let o=0;o<32;)a.push(new Ct(r[o++],r[o++],r[o++],r[o++]));this.uniforms.kernel64.value=s,this.uniforms.kernel16.value=a}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}};function IT(e,t,r){return e*(t-r)-t}function O8(e,t,r){return Math.min(Math.max((e+t)/(t-r),0),1)}var cde=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,dde=class extends cr{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Se(null),focusDistance:new Se(0),focusRange:new Se(0),cameraNear:new Se(.3),cameraFar:new Se(1e3)},blending:ti,depthWrite:!1,depthTest:!1,fragmentShader:cde,vertexShader:Nm}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Bl){this.depthBuffer=e,this.depthPacking=t}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-IT(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=O8(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-IT(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=O8(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Wi?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},pde=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
#include <dithering_fragment>
}`,fde="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",RT=class extends cr{constructor(e=new X){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Se(null),texelSize:new Se(new X),halfTexelSize:new Se(new X),kernel:new Se(0),scale:new Se(1)},blending:ti,depthWrite:!1,depthTest:!1,fragmentShader:pde,vertexShader:fde}),this.toneMapped=!1,this.setTexelSize(e.x,e.y)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setSize(e,t){let r=this.uniforms;r.texelSize.value.set(1/e,1/t),r.halfTexelSize.value.copy(r.texelSize.value).multiplyScalar(.5)}},mde=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,gde=class extends cr{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Se(null),opacity:new Se(1)},blending:ti,depthWrite:!1,depthTest:!1,fragmentShader:mde,vertexShader:Nm}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},vde=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,yde=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,Gy={DEPTH:0,LUMA:1,COLOR:2},xde={DISABLED:0,DEPTH:1,CUSTOM:2},wde=class extends cr{constructor(e=new X,t=Gy.COLOR){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:uf.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new Se(null),depthBuffer:new Se(null),predicationBuffer:new Se(null),texelSize:new Se(e)},blending:ti,depthWrite:!1,depthTest:!1,fragmentShader:vde,vertexShader:yde}),this.toneMapped=!1,this.edgeDetectionMode=t}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Bl){this.depthBuffer=e,this.depthPacking=t}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(e*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},bde=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,_de="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",ma={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},I8=class extends cr{constructor(e,t,r,i,n=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:uf.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Se(null),depthBuffer:new Se(null),resolution:new Se(new X),texelSize:new Se(new X),cameraNear:new Se(.3),cameraFar:new Se(1e3),aspect:new Se(1),time:new Se(0)},blending:ti,depthWrite:!1,depthTest:!1,dithering:n}),this.toneMapped=!1,e&&this.setShaderParts(e),t&&this.setDefines(t),r&&this.setUniforms(r),this.adoptCameraSettings(i)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Bl){this.depthBuffer=e,this.depthPacking=t}setShaderParts(e){return this.fragmentShader=bde.replace(ma.FRAGMENT_HEAD,e.get(ma.FRAGMENT_HEAD)).replace(ma.FRAGMENT_MAIN_UV,e.get(ma.FRAGMENT_MAIN_UV)).replace(ma.FRAGMENT_MAIN_IMAGE,e.get(ma.FRAGMENT_MAIN_IMAGE)),this.vertexShader=_de.replace(ma.VERTEX_HEAD,e.get(ma.VERTEX_HEAD)).replace(ma.VERTEX_MAIN_SUPPORT,e.get(ma.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(let t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(let t of e)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Wi?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){let r=this.uniforms;r.resolution.value.set(e,t),r.texelSize.value.set(1/e,1/t),r.aspect.value=e/t}static get Section(){return ma}},Cde=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,Sde=class extends cr{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:uf.replace(/\D+/g,"")},uniforms:{inputBuffer:new Se(null),threshold:new Se(0),smoothing:new Se(1),range:new Se(null)},blending:ti,depthWrite:!1,depthTest:!1,fragmentShader:Cde,vertexShader:Nm}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},Mde=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,Dk={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},Ade=class extends cr{constructor(e=null){super({name:"MaskMaterial",uniforms:{maskTexture:new Se(e),inputBuffer:new Se(null),strength:new Se(1)},blending:ti,depthWrite:!1,depthTest:!1,fragmentShader:Mde,vertexShader:Nm}),this.toneMapped=!1,this.setColorChannel(Pk.RED),this.setMaskFunction(Dk.DISCARD)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==en&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return this.defines.INVERTED!==void 0}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},Ede=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,Tde="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",Lde=class extends cr{constructor(e=new X,t=new X){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new Se(null),searchTexture:new Se(null),areaTexture:new Se(null),resolution:new Se(t),texelSize:new Se(e)},blending:ti,depthWrite:!1,depthTest:!1,fragmentShader:Ede,vertexShader:Tde}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,t){this.searchTexture=e,this.areaTexture=t}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){let t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){let t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){let t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,t){let r=this.uniforms;r.texelSize.value.set(1/e,1/t),r.resolution.value.set(e,t)}},Pde=new pf,Xl=null;function Dde(){if(Xl===null){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);Xl=new dt,Xl.setAttribute!==void 0?(Xl.setAttribute("position",new pt(e,3)),Xl.setAttribute("uv",new pt(t,2))):(Xl.addAttribute("position",new pt(e,3)),Xl.addAttribute("uv",new pt(t,2)))}return Xl}var An=class{constructor(e="Pass",t=new Bh,r=Pde){this.name=e,this.renderer=null,this.scene=t,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let t=this.getFullscreenMaterial();t!==null&&(t.needsUpdate=!0),this.rtt=!e}}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new kn(Dde(),e),t.frustumCulled=!1,this.scene===null&&(this.scene=new Bh),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=Bl){}render(e,t,r,i,n){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,r){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t.dispose=="function"){if(t instanceof Bh||t===this.renderer)continue;this[e].dispose()}}}},R8=class extends An{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new gde,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new tr(1,1,{minFilter:Lt,magFilter:Lt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,r,i,n){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,r){r!==void 0&&(this.renderTarget.texture.type=r,r!==en?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===_t&&(this.renderTarget.texture.encoding=_t))}},Ode=class extends An{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,r,i,n){let s=e.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},cx=new lt,Gb=class extends An{constructor(e=!0,t=!0,r=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=r,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,r){this.color=e,this.depth=t,this.stencil=r}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,r,i,n){let s=this.overrideClearColor,a=this.overrideClearAlpha,o=e.getClearAlpha(),l=s!==null,h=a>=0;l?(cx.copy(e.getClearColor(cx)),e.setClearColor(s,h?a:o)):h&&e.setClearAlpha(a),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(cx,o):h&&e.setClearAlpha(o)}},Yl=-1,Fn=class extends Ni{constructor(e,t=Yl,r=Yl,i=1){super(),this.resizable=e,this.base=new X(1,1),this.preferred=new X(t,r),this.target=this.preferred,this.s=i}get width(){let{base:e,preferred:t,scale:r}=this,i;return t.width!==Yl?i=t.width:t.height!==Yl?i=Math.round(t.height*(e.width/Math.max(e.height,1))):i=Math.round(e.width*r),i}set width(e){this.preferredWidth=e}get height(){let{base:e,preferred:t,scale:r}=this,i;return t.height!==Yl?i=t.height:t.width!==Yl?i=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):i=Math.round(e.height*r),i}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(Yl),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.base.width!==e||this.base.height!==t)&&(this.base.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferred.width!==e||this.preferred.height!==t)&&(this.preferred.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return Yl}},dx=!1,BT=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let r;if(t.material.flatShading)switch(t.material.side){case ps:r=this.materialsFlatShadedDoubleSide;break;case _i:r=this.materialsFlatShadedBackSide;break;default:r=this.materialsFlatShaded;break}else switch(t.material.side){case ps:r=this.materialsDoubleSide;break;case _i:r=this.materialsBackSide;break;default:r=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=r[2]:t.isInstancedMesh?t.material=r[1]:t.material=r[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){let t=this.materials=[e.clone(),e.clone(),e.clone()];for(let r of t)r.uniforms=Object.assign({},e.uniforms),r.side=za;t[2].skinning=!0,this.materialsBackSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.side=_i,i}),this.materialsDoubleSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.side=ps,i}),this.materialsFlatShaded=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=_i,i}),this.materialsFlatShadedDoubleSide=t.map(r=>{let i=r.clone();return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=ps,i})}}render(e,t,r){let i=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,dx){let n=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,r);for(let s of n)s[0].material=s[1];this.meshCount!==n.size&&n.clear()}else{let n=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,r),t.overrideMaterial=n}e.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return dx}static set workaroundEnabled(e){dx=e}},Ide=class extends An{constructor(e,t,r=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new Gb,this.overrideMaterialManager=r===null?null:new BT(r),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){let t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new BT(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,r,i,n){let s=this.scene,a=this.camera,o=this.selection,l=a.layers.mask,h=s.background,c=e.shadowMap.autoUpdate,u=this.renderToScreen?null:t;o!==null&&a.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(u),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,s,a):e.render(s,a),a.layers.mask=l,s.background=h,e.shadowMap.autoUpdate=c}},zT=class extends An{constructor(e,t,{resolutionScale:r=1,width:i=Fn.AUTO_SIZE,height:n=Fn.AUTO_SIZE,renderTarget:s}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new Ide(e,t,new TR({depthPacking:fR}));let a=this.renderPass;a.skipShadowMapUpdate=!0,a.ignoreBackground=!0;let o=a.getClearPass();o.overrideClearColor=new lt(16777215),o.overrideClearAlpha=1,this.renderTarget=s,this.renderTarget===void 0&&(this.renderTarget=new tr(1,1,{minFilter:ur,magFilter:ur,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let l=this.resolution=new Fn(this,i,n,r);l.addEventListener("change",h=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,i,n){let s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,s)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}},jt={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},Rde="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",Bde="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",zde="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",kde="float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Nde="float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Fde="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",Ude="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",jde="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",Vde="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",Gde="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",Hde="float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Wde="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",qde="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",Xde="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Yde="float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Qde="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",Zde="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Kde="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",$de=new Map([[jt.SKIP,null],[jt.ADD,Rde],[jt.ALPHA,Bde],[jt.AVERAGE,zde],[jt.COLOR_BURN,kde],[jt.COLOR_DODGE,Nde],[jt.DARKEN,Fde],[jt.DIFFERENCE,Ude],[jt.EXCLUSION,jde],[jt.LIGHTEN,Vde],[jt.MULTIPLY,Gde],[jt.DIVIDE,Hde],[jt.NEGATION,Wde],[jt.NORMAL,qde],[jt.OVERLAY,Xde],[jt.REFLECT,Yde],[jt.SCREEN,Qde],[jt.SOFT_LIGHT,Zde],[jt.SUBTRACT,Kde]]),Jde=class extends Ni{constructor(e,t=1){super(),this.f=e,this.opacity=new Se(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this.f}set blendFunction(e){this.f=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return $de.get(this.blendFunction)}},Co={NONE:0,DEPTH:1,CONVOLUTION:2},Oo=class extends Ni{constructor(e,t,{attributes:r=Co.NONE,blendFunction:i=jt.SCREEN,defines:n=new Map,uniforms:s=new Map,extensions:a=null,vertexShader:o=null}={}){super(),this.name=e,this.renderer=null,this.attributes=r,this.fragmentShader=t,this.vertexShader=o,this.defines=n,this.uniforms=s,this.extensions=a,this.blendMode=new Jde(i),this.blendMode.addEventListener("change",l=>this.setChanged())}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=Bl){}update(e,t,r){}setSize(e,t){}initialize(e,t,r){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t.dispose=="function"){if(t instanceof Bh||t===this.renderer)continue;this[e].dispose()}}}};function kT(e,t,r){for(let i of t){let n="$1"+e+i.charAt(0).toUpperCase()+i.slice(1),s=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(let a of r.entries())a[1]!==null&&r.set(a[0],a[1].replace(s,n))}}function epe(e,t,r,i,n,s,a){let o=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),l=o.get("fragment")!==void 0&&/mainImage/.test(o.get("fragment")),h=o.get("fragment")!==void 0&&/mainUv/.test(o.get("fragment")),c=[],u=[],d=!1,p=!1;if(o.get("fragment")===void 0)console.error("Missing fragment shader",t);else if(h&&a&Co.CONVOLUTION)console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(!l&&!h)console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);else{let f=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,m=I8.Section;if(h){let v=`	${e}MainUv(UV);
`;r.set(m.FRAGMENT_MAIN_UV,r.get(m.FRAGMENT_MAIN_UV)+v),d=!0}if(o.get("vertex")!==null&&/mainSupport/.test(o.get("vertex"))){let v=`	${e}MainSupport(`;v+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(o.get("vertex"))?`vUv);
`:`);
`,r.set(m.VERTEX_MAIN_SUPPORT,r.get(m.VERTEX_MAIN_SUPPORT)+v),c=c.concat([...o.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(y=>y[1])),u=u.concat(c).concat([...o.get("vertex").matchAll(f)].map(y=>y[1]))}u=u.concat([...o.get("fragment").matchAll(f)].map(v=>v[1])),u=u.concat([...t.defines.keys()].map(v=>v.replace(/\([\w\s,]*\)/g,""))),u=u.concat([...t.uniforms.keys()]),t.uniforms.forEach((v,y)=>s.set(e+y.charAt(0).toUpperCase()+y.slice(1),v)),t.defines.forEach((v,y)=>n.set(e+y.charAt(0).toUpperCase()+y.slice(1),v)),kT(e,u,n),kT(e,u,o);let g=t.blendMode;if(i.set(g.blendFunction,g),l){let v=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,y=`${e}MainImage(color0, UV, `;a&Co.DEPTH&&v.test(o.get("fragment"))&&(y+="depth, ",p=!0),y+=`color1);
	`;let x=e+"BlendOpacity";s.set(x,g.opacity),y+=`color0 = blend${g.blendFunction}(color0, color1, ${x});

	`,r.set(m.FRAGMENT_MAIN_IMAGE,r.get(m.FRAGMENT_MAIN_IMAGE)+y),y=`uniform float ${x};

`,r.set(m.FRAGMENT_HEAD,r.get(m.FRAGMENT_HEAD)+y)}r.set(m.FRAGMENT_HEAD,r.get(m.FRAGMENT_HEAD)+o.get("fragment")+`
`),o.get("vertex")!==null&&r.set(m.VERTEX_HEAD,r.get(m.VERTEX_HEAD)+o.get("vertex")+`
`)}return{varyings:c,transformedUv:d,readDepth:p}}var Y3=class extends An{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new I8(null,null,null,e),this.effects=t.sort((r,i)=>i.attributes-r.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}verifyResources(){let e=this.renderer.capabilities,t=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount>t&&console.warn("The current rendering context doesn't support more than "+t+" uniforms, but "+this.uniformCount+" were defined"),t=e.maxVaryings,this.varyingCount>t&&console.warn("The current rendering context doesn't support more than "+t+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let e=I8.Section,t=new Map([[e.FRAGMENT_HEAD,""],[e.FRAGMENT_MAIN_UV,""],[e.FRAGMENT_MAIN_IMAGE,""],[e.VERTEX_HEAD,""],[e.VERTEX_MAIN_SUPPORT,""]]),r=new Map,i=new Map,n=new Map,s=new Set,a=0,o=0,l=0,h=!1,c=!1;for(let d of this.effects)if(d.blendMode.blendFunction===jt.SKIP)l|=d.getAttributes()&Co.DEPTH;else if(l&d.getAttributes()&Co.CONVOLUTION)console.error("Convolution effects cannot be merged",d);else{l|=d.getAttributes();let p="e"+a++,f=epe(p,d,t,r,i,n,l);if(o+=f.varyings.length,h=h||f.transformedUv,c=c||f.readDepth,d.extensions!==null)for(let m of d.extensions)s.add(m)}let u=/\bblend\b/g;for(let d of r.values()){let p=d.getShaderCode().replace(u,`blend${d.blendFunction}`);t.set(e.FRAGMENT_HEAD,t.get(e.FRAGMENT_HEAD)+p+`
`)}if(l&Co.DEPTH){if(c){let d=`float depth = readDepth(UV);

	`;t.set(e.FRAGMENT_MAIN_IMAGE,d+t.get(e.FRAGMENT_MAIN_IMAGE))}this.needsDepthTexture=this.getDepthTexture()===null}else this.needsDepthTexture=!1;if(h){let d=`vec2 transformedUv = vUv;
`;t.set(e.FRAGMENT_MAIN_UV,d+t.get(e.FRAGMENT_MAIN_UV)),i.set("UV","transformedUv")}else i.set("UV","vUv");t.forEach((d,p,f)=>f.set(p,d.trim().replace(/^#/,`
#`))),this.uniformCount=n.size,this.varyingCount=o,this.skipRendering=a===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(t).setExtensions(s).setUniforms(n).setDefines(i)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=Bl){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(let r of this.effects)r.setDepthTexture(e,t)}render(e,t,r,i,n){for(let s of this.effects)s.update(e,t,i);if(!this.skipRendering||this.renderToScreen){let s=this.fullscreenMaterial;s.inputBuffer=t.texture,s.time+=i,e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(let r of this.effects)r.setSize(e,t)}initialize(e,t,r){this.renderer=e;for(let i of this.effects)i.initialize(e,t,r),i.addEventListener("change",n=>this.handleEvent(n));this.updateMaterial(),this.verifyResources(),r!==void 0&&r!==en&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}},tpe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Ok=class extends An{constructor({resolutionScale:e=.5,width:t=Fn.AUTO_SIZE,height:r=Fn.AUTO_SIZE,kernelSize:i=Hb.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new tr(1,1,{minFilter:Lt,magFilter:Lt,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let n=this.resolution=new Fn(this,t,r,e);n.addEventListener("change",s=>this.setSize(n.baseWidth,n.baseHeight)),this.blurMaterial=new RT,this.ditheredBlurMaterial=new RT,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=i}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,r,i,n){let s=this.scene,a=this.camera,o=this.renderTargetA,l=this.renderTargetB,h=tpe[this.kernelSize],c=this.blurMaterial,u=t,d,p;for(this.fullscreenMaterial=c,d=0,p=h.length-1;d<p;++d){let f=d&1?l:o;c.kernel=h[d],c.inputBuffer=u.texture,e.setRenderTarget(f),e.render(s,a),u=f}this.dithering&&(c=this.ditheredBlurMaterial,this.fullscreenMaterial=c),c.kernel=h[d],c.inputBuffer=u.texture,e.setRenderTarget(this.renderToScreen?null:r),e.render(s,a)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t);let i=r.width,n=r.height;this.renderTargetA.setSize(i,n),this.renderTargetB.setSize(i,n),this.blurMaterial.setSize(i,n),this.ditheredBlurMaterial.setSize(i,n)}initialize(e,t,r){r!==void 0&&(this.renderTargetA.texture.type=r,this.renderTargetB.texture.type=r,r!==en?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===_t&&(this.renderTargetA.texture.encoding=_t,this.renderTargetB.texture.encoding=_t))}static get AUTO_SIZE(){return Fn.AUTO_SIZE}},rpe=class extends An{constructor({width:e=Fn.AUTO_SIZE,height:t=Fn.AUTO_SIZE,renderTarget:r,luminanceRange:i,colorOutput:n}={}){super("LuminancePass"),this.fullscreenMaterial=new Sde(n,i),this.needsSwap=!1,this.renderTarget=r,this.renderTarget===void 0&&(this.renderTarget=new tr(1,1,{minFilter:Lt,magFilter:Lt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let s=this.resolution=new Fn(this,e,t);s.addEventListener("change",a=>this.setSize(s.baseWidth,s.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,r,i,n){let s=this.fullscreenMaterial;s.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height)}initialize(e,t,r){r!==void 0&&r!==en&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},ipe=class extends An{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new Gb(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,r,i,n){let s=e.getContext(),a=e.state.buffers,o=this.scene,l=this.camera,h=this.clearPass,c=this.inverted?0:1,u=1-c;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),a.stencil.setFunc(s.ALWAYS,c,4294967295),a.stencil.setClear(u),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?h.render(e,null):(h.render(e,t),h.render(e,r))),this.renderToScreen?(e.setRenderTarget(null),e.render(o,l)):(e.setRenderTarget(t),e.render(o,l),e.setRenderTarget(r),e.render(o,l)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(s.EQUAL,1,4294967295),a.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),a.stencil.setLocked(!0)}},ao=class extends An{constructor(e,t="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.inputBufferUniform=null,this.setInput(t)}setInput(e){if(this.inputBufferUniform=null,this.fullscreenMaterial!==null){let t=this.fullscreenMaterial.uniforms;t!==void 0&&t[e]!==void 0&&(this.inputBufferUniform=t[e])}}render(e,t,r,i,n){this.inputBufferUniform!==null&&t!==null&&(this.inputBufferUniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:r),e.render(this.scene,this.camera)}initialize(e,t,r){r!==void 0&&r!==en&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},px=1/1e3,npe=1e3,spe=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return this.delta*px}getFixedDelta(){return this.fixedDelta*px}setFixedDelta(e){return this.fixedDelta=e*npe,this}getElapsed(){return this.elapsed*px}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=e!==void 0?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},Hb={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},ape=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,ope=class extends Oo{constructor({blendFunction:e=jt.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:r=.025,resolutionScale:i=.5,intensity:n=1,width:s=Fn.AUTO_SIZE,height:a=Fn.AUTO_SIZE,kernelSize:o=Hb.LARGE}={}){super("BloomEffect",ape,{blendFunction:e,uniforms:new Map([["map",new Se(null)],["intensity",new Se(n)]])}),this.renderTarget=new tr(1,1,{minFilter:Lt,magFilter:Lt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new rpe({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothingFactor=r,this.blurPass=new Ok({resolutionScale:i,width:s,height:a,kernelSize:o});let l=this.blurPass.getResolution();l.addEventListener("change",h=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,r){let i=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,i),this.blurPass.render(e,i,i)):this.blurPass.render(e,t,i)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t),this.renderTarget.setSize(r.width,r.height),this.luminancePass.resolution.copy(r)}initialize(e,t,r){this.blurPass.initialize(e,t,r),r!==void 0&&(this.renderTarget.texture.type=r,e.outputEncoding===_t&&(this.renderTarget.texture.encoding=_t))}},lpe="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",hpe=class extends Oo{constructor({blendFunction:e=jt.NORMAL,brightness:t=0,contrast:r=0}={}){super("BrightnessContrastEffect",lpe,{blendFunction:e,uniforms:new Map([["brightness",new Se(t)],["contrast",new Se(r)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(e){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(e){return this.contrast}setContrast(e){this.contrast=e}},upe="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",cpe=class extends Oo{constructor(e=jt.NORMAL){super("ColorAverageEffect",upe,{blendFunction:e})}},dpe="varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",ppe="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",fpe=class extends Oo{constructor({blendFunction:e=jt.NORMAL,offset:t=new X(.001,5e-4)}={}){super("ChromaticAberrationEffect",dpe,{vertexShader:ppe,blendFunction:e,attributes:Co.CONVOLUTION,uniforms:new Map([["offset",new Se(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},mpe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}`,gpe=class extends Oo{constructor(e,{blendFunction:t=jt.NORMAL,worldFocusDistance:r,worldFocusRange:i,focusDistance:n=0,focalLength:s=.1,focusRange:a=s,bokehScale:o=1,width:l=Fn.AUTO_SIZE,height:h=Fn.AUTO_SIZE}={}){super("DepthOfFieldEffect",mpe,{blendFunction:t,attributes:Co.DEPTH,uniforms:new Map([["nearColorBuffer",new Se(null)],["farColorBuffer",new Se(null)],["nearCoCBuffer",new Se(null)],["scale",new Se(1)]])}),this.camera=e,this.renderTarget=new tr(1,1,{minFilter:Lt,magFilter:Lt,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new ao(new dde(e));let c=this.cocMaterial;c.focusDistance=n,c.focusRange=a,r!==void 0&&(c.worldFocusDistance=r),i!==void 0&&(c.worldFocusRange=i),this.blurPass=new Ok({kernelSize:Hb.MEDIUM,width:l,height:h});let u=this.blurPass.getResolution();u.addEventListener("change",p=>this.setSize(u.getBaseWidth(),u.getBaseHeight())),this.maskPass=new ao(new Ade(this.renderTargetCoC.texture));let d=this.maskPass.fullscreenMaterial;d.maskFunction=Dk.MULTIPLY,d.colorChannel=Pk.GREEN,this.bokehNearBasePass=new ao(new Ev(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new ao(new Ev(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new ao(new Ev(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new ao(new Ev(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=o}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){let t=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let r of t)r.fullscreenMaterial.setScale(e);this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){let t=this.camera,r=t.position.distanceTo(e);return O8(-r,t.near,t.far)}setDepthTexture(e,t=Bl){this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=t}update(e,t,r){let i=this.renderTarget,n=this.renderTargetCoC,s=this.renderTargetCoCBlurred,a=this.renderTargetMasked;if(this.target!==null){let o=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=o}this.cocPass.render(e,null,n),this.blurPass.render(e,n,s),this.maskPass.render(e,t,a),this.bokehFarBasePass.render(e,a,i),this.bokehFarFillPass.render(e,i,this.renderTargetFar),this.bokehNearBasePass.render(e,t,i),this.bokehNearFillPass.render(e,i,this.renderTargetNear)}setSize(e,t){let r=this.resolution;r.setBaseSize(e,t);let i=r.width,n=r.height,s=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];s.push(this.renderTargetCoC,this.renderTargetMasked),s.forEach(a=>a.setSize(e,t)),s=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],s.forEach(a=>a.setSize(i,n)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(a=>a.fullscreenMaterial.setSize(i,n))}initialize(e,t,r){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(i=>i.initialize(e,t,r)),this.blurPass.initialize(e,t,en),r!==void 0&&(this.renderTarget.texture.type=r,this.renderTargetNear.texture.type=r,this.renderTargetFar.texture.type=r,this.renderTargetMasked.texture.type=r,e.outputEncoding===_t&&(this.renderTarget.texture.encoding=_t,this.renderTargetNear.texture.encoding=_t,this.renderTargetFar.texture.encoding=_t,this.renderTargetMasked.texture.encoding=_t))}};new E;new Ae;var vpe="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",ype=class extends Oo{constructor({blendFunction:e=jt.NORMAL,hue:t=0,saturation:r=0}={}){super("HueSaturationEffect",vpe,{blendFunction:e,uniforms:new Map([["hue",new Se(new E)],["saturation",new Se(r)]])}),this.hue=t}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){let e=this.uniforms.get("hue").value;return Math.acos((e.x*3-1)/2)}set hue(e){let t=Math.sin(e),r=Math.cos(e);this.uniforms.get("hue").value.set((2*r+1)/3,(-Math.sqrt(3)*t-r+1)/3,(Math.sqrt(3)*t-r+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}};new lt;var xpe=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,wpe=class extends Oo{constructor({blendFunction:e=jt.SCREEN,premultiply:t=!1}={}){super("NoiseEffect",xpe,{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}},bpe="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",_pe=class extends Oo{constructor(e=30){super("PixelationEffect",bpe,{uniforms:new Map([["active",new Se(!1)],["d",new Se(new X)]])}),this.resolution=new X,this.d=0,this.granularity=e}get granularity(){return this.d}set granularity(e){let t=Math.floor(e);t%2>0&&(t+=1),this.d=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}};new E;new E;var NT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",FT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",Cpe="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",Spe="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",Tu={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},Ik=class extends Oo{constructor({preset:e=Tu.MEDIUM,edgeDetectionMode:t=Gy.COLOR,predicationMode:r=xde.DISABLED}={}){super("SMAAEffect",Cpe,{vertexShader:Spe,blendFunction:jt.NORMAL,attributes:Co.CONVOLUTION|Co.DEPTH,uniforms:new Map([["weightMap",new Se(null)]])});let i,n;arguments.length>1&&(i=arguments[0],n=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(t=arguments[3])),this.renderTargetEdges=new tr(1,1,{minFilter:Lt,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new Gb(!0,!1,!1),this.clearPass.overrideClearColor=new lt(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new ao(new wde),this.edgeDetectionMaterial.edgeDetectionMode=t,this.edgeDetectionMaterial.predicationMode=r,this.weightsPass=new ao(new Lde);let s=new XR;s.onLoad=()=>{let a=new ui(i);a.name="SMAA.Search",a.magFilter=ur,a.minFilter=ur,a.generateMipmaps=!1,a.needsUpdate=!0,a.flipY=!0,this.weightsMaterial.searchTexture=a;let o=new ui(n);o.name="SMAA.Area",o.magFilter=Lt,o.minFilter=Lt,o.generateMipmaps=!1,o.needsUpdate=!0,o.flipY=!1,this.weightsMaterial.areaTexture=o,this.dispatchEvent({type:"load"})},s.itemStart("search"),s.itemStart("area"),i!==void 0&&n!==void 0?(s.itemEnd("search"),s.itemEnd("area")):typeof Image<"u"&&(i=new Image,n=new Image,i.addEventListener("load",()=>s.itemEnd("search")),n.addEventListener("load",()=>s.itemEnd("area")),i.src=NT,n.src=FT),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){let t=this.edgeDetectionMaterial,r=this.weightsMaterial;switch(e){case Tu.LOW:t.edgeDetectionThreshold=.15,r.orthogonalSearchSteps=4,r.diagonalDetection=!1,r.cornerDetection=!1;break;case Tu.MEDIUM:t.edgeDetectionThreshold=.1,r.orthogonalSearchSteps=8,r.diagonalDetection=!1,r.cornerDetection=!1;break;case Tu.HIGH:t.edgeDetectionThreshold=.1,r.orthogonalSearchSteps=16,r.diagonalSearchSteps=8,r.cornerRounding=25,r.diagonalDetection=!0,r.cornerDetection=!0;break;case Tu.ULTRA:t.edgeDetectionThreshold=.05,r.orthogonalSearchSteps=32,r.diagonalSearchSteps=16,r.cornerRounding=25,r.diagonalDetection=!0,r.cornerDetection=!0;break}}setDepthTexture(e,t=Bl){this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=t}update(e,t,r){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){this.edgeDetectionMaterial.setSize(e,t),this.weightsMaterial.setSize(e,t),this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t)}dispose(){let{searchTexture:e,areaTexture:t}=this.weightsMaterial;e!==null&&t!==null&&(e.dispose(),t.dispose()),super.dispose()}static get searchImageDataURL(){return NT}static get areaImageDataURL(){return FT}},Mpe=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,Tv={DEFAULT:0,ESKIL:1},Ape=class extends Oo{constructor({blendFunction:e=jt.NORMAL,technique:t=Tv.DEFAULT,eskil:r=!1,offset:i=.5,darkness:n=.5}={}){super("VignetteEffect",Mpe,{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new Se(i)],["darkness",new Se(n)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===Tv.ESKIL}set eskil(e){this.technique=e?Tv.ESKIL:Tv.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}},zl=class{constructor(e,t){this.enabled=!1,this.effect=new e(t),Object.defineProperty(this,"opacity",{enumerable:!0,set(r){this.effect.blendMode.opacity.value=r},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(r){this.effect.blendMode.setBlendFunction(Number(r))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=jt.NORMAL}},Epe=class extends zl{constructor(){super(ope),this.blendFunction=jt.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},Tpe=class extends zl{constructor(){super(hpe)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},Lpe=class extends zl{constructor(){super(fpe),this.effect.offset=new X(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[this.effect.offset.x*1e3,this.effect.offset.y*1e3]}},Ppe=class extends zl{constructor(){super(cpe)}},Dpe=class extends zl{constructor(){super(ype),this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},Ope=class extends zl{constructor(){super(wpe),this.blendFunction=jt.OVERLAY}},Ipe=class extends zl{constructor(){super(Ape)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},Rpe=class extends zl{constructor(e){super(gpe,e)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=e}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}},Bpe=class extends zl{constructor(){super(_pe)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}},zpe=`#define GLSLIFY 1
varying vec2 vUv;varying vec2 vTexCoords[9];uniform vec2 resolution;void main(){vUv=position.xy*0.5+0.5;vec2 texelSize=vec2(1.0)/resolution;vTexCoords[0]=vUv+vec2(-texelSize.x,-texelSize.y);vTexCoords[1]=vUv+vec2(0.0,-texelSize.y);vTexCoords[2]=vUv+vec2(texelSize.x,-texelSize.y);vTexCoords[3]=vUv+vec2(-texelSize.x,0.0);vTexCoords[4]=vUv+vec2(0.0,0.0);vTexCoords[5]=vUv+vec2(texelSize.x,0.0);vTexCoords[6]=vUv+vec2(-texelSize.x,texelSize.y);vTexCoords[7]=vUv+vec2(0.0,texelSize.y);vTexCoords[8]=vUv+vec2(texelSize.x,texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}`,kpe=`#define GLSLIFY 1
#include <common>
varying vec2 vUv;varying vec2 vTexCoords[9];uniform sampler2D inputBuffer;uniform sampler2D historyBuffer;uniform sampler2D velocityBuffer;uniform sampler2D depthBuffer;uniform vec2 resolution;
#define USE_YCOCG
#define USE_CATMULL_ROM
const float feedback_min=0.5;const float feedback_max=0.95;vec3 RGB_YCoCg(vec3 c){return vec3(c.x/4.0+c.y/2.0+c.z/4.0,c.x/2.0-c.z/2.0,-c.x/4.0+c.y/2.0-c.z/4.0);}vec3 YCoCg_RGB(vec3 c){return clamp(vec3(c.x+c.y-c.z,c.x+c.z,c.x-c.y-c.z),vec3(0.0),vec3(1.0));}vec4 sample_color(sampler2D tex,vec2 uv){
#ifdef USE_YCOCG
vec4 c=texture(tex,uv);return vec4(RGB_YCoCg(c.rgb),c.a);
#else
return texture(tex,uv);
#endif
}vec4 sample_catmull_rom(sampler2D tex,vec2 uv,vec2 texSize){vec2 samplePos=uv*texSize;vec2 texPos1=floor(samplePos-0.5)+0.5;vec2 f=samplePos-texPos1;vec2 w0=f*(-0.5+f*(1.0-0.5*f));vec2 w1=1.0+f*f*(-2.5+1.5*f);vec2 w2=f*(0.5+f*(2.0-1.5*f));vec2 w3=f*f*(-0.5+0.5*f);vec2 w12=w1+w2;vec2 offset12=w2/(w1+w2);vec2 texPos0=texPos1-1.0;vec2 texPos3=texPos1+2.0;vec2 texPos12=texPos1+offset12;texPos0/=texSize;texPos3/=texSize;texPos12/=texSize;vec4 result=vec4(0.0);result+=texture2D(tex,vec2(texPos12.x,texPos0.y))*w12.x*w0.y;result+=texture2D(tex,vec2(texPos0.x,texPos12.y))*w0.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos12.y))*w12.x*w12.y;result+=texture2D(tex,vec2(texPos3.x,texPos12.y))*w3.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos3.y))*w12.x*w3.y;return result;}vec3 choose_motion_vector(){
#ifdef CHOOSE_LONGEST_MOTION_VECTOR
float longest=-1.0;vec3 v_choose=vec3(-1.0);for(int i=0;i<9;i++){vec3 v=texture2D(velocityBuffer,vTexCoords[i]).rgb;float l=length(v.xy);if(l>longest){longest=l;v_choose=v;}}return v_choose;
#else
float closest_depth=1000.0;vec2 closest_uv_offset=vec2(0.0);for(int i=0;i<9;i++){float neighbor_depth=texture2D(depthBuffer,vTexCoords[i]).r;if(neighbor_depth<closest_depth){closest_uv_offset=vTexCoords[i];closest_depth=neighbor_depth;}}return texture2D(velocityBuffer,closest_uv_offset).rgb;
#endif
}vec4 clipAabb(vec3 aabb_min,vec3 aabb_max,vec4 avg,vec4 input_texel){const float FLT_EPS=0.00000001;vec3 p_clip=0.5*(aabb_max+aabb_min);vec3 e_clip=0.5*(aabb_max-aabb_min)+FLT_EPS;vec4 v_clip=input_texel-vec4(p_clip,avg.w);vec3 v_unit=v_clip.xyz/e_clip;vec3 a_unit=abs(v_unit);float ma_unit=max(a_unit.x,max(a_unit.y,a_unit.z));if(ma_unit>1.0){return vec4(p_clip,avg.w)+v_clip/ma_unit;}else{return input_texel;}}vec3 clip_aabb_variance(in vec3 cOld,in vec3 cNew,in vec3 centre,in vec3 halfSize){if(all(lessThanEqual(abs(cOld-centre),halfSize))){return cOld;}vec3 dir=(cNew-cOld);vec3 near=centre-sign(dir)*halfSize;vec3 tAll=(near-cOld)/dir;float t=0.0001;for(int i=0;i<3;i++){if(tAll[i]>=0.0&&tAll[i]<t){t=tAll[i];}}if(t>=0.0001){return cOld;}return cOld+dir*t;}void main(){vec3 v=choose_motion_vector();vec2 velocity=v.rg;vec2 previousPixelPos=vUv-velocity;vec4 currentColor=sample_color(inputBuffer,vUv);
#ifdef USE_CATMULL_ROM
vec4 previousColor=sample_catmull_rom(historyBuffer,previousPixelPos,resolution);
#else
vec4 previousColor=sample_color(historyBuffer,previousPixelPos);
#endif
#ifdef USE_YCOCG
previousColor=vec4(RGB_YCoCg(previousColor.rgb),previousColor.a);
#endif
vec4 ctl=sample_color(inputBuffer,vTexCoords[0]);vec4 ctc=sample_color(inputBuffer,vTexCoords[1]);vec4 ctr=sample_color(inputBuffer,vTexCoords[2]);vec4 cml=sample_color(inputBuffer,vTexCoords[3]);vec4 cmc=sample_color(inputBuffer,vTexCoords[4]);vec4 cmr=sample_color(inputBuffer,vTexCoords[5]);vec4 cbl=sample_color(inputBuffer,vTexCoords[6]);vec4 cbc=sample_color(inputBuffer,vTexCoords[7]);vec4 cbr=sample_color(inputBuffer,vTexCoords[8]);vec4 cmin=min(ctl,min(ctc,min(ctr,min(cml,min(cmc,min(cmr,min(cbl,min(cbc,cbr))))))));vec4 cmax=max(ctl,max(ctc,max(ctr,max(cml,max(cmc,max(cmr,max(cbl,max(cbc,cbr))))))));vec4 cavg=(ctl+ctc+ctr+cml+cmc+cmr+cbl+cbc+cbr)/9.0;vec4 cmin5=min(ctc,min(cml,min(cmc,min(cmr,cbc))));vec4 cmax5=max(ctc,max(cml,max(cmc,max(cmr,cbc))));vec4 cavg5=(ctc+cml+cmc+cmr+cbc)/5.0;cmin=0.5*(cmin+cmin5);cmax=0.5*(cmax+cmax5);cavg=0.5*(cavg+cavg5);
#ifdef USE_YCOCG
vec2 chroma_extent=vec2(0.25*0.5*(cmax.r-cmin.r));vec2 chroma_center=currentColor.gb;cmin.yz=chroma_center-chroma_extent;cmax.yz=chroma_center+chroma_extent;cavg.yz=chroma_center;
#endif
vec4 previousColorClipped=clamp(previousColor,cmin,cmax);
#ifdef LUMINANCE_DIFFERENCES
#ifdef USE_YCOCG
float lum0=currentColor.r;float lum1=previousColorClipped.r;
#else
float lum0=luminance(currentColor.rgb);float lum1=luminance(previousColorClipped.rgb);
#endif
float unbiased_diff=abs(lum0-lum1)/max(lum0,max(lum1,0.2));float unbiased_weight=1.0-unbiased_diff;float unbiased_weight_sqr=unbiased_weight*unbiased_weight;float k_feedback=mix(feedback_min,feedback_max,unbiased_weight_sqr);vec4 result=mix(currentColor,previousColorClipped,vec4(k_feedback));
#else
const float alpha=0.1;vec4 result=mix(currentColor,previousColorClipped,1.0-alpha);
#endif
#ifdef USE_YCOCG
gl_FragColor=vec4(YCoCg_RGB(result.rgb).rgb,result.a);
#else
gl_FragColor=result;
#endif
}`,Npe=`#define GLSLIFY 1
varying vec2 vUv;void main(){gl_Position=vec4(position.xy,1.0,1.0);vUv=position.xy*0.5+0.5;}`,Fpe=`#define GLSLIFY 1
layout(location=1)out vec4 gVelocity;varying vec2 vUv;uniform sampler2D inputBuffer;void main(){gl_FragColor=texture2D(inputBuffer,vUv);gVelocity=vec4(0.0);}`,B8=class extends cr{constructor(){super({name:"PassthroughMaterial",uniforms:{inputBuffer:new Se(null)},blending:ti,depthWrite:!1,depthTest:!1,vertexShader:Npe,fragmentShader:Fpe})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}},Upe=class extends An{constructor(){super("TAAResolvePass"),this.MRTCompatible=!0,this.needsSwap=!1,this.passThroughMaterial=new B8,this.resolutionVector=new X,this.resolveMaterial=new cr({name:"TAAResolveMaterial",uniforms:{inputBuffer:new Se(null),historyBuffer:new Se(null),velocityBuffer:new Se(null),depthBuffer:new Se(null),resolution:new Se(new X)},blending:ti,depthWrite:!1,depthTest:!1,vertexShader:zpe,fragmentShader:kpe}),this.historyRenderTarget=new tr(1024,1024,{minFilter:Lt,stencilBuffer:!1,depthBuffer:!1}),this.historyRenderTarget.texture.name="TAA.History",this.resultRenderTarget=new tr(1024,1024,{minFilter:Lt,stencilBuffer:!1,depthBuffer:!1}),this.resultRenderTarget.texture.name="TAA.Output"}setSize(e,t){this.historyRenderTarget.setSize(e,t),this.resultRenderTarget.setSize(e,t)}render(e,t){this.fullscreenMaterial=this.resolveMaterial,this.resolveMaterial.uniforms.inputBuffer.value=t.texture[0],this.resolveMaterial.uniforms.velocityBuffer.value=t.texture[1],this.resolveMaterial.uniforms.depthBuffer.value=t.depthTexture,this.resolveMaterial.uniforms.historyBuffer.value=this.historyRenderTarget.texture,this.resolveMaterial.uniforms.resolution.value.set(t.width,t.height),e.setRenderTarget(this.resultRenderTarget),e.render(this.scene,this.camera),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(this.historyRenderTarget),e.render(this.scene,this.camera);let r=this.renderToScreen?null:t;this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(r),e.render(this.scene,this.camera)}dispose(){this.resultRenderTarget.dispose(),this.historyRenderTarget.dispose(),this.resolveMaterial.dispose(),this.passThroughMaterial.dispose()}},jpe=class extends An{constructor(e,t,r){super("TransmissionPass",void 0,t),this.MRTCompatible=!0,this.depthPass=new zT(e,t,{renderTarget:r.transmissionDepthTarget}),this.passThroughMaterial=new B8,this.splineScene=e,this.needsSwap=!1}updatePasses(e){this.passThroughMaterial=new B8,this.depthPass=new zT(this.splineScene,this.camera,{renderTarget:e.transmissionDepthTarget})}setCamera(e){this.camera=e}setScene(e){this.splineScene=e}render(e,t,r){let i=this.camera.layers.mask,n=e;n.setRenderTarget(n.transmissionRenderTarget),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=t.texture[0],n.clear(),n.render(this.scene,this.camera),this.camera.layers.disable(3),this.depthPass.render(e,t,r),n.shadowMap.needsUpdate=!1,n.shadowMap.autoUpdate=!1;let s=this.renderToScreen?null:t;this.camera.layers.set(3),e.setRenderTarget(s),e.render(this.splineScene,this.camera),this.camera.layers.mask=i}},UT=new Bh,Vpe=new cr({transparent:!0,vertexShader:`
        void main() {
            gl_Position = vec4(0.0);
        }
    `,fragmentShader:`
        layout(location = 1) out vec4 gVelocity;

        void main() {
            gl_FragColor = vec4(0.0);
			gVelocity = vec4(0.0);
        }
    `}),z8=class extends An{constructor(e,t,r){super("OpaquePass",t??UT,r),this.MRTCompatible=!0,this.hasTransmissionPass=!1,this.clear=!0,this.clearColorOnly=!1,this.clearDepth=!1,this.needsSwap=!1,this.originalMaterials=new Map,this.MRTCompatible=e}setCamera(e){this.camera=e}setScene(e){this.scene=e??UT}getScene(){return this.scene}render(e,t){this.camera.layers.enable(3),this.hasTransmissionPass&&(this.originalMaterials.clear(),this.scene.traverse(i=>{i.layers.isEnabled(3)&&i instanceof Qn&&(this.originalMaterials.set(i.id,i.material),i.material=Vpe)}),e.shadowMap.needsUpdate=!0,e.shadowMap.autoUpdate=!0),this.camera.layers.enable(8);let r=this.renderToScreen?null:t;e.setRenderTarget(r),this.clearColorOnly&&e.clear(!0,!1,!0),this.clear&&e.clear(),e.render(this.scene,this.camera),this.clearDepth&&e.clear(!1,!0,!1),this.hasTransmissionPass&&this.originalMaterials.forEach((i,n)=>{let s=this.scene.getObjectById(n);s&&(s.material=i)})}},Gpe=class{constructor(e,{depthBuffer:t=!0,stencilBuffer:r=!1,multisampling:i=0,frameBufferType:n=0}={}){this.renderer=e,this.helperStartIndex=0,this.copyPass=new R8,this.depthTexture=null,this.timer=new spe,this._width=1,this._height=1,this.passes=[],this.helperPasses=[],this.autoRenderToScreen=!0,this.inputBuffer=this.createBuffer(t,r,n,i,!0,"input buffer mrt"),this.inputBufferSingle=this.createBuffer(t,r,n,i,!1," input buffer single"),this.inputBufferSingle.texture.dispose(),this.inputBufferSingle.depthTexture.dispose(),this.inputBufferSingle.texture=this.inputBuffer.texture[0],this.inputBufferSingle.depthTexture=this.inputBuffer.depthTexture,this.outputBuffer=this.inputBuffer.clone(),this.outputBuffer.name="output buffer mrt",this.outputBufferSingle=this.createBuffer(t,r,n,i,!1,"output buffer single"),this.outputBufferSingle.texture.dispose(),this.outputBufferSingle.depthTexture.dispose(),this.outputBufferSingle.texture=this.outputBuffer.texture[0],this.outputBufferSingle.depthTexture=this.outputBuffer.depthTexture,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let t=this.inputBuffer,r=this.multisampling;r>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("creating new input buffer"),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e,!0,"new input buffer"),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){var t;if(this.renderer=e,e!==null){let r=e.getSize(new X),i=((t=e.getContext().getContextAttributes())==null?void 0:t.alpha)??!1,n=this.inputBuffer.texture[0].type;n===en&&e.outputEncoding===_t&&(this.inputBuffer.texture[0].encoding=_t,this.outputBuffer.texture[0].encoding=_t,this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("doing some kinda dispose??")),e.autoClear=!1,this.setSize(r.width,r.height,!1);for(let s of this.passes)s.initialize(e,i,n)}}replaceRenderer(e,t=!0){let r=this.renderer,i=r.domElement.parentNode;return this.setRenderer(e),t&&i!==null&&(i.removeChild(r.domElement),i.appendChild(e.domElement)),r}createDepthTexture(){let e=this.depthTexture=new Wp(this._width,this._height);return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=gc,e.type=Ku):e.type=mh,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,r,i,n,s){let a=this.renderer,o=a===null?new X:a.getDrawingBufferSize(new X),l={minFilter:Lt,magFilter:Lt,wrapS:Gr,wrapT:Gr,stencilBuffer:t,depthBuffer:e},h;return i>0?(h=new tr(o.width,o.height,l),h.samples=i):(n?(h=new _q(o.width,o.height,2,l),h.texture[1].type=Gp):h=new tr(o.width,o.height,l),h.depthTexture=new Wp(2048,2048),h.depthTexture.type=fs),r===en&&a!==null&&a.outputEncoding===_t&&(Array.isArray(h.texture)?h.texture.forEach(c=>c.encoding=_t):h.texture.encoding=_t),Array.isArray(h.texture)?h.texture.forEach((c,u)=>{c.name=`EffectComposer.Buffer ${n} ${u}`,c.generateMipmaps=!1}):(h.texture.name=`EffectComposer.Buffer ${n}`,h.texture.generateMipmaps=!1),h.name=s,h}addPass(e,t){var o;let r=this.passes,i=this.renderer,n=i.getDrawingBufferSize(new X),s=((o=i.getContext().getContextAttributes())==null?void 0:o.alpha)??!1,a;if(e.MRTCompatible&&(a=this.inputBuffer.texture[0].type),e.MRTCompatible||(a=this.inputBuffer.texture.type),e.setRenderer(i),e.setSize(n.width,n.height),e.initialize(i,s,a),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?r.splice(t,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){let l=this.createDepthTexture();for(e of r)e.setDepthTexture(l)}else e.setDepthTexture(this.depthTexture)}setHelperStartIndex(e){this.helperStartIndex=e}removePass(e){let t=this.passes,r=t.indexOf(e);if(r!==-1&&t.splice(r,1).length>0){if(this.depthTexture!==null){let i=(n,s)=>n||s.needsDepthTexture;t.reduce(i,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){let e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let t=this.renderer,r=this.copyPass,i=this.inputBuffer,n=this.outputBuffer,s=this.inputBufferSingle,a=this.outputBufferSingle,o=!1,l,h,c,u;e===void 0&&(e=this.timer.update().getDelta());for(let d of this.passes)d.enabled&&(d.MRTCompatible?d.render(t,i,n,e,o):d.render(t,s,a,e,o),d.needsSwap&&(o&&(r.renderToScreen=d.renderToScreen,l=t.getContext(),h=t.state.buffers.stencil,h.setFunc(l.NOTEQUAL,1,4294967295),r.render(t,i,n,e,o),h.setFunc(l.EQUAL,1,4294967295)),c=i,u=s,i=n,s=a,n=c,a=u),d instanceof ipe?o=!0:d instanceof Ode&&(o=!1))}setSize(e,t,r){let i=this.renderer;if(this._width=e,this._height=t,e===void 0||t===void 0){let s=i.getSize(new X);e=s.width,t=s.height}i.setSize(e,t,r);let n=i.getDrawingBufferSize(new X);this.inputBuffer.setSize(n.width,n.height),this.outputBuffer.setSize(n.width,n.height),this.inputBufferSingle.setSize(n.width,n.height),this.outputBufferSingle.setSize(n.width,n.height);for(let s of this.passes)s.setSize(n.width,n.height)}reset(){let e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(let e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.inputBufferSingle!==null&&this.inputBufferSingle.dispose(),this.outputBufferSingle!==null&&this.outputBufferSingle.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},Hpe=new cr({name:"CombineMaterial",uniforms:{inputBufferA:new Se(null),inputBufferB:new Se(null)},blending:ti,depthWrite:!1,depthTest:!1,vertexShader:`
varying vec2 vUv;
void main() {
    gl_Position = vec4(position.xy, 1.0, 1.0);
    vUv = position.xy * 0.5 + 0.5;
}
`,fragmentShader:`
    varying vec2 vUv;
    uniform sampler2D inputBufferA;
    uniform sampler2D inputBufferB;

    // TODO: Why do we need these when postpro of framemode is enabled???
    layout(location = 1) out vec4 gVelocity;

    void main() {
	vec4 resA = texture2D(inputBufferA, vUv);
	vec4 resB = texture2D(inputBufferB, vUv);
    float a = resA.a + resB.a * ( 1.0 - resA.a );

	vec4 res;
	res.rgb =  resA.rgb + (resB.rgb * (1.0 - resA.a));
	res.a = resA.a + resB.a * (1.0 - resA.a);
	gl_FragColor = res;
    gVelocity = vec4(0.0);
    }
`}),Wpe=class extends An{constructor(e){super("HelperPass",void 0,e),this.MRTCompatible=!1,this.fullscreenMaterial=Hpe,this.helperPass=new z8(!1,void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperPass.renderToScreen=!1,this.helperPassOnTop=new z8(!1,void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this.helperPassOnTop.renderToScreen=!1;let t=new Ik({preset:Tu.LOW,edgeDetectionMode:Gy.COLOR});this.effectPass=new Y3(this.camera,t),this.rt=new tr(10,10,{minFilter:Lt,magFilter:Lt,wrapS:Gr,wrapT:Gr,depthBuffer:!0})}setSize(e,t){this.rt.setSize(e,t),this.effectPass.setSize(e,t)}set sceneHelpers(e){this.helperPass.setScene(e)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(e){this.helperPassOnTop.setScene(e)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}setCamera(e){this.helperPass.setCamera(e),this.helperPassOnTop.setCamera(e)}initialize(e,t,r){super.initialize(e,t,r),this.effectPass.initialize(e,t,r)}dispose(){super.dispose(),this.rt.dispose(),this.effectPass.dispose()}render(e,t,r){this.rt.depthTexture=t.depthTexture;let i=e.getClearAlpha();e.setClearAlpha(0),this.helperPass.clearDepth=!0,this.helperPass.clearColorOnly=!0,this.helperPass.render(e,this.rt),this.helperPassOnTop.render(e,this.rt),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.rt,r),this.fullscreenMaterial.uniforms.inputBufferA.value=r.texture,this.fullscreenMaterial.uniforms.inputBufferB.value=t.texture,e.setClearAlpha(i),e.setRenderTarget(null),e.clear(),e.render(this.scene,this.camera)}},qpe=`#define GLSLIFY 1
#include <skinning_pars_vertex>
out vec3 n;void main(){
#include <beginnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <defaultnormal_vertex>
#include <begin_vertex>
#include <skinning_vertex>
vec4 view_space=viewMatrix*modelMatrix*vec4(transformed,1.0);gl_Position=projectionMatrix*view_space;n=normalize(transformedNormal);}`,Xpe=`#define GLSLIFY 1
in vec3 n;void main(){gl_FragColor=vec4(n,1.0);}`,Ype=`#define GLSLIFY 1
out vec2 v_uv;void main(){v_uv=uv;gl_Position=vec4(position.xy,1.0,1.0);}`,Qpe=`#define GLSLIFY 1
in vec2 v_uv;const float pi=3.14159265;const float num_steps=4.0;const float num_directions=4.0;uniform float near;uniform float far;uniform float fov;uniform vec4 proj_info;uniform bool is_ortho;uniform vec2 resolution;uniform float radius_of_influence;uniform float radius_in_screen_space;uniform float exponent;uniform vec3 ao_color;uniform float bias;uniform sampler2D texture_depth;uniform sampler2D texture_normals;uniform sampler2D texture_blue_noise;uniform sampler2D texture_blue_noise_in_disk;uniform sampler2D texture_color_pass;uniform int frame_index;uniform bool fog_enabled;uniform float fog_near;uniform float fog_far;vec3 uv_to_view_space(vec2 uv,float eye_z){return vec3((uv*proj_info.xy+proj_info.zw)*(is_ortho ? 1.0 : eye_z),eye_z);}float linearize_depth(float depth_sampled){float z=is_ortho ? depth_sampled : depth_sampled*2.0-1.0;return mix((2.0*near*far)/(far+near-z*(far-near)),near+z*(far-near),float(is_ortho));}vec3 get_view_position(vec2 uv_coords){float linear_depth=linearize_depth(texture(texture_depth,uv_coords).x);return uv_to_view_space(uv_coords,linear_depth);}vec3 min_difference(vec3 p,vec3 right,vec3 left){vec3 v1=right-p;vec3 v2=p-left;return(dot(v1,v1)<dot(v2,v2))? v1 : v2;}vec3 rebuild_normal(in vec2 uv,in vec3 p){vec2 one_over_resolution=1.0/resolution;vec3 r=get_view_position(uv+vec2(one_over_resolution.x,0));vec3 l=get_view_position(uv+vec2(-one_over_resolution.x,0));vec3 t=get_view_position(uv+vec2(0,one_over_resolution.y));vec3 b=get_view_position(uv+vec2(0,-one_over_resolution.y));return normalize(cross(min_difference(p,r,l),min_difference(p,t,b)));}float falloff(float distance_squared){float neg_inv_r2=-1.0/(radius_of_influence*radius_of_influence);return distance_squared*neg_inv_r2+1.0;}float ao_contribution(vec3 P,vec3 N,vec3 S){vec3 to_sample=S-P;float norm_squared=dot(to_sample,to_sample);float norm=sqrt(norm_squared);float cos_theta=dot(N,to_sample)/norm;return clamp(cos_theta-bias,0.0,1.0)*clamp(falloff(norm_squared),0.0,1.0);}float compute_ambient_occlusion(vec2 uv,float radius_in_screen_space,vec3 pc,vec3 view_space_n){vec2 one_over_resolution=1.0/resolution;ivec2 noise_uv=ivec2(int(mod(gl_FragCoord.x,128.0)),int(mod(gl_FragCoord.y,128.0)));float noise=texelFetch(texture_blue_noise,noise_uv,0).r;noise=fract(noise+0.61803398875*float(frame_index));float theta=noise*2.0*3.1415;float ct=cos(theta);float st=sin(theta);float step_size=radius_in_screen_space/(num_steps+1.0);const float angle_step=2.0*pi/num_directions;float contribution=0.0;for(int i=0;i<int(num_directions);++i){float current_pixel=step_size+1.0;for(int j=0;j<int(num_steps);++j){int index=i*int(num_steps)+j;vec2 blue_noise_sample=texelFetch(texture_blue_noise_in_disk,ivec2(index,0),0).rg;vec2 disk_point;disk_point.x=blue_noise_sample.x*ct-blue_noise_sample.y*st;disk_point.y=blue_noise_sample.x*st+blue_noise_sample.y*ct;vec2 sample_direction=disk_point;vec2 snapped_uv=round(current_pixel*sample_direction)*one_over_resolution+uv;vec3 ps=get_view_position(snapped_uv);current_pixel+=step_size;contribution+=ao_contribution(pc,view_space_n,ps);}}float mult=1.0/(1.0-bias);contribution*=mult/(num_directions*num_steps);return clamp(1.0-contribution*2.0,0.0,1.0);}
#define USE_GBUFFER_NORMALS
void main(){vec3 view_space_p=get_view_position(v_uv);
#ifdef USE_GBUFFER_NORMALS
vec3 view_space_n=texture(texture_normals,v_uv).rgb;view_space_n.z*=-1.0;
#else
vec3 view_space_n=-rebuild_normal(v_uv,view_space_p);
#endif
float radius_ss=radius_in_screen_space/(is_ortho ? 1.0 : view_space_p.z);float ao=compute_ambient_occlusion(v_uv,radius_ss,view_space_p,view_space_n);float final=pow(ao,exponent);if(view_space_p.z>=far){final=1.0;}vec3 color=mix(ao_color,vec3(1.0),final);if(fog_enabled){float fog_factor=smoothstep(fog_near,fog_far,view_space_p.z);color=mix(color,vec3(1.0),fog_factor);}gl_FragColor=vec4(color,1.0);}`,Zpe=`#define GLSLIFY 1
out vec2 v_uv;void main(){gl_Position=vec4(position.xy,1.0,1.0);v_uv=uv;}`,Kpe=`#define GLSLIFY 1
in vec2 v_uv;uniform sampler2D texture_ao_lrez;uniform sampler2D texture_depth_lrez;uniform sampler2D texture_depth_hrez;uniform float near;uniform float far;float linearize_depth(float depth_sampled){float z=depth_sampled*2.0-1.0;return(2.0*near*far)/(far+near-z*(far-near));}vec2 nearest_depth_filter(in vec2 uv){vec2 resolution=vec2(textureSize(texture_depth_lrez,0));vec2 texel_size=1.0/resolution;vec2 offset=uv-0.5*texel_size;float d_hrez=texture(texture_depth_hrez,uv).r;float a=abs(d_hrez-texture(texture_depth_lrez,offset).r);float b=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,0.0)).r);float c=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(0.0,texel_size.y)).r);float d=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,texel_size.y)).r);float min_diff=min(a,min(b,min(c,d)));if(min_diff==a)return offset;if(min_diff==b)return offset+vec2(texel_size.x,0.0);if(min_diff==c)return offset+vec2(0.0,texel_size.y);if(min_diff==d)return offset+vec2(texel_size.x,texel_size.y);}void main(){
#ifdef DEBUG
float d_lrez=texture(texture_depth_lrez,v_uv).r;float d_hrez=texture(texture_depth_hrez,v_uv).r;float output_d=mix(linearize_depth(d_lrez)/far,linearize_depth(d_hrez)/far,step(0.5,v_uv.x));gl_FragColor=vec4(vec3(output_d),1.0);
#else
vec2 filtered_uv=nearest_depth_filter(v_uv);vec4 ao=texture(texture_ao_lrez,filtered_uv);gl_FragColor=vec4(ao.rgb,1.0);gl_FragColor=ao;
#endif
}`,d1=[[.478712,.875764],[-.337956,-.793959],[-.955259,-.028164],[.864527,.325689],[.209342,-.395657],[-.106779,.672585],[.156213,.235113],[-.413644,-.082856],[-.415667,.323909],[.141896,-.93998],[.954932,-.182516],[-.766184,.410799],[-.434912,-.458845],[.415242,-.078724],[.728335,-.491777],[-.058086,-.066401],[.20299,.686837],[-.808362,-.556402],[.507386,-.640839],[-.723494,-.22924],[.48974,.317826],[-.622663,.765301],[-.01064,.929347],[.663146,.647618],[-.096674,-.413835],[.525945,-.321063],[-.122533,.366019],[.195235,-.687983],[-.563203,.098748],[.418563,.561335],[-.378595,.800367],[.826922,.001024],[-.085372,-.766651],[-.92192,.183673],[-.590008,-.721799],[.167751,-.164393],[.032961,-.56253],[.6329,-.107059],[-.46408,.569669],[-.173676,-.958758],[-.242648,-.234303],[-.275362,.157163],[.382295,-.795131],[.562955,.115562],[.190586,.470121],[.770764,-.297576],[.237281,.93105],[-.666642,-.455871],[-.905649,-.298379],[.33952,.157829],[.701438,-.7041],[-.062758,.160346],[-.220674,.957141],[.642692,.432706],[-.77339,-.015272],[-.671467,.24688],[.158051,.062859],[.806009,.527232],[-.05762,-.247071],[.333436,-.51671],[-.550658,-.315773],[-.652078,.589846],[.008818,.530556],[-.210004,.519896]],$pe=new cr({vertexShader:qpe,fragmentShader:Xpe}),Lv=new cr({vertexShader:Zpe,fragmentShader:Kpe,uniforms:{texture_ao_lrez:new Se(null),texture_depth_lrez:new Se(null),texture_depth_hrez:new Se(null),near:new Se(null),far:new Se(null)}}),Jpe=class extends An{constructor(e,t){super("AmbientOcclusionPass",void 0,t),this.fogEnabled=!1,this.fogNear=1,this.fogFar=1e3,this.frameIndex=0,this._runHalfRes=!0,this._width=1,this._height=1;let r=1024,i=1024;this.gBuffer=new tr(r,i,{type:fs,depthTexture:new Wp(r,i),minFilter:Lt,magFilter:Lt}),this.depthBufferHighRes=new tr(r,i,{depthTexture:new Wp(r,i)}),this.aoBuffer=new tr(r,i,{minFilter:Lt,magFilter:Lt}),this.splineScene=e,this.splineCamera=t;let n=new Float32Array(d1.length*2);for(let a=0;a<d1.length;a++){let o=a*2;n[o+0]=d1[a][0],n[o+1]=d1[a][1]}this.blueNoiseInDiskTexture=new u3(n,d1.length,1,cR,fs),this.blueNoiseInDiskTexture.wrapS=ml,this.blueNoiseInDiskTexture.wrapT=ml,this.blueNoiseInDiskTexture.needsUpdate=!0,this.hbaoMaterial=new cr({vertexShader:Ype,fragmentShader:Qpe,uniforms:{near:new Se(null),far:new Se(null),fov:new Se(null),proj_info:new Se(new Ct),is_ortho:new Se(!1),resolution:new Se(new X),radius_of_influence:new Se(8),radius_in_screen_space:new Se(1),exponent:new Se(1),ao_color:new Se(new E),bias:new Se(.5),texture_depth:new Se(null),texture_normals:new Se(null),texture_blue_noise:new Se(null),texture_blue_noise_in_disk:new Se(this.blueNoiseInDiskTexture),frame_index:new Se(0),fog_enabled:new Se(!1),fog_near:new Se(1),fog_far:new Se(1e3)}}),this.radius=128,this.aoColor={r:0,g:0,b:0},this.bias=.5,this.hbaoMaterial.uniforms.texture_depth.value=this.gBuffer.depthTexture,this.hbaoMaterial.uniforms.texture_normals.value=this.gBuffer.texture,this.needsSwap=!0,this.aaBuffer=new tr(r,i,{minFilter:Lt,magFilter:Lt,wrapS:Gr,wrapT:Gr,depthBuffer:!1,type:fs});let s=new Ik({preset:Tu.ULTRA,edgeDetectionMode:Gy.COLOR});this.effectPass=new Y3(this.camera,s)}initialize(e,t,r){super.initialize(e,t,r),this.effectPass.initialize(e,t,r)}setBlueNoiseTexture(e){this.hbaoMaterial.uniforms.texture_blue_noise.value=e}setSize(e,t){this._width=e,this._height=t,this.depthBufferHighRes.setSize(e,t);let r=this._runHalfRes?.5:1,i=e*r,n=t*r;this.gBuffer.setSize(i,n),this.aoBuffer.setSize(i,n),this.hbaoMaterial.uniforms.resolution.value.set(i,n),this.aaBuffer.setSize(i,n),this.effectPass.setSize(i,n)}get runHalfRes(){return this._runHalfRes}set runHalfRes(e){this._runHalfRes=e,this.setSize(this._width,this._height)}setCamera(e){this.splineCamera=e}setScene(e){this.splineScene=e}render(e,t,r){this.splineScene.overrideMaterial=$pe;let i=this.splineCamera.layers.mask;if(this.splineCamera.layers.set(5),e.setRenderTarget(this.gBuffer),e.clear(),e.render(this.splineScene,this.splineCamera),e.setRenderTarget(this.depthBufferHighRes),e.clear(),e.render(this.splineScene,this.splineCamera),this.splineScene.overrideMaterial=null,this.splineCamera.layers.mask=i,this.hbaoMaterial.uniforms.radius_of_influence.value=this.radius,this.hbaoMaterial.uniforms.ao_color.value.set(this.aoColor.r,this.aoColor.g,this.aoColor.b),this.hbaoMaterial.uniforms.bias.value=this.bias,this.hbaoMaterial.uniforms.fog_enabled.value=this.fogEnabled,this.hbaoMaterial.uniforms.fog_near.value=this.fogNear,this.hbaoMaterial.uniforms.fog_far.value=this.fogFar,this.hbaoMaterial.uniforms.frame_index.value=this.frameIndex,this.frameIndex++,this.splineCamera.isPerspectiveCamera){this.hbaoMaterial.uniforms.near.value=this.splineCamera.perspCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.perspCamera.far;let n=this.splineCamera.perspCamera.projectionMatrix.elements,s=2/n[0],a=2/n[5],o=-(1-n[8])/n[0],l=-(1+n[9])/n[5];this.hbaoMaterial.uniforms.proj_info.value.set(s,a,o,l);let h=this.splineCamera.perspCamera.fov*(Math.PI/180),c=this.hbaoMaterial.uniforms.resolution.value.y/(Math.tan(h*.5)*2),u=this.hbaoMaterial.uniforms.radius_of_influence.value*.5*c;this.hbaoMaterial.uniforms.radius_in_screen_space.value=u,this.hbaoMaterial.uniforms.is_ortho.value=!1}else{this.hbaoMaterial.uniforms.near.value=this.splineCamera.orthoCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.orthoCamera.far;let n=this.splineCamera.orthoCamera.projectionMatrix.elements,s=2/n[0],a=2/n[5],o=-(1+n[12])/n[0],l=-(1-n[13])/n[5];this.hbaoMaterial.uniforms.proj_info.value.set(s,a,o,l);let h=.5*(this.hbaoMaterial.uniforms.resolution.value.y/a),c=this.hbaoMaterial.uniforms.radius_of_influence.value*h;this.hbaoMaterial.uniforms.radius_in_screen_space.value=c,this.hbaoMaterial.uniforms.is_ortho.value=!0}this.runHalfRes?(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aoBuffer),e.clear(),e.render(this.scene,this.camera),this.fullscreenMaterial=Lv,Lv.uniforms.texture_ao_lrez.value=this.aoBuffer.texture,Lv.uniforms.texture_depth_lrez.value=this.gBuffer.depthTexture,Lv.uniforms.texture_depth_hrez.value=this.depthBufferHighRes.depthTexture,e.setRenderTarget(e.aoRenderTarget),e.clear(),e.render(this.scene,this.camera)):(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aaBuffer),e.clear(),e.render(this.scene,this.camera),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.aaBuffer,e.aoRenderTarget))}dispose(){this.gBuffer.dispose(),this.depthBufferHighRes.dispose(),this.aoBuffer.dispose()}},efe=`
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,tfe=`
uniform sampler2D tInput;
uniform sampler2D tMap;
uniform vec2 resolution;
varying vec2 vUv;

uniform vec2 uResolution;
uniform vec2 uCoords;

// Draws a rectangle at center <st> with size <size>
float rectangle(vec2 st, vec2 size) {
    size = vec2(0.5) - size * 0.5;
    vec2 uv = vec2(step(size.x, st.x), step(size.y, st.y));
    uv *= vec2(step(size.x, 1.0 - st.x), step(size.y, 1.0 - st.y));

    return uv.x * uv.y;
}

uniform vec2 uSize;
uniform float uScale;
uniform float uDPR;
uniform float uCurrent;
uniform vec3 uSceneColor;

void main() {
    vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
    screenUv *= 1.0 / uDPR;

    vec2 center = vec2(0.5, -0.5);
    vec2 outsideUv = screenUv;
    outsideUv += center;
    outsideUv -= uCoords.xy / uResolution.xy;
    outsideUv = (outsideUv - 0.5) + 0.5;
    outsideUv -= center;
    vec2 s = (uSize / uResolution) * uScale;
    float isOutside = 1.0 - rectangle(outsideUv, s);
    
    vec2 mid = vec2(0.5);
    vec2 insideUv = (screenUv - mid + s * mid) / s;
    vec4 background = texture2D(tInput, screenUv);
    vec4 image = texture2D(tMap, insideUv);
    gl_FragColor = mix(image, background, isOutside);
}
`,rfe=class extends ao{constructor(){super(new cr({vertexShader:efe,fragmentShader:tfe,uniforms:{tInput:new Se(null),tMap:new Se(null),uResolution:new Se(new X),uSize:new Se(new X),uCoords:new Se(new X),uScale:new Se(1),uSceneColor:new Se(new lt(16711680)),uDPR:new Se(1),uCurrent:new Se(0)}}),"tInput"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tMap.value}set texture(e){this.uniforms.tMap.value=e}},ife=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,nfe=`
uniform sampler2D toScene;
uniform sampler2D fromScene;
uniform vec2 resolution;

uniform vec2 uResolution;
uniform float uDPR;

uniform float mixRatio;
uniform sampler2D tMixTexture;
uniform int useTexture;
uniform float threshold;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( fromScene, screenUv );
	vec4 texel2 = texture2D( toScene, screenUv );

	if (useTexture==1) {
		
		vec4 transitionTexel = texture2D( tMixTexture, screenUv );
		float r = mixRatio * (1.0 + threshold * 2.0) - threshold;
		float mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);
		
		gl_FragColor = mix( texel1, texel2, mixf );
	} else {
		
		gl_FragColor = mix( texel1, texel2, mixRatio );
		
	}
}
`,sfe=[],afe=class extends ao{constructor(){super(new cr({vertexShader:ife,fragmentShader:nfe,uniforms:{toScene:new Se(null),fromScene:new Se(null),uResolution:new Se(new X),uDPR:new Se(1),mixRatio:new Se(0),threshold:new Se(.1),useTexture:new Se(0),tMixTexture:{value:sfe[0]}}}),"toScene"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.fromScene.value}set texture(e){this.uniforms.fromScene.value=e}};function jT(e,t){return t&&t.enabled&&e.push(t.effect),e}var ofe=e=>Object.values(jt).includes(e)?e:jt.NORMAL,lfe=class extends Ni{constructor(e){super(),this.postprocessingState=B3.defaultData,this._scene=new Bh,this._camera=new $i,this.effects=new Map,this.blueNoiseTexture=new u3,this._renderToScreen=!0,this.clock=new c$,this.renderer=e,this.debug=!1,this.effects.set("bloom",new Epe),this.effects.set("chromaticAberration",new Lpe),this.effects.set("vignette",new Ipe),this.effects.set("noise",new Ope),this.effects.set("colorAverage",new Ppe),this.effects.set("hueSaturation",new Dpe),this.effects.set("brightnessContrast",new Tpe),this.effects.set("depthOfField",new Rpe),this.effects.set("pixelation",new Bpe),this.effectComposer=new Gpe(this.renderer),this.effectComposer.autoRenderToScreen=!1,this.opaquePass=new z8(!0,this.scene,this.camera),this.opaquePass.clear=!0,this.transmissionPass=new jpe(this.scene,this.camera,this.renderer),this.aoPass=new Jpe(this.scene,this.camera),this.taaPass=new Upe,this.taaPass.renderToScreen=!1,this.helperPass=new Wpe(this.camera),this.helperPass.renderToScreen=!1,this.overlayPass=new rfe,this.overlayPass.enabled=!1,this.sceneTransitionPass=new afe,this.sceneTransitionPass.enabled=!1,this._initCopyPass(),this._initPasses()}set overlayTexture(e){e!==void 0?(this.overlayPass.texture=e,this.overlayPass.enabled=!0):this.overlayPass.enabled=!1}get overlayTexture(){return this.overlayPass.texture}set sceneHelpers(e){this.helperPass.sceneHelpers=e}get sceneHelpers(){return this.helperPass.sceneHelpers}set sceneHelpersOnTop(e){this.helperPass.sceneHelpersOnTop=e}get sceneHelpersOnTop(){return this.helperPass.sceneHelpersOnTop}get scene(){return this._scene}set scene(e){this._scene=e,this.opaquePass.setScene(e),this.transmissionPass.setScene(e),this.aoPass.setScene(e)}get camera(){return this._camera}set camera(e){this._camera=e,this.opaquePass.setCamera(e),this.transmissionPass.setCamera(e),this.aoPass.setCamera(e),this.helperPass.setCamera(e)}updateRenderToScreen(){let e=!1;for(let t=this.effectComposer.passes.length-1;t>=0;t--){let r=this.effectComposer.passes[t];if(r.enabled===!0&&!e&&this._renderToScreen){r.renderToScreen=!0,e=!0;continue}r.renderToScreen=!1}}disableHelpers(){this.helperPass.enabled=!1,this.updateRenderToScreen()}enableHelpers(){this.helperPass.enabled=!0,this.updateRenderToScreen()}updateBlueNoiseTexture(e){this.blueNoiseTexture=new u3(e,128,128),this.blueNoiseTexture.wrapS=ml,this.blueNoiseTexture.wrapT=ml,this.blueNoiseTexture.minFilter=ur,this.blueNoiseTexture.magFilter=ur,this.blueNoiseTexture.needsUpdate=!0}setAmbientOcclusionParams(e,t,r,i,n,s,a,o){this.aoPass.enabled=e,this.aoPass.radius=t,this.aoPass.bias=r,this.aoPass.aoColor=i,this.aoPass.fogEnabled=n,this.aoPass.fogNear=s,this.aoPass.fogFar=a,this.aoPass.runHalfRes!==!o&&(this.aoPass.runHalfRes=!o)}setTransmissionPassEnabled(e){this.transmissionPass.enabled=e,this.opaquePass.hasTransmissionPass=e}_initPasses(){var e,t;if((e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.aoPass),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.effectComposer.addPass(this.taaPass),this.postprocessingState.enabled){let r=[this.effects.get("pixelation")].reduce(jT,[]);r.length>0&&(this.uvEffectPass=new Y3(this.camera,...r),this.uvEffectPass.renderToScreen=!1,this.effectComposer.addPass(this.uvEffectPass));let i=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(jT,[]);i.length>0&&(this.effectPass=new Y3(this.camera,...i),this.effectPass.renderToScreen=!1,this.effectComposer.addPass(this.effectPass))}this.effectComposer.addPass(this.overlayPass),this.effectComposer.addPass(this.sceneTransitionPass),this.effectComposer.addPass(this.helperPass)}_initCopyPass(){if(this._savePass)return;let e=new X;this.renderer.getDrawingBufferSize(e),this._rt=new tr(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:ml,wrapT:ml}),this._rt.samples=0,this._savePass=new R8(this._rt,!1),this._savePass.renderToScreen=!1}setCopyPass(e){this._rt=e,this._savePass=new R8(this._rt,!1),this.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){if(this._renderToScreen===e)return;let t=this.effectComposer;!t||(e===!0?t.removePass(this._savePass):t.addPass(this._savePass),this._renderToScreen=e,this.updateRenderToScreen())}set sceneTransitionFromTexture(e){e!==this.sceneTransitionPass.texture&&(e!==null?this.sceneTransitionPass.enabled=!0:(this.sceneTransitionPass.enabled=!1,this.updateRenderToScreen()),this.sceneTransitionPass.texture=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(e){let{enabled:t,...r}=e,i=!1;t!==this.postprocessingState.enabled&&(i=!0);for(let n of Object.entries(r)){let s=n[1],a=this.effects.get(n[0]);if(a){a.enabled!==s.enabled&&(i=!0),a.enabled=s.enabled;for(let[o,l]of Object.entries(s))o==="blendFunction"?a.blendFunction=ofe(l):a[o]=l}}this.postprocessingState=e,i&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(e,t,r,i){e instanceof Ct?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,t,r,i),this.effectComposer.outputBuffer.scissor.set(e,t,r,i));let n=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(n),this.effectComposer.outputBuffer.scissor.multiplyScalar(n),this.renderer.setScissor(e,t,r,i)}setScissorTest(e){this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e)}setViewport(e,t,r,i){e instanceof Ct?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,t,r,i),this.effectComposer.outputBuffer.viewport.set(e,t,r,i))}resize(e,t,r){if(this.effectComposer.setSize(e,t,r),this._rt){let i=this.renderer.getPixelRatio();this._rt.setSize(e*i,t*i)}}dispose(){var e,t;(e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.dispose()}},hfe=e=>`

// PCSS implementation based on:
// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/
// NOTE: This number affects how big the shadow blur can
// possibly get. Bigger number == bigger blur, but less precise results

const float  gPenumbraFilterSize = 80.0;
const int   gPenumbraSamples = ${e};
const int gShadowSamples = ${e};
const float gShadowSamplesRpc = 1.0f / float(gShadowSamples);

#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS > 0

        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];

        struct DirectionalLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];

    #endif

    #if NUM_SPOT_LIGHT_SHADOWS > 0

        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
        varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_SHADOWS ];

        struct SpotLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];

    #endif

    #if NUM_POINT_LIGHT_SHADOWS > 0

        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];

        struct PointLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
            float shadowCameraNear;
            float shadowCameraFar;
        };

        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];

    #endif

    /*
    #if NUM_RECT_AREA_LIGHTS > 0

        // TODO (abelnation): create uniforms for area light shadows

    #endif
    */

float computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)
{
    float penumbra = 1.0;
    float blockerDepthAvg = 0.0;
    float blockerCount = 0.0;

    #pragma unroll_loop_start
    for(int i = 0; i < gPenumbraSamples; i ++)
    {
        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;
        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );

        if(depth < compare + 0.0001)
        {
            blockerDepthAvg += depth;
            blockerCount++;
        }
    }
    #pragma unroll_loop_end

    if (blockerCount > 0.0)
    {
        blockerDepthAvg /= blockerCount;

        // Compute penumbra
        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);
        penumbra *= penumbra;
        penumbra *= 200.0 * penumbraSize[min(index, 5 - 1)]; // Magic number that affects how quickly the penumbra grows

        return clamp(penumbra, 0.00, 1.0);
    }
    return 0.0;
}

float vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)
{
    float shadow         = 0.0f;

    // NOTE: When using TAA, we should use screen space interleaved gradient noise
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);
    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);
    if (penumbra == -1.0) {
        return 1.0;
    }

    #pragma unroll_loop_start
    for (int i = 0; i < gShadowSamples; i++)
    {
        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;
        // Overall blurring offset
        vec2 offset = vogelSample * (shadowRadius * 2.);

        // Penumbra offset
        offset += vogelSample * (penumbra * texelScalar);

        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    }
    #pragma unroll_loop_end

    return shadow * gShadowSamplesRpc;
}


    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {

        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );

    }

    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {

        return unpackRGBATo2Half( texture2D( shadow, uv ) );

    }

    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){

        float occlusion = 1.0;

        vec2 distribution = texture2DDistribution( shadow, uv );

        float hard_shadow = step( compare , distribution.x ); // Hard Shadow

        if (hard_shadow != 1.0 ) {

            float distance = compare - distribution.x ;
            float variance = max( 0.00000, distribution.y * distribution.y );
            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality
            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed
            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );

        }
        return occlusion;

    }

    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {

        float shadow = 1.0;

        shadowCoord.xyz /= shadowCoord.w;
        shadowCoord.z += shadowBias;

        // if ( something && something ) breaks ATI OpenGL shader compiler
        // if ( all( something, something ) ) using this instead

        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
        bool inFrustum = all( inFrustumVec );

        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );

        bool frustumTest = all( frustumTestVec );

        if ( frustumTest ) {

        #if defined( SHADOWMAP_TYPE_PCF )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            float dx = texelSize.x;
            float dy = texelSize.y;

            vec2 uv = shadowCoord.xy;
            vec2 f = fract( uv * shadowMapSize + 0.5 );
            uv -= f * texelSize;

            shadow = (
                texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                          f.x ),
                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                          f.x ),
                     f.y )
            ) * ( 1.0 / 9.0 );

        #elif defined( SHADOWMAP_TYPE_VSM )

            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );

        #else // no percentage-closer filtering:

            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );

        #endif

        }

        return shadow;

    }

    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D
    // vector suitable for 2D texture mapping. This code uses the following layout for the
    // 2D texture:
    //
    // xzXZ
    //  y Y
    //
    // Y - Positive y direction
    // y - Negative y direction
    // X - Positive x direction
    // x - Negative x direction
    // Z - Positive z direction
    // z - Negative z direction
    //
    // Source and test bed:
    // https://gist.github.com/tschw/da10c43c467ce8afd0c4

    vec2 cubeToUV( vec3 v, float texelSizeY ) {

        // Number of texels to avoid at the edge of each square

        vec3 absV = abs( v );

        // Intersect unit cube

        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
        absV *= scaleToCube;

        // Apply scale to avoid seams

        // two texels less per square (one texel will do for NEAREST)
        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );

        // Unwrap

        // space: -1 ... 1 range for each square
        //
        // #X##         dim    := ( 4 , 2 )
        //  # #         center := ( 1 , 1 )

        vec2 planar = v.xy;

        float almostATexel = 1.5 * texelSizeY;
        float almostOne = 1.0 - almostATexel;

        if ( absV.z >= almostOne ) {

            if ( v.z > 0.0 )
                planar.x = 4.0 - v.x;

        } else if ( absV.x >= almostOne ) {

            float signX = sign( v.x );
            planar.x = v.z * signX + 2.0 * signX;

        } else if ( absV.y >= almostOne ) {

            float signY = sign( v.y );
            planar.x = v.x + 2.0 * signY + 2.0;
            planar.y = v.z * signY - 2.0;

        }

        // Transform to UV space

        // scale := 0.5 / dim
        // translate := ( center + 0.5 ) / dim
        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );

    }

    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {

        float shadow = 1.0;
        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );

        // for point lights, the uniform @vShadowCoord is re-purposed to hold
        // the vector from the light to the world-space position of the fragment.
        vec3 lightToPosition = shadowCoord.xyz;

        // dp = normalized distance from light to fragment position
        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?
        compare += shadowBias;

        // bd3D = base direction 3D
        vec3 bd3D = normalize( lightToPosition );

        vec2 halton = haltonSequence[frameIndex];
        float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
        float temporalAngle  = temporalOffset * PI2;

        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )
            for (int i = 0; i < gShadowSamples; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                // NOTE: Removed for now
                // Penumbra offset
                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * gShadowSamplesRpc;

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
            for (int i = 0; i < 16; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * (1.0 / 16.0);
        #else // no percentage-closer filtering

            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );

        #endif

    }

#endif
`,ufe=At.lights_fragment_begin,cfe=At.shadowmask_pars_fragment,VT=null,dfe=e=>{switch(e){case"low":return 8;case"medium":return 16;case"high":return 32;default:return 16}},pfe=(e="medium")=>{if(VT===e)return!1;VT=e;let t=dfe(e);At.shadowmap_pars_fragment=hfe(t);let r=ufe.slice();r=r.replace("getShadow( spotShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX + 3, spotShadowMap[ i ]"),r=r.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),At.lights_fragment_begin=r;let i=cfe.slice();return i=i.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),At.shadowmask_pars_fragment=i,!0},ffe=`
attribute vec3 randomColor;
varying vec3 vNormal;
flat out vec3 vColor;

void main()
{
vNormal = normal;
vColor = randomColor;
gl_Position = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
}
`,mfe=`
uniform float depthContrast;
varying vec3 vNormal;
flat in vec3 vColor;
void main()
{
vec3 normal = (normalize(vNormal)).rgb;

float contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;

vec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);
gl_FragColor = vec4(resultColor, vColor.r);
}
`,fx=new cr({vertexShader:ffe,fragmentShader:mfe,uniforms:{depthContrast:{value:1}}}),GT=new ui,gfe=class extends LR{constructor(e){super(e),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new X,this.pipeline=new lfe(this),this.dummyCamra=new $i,this.sceneTransitionDuration=0,this.sceneTransitionTimeRemaining=-1,this.isXRCopyPassSet=!1,this.clear=(n=!0,s=!0,a=!0)=>{let o=this.getContext(),l=0;n&&(l|=o.COLOR_BUFFER_BIT),s&&(l|=o.DEPTH_BUFFER_BIT),a&&(l|=o.STENCIL_BUFFER_BIT),o.clear(l),o.clearBufferfv(o.COLOR,1,[0,0,0,1])},this.autoClear=!1;let t=this.setPixelRatio.bind(this),r=this.setSize.bind(this);this.shadowMap.enabled=!0,this.shadowMap.type=Lw;let i=this.getContext();if(i&&"drawingBufferColorSpace"in i)try{i.drawingBufferColorSpace="display-p3"}catch(n){console.warn(n)}this.setPixelRatio=n=>{this._pixelRatio!==n&&(this._pixelRatio=n,t(n))},this.setSize=(n,s,a=!0)=>{var o,l;(this.viewportWidth!==n||this.viewportHeight!==s)&&(this.viewportWidth=n,this.viewportHeight=s,r(n,s,a),(o=this.normalRenderTarget)==null||o.setSize(n*this._pixelRatio,s*this._pixelRatio),this._resizeTransmission(n,s),(l=this.transmissionDepthTarget)==null||l.setSize(n*this._pixelRatio/2,s*this._pixelRatio/2),this.pipeline.resize(n,s,a))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createAORenderTarget(){this.aoRenderTarget===void 0&&(this.aoRenderTarget=new tr(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:Lt,magFilter:Lt,wrapS:Gr,wrapT:Gr,depthBuffer:!1}))}_resizeTransmission(e,t){var r,i;(r=this.transmissionRenderTarget)==null||r.setSize(e*this._pixelRatio/(this.hdTransmission?1:2),t*this._pixelRatio/(this.hdTransmission?1:2)),(i=this.aoRenderTarget)==null||i.setSize(e*this._pixelRatio/1,t*this._pixelRatio/1)}get hdTransmission(){return ot.transmissionLod.value===1}set hdTransmission(e){ot.transmissionLod.value=e===!0?1:2,this._resizeTransmission(this.viewportWidth,this.viewportHeight)}createTransmissionRenderTarget(){this.transmissionRenderTarget===void 0&&(this.transmissionRenderTarget=new tr(this.viewportWidth*this._pixelRatio/(this.hdTransmission?1:2),this.viewportHeight*this._pixelRatio/(this.hdTransmission?1:2),{generateMipmaps:!0,minFilter:Vp,magFilter:Lt,wrapS:Gr,wrapT:Gr,depthBuffer:!1}),this.transmissionDepthTarget=new tr(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:ur,magFilter:ur,depthBuffer:!1}))}createNormalRenderTarget(){this.normalRenderTarget===void 0&&(this.normalRenderTarget=new tr(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:ur,magFilter:ur,type:fs,depthTexture:new Wp(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(e,t,r){this.normalRenderTarget&&(this.setClearColor(0),r.layers.enable(8),r.layers.disable(0),r.layers.disable(3),t.traverseEntity(i=>{i.layers.isEnabled(8)&&(i.copyPreviousMatrix=!1)}),this.setRenderTarget(this.normalRenderTarget),this.clear(),r instanceof $i?fx.uniforms.depthContrast.value=(r.far-r.near)/1e4:fx.uniforms.depthContrast.value=1,t.overrideMaterial=fx,this.render(t,r),this.setClearColor(t.bgColor,t.bgColor.a),this.setRenderTarget(null),t.overrideMaterial=e.wireframeState?F8:null,r.layers.enable(0),r.layers.enable(3),t.traverseEntity(i=>{i.layers.isEnabled(8)&&(i.copyPreviousMatrix=!0)}))}renderSplineSceneWithDummyCamera(e,t,r=1){this.dummyCamra.updateCameraState(t.dataPatched);let i=t.height,n=t.width,s=this.viewportWidth/this.viewportHeight;n<i?n=i*s:i=n/s,this.dummyCamra.setViewplaneSize(n,i);for(let a=0;a<r;a++)this.renderSplineScene(e,this.dummyCamra)}renderSplineScene(e,t,{sceneHelpers:r=void 0,sceneHelpersOnTop:i=void 0,overrideTransmission:n=void 0,overrideNormal:s=void 0}={}){let a=e instanceof Yb?e.activePage:e,o=a.visible;a.visible=!0;let l=a.scene;this.xr.enabled&&(this.isXRCopyPassSet===!1&&this.getRenderTarget()!==null&&(this.pipeline.setCopyPass(this.getRenderTarget()),this.isXRCopyPassSet=!0),this.xr.updateCamera(t)),this.setClearColor(a.bgColor,a.bgColor.a),a.penumbraSizeArray.forEach((d,p)=>{ot.penumbraSize.value[p]=d}),ot.pixelRatioNode.value=this.getPixelRatio(),this.resolution.x!==0&&this.resolution.y!==0?ot.resolution.value.set(this.resolution.x,this.resolution.y):ot.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),s!==void 0?(ot.normalRenderTarget.value=s,ot.normalRenderTargetDepth.value=GT):l.needsNormal()&&(this.createNormalRenderTarget(),ot.normalRenderTarget.value=this.normalRenderTarget.texture,ot.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(l,a,t));let h=a.data.ao,c=h.occlusion;c&&(this.createAORenderTarget(),ot.aoRenderTarget.value=this.aoRenderTarget.texture),ot.aoEnabled.value=c,this.pipeline.setAmbientOcclusionParams(h.occlusion,h.radius,h.bias,a.aoColor,a.fog!==null,a.backupFog.near,a.backupFog.far,h.aoFullRes),this.pipeline.aoPass.setBlueNoiseTexture(this.pipeline.blueNoiseTexture);let u=!1;if(n!==void 0)ot.transmissionRenderTarget.value=n,ot.transmissionRenderTargetDepth.value=GT,this.pipeline.setTransmissionPassEnabled(!1);else{let d=l.needsTransmission();d&&(this.transmissionRenderTarget===void 0&&(u=!0),this.createTransmissionRenderTarget(),ot.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,ot.aspectRatio.value=Zue(this.viewportWidth,this.viewportHeight),ot.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(d)}t.layers.enable(3),t.layers.enable(8),this.pipeline.sceneHelpers=r,this.pipeline.sceneHelpersOnTop=i,this.pipeline.scene=a,this.pipeline.camera=t,u&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==a.postprocessing&&(this.pipeline.updatePostprocessing(a.postprocessing),!r&&!i&&this.pipeline.disableHelpers()),this.clearAlphaOverride!==void 0&&this.setClearAlpha(this.clearAlphaOverride),a.overrideMaterial=l.wireframeState?F8:null,this.pipeline.render(),ot.frameIndex.value=(ot.frameIndex.value+1)%16,t instanceof $i&&t.copyHistory(),a.visible=o}renderFromSceneForSceneTransitionPass(e,t,r){this.pipeline.renderToScreen=!1,this.pipeline.renderTarget,this.renderSplineScene(e,t),this.pipeline.sceneTransitionFromTexture=this.pipeline.renderTarget.texture,this.sceneTransitionDuration=r,this.sceneTransitionTimeRemaining=r,this.pipeline.renderToScreen=!0;let i=this.pipeline.sceneTransitionPass.uniforms;i.uDPR.value=window.devicePixelRatio,i.uResolution.value.set(this.domElement.width,this.domElement.height).divideScalar(window.devicePixelRatio)}_currentDispose(){var e,t,r,i,n,s;this._superDispose(),this.pipeline.dispose(),(e=this.aoRenderTarget)==null||e.dispose(),(t=this.transmissionRenderTarget)==null||t.dispose(),(r=this.transmissionDepthTarget)==null||r.dispose(),(i=this.normalRenderTarget)==null||i.dispose(),(s=(n=this.normalRenderTarget)==null?void 0:n.depthTexture)==null||s.dispose()}},Rk=class extends Bm(T$){constructor(e,t=15,r=10066329){super(e,t,r),this.object=e,this.added=!1,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,t){zm(this.object,Rk.geometryHelper,e,t)}},Bk=class extends Bm(E$){constructor(e,t=15,r=6710886){super(e,t,r),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,t){zm(this.object,Bk.geometryHelper,e,t)}},k8=class extends Bm(A$){constructor(e,t=6710886){super(e,t),this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,t){zm(this.object,k8.geometryHelper,e,t)}update(){if(this.object!==void 0){let e=k8._vector,t=this.object.distance?this.object.distance:1e3,r=t*Math.tan(this.object.angle);this.cone.scale.set(r,r,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let i=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let n=0,s=this.cone.material.length;n<s;n++)this.cone.material[n].color.set(i);else this.cone.material.color.set(i)}}},zk=k8;zk._vector=new E;function vfe(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}var kk=class extends Vb(h$,Rk){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.top=1250,i.bottom=-1250,i.right=1250,i.left=-1250,i.near=-1e4,i.far=2500;let n=new g3(this.shadow.camera);n.visible=!1,this.gizmos.shadowmap=n}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof g3&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t);let r=e.depth!==void 0&&e.depth!==this.shadow.camera.far||e.size!==void 0&&e.size/2!==this.shadow.camera.right;e.size!==void 0&&vfe(this,e.size),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),e.penumbraSize!==void 0&&t.scene.markPenumbraSizeDirty(),r&&this.update()}},HT=new E,WT=new E,qT=new Et,Nk=class extends Vb(s$,zk){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.fov=Tt.RAD2DEG*2*this.angle,i.aspect=1,i.near=100,i.far=2500;let n=new g3(this.shadow.camera);n.visible=!1,this.gizmos.shadowmap=n,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof g3&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),WT.setFromMatrixPosition(this.matrixWorld),qT.setFromRotationMatrix(this.matrixWorld),HT.copy(this.up).applyQuaternion(qT).negate().multiplyScalar(this.distance),this.target.position.copy(WT).add(HT),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.angle!==void 0&&(this.angle=e.angle),e.penumbra!==void 0&&(this.penumbra=e.penumbra),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.penumbraSize!==void 0&&t.scene.markPenumbraSizeDirty(),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},Uh=class extends Mb(Bh){constructor(e,t){super(),this.data=t,this.bgColor=new Xn(1,1,1,1),this.fog=null,this.backupFog=new PR(16777215,.1,2e3),this.fogUseBGColor=!1,this.isActive=!1,this.aoColor=new lt,this.penumbraSizeArrayCache=null,this.super_Entity(e,t),this.personalCamera=new $i(Cf,{...hm.defaultData,...t.camera,name:"Personal Camera"}),this.personalCamera.objectHelper.visible=!1,this.add(this.personalCamera),this.activeCamera=this.personalCamera,this.ambientLight=new i$(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.ambientLight.removeFromParent(),this.add(this.ambientLight)}get scene(){return this.parent}get postprocessing(){return this.data.postprocessing}updateVisible(){}setBackgroundColor(e){this.bgColor=e,this.fogUseBGColor===!0&&(this.backupFog.color=e)}updateAmbientLight(e,t){e.color!==void 0&&(this.ambientLight.color=xn(e.color,t)),e.intensity!==void 0&&(this.ambientLight.intensity=e.intensity),e.enabled!==void 0&&(e.enabled?this.add(this.ambientLight):this.remove(this.ambientLight))}onDeactive(){this.isActive=!1}onActive(e){this.isActive=!0,e.fog=this.fog,this.updateShadow(this.data.shadow)}forceMaterialsUpdate(){this.traverseEntity(e=>{if(e instanceof Af)if(Array.isArray(e.material))for(let t of e.material)t.needsUpdate=!0;else e.material.needsUpdate=!0,e.material.dispose()})}updateShadow(e){e.softShadowQuality!==void 0&&this.isActive&&pfe(e.softShadowQuality)&&this.forceMaterialsUpdate()}updateFog(e,t){if(e.enabled?this.fog=this.backupFog:this.fog=null,this.isActive){let r=this.scene;r.fog=this.fog}this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=xn(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}updateAo(e,t){e.aoColor!==void 0&&(this.aoColor=xn(e.aoColor,t))}updateByOp(e,t,r,i){super.updateByOp(e,t,r,i);let n=t;qs(e.path,["fog"])?this.updateFog(n.fog,r.shared):qs(e.path,["ao"])?this.updateAo(n.ao,r.shared):qs(e.path,["ambient"])?this.updateAmbientLight(n.ambient,r.shared):qs(e.path,["shadow"])&&this.updateShadow(n.shadow)}updateState(e,t){this.updateState_Entity(e,t),e.backgroundColor!==void 0&&this.setBackgroundColor(xn(e.backgroundColor,t.shared)),e.fog!==void 0&&this.updateFog(e.fog,t.shared),e.ambient!==void 0&&this.updateAmbientLight(e.ambient,t.shared),e.ao!==void 0&&this.updateAo(e.ao,t.shared),e.shadow!==void 0&&this.updateShadow(e.shadow)}raycast(e,t){super.raycast(e,t)}switchActiveCamera(e){e&&e.isDescendantOf(this)&&(this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1)}get playCamera(){var e;return((e=this.scene)==null?void 0:e.find(this.data.publish.playCamera))??this.personalCamera}switchToPlayCamera(){this.switchActiveCamera(this.playCamera)}get penumbraSizeArray(){return this.penumbraSizeArrayCache===null&&this.updatePenumbraSizeArray(),this.penumbraSizeArrayCache}updatePenumbraSizeArray(){this.penumbraSizeArrayCache=new Array(5).fill(.5);let e=0,t=0;this.traverseEntity(r=>{if(!r.visible)return!0;r instanceof kk&&r.visible&&e<3&&(this.penumbraSizeArrayCache[e]=r.data.penumbraSize,e+=1),r instanceof Nk&&r.visible&&e<5-3&&(this.penumbraSizeArrayCache[3+t]=r.data.penumbraSize,t+=1)})}raycastWithClones(e){let t=[],r=i=>{for(let n of i.children){let s=n.cloner;Gt.is(n)&&(n.visible||s!=null&&s.object.data.visible)&&((Ma(n)||D8(n)&&this.scene.enableHelpers&&n.objectHelper.visible)&&(e.intersectObject(n,!1,t),N8(n,e,t,!0)),r(n))}};return r(this),t}},yfe=class extends Vb(o$,Bk){constructor(e,t,r){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let i=this.shadow.camera;i.fov=90,i.aspect=1,i.near=100,i.far=2500;let n=new E(-i.far+this.position.x,-i.far+this.position.y,-i.far+this.position.z),s=new E(i.far+this.position.x,i.far+this.position.y,i.far+this.position.z),a=new qr(n,s),o=new v3(a,new lt(16755200));o.visible=!1,this.gizmos.shadowmap=o,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let e in this.gizmos){let t=this.gizmos[e];if(t instanceof v3){let r=this.shadow.camera,i=new E(-r.far+this.position.x,-r.far+this.position.y,-r.far+this.position.z),n=new E(r.far+this.position.x,r.far+this.position.y,r.far+this.position.z);t.box.set(i,n),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},xfe=class extends wn{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(e,t){let r=this.geometry.getAttribute("position");r!==void 0?Ib(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,e,t):super.updateEntityBoxSize(e,t)}},Wb=class extends wn{constructor(e,t,r){super(e,t,r),this._shapeId=null,this._context=r}updateState(e,t){super.updateState(e,t),this.updateShape()}updateShape(){var i;let e=this.data.geometry.extrusion.shape,t;if(e.type==="Custom"){let n=e.shapeId;if(n!==this._shapeId&&this.detachShape(),n){this._shapeId=n;let s=this._context.scene.find(n);s!=null&&s.data&&(s.attachedPaths.add(this),t=(i=s.geometry.userData)==null?void 0:i.shape),t||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let n;switch(e.type){case"Rectangle":n=Nz;break;case"Ellipse":n=Db;break;case"Polygon":n=kz;break;case"Star":n=Fz;break;default:throw new Error(`Unknown shape type: ${e.type}`)}t=n.create({parameters:e}).userData.shape}let r=this.geometry;t&&r.inputs&&(r.inputs.shapeData=t,r.build(),this.attachedSurfaceCloners.forEach(n=>n.update()))}detachShape(){var e;this._shapeId!==null&&((e=this._context.scene.find(this._shapeId))==null||e.attachedPaths.delete(this))}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.updateShape(),this.refreshAttachedPaths(e)}updateTransformState(e){return super.updateTransformState(e)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.updateShape()}updateEntityBoxSize(e,t){let r=this.geometry.getAttribute("position");r!==void 0?Ib(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,e,t):super.updateEntityBoxSize(e,t)}},Mp=class extends km(Hd,Vy){constructor(e,t,r){super(),t.type==="Instance"&&typeof e=="string"&&(t=this.transformAssignData(t,r)),this.super_Entity(e,t),this.objectHelper.update()}get isComponentRoot(){return this.data.type==="Component"&&typeof this.identity=="string"}get isInstanceRoot(){return this.data.type==="Instance"&&typeof this.identity=="string"}transformAssignData(e,t){let r=U3.getComponentData({scene:t.scene.data,shared:t.shared.data},e.component);if(r){let i,n;for(let s of xh.rootOverrideProps)e[s]===void 0?(i===void 0&&(i={...e}),i[s]=r.data[s]):(n===void 0&&(n={}),n[s]=e[s],i===void 0&&(i={...e}),i[s]=zh.apply(r.data[s],e[s]));return this.overrideData=n,i}else return{..._n.defaultData,...e,...bl(_n.defaultData,xh.rootOverrideProps)}}updateByOp(e,t,r,i){let n;if(this.isInstanceRoot&&!i){if(t=this.transformAssignData(t,r),e.type===0&&e.path.length===0&&this.component)for(let s of xh.rootOverrideProps)s in e.props&&e.props[s]===void 0&&(n===void 0&&(n={...e,props:{...e.props}}),n.props[s]=this.component.data[s]);else if(e.type===0&&e.path.length>0&&xh.rootOverrideProps.includes(e.path[0])){let s=e.path[0];n===void 0&&(n={...e,path:[],props:{[s]:t[s]}})}}super.updateByOp(n??e,t,r,i)}updateState(e,t){this.updateState_Entity(e,t)}expandInstanceChildren(e){let t=this.data;if(this.component===void 0){let r=e.scene.find(t.component)??null,i=!1;if(r!==this.oldComponent){if(this.oldComponent){let n=0;for(let s of this.children)if(Gt.is(s))e.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(s),qb(s),n+=1;else break;this.children.splice(0,n)}i=!0}if(r){let n={};Fk(e,[this.uuid],t.overrides,this,r,r,0,i,n);for(let s of this.children)if(Gt.is(s)){let a=s.data;a.type==="Empty"&&a.animations&&s.traverseEntity(o=>{if(o instanceof wn&&o.isSkinnedMesh){let l=o.dataPatched;if(l.bones&&l.boneInverses){let h=l.bones.map(d=>e.scene.find(n[d])),c=l.boneInverses.map(d=>new Ae().fromArray(d)),u=new Nw(h,c);o.bind(u,o.bindMatrix)}}else o.matrixAutoUpdate=!0})}}this.oldComponent=this.component}}};function qb(e){if(e.component){let t=e.component.instances.indexOf(e);t>=0&&e.component.instances.splice(t,1);for(let r of e.children)Gt.is(r)&&qb(r)}}function XT(e,t,r,i){return e.component===t&&db(e.identity,i)?e.overrideData===r?2:1:0}function Fk(e,t,r,i,n,s,a,o,l){if(a>50)return!1;if(i.component!==n){if(i.component){let c=i.component.instances.indexOf(i);c>=0&&i.component.instances.splice(c,1)}n.instances.push(i),i.component=n}n instanceof Mp&&n.isInstanceRoot&&n.expandInstanceChildren(e);let h=0;for(let c of n.children)if(Gt.is(c)){let u=[...t,...typeof c.identity=="string"?[c.identity]:c.identity],d=z3.resolve(r,u,1);d!=null&&!(d instanceof ci)&&(Object.setPrototypeOf(d,ci.prototype),console.error("wrong prototype"));let p=null,f;if(!o){let m=i.children[h];if(p=Gt.is(m)?m:null,p!==null){let g=XT(p,c,d,u);f=g>=1?p.stateSelection:void 0,g!==2&&(p=null)}if(p===null&&(p=e.scene.findInstance(u)??null,p!==null)){let g=XT(p,c,d,u);if(f=g>=1?p.stateSelection:void 0,g!==2)p=null;else{let v=p.parent.children.indexOf(p);p.parent.children.splice(v,1),i.children.splice(h,0,p),p.parent===i?v<=h&&console.error("not possible"):(p.parent=i,p.matrixWorldNeedsUpdate=!0,p.resetBBoxNeedsUpdate(),p.updateVisible(),e.pendingDeletes.delete(p))}}}if(p===null){let m=d?zh.apply(c.data,d):c.data;xc.is(m.type)&&(m={...m,type:"Empty"}),p=wh.createEntity(u,m,e),p.overrideData=d,i.add(p),i.children.splice(i.children.length-1,1),i.children.splice(h,0,p),p.updateState(p.data,e),f&&p.changeSelectedState(f,e),e.scene.registerInstanceAndSetUuid(p)}if(p.isBone){let m=p.identity[p.identity.length-1];l[m]=p.uuid}h+=1,Fk(e,t,r,p,c,s,a+1,o,l)}if(!o){let c=h;for(;;){let u=i.children[h];if(Gt.is(u))e.pendingDeletes.add(u);else break;h+=1}i.children.splice(c,h-c)}return!0}var wfe=class extends km(DR,Vy){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update(),this.matrixAutoUpdate=!0}updateState(e,t){this.updateState_Entity(e,t)}};function bfe(e,t,r){let i;return t.geometry.type==="TextGeometry"?new Ak(e,t,r):(t.geometry.type==="SubdivGeometry"?i=new gm(e,t,r):t.geometry.type==="PathGeometry"?i=new Wb(e,t,r):t.geometry.type==="VectorGeometry"?i=new xfe(e,t,r):t.geometry.type==="BooleanGeometry"?i=new rf(e,t,r):i=new wn(e,t,r),i)}function Xb(e,t,r){return t.type==="Mesh"?bfe(e,t,r):t.type==="Empty"?new vm(e,t):t.type==="Bone"?new wfe(e,t):t.type==="Page"?new Uh(e,t):t.type==="PointLight"?new yfe(e,t,r):t.type==="SpotLight"?new Nk(e,t,r):t.type==="DirectionalLight"?new kk(e,t,r):t.type==="Component"||t.type==="Instance"?new Mp(e,t,r):xc.is(t.type)?new $i(e,t):(console.error(t),new vm(e,t))}wh.createEntity=Xb;function _fe(e,t,r){let i=Xb(e.identity,t,r),n=e.children,s=e.attachedPaths,a=e.parent,o=e.component,l=e.instances,h=e.overrideData,c=e.uuid,u=e.stateSelection;e.dispose();for(let d of Object.keys(e))delete e[d];Object.setPrototypeOf(e,Object.getPrototypeOf(i));for(let d of Object.keys(i))e[d]=i[d];e.children=[...e.children,...n],e.attachedPaths=s,e.parent=a,e.component=o,e.instances=l,e.uuid=c,e.overrideData=h,e.updateState(e.data,r),u&&e.changeSelectedState(u,r),e.resetBBoxNeedsUpdate()}wh.changeEntityProptotype=_fe;wh.Cloner=La;function Cfe(e,t,r,i){e.updateByOp(t,r,i,!1)}function YT(e,t){let r=!1,i=t.getLayersOfType("transmission"),n=t.getLayersOfType("outline");return n.length>0&&(e.layers.set(8),i.length>0&&e.layers.enable(3),r=!0,jb(e),Ub(e)),i.length===0&&n.length===0&&e.layers.set(0),e instanceof Af&&e.needsAO&&e.layers.enable(5),r}function QT(e,t){if(!t.layers)return!1;let r=!1,i=t.getLayersOfType("transmission").filter(s=>s.data.visible),n=t.getLayersOfType("outline").filter(s=>s.data.visible);return i.length>0&&(e.layers.set(3),n.length>0&&e.layers.enable(8),r=!0),i.length===0&&n.length===0&&e.layers.set(0),e.needsAO&&e.layers.enable(5),r}function Sfe(e){let t=!1;return e.traverseEntity(r=>{if(r instanceof Af)if(Array.isArray(r.material))for(let i=0;i<r.material.length;i++)YT(r,r.material[i])&&(t=!0);else YT(r,r.material)&&(t=!0)}),t}function Mfe(e){let t=!1;return e.traverseEntity(r=>{if(r instanceof Af)if(Array.isArray(r.material))for(let i=0;i<r.material.length;i++)QT(r,r.material[i])&&(t=!0);else QT(r,r.material)&&(t=!0)}),t}var Afe=new QR,Efe=new Ae,Tfe=new cf;function N8(e,t,r,i=!1){let n=e.cloner;if(n)for(let s of n.children){let a=Efe.copy(s.matrixWorld).invert(),o=Tfe.copy(t.ray).applyMatrix4(a),l=e.matrixWorld;o.applyMatrix4(l);let h=Afe;h.set(o.origin,o.direction),h.near=t.near,h.far=t.far;let c=h.intersectObject(e,!1);c.length>0&&r.push({...c[0],object:i?s:e})}}var Lfe=class{constructor(){this._constraints=new Map}setConstraint(e,t){t===null?this._constraints.delete(e):this._constraints.set(e,t)}removeDependencies(e){this._constraints.delete(e)}applyConstraints(e){let t=new Set;this._constraints.forEach((r,i)=>{let n=[i,r],s=r;for(;this._constraints.has(s);)s=this._constraints.get(s),t.has(s)||n.push(s);for(let a=n.length-2;a>=0;a--)if(!t.has(n[a])){let o=e.find(n[a]);o?o.applyPathSnapping(e):console.warn(`missing entity ${n[a]}`),t.add(n[a])}})}findDependency(e,t){let r=e;for(;this._constraints.has(r);)if(r=this._constraints.get(r),r===t)return!0;return!1}},F8=new Lm;F8.wireframe=!0;var ZT=new E,Yb=class extends Bh{constructor(e,t){super(),this.data=e,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new Lfe,this.errorPage=new Uh("fdasfa",{...ef.defaultData,name:""}),this.invisibleObjects=new vm("jflkdsafjasdifjaslk",{...a8.defaultData,visible:!1,name:"buildin invisible"}),this.needsRecomputeInstances=!1,this.init(e,t),this.matrixAutoUpdate=!1}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=Mfe(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=Sfe(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(e){let t=e.identity.join("-"),r=this.entityIdentityToEntity[t];r&&(e.uuid=r.uuid),this.entityIdentityToEntity[t]=e,this.entityByUuid[e.uuid]=e}markPenumbraSizeDirty(){for(let e of this.children)e instanceof Uh&&(e.penumbraSizeArrayCache=null)}findInstance(e){return this.entityIdentityToEntity[e.join("-")]}get bgColor(){return this.activePage.bgColor}get postprocessing(){return this.activePage.data.postprocessing}getWithSortKey(e){let t=this.find(e);if(t===void 0)return;let r=[],i=t;for(;i!==this;){let n=i;i=i.parent;let s=i.children.indexOf(n);r.splice(0,0,s)}return{entity:t,sortKey:r}}getAllSorted(e){let t=[];for(let r of e){let i=this.getWithSortKey(r.id);i!==void 0&&t.push(i)}return t.sort((r,i)=>eoe(r.sortKey,i.sortKey)),t.map(r=>r.entity)}nonExistOrDescendantOf(e,t){let r=this.find(e);if(r===void 0)return!0;for(;r;){if(r.uuid===t)return!0;r=r.parent}return!1}find(e){if(this.activePage&&this.activePage.personalCamera.parent){if(e==="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera")return this.activePage.personalCamera;if(e===Cf)return this.activePage.personalCamera}if(e===""||e===void 0)return;let t=this.entityByUuid[e];return t===void 0?this.getObjectByProperty("uuid",e):t}debugEnsureEntity(e){let t=this.find(e);if(t){if(Array.isArray(t.identity)&&this.findInstance(t.identity)===void 0){console.error("not found instance");debugger}}else{console.error("not found");debugger}}addPendingExpandCloner(e){this.toExpandCloner.add(e)}addPendingUpdateCloner(e){this.toUpdateCloner.add(e)}markToExpandCloner(e){this.toExpandCloner.add(e),e.traverseEntityAncestors(t=>{this.toExpandCloner.add(t)})}doPendingExpandCloner(){this.toExpandCloner.forEach(e=>{e.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(e=>{var t;(t=e.cloner)==null||t.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(e){this.pendingCommands.push(e)}applyPendingCommands(){this.pendingCommands.forEach(e=>e()),this.pendingCommands.length=0}updateByLibOp(e,t){e.path.length===1&&e.path[0]==="components"&&e.type===1&&this.createChildrenObjects([{...e.data.asset,id:e.id}],this.invisibleObjects,t)}updateTreeByOp(e,t){var r;if(e.path.length===0&&e.type===7){let i=e.parent===null?this:this.find(e.parent);if(i===void 0)throw new Error("unexpected");let n=this.createObject(e.id,e.data,e.children,i,e.localIndex,t);n.updateVisible(),n.resetBBoxNeedsUpdate(),Ma(n)&&po(n.parent)&&(n.invalidateUpstreamBooleanData(),n.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(i),this.markNeedsRecomputeInstancesForChildren(n),this.markToExpandCloner(n),this.markPenumbraSizeDirty()}else if(e.path.length===0&&e.type===8){let i=this.find(e.id);if(i===void 0)throw new Error("unexpected");this.markToExpandCloner(i),i.resetBBoxNeedsUpdate(),this.unregisterObject(i);let n=i.parent;this.markNeedsRecomputeInstancesForAncessors(n),this.markNeedsRecomputeInstancesForChildren(i),this.markPenumbraSizeDirty(),i.parent.remove(i),po(i.parent)&&(i.parent.invalidateUpstreamBooleanData(),i.parent.invalidateDownstreamBooleanData().recomputeBoolean()),Ma(i)&&(i.freeBooleanPointer(),n instanceof rf&&n.invalidateDownstreamBooleanData().recomputeBoolean()),i instanceof Wb&&i.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(i),this.pathConstraints.removeDependencies(i.uuid)}else if(e.path.length===0&&e.type===9){let i=this.find(e.id);if(i===void 0)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(i);let n=i.parent;this.markNeedsRecomputeInstancesForAncessors(n),(r=i.cloner)==null||r.resetOnMove(),this.markToExpandCloner(i);let s=e.parent===null?this:this.find(e.parent);if(s===void 0)throw new Error("unexpected");s.add(i),this.markNeedsRecomputeInstancesForAncessors(s),this.markToExpandCloner(i),i.invalidateClonerTransform(i),i.updateVisible(),i.resetBBoxNeedsUpdate(),this.markPenumbraSizeDirty();let a=e.localIndex;s.children.splice(a,0,s.children.pop()),Ma(i)&&(i.invalidateUpstreamBooleanData(),po(i.parent)?i.parent.invalidateDownstreamBooleanData().recomputeBoolean():n instanceof rf&&n.invalidateDownstreamBooleanData().recomputeBoolean())}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}get playPage(){return this.find(this.data.publish.playPage)??this.errorPage}updatePage(e){this.activePage&&this.activePage.onDeactive(),this.activePage=this.errorPage;for(let t of this.children)t instanceof Uh&&(t.visible=t.uuid===e,t.visible&&(this.activePage=t,this.activePage.onActive(this)))}updateEntityByOp(e,t,r,i){if(t.type===0){if(("overrides"in t.props||"component"in t.props)&&this.markNeedsRecomputeInstances(),"visible"in t.props&&this.markPenumbraSizeDirty(),t.path.includes("overrides")&&"states"in t.props){let{rest:s}=t.props;t={...t,props:s},this.markNeedsRecomputeInstances()}t.path[0]==="pathSnapping"&&t.props.pathId!==void 0&&this.pathConstraints.setConstraint(e,t.props.pathId)}let n=this.find(e);if(n)try{Cfe(n,t,r,{scene:this,shared:i}),n instanceof wn&&n.updateGeometryGroupsIfNeeded()}catch(s){console.error(s)}}get activeCamera(){return this.activePage.activeCamera}switchActiveCamera(e){this.activePage.switchActiveCamera(e)}isInvisibleObjects(e){return e===this.invisibleObjects||e.hasAnccestor(this.invisibleObjects)}init(e,t){let r=Object.entries(t.data.lib.components).map((i,n)=>({data:i[1].asset.data,children:i[1].asset.children,id:i[0],fi:n}));this.invisibleObjects.updateState(this.invisibleObjects.data,{scene:this,shared:t}),this.add(this.invisibleObjects),this.createChildrenObjects(r,this.invisibleObjects,t),this.createChildrenObjects(e.objects,this,t),this.updatePage(e.publish.playPage),this.activePage.switchToPlayCamera(),this.expandInstances(t,!0),this.traverseEntity(i=>{po(i)&&i.recomputeBoolean(),i instanceof $i&&i.updateUp()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(e){e.traverseEntity(t=>{(t.data.type==="Component"||t.data.type==="Instance")&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(e){Gt.is(e)&&(e.data.type==="Component"&&this.markNeedsRecomputeInstances(),e.traverseAncestors(t=>{Gt.is(t)&&t.data.type==="Component"&&this.markNeedsRecomputeInstances()}))}relativeizeInner(e,t,r,i,n,s,a){if(e){let o=i.find(e);o&&o!==i&&n.forInstancesRec(l=>{l.data=lm(l.data,h=>{let c=h.events.data(a.id),u=l.goUp(s);if(u){let d=[...OB(u.identity),e].join("-"),p=this.entityIdentityToEntity[d];if(p){let f=p.uuid,m=_o.zoom(c,t);m[r]=f}else console.warn("cannot find instance")}}).data})}}rewriteActions(e,t,r,i,n,s){e.forEach(a=>{a.data.type==="Transition"?this.relativeizeInner(a.data.object,[...t,a.id],"object",r,i,n,s):a.data.type==="Animation"&&this.relativeizeInner(a.data.object,[...t,a.id],"object",r,i,n,s)})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(e=>{if(e instanceof Mp&&typeof e.identity=="string"&&e.data.type==="Component")return e.traverseEntity((t,r)=>{t.data.events.forEach(i=>{if(i.data.type==="GameControl"){let n=!1;if(t.forInstancesRec(s=>{s.data=lm(s.data,a=>{s.isInstanceRoot||(a.events.delete(i.id),n=!0)}).data}),n===!1)for(let s of d8.list)this.rewriteActions(i.data.gameActions[s],["gameActions",s],e,t,r,i)}else i.data.type==="Conditional"?(i.data.condition.type==="Distance"?(this.relativeizeInner(i.data.condition.fromObject,["condition"],"fromObject",e,t,r,i),this.relativeizeInner(i.data.condition.toObject,["condition"],"toObject",e,t,r,i)):i.data.condition.type==="State"?this.relativeizeInner(i.data.condition.object,["condition"],"object",e,t,r,i):i.data.condition.type==="Comparison"&&(i.data.condition.lOperand.type==="Property"&&this.relativeizeInner(i.data.condition.lOperand.value[0],["condition","lOperand","value"],0,e,t,r,i),i.data.condition.rOperand.type==="Property"&&this.relativeizeInner(i.data.condition.rOperand.value[0],["condition","rOperand","value"],0,e,t,r,i)),this.rewriteActions(i.data.inActions,["inActions"],e,t,r,i),this.rewriteActions(i.data.outActions,["outActions"],e,t,r,i)):"actions"in i.data&&this.rewriteActions(i.data.actions,["actions"],e,t,r,i)})}),!0})}expandInstances(e,t,r){let i=new Set;this.traverseEntity(n=>{if(n instanceof Mp&&n.isInstanceRoot)return n.expandInstanceChildren({scene:this,shared:e,pendingDeletes:i}),t||n.resetBBoxNeedsUpdate(),r&&n.traverseEntity(s=>{r.addClip(s)}),!0});for(let n of i)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(n),qb(n)}recomputeInstances(e,t){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(r=>{r instanceof Mp&&r.isInstanceRoot&&(r.component=void 0)}),this.expandInstances(e,!1,t))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(e){e.traverseEntity(t=>{let r=typeof t.identity=="string"?t.identity:t.identity.join("-");this.entityIdentityToEntity[r]===t&&(delete this.entityByUuid[t.uuid],delete this.entityIdentityToEntity[r]),t.dispose()})}clearScene(){for(let e of this.children)Gt.is(e)&&e.disposeRecursively();this.children.length=0}resetAfterClear(e,t){this.init(e,t)}raycast(e){return this.raycast1(e,!1)}raycast1(e,t){let r=[],i=n=>{for(let s of n.children){let a=s.cloner;if(Gt.is(s)&&!s.raycastLock&&(s.visible||a!=null&&a.object.data.visible))if(t===!0&&s.isInstanceRoot){let o=[];if(e.intersectObject(s,!0,o),o.length){let l=o[0];l.object=s,l.point.applyMatrix4(l.object.matrixWorld);let h=s.matrixWorld.clone().invert();l.point.applyMatrix4(h),r.push(l)}}else(Ma(s)||D8(s)&&this.enableHelpers&&s.objectHelper.visible)&&(e.intersectObject(s,!1,r),N8(s,e,r)),i(s)}};return i(this),r}raycastWithClones(e){let t=[],r=i=>{for(let n of i.children){let s=n.cloner;Gt.is(n)&&(n.visible||s!=null&&s.object.data.visible)&&((Ma(n)||D8(n)&&this.enableHelpers&&n.objectHelper.visible)&&(e.intersectObject(n,!1,t),N8(n,e,t,!0)),r(n))}};return r(this),t}forEachEntity(e){for(let t of this.children)Gt.is(t)&&e(t)}traverseConcreteEntity(e){for(let t of this.children)Gt.is(t)&&t.isConcreteEntity&&t.traverseEntity(e)}traverseEntity(e){for(let t of this.children)Gt.is(t)&&t.traverseEntity(e)}updateFont(e,t){this.traverseEntity(r=>{if(r instanceof wn&&r.data.type==="Mesh"&&r.data.geometry.type==="TextGeometry"&&r.data.geometry.font===e){let i=r.geometry,n=r.data.geometry;i.updateFont(e,t).then(()=>{i.update(n);let s=r.invalidateDownstreamBooleanData();po(s)&&s.recomputeBoolean()})}})}traverseObject(e){for(let t of this.children)mm.is(t)&&t.traverseObject(e)}traverseVisibleEntity(e){for(let t of this.children)Gt.is(t)&&t.visible&&t.traverseVisibleEntity(e)}dispose(){this.clearScene()}createChildrenObjects(e,t,r){let i=0;for(let n of e)this.createObject(n.id,n.data,n.children,t,i,r),i+=1}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createObject(e,t,r,i,n,s){var l;let a={scene:this,shared:s},o=Xb(e,t,a);return o&&(this.entityByUuid[e]=o,i.add(o),i.children.splice(n,0,i.children.pop()),r.length>0&&(o.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(r,o,s)),o.updateState(t,a),o instanceof wn&&o.updateGeometryGroupsIfNeeded(),o.updateVisible(),o.cloner&&this.toExpandCloner.add(o),(l=t.pathSnapping)!=null&&l.pathId&&this.pathConstraints.setConstraint(e,t.pathSnapping.pathId)),t.type==="Empty"&&t.animations&&o.traverseEntity(h=>{if(h instanceof wn&&h.isSkinnedMesh){let c=h.dataPatched;if(c.bones&&c.boneInverses){let u=c.bones.map(f=>this.find(f)),d=c.boneInverses.map(f=>new Ae().fromArray(f)),p=new Nw(u,d);h.bind(p,h.bindMatrix)}}else h.matrixAutoUpdate=!0}),o}getCenter(e){let t=[];for(let i=0,n=e.length;i<n;++i){let{id:s,recursive:a}=e[i],o=this.find(s),l=a?o.recursiveBBox:o.singleBBox;t.push(...l.vertices)}let r=new qr;return r.setFromPoints(t),r.getCenter(ZT),ZT}copyMatrixWorld(e,t){if(e===null){t.identity();return}let r=this.find(e);r?t.copy(r.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){var i;if(e===null){t.identity();return}let r=(i=this.find(e))==null?void 0:i.parent;r?t.copy(r.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity(t=>{if(t instanceof Qn)if(Array.isArray(t.material))for(let r=0;r<t.material.length;r++)t.material[r]instanceof Yh&&e(t.material[r]);else t.material instanceof Yh&&e(t.material)})}updateViewPlaneSize(e,t,r=!1){this.traverseConcreteEntity(i=>{i instanceof $i&&i.setViewplaneSize(e,t,r)})}},p2=(e,t)=>{let r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)},Pfe=(e,t)=>{let r=t.x-e.x,i=t.y-e.y;return Ofe(Math.atan2(i,r))},Dfe=(e,t,r)=>{let i={x:0,y:0};return r=U8(r),i.x=e.x-t*Math.cos(r),i.y=e.y-t*Math.sin(r),i},U8=e=>e*(Math.PI/180),Ofe=e=>e*(180/Math.PI),Ife=e=>isNaN(e.buttons)?e.pressure!==0:e.buttons!==0,mx=new Map,KT=e=>{mx.has(e)&&clearTimeout(mx.get(e)),mx.set(e,setTimeout(e,100))},Q3=(e,t,r)=>{let i=t.split(/[ ,]+/g),n;for(let s=0;s<i.length;s+=1)n=i[s],e.addEventListener?e.addEventListener(n,r,!1):e.attachEvent&&e.attachEvent(n,r)},$T=(e,t,r)=>{let i=t.split(/[ ,]+/g),n;for(let s=0;s<i.length;s+=1)n=i[s],e.removeEventListener?e.removeEventListener(n,r):e.detachEvent&&e.detachEvent(n,r)},Uk=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),JT=()=>{if(typeof window>"u")return;let e=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:e,y:t}},j8=(e,t)=>{t.top||t.right||t.bottom||t.left?(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left):(e.style.left=t.x+"px",e.style.top=t.y+"px")},Qb=(e,t,r)=>{let i=jk(e);for(let n in i)if(i.hasOwnProperty(n))if(typeof t=="string")i[n]=t+" "+r;else{let s="";for(let a=0,o=t.length;a<o;a+=1)s+=t[a]+" "+r+", ";i[n]=s.slice(0,-2)}return i},Rfe=(e,t)=>{let r=jk(e);for(let i in r)r.hasOwnProperty(i)&&(r[i]=t);return r},jk=e=>{let t={};return t[e]="",["webkit","Moz","o"].forEach(function(r){t[r+e.charAt(0).toUpperCase()+e.slice(1)]=""}),t},gx=(e,t)=>{for(let r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},Bfe=(e,t)=>{let r={};for(let i in e)e.hasOwnProperty(i)&&t.hasOwnProperty(i)?r[i]=t[i]:e.hasOwnProperty(i)&&(r[i]=e[i]);return r},V8=(e,t)=>{if(e.length)for(let r=0,i=e.length;r<i;r+=1)t(e[r]);else t(e)},zfe=(e,t,r)=>({x:Math.min(Math.max(e.x,t.x-r),t.x+r),y:Math.min(Math.max(e.y,t.y-r),t.y+r)});typeof window<"u"&&(Vk="ontouchstart"in window,Gk=!!window.PointerEvent,Hk=!!window.MSPointerEvent);var Vk,Gk,Hk,p1={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},Yd,ym={};Gk?Yd=p1.pointer:Hk?Yd=p1.MSPointer:Vk?(Yd=p1.touch,ym=p1.mouse):Yd=p1.mouse;function Pc(){}Pc.prototype.on=function(e,t){var r=this,i=e.split(/[ ,]+/g),n;r._handlers_=r._handlers_||{};for(var s=0;s<i.length;s+=1)n=i[s],r._handlers_[n]=r._handlers_[n]||[],r._handlers_[n].push(t);return r};Pc.prototype.off=function(e,t){var r=this;return r._handlers_=r._handlers_||{},e===void 0?r._handlers_={}:t===void 0?r._handlers_[e]=null:r._handlers_[e]&&r._handlers_[e].indexOf(t)>=0&&r._handlers_[e].splice(r._handlers_[e].indexOf(t),1),r};Pc.prototype.trigger=function(e,t){var r=this,i=e.split(/[ ,]+/g),n;r._handlers_=r._handlers_||{};for(var s=0;s<i.length;s+=1)n=i[s],r._handlers_[n]&&r._handlers_[n].length&&r._handlers_[n].forEach(function(a){a.call(r,{type:n,target:r},t)})};Pc.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=Bfe(t.options,e))};Pc.prototype.bindEvt=function(e,t){var r=this;return r._domHandlers_=r._domHandlers_||{},r._domHandlers_[t]=function(){typeof r["on"+t]=="function"?r["on"+t].apply(r,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},Q3(e,Yd[t],r._domHandlers_[t]),ym[t]&&Q3(e,ym[t],r._domHandlers_[t]),r};Pc.prototype.unbindEvt=function(e,t){var r=this;return r._domHandlers_=r._domHandlers_||{},$T(e,Yd[t],r._domHandlers_[t]),ym[t]&&$T(e,ym[t],r._domHandlers_[t]),delete r._domHandlers_[t],this};var Zb=Pc;function fi(e,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(t),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=fi.id,fi.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}fi.prototype=new Zb;fi.constructor=fi;fi.id=0;fi.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};fi.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=Rfe("borderRadius","50%"),r=Qb("transition","opacity",e),i={};return i.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},i.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},i.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},gx(i.el,r),this.options.shape==="circle"&&gx(i.back,t),gx(i.front,t),this.applyStyles(i),this};fi.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var r in e[t])this.ui[t].style[r]=e[t][r];return this};fi.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};fi.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};fi.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};fi.prototype.show=function(e){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout(function(){t.ui.el.style.opacity=1},0),t.showTimeout=setTimeout(function(){t.trigger("shown",t.instance),typeof e=="function"&&e.call(this)},t.options.fadeTime)),t};fi.prototype.hide=function(e){var t=this;if(t.options.dataOnly)return t;if(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout(function(){var r=t.options.mode==="dynamic"?"none":"block";t.ui.el.style.display=r,typeof e=="function"&&e.call(t),t.trigger("hidden",t.instance)},t.options.fadeTime),t.options.restJoystick){let r=t.options.restJoystick,i={};i.x=r===!0||r.x!==!1?0:t.instance.frontPosition.x,i.y=r===!0||r.y!==!1?0:t.instance.frontPosition.y,t.setPosition(e,i)}return t};fi.prototype.setPosition=function(e,t){var r=this;r.frontPosition={x:t.x,y:t.y};var i=r.options.fadeTime+"ms",n={};n.front=Qb("transition",["top","left"],i);var s={front:{}};s.front={left:r.frontPosition.x+"px",top:r.frontPosition.y+"px"},r.applyStyles(n),r.applyStyles(s),r.restTimeout=setTimeout(function(){typeof e=="function"&&e.call(r),r.restCallback()},r.options.fadeTime)};fi.prototype.restCallback=function(){var e=this,t={};t.front=Qb("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)};fi.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};fi.prototype.computeDirection=function(e){var t=e.angle.radian,r=Math.PI/4,i=Math.PI/2,n,s,a;if(t>r&&t<r*3&&!e.lockX?n="up":t>-r&&t<=r&&!e.lockY?n="left":t>-r*3&&t<=-r&&!e.lockX?n="down":e.lockY||(n="right"),e.lockY||(t>-i&&t<i?s="left":s="right"),e.lockX||(t>0?a="up":a="down"),e.force>this.options.threshold){var o={},l;for(l in this.direction)this.direction.hasOwnProperty(l)&&(o[l]=this.direction[l]);var h={};this.direction={x:s,y:a,angle:n},e.direction=this.direction;for(l in o)o[l]===this.direction[l]&&(h[l]=!0);if(h.x&&h.y&&h.angle)return e;(!h.x||!h.y)&&this.trigger("plain",e),h.x||this.trigger("plain:"+s,e),h.y||this.trigger("plain:"+a,e),h.angle||this.trigger("dir dir:"+n,e)}else this.resetDirection();return e};var kfe=fi;function Wr(e,t){var r=this;r.nipples=[],r.idles=[],r.actives=[],r.ids=[],r.pressureIntervals={},r.manager=e,r.id=Wr.id,Wr.id+=1,r.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},r.config(t),(r.options.mode==="static"||r.options.mode==="semi")&&(r.options.multitouch=!1),r.options.multitouch||(r.options.maxNumberOfNipples=1);let i=getComputedStyle(r.options.zone.parentElement);return i&&i.display==="flex"&&(r.parentIsFlex=!0),r.updateBox(),r.prepareNipples(),r.bindings(),r.begin(),r.nipples}Wr.prototype=new Zb;Wr.constructor=Wr;Wr.id=0;Wr.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(r){if(r===void 0)return t[0];for(var i=0,n=t.length;i<n;i+=1)if(t[i].identifier===r)return t[i];return!1}};Wr.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"};Wr.prototype.begin=function(){var e=this,t=e.options;if(t.mode==="static"){var r=e.createNipple(t.position,e.manager.getIdentifier());r.add(),e.idles.push(r)}};Wr.prototype.createNipple=function(e,t){var r=this,i=r.manager.scroll,n={},s=r.options,a={x:r.parentIsFlex?i.x:i.x+r.box.left,y:r.parentIsFlex?i.y:i.y+r.box.top};if(e.x&&e.y)n={x:e.x-a.x,y:e.y-a.y};else if(e.top||e.right||e.bottom||e.left){var o=document.createElement("DIV");o.style.display="hidden",o.style.top=e.top,o.style.right=e.right,o.style.bottom=e.bottom,o.style.left=e.left,o.style.position="absolute",s.zone.appendChild(o);var l=o.getBoundingClientRect();s.zone.removeChild(o),n=e,e={x:l.left+i.x,y:l.top+i.y}}var h=new kfe(r,{color:s.color,size:s.size,threshold:s.threshold,fadeTime:s.fadeTime,dataOnly:s.dataOnly,restJoystick:s.restJoystick,restOpacity:s.restOpacity,mode:s.mode,identifier:t,position:e,zone:s.zone,frontPosition:{x:0,y:0},shape:s.shape});return s.dataOnly||(j8(h.ui.el,n),j8(h.ui.front,h.frontPosition)),r.nipples.push(h),r.trigger("added "+h.identifier+":added",h),r.manager.trigger("added "+h.identifier+":added",h),r.bindNipple(h),h};Wr.prototype.updateBox=function(){var e=this;e.box=e.options.zone.getBoundingClientRect()};Wr.prototype.bindNipple=function(e){var t=this,r,i=function(n,s){r=n.type+" "+s.id+":"+n.type,t.trigger(r,s)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",i),e.on("dir:up dir:right dir:down dir:left",i),e.on("plain:up plain:right plain:down plain:left",i)};Wr.prototype.pressureFn=function(e,t,r){var i=this,n=0;clearInterval(i.pressureIntervals[r]),i.pressureIntervals[r]=setInterval((function(){var s=e.force||e.pressure||e.webkitForce||0;s!==n&&(t.trigger("pressure",s),i.trigger("pressure "+t.identifier+":pressure",s),n=s)}).bind(i),100)};Wr.prototype.onstart=function(e){var t=this,r=t.options,i=e;e=Uk(e),t.updateBox();var n=function(s){t.actives.length<r.maxNumberOfNipples?t.processOnStart(s):i.type.match(/^touch/)&&(Object.keys(t.manager.ids).forEach(function(a){if(Object.values(i.touches).findIndex(function(l){return l.identifier===a})<0){var o=[e[0]];o.identifier=a,t.processOnEnd(o)}}),t.actives.length<r.maxNumberOfNipples&&t.processOnStart(s))};return V8(e,n),t.manager.bindDocument(),!1};Wr.prototype.processOnStart=function(e){var t=this,r=t.options,i,n=t.manager.getIdentifier(e),s=e.force||e.pressure||e.webkitForce||0,a={x:e.pageX,y:e.pageY},o=t.getOrCreate(n,a);o.identifier!==n&&t.manager.removeIdentifier(o.identifier),o.identifier=n;var l=function(c){c.trigger("start",c),t.trigger("start "+c.id+":start",c),c.show(),s>0&&t.pressureFn(e,c,c.identifier),t.processOnMove(e)};if((i=t.idles.indexOf(o))>=0&&t.idles.splice(i,1),t.actives.push(o),t.ids.push(o.identifier),r.mode!=="semi")l(o);else{var h=p2(a,o.position);if(h<=r.catchDistance)l(o);else{o.destroy(),t.processOnStart(e);return}}return o};Wr.prototype.getOrCreate=function(e,t){var r=this,i=r.options,n;return/(semi|static)/.test(i.mode)?(n=r.idles[0],n?(r.idles.splice(0,1),n):i.mode==="semi"?r.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1)):(n=r.createNipple(t,e),n)};Wr.prototype.processOnMove=function(e){var t=this,r=t.options,i=t.manager.getIdentifier(e),n=t.nipples.get(i),s=t.manager.scroll;if(!Ife(e)){this.processOnEnd(e);return}if(!n){console.error("Found zombie joystick with ID "+i),t.manager.removeIdentifier(i);return}if(r.dynamicPage){var a=n.el.getBoundingClientRect();n.position={x:s.x+a.left,y:s.y+a.top}}n.identifier=i;var o=n.options.size/2,l={x:e.pageX,y:e.pageY};r.lockX&&(l.y=n.position.y),r.lockY&&(l.x=n.position.x);var h=p2(l,n.position),c=Pfe(l,n.position),u=U8(c),d=h/o,p={distance:h,position:l},f,m;if(n.options.shape==="circle"?(f=Math.min(h,o),m=Dfe(n.position,f,c)):(m=zfe(l,n.position,o),f=p2(m,n.position)),r.follow){if(h>o){let x=l.x-m.x,w=l.y-m.y;n.position.x+=x,n.position.y+=w,n.el.style.top=n.position.y-(t.box.top+s.y)+"px",n.el.style.left=n.position.x-(t.box.left+s.x)+"px",h=p2(l,n.position)}}else l=m,h=f;var g=l.x-n.position.x,v=l.y-n.position.y;n.frontPosition={x:g,y:v},r.dataOnly||j8(n.ui.front,n.frontPosition);var y={identifier:n.identifier,position:l,force:d,pressure:e.force||e.pressure||e.webkitForce||0,distance:h,angle:{radian:u,degree:c},vector:{x:g/o,y:-v/o},raw:p,instance:n,lockX:r.lockX,lockY:r.lockY};y=n.computeDirection(y),y.angle={radian:U8(180-c),degree:180-c},n.trigger("move",y),t.trigger("move "+n.id+":move",y)};Wr.prototype.processOnEnd=function(e){var t=this,r=t.options,i=t.manager.getIdentifier(e),n=t.nipples.get(i),s=t.manager.removeIdentifier(n.identifier);!n||(r.dataOnly||n.hide(function(){r.mode==="dynamic"&&(n.trigger("removed",n),t.trigger("removed "+n.id+":removed",n),t.manager.trigger("removed "+n.id+":removed",n),n.destroy())}),clearInterval(t.pressureIntervals[n.identifier]),n.resetDirection(),n.trigger("end",n),t.trigger("end "+n.id+":end",n),t.ids.indexOf(n.identifier)>=0&&t.ids.splice(t.ids.indexOf(n.identifier),1),t.actives.indexOf(n)>=0&&t.actives.splice(t.actives.indexOf(n),1),/(semi|static)/.test(r.mode)?t.idles.push(n):t.nipples.indexOf(n)>=0&&t.nipples.splice(t.nipples.indexOf(n),1),t.manager.unbindDocument(),/(semi|static)/.test(r.mode)&&(t.manager.ids[s.id]=s.identifier))};Wr.prototype.onDestroyed=function(e,t){var r=this;r.nipples.indexOf(t)>=0&&r.nipples.splice(r.nipples.indexOf(t),1),r.actives.indexOf(t)>=0&&r.actives.splice(r.actives.indexOf(t),1),r.idles.indexOf(t)>=0&&r.idles.splice(r.idles.indexOf(t),1),r.ids.indexOf(t.identifier)>=0&&r.ids.splice(r.ids.indexOf(t.identifier),1),r.manager.removeIdentifier(t.identifier),r.manager.unbindDocument()};Wr.prototype.destroy=function(){var e=this;e.unbindEvt(e.options.zone,"start"),e.nipples.forEach(function(r){r.destroy()});for(var t in e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var Nfe=Wr;function Ei(e){var t=this;t.ids={},t.index=0,t.collections=[],t.scroll=JT(),t.config(e),t.prepareCollections();var r=function(){var n;t.collections.forEach(function(s){s.forEach(function(a){n=a.el.getBoundingClientRect(),a.position={x:t.scroll.x+n.left,y:t.scroll.y+n.top}})})};if(typeof window>"u")return t.collections;Q3(window,"resize",function(){KT(r)});var i=function(){t.scroll=JT()};return Q3(window,"scroll",function(){KT(i)}),t.collections}Ei.prototype=new Zb;Ei.constructor=Ei;Ei.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var r;return e.collections.every(function(i){return r=i.get(t),!r}),r}};Ei.prototype.create=function(e){return this.createCollection(e)};Ei.prototype.createCollection=function(e){var t=this,r=new Nfe(t,e);return t.bindCollection(r),t.collections.push(r),r};Ei.prototype.bindCollection=function(e){var t=this,r,i=function(n,s){r=n.type+" "+s.id+":"+n.type,t.trigger(r,s)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",i),e.on("dir:up dir:right dir:down dir:left",i),e.on("plain:up plain:right plain:down plain:left",i)};Ei.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)};Ei.prototype.unbindDocument=function(e){var t=this;(!Object.keys(t.ids).length||e===!0)&&(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)};Ei.prototype.getIdentifier=function(e){var t;return e?(t=e.identifier===void 0?e.pointerId:e.identifier,t===void 0&&(t=this.latest||0)):t=this.index,this.ids[t]===void 0&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]};Ei.prototype.removeIdentifier=function(e){var t={};for(var r in this.ids)if(this.ids[r]===e){t.id=r,t.identifier=this.ids[r],delete this.ids[r];break}return t};Ei.prototype.onmove=function(e){var t=this;return t.onAny("move",e),!1};Ei.prototype.onend=function(e){var t=this;return t.onAny("end",e),!1};Ei.prototype.oncancel=function(e){var t=this;return t.onAny("end",e),!1};Ei.prototype.onAny=function(e,t){var r=this,i,n="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=Uk(t);var s=function(o,l,h){h.ids.indexOf(l)>=0&&(h[n](o),o._found_=!0)},a=function(o){i=r.getIdentifier(o),V8(r.collections,s.bind(null,o,i)),o._found_||r.removeIdentifier(i)};return V8(t,a),!1};Ei.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach(function(t){t.destroy()}),e.off()};Ei.prototype.onDestroyed=function(e,t){var r=this;if(r.collections.indexOf(t)<0)return!1;r.collections.splice(r.collections.indexOf(t),1)};var Ffe=Ei,eL=new Ffe,Ufe={create:function(e){return eL.create(e)},factory:eL},Wk=new Map,y0=new Map,Nu=class{constructor(e,t,r,i){this.data=t;let{audio:n,volume:s,delay:a,loop:o}=t;if(!n)throw new Error("Missing property");let l=typeof n=="string"?i.getAudio(n).src:n.data;this.audioPlayer=new U1({src:l,volume:s,delay:a,loop:o}),y0.has(r.uuid)?y0.get(r.uuid).push(this):y0.set(r.uuid,[this]),Wk.set(e,this)}playByToggle(){this.data.toggle==="stop"?this.audioPlayer.status==="playing"?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):this.data.toggle==="pause"?this.audioPlayer.status==="playing"?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},G8=class{constructor(e){this.data=e}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(e){let t=Wk.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):t.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(e){let t=y0.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(r=>r.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(r=>r.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let e=[...y0.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(r=>{r.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(r=>{r.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},x0=class{constructor(e,t,r,i){if(this.data=t,t.interaction==="play")this.interaction=new Nu(e,t,r,i);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new G8(t);else throw new Error("Missing property")}dispatchBasic(){this.interaction instanceof Nu?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){this.interaction instanceof Nu?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(e){this.interaction instanceof Nu&&(e==="start"?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}},jfe="text/plain",Vfe="us-ascii",tL=(e,t)=>t.some(r=>r instanceof RegExp?r.test(e):r===e),Gfe=(e,{stripHash:t})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!r)throw new Error(`Invalid URL: ${e}`);let{type:i,data:n,hash:s}=r.groups,a=i.split(";");s=t?"":s;let o=!1;a[a.length-1]==="base64"&&(a.pop(),o=!0);let l=(a.shift()||"").toLowerCase(),h=[...a.map(c=>{let[u,d=""]=c.split("=").map(p=>p.trim());return u==="charset"&&(d=d.toLowerCase(),d===Vfe)?"":`${u}${d?`=${d}`:""}`}).filter(Boolean)];return o&&h.push("base64"),(h.length>0||l&&l!==jfe)&&h.unshift(l),`data:${h.join(";")},${o?n.trim():n}${s?`#${s}`:""}`};function Hfe(e,t){if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return Gfe(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=e.startsWith("//");!r&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let i=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),t.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),t.stripAuthentication&&(i.username="",i.password=""),t.stripHash?i.hash="":t.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let s=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,a=0,o="";for(;;){let h=s.exec(i.pathname);if(!h)break;let c=h[0],u=h.index,d=i.pathname.slice(a,u);o+=d.replace(/\/{2,}/g,"/"),o+=c,a=u+c.length}let l=i.pathname.slice(a,i.pathname.length);o+=l.replace(/\/{2,}/g,"/"),i.pathname=o}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(t.removeDirectoryIndex===!0&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let s=i.pathname.split("/"),a=s[s.length-1];tL(a,t.removeDirectoryIndex)&&(s=s.slice(0,-1),i.pathname=s.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let s of[...i.searchParams.keys()])tL(s,t.removeQueryParameters)&&i.searchParams.delete(s);if(t.removeQueryParameters===!0&&(i.search=""),t.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}t.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let n=e;return e=i.toString(),!t.removeSingleSlash&&i.pathname==="/"&&!n.endsWith("/")&&i.hash===""&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),r&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var Wfe=class{constructor({url:e,context:t},r){if(this.eventManager=r,!e)throw new Error("Missing property");this.url=e.startsWith("mailto:")?e:Hfe(e,{removeTrailingSlash:!1,removeSingleSlash:!1}),this.context=t??"tab"}dispatch(){var e;DB?window.location.assign(this.url):(this.context==="tab"?window.open(this.url,"_blank"):this.context==="window"?window.open(this.url,"_blank",`width=${window.innerWidth}, height=${window.innerHeight}`):window.open(this.url,"_parent"),(e=this.eventManager.controlsManager.orbitControls)==null||e.onPointerUp(ht[0]),toe())}},qk=class{constructor(e,t,r){this.data=e,this.page=t,this.eventManager=r,this.timeoutIdQueue=[],this.dispatchInner=()=>{this.objects.forEach(this.destroyCallback)},this.destroyCallback=i=>{var o,l;this.timeoutIdQueue.shift();let n=this.page.scene.find(i);if(n===void 0)return;let s=this.controlsManager.sharedGameControlGlobals.rapierWorld,a=s?(o=n.dataPatched.physics)==null?void 0:o.fusedBody:!0;if(n.cloner){for(let h of n.cloner.children)a?(h.playModeVisible=!1,h.rigidBody&&((l=n.dataPatched.physics)==null?void 0:l.rigidBody)==="positioned"&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(h.rigidBody.collider(0).handle),s.removeRigidBody(h.rigidBody),h.rigidBody=void 0),h.bvhGeometry&&(h.bvhGeometry=void 0)):this.clone===void 0||this.clone===h?(h.playModeVisible=!1,h.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(h.rigidBody.collider(0).handle),s.removeRigidBody(h.rigidBody),h.rigidBody=void 0)):h.playModeVisible===void 0&&(h.playModeVisible=!0);(a||this.clone===void 0||this.clone===!1)&&(n.visible=!1,n.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(n.rigidBody.collider(0).handle),s.removeRigidBody(n.rigidBody),n.rigidBody=void 0),n.bvhGeometry&&(n.bvhGeometry=void 0))}else n.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(n.rigidBody.collider(0).handle),s.removeRigidBody(n.rigidBody),n.rigidBody=void 0),n.bvhGeometry&&(n.bvhGeometry=void 0),n.visible=!1;s===void 0?this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(h=>h.bvhGeometry!==void 0):this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(h=>h.rigidBody!==void 0),this.eventManager.requestRender()},this.objects=[...e.objects],this.controlsManager=r.controlsManager}dispatch(e){this.clone=e,this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()}dispatchFromStart(){this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))}dispose(){this.timeoutIdQueue.forEach(e=>window.clearTimeout(e))}},Xk=class{constructor(e,t,r,i){this.data=e,this.page=t,this.eventManager=i,this.sharedAssets=r}dispatch(){clearTimeout(this.timeoutId),delete this.timeoutId,this.timeoutId=window.setTimeout(()=>{var e;a_(this.page,this.sharedAssets,!0),this.eventManager.reset(),(e=this.eventManager.controlsManager.gameControl)==null||e.reset(!0),this.page.switchToPlayCamera(),this.eventManager.controlsManager.requestRender(),delete this.timeoutId},(this.data.delay??0)*1e3)}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},Yk={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},Kb={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,pingPongEndDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},qfe=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],Z3={CSS:{},springs:{}};function Pa(e,t,r){return Math.min(Math.max(e,t),r)}function w0(e,t){return e.indexOf(t)>-1}function vx(e,t){return e.apply(null,t)}var ct={arr:function(e){return Array.isArray(e)},obj:function(e){return w0(Object.prototype.toString.call(e),"Object")},pth:function(e){return ct.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||ct.svg(e))},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return ct.hex(e)||ct.rgb(e)||ct.hsl(e)},key:function(e){return!Yk.hasOwnProperty(e)&&!Kb.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function Qk(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(r){return parseFloat(r)}):[]}function Zk(e,t){var r=Qk(e),i=Pa(ct.und(r[0])?1:r[0],.1,100),n=Pa(ct.und(r[1])?100:r[1],.1,100),s=Pa(ct.und(r[2])?10:r[2],.1,100),a=Pa(ct.und(r[3])?0:r[3],.1,100),o=Math.sqrt(n/i),l=s/(2*Math.sqrt(n*i)),h=l<1?o*Math.sqrt(1-l*l):0,c=1,u=l<1?(l*o+-a)/h:-a+o;function d(f){var m=t?t*f/1e3:f;return l<1?m=Math.exp(-m*l*o)*(c*Math.cos(h*m)+u*Math.sin(h*m)):m=(c+u*m)*Math.exp(-m*o),f===0||f===1?f:1-m}function p(){var f=Z3.springs[e];if(f)return f;for(var m=1/6,g=0,v=0;;)if(g+=m,d(g)===1){if(v++,v>=16)break}else v=0;var y=g*m*1e3;return Z3.springs[e]=y,y}return t?d:p}function Xfe(e){return e===void 0&&(e=10),function(t){return Math.ceil(Pa(t,1e-6,1)*e)*(1/e)}}var Yfe=function(){var e=11,t=1/(e-1);function r(c,u){return 1-3*u+3*c}function i(c,u){return 3*u-6*c}function n(c){return 3*c}function s(c,u,d){return((r(u,d)*c+i(u,d))*c+n(u))*c}function a(c,u,d){return 3*r(u,d)*c*c+2*i(u,d)*c+n(u)}function o(c,u,d,p,f){var m,g,v=0;do g=u+(d-u)/2,m=s(g,p,f)-c,m>0?d=g:u=g;while(Math.abs(m)>1e-7&&++v<10);return g}function l(c,u,d,p){for(var f=0;f<4;++f){var m=a(u,d,p);if(m===0)return u;var g=s(u,d,p)-c;u-=g/m}return u}function h(c,u,d,p){if(!(0<=c&&c<=1&&0<=d&&d<=1))return;var f=new Float32Array(e);if(c!==u||d!==p)for(var m=0;m<e;++m)f[m]=s(m*t,c,d);function g(v){for(var y=0,x=1,w=e-1;x!==w&&f[x]<=v;++x)y+=t;--x;var _=(v-f[x])/(f[x+1]-f[x]),b=y+_*t,S=a(b,c,d);return S>=.001?l(v,b,c,d):S===0?b:o(v,y,y+t,c,d)}return function(v){return c===u&&d===p||v===0||v===1?v:s(g(v),u,p)}}return h}(),Kk=function(){var e={linear:function(){return function(i){return i}}},t={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var n,s=4;i<((n=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((n*3-2)/22-i,2)}},Elastic:function(i,n){i===void 0&&(i=1),n===void 0&&(n=.5);var s=Pa(i,1,10),a=Pa(n,.1,2);return function(o){return o===0||o===1?o:-s*Math.pow(2,10*(o-1))*Math.sin((o-1-a/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/a)}}},r=["Quad","Cubic","Quart","Quint","Expo"];return r.forEach(function(i,n){t[i]=function(){return function(s){return Math.pow(s,n+2)}}}),Object.keys(t).forEach(function(i){var n=t[i];e["easeIn"+i]=n,e["easeOut"+i]=function(s,a){return function(o){return 1-n(s,a)(1-o)}},e["easeInOut"+i]=function(s,a){return function(o){return o<.5?n(s,a)(o*2)/2:1-n(s,a)(o*-2+2)/2}}}),e}();function $b(e,t){if(ct.fnc(e))return e;var r=e.split("(")[0],i=Kk[r],n=Qk(e);switch(r){case"spring":return Zk(e,t);case"cubicBezier":return vx(Yfe,n);case"steps":return vx(Xfe,n);default:return vx(i,n)}}function $k(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function Hy(e,t){for(var r=e.length,i=arguments.length>=2?arguments[1]:void 0,n=[],s=0;s<r;s++)if(s in e){var a=e[s];t.call(i,a,s,e)&&n.push(a)}return n}function Wy(e){return e.reduce(function(t,r){return t.concat(ct.arr(r)?Wy(r):r)},[])}function rL(e){return ct.arr(e)?e:(ct.str(e)&&(e=$k(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function Jb(e,t){return e.some(function(r){return r===t})}function e_(e){var t={};for(var r in e)t[r]=e[r];return t}function H8(e,t){var r=e_(e);for(var i in e)r[i]=t.hasOwnProperty(i)?t[i]:e[i];return r}function qy(e,t){var r=e_(e);for(var i in t)r[i]=ct.und(e[i])?t[i]:e[i];return r}function Qfe(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function Zfe(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=e.replace(t,function(o,l,h,c){return l+l+h+h+c+c}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),n=parseInt(i[1],16),s=parseInt(i[2],16),a=parseInt(i[3],16);return"rgba("+n+","+s+","+a+",1)"}function Kfe(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),r=parseInt(t[1],10)/360,i=parseInt(t[2],10)/100,n=parseInt(t[3],10)/100,s=t[4]||1;function a(d,p,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?d+(p-d)*6*f:f<1/2?p:f<2/3?d+(p-d)*(2/3-f)*6:d}var o,l,h;if(i==0)o=l=h=n;else{var c=n<.5?n*(1+i):n+i-n*i,u=2*n-c;o=a(u,c,r+1/3),l=a(u,c,r),h=a(u,c,r-1/3)}return"rgba("+o*255+","+l*255+","+h*255+","+s+")"}function $fe(e){if(ct.rgb(e))return Qfe(e);if(ct.hex(e))return Zfe(e);if(ct.hsl(e))return Kfe(e)}function Cl(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function Jfe(e){if(w0(e,"translate")||e==="perspective")return"px";if(w0(e,"rotate")||w0(e,"skew"))return"deg"}function W8(e,t){return ct.fnc(e)?e(t.target,t.id,t.total):e}function go(e,t){return e.getAttribute(t)}function t_(e,t,r){var i=Cl(t);if(Jb([r,"deg","rad","turn"],i))return t;var n=Z3.CSS[t+r];if(!ct.und(n))return n;var s=100,a=document.createElement(e.tagName),o=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;o.appendChild(a),a.style.position="absolute",a.style.width=s+r;var l=s/a.offsetWidth;o.removeChild(a);var h=l*parseFloat(t);return Z3.CSS[t+r]=h,h}function Jk(e,t,r){if(t in e.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=e.style[t]||getComputedStyle(e).getPropertyValue(i)||"0";return r?t_(e,n,r):n}}function r_(e,t){if(ct.dom(e)&&!ct.inp(e)&&(go(e,t)||ct.svg(e)&&e[t]))return"attribute";if(ct.dom(e)&&Jb(qfe,t))return"transform";if(ct.dom(e)&&t!=="transform"&&Jk(e,t))return"css";if(e[t]!=null)return"object"}function eN(e){if(ct.dom(e)){for(var t=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,i=new Map,n;n=r.exec(t);)i.set(n[1],n[2]);return i}}function e1e(e,t,r,i){var n=w0(t,"scale")?1:0+Jfe(t),s=eN(e).get(t)||n;return r&&(r.transforms.list.set(t,s),r.transforms.last=t),i?t_(e,s,i):s}function i_(e,t,r,i){switch(r_(e,t)){case"transform":return e1e(e,t,i,r);case"css":return Jk(e,t,r);case"attribute":return go(e,t);default:return e[t]||0}}function n_(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var i=Cl(e)||0,n=parseFloat(t),s=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return n+s+i;case"-":return n-s+i;case"*":return n*s+i}}function tN(e,t){if(ct.col(e))return $fe(e);if(/\s/g.test(e))return e;var r=Cl(e),i=r?e.substr(0,e.length-r.length):e;return t?i+t:i}function s_(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function t1e(e){return Math.PI*2*go(e,"r")}function r1e(e){return go(e,"width")*2+go(e,"height")*2}function i1e(e){return s_({x:go(e,"x1"),y:go(e,"y1")},{x:go(e,"x2"),y:go(e,"y2")})}function rN(e){for(var t=e.points,r=0,i,n=0;n<t.numberOfItems;n++){var s=t.getItem(n);n>0&&(r+=s_(i,s)),i=s}return r}function n1e(e){var t=e.points;return rN(e)+s_(t.getItem(t.numberOfItems-1),t.getItem(0))}function iN(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return t1e(e);case"rect":return r1e(e);case"line":return i1e(e);case"polyline":return rN(e);case"polygon":return n1e(e)}}function s1e(e){var t=iN(e);return e.setAttribute("stroke-dasharray",t),t}function a1e(e){for(var t=e.parentNode;ct.svg(t)&&ct.svg(t.parentNode);)t=t.parentNode;return t}function nN(e,t){var r=t||{},i=r.el||a1e(e),n=i.getBoundingClientRect(),s=go(i,"viewBox"),a=n.width,o=n.height,l=r.viewBox||(s?s.split(" "):[0,0,a,o]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:a/l[2],h:o/l[3]}}function o1e(e,t){var r=ct.str(e)?$k(e)[0]:e,i=t||100;return function(n){return{property:n,el:r,svg:nN(r),totalLength:iN(r)*(i/100)}}}function l1e(e,t){function r(o){o===void 0&&(o=0);var l=t+o>=1?t+o:0;return e.el.getPointAtLength(l)}var i=nN(e.el,e.svg),n=r(),s=r(-1),a=r(1);switch(e.property){case"x":return(n.x-i.x)*i.w;case"y":return(n.y-i.y)*i.h;case"angle":return Math.atan2(a.y-s.y,a.x-s.x)*180/Math.PI}}function iL(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=tN(ct.pth(e)?e.totalLength:e,t)+"";return{original:i,numbers:i.match(r)?i.match(r).map(Number):[0],strings:ct.str(e)||t?i.split(r):[]}}function sN(e){var t=e?Wy(ct.arr(e)?e.map(rL):rL(e)):[];return Hy(t,function(r,i,n){return n.indexOf(r)===i})}function aN(e){var t=sN(e);return t.map(function(r,i){return{target:r,id:i,total:t.length,transforms:{list:eN(r)}}})}function h1e(e,t){var r=e_(t);if(/^spring/.test(r.easing)&&(r.duration=Zk(r.easing)),ct.arr(e)){var i=e.length,n=i===2&&!ct.obj(e[0]);n?e={value:e}:ct.fnc(t.duration)||(r.duration=t.duration/i)}var s=ct.arr(e)?e:[e];return s.map(function(a,o){var l=ct.obj(a)&&!ct.pth(a)?a:{value:a};return ct.und(l.delay)&&(l.delay=o?0:t.delay),ct.und(l.endDelay)&&(l.endDelay=o===s.length-1?t.endDelay:0),l}).map(function(a){return qy(a,r)})}function u1e(e){for(var t=Hy(Wy(e.map(function(s){return Object.keys(s)})),function(s){return ct.key(s)}).reduce(function(s,a){return s.indexOf(a)<0&&s.push(a),s},[]),r={},i=function(s){var a=t[s];r[a]=e.map(function(o){var l={};for(var h in o)ct.key(h)?h==a&&(l.value=o[h]):l[h]=o[h];return l})},n=0;n<t.length;n++)i(n);return r}function c1e(e,t){var r=[],i=t.keyframes;i&&(t=qy(u1e(i),t));for(var n in t)ct.key(n)&&r.push({name:n,tweens:h1e(t[n],e)});return r}function d1e(e,t){var r={};for(var i in e){var n=W8(e[i],t);ct.arr(n)&&(n=n.map(function(s){return W8(s,t)}),n.length===1&&(n=n[0])),r[i]=n}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function p1e(e,t){var r;return e.tweens.map(function(i){var n=d1e(i,t),s=n.value,a=ct.arr(s)?s[1]:s,o=Cl(a),l=i_(t.target,e.name,o,t),h=r?r.to.original:l,c=ct.arr(s)?s[0]:h,u=Cl(c)||Cl(l),d=o||u;return ct.und(a)&&(a=h),n.from=iL(c,d),n.to=iL(n_(a,c),d),n.start=r?r.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=$b(n.easing,n.duration),n.isPath=ct.pth(s),n.isColor=ct.col(n.from.original),n.isColor&&(n.round=1),r=n,n})}var oN={css:function(e,t,r){return e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,i,n){if(i.list.set(t,r),t===i.last||n){var s="";i.list.forEach(function(a,o){s+=o+"("+a+") "}),e.style.transform=s}}};function lN(e,t){var r=aN(e);r.forEach(function(i){for(var n in t){var s=W8(t[n],i),a=i.target,o=Cl(s),l=i_(a,n,o,i),h=o||Cl(l),c=n_(tN(s,h),l),u=r_(a,n);oN[u](a,n,c,i.transforms,!0)}})}function f1e(e,t){var r=r_(e.target,t.name);if(r){var i=p1e(t,e),n=i[i.length-1];return{type:r,property:t.name,animatable:e,tweens:i,duration:n.end,delay:i[0].delay,endDelay:n.endDelay}}}function m1e(e,t){return Hy(Wy(e.map(function(r){return t.map(function(i){return f1e(r,i)})})),function(r){return!ct.und(r)})}function hN(e,t){var r=e.length,i=function(s){return s.timelineOffset?s.timelineOffset:0},n={};return n.duration=r?Math.max.apply(Math,e.map(function(s){let a=s.startOnceDelay??0,o=s.pingPongDelayCorrection??0,l=s.pingPongEndDelayCorrection??0;return i(s)+a+o+l+s.duration*(s.loop??1)})):t.duration,n.delay=r?Math.min.apply(Math,e.map(function(s){let a=s.startOnceDelay??0,o=s.pingPongDelayCorrection??0;return i(s)+a+o+s.delay})):t.delay,n.endDelay=r?n.duration-Math.max.apply(Math,e.map(function(s){let a=s.startOnceDelay??0,o=s.pingPongDelayCorrection??0,l=s.pingPongEndDelayCorrection??0;return i(s)+a+o+s.duration*(s.loop??1)-s.endDelay-l})):t.endDelay,n}var nL=0;function g1e(e){var t=H8(Yk,e),r=H8(Kb,e),i=c1e(r,e),n=aN(e.targets),s=m1e(n,i),a=hN(s,r),o=nL;return nL++,qy(t,{id:o,children:[],animatables:n,animations:s,duration:a.duration,delay:a.delay,endDelay:a.endDelay,startOnceDelay:r.startOnceDelay,pingPongDelayCorrection:r.pingPongDelayCorrection,pingPongEndDelayCorrection:r.pingPongEndDelayCorrection})}var ia=[],sL=[],f2,v1e=function(){function e(){f2=requestAnimationFrame(t)}function t(r){var i=ia.length;if(i){for(var n=0;n<i;){var s=ia[n];s.paused?(ia.splice(n,1),i-=1):(s.tick(r),n++)}e()}else f2=cancelAnimationFrame(f2)}return e}();function y1e(e){document.hidden?(ia.forEach(function(t){return t.pause(e.timeStamp)}),sL=ia.slice(0),Hr.running=ia=[]):sL.forEach(function(t){return t.play(e.timeStamp)})}typeof document<"u"&&document.addEventListener("visibilitychange",y1e);function Hr(e){e===void 0&&(e={});var t=0,r=0,i=0,n,s,a=0,o=null;function l(b){var S=window.Promise&&new Promise(function(C){return o=C});return b.finished=S,S}var h=g1e(e);l(h);function c(){var b=h.direction;b!=="alternate"&&(h.direction=b!=="normal"?"normal":"reverse"),h.reversed=!h.reversed,s.forEach(function(S){(S.loop===1||S.loop%2===0)&&(S.reversed=h.reversed)})}function u(){h.direction="normal",h.reversed=!1,s.forEach(function(b){return b.reversed=!1})}function d(b){return h.reversed?h.duration-b:b}function p(){t=0,r=d(h.currentTime)*(1/Hr.speed)}function f(b,S,C=!1){S&&(h.reversed?S.seek(S.duration*S.loop-(b-S.timelineOffset-S.pingPongDelayCorrection),C):S.seek(b-S.timelineOffset-S.startOnceDelay-S.pingPongDelayCorrection,C))}function m(b,S=!1){if(h.reversed)for(var C=a;C--;)f(b,s[C],S);else for(var M=0;M<a;M++)f(b,s[M],S)}function g(b){var ie,J,ee,ne,he,ge,ce,Le,_e,ze;var S=0,C=h.animations,M=C.length;for(h.direction!=="alternate"&&((ie=h.parent)==null?void 0:ie.direction)==="alternate"?((J=h.parent)==null?void 0:J.rewind)===!1&&h.reversePlayback===!0&&h.rewind===!1&&((ee=h.parent)!=null&&ee.reversed&&h.direction==="alternate"?b=h.duration-h.delay+h.endDelay-b:b=h.duration+h.delay-h.endDelay-b):w(!1,(ne=h.parent)==null?void 0:ne.rewind,h.rewind,(he=h.parent)==null?void 0:he.reversePlayback,h.reversePlayback)&&((ge=h.parent)!=null&&ge.reversed&&h.direction==="alternate"?b=h.duration-h.delay+h.endDelay-b:b=h.duration+h.delay-h.endDelay-b);S<M;){var A=C[S],T=A.animatable,L=A.tweens,D=L.length-1,O=L[D];D&&(O=Hy(L,function(Ce){return b<Ce.end})[0]||O);let K;(ce=h.parent)!=null&&ce.reversed&&h.direction==="alternate"?K=Pa(b-O.start-O.endDelay,0,O.duration)/O.duration:K=Pa(b-O.start-O.delay,0,O.duration)/O.duration;for(var z=isNaN(K)?1:O.easing(K),q=O.to.strings,N=O.round,I=[],W=O.to.numbers.length,P=void 0,V=0;V<W;V++){var G=void 0;let Ce,Me;h.direction!=="alternate"?((Le=h.parent)==null?void 0:Le.rewind)===!1&&h.reversePlayback===!0&&h.rewind===!1?(Ce=O.to.numbers[V],Me=O.from.numbers[V]||0):(Me=O.to.numbers[V],Ce=O.from.numbers[V]||0):w(!0,(_e=h.parent)==null?void 0:_e.rewind,h.rewind,(ze=h.parent)==null?void 0:ze.reversePlayback,h.reversePlayback)?(Ce=O.to.numbers[V],Me=O.from.numbers[V]||0):(Me=O.to.numbers[V],Ce=O.from.numbers[V]||0),O.isPath?G=l1e(O.value,z*Me):G=Ce+z*(Me-Ce),N&&(O.isColor&&V>2||(G=Math.round(G*N)/N)),I.push(G)}var Q=q.length;if(!Q)P=I[0];else{P=q[0];for(var U=0;U<Q;U++){q[U];var Y=q[U+1],H=I[U];isNaN(H)||(Y?P+=H+Y:P+=H+" ")}}oN[A.type](T.target,A.property,P,T.transforms),A.currentValue=P,S++}}function v(b){h[b]&&!h.passThrough&&h[b](h)}function y(){h.remaining&&h.remaining!==!0&&h.remaining--}let x={0:!1,1:!0,2:!1,3:!0,4:!1,5:!1,6:!1,7:!1,8:!1,9:!0,10:!0,11:!1,12:!1,13:!1,14:!0,15:!0,16:!1,17:!0,18:!0,19:!1,20:!1,21:!1,22:!0,23:!0,24:!1,25:!0,26:!1,27:!0,28:!1,29:!1,30:!1,31:!1};function w(b,S,C,M,A){return x[b<<4|S<<3|C<<2|M<<1|A]}function _(b,S=!1){var L;var C=h.duration;let M=h.delay,A=C-h.endDelay;(L=h.parent)!=null&&L.reversed&&h.direction==="alternate"&&(M=h.endDelay,A=C-h.delay);var T=d(b);if(h.progress=Pa(T/C*100,0,100),S||(h.reversePlayback=T<h.currentTime),a&&m(T,S),!h.began&&h.currentTime>=0&&(h.began=!0,v("begin")),!h.loopBegan&&h.currentTime>0&&(h.loopBegan=!0,v("loopBegin")),(h.reversed||T>=0)&&T<=M&&h.currentTime!==0&&(g(0),v("change")),(T>=A&&h.currentTime!==C+h.pingPongDelayCorrection||!C)&&(g(C),v("change")),T>M&&T<A?(h.changeBegan||(h.changeBegan=!0,h.changeCompleted=!1,v("changeBegin")),g(T),v("change")):h.changeBegan?(h.changeCompleted=!0,h.changeBegan=!1,v("change"),a&&v("timelineChangeComplete")):h.began&&T>A&&v("changeComplete"),h.currentTime=Pa(T,0,C+h.pingPongDelayCorrection),h.began&&v("update"),b>=C)if(y(),!h.remaining)h.paused=!0,h.completed||(h.completed=!0,v("loopComplete"),v("complete"),!h.passThrough&&"Promise"in window&&(o(),l(h)));else{a?t+=h.duration/Hr.speed:t+=h.duration;for(let D of s)D.setStartTime(0),D.remaining=D.loop;v("loopComplete"),h.loopBegan=!1,h.direction==="alternate"?c():a&&u()}}return h.reset=function(){var b=h.direction;h.passThrough=!1,h.currentTime=0,h.progress=0,h.paused=!0,h.began=!1,h.loopBegan=!1,h.changeBegan=!1,h.completed=!1,h.changeCompleted=!1,h.reversePlayback=!1,h.reversed=b==="reverse",h.remaining=h.loop,s=h.children,a=s.length;for(var S=a;S--;)h.children[S].reset();(h.reversed&&h.loop!==!0||b==="alternate"&&h.loop===1)&&h.remaining++,g(h.reversed?h.duration:0)},h.setStartTime=function(b){t=b},h.set=function(b,S){return lN(b,S),h},h.tick=function(b){i=b,t||(t=i),_((i+(r-t))*Hr.speed)},h.seek=function(b,S=!1){_(b-t,S)},h.pause=function(b){h.paused=!0,a&&(n=b??performance.now())},h.play=function(b){!h.paused||(h.completed&&h.reset(),h.paused=!1,ia.push(h),a&&n!==void 0&&(t+=(b??performance.now())-n),f2||v1e())},h.reverse=function(){c(),h.completed=!h.reversed,p()},h.restart=function(){h.reset(),h.play()},h.reset(),h.autoplay&&h.play(),h}function aL(e,t){for(var r=t.length;r--;)Jb(e,t[r].animatable.target)&&t.splice(r,1)}function x1e(e){for(var t=sN(e),r=ia.length;r--;){var i=ia[r],n=i.animations,s=i.children;aL(t,n);for(var a=s.length;a--;){var o=s[a],l=o.animations;aL(t,l),!l.length&&!o.children.length&&s.splice(a,1)}!n.length&&!s.length&&i.pause()}}function w1e(e,t){t===void 0&&(t={});var r=t.direction||"normal",i=t.easing?$b(t.easing):null,n=t.grid,s=t.axis,a=t.from||0,o=a==="first",l=a==="center",h=a==="last",c=ct.arr(e),u=parseFloat(c?e[0]:e),d=c?parseFloat(e[1]):0,p=Cl(c?e[1]:e)||0,f=t.start||0+(c?u:0),m=[],g=0;return function(v,y,x){if(o&&(a=0),l&&(a=(x-1)/2),h&&(a=x-1),!m.length){for(var w=0;w<x;w++){if(!n)m.push(Math.abs(a-w));else{var _=l?(n[0]-1)/2:a%n[0],b=l?(n[1]-1)/2:Math.floor(a/n[0]),S=w%n[0],C=Math.floor(w/n[0]),M=_-S,A=b-C,T=Math.sqrt(M*M+A*A);s==="x"&&(T=-M),s==="y"&&(T=-A),m.push(T)}g=Math.max.apply(Math,m)}i&&(m=m.map(function(D){return i(D/g)*g})),r==="reverse"&&(m=m.map(function(D){return s?D<0?D*-1:-D:Math.abs(g-D)}))}var L=c?(d-u)/g:u;return f+L*(Math.round(m[y]*100)/100)+p}}function b1e(e){e===void 0&&(e={});var t=Hr(e);return t.duration=0,t.add=function(r,i){var n=ia.indexOf(t),s=t.children;n>-1&&ia.splice(n,1);function a(d){d.passThrough=!0}for(var o=0;o<s.length;o++)a(s[o]);var l=qy(r,H8(Kb,e));l.targets=l.targets||e.targets;var h=t.duration;l.autoplay=!1,l.timelineOffset=ct.und(i)?h:n_(i,h),a(t);var c=Hr(l);a(c),s.push(c),c.parent=t;var u=hN(s,e);return t.delay=u.delay,t.endDelay=u.endDelay,t.duration=u.duration,c.loop===!0&&(t.duration=1/0),t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}Hr.version="3.2.0";Hr.speed=1;Hr.running=ia;Hr.remove=x1e;Hr.get=i_;Hr.set=lN;Hr.convertPx=t_;Hr.path=o1e;Hr.setDashoffset=s1e;Hr.stagger=w1e;Hr.timeline=b1e;Hr.easing=$b;Hr.penner=Kk;Hr.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var uN=Hr,oL=new E,lL=new E,hL=new Et;function _1e(e,t,r,i){if(i===0)return r.copy(e);if(i===1)return r.copy(t);let n=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(n>=1)return r.copy(e);let s=1-n*n;if(s<=Number.EPSILON){let c=1-i;return r.w=c*e.w+i*t.w,r.x=c*e.x+i*t.x,r.y=c*e.y+i*t.y,r.z=c*e.z+i*t.z,r.normalize(),r}let a=Math.sqrt(s),o=Math.atan2(a,n),l=Math.sin((1-i)*o)/a,h=Math.sin(i*o)/a;return r.w=e.w*l+t.w*h,r.x=e.x*l+t.x*h,r.y=e.y*l+t.y*h,r.z=e.z*l+t.z*h,r}function wc(e,t,r,i,n){let s=r[e]?r[e]:void 0,a=i[e];if(a==null)return;let o=s??t[e],l=a;if(o!==l)return{update:h=>{let c=Tt.lerp(o,l,h);n?t[e]=Math.trunc(c):t[e]=c},start:()=>{t[e]=o},end:()=>{t[e]=l}}}function cN(e,t,r,i,n){let s=r[e]?r[e]:void 0,a=i[e];if(!a)return;let o=t[e],l=[...s??o],h=[...a];if(!(l.length!==h.length||db(l,h)))return{update:c=>{l.forEach((u,d)=>{let p=Tt.lerp(u,h[d],c);t[e][d]=n?Math.trunc(p):p})},start:()=>{Object.assign(t[e],l)},end:()=>{Object.assign(t[e],h)}}}function uL(e,t,r,i){let n=r[e]?r[e]:void 0,s=i[e];if(!s)return;let a=t[e],o=n?new E().fromArray(n):a.clone(),l=new E().fromArray(s);if(!o.equals(l))return{update:h=>{a.lerpVectors(o,l,h)},start:()=>{a.copy(o)},end:()=>{a.copy(l)}}}function C1e(e,t,r,i){let n=r[e]?r[e]:void 0,s=i[e];if(!s)return;let a=t[e],o=n?new Ae().fromArray(n):a.clone(),l=new E,h=new Et,c=new E;o.decompose(l,h,c);let u=new Ae().fromArray(s),d=new E,p=new Et,f=new E;if(u.decompose(d,p,f),!o.equals(u))return{update:m=>{hL.slerpQuaternions(h,p,m),oL.lerpVectors(l,d,m),lL.lerpVectors(c,f,m),a.compose(oL,hL,lL)},start:()=>{a.compose(l,h,c)},end:()=>{a.compose(d,p,f)}}}function S1e(e,t,r,i,n){let s=r[e]?r[e]:void 0,a=i[e];if(!a)return;let o=t[e],l=s?typeof s=="string"?n.getColor(s).clone():new lt().setRGB(s.r,s.g,s.b):o.clone(),h=typeof a=="string"?n.getColor(a).clone():new lt().setRGB(a.r,a.g,a.b);if(l.equals(h))return;let c=o.clone();return t[e]=c,{update:u=>{c.lerpColors(l,h,u)},start:()=>{c.copy(l)},end:()=>{c.copy(h)}}}function ru(e,t,r,i){if(typeof t[e]=="number")return wc(e,t,r??{},i);if(Array.isArray(t[e]))return cN(e,t,r??{},i)}function M1e(e,t,r){var a,o,l,h;let i=[],n=e.cameraType==="OrthographicCamera"?(a=t.orthographic)==null?void 0:a.zoom:(o=t.perspective)==null?void 0:o.zoom,s=e.cameraType==="OrthographicCamera"?(l=r.orthographic)==null?void 0:l.zoom:(h=r.perspective)==null?void 0:h.zoom;if(s!==void 0){let c=n??e.zoom,u=s;c!==u&&i.push({update:d=>{e.zoom=Tt.lerp(c,u,d),e.updateProjectionMatrix()},start:()=>{e.zoom=c,e.updateProjectionMatrix()},end:()=>{e.zoom=u,e.updateProjectionMatrix()}})}if(r.targetOffset!==void 0){let c=wc("targetOffset",e,t,r);c&&i.push(c)}return i}function A1e(e,t,r,i){if(r.scaleBaked===void 0)return;let n=t.scaleBaked??e.data.geometry.scaleBaked,s=r.scaleBaked;if(ec.isEqual(n,s))return;let a=[];return a.push({update:o=>{e.updateGeometryInteractions({scaleBaked:[Tt.lerp(n[0],s[0],o),Tt.lerp(n[1],s[1],o),Tt.lerp(n[2],s[2],o)]},i),e.invalidateDownstreamBooleanData()},start:()=>{e.updateGeometryInteractions({scaleBaked:n},i),e.invalidateDownstreamBooleanData()},end:()=>{e.updateGeometryInteractions({scaleBaked:s},i),e.invalidateDownstreamBooleanData()}}),a}function E1e(e,t,r){if(!r.extrusion)return;let i=e.extrusion,n=t.extrusion??{},s=r.extrusion,a=[];return pz.forEach(o=>{let l=ru(o,i,n,s);l&&a.push(l)}),a}function T1e(e,t,r,i){let n=[];if(!("geometry"in r))return n;let s=e.geometry.userData.parameters,a="geometry"in t?t.geometry:{},o=r.geometry;if(e instanceof gm){let l=A1e(e,a,o,i);l&&n.push(...l)}else{let l={};if(Object.assign(l,bl(s,gE)),gE.forEach(h=>{let c=ru(h,l,a,o);c&&n.push(c)}),e instanceof Wb){Object.assign(l,{extrusion:{...s.extrusion}});let h=E1e(l,a,o);h&&n.push(...h)}n.length&&n.push({update:h=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded()},start:h=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded()},end:h=>{e.updateGeometryInteractions(l,i),e.updateGeometryGroupsIfNeeded()}})}return n}function L1e(e,t,r,i){let n=[];if(r.intensity!==void 0){let s=wc("intensity",e,t,r);s&&n.push(s)}if(r.color!==void 0){let s=S1e("color",e,t,r,i);s&&n.push(s)}return n}function P1e(e,t,r,i){let n=[];if(Array.isArray(e.material)){if(!("materials"in r&&r.materials))return n;let s="materials"in t&&t.materials?t.materials:[],a=r.materials;e.material.forEach((o,l)=>{if(!a[l])return;let h=s[l]??{},c=a[l];typeof h=="string"||typeof c=="string"||n.push(...cL(o,h,c,i))})}else{if(!("material"in r&&r.material))return n;let s="material"in t&&t.material?t.material:{},a=r.material;if(typeof s=="string"||typeof a=="string")return n;n.push(...cL(e.material,s,a,i))}return n}function cL(e,t,r,i){var a;let n=[],s=q3(r,i)||!!t.layers&&q3(t,i);n.push(F1e(e,s));for(let o of e.layers){let l=(a=t.layers)==null?void 0:a.data(o.uuid),h=r.layers.data(o.uuid);if(!h||!(o.visible??!0)||!(h.visible??!0))continue;let c=o.getNames().filter(u=>!uz.some(d=>u.includes(d)));for(let u of c)try{let d=o.getValue(u),p;if(u==="colors")p=k1e(o,l,h,u);else if(Array.isArray(d))u==="steps"&&(p=z1e(o,l,h,u));else if(typeof d=="number")p=D1e(o,l,h,u);else{if(typeof d=="boolean")continue;d instanceof X?p=O1e(o,l,h,u):d instanceof E?p=I1e(o,l,h,u):d instanceof Xn?p=B1e(o,l,h,u,i):d instanceof lt?p=R1e(o,l,h,u,i):"isTexture"in d&&(p=N1e(o,l,h,u))}p&&(Array.isArray(p)?n.push(...p):n.push(p))}catch(d){console.error(`lerpMaterial: unexpected material layer for ${u}`,d)}}return n}function D1e(e,t,r,i){if(!e.hasValue(i)||!(i in r))return;let n=t?t[i]:e.getValue(i),s=r[i];if(n!==s)return{update:a=>{e.setValue(i,Tt.lerp(n,s,a))},start:()=>{e.setValue(i,n)},end:()=>{e.setValue(i,s)}}}function O1e(e,t,r,i){if(!e.hasValue(i)||!(i in r))return;let n=e.getValue(i),s=t?new X().fromArray(t[i]):n.clone(),a=new X().fromArray(r[i]);if(!s.equals(a))return{update:o=>{n.lerpVectors(s,a,o)},start:()=>{n.copy(s)},end:()=>{n.copy(a)}}}function I1e(e,t,r,i){if(!e.hasValue(i)||!(i in r))return;let n=e.getValue(i),s=t?new E().fromArray(t[i]):n.clone(),a=new E().fromArray(r[i]);if(!s.equals(a))return{update:o=>{n.lerpVectors(s,a,o)},start:()=>{n.copy(s)},end:()=>{n.copy(a)}}}function R1e(e,t,r,i,n){if(!e.hasValue(i)||!(i in r))return;let s=t?t[i]:void 0,a=r[i],o=e.getValue(i),l=s?typeof s=="string"?n.getColor(s).clone():new lt().setRGB(s.r,s.g,s.b):o.clone(),h=typeof a=="string"?n.getColor(a).clone():new lt().setRGB(a.r,a.g,a.b);if(l.equals(h))return;let c=o.clone();return{update:u=>{e.getValue(i)!==c&&e.setValue(i,c),c.lerpColors(l,h,u)},start:()=>{c.copy(l)},end:()=>{c.copy(h)}}}function B1e(e,t,r,i,n){if(!e.hasValue(i)||!(i in r))return;let s=t?t[i]:void 0,a=r[i],o=e.getValue(i),l=s?typeof s=="string"?n.getColor(s).clone():new lt().setRGB(s.r,s.g,s.b):o.clone(),h=typeof a=="string"?n.getColor(a).clone():new Xn(a.r,a.g,a.b,a.a);if(l.equals(h))return;let c=o.clone();return{update:u=>{e.getValue(i)!==c&&e.setValue(i,c),c.lerpColors(l,h,u)},start:()=>{c.copy(l)},end:()=>{c.copy(h)}}}function z1e(e,t,r,i="steps"){if(!e.hasValue(i)||!(i in r))return;let n=[],s=e.getValue(i),a=t?t[i]:s,o=r[i];for(let l=0;l<s.length;++l){let h=a[l],c=o[l];h!==c&&n.push({update:u=>{s[l]=Tt.lerp(h,c,u)},start:()=>{s[l]=h},end:()=>{s[l]=c}})}return n.length?n:void 0}function k1e(e,t,r,i="colors"){if(!e.hasValue(i)||!(i in r))return;let n=[],s=e.getValue(i),a=t?t[i]:s.map(l=>l.toArray()),o=r[i];for(let l=0;l<s.length;++l){let h=[...a[l]],c=[...o[l]];P3.isEqual(h,c)||n.push({update:u=>{s[l].fromArray(P3.lerp(h,c,u))},start:()=>{s[l].fromArray(h)},end:()=>{s[l].fromArray(c)}})}return n.length?n:void 0}function N1e(e,t,r,i="texture"){if(!e.hasValue(i)||!(i in r))return;let n=e.getNode("mat");if(!n)return;let s=t?t[i]:n,a=r[i],o=[...s.repeat],l=[...s.offset],h=[...a.repeat],c=[...a.offset];if(!qd.isEqual(o,h)||!qd.isEqual(l,c))return{update:u=>{n.repeat=qd.lerp(o,h,u),n.offset=qd.lerp(l,c,u),n.updateMatrix()},start:()=>{n.repeat=[...o],n.offset=[...l],n.updateMatrix()},end:()=>{n.repeat=[...h],n.offset=[...c],n.updateMatrix()}}}function F1e(e,t){return{update:()=>{e.transparent=t}}}var yx=new E,dL=new bi;function U1e(e,t,r,i){let n=[],s,a,o,l,h,c,u={slide:(t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping).slide,offset:(t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping).offset};if(h=wc("slide",u,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,r.pathSnapping??e.dataPatched.pathSnapping),h&&n.push(h),c=wc("offset",u,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,r.pathSnapping??e.dataPatched.pathSnapping),c&&n.push(c),!h&&!c&&(s=uL("position",e,t,r),s&&n.push(s),a=uL("scale",e,t,r),a&&n.push(a),o=j1e(e,t,r,i),o&&n.push(o),l=C1e("hiddenMatrix",e,t,r),l&&n.push(l)),s||a||o||l||h||c){let d=()=>{var p;e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),(p=e.parent)!=null&&p.matrixWorldFusedFalse&&(e.matrixWorld.multiplyMatrices(e.parent.matrixWorldFusedFalse,e.matrix),e.matrixWorldNeedsUpdate=!1),Ma(e)&&po(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.updatePathSnapping(Object.assign({},t.pathSnapping,u))};n.push({update:d,start:d,end:d})}return n}function j1e(e,t,r,i){let n=t!=null&&t.rotation?t.rotation:void 0,s=r.rotation;if(!s)return;let a=n?new E().fromArray(n):new E().setFromEuler(e.rotation),o=new E().fromArray(s);if(a.equals(o))return;let l=yx.subVectors(o,a);if(i&&l.toArray().every(h=>Math.abs(h)<2*Math.PI)){let h=new Et().setFromEuler(dL.setFromVector3(a)),c=new Et().setFromEuler(dL.setFromVector3(o));return{update:u=>{_1e(h,c,e.quaternion,u)},start:()=>{e.rotation.setFromVector3(a)},end:()=>{e.rotation.setFromVector3(o)}}}else return{update:h=>{yx.lerpVectors(a,o,h),e.rotation.setFromVector3(yx)},start:()=>{e.rotation.setFromVector3(a)},end:()=>{e.rotation.setFromVector3(o)}}}function V1e(e,t,r){let i=[];if(!("cloner"in r)||!e.cloner)return i;let n=e.cloner,s="cloner"in t?t.cloner:{},a=r.cloner;nz.forEach(d=>{let p;d==="count"?p=wc("count",n.parameters,s,a,!0):p=ru(d,n.parameters,s??{},a),p&&i.push(p)});let o=G1e(n,s,a);o!=null&&o.length&&i.push(...o);let l=H1e(n,s,a);l!=null&&l.length&&i.push(...l);let h=W1e(n,s,a);h!=null&&h.length&&i.push(...h);let c=q1e(n,s,a);c!=null&&c.length&&i.push(...c);let u=X1e(n,s,a);return u!=null&&u.length&&i.push(...u),i.length&&i.push({update:()=>{n.update()}}),i}function G1e(e,t,r){if(e.parameters.type!=="radial")return;let i=t.radial,n=r.radial;if(!n)return;let s=e.parameters.radial,a=[];return sz.forEach(o=>{let l=ru(o,s,i??{},n);l&&a.push(l)}),a}function H1e(e,t,r){if(e.parameters.type!=="linear")return;let i=t.linear,n=r.linear;if(!n)return;let s=[],a=e.parameters.linear;return az.forEach(o=>{let l=ru(o,a,i??{},n);l&&s.push(l)}),s}function W1e(e,t,r){if(e.parameters.type!=="grid")return;let i=t.grid,n=r.grid;if(!n)return;let s=[],a=e.parameters.grid;return oz.forEach(o=>{let l;o==="count"?l=cN(o,a,i??{},n,!0):l=ru(o,a,i??{},n),l&&s.push(l)}),s}function q1e(e,t,r){if(e.parameters.type!=="toObject")return;let i=t.toObject,n=r.toObject;if(!n)return;let s=[],a=e.parameters.toObject;return lz.forEach(o=>{let l;o==="count"?l=wc(o,a,i??{},n,!0):l=ru(o,a,i??{},n),l&&s.push(l)}),s}function X1e(e,t,r){if(!e.parameters.randomness)return;let i=t.randomnessObject,n=r.randomnessObject;if(!n)return;let s=[],a=e.parameters.randomnessObject;return hz.forEach(o=>{let l=ru(o,a,i??{},n);l&&s.push(l)}),s}function pL(e,t,r,i,n){let s=[];return e.data.visible&&s.push(...U1e(e,t,r,n)),e.data.visible&&s.push(...V1e(e,t,r)),Ma(e)?(e instanceof wn&&e.data.visible&&s.push(...T1e(e,t,r,i)),e.data.visible&&s.push(...P1e(e,t,r,i))):hde(e)?e.data.visible&&s.push(...L1e(e,t,r,i)):lde(e)&&s.push(...M1e(e,t,r)),s.length?{update:a=>{s.forEach(o=>o.update(a))},start:a=>{s.forEach(o=>{var l;return(l=o.start)==null?void 0:l.call(o,a)})},end:a=>{s.forEach(o=>{var l;return(l=o.end)==null?void 0:l.call(o,a)})}}:void 0}var fL=new E;function a_(e,t,r=!1){let i=[];e.traverseChildren(n=>{var l,h,c,u,d;if(r&&((l=n.rigidBody)==null||l.setTranslation(n.position0,!0),(h=n.rigidBody)==null||h.setRotation(n.rotation0,!0),(c=n.rigidBody)==null||c.setLinvel(fL,!0),(u=n.rigidBody)==null||u.setAngvel(fL,!0)),!Gt.is(n))return;let s=n.uuid,a=n.data;if(delete n.states,n.uuid===Cf)return;let o=!1;i.some(p=>{var f;return(f=e.scene.find(s))==null?void 0:f.isDescendantOf(p)})?o=!0:((d=a.physics)==null?void 0:d.fusedBody)===!0&&a.physics.rigidBody==="dynamic"&&i.push(s),n.data=a,n.currentState=null,n.reversibleToState=null,n.currentTransitionEvent=null;for(let p of a.states){let f={...p.data};e.data.globalPhysics.usePhysics===!0&&a.physics&&(a.physics.rigidBody==="dynamic"||o)&&(p.data.position!==void 0&&delete f.position,p.data.rotation!==void 0&&delete f.rotation,p.data.hiddenMatrix!==void 0&&delete f.hiddenMatrix),n.states||(n.states={}),n.states[p.id]=Bu.patch(a,f)}Q1e(e.scene,n,null,t,a.events.find(p=>p.data.type==="Follow"||p.data.type==="LookAt")!==void 0),Y1e(e)})}function Y1e(e){e.traverseEntity(t=>{for(let r of t.data.events){let i=[];switch(r.data.type){case"Follow":case"MouseHover":case"Scroll":case"MouseDown":case"MouseUp":case"MousePress":case"KeyUp":case"KeyDown":case"KeyPress":case"Collision":i.push(...r.data.actions);break;case"GameControl":for(let n of Object.values(r.data.gameActions))i.push(...n);break;case"DragDrop":i.push(...r.data.dragDropActions.drag,...r.data.dragDropActions.drop);break;case"Conditional":i.push(...r.data.inActions,...r.data.outActions);break}for(let n of i)if(n.data.type==="Create"&&n.data.hideBase==="Yes"){let s=e.scene.find(n.data.object);s&&(s.visible=!1)}}})}function Q1e(e,t,r,i,n=!1){if(t instanceof wn&&t.removeInteractionGeometry(),t.changeSelectedState(r,{scene:e,shared:i},n),t instanceof wn&&t.updateGeometryGroupsIfNeeded(),t instanceof $i&&t.updateCameraState(t.dataPatched,{scene:e,shared:i}),t.cloner)for(let s of t.cloner.children)s.playModeVisible=void 0;t.updateVisible()}function dN(e){let t;if(e.easing===5){let{control1:r,control2:i}=e;t=`cubicBezier(
			${r[0]}, ${r[1]}, ${i[0]}, ${i[1]}
		)`}else if(e.easing===6){let{mass:r,stiffness:i,damping:n,velocity:s}=e;t=`spring( ${r}, ${i}, ${n}, ${s} )`}else{let r;switch(e.easing){case 0:r=rh.linear;break;case 1:r=rh.ease;break;case 2:r=rh.easeIn;break;case 3:r=rh.easeOut;break;case 4:r=rh.easeInOut;break;default:r=rh.linear}let[i,n,s,a]=r;t=`cubicBezier( ${i}, ${n}, ${s}, ${a} )`}return{duration:e.duration,easing:t}}function pN(e){let t={delay:0,loop:e.repeat===-1?!0:e.repeat+1};if(e.repeat===0)t.direction="normal",t.rewind=!1;else switch(e.direction){case"pingpong":t.direction="alternate",t.rewind=!1;break;case"pingpong-rewind":t.direction="alternate",t.rewind=!0;break;default:t.direction="normal",t.rewind=!1;break}switch(t.delay=0,t.endDelay=0,t.startOnceDelay=0,t.pingPongDelayCorrection=0,t.pingPongEndDelayCorrection=0,e.delayDirection){case"start-once":t.startOnceDelay=e.delay;break;case"start":t.delay=e.delay;break;case"end":t.endDelay=e.delay;break;case"start-end":case void 0:t.delay=e.delay,t.endDelay=e.delay;break}return t.direction==="alternate"&&(t.delay/=2,t.endDelay/=2,e.delayDirection==="start"?(t.pingPongDelayCorrection=t.delay,typeof t.loop=="number"&&t.loop%2===0&&(t.pingPongEndDelayCorrection=t.delay)):e.delayDirection==="end"?typeof t.loop=="number"&&t.loop%2!==0&&(t.pingPongEndDelayCorrection=t.endDelay):e.delayDirection==="start-end"&&(t.pingPongDelayCorrection=t.delay,t.pingPongEndDelayCorrection=t.endDelay)),t}var Z1e={type:"beginState"},K1e={type:"completeState",isfromEntity:!1},mL=class{constructor(e,t,r,i,n,s){if(this.object=e,this.data=i,this.sharedAssets=n,this.allowSlerp=s,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.dispatchEvent({type:"requestRender"})),this.targets.t===0||this.targets.t===1?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let a=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=a,this.object.dispatchEvent({type:"beginState",state:a}),this.object.traverseEntity(o=>{o!==this.object&&o instanceof $i&&o.dispatchEvent(Z1e)})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let a=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=a,this.object.dispatchEvent({type:"completeState",state:a}),this.object.traverseEntity(o=>{o!==this.object&&o instanceof $i&&o.dispatchEvent(K1e)})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=pL(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},t===void 0){let a=m2(this.object,this.object.currentState===r?this.object.prevState:this.object.currentState);if(!a)throw new Error("Missing property");this.from=a}else{let a=m2(this.object,t);if(!a)throw new Error("Missing property");this.from=a}if(r===void 0)throw new Error("Missing property");{let a=m2(this.object,r);if(!a)throw new Error("Missing property");this.to=a}this.useCurrentState=t===void 0||r===void 0,this.params={targets:this.targets,t:1,autoplay:!1,...pN(i),...dN(i),change:this.onChange},this.callback=pL(this.object,t===void 0?{}:this.from.data,r===void 0?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},b0=class extends Ni{constructor(e,t,r){if(super(),this.data=e,this.page=t,this.sharedAssets=r,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.useToggle=!1,this.onTimelineChangeComplete=()=>{var n;this.data.tweens[0].data.direction!=="normal"&&(this.toggleIsForward=!this.toggleIsForward),this.timelineNeedsRebuild!==!1&&((n=this.timeline)==null||n.pause(),this.buildTimeline({isForward:this.toggleIsForward,isRebuild:!0}),this.timeline.play())},!e.object)throw new Error("Missing property");let i=this.page.scene.find(e.object);if(!i)throw new Error("Missing property");if(!i.states)throw new Error("Missing property");if(this.object=i,e.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.startOnceDelay=e.tweens[0].data.delayDirection==="start-once"?e.tweens[0].data.delay:0,this.init()}get playing(){return this.tweens.some(e=>e.changeBegan)??!1}init(){this.initialCurrentState=m2(this.object,this.object.currentState).id,this.toggleIsForward=!1}get currentState(){return this.useToggle?this.initialCurrentState:this.object.currentState}buildTimeline({isForward:e=!0,isRebuild:t=!1}={}){var r,i,n,s;try{let a=pN(this.data.tweens[0].data),o=a.loop;t&&typeof a.loop=="number"&&a.loop--,(r=this.timeline)==null||r.pause(),this.timeline=uN.timeline({autoplay:!1,...a,...o===!0||o>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}});let l=this.tweens.findIndex(h=>h==null?void 0:h.changeBegan);if(this.timelineNeedsRebuild=l!==-1&&(o===!0||o>1),a.pingPongDelayCorrection&&t===!1&&(this.timelineNeedsRebuild=!0),e){let h=l===-1?0:l;for(let c=h;c<this.data.tweens.length-1;c++){let u=this.data.tweens[c],d=this.data.tweens[c+1],p;c===h&&(this.object.wasMovedByUser===!0||((i=this.object.previousAction)==null?void 0:i.playing)===!0)?(p=void 0,this.object instanceof $i&&(this.object.wasMovedByUser=!1)):p=u.data.state===void 0?this.currentState:u.data.state;let f=new mL(this.object,p,d.data.state===void 0?this.currentState:d.data.state,d.data,this.sharedAssets,this.data.allowSlerp??!1);l!==-1&&c===h&&Object.assign(f.params,{startOnceDelay:0}),this.tweens[c]=f,this.timeline.add(f.params,this.timeline.duration+(c===h?a.delay:0)+(c===h&&!t?a.pingPongDelayCorrection:0))}this.timeline.duration+=a.endDelay}else{let h=l===-1?this.data.tweens.length-1:l+1;for(let c=h;c>0;c--){let u=this.data.tweens[c],d=this.data.tweens[c-1],p;c===h&&(this.object.wasMovedByUser===!0||((n=this.object.previousAction)==null?void 0:n.playing)===!0)?(p=void 0,this.object instanceof $i&&(this.object.wasMovedByUser=!1)):p=u.data.state===void 0?this.currentState:u.data.state;let f=new mL(this.object,p,d.data.state===void 0?this.currentState:d.data.state,u.data,this.sharedAssets,this.data.allowSlerp??!1);l!==-1&&c===h&&Object.assign(f.params,{startOnceDelay:0}),this.tweens[c-1]=f,this.timeline.add(f.params,this.timeline.duration+(c===h?a.endDelay:0))}this.timeline.duration+=a.delay+(t?0:a.pingPongDelayCorrection)}}catch(a){a instanceof Error&&console.error(a.message)}((s=this.object.previousAction)==null?void 0:s.playing)===!0&&this.object.previousAction.pause(),this.object.previousAction=this}play(){if(this.playing)return!1;clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{try{this.buildTimeline(),this.timeline.play()}catch(e){e instanceof Error&&console.error(e.message)}},this.startOnceDelay)}pause(){var e;(e=this.timeline)==null||e.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause();let e=this.data.tweens[0].data.state===void 0?this.initialCurrentState:this.data.tweens[0].data.state;this.object.changeSelectedState(e,{scene:this.page.scene,shared:this.sharedAssets}),this.object.currentState=e}seek(e){var t;this.timeline===void 0&&this.buildTimeline(),(t=this.timeline)==null||t.seek(e*this.timeline.duration,!0)}toggle(e){var t;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward,this.playing?((t=this.timeline)==null||t.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()):this.timeoutId=window.setTimeout(()=>{var r;(r=this.timeline)==null||r.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function m2(e,t){var n;let r,i;if(typeof t=="string"?(r=t,i=(n=e.states)==null?void 0:n[r]):t===null&&(r=null,i=e.data),!(r===void 0||i===void 0))return{id:r,data:i}}var $1e={type:"beginState"},gL={type:"completeState",isfromEntity:!1},vL={type:"requestRender"},fN=class extends Ni{constructor(e,t){super(),this.data=e,this.page=t,this.toggleIsForward=!1,this.useToggle=!1,this.posStart=new E,this.posEnd=new E,this.qStart=new Et,this.qEnd=new Et,this.zoomStart=1,this.zoomEnd=1}init(){}get playing(){return this.animation&&this.animation.began&&!this.animation.completed}buildAnimation(e=!1){if(!this.data.animate)return;let t=this.page.scene.find(this.data.targetCamera);if(!t||!t.visible)throw new ReferenceError("Target camera not founded or not visible");let r={t:0};this.posStart.copy(this.page.activeCamera.position),this.qStart.copy(this.page.activeCamera.quaternion),this.zoomStart=this.page.activeCamera.zoom,this.animation=uN({targets:r,t:1,...dN(this.data),update:()=>{r.t===0&&(this.useToggle&&!this.toggleIsForward?(this.posEnd.copy(this.fromCamera.position),this.qEnd.copy(this.fromCamera.quaternion),this.zoomEnd=this.fromCamera.zoom,this.switchCamera(this.fromCamera.uuid)):(this.posEnd.copy(t.position),this.qEnd.copy(t.quaternion),this.zoomEnd=t.zoom,this.fromCamera=this.page.activeCamera,this.switchCamera(t.uuid)),this.page.activeCamera.dispatchEvent($1e));let i=this.page.activeCamera;i.position.lerpVectors(this.posStart,this.posEnd,r.t),i.quaternion.slerpQuaternions(this.qStart,this.qEnd,r.t),i.zoom=this.zoomStart+(this.zoomEnd-this.zoomStart)*r.t,i.wasMovedBySwitchCameraAction=!0,i.updateMatrix(),i.updateMatrixWorld(),i.updateProjectionMatrix(),i.dispatchEvent(vL),r.t===1&&i.dispatchEvent(gL)}})}switchCamera(e){let t=this.page.scene.find(e);if(!t||!t.visible)throw new ReferenceError("Target camera not founded or not visible");this.page.switchActiveCamera(t),this.page.activeCamera.dispatchEvent({type:"cameraChange",camera:t})}play(){if(!this.playing&&this.page.activeCamera.uuid!==this.data.targetCamera)try{clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var e;delete this.timeoutId,this.data.animate?(this.buildAnimation(),(e=this.animation)==null||e.play()):this.switchCamera(this.data.targetCamera)},this.data.delay*1e3)}catch{}}pause(){var e;(e=this.animation)==null||e.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}toggle(e){var t,r;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward;try{this.playing?((t=this.animation)==null||t.pause(),this.buildAnimation(!0),(r=this.animation)==null||r.play()):this.timeoutId=window.setTimeout(()=>{var i,n;delete this.timeoutId,this.data.animate?((i=this.animation)==null||i.pause(),this.buildAnimation(),(n=this.animation)==null||n.play()):(this.toggleIsForward?(this.fromCamera=this.page.activeCamera,this.switchCamera(this.data.targetCamera)):this.switchCamera(this.fromCamera.uuid),this.page.activeCamera.dispatchEvent(gL),this.page.activeCamera.dispatchEvent(vL))},this.data.delay*1e3)}catch{}}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause(),this.toggleIsForward=!1}},_0=class extends Ni{constructor(e,t,r){var o,l,h;super(),this.page=t,this.animationControls=r,this.startOnceDelay=0,this.toggleIsForward=!1;let i=e.object,n=t.scene.find(e.object);n&&Array.isArray(n.identity)&&(i=n.identity[0]),this.data={...e,object:i};let s=this.animationControls.clipIdToAction[e.clipId+"/"+i];this.duration=((o=s==null?void 0:s.getClip())==null?void 0:o.duration)??1;let a=((h=(l=s==null?void 0:s.getClip())==null?void 0:l.tracks[0])==null?void 0:h.times.length)??1/0;this.leftFrameTime=this.data.crop[0]/a*this.duration,this.rightFrameTime=this.data.crop[1]/a*this.duration,this.startOnceDelay=e.delay}get playing(){var e;return((e=this.threeAnimAction)==null?void 0:e.isRunning())??!1}play(e=!1){window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var r;if(this.threeAnimAction=this.animationControls.play(this.data),!this.threeAnimAction)return;this.threeAnimAction.reset(),this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime;let t=this.data.object;Object.entries(this.animationControls.clipIdToAction).forEach(([i,n])=>{let s=i.split("/")[1];this.threeAnimAction!==n&&s===t&&n.isRunning()&&(e?n.fadeOut(.2):n.stop())}),e&&((r=this.threeAnimAction)==null||r.fadeIn(.2))},this.startOnceDelay)}pause(){this.threeAnimAction&&(this.threeAnimAction.paused=!0),window.clearTimeout(this.timeoutId),delete this.timeoutId}stop(){var e;(e=this.threeAnimAction)==null||e.fadeOut(.2)}seek(e){this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction&&(this.threeAnimAction.paused=!0,this.threeAnimAction.time=Tt.clamp(this.threeAnimAction.time+1/60*e,this.leftFrameTime,this.rightFrameTime-16e-5),this.animationControls.needsUpdate=!0,this.animationControls.requestRender())}toggle(e,t=!1){this.toggleIsForward=e??!this.toggleIsForward,this.threeAnimAction&&(this.threeAnimAction._loopCount=0),this.playing?this.threeAnimAction&&(this.threeAnimAction.timeScale=this.toggleIsForward?1:-1,this.toggleIsForward?(this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime)):this.timeoutId=window.setTimeout(()=>{var r;if(this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction){this.toggleIsForward?(this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction.time=this.rightFrameTime,this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime),this.threeAnimAction.paused=!1,this.threeAnimAction.timeScale=this.toggleIsForward?1:-1;let i=this.data.clipId.split("/")[1];Object.entries(this.animationControls.clipIdToAction).forEach(([n,s])=>{let a=n.split("/")[1];this.threeAnimAction!==s&&a===i&&s.isRunning()&&(t?s.fadeOut(.2):s.stop())}),t&&((r=this.threeAnimAction)==null||r.fadeIn(.2))}},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){var t;let e=(t=this.animationControls.clipIdToAction[this.data.clipId+"/"+this.data.object])==null?void 0:t.getClip();e&&(e.duration=this.duration),this.pause()}},mN=class{constructor(e,t,r,i){this.data=e,this.page=t,this.eventManager=r,this.shared=i,this.timeOutId=-1,this.scene=t.scene}dispatch(){this.data.target!==this.page.uuid&&(window.clearTimeout(this.timeOutId),this.timeOutId=window.setTimeout(()=>{this.play()},this.data.delay*1e3))}dispose(){window.clearTimeout(this.timeOutId)}play(){if(this.scene.children.every(t=>t.uuid!==this.data.target))return;this.data.transition==="fade"&&this.data.duration>0&&this.eventManager.eventContext.renderer.renderFromSceneForSceneTransitionPass(this.scene,this.scene.activeCamera,this.data.duration*1e3),this.eventManager.deactivate(),this.eventManager.controlsManager.deactivate();let e=this.scene.activeCamera;this.scene.updatePage(this.data.target),this.scene.activePage.switchToPlayCamera(),this.scene.activeCamera.copyViewPlaneSize(e),a_(this.scene.activePage,this.shared),this.eventManager.activate(),this.eventManager.controlsManager.activate(this.eventManager)}};function Cs(e,t,r,i,n,s){let a={Audio:[],Video:[],Link:[],Destroy:[],Create:[],Reset:[],Transition:[],SwitchCamera:[],Animation:[],SceneTransition:[]};return t.forEach(({id:o,data:l})=>{try{l.type==="Audio"?Ha[e.type].includes("Audio")&&a.Audio.push(new x0(o,l,s,i)):l.type==="Video"?Ha[e.type].includes("Video")&&a.Video.push(new o_(o,l,s)):l.type==="Link"?Ha[e.type].includes("Link")&&a.Link.push(new Wfe(l,n)):l.type==="Create"?Ha[e.type].includes("Create")&&a.Create.push(new S0(l,r,n.controlsManager)):l.type==="Destroy"?Ha[e.type].includes("Destroy")&&a.Destroy.push(new qk(l,r,n)):l.type==="Reset"?Ha[e.type].includes("Reset")&&a.Reset.push(new Xk(l,r,i,n)):l.type==="Transition"?Ha[e.type].includes("Transition")&&a.Transition.push(new b0(l,r,i)):l.type==="SwitchCamera"?Ha[e.type].includes("SwitchCamera")&&a.SwitchCamera.push(new fN(l,r)):l.type==="SceneTransition"?Ha[e.type].includes("SceneTransition")&&a.SceneTransition.push(new mN(l,r,n,i)):l.type==="Animation"&&Ha[e.type].includes("Animation")&&a.Animation.push(new _0(l,r,n.animationControls))}catch{}}),a}function Zn(e){Object.values(e).forEach(t=>{t.forEach(r=>{(r instanceof x0||r instanceof o_||r instanceof _0||r instanceof b0||r instanceof S0||r instanceof qk||r instanceof fN||r instanceof mN||r instanceof Xk)&&r.dispose()})})}function J1e(e,t){let r;if("material"in e){let i=e.material;Array.isArray(i)?r=e.material[0].layers.find(n=>n.uuid===t):r=e.material.layers.find(n=>n.uuid===t)}if(r)return r.color.texture.image.img instanceof HTMLVideoElement?r.color.texture.image.img:void 0}var gN=new Map,C0=new Map,Ap=class{constructor(e,t,r){this.data=t,this.delay=0,this.status="stopped";let{layerId:i,loop:n,volume:s,delay:a}=t;if(this.object=r,i===void 0)throw new Error("Missing property");let o=J1e(r,i);o&&(this.videoElement=o,this.videoElement.loop=n===1/0,this.videoElement.autoplay=!0,s!==void 0&&(this.videoElement.volume=s)),a!==void 0&&(this.delay=a),C0.has(r.uuid)?C0.get(r.uuid).push(this):C0.set(r.uuid,[this]),gN.set(e,this),this.pause()}mute(){!this.videoElement||(this.videoElement.muted=!0)}unMute(){!this.videoElement||(this.videoElement.muted=!1)}play(e){if(!this.videoElement)return;let t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e?(this.mute(),this.delay+=150):t?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{if(!this.videoElement)return;let r=this.videoElement.play();r!==void 0&&r.then(i=>{}).catch(i=>{this.play()}),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){!this.videoElement||(this.videoElement.pause(),this.status="paused")}stop(){!this.videoElement||(this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay())}playByToggle(){this.data.toggle==="stop"?this.status==="playing"?this.stop():(this.stop(),this.play()):this.data.toggle==="pause"?this.status==="playing"?this.pause():this.play():(this.stop(),this.play())}dispose(){!this.videoElement||(this.stop(),this.videoElement.muted=!0)}},q8=class{constructor(e){this.data=e}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(e){let t=gN.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t[this.data.interaction](),this.disposeDelay()},this.data.delay)):t[this.data.interaction]())}pauseAllVideosFromObject(e){let t=C0.get(e);!(t!=null&&t.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(r=>r[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(r=>r[this.data.interaction]()))}pauseAllVideos(){let e=[...C0.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(r=>{r[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(r=>{r[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},o_=class{constructor(e,t,r){if(this.data=t,t.interaction==="play")this.interaction=new Ap(e,t,r);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new q8(t);else throw new Error("Missing property")}dispatchBasic(){this.interaction instanceof Ap?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){this.interaction instanceof Ap?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},yL=(()=>{let e,t,r,i;function n(o){!e&&!xL()&&(t==null?void 0:t.sharedGameControlGlobals.createdObjects.length)>0&&(e=requestAnimationFrame(s)),o&&(t=o,i=o.requestRender)}function s(o){let l=r?o-r:0,h=t.sharedGameControlGlobals.createdObjects,c=t.sharedGameControlGlobals.nCreatedPerAction,u=h.length,d=0;for(;d<u;){let p=h[d];p.userData.createdTime===void 0&&(p.userData.createdTime=o),p.userData.lifetime===void 0&&p.userData.quantity===void 0||p.userData.lifetime&&o-p.userData.createdTime<p.userData.lifetime||p.userData.quantity&&c[p.userData.actionId]<=p.userData.quantity?(p.userData.velocity&&(p.position.addScaledVector(p.userData.velocity,l/1e3),p.updateMatrix(),i()),d++):(c[p.userData.actionId]>p.userData.quantity&&c[p.userData.actionId]--,h.splice(d,1),p.removeFromParent(),t.sharedGameControlGlobals.rapierWorld&&p.rigidBody?(t.sharedGameControlGlobals.colliderToEntity.delete(p.rigidBody.collider(0).handle),t.sharedGameControlGlobals.rapierWorld.removeRigidBody(p.rigidBody)):(p.bvhGeometry=void 0,t.sharedGameControlGlobals.entitiesWithTransformAnim=t.sharedGameControlGlobals.entitiesWithTransformAnim.filter(f=>f.bvhGeometry!==void 0)),u--,i())}e=d>0?requestAnimationFrame(s):void 0,r=d>0?o:void 0}function a(){xL()?e&&(cancelAnimationFrame(e),e=void 0,r=void 0):n()}return typeof document<"u"&&document.addEventListener("visibilitychange",a),n})();function xL(){return!!document&&document.hidden}var wL=new Et,e0e=new E,t0e=new E,S0=class{constructor(e,t,r){this.data=e,this.page=t,this.controlsManager=r,this.intervalId=null,this.timeoutIdQueue=[],this.uniqueId=Tt.generateUUID(),this.dispatch=()=>{this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()},this.dispatchFromStart=()=>{this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))},this.dispatchThrottled=Vae(this.dispatch,1e3/this.data.creationSpeed),this.dispatchStart=()=>{this.intervalId===null&&(this.intervalId=window.setInterval(this.dispatch,1e3/this.data.creationSpeed))},this.dispatchStop=()=>{this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null)},this.dispatchInner=()=>{this.timeoutIdQueue.shift();let n=new Yi(this.object);if(n.playModeVisible=!0,n.expand(),this.data.coordinateSystem!=="world"){let a=this.data.coordinateSystem,o=this.page.scene.find(a);o&&(o.updateMatrixWorldSVD(),n.hiddenMatrix.copy(o.matrixWorldRigid))}n.position.fromArray(this.data.position),n.rotation.fromArray(this.data.rotation),n.updateMatrix(),this.page.add(n);let s=this.controlsManager.sharedGameControlGlobals;s.createdObjects.push(n),s.nCreatedPerAction[this.uniqueId]===void 0?s.nCreatedPerAction[this.uniqueId]=1:s.nCreatedPerAction[this.uniqueId]++,n.updateWorldMatrix(!0,!0),n.traverseObject(this.traverseObjectCB),yL(),this.controlsManager.requestRender()},this.traverseObjectCB=n=>{var l,h,c,u;n.hasNonUniformScale&&n.updateMatrixWorldSVD();let s;if(this.controlsManager.sharedGameControlGlobals.rapierWorld){if(n instanceof La)if(n.objectForSample){if(n.objectForSample.dataPatched.physics.fusedBody)return;s=n.object}else return n.object.dataPatched.physics.fusedBody===!0&&n.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(n instanceof Yi)s=n.object;else if(s=n,(l=s.dataPatched.cloner)==null?void 0:l.hideBase)return!0}else{if(n instanceof La)return;n instanceof Yi?s=n.object:s=n}this.data.destroy==="Time"?n.userData.lifetime=this.data.lifetime*1e3:this.data.destroy==="Quantity"&&(n.userData.quantity=this.data.destroyAfterQuantity,n.userData.actionId=this.uniqueId);let a=new E().fromArray(this.data.velocity),o=s.dataPatched;if(!(o.physics.enabled==="visibility"?!o.visible:!o.physics.enabled)&&(this.controlsManager.sharedGameControlGlobals.rapierWorld?(this.controlsManager.addRigidBody(n,s,{fromCreate:!0,dynamic:this.data.dynamic}),this.data.destroy==="Collision"&&((h=n.rigidBody)==null||h.collider(0).setActiveEvents(1),n.userData.hasCollisionDestroy=!0),n.matrixWorld.decompose(e0e,wL,t0e),a.applyQuaternion(wL),this.data.velocity.some(d=>d!==0)&&this.data.dynamic&&((c=n.rigidBody)==null||c.setLinvel(a.divideScalar(this.controlsManager.pixelsPerMeter),!0))):("geometry"in n.object&&this.controlsManager.addBoundsTree(n),this.data.velocity.some(d=>d!==0)&&this.data.dynamic&&(n.userData.velocity=a)),((u=s.dataPatched.physics)==null?void 0:u.fusedBody)===!0))return!0};let i=this.page.scene.find(this.data.object);if(!i)throw new Error("Missing Property");if(this.object=i,this.data.coordinateSystem!=="world"&&!this.page.scene.find(this.data.coordinateSystem))throw new Error("Missing Property");yL(r)}dispose(){this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null),this.timeoutIdQueue.forEach(e=>window.clearTimeout(e)),this.dispatchThrottled.cancel(),this.page.remove(...this.controlsManager.sharedGameControlGlobals.createdObjects),this.controlsManager.sharedGameControlGlobals.createdObjects=[]}},vN=200,xx=.02,wx=.3,r0e=65;new E;var bL=new E,_L=new E,i0e=new E,Li=new E,an=new E,Ql=new E,Pv=new Ae,bx=new Ae,n0e=new Ae;new Ae;var rs=new Et,Vo=new Et,Za=new bi(0,0,0,"YXZ"),s0e=new E(1,0,0),ga=new E(0,1,0),a0e=new E(0,0,1),_x=new E(1,1,1),Cx=new _s,o0e=1,l0e=.025,h0e=16e-6,CL=12,u0e=20,gi=new ra,Ds=new qr,c0e={type:"requestRender"},d0e={type:"updateMatrix"},SL=Math.PI/6,X8=class extends Ni{constructor(e,t,r,i,n,s,a,o,l){var f;super(),this.object=e,this.domElement=t,this.data=r,this.gloabalPhysics=i,this.controlsManager=n,this.cameraFollow=s,this.camera=a,this.page=o,this.sharedAssets=l,this.enableDamping=!0,this.hiddenMatrix0=new Ae,this.target0=new E,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.pixelsPerMeter=vN,this.euler0=new bi(0,0,0,"YXZ"),this.position0Cam=new E,this.quat0Cam=new Et,this.scale0Cam=new E,this.hiddenMatrix0Cam=new Ae,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new ra(new E(0,-40,0),new E(0,40,0)),matrix:new Ae,position:new E,rotation:new Et},this.euler=new bi(0,0,0,"YXZ"),this.eulerDelta=new E,this.lastPosition=new E,this.lastCameraQuaternion=new Et,this.lastCameraPosition=new E,this.PI_2=Math.PI/2,this.prevMouse=new X,this.velocityTarget=new E,this.velocity=new E,this.directionXZ=new E,this.rotVelocityStick=new E,this.rotVelocityTarget=new E,this.rotVelocity=new E,this.rotDirection=new E,this.nonColliderRotOffset=new Ae,this.nonColliderPosOffset=new Ae,this.firstPointerId=-1,this.rot=new E,this.path=[],this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0,run:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new Ae,this.objectToTarget=new E,this.objectToTarget0=new E,this.objectToCamXZ=new E,this.objectToCamXZ0=new E,this.targetToCamera=new E,this.targetToCamera0=new E,this.cameraPolarAxis0=new E,this.targetPos=new E,this.targetQuat=new Et,this.lerpFactorPos=new E().setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new Et,this.objXZQuatInv=new Et,this.objXZRotMat=new Ae,this.isFirstPerson=!1,this.actions={},this.didHit=!1,this.groundVelocity=new E,this.pushedVelocity=new E,this.groundYRotation=0,this.objectRealQuat=new Et,this.colliderWorldQuat=new Et,this.groundNormal=new E,this.groundTilt=new Et,this.groundTiltInv=new Et,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.navMeshPathDest=null,this.position=new E,this.quaternion=new Et,this.scale=new E,this.initialAction=!0,this.onPointerDown=m=>{m.target!==this.domElement||this.firstPointerId!==-1||(this.firstPointerId=m.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.rotBy!=="keys"&&!ms&&(!VA||GA>=15.5)&&this.domElement.requestPointerLock(),this.prevMouse.set(m.clientX,m.clientY))},this.onPointerUp=m=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),m.pointerType==="mouse"&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=m=>{if(m.pointerId!==this.firstPointerId)return;let g=m.clientX-this.prevMouse.x,v=m.clientY-this.prevMouse.y;this.prevMouse.set(m.clientX,m.clientY),m.pointerType==="mouse"&&this.rotBy!=="keys"&&(VA&&GA<15.5&&!ms?(this.eulerDelta.y=-g*this.mouseOrbitSensitivity,this.eulerDelta.x=-v*this.mouseOrbitSensitivity):(this.eulerDelta.y=-m.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-m.movementY*this.mouseOrbitSensitivity)),m.pointerType!=="mouse"&&this.rotByTouch==="drag"&&(this.eulerDelta.y=-g*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-v*this.mouseOrbitSensitivity*5),this.controlsManager.requestRender()},this.onPointerlockChange=m=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?X8.isLocked=!0:X8.isLocked=!1},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.handleVisibilityChange=()=>{if(document!=null&&document.hidden)for(let m in this.movementState)this.movementState[m]=0},this.onKeyDown=m=>{!(m.target instanceof HTMLInputElement)&&(m.code==="ArrowLeft"||m.code==="ArrowUp"||m.code==="ArrowRight"||m.code==="ArrowDown"||m.code==="Space")&&m.preventDefault();for(let g of this.keyAssignments)if(m.key.toUpperCase()===g[1]||m.key===g[1]){this.movementState[g[0]]=1;break}this.controlsManager.requestRender()},this.onKeyUp=m=>{for(let g of this.keyAssignments)if(m.key.toUpperCase()===g[1]||m.key===g[1]||m.code.slice(3,m.code.length).toUpperCase()===g[1]){this.movementState[g[0]]=0;break}},this.copyVRGamePadValues=(m,g)=>{for(let v=2;v<4;v++){let y=m.axes[v];g===0?v===2?this.movementState.movePosX=y:this.movementState.movePosZ=y:(m.buttons[3].pressed?this.movementState.jump=1:this.movementState.jump=0,v===2?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(y)>=.3&&(this.vrEulerYOffset+=y<0?1:-1),this.movementState.rotPosY=y):this.moveMode==="fly"&&(this.movementState.moveNegY=y))}},this.sharedGameControlGlobals=n.sharedGameControlGlobals,e===a&&(this.isFirstPerson=!0),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.euler0.setFromQuaternion(this.quaternion,"YXZ");let h=this.euler0.clone(),c=h.y;if(this.objectRealQuat.copy(this.quaternion),h.y=0,this.quaternion.setFromEuler(h),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),h.set(0,c,0),this.quaternion.setFromEuler(h),this.rot.setFromEuler(h),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||this.cameraFollow===!0)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),this.cameraFollow===!0){this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),this.camera.parent?(this.camera.hiddenMatrix.copy((f=this.camera)==null?void 0:f.parent.matrixWorld),this.camera.matrix.copy(this.camera.matrixWorld)):this.camera.hiddenMatrix.identity(),this.camera.matrix.copy(this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let m=new E(0,0,-1).applyQuaternion(this.camera.quaternion),g=new E().subVectors(this.position,this.camera.position);this.objectToCamXZ.copy(g),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ);let v,y;Math.abs(m.y)<1e-6?(g.y=0,m.y=0,y=g.projectOnVector(m)):g.y/m.y>0?y=m.multiplyScalar(g.y/m.y):y=m.multiplyScalar(g.length()),this.targetToCamera0.copy(y).negate(),v=this.camera.position.clone().add(y),this.objectToTarget0.subVectors(v,this.position);let x=new bi().setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-x.x,x.x=0,x.z=0,x.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(x)}if(this.object instanceof $i&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.rotByTouch=r.rotByTouch??"joystick",this.rotBy=r.rotBy??"keys",this.rotationMode=r.rotationMode??"normal",this.moveMode=r.moveMode??"walk",this.collisionEnabled=r.collisionEnabled,this.speedTranslate=(r.speedTranslate??250)*o0e,this.speedOrbit=(r.speedRotate??100)*l0e,this.mouseOrbitSensitivity=(r.speedRotate??100)*h0e,this.keyAssignments=r.keyAssignments.map(m=>{let g=[m[0],m[1]];return g[1]==="▲"?g[1]="ArrowUp":g[1]==="◀"?g[1]="ArrowLeft":g[1]==="▼"?g[1]="ArrowDown":g[1]==="▶"?g[1]="ArrowRight":g[1]==="⇧"?g[1]="Shift":g[1]==="↵"?g[1]="Enter":g[1]==="Space"?g[1]=" ":g[1]==="⌘"?g[1]="Meta":g[1]==="Ctrl"?g[1]="Control":g[1]==="Esc"&&(g[1]="Escape"),g}),r.rotBy==="mouse"){let m;m=this.keyAssignments.findIndex(g=>g[0]==="rotNegX"),m!==-1&&(this.keyAssignments[m][1]=""),m=this.keyAssignments.findIndex(g=>g[0]==="rotPosX"),m!==-1&&(this.keyAssignments[m][1]=""),m=this.keyAssignments.findIndex(g=>g[0]==="rotPosY"),m!==-1&&(this.keyAssignments[m][1]=""),m=this.keyAssignments.findIndex(g=>g[0]==="rotNegY"),m!==-1&&(this.keyAssignments[m][1]="")}this.lerpFactorPosStart=1-.02**(1/((r.delayPos[0]??.3)*60)),this.lerpFactorPosEnd=1-.02**(1/((r.delayPos[1]??.3)*60)),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/((r.delayRot[0]??.3)*60)),this.lerpFactorRotEnd=1-.02**(1/((r.delayRot[1]??.3)*60)),this.lerpFactorPosCamera=1-.02**(1/((r.delayPosCamera??.3)*60)),this.lerpFactorRotCamera=1-.02**(1/((r.delayRotCamera??.3)*60)),this.gravity=(this.gloabalPhysics.gravity??$p.defaultData.gravity)*CL,this.usePhysics=this.gloabalPhysics.usePhysics??$p.defaultData.usePhysics,this.jumpPower=r.jumpPower*u0e,this.resetYPosition=this.position.y+Math.abs(r.resetYPosition)*(this.gravity>0?1:-1),this.alignToGround=r.alignToGround??!1,this.orientMode=r.autoOrientMove?r.orientMode:"none",this.orientWith=r.orientWith??F3.defaultDataThirdPerson.orientWith,this.slopeThresh=r0e*Math.PI/180,r.collider.type==="capsule"?(this.collider.radius=r.collider.radius,this.collider.segment.start.y=r.collider.height/2-r.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=r.collider.height*xx/this.pixelsPerMeter,this.stepThresh=r.collider.height*wx/this.pixelsPerMeter,this.colliderHeight=r.collider.height):r.collider.type==="sphere"?(this.collider.radius=r.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*r.collider.radius*xx/this.pixelsPerMeter,this.stepThresh=2*r.collider.radius*wx/this.pixelsPerMeter,this.colliderHeight=r.collider.radius*2):(this.offset=r.collider.height*xx/this.pixelsPerMeter,this.stepThresh=r.collider.height*wx/this.pixelsPerMeter,this.colliderHeight=r.collider.height),this.collider.type=r.collider.type;let u=new E().fromArray(r.collider.position),d=new Et().setFromEuler(new bi().fromArray([...r.collider.rotation,"XYZ"]));this.collider.position.copy(u).multiply(this.scale),this.collider.rotation.copy(d),this.collider.matrix.compose(u,d,_x),r.cameraXAxis!==void 0&&(this.cameraXAxis=r.cameraXAxis,this.cameraYAxis=r.cameraYAxis,this.minPolarAngle=r.cameraRotXLimits[0],this.maxPolarAngle=r.cameraRotXLimits[1],this.minAzimuthAngleRel=r.cameraRotYLimits[0],this.maxAzimuthAngleRel=r.cameraRotYLimits[1]),this.forwardDir=r.forwardDirection??"-z",this.runMultiplier=r.runMultiplier??2;let p=r.navmesh.destinationHelperRadius*2;if(p>0){let m=new ft;m.push({fi:0,data:{...Dn.defaultData("light","phong"),alpha:0},id:"layer1"}),m.push({fi:0,data:{...Dn.defaultData("color"),color:r.navmesh.destinationHelperColor,alpha:r.navmesh.destinationHelperColor.a},id:"layer2"});let g=new Nb({layers:m},{scene:this.page.scene,shared:this.sharedAssets});this.navMeshPathDest=new kn(wz.create({parameters:{width:p,height:p/10,hollow:.7}}),g),this.navMeshPathDest.material.userData.opacity0=r.navmesh.destinationHelperColor.a}this.activate()}reset(e=!1){if(this.object.hiddenMatrix.copy(this.hiddenMatrix0),e){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity();let t=new bi().setFromQuaternion(this.quaternion,"YXZ"),r=t.y;this.objectRealQuat.copy(this.quaternion),t.y=0,this.quaternion.setFromEuler(t),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),t.set(0,r,0),this.quaternion.setFromEuler(t),this.rot.setFromEuler(t),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}else this.object instanceof $i?this.object.matrixAutoUpdate=!0:this.object.updateMatrix();this.cameraFollow===!0&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.controlsManager.requestRender()}activate(){this.instantiateActions(),this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.addEventListener("visibilitychange",this.handleVisibilityChange)}deactivate(){this.disposeActions(),this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.removeEventListener("visibilitychange",this.handleVisibilityChange)}dispose(){var e;this.deactivate(),(e=this.navMeshPathDest)!=null&&e.parent&&this.page.remove(this.navMeshPathDest)}instantiateActions(){let e=this.data,t=this.page,r=this.sharedAssets,i=this.object;e.gameActions!==void 0&&Object.entries(e.gameActions).forEach(([n,s],a)=>{s.forEach(({id:o,data:l})=>{try{this.actions[n]===void 0&&(this.actions[n]=[]),l.type==="Transition"?this.actions[n].push(new b0(l,t,r)):l.type==="Animation"?this.actions[n].push(new _0(l,t,this.controlsManager.eventManager.animationControls)):l.type==="Audio"?this.actions[n].push(new x0(o,l,i,r)):l.type==="Video"?this.actions[n].push(new o_(o,l,i)):l.type==="Create"&&this.actions[n].push(new S0(l,t,this.controlsManager))}catch{}})}),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"),this.initialAction&&(this.initialAction=!1)}disposeActions(){this.initialAction=!1,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),Zn(this.actions)}dispatchStartEvent(e){this.actions[e]!==void 0&&(this.actionState[e]||(this.actionState[e]=!0,this.actions[e].forEach(t=>{t instanceof b0?t.play():t instanceof _0?t.play(this.initialAction===!1):t instanceof S0?t.dispatchStart():t instanceof x0&&t.dispatchGameControl("start")})))}dispatchStopEvent(e){this.actions[e]!==void 0&&(!this.actionState[e]||(this.actionState[e]=!1,this.actions[e].forEach(t=>{t instanceof b0?(t.stop(),t.object.currentState!==null&&t.object.changeSelectedState(null,{scene:this.page.scene,shared:this.sharedAssets})):t instanceof _0||(t instanceof S0?t.dispatchStop():t instanceof x0&&t.dispatchGameControl("stop"))})))}get colliderWorldPosition(){return Li.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.position)}update(e,t,r){var o,l,h,c,u,d,p,f,m,g,v;if(this.gravity<0?this.position.y<this.resetYPosition:this.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let i=(this.isFirstFrame?16.6:e)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let n=i*60,s=!1;if(this.usePhysics&&this.collisionEnabled){let y=an.set(0,(this.velocity.y===0?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/(10*CL),1)*(this.gravity>0?1:-1):this.velocity.y)*i,0).divideScalar(this.pixelsPerMeter),x=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,y,(o=this.object.rigidBody)==null?void 0:o.collider(0).shape,1,!1,16,void 0,void 0,this.object.rigidBody);if(x){this.onObject=!0,this.groundNormal.set(x.normal2.x,x.normal2.y,x.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(s=!0),((l=x.collider.parent())==null?void 0:l.bodyType())===0&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);let w=x.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let _ of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(_.rigidBody===w&&_.userData.isFollowingObj!==this.object.uuid){(_.hasNonUniformScale?_.matrixWorldRigid:_.matrixWorld).decompose(Li,Vo,an),this.groundVelocity.subVectors(Li,_.prevT),this.object.getWorldPosition(an).add(this.collider.position).sub(Li),this.groundYRotation=Za.setFromQuaternion(Vo).y-_.prevR.y,Ql.copy(an).applyAxisAngle(ga,this.groundYRotation),this.groundVelocity.add(Ql.sub(an)).divideScalar(i);break}}else this.onObject=!1}if(this.moveMode==="walk"&&this.collisionEnabled&&(this.movementState.jump===1&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*n),this.moveMode==="fly"&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,this.forwardDir==="+z"&&this.directionXZ.multiplyScalar(-1),this.directionXZ.manhattanLength()>0&&(this.path=[]),this.navMeshPathDest){let y=this.navMeshPathDest.material;if(this.moveMode==="walk"&&this.path.length>1){this.navMeshPathDest.position.copy(this.path[this.path.length-1]),this.navMeshPathDest.parent||this.page.add(this.navMeshPathDest);let x=Li.subVectors(this.path[1],this.position),w=an.subVectors(this.path[1],this.path[0]);x.dot(w)<0?this.path.shift():(this.directionXZ.x=w.x,this.directionXZ.z=w.z),y.opacity=y.userData.opacity0}else y.opacity-=.05*y.userData.opacity0,this.navMeshPathDest.material.opacity<=0&&this.navMeshPathDest.parent&&this.page.remove(this.navMeshPathDest)}this.directionXZ.normalize(),this.movementState.run?this.moveForce=this.runMultiplier:this.moveForce=1,this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce,this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce,(this.moveMode==="walk"?this.velocityTarget.x+this.velocityTarget.z===0:this.velocityTarget.manhattanLength()===0)?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.moveMode==="walk"&&(this.lerpFactorPos.y=1),this.didHit===!1&&this.pushedVelocity.manhattanLength()===0||this.usePhysics===!1?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**n),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**n),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**n)):this.velocity.copy(this.velocityTarget),(this.moveMode==="walk"?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.movementState.run?(this.dispatchStopEvent("move"),this.dispatchStartEvent("run")):(this.dispatchStopEvent("run"),this.dispatchStartEvent("move"))));let a=i0e.copy(this.velocity);if(this.orientMode!=="none"&&this.isFirstPerson===!1){let y=an.copy(a);y.y=0,a.set(0,a.y,y.length()*(this.forwardDir==="+z"?1:-1))}if(this.directionXZ.manhattanLength()>0&&this.orientMode!=="none")if(this.orientWith==="camera"&&this.path.length<=1){let y=Li;this.camera.getWorldDirection(y);let x=Ql.copy(ga).multiplyScalar(y.dot(ga));y.sub(x);let w=an.copy(this.directionXZ);w.x*=-1,this.rot.y=y.angleTo(w)*(y.cross(w).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera}else this.rot.y=(this.path.length>1?0:this.euler.y)+Math.atan2(-this.directionXZ.z,this.directionXZ.x)+Math.PI/2*(this.forwardDir==="+z"?1:-1);if(Za.setFromVector3(this.rot),this.moveMode==="walk"&&(Za.x=0),a.applyEuler(Za),s&&(Vo.setFromUnitVectors(ga,this.groundNormal),a.applyQuaternion(Vo)),r){let y=Za.set(0,this.vrEulerYOffset*SL,0);r.applyEuler(y),a.x+=r.x,a.z+=r.z,this.nonColliderPosOffset.elements[13]+=r.y*i}if(this.usePhysics===!0){let y=an;this.pushedVelocity.set(0,0,0);for(let x of this.sharedGameControlGlobals.entitiesWithTransformAnim){let w=Ql.setFromMatrixPosition(x.matrixWorld).sub(x.prevT).divideScalar(i).divideScalar(this.pixelsPerMeter),_=x.rigidBody.collider(0).castCollider(w,this.object.rigidBody.collider(0),Li.copy(a).divideScalar(this.pixelsPerMeter),i,!1);w.multiplyScalar(this.pixelsPerMeter);let b=Gt.is(x)?x:x.object;if(_!==null&&this.lastHitObj!==b){let S;x instanceof Yi&&(S=x);let C=this.sharedGameControlGlobals.entityToCollisionEvents[b.uuid];if(C)for(let M of C)M.data.target==="character"&&(M.dispatch(S),b.dispatchEvent(Z8));this.lastHitObj=b}if(_!==null){this.pushedVelocity.copy(w),y.copy(_.normal1).applyQuaternion(x.quaternion);break}}if(this.pushedVelocity.manhattanLength()!==0){let x=y.dot(a);x<0&&a.addScaledVector(y,-x),a.add(this.pushedVelocity)}else a.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),this.rotationMode==="normal"&&(this.movementState.rotPosX||this.movementState.rotNegX)||this.rotationMode==="steer"&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||this.moveMode==="walk")?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,this.rotationMode==="normal"&&(this.movementState.rotPosY||this.movementState.rotNegY)||this.rotationMode==="steer"&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(i),this.rotVelocityStick),this.rotVelocityTarget.manhattanLength()===0?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**n):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**n),this.euler.x+=this.rotVelocity.x*i,this.euler.y+=this.rotVelocity.y*i+this.groundYRotation,this.rotVelocityTarget.y===0&&this.directionXZ.manhattanLength()===0?this.rotationAccumWhenOrientWithCamera=0:(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*i),this.isFirstPerson===!1&&this.orientMode!=="none"&&this.directionXZ.manhattanLength()>0){if(this.orientMode==="radial"){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(ga,this.euler.y-this.euler0.y);let y=an.copy(this.objectToCamXZ).normalize(),x=Ql.copy(a).multiplyScalar(i);x.y=0;let w=x.sub(Li.copy(y).multiplyScalar(x.dot(y))).cross(y).y;this.euler.y-=Math.atan2(w,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*i+this.groundYRotation,this.rotVelocityTarget.y!==0&&(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.euler.y=this.rot.y);if(this.cameraFollow===!0&&(this.moveMode==="walk"?this.cameraXAxis==="Limit"?this.euler.x=Tt.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=Tt.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):this.cameraXAxis==="Limit"&&(this.euler.x=Tt.clamp(this.euler.x,-this.PI_2,this.PI_2))),this.moveMode==="fly"?this.rot.x=this.euler.x:this.isFirstPerson&&(t?(Za.copy(t),Za.y=0):(Za.copy(this.euler),Za.y=0),this.nonColliderRotOffset.makeRotationFromEuler(Za)),t&&(this.moveMode==="walk"?(this.rot.y=t.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(t),this.rot.y+=this.vrEulerYOffset*SL),rs.setFromAxisAngle(s0e,this.rot.x),Vo.setFromAxisAngle(ga,this.rot.y),Vo.multiply(rs),rs.setFromAxisAngle(a0e,this.rot.z),Vo.multiply(rs),this.quaternion.copy(Vo),this.objectRealQuat.multiplyQuaternions(this.quaternion,this.objXZQuat),this.objectRealQuat.multiply(this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let y=an.copy(a).multiplyScalar(i/this.pixelsPerMeter),x=null;this.didHit=!1;let w=new E;for(let _=0;_<5;_++){let b=y.length(),S=Ql.copy(y).normalize();if(x=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(w),this.colliderWorldQuat,S,(h=this.object.rigidBody)==null?void 0:h.collider(0).shape,b,!1,24,void 0,void 0,this.object.rigidBody),x!==null){this.didHit=!0;let C=this.sharedGameControlGlobals.colliderToEntity.get(x.collider.handle);if(C!==this.lastHitObj&&_===0){this.lastHitObj=C;let L=this.sharedGameControlGlobals.entityToCollisionEvents[C==null?void 0:C.uuid];if(L){for(let D of L)if(D.data.target==="character"){let O=((c=this.sharedGameControlGlobals.rapierWorld)==null?void 0:c.getCollider(x.collider.handle))._parent,z;if(C.cloner){for(let q of C.cloner.children)if(q.rigidBody===O){z=q;break}}D.dispatch(z),C.dispatchEvent(Z8)}}}let M=bL.set(x.normal2.x,x.normal2.y,x.normal2.z).applyQuaternion(this.colliderWorldQuat),A=_L.copy(S).multiplyScalar(x.toi).dot(M),T=x.toi;if(T===0&&(this.position.y+=this.offset*this.pixelsPerMeter),A>this.offset&&(T=x.toi*(A-this.offset)/A,w.addScaledVector(S,T)),y.copy(S).multiplyScalar(b-T),Math.acos(-M.y)>this.slopeThresh){let L=this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(w),D=Ql.copy(x.witness2).applyQuaternion(this.colliderWorldQuat);D.y=0;let O=L.add(D);O.y+=this.stepThresh;let z=this.sharedGameControlGlobals.rapierWorld.castShape(O,this.colliderWorldQuat,y,(u=this.object.rigidBody)==null?void 0:u.collider(0).shape,1,!1,24,void 0,void 0,this.object.rigidBody);z!==null&&z.toi===0&&(M.y=0,M.normalize())}y.addScaledVector(M,-y.dot(M))}else{_===0&&this.directionXZ.manhattanLength()!==0&&(this.lastHitObj=null),w.add(y);break}}this.position.addScaledVector(w,this.pixelsPerMeter),(d=this.object.rigidBody)==null||d.setTranslation(Li.copy(this.position).divideScalar(this.pixelsPerMeter),!0),(p=this.object.rigidBody)==null||p.setRotation(rs.copy(this.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let y=this.onObject?1:5,x=a.multiplyScalar(i/y);for(let w=0;w<y;w++)this.position.add(x),w===0&&this.checkTrigger(),this.collisionAdjustment(i/y)}else this.position.addScaledVector(a,i);if(this.moveMode==="walk"&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.matrix.compose(this.position,this.quaternion,this.scale),this.object.matrixWorldNeedsUpdate=!0,this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),this.cameraFollow===!0){this.updateFollowArms();let y=this.objectToTarget.add(this.position),x=this.targetToCamera.add(y);Pv.lookAt(x,y,ga).setPosition(x),Pv.decompose(this.targetPos,this.targetQuat,Li),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**n),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**n),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraYAxis==="Limit"&&this.orientMode==="cartesian"&&(this.euler.y=Tt.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=Tt.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.object.dispatchEvent(d0e),this.path.length<2&&this.lastPosition.distanceToSquared(this.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(this.camera===void 0||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&(this.moveMode==="fly"||this.onObject===!0||this.collisionEnabled===!1)&&((m=(f=this.navMeshPathDest)==null?void 0:f.material)==null?void 0:m.opacity)<-.04*((v=(g=this.navMeshPathDest)==null?void 0:g.material)==null?void 0:v.userData.opacity0)?!1:(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.position),this.object.dispatchEvent(c0e),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let e=rs.setFromAxisAngle(ga,this.cameraYAxis==="Limit"&&this.orientMode!=="radial"?Tt.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&this.objectToTarget.applyQuaternion(e);let t;this.cameraXAxis==="Limit"?t=Tt.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):t=Tt.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let r=Li.copy(this.cameraPolarAxis0);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&r.applyQuaternion(e);let i=Vo.setFromAxisAngle(r,t);this.cameraYAxis!=="Locked"&&this.targetToCamera.applyQuaternion(e),this.cameraXAxis!=="Locked"&&this.targetToCamera.applyQuaternion(i)}groundTiltAdjustment(e){ga.angleTo(e)*180/Math.PI<15||ga.angleTo(e)*180/Math.PI>85?rs.identity():rs.setFromUnitVectors(ga,e),this.groundTilt.slerp(rs,.06),this.groundTiltInv.copy(this.groundTilt).invert()}checkTrigger(){let e;for(let t=0;t<this.sharedGameControlGlobals.triggers.length;t++){let[r,i,n,s]=this.sharedGameControlGlobals.triggers[t];for(let a=0;a<this.sharedGameControlGlobals.entitiesWithTransformAnim.length;a++){let o=this.sharedGameControlGlobals.entitiesWithTransformAnim[a];if(n===o||s.isValidTriggeringObject(Gt.is(o)?o:o.object)===!1)continue;let l=bx.copy(n.matrixWorld).decompose(Li,rs,an).compose(Li,rs,_x).multiply(i),h=Pv.copy(o.matrixWorld).invert().multiply(l);r instanceof qr?e=o.bvhGeometry.boundsTree.intersectsBox(r,h):(Cx.radius=r,Cx.center.setFromMatrixPosition(h),e=o.bvhGeometry.boundsTree.intersectsSphere(Cx)),e?s.currentIntersectedObjects.indexOf(o)===-1&&(s.currentIntersectedObjects.push(o),s.dispatch(),n.dispatchEvent(wme)):s.currentIntersectedObjects=s.currentIntersectedObjects.filter(c=>c!==o)}}}collisionAdjustment(e){var n;let t=_L.set(0,0,0);this.object.matrix.compose(this.position,this.quaternion,this.scale);let r=Pv.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(Li,rs,an).compose(Li,rs,_x);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(s=>{if(s===this.object||s.isDescendantOf(this.object))return;Ds.makeEmpty(),s.updateMatrixWorldSVD();let a=s.matrixWorldRigid,o=bx.copy(a).invert(),l=n0e.copy(bx).multiply(r);gi.copy(this.collider.segment),gi.start.applyMatrix4(l),gi.end.applyMatrix4(l);let h=bL.copy(this.position).applyMatrix4(o);Ds.expandByPoint(gi.start),Ds.expandByPoint(gi.end),Ds.min.addScalar(-this.collider.radius),Ds.max.addScalar(this.collider.radius),s.bvhGeometry.boundsTree.shapecast({traverseBoundsOrder(c){return c.distanceToPoint(gi.end)},intersectsBounds:c=>c.intersectsBox(Ds),intersectsTriangle:c=>{let u=Li,d=an,p=c.closestPointToSegment(gi,u,d);if(p<this.collider.radius){let f=this.collider.radius-p,m=d.sub(u).normalize(),g=Ql.copy(h);g.addScaledVector(m,f);let v=g.applyMatrix4(a).sub(this.position);t.add(v),gi.start.addScaledVector(m,f),gi.end.addScaledVector(m,f)}}})}),Ds.makeEmpty(),gi.copy(this.collider.segment),gi.start.applyMatrix4(r),gi.end.applyMatrix4(r),Ds.expandByPoint(gi.start),Ds.expandByPoint(gi.end),Ds.min.addScalar(-this.collider.radius),Ds.max.addScalar(this.collider.radius),(n=this.sharedGameControlGlobals.staticMeshBVH)==null||n.shapecast({traverseBoundsOrder(s){return s.distanceToPoint(gi.end)},intersectsBounds:s=>s.intersectsBox(Ds),intersectsTriangle:s=>{let a=Li,o=an,l=s.closestPointToSegment(gi,a,o);if(l<this.collider.radius){let h=this.collider.radius-l,c=o.sub(a).normalize();this.alignToGround&&this.groundTiltAdjustment(c),t.addScaledVector(c,h),gi.start.addScaledVector(c,h),gi.end.addScaledVector(c,h)}}}),this.onObject=Math.abs(t.y)>Math.abs(e*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let i=Math.max(0,t.length()-1e-5);t.normalize().multiplyScalar(i),this.position.add(t)}},yN=X8;yN.isLocked=!1;var p0e=hf(sR());function sl(e,t){let r=new dt;if(!e.getAttribute("position"))return r.setAttribute("position",new Ke([],3)),r.setIndex([]),r;let{positions:i,triIndices:n}=jy(e.getAttribute("position"),e.getIndex());return r.setAttribute("position",new Ke(i,3)),r.setIndex(n),t&&r.applyMatrix4(t),r}var f0e=new Ae,m0e=new Ae,Ka=[[0,0,0],[0,0,0],[0,0,0]];function xN(e){let t=e.elements;Ka[0][0]=t[0],Ka[0][1]=t[4],Ka[0][2]=t[8],Ka[1][0]=t[1],Ka[1][1]=t[5],Ka[1][2]=t[9],Ka[2][0]=t[2],Ka[2][1]=t[6],Ka[2][2]=t[10];let{u:r,v:i}=(0,p0e.SVD)(Ka),n=f0e.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),s=m0e.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1);return n.multiply(s.transpose())}var g0e=class extends QR{constructor(){super(),this.layers.enable(3),this.layers.enable(8)}setFromCamera(e,t){t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):t.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e,t=!0,r=[]){return e.forEach(i=>{i.visible&&this.intersectObject(i,t,r)}),r}createRaycastLineHelper(){let e=new eu({color:65280,linewidth:10}),t=new E(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),r=new E(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),i=this.camera.far-this.camera.near,n=new E().addVectors(t,r.multiplyScalar(i)),s=new dt;return s.setFromPoints([t,n]),new c3(s,e)}},wN=e=>e instanceof vm||e instanceof Mp;function v0e(e,t){return e.distance-t.distance}function bN(e,t,r){if(!(!nl(t)||!t.visible)){Ma(t)&&t.raycast(e,r);for(let i of t.children)bN(e,i,r)}}function Y8(e,t,r){if(!r.some(n=>K3(e,n)!==void 0))return[];let i=[];return t.children.forEach(n=>bN(e,n,i)),i.sort(v0e),i}function Q8(e){let t=[];if(e.length){let r=e[0].object;nl(r)&&t.push(r);let i=r.parent;for(;i;)wN(i)&&t.push(i),i=i.parent}return t}function K3(e,t){if(Ma(t)){if(t.visible){let r=[];return t.raycast(e,r),r.length?r[0]:void 0}}else if(wN(t))return _N(e,t)}function _N(e,t){if(!(!nl(t)||!t.visible)){if(Ma(t)){let r=[];if(t.raycast(e,r),r.length)return r[0]}for(let r of t.children){let i=_N(e,r);if(i)return i}}}function y0e(e,t,r){return{x:(e-(r.left+window.scrollX))/r.width*2-1,y:-((t-(r.top+window.scrollY))/r.height)*2+1}}var x0e=class{constructor(e,t,r,i,n,s,a,o){this.renderer=e,this.publish=t,this.scene=r,this.getCamera=i,this.sharedAssets=n,this.requestRender=s,this.isExport=a,this.frame=o,this.raycaster=new g0e,this.raycasterNeedsUpdate=!0,this._useWindowEvents=!1,this._useWindowEvents=t.mouseEventTarget==="window",this.domElement=e.domElement,this.eventElement=this._useWindowEvents?window:e.domElement}get stopRaycast(){return this.publish.stopRaycast}get page(){return this.scene.activePage}set useWindowEvents(e){this._useWindowEvents=e,this.eventElement=e?window:this.renderer.domElement}get useWindowEvents(){return this._useWindowEvents}updateRaycaster(e){var n;if(!this.raycasterNeedsUpdate)return;this.raycasterNeedsUpdate=!1;let{pageX:t,pageY:r}=((n=e.touches)==null?void 0:n.length)>0?e.touches[0]:e,i=this.domElement.getBoundingClientRect();this.raycaster.setFromCamera(y0e(t,r,i),this.getCamera())}},CN=(e=>(e[e.keydown=0]="keydown",e[e.keyup=1]="keyup",e[e.pointerdown=2]="pointerdown",e[e.pointerup=3]="pointerup",e[e.pointermove=4]="pointermove",e[e.wheel=5]="wheel",e[e.scroll=6]="scroll",e))(CN||{}),Io=class{constructor(e){this.eventContext=e,this.domEventsNeeded=new Set,this.hasVideoAction=!1}connect(){}disconnect(){}},l_=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],SN=e=>{var t;return(t=l_.find(([r,i])=>i===e))==null?void 0:t[0]},Fm=e=>{var t;return(t=l_.find(([r])=>r===e))==null?void 0:t[1]},w0e=(e,t)=>{let r=SN(e);if(r){let i=new CustomEvent(r,{bubbles:!0});return Object.defineProperty(i,"target",{writable:!1,value:t}),i}},b0e=class extends Io{constructor(e){super(e),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=r=>{var s;if(!r.eventName||!r.target||r.eventName==="Scroll")return;let i=(s=this.splineEvents[SN(r.eventName)])==null?void 0:s[r.target.uuid];if(!i)return;r.eventName==="Scroll"&&r.deltaY!==void 0&&Object.assign(i,{deltaY:r.deltaY});let{domElement:n}=this.eventContext;n.dispatchEvent(i)};let{page:t}=this.eventContext;t.traverseEntity(r=>{var i,n;if((i=r.data)!=null&&i.events.length){for(let[s,a]of l_)if(r.data.events.some(o=>o.data.type===a&&!o.data.disabled)){this.objectsPerEvents.has(s)?(n=this.objectsPerEvents.get(s))==null||n.push(r):this.objectsPerEvents.set(s,[r]);let o={id:r.uuid,name:r.name},l=w0e(a,o),h=this.splineEvents[s];h?h[r.uuid]=l:this.splineEvents[s]={[r.uuid]:l}}}})}connect(){this.objectsPerEvents.forEach(e=>{e.forEach(t=>{t.addEventListener("beginEvent",this.onBeginEvent)})})}disconnect(){this.objectsPerEvents.forEach(e=>{e.forEach(t=>{t.removeEventListener("beginEvent",this.onBeginEvent)})})}},_0e=class{constructor(e,t,r,i,n,s){if(this.id=e,this.data=t,this.object=r,this.entered=!1,this.alreadyPlayedNonTogglingActions=new Set,this.useToggle=t.toggle,(t.type==="KeyDown"||t.type==="KeyUp"||t.type==="KeyPress")&&!t.key)throw new Error("Missing property");this.actions=Cs(t,t.actions,i,n,s,r)}disconnect(){Zn(this.actions)}dispatchHeld(e){this.actions.Create.forEach(t=>{e&&t.dispatchThrottled.cancel(),t.dispatchThrottled()})}dispatch(e=!1){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this?(t.object.currentTransitionEvent=this,t.init()):this.useToggle===!1&&this.alreadyPlayedNonTogglingActions.add(t)}),this.useToggle?(this.actions.Transition.forEach(t=>{t.toggle()}),this.actions.Animation.forEach(t=>{t.toggle()}),this.actions.SwitchCamera.forEach(t=>{t.toggle()})):this.data.type==="MousePress"||this.data.type==="KeyPress"?this.entered||(this.entered=!0,this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatchStart())):(this.actions.Transition.some(t=>t.playing)||this.actions.Transition.forEach(t=>{this.alreadyPlayedNonTogglingActions.has(t)===!1&&t.play()}),this.actions.SwitchCamera.some(t=>t.playing)||this.actions.SwitchCamera.forEach(t=>{t.play()}),this.actions.Animation.forEach(t=>{t.play()})),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),e===!1&&this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()})}dispatchRelease(){this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Animation.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()),this.actions.Create.forEach(e=>e.dispatchStop()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()})}},C0e=class extends Io{constructor(e,t){super(e),this.objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},this.canvasMouseEvents=[],this.windowMouseEvents=[],this.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},this.heldKeys={},this.heldKeysPress={},this._prevObjects=[],this.onWindowMouseDown=n=>{(n.target===this.eventContext.domElement||n.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(s=>{(s.data.type==="MouseDown"||s.data.type==="MousePress")&&s.dispatch()}),this.windowMouseEvents.forEach(s=>{(s.data.type==="MouseDown"||s.data.type==="MousePress")&&s.dispatch()})},this.onWindowMouseUp=n=>{(n.target===this.eventContext.domElement||n.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(s=>{s.data.type==="MouseUp"?s.dispatch():s.data.type==="MousePress"&&s.dispatchRelease()}),this.windowMouseEvents.forEach(s=>{s.data.type==="MouseUp"?s.dispatch():s.data.type==="MousePress"&&s.dispatchRelease()})},this.onMouseDown=n=>{ht.length>1||(this.eventContext.updateRaycaster(n),this.handleMouseEvent("MouseDown"))},this.onMouseUp=n=>{ht.length>1||(this.eventContext.updateRaycaster(n),this.handleMouseEvent("MouseUp"))},this.onMousePressDown=n=>{ht.length>1||(this.eventContext.updateRaycaster(n),this.handleMousePressEvent())},this.onMousePressRelease=n=>{ht.length>1||(this.eventContext.updateRaycaster(n),this.handleMousePressEvent(!0))},this.onKeyDown=n=>{this.heldKeys[n.key]||(this.handleKeyEvent(n,"KeyDown"),this.handleKeyEventHeld(n,"KeyDown",!0)),this.heldKeys[n.key]=!0},this.onKeyUp=n=>{this.handleKeyEvent(n,"KeyUp"),this.handleKeyEventHeld(n,"KeyUp",!0)},this.onKeyPressDown=n=>{this.heldKeysPress[n.key]?this.handleKeyEventHeld(n,"KeyPress"):(this.handleKeyEvent(n,"KeyPress"),this.handleKeyEventHeld(n,"KeyPress",!0)),this.heldKeysPress[n.key]=!0},this.onKeyPressUp=n=>{this.handleKeyEvent(n,"KeyPress",!0)},this.releaseHeldKey=n=>{delete this.heldKeys[n.key]},this.releaseHeldKeyPress=n=>{delete this.heldKeysPress[n.key]},this._onUserEvent=({eventName:n,target:s,reverse:a})=>{var l,h,c,u;if(!n||!s)return;let o=Fm(n);o&&(o==="MouseDown"||o==="MouseUp"||o==="MousePress"?(s.dispatchEvent({type:"beginEvent",eventName:o}),(h=(l=this.eventsPerObjects[o])==null?void 0:l[s.uuid])==null||h.forEach(d=>{d.dispatchUserEvent(a)})):(o==="KeyDown"||o==="KeyUp"||o==="KeyPress")&&(s.dispatchEvent({type:"beginEvent",eventName:o}),(u=(c=this.eventsPerObjects[o])==null?void 0:c[s.uuid])==null||u.forEach(d=>{d.dispatchUserEvent()})))};let{page:r,sharedAssets:i}=this.eventContext;r.traverseEntity(n=>{var a,o;if(!((a=n.data)!=null&&a.events.length))return;let s=["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"];for(let l of s){let h=this.eventsPerObjects[l];n.data.events.filter(({data:c})=>c.type===l&&c.disabled!==!0).forEach(({id:c,data:u})=>{try{let d=new _0e(c,u,n,r,i,t);d.actions.Video.length&&(this.hasVideoAction=!0),(u.type==="MouseDown"||u.type==="MouseUp"||u.type==="MousePress")&&(u.mode==="Canvas"||u.mode==="Window")?u.mode==="Canvas"&&this.canvasMouseEvents.push(d):h[n.uuid]?h[n.uuid].push(d):h[n.uuid]=[d]}catch{}}),(o=h[n.uuid])!=null&&o.length&&this.objectsPerTypes[l].push(n)}})}connect(){var t,r,i,n,s,a;let{domElement:e}=this.eventContext;this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),typeof window<"u"&&(window.addEventListener("pointerdown",this.onWindowMouseDown,{capture:!0}),window.addEventListener("pointerup",this.onWindowMouseUp,{capture:!0})),(t=this.objectsPerTypes.MouseDown)!=null&&t.length&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseDown)),(r=this.objectsPerTypes.MouseUp)!=null&&r.length&&(this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMouseUp)),(i=this.objectsPerTypes.MousePress)!=null&&i.length&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMousePressRelease)),(n=this.objectsPerTypes.KeyDown)!=null&&n.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),(s=this.objectsPerTypes.KeyUp)!=null&&s.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),(a=this.objectsPerTypes.KeyPress)!=null&&a.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach(([o,l])=>{l.forEach(h=>{h.addEventListener("userEvent",this._onUserEvent)})})}disconnect(){let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},typeof window<"u"&&(window.removeEventListener("pointerdown",this.onWindowMouseDown,{capture:!0}),window.removeEventListener("pointerup",this.onWindowMouseUp,{capture:!0})),e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerdown",this.onMousePressDown),e.removeEventListener("pointerup",this.onMouseUp),e.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach(t=>{Object.values(t).forEach(r=>{r.forEach(i=>{i.disconnect()})})}),this.canvasMouseEvents.forEach(t=>{t.disconnect()}),Object.entries(this.objectsPerTypes).forEach(([t,r])=>{r.forEach(i=>{i.removeEventListener("userEvent",this._onUserEvent)})})}handleMouseEvent(e){let{stopRaycast:t,raycaster:r,page:i}=this.eventContext,n=this.objectsPerTypes[e];if(n.length)if(t){let s=Y8(r,i,n);Q8(s).forEach(a=>{this.eventsPerObjects[e][a.uuid]&&this.handleObjectMouseEventDispatch(a,e)})}else n.forEach(s=>{K3(r,s)&&this.handleObjectMouseEventDispatch(s,e)})}handleMousePressEvent(e=!1){let t="MousePress",r=this.objectsPerTypes[t],i=[];if(r.length){if(!e){let{stopRaycast:n,raycaster:s,page:a}=this.eventContext;if(n){let o=Y8(s,a,r);i=Q8(o)}else r.forEach(o=>{K3(s,o)&&i.push(o)})}this._prevObjects.length&&this._prevObjects.forEach(n=>{i.includes(n)||this.handleObjectMouseEventDispatchRelease(n,t)}),i.length&&i.forEach(n=>{this.handleObjectMouseEventDispatch(n,t)}),this._prevObjects=i}}handleObjectMouseEventDispatch(e,t){var r,i;e.dispatchEvent({type:"beginEvent",eventName:t}),(i=(r=this.eventsPerObjects[t])==null?void 0:r[e.uuid])==null||i.forEach(n=>{n.dispatch()})}handleObjectMouseEventDispatchRelease(e,t){var r,i;e.dispatchEvent({type:"beginEvent",eventName:t}),(i=(r=this.eventsPerObjects[t])==null?void 0:r[e.uuid])==null||i.forEach(n=>{n.dispatchRelease()})}handleKeyEvent(e,t,r=!1){this.objectsPerTypes[t].forEach(i=>{let n=this.eventsPerObjects[t][i.uuid];n.some(({data:s})=>"key"in s&&s.key===e.key)&&i.dispatchEvent({type:"beginEvent",eventName:t}),n.forEach(s=>{"key"in s.data&&s.data.key===e.key&&(r?s.dispatchRelease():s.dispatch(!0))})})}handleKeyEventHeld(e,t,r=!1){this.objectsPerTypes[t].forEach(i=>{this.eventsPerObjects[t][i.uuid].forEach(n=>{"key"in n.data&&n.data.key===e.key&&n.dispatchHeld(r)})})}},S0e=new E,M0e=new E,MN=class{constructor(e,t,r,i,n){this.actionsIn=Cs(e,e.inActions,r,i,n,t),this.actionsOut=Cs(e,e.outActions,r,i,n,t)}disconnect(){Zn(this.actionsIn),Zn(this.actionsOut)}},A0e=class extends MN{constructor(e,t,r,i,n,s){super(t,r,i,n,s),this.id=e,this.data=t,this.object=r,this.stage="out",this.objects=[],this.onUpdateMatrix=()=>{for(let d of this.objects)if(!d.visible)return;let h=S0e.setFromMatrixPosition(this.objects[0].matrixWorld),c=M0e.setFromMatrixPosition(this.objects[1].matrixWorld),u=h.distanceTo(c)<=this.distance?"in":"out";if(this.stage!==u){this.stage=u;let d=u==="in"?this.actionsIn:this.actionsOut;d.Audio.forEach(p=>p.dispatchConditional()),d.Video.forEach(p=>p.dispatchConditional()),d.Link.forEach(p=>p.dispatch()),d.Create.forEach(p=>p.dispatch()),d.Destroy.forEach(p=>p.dispatch()),d.Reset.forEach(p=>p.dispatch()),d.Transition.forEach(p=>{p.object.currentTransitionEvent!==this&&(p.object.currentTransitionEvent=this),p.init()}),d.Transition.forEach(p=>p.play()),d.Animation.forEach(p=>p.play()),d.SwitchCamera.forEach(p=>p.play()),d.SceneTransition.forEach(p=>p.dispatch())}};let{distance:a,fromObject:o,toObject:l}=t.condition;this.distance=a;for(let h of[o,l]){if(!h)throw new Error("Missing property");let c=i.find(h);if(!c)throw new Error("Missing property");this.objects.push(c)}}connect(){window.setTimeout(()=>{this.objects.forEach(e=>{e.addEventListener("updateMatrix",this.onUpdateMatrix)}),this.onUpdateMatrix()},0)}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach(e=>{e.removeEventListener("updateMatrix",this.onUpdateMatrix)})}},E0e=class extends MN{constructor(e,t,r,i,n,s){var l;super(t,r,i,n,s),this.id=e,this.data=t,this.object=r,this.onBegin=({target:h,state:c})=>{this.toState!==c&&(this.actionsOut.Audio.forEach(u=>u.dispatchConditional()),this.actionsOut.Video.forEach(u=>u.dispatchConditional()),this.actionsOut.Link.forEach(u=>u.dispatch()),this.actionsOut.Create.forEach(u=>u.dispatch()),this.actionsOut.Destroy.forEach(u=>u.dispatch()),this.actionsOut.Reset.forEach(u=>u.dispatch()),this.actionsIn.Transition.forEach(u=>u.pause()),this.object.currentTransitionEvent=this,this.actionsOut.Transition.forEach(u=>u.play()),this.actionsOut.Animation.forEach(u=>u.play()),this.actionsIn.SwitchCamera.forEach(u=>u.pause()),this.actionsOut.SwitchCamera.forEach(u=>u.play()),this.actionsOut.SceneTransition.forEach(u=>u.dispatch()))},this.onComplete=({target:h,state:c})=>{this.toState===c&&(this.actionsIn.Audio.forEach(u=>u.dispatchConditional()),this.actionsIn.Video.forEach(u=>u.dispatchConditional()),this.actionsIn.Link.forEach(u=>u.dispatch()),this.actionsIn.Create.forEach(u=>u.dispatch()),this.actionsIn.Destroy.forEach(u=>u.dispatch()),this.actionsIn.Reset.forEach(u=>u.dispatch()),this.actionsOut.Transition.forEach(u=>u.pause()),this.actionsOut.Transition.forEach(u=>u.pause()),this.object.currentTransitionEvent=this,this.actionsIn.Transition.forEach(u=>u.play()),this.actionsIn.Animation.forEach(u=>u.play()),this.actionsOut.SwitchCamera.forEach(u=>u.pause()),this.actionsIn.SwitchCamera.forEach(u=>u.play()),this.actionsIn.SceneTransition.forEach(u=>u.dispatch()))};let{condition:a}=t;if(!a.object)throw new Error("Missing property");let o=i.find(a.object);if(!o)throw new Error("Missing property");if(this.toObject=o,a.state&&!((l=this.toObject.states)!=null&&l[a.state]))throw new Error("Missing property");this.toState=a.state}connect(){(this.actionsOut.Audio.length||this.actionsOut.Video.length||this.actionsOut.Create.length||this.actionsOut.Destroy.length||this.actionsOut.Transition.length||this.actionsOut.Animation.length||this.actionsOut.SwitchCamera.length||this.actionsOut.SceneTransition.length)&&this.toObject.addEventListener("beginState",this.onBegin),(this.actionsIn.Audio.length||this.actionsIn.Video.length||this.actionsOut.Create.length||this.actionsIn.Destroy.length||this.actionsIn.Transition.length||this.actionsIn.Animation.length||this.actionsIn.SwitchCamera.length||this.actionsIn.SceneTransition.length)&&this.toObject.addEventListener("completeState",this.onComplete)}disconnect(){super.disconnect(),(this.actionsOut.Audio.length||this.actionsOut.Video.length||this.actionsOut.Create.length||this.actionsOut.Destroy.length||this.actionsOut.Transition.length||this.actionsOut.Animation.length||this.actionsOut.SwitchCamera.length||this.actionsOut.SceneTransition.length)&&this.toObject.removeEventListener("beginState",this.onBegin),(this.actionsIn.Audio.length||this.actionsIn.Video.length||this.actionsOut.Create.length||this.actionsIn.Destroy.length||this.actionsIn.Transition.length||this.actionsIn.Animation.length||this.actionsIn.SwitchCamera.length||this.actionsIn.SceneTransition.length)&&this.toObject.removeEventListener("completeState",this.onComplete)}},T0e=class extends Io{constructor(e,t){super(e),this.eventsPerConditions={Comparison:[],Distance:[],State:[]},this.hasVideoAction=!1;let{page:r,sharedAssets:i}=this.eventContext;r.traverseEntity(n=>{var s;if((s=n.data)!=null&&s.events.length){for(let{id:a,data:o}of n.data.events)if(!o.disabled&&o.type==="Conditional")try{let l;o.condition.type==="Comparison"||(o.condition.type==="Distance"?l=new A0e(a,o,n,r,i,t):o.condition.type==="State"&&(l=new E0e(a,o,n,r,i,t))),l&&(this.eventsPerConditions[o.condition.type].push(l),(l.actionsIn.Video.length||l.actionsOut.Video.length)&&(this.hasVideoAction=!0))}catch{}}})}connect(){super.connect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(t=>t.connect()))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(t=>t.disconnect()))}},f1=new E,Zl=new E,du=new E,ML=new hs,L0e=.01,Yt=new E,si=new E,AL=new E,Fu=new Et,Sx=new bi,P0e=new Ae,Mx=new Ci,sd=new E,$a=new E,ad=.2;function Ax(e,t){!t||(t[0]<t[1]&&(e.x=Math.min(Math.max(e.x,t[0]),t[1])),t[2]<t[3]&&(e.y=Math.min(Math.max(e.y,t[2]),t[3])),t[4]<t[5]&&(e.z=Math.min(Math.max(e.z,t[4]),t[5])))}var D0e=function(){let e=new Ae;return(t,r,i)=>{let n=t.obj;e.copy(n.hiddenMatrix),n.parent!==null&&e.premultiply(n.parent.matrixWorld),e.invert(),n.position.copy(r),t.reference==="global"&&Ax(n.position,t.limits),n.position.applyMatrix4(e),t.reference==="parent"?Ax(n.position,t.limits):t.reference==="local"&&(Fu.copy(t.quat0).invert(),n.position.sub(t.position0),n.position.applyQuaternion(Fu),Ax(n.position,t.limits),Fu.invert(),n.position.applyQuaternion(Fu),n.position.add(t.position0)),e.multiply(i??n.matrixWorld).decompose(Yt,n.quaternion,si),n.updateMatrix(),n.hasNonUniformScale&&(n.updateMatrixWorld(),n.updateMatrixWorldSVD()),n instanceof Qn&&po(n.parent)&&n.invalidateDownstreamBooleanData(!0)}}(),O0e=class{constructor(e,t,r,i,n,s){this.object=e,this.data=t,this.dropDestIds=[],this.activeIdx=null,this.wasDragEventTriggered=!1,this.resetDampingFactor=this.data.resetSpeed===0?1:8/this.data.resetSpeed+1,this.snapDampingFactor=this.data.snapSpeed===0?1:8/this.data.snapSpeed+1,this.actionsDrag=Cs(t,t.dragDropActions.drag,r,i,n,this.object),this.actionsDrop=Cs(t,t.dragDropActions.drop,r,i,n,this.object);let a=[];this.data.objects.forEach(o=>{let l=r.find(o);!l||l.data.visible!==!1&&(a.push(l),s[l.uuid]&&s[l.uuid].forEach(h=>{let c=r.find(h);!c||c.data.visible!==!1&&a.push(c)}))}),this.data.dropDestinations.forEach(o=>{let l=r.find(o);!l||l.data.visible!==!1&&(this.dropDestIds.push(l.uuid),s[l.uuid]&&s[l.uuid].forEach(h=>{let c=r.find(h);!c||c.data.visible!==!1&&this.dropDestIds.push(c.uuid)}))}),this.dragItems=a.map(o=>(this.data.planeMode==="locked"&&(o.userData.lockedPlane=!0),o.userData.worldPosition0=new E().setFromMatrixPosition(o.matrixWorld),{obj:o,fromPosition:new E().setFromMatrixPosition(o.matrixWorld),pointStart:new E,pointEnd:new E,paused:!0,currentDampingFactor:this.data.dampingFactor,reset:!1,position0:new E().copy(o.position),quat0:new Et().copy(o.quaternion),snapped:!1,orientationMatrix:new Ae,limits:this.data.limits,reference:this.data.referenceFrame}))}get activeDragItem(){return this.activeIdx!==null?this.dragItems[this.activeIdx]:null}dispose(){Zn(this.actionsDrag),Zn(this.actionsDrop),this.dragItems.forEach(e=>{e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart),e.obj.recursiveBBoxNeedsUpdate=!0,e.obj.userData.lockedPlane=void 0,e.obj.position.copy(e.position0),e.obj.quaternion.copy(e.quat0),e.obj.updateMatrix()})}},I0e=class extends Io{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.lastDropDestination=null,this.dragTimeout=null,this.onPointerDown=i=>{var o;if(ht.length>1)return;this.eventContext.updateRaycaster(i);let{raycaster:n,page:s}=this.eventContext,a=s.raycastWithClones(n);if(this.lastDropDestination=null,a.length===0){this.activeEvent=null;return}for(let l of this.events){let h=0;for(let{obj:c,pointEnd:u,pointStart:d}of l.dragItems){if(c===a[0].object||c===a[0].object.object||Gt.is(c)&&c.isAncestorOf(a[0].object.uuid)){if(l.activeIdx=h,l.activeDragItem.reset=!1,l.activeDragItem.currentDampingFactor=l.data.dampingFactor,l.activeDragItem.snapped=!1,l.data.cursor==="hand"&&this.setCursor("grabbing"),this.eventManager.controlsManager.usePhysics){l.activeDragItem.obj.rigidBody&&l.activeDragItem.obj.rigidBody.setBodyType(2,!0);let p=l.activeDragItem.obj;c.hasNonUniformScale&&c.updateMatrixWorldSVD(),(p.hasNonUniformScale?p.matrixWorldRigid:p.matrixWorld).decompose(Yt,Fu,si),Sx.setFromQuaternion(Fu),p.prevR===void 0?(p.prevR=Sx.clone(),p.prevT=Yt.clone()):(p.prevR.copy(Sx),p.prevT.copy(Yt)),this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.push(l.activeDragItem.obj)}this.calcPlaneIntersectPos(c,d,l.data.plane,l.data.referenceFrame),u.copy(d),(this.eventManager.controlsManager.usePhysics&&((o=c.data.physics)==null?void 0:o.rigidBody)==="dynamic"||l.data.drop===!1||l.data.resetOnSnapFail===!1)&&l.activeDragItem.fromPosition.setFromMatrixPosition(l.activeDragItem.obj.matrixWorld),this.activeEvent=l,this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1);return}h++}}this.activeEvent=null},this.onPointerMove=i=>{var o,l,h,c;if(ht.length>1)return;this.eventContext.updateRaycaster(i);let{raycaster:n,page:s}=this.eventContext,a=s.raycastWithClones(n);if(ht.length===0){let u=!1;for(let d of this.events){for(let{obj:p}of d.dragItems)if(p===((o=a[0])==null?void 0:o.object)||p===((h=(l=a[0])==null?void 0:l.object)==null?void 0:h.object)||Gt.is(p)&&p.isAncestorOf((c=a[0])==null?void 0:c.object.uuid)){switch(u=!0,d.data.cursor){case"hand":this.setCursor("grab");break;case"move":this.setCursor("move");break}break}if(u)break}u||this.setCursor("default");return}if(this.activeEvent&&this.activeEvent.activeDragItem){let u=this.activeEvent.activeDragItem;u.snapped=!1;let d;if(this.activeEvent.data.drop&&(d=a.filter(p=>u.obj!==p.object&&!u.obj.isAncestorOf(p.object.uuid)&&!(p.object instanceof vm)&&(this.activeEvent.data.dropOn==="all"||this.activeEvent.dropDestIds.some(f=>f===p.object.uuid||s.scene.find(f).isAncestorOf(p.object.uuid))))[0]),d){let p=AL.copy(d.face.normal).applyMatrix3(Mx.getNormalMatrix(d.object.matrixWorld));if(this.activeEvent.data.snapTo==="center")u.fromPosition.setFromMatrixPosition(d.object.matrixWorld);else if(this.activeEvent.data.snapTo==="surface"){if(u.fromPosition.copy(d.point),this.activeEvent.data.snapSurfaceMode==="bbox"){Yt.copy(p).applyMatrix3(Mx.setFromMatrix4(u.obj.matrixWorld).transpose());let f=u.obj;Yt.x>ad?si.x=-f.recursiveBBox.min.x:Yt.x<-ad&&(si.x=-f.recursiveBBox.max.x),Yt.y>ad?si.y=-f.recursiveBBox.min.y:Yt.y<-ad&&(si.y=-f.recursiveBBox.max.y),Yt.z>ad?si.z=-f.recursiveBBox.min.z:Yt.z<-ad&&(si.z=-f.recursiveBBox.max.z),si.applyMatrix3(Mx.invert())}else si.copy(p).multiplyScalar(this.activeEvent.data.snapSurfaceOffset);u.fromPosition.add(si)}this.activeEvent.data.autoOrient&&(Yt.set(0,1,0).cross(p),Yt.length()<1e-4&&Yt.set(-1,0,0).cross(p),si.crossVectors(AL,Yt),u.orientationMatrix.makeBasis(Yt,si,p)),u.pointStart.copy(u.fromPosition),u.pointEnd.copy(u.pointStart),u.currentDampingFactor=this.activeEvent.snapDampingFactor,u.snapped=!0,this.lastDropDestination!==d.object&&(this.lastDropDestination=d.object,this.activeEvent.actionsDrop.Transition.forEach(f=>{f.play()}),this.activeEvent.actionsDrop.Animation.forEach(f=>{f.play()}),this.activeEvent.actionsDrop.Audio.forEach(f=>{f.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Create.forEach(f=>{f.dispatchThrottled()}))}else u.orientationMatrix.makeRotationFromQuaternion(u.quat0),this.lastDropDestination=null,u.currentDampingFactor=this.activeEvent.data.dampingFactor,this.calcPlaneIntersectPos(u.obj,u.pointEnd,this.activeEvent.data.plane,this.activeEvent.data.referenceFrame),this.activeEvent.actionsDrop.Transition.forEach(p=>{p.stop(),p.object.currentState!==null&&p.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrop.Animation.forEach(p=>{p.stop()}),this.activeEvent.actionsDrop.Audio.forEach(p=>{p.dispatchGameControl("stop")});this.activeEvent.actionsDrag.Create.forEach(p=>{p.dispatchThrottled()}),this.activeEvent.wasDragEventTriggered===!1&&(this.activeEvent.wasDragEventTriggered=!0,this.activeEvent.actionsDrag.Transition.forEach(p=>{p.play()}),this.activeEvent.actionsDrag.Animation.forEach(p=>{p.play()}),this.activeEvent.actionsDrag.Audio.forEach(p=>{p.dispatchGameControl("start")})),this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>{!this.activeEvent||(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Audio.forEach(p=>{p.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Transition.forEach(p=>{p.stop(),p.object.currentState!==null&&p.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(p=>{p.stop()}))},500),this.updateDragItem(u),u.obj.dispatchEvent({type:"requestRender"})}},this.onPointerUp=i=>{var n;if(this.activeEvent&&this.activeEvent.activeDragItem){this.activeEvent.data.cursor==="hand"&&this.setCursor("grab");let s=((n=this.activeEvent.activeDragItem.obj.data.physics)==null?void 0:n.rigidBody)==="dynamic";this.activeEvent.activeDragItem.snapped===!1&&this.activeEvent.data.drop&&this.activeEvent.data.resetOnSnapFail&&(this.eventManager.controlsManager.usePhysics===!1||!s)&&(this.activeEvent.activeDragItem.reset=this.activeEvent.data.resetOnSnapFail,this.activeEvent.activeDragItem.paused=!1,this.activeEvent.activeDragItem.currentDampingFactor=this.activeEvent.resetDampingFactor),this.eventManager.controlsManager.usePhysics&&s&&(this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.pop(),this.activeEvent.activeDragItem.obj.rigidBody.setBodyType(0,!0),this.activeEvent.activeDragItem.paused=!0),this.activeEvent.wasDragEventTriggered===!0&&(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Transition.forEach(a=>{a.stop(),a.object.currentState!==null&&a.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(a=>{a.stop()}),this.activeEvent.actionsDrag.Audio.forEach(a=>{a.dispatchGameControl("stop")})),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0)}};let r={};e.page.traverseEntity(i=>{i.component&&(r[i.component.uuid]?r[i.component.uuid].push(i.uuid):r[i.component.uuid]=[i.uuid])}),e.page.traverseEntity(i=>{var n;(n=i.data)==null||n.events.filter(s=>s.data.type==="DragDrop"&&!s.data.disabled).forEach(s=>{this.events.push(new O0e(i,s.data,e.page,e.sharedAssets,t,r))})})}connect(){if(!this.events.length)return;this.domEventsNeeded.clear(),this.domEventsNeeded.add("pointerdown");let e=this.eventContext.domElement;e.addEventListener("pointerdown",this.onPointerDown),e.addEventListener("pointermove",this.onPointerMove),e.addEventListener("pointerup",this.onPointerUp),this.domEventsNeeded.add("pointermove")}disconnect(){if(!this.events.length)return;this.domEventsNeeded.clear();let e=this.eventContext.domElement;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),this.events.forEach(t=>t.dispose())}setCursor(e){this.eventContext.domElement.style.cursor=e}onAnimationFrameDamping(){for(let e of this.events)for(let t of e.dragItems)t.paused||this.updateDragItem(t,!0)}calcPlaneIntersectPos(e,t,r,i){let{getCamera:n,raycaster:s}=this.eventContext;n().getWorldDirection(Zl),Zl.negate();let a=Fu.identity();switch(i==="parent"?P0e.multiplyMatrices(e.parent.matrixWorld,e.hiddenMatrix).decompose(Yt,a,si):i==="local"&&e.matrixWorld.decompose(Yt,a,si),r){case"x":Yt.set(1,0,0).applyQuaternion(a),sd.copy(Zl).cross(Yt),$a.copy(Yt).cross(sd);break;case"y":Yt.set(0,1,0).applyQuaternion(a),sd.copy(Zl).cross(Yt),$a.copy(Yt).cross(sd);break;case"z":Yt.set(0,0,1).applyQuaternion(a),sd.copy(Zl).cross(Yt),$a.copy(Yt).cross(sd);break;case"xy":$a.set(0,0,1).applyQuaternion(a);break;case"yz":$a.set(1,0,0).applyQuaternion(a);break;case"xz":$a.set(0,1,0).applyQuaternion(a);break;case"adaptive":Zl.angleTo(si.set(0,1,0))>Math.PI/6?(Yt.crossVectors(si.set(0,1,0),Zl),$a.crossVectors(Yt,si)):$a.set(0,1,0);break;default:$a.copy(Zl);break}du.setFromMatrixPosition(e.matrixWorld);let o=e.userData.lockedPlane?e.userData.worldPosition0:du;if(ML.setFromNormalAndCoplanarPoint($a,o),!!s.ray.intersectPlane(ML,t)&&(r==="x"||r==="y"||r==="z")){let l=si.subVectors(t,o).dot(Yt);t.copy(o).addScaledVector(Yt,l)}}updateDragItem(e,t=!1){var r,i;du.setFromMatrixPosition(e.obj.matrixWorld),e.reset==="current"?f1.subVectors(e.fromPosition,du).divideScalar(e.currentDampingFactor):e.reset==="original"?(f1.subVectors(e.obj.userData.worldPosition0,du).divideScalar(e.currentDampingFactor),e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart)):f1.subVectors(e.pointEnd,e.pointStart).add(e.fromPosition).sub(du).divideScalar(e.currentDampingFactor),e.paused=e.currentDampingFactor>1?f1.length()<L0e:!0,(this.activeEvent&&this.activeEvent.data.dampingFactor===1||t)&&D0e(e,f1.add(du),(r=this.activeEvent)!=null&&r.data.drop&&((i=this.activeEvent)!=null&&i.data.autoOrient)?e.orientationMatrix:null),e.obj.dispatchEvent({type:"beginEvent",eventName:"DragDrop"}),this.eventManager.requestRender()}},od=new E,Ex=new E,Go=new E,Ho=new E,EL=new hs,R0e=.01,B0e={type:"requestRender"},z0e=function(){let e=new E,t=new E;return(r,i,n)=>n>0?(e.subVectors(r,i),e.length()<=n?r:t.copy(i).add(e.normalize().multiplyScalar(n))):i}(),TL=function(){let e=new Ae;return(t,r)=>{t.position.copy(r),t.parent!==null&&(e.copy(t.parent.matrixWorld).invert(),t.position.applyMatrix4(e)),e.copy(t.hiddenMatrix).invert(),t.position.applyMatrix4(e),t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD()),t instanceof Qn&&po(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),k0e=class{constructor(e,t,r,i,n){this.data=e,this.object=t,this.paused=!1,this.currentDampingFactor=1,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new E,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...V7.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=r.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.resetDampingFactor=80/this.data.resetSpeed+1,this.object.getWorldPosition(this.worldPosition0),this.actions=Cs(e,e.actions,r,i,n,t)}},N0e=class extends Io{constructor(e,t){super(e),this.events=[],this.pairOfEventListeners=[],this.onMouseMove=i=>{if(!(ht.length>1)){this.eventContext.updateRaycaster(i);for(let n of this.events)n.target===void 0&&this.updateSingleEvent(n)}},this.onMouseEnter=i=>{for(let n of this.events)n.target===void 0&&(n.isReset=!1,n.currentDampingFactor=n.data.dampingFactor)},this.onMouseLeave=i=>{for(let n of this.events)n.target===void 0&&(n.data.resetOnPointerLeave&&(n.isReset=!0,n.currentDampingFactor=n.resetDampingFactor),this.updateSingleEvent(n))},this.onTargetChange=i=>()=>{this.updateSingleEvent(i)};let{page:r}=this.eventContext;r.traverseEntity(i=>{var s,a;let n=(s=i.data)==null?void 0:s.events.find(o=>o.data.type==="Follow"&&!o.data.disabled);n&&(!r.data.globalPhysics.usePhysics||((a=i.dataPatched.physics)==null?void 0:a.rigidBody)!=="dynamic")&&this.events.push(new k0e(n.data,i,r,e.sharedAssets,t))})}connect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),ms&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),t.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents||(e.addEventListener("pointerenter",this.onMouseEnter),e.addEventListener("pointerleave",this.onMouseLeave));for(let r of this.events)if(r.target!==void 0){let i=r.target,n=this.onTargetChange(r);this.pairOfEventListeners.push([i,n]),i.addEventListener("requestRender",n)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),ms&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave);for(let[r,i]of this.pairOfEventListeners)r.removeEventListener("requestRender",i);for(let r of this.events)r.paused=!0,r.isReset=!1,Zn(r.actions)}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e,!0)}updateSingleEvent(e,t=!1){var a;this.events.forEach(o=>{o.actions.Create.forEach(l=>{l.dispatchThrottled()})});let{plane:r,limitDistance:i,limitDistanceEnabled:n}=e.data;if(e.object.getWorldPosition(Go),e.isReset)Ho.copy(e.worldPosition0);else if(e.target)e.target.getWorldPosition(Ho);else{let{getCamera:o,raycaster:l}=this.eventContext;if(r==="custom"?(o().getWorldDirection(Ex),Ex.negate(),od.copy(Ex)):r==="xy"?od.set(0,0,1):r==="xz"?od.set(0,1,0):r==="yz"&&od.set(1,0,0),EL.setFromNormalAndCoplanarPoint(od,Go),!l.ray.intersectPlane(EL,Ho))return}if(!e.isReset){if(Ho.distanceTo(e.worldPosition0)>i&&n&&e.target)if(e.snapComplete=!1,e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)Ho.copy(e.worldPosition0),e.currentDampingFactor=e.resetDampingFactor;else return;else if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return}e.data.enabledTranslation[0]===!1&&(Ho.x=Go.x),e.data.enabledTranslation[1]===!1&&(Ho.y=Go.y),e.data.enabledTranslation[2]===!1&&(Ho.z=Go.z);let s=z0e(Go,Ho,e.wasOutside?0:e.data.maxDelta);if(e.currentDampingFactor>1){let o=od.subVectors(s,Go).divideScalar(e.currentDampingFactor);Go.add(o),t&&TL(e.object,Go),e.paused=o.length()<R0e}else TL(e.object,s),e.paused=!0;(a=e.object)==null||a.dispatchEvent({type:"beginEvent",eventName:"Follow"}),e.object.dispatchEvent(B0e)}},m1=new E,Dv=new E,g1=new Ae,ld=new Et,Kl=new Et,v1=new E,y1=new E,pu=new E,Wo=new E,Tx=new hs,F0e=1e-6,U0e={type:"requestRender"},j0e={type:"changeRotation"},LL=function(){let e=new Ae;return function(t,r){t.parent!==null?e.multiplyMatrices(t.parent.matrixWorld,t.hiddenMatrix):e.copy(t.hiddenMatrix),r.premultiply(xN(e).invert()),t.rotation.setFromRotationMatrix(r),t.updateMatrix(),t instanceof Qn&&po(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),V0e=class{constructor(e,t,r){this.object=t,this.paused=!1,this.currentDampingFactor=1,this.isReset=!1,this.worldQuaternion0=new Et,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...G7.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=r.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.object.getWorldQuaternion(this.worldQuaternion0),this.resetDampingFactor=80/this.data.resetSpeed+1}},G0e=class extends Io{constructor(e){super(e),this.events=[],this.pairOfEventListeners=[],this.pairOfUserEventListeners=[],this.onMouseMove=r=>{if(!(ht.length>1)){this._lastMouseEvent=r,this.eventContext.updateRaycaster(r);for(let i of this.events)i.target===void 0&&this.updateSingleEvent(i)}},this.onMouseEnter=r=>{for(let i of this.events)i.target===void 0&&(i.isReset=!1,i.currentDampingFactor=i.data.dampingFactor)},this.onMouseLeave=r=>{for(let i of this.events)i.target===void 0&&(i.data.resetOnPointerLeave&&(i.isReset=!0,i.currentDampingFactor=i.resetDampingFactor),this.updateSingleEvent(i))},this.onScroll=r=>{if(this._lastMouseEvent){let i=new PointerEvent("pointermove",{clientX:this._lastMouseEvent.clientX,clientY:this._lastMouseEvent.clientY,bubbles:!0,cancelable:!0,view:window});this.eventContext.eventElement.dispatchEvent(i)}},this.onTargetChange=r=>()=>{this.updateSingleEvent(r)},this.createUserEventListener=r=>({eventName:i,target:n})=>{if(!i||!n)return;let s=Fm(i);s&&s==="LookAt"&&this.updateSingleEvent(r)};let{page:t}=this.eventContext;t.traverseEntity(r=>{var n,s;let i=(n=r.data)==null?void 0:n.events.find(a=>a.data.type==="LookAt"&&!a.data.disabled);i&&(!t.data.globalPhysics.usePhysics||((s=r.dataPatched.physics)==null?void 0:s.rigidBody)!=="dynamic")&&this.events.push(new V0e(i.data,r,t))})}connect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),ms&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),t.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents?t.addEventListener("scroll",this.onScroll):(e.addEventListener("pointerenter",this.onMouseEnter),e.addEventListener("pointerleave",this.onMouseLeave));for(let r of this.events){if(r.target!==void 0){let s=this.onTargetChange(r),a=r.target;this.pairOfEventListeners.push([a,s]),a.addEventListener("requestRender",s)}let i=this.createUserEventListener(r),n=r.object;this.pairOfUserEventListeners.push([n,i]),n.addEventListener("userEvent",i)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),ms&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave),t.removeEventListener("scroll",this.onScroll);for(let[r,i]of this.pairOfEventListeners)r.removeEventListener("requestRender",i);for(let[r,i]of this.pairOfUserEventListeners)r.removeEventListener("userEvent",i);for(let r of this.events)r.paused=!0,r.isReset=!1}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e)}updateSingleEvent(e){var d;let{tilt:t,axis:r,distance:i,plane:n,limitDistance:s,enabledRotation:a,limitDistanceEnabled:o}=e.data,{getCamera:l,raycaster:h}=this.eventContext,{object:c,target:u}=e;if(c.getWorldPosition(v1),!e.isReset)if(e.target)e.target.getWorldPosition(y1);else{if(n==="custom"?(l().getWorldDirection(Dv),Dv.negate(),Tx.setFromNormalAndCoplanarPoint(Dv,v1)):(n==="xy"?m1.set(0,0,1):n==="xz"?m1.set(0,1,0):n==="yz"&&m1.set(1,0,0),Tx.setFromNormalAndCoplanarPoint(m1,v1)),!h.ray.intersectPlane(Tx,y1))return;i>0&&(n==="custom"||n===void 0)&&y1.addScaledVector(Dv,i)}if(e.isReset||(u?t==="target"?pu.copy(u.up).applyMatrix4(g1.extractRotation(u.matrixWorld)).normalize():a.some(p=>p===!1)?(r==="x"?(Wo.set(0,0,1),a[2]===!1&&Wo.set(0,1,0)):r==="y"?(Wo.set(1,0,0),a[0]===!1&&Wo.set(0,0,1)):(Wo.set(0,1,0),a[1]===!1&&Wo.set(1,0,0)),pu.copy(Wo).applyQuaternion(e.worldQuaternion0).normalize()):pu.set(0,1,0):n==="custom"?pu.set(0,1,0):pu.copy(m1)),e.isReset)Kl.copy(e.worldQuaternion0);else if(v1.distanceTo(y1)>s&&o&&u)if(e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)Kl.copy(e.worldQuaternion0),e.currentDampingFactor=e.resetDampingFactor;else return;else{if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return;H0e(g1,y1,v1,pu,r,Wo),Kl.setFromRotationMatrix(g1),ld.setFromUnitVectors(Wo.applyQuaternion(Kl),pu),a.some(p=>p===!1)&&t!=="target"&&Kl.premultiply(ld).normalize()}e.currentDampingFactor>1?(c.updateWorldMatrix(!0,!1),ld.setFromRotationMatrix(xN(c.matrixWorld)),ld.slerp(Kl,1/e.currentDampingFactor),LL(c,g1.makeRotationFromQuaternion(ld)),e.paused=8*(1-ld.dot(Kl))<F0e):(LL(c,g1.makeRotationFromQuaternion(Kl)),e.paused=!0),(d=e.object)==null||d.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),c.dispatchEvent(U0e),c.dispatchEvent(j0e)}},Os=new E,ni=new E,Fr=new E;function H0e(e,t,r,i,n,s){let a=e.elements;Fr.subVectors(t,r),Fr.lengthSq()===0&&(Fr.z=1),Fr.normalize(),ni.crossVectors(i,Fr),ni.lengthSq()===0&&(Math.abs(i.z)===1?Fr.x+=1e-4:Fr.z+=1e-4,Fr.normalize(),ni.crossVectors(i,Fr)),ni.normalize(),Os.crossVectors(Fr,ni),n==="x"?s.z===1?[ni,Os,Fr]=[Fr,ni,Os]:(ni.negate(),[ni,Fr]=[Fr,ni]):n==="y"?s.x===1?[ni,Os,Fr]=[Os,Fr,ni]:(ni.negate(),[Os,Fr]=[Fr,Os]):s.x===1&&(ni.negate(),[ni,Os]=[Os,ni]),a[0]=ni.x,a[4]=Os.x,a[8]=Fr.x,a[1]=ni.y,a[5]=Os.y,a[9]=Fr.y,a[2]=ni.z,a[6]=Os.z,a[10]=Fr.z}var W0e=class{constructor(e,t,r,i,n,s){this.id=e,this.data=t,this.object=r,this.entered=!1,this.actions=Cs(t,t.actions,i,n,s,r)}disconnect(){Zn(this.actions)}dispatchEnter(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered||(this.entered=!0,this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Animation.forEach(e=>e.play()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent()),this.actions.SceneTransition.forEach(e=>e.dispatch()))}dispatchLeave(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatch()),this.actions.Destroy.forEach(t=>t.dispatch()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch())}},q0e=class extends Io{constructor(e,t){super(e),this.eventsPerObjects={},this.objects=[],this._prevObjects=[],this.onMouseDown=n=>{ht.length>1||(this.eventContext.updateRaycaster(n),this.handleMouseHoverEvent())},this.onMouseUp=n=>{ht.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=n=>{ht.length>1||(this.eventContext.updateRaycaster(n),this.handleMouseHoverEvent())},this.onUserEvent=({eventName:n,target:s,reverse:a})=>{var l;if(!n||!s)return;let o=Fm(n);o&&o==="MouseHover"&&(s.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(l=this.eventsPerObjects[s.uuid])==null||l.forEach(h=>h.dispatchUserEvent(a)))};let{page:r,sharedAssets:i}=this.eventContext;r.traverseEntity(n=>{var s,a;if(!(!n.visible||!((s=n.data)!=null&&s.events.length))){for(let{id:o,data:l}of n.data.events)if(!l.disabled&&l.type==="MouseHover")try{let h=new W0e(o,l,n,r,i,t);this.eventsPerObjects[n.uuid]?this.eventsPerObjects[n.uuid].push(h):this.eventsPerObjects[n.uuid]=[h]}catch{}(a=this.eventsPerObjects[n.uuid])!=null&&a.length&&this.objects.push(n)}})}connect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),ms&&(this.domEventsNeeded.add("pointerdown"),e.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),e.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),e.addEventListener("pointermove",this.onMouseMove),this.objects.forEach(t=>{t.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),ms&&(e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerup",this.onMouseUp)),e.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach(t=>{t.forEach(r=>{r.disconnect()})}),this.objects.forEach(t=>{t.removeEventListener("userEvent",this.onUserEvent)})}handleMouseHoverEvent(e=!1){let t=[];if(!e){let{stopRaycast:r,raycaster:i,page:n}=this.eventContext;if(r){let s=Y8(i,n,this.objects);t=Q8(s)}else this.objects.forEach(s=>{K3(i,s)&&t.push(s)})}this._prevObjects.length&&this._prevObjects.forEach(r=>{var i;t.includes(r)||(r.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(i=this.eventsPerObjects[r.uuid])==null||i.forEach(n=>n.dispatchLeave()))}),t.length&&t.forEach(r=>{var i;r.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(i=this.eventsPerObjects[r.uuid])==null||i.forEach(n=>n.dispatchEnter())}),this._prevObjects=t}},X0e=class{constructor(e,t,r,i,n,s){this.id=e,this.data=t,this.object=r,this.scrollCounter=0,this.actions=Cs(t,t.actions,i,n,s,r)}connect(){this.scrollCounter=0}disconnect(){Zn(this.actions)}dispatch(e){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this,i.init())});let t=e>0?1:-1;this.scrollCounter+=t,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let r=this.scrollCounter/this.data.steps;this.actions.Transition.forEach(i=>i.seek(r)),this.actions.Animation.forEach(i=>i.seek(t)),this.actions.Create.forEach(i=>i.dispatchThrottled())}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled())}},Y0e=class{constructor(e,t,r,i,n,s,a){this.id=e,this.data=t,this.object=r,this.domElement=s,this.eventManager=a,this.scrollStart=0,this.scrollEnd=0,this.actions=Cs(t,t.actions,i,n,a,r)}computeScrollBounds(){let e=this.domElement.getBoundingClientRect(),t=document.body,r=document.documentElement,i=window.pageYOffset||r.scrollTop||t.scrollTop,n=r.clientTop||t.clientTop||0,s=Math.round(e.top+i-n);if(this.data.startFrom==="enter"){let a=window.innerHeight,o=e.height,l=this.data.enterAnchor,h=l==="top"?a:l==="bottom"?a-o:a-o*.5;this.scrollStart=s-h}else this.scrollStart=0;this.scrollStart+=this.data.startOffset??0,this.scrollEnd=this.scrollStart+(this.data.endAfter??400),this.box=e,this.computeScroll({x:window.scrollX,y:window.scrollY})}connect(){this.computeScrollBounds()}disconnect(){Zn(this.actions)}handleResize(){this.computeScrollBounds()}get isInvalidBox(){return this.box===void 0||this.box.width===0&&this.box.height===0&&this.box.top===0&&this.box.bottom===0}computeScroll({x:e,y:t}){this.actions.Transition.forEach(n=>{n.object.currentTransitionEvent!==this&&(n.object.currentTransitionEvent=this,n.init())});let r=this.scrollEnd-this.scrollStart,i=Math.min(1,Math.max(0,(t-this.scrollStart)/r));this.actions.Transition.forEach(n=>n.seek(i)),this.actions.Animation.forEach(n=>n.seek(i)),this.actions.Create.forEach(n=>n.dispatchThrottled())}dispatch(e){this.isInvalidBox&&this.computeScrollBounds(),this.computeScroll(e)}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled())}},Q0e=class extends Io{constructor(e,t){super(e),this.wheelEventsPerObject=new Map,this.scrollEventsPerObject=new Map,this.isInview=!0,this.handleResize=()=>{[...this.scrollEventsPerObject.entries()].forEach(([a,o])=>{o.forEach(l=>l.handleResize())})},this.onScroll=a=>{if(!this.isInview)return;let o={y:window.scrollY,x:window.scrollX};[...this.scrollEventsPerObject.entries()].forEach(([l,h])=>{l.dispatchEvent({type:"beginEvent",eventName:"Scroll",scroll:o}),h.forEach(c=>c.dispatch(o))})},this.onWheel=a=>{!this.isInview||a.ctrlKey||[...this.wheelEventsPerObject.entries()].forEach(([o,l])=>{o.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:a.deltaY}),l.forEach(h=>h.dispatch(a.deltaY))})},this.onUserEvent=({eventName:a,target:o,reverse:l})=>{var c;if(!a||!o)return;let h=Fm(a);h&&h==="Scroll"&&(o.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),(c=this.wheelEventsPerObject.get(o))==null||c.forEach(u=>{u.dispatchUserEvent(l)}))};let{page:r,sharedAssets:i,domElement:n,isExport:s}=this.eventContext;r.traverseEntity(a=>{var o,l,h;if((o=a.data)!=null&&o.events.length){for(let{id:c,data:u}of a.data.events)if(!u.disabled&&u.type==="Scroll")if(u.trigger==="load"||!s){let d=new X0e(c,u,a,r,i,t);this.wheelEventsPerObject.has(a)?(l=this.wheelEventsPerObject.get(a))==null||l.push(d):this.wheelEventsPerObject.set(a,[d])}else{let d=new Y0e(c,u,a,r,i,n,t);this.scrollEventsPerObject.has(a)?(h=this.scrollEventsPerObject.get(a))==null||h.push(d):this.scrollEventsPerObject.set(a,[d])}}}),this.intersectionObserver=new IntersectionObserver(a=>{let o=a[0];o&&(this.isInview=o.isIntersecting)},{root:null})}connect(){this.intersectionObserver.observe(this.eventContext.domElement),[...this.wheelEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.connect()),e.addEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.connect()),e.addEventListener("userEvent",this.onUserEvent)}),[...this.wheelEventsPerObject.values()].some(e=>e.length)&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel)),[...this.scrollEventsPerObject.values()].some(e=>e.length)&&(this.domEventsNeeded.add("scroll"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.handleResize))}disconnect(){window.removeEventListener("wheel",this.onWheel),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.handleResize),this.intersectionObserver.unobserve(this.eventContext.domElement),this.domEventsNeeded.clear(),[...this.wheelEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(r=>r.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)})}},Z0e=class{constructor(e,t,r,i,n,s){this.id=e,this.data=t,this.object=r,this.actions=Cs(t,t.actions,i,n,s,r)}disconnect(){Zn(this.actions)}dispatch(){this.actions.Transition.forEach(e=>{e.play()}),this.actions.Animation.forEach(e=>{e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatchFromStart()}),this.actions.Destroy.forEach(e=>{e.dispatchFromStart()})}dispatchAfter(e){this.actions.Audio.forEach(t=>{(t.interaction.data.triggerAfter??"any")===e&&(t.interaction instanceof Nu?t.interaction.audioPlayer.play():t.interaction instanceof G8&&t.interaction.dispatch())}),this.actions.Video.forEach(t=>{let r=t.interaction.data.triggerAfter??"autoplay";r===e&&(t.interaction instanceof Ap?t.interaction.play(r==="autoplay"):t.interaction instanceof q8&&t.interaction.dispatch())})}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.interaction instanceof Nu?t.interaction.audioPlayer.play():t.interaction instanceof G8&&t.interaction.dispatch()}),this.actions.Video.forEach(t=>{t.interaction instanceof Ap?t.interaction.play():t.interaction instanceof q8&&t.interaction.dispatch()})}},K0e=class extends Io{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,i])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(n=>{n.dispatchAfter("mouseDown")})})},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,i])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(n=>{n.dispatchAfter("keyDown")})})},this.onAny=()=>{let{domElement:r,isExport:i}=this.eventContext;(i?document:r).removeEventListener("pointerdown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([n,s])=>{n.dispatchEvent({type:"beginEvent",eventName:"Start"}),s.forEach(a=>{a.dispatchAfter("any")})})},this.onSceneTransitionAudioVideoPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,i])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(n=>{n.actions.Audio.forEach(s=>{s.interaction instanceof Nu&&s.interaction.audioPlayer.play()}),n.actions.Video.forEach(s=>{let a=s.interaction.data.triggerAfter??"autoplay";s.interaction instanceof Ap&&s.interaction.play(a==="autoplay")})})})},this.onPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,i])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(n=>{n.dispatchAfter("autoplay")})})},this.onUserEvent=({eventName:r,target:i,reverse:n})=>{var a,o;if(!r||!i)return;let s=Fm(r);s&&s==="Start"&&(i.dispatchEvent({type:"beginEvent",eventName:"Start"}),(a=this.eventsPerObject.get(i))==null||a.forEach(l=>{l.dispatchUserEvent(n)}),(o=this.eventsAfterPerObject.get(i))==null||o.forEach(l=>{l.dispatchUserEvent(n)}))}}connect(){let{sharedAssets:e,page:t}=this.eventContext;if(t.traverseEntity(r=>{var i,n,s,a;if((i=r.data)!=null&&i.events.length)for(let{id:o,data:l}of r.data.events){if(l.disabled||l.type!=="Start")continue;let h=new Z0e(o,l,r,t,e,this.eventManager);(h.actions.Transition.length||h.actions.Animation.length||h.actions.SwitchCamera.length||h.actions.Create.length||h.actions.Destroy.length||h.actions.SceneTransition.length)&&(this.eventsPerObject.has(r)?(n=this.eventsPerObject.get(r))==null||n.push(h):this.eventsPerObject.set(r,[h])),h.actions.Audio.length&&(this.eventsAfterPerObject.has(r)?(s=this.eventsAfterPerObject.get(r))==null||s.push(h):this.eventsAfterPerObject.set(r,[h])),h.actions.Video.length&&(this.hasVideoAction=!0,this.eventsAfterPerObject.has(r)?(a=this.eventsAfterPerObject.get(r))==null||a.push(h):this.eventsAfterPerObject.set(r,[h]))}}),[...this.eventsAfterPerObject.values()].some(r=>r.length)){if(this.eventManager.activateCount===0){let{domElement:r,isExport:i}=this.eventContext,n=i?document:r;n.addEventListener("pointerdown",this.onMouseDown,{once:!0}),n.addEventListener("mousedown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),n.addEventListener("pointerdown",this.onAny),n.addEventListener("mousedown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([s,a])=>{s.addEventListener("userEvent",this.onUserEvent)})}else this.onSceneTransitionAudioVideoPlay();this.onPlay()}[...this.eventsPerObject.entries()].forEach(([r,i])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),i.forEach(n=>n.dispatch()),r.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if([...this.eventsAfterPerObject.values()].some(e=>e.length)){let{domElement:e,isExport:t}=this.eventContext,r=t?document:e;r.removeEventListener("pointerdown",this.onMouseDown),r.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),r.removeEventListener("pointerdown",this.onAny),r.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([i,n])=>{i.removeEventListener("userEvent",this.onUserEvent),n.forEach(s=>s.disconnect())})}[...this.eventsPerObject.entries()].forEach(([e,t])=>{e.removeEventListener("userEvent",this.onUserEvent),t.forEach(r=>r.disconnect())}),this.eventsPerObject.clear(),this.eventsAfterPerObject.clear()}},$0e=class{constructor(e,t,r,i,n,s){this.id=e,this.data=t,this.object=r,this.disabled=!1,this.actions=Cs(t,t.actions,i,n,s,r),this.target=t.target,this.useToggle=t.toggle}disconnect(){Zn(this.actions)}dispatch(e){this.disabled||(this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.useToggle?(this.actions.Transition.forEach(t=>{t.toggle()}),this.actions.Animation.forEach(t=>{t.toggle()})):(this.actions.Transition.forEach(t=>{t.play()}),this.actions.Animation.forEach(t=>{t.play()})),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch(e??!1)}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}))}},J0e="https://unpkg.com/@splinetool/runtime@0.9.450/build/",eme="https://unpkg.com/@splinetool/navmesh-wasm@0.9.450/build/",tme=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import('${J0e}' + 'navmesh.js'),
		fetch('${eme}' + 'navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,rme=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import(self.location.origin + '/_libraries/navmesh.js'),
		fetch(self.location.origin + '/_libraries/navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,ime=`

onmessage = function(messageEvent) {
	const meshData = messageEvent.data;
	const positions = meshData[0];
	const offset = meshData[1];
	const indices = meshData[2];
	const indicesLength = meshData[3];
	const parameters = meshData[4];

	const module = self.module;
	const rc = new module.rcConfig();
	rc.cs = parameters.cs;
	rc.ch = parameters.ch;
	rc.borderSize = parameters.borderSize ? parameters.borderSize : 0;
	rc.tileSize = parameters.tileSize ? parameters.tileSize : 0;
	rc.walkableSlopeAngle = parameters.walkableSlopeAngle;
	rc.walkableHeight = parameters.walkableHeight;
	rc.walkableClimb = parameters.walkableClimb;
	rc.walkableRadius = parameters.walkableRadius;
	rc.maxEdgeLen = parameters.maxEdgeLen;
	rc.maxSimplificationError = parameters.maxSimplificationError;
	rc.minRegionArea = parameters.minRegionArea;
	rc.mergeRegionArea = parameters.mergeRegionArea;
	rc.maxVertsPerPoly = parameters.maxVertsPerPoly;
	rc.detailSampleDist = parameters.detailSampleDist;
	rc.detailSampleMaxError = parameters.detailSampleMaxError;

	if (!self.navMesh) {
		self.navMesh = new module.NavMesh();
	}
	self.navMesh.build(positions, offset, indices, indicesLength, rc);

	const navmeshData = navMesh.getNavmeshData();
	const arrView = new Uint8Array(module.HEAPU8.buffer, navmeshData.dataPointer, navmeshData.size);
	const ret = new Uint8Array(navmeshData.size);
	ret.set(arrView);
	navMesh.freeNavmeshData(navmeshData);

	postMessage(ret);
}
`,nme=.001,sme={cs:6,ch:2,walkableSlopeAngle:90,walkableHeight:20,walkableClimb:5,walkableRadius:0,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1},AN,Rt,Pi;noe.then(e=>{AN=e,Rt=new e.Vec3,Pi=new e.Vec3});var ame=new E,ome=class{constructor(e=!1,t=!1){this.usePhysics=e,this.isExport=t,this.onPointerDown=r=>{if(ht.length!==1)return;let{raycaster:i,page:n}=this.eventContext;this.eventContext.updateRaycaster(r);let s=n.raycastWithClones(i);if(s.length!==0){if(this.gameControl){let a=ame.copy(this.gameControl.colliderWorldPosition);a.y-=this.gameControl.colliderHeight/2,this.gameControl.path=this.computePath(a,s[0].point)}this.eventContext.requestRender()}},this.traverseWithPhysics=(r,i)=>n=>{var d,p,f,m,g,v,y;let s;if(n instanceof La)if(n.objectForSample){if(n.objectForSample.dataPatched.physics.fusedBody)return;s=n.object}else return n.object.dataPatched.physics.fusedBody===!0&&n.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(n instanceof Yi)s=n.object;else if(s=n,((d=s.dataPatched.cloner)==null?void 0:d.disabled)===!1&&((p=s.dataPatched.cloner)==null?void 0:p.hideBase)&&((f=s.dataPatched.physics)==null?void 0:f.fusedBody)!==!0)return!0;if(i&&!s.userData.navmesh)return;let a=s.dataPatched;if(!a.visible&&((m=a.physics)==null?void 0:m.enabled)!==!0)return!0;n.updateMatrixWorldSVD();let o=$3(a),l=s.userData.hasDestroy,h=s.userData.hasDrag,c=!1,u=!1;for(let x of a.events)x.data.disabled!==!0&&(x.data.type==="GameControl"?c=!0:x.data.type==="Follow"&&(u=!0));if(c||o||u||l||h)return!0;if(this.usePhysics&&((g=a.physics)==null?void 0:g.rigidBody)==="dynamic"){if(this.usePhysics&&((v=a.physics)!=null&&v.fusedBody))return!0}else if("geometry"in n&&n.geometry&&r.push(sl(n.geometry,n.matrixWorld)),this.usePhysics&&((y=a.physics)==null?void 0:y.fusedBody))return n.traverseObject((x,w)=>{var S,C;if(w===0)return;let _;if(x instanceof La)if(x.objectForSample){if(x.objectForSample.dataPatched.physics.fusedBody)return;_=x.object}else return x.object.dataPatched.physics.fusedBody===!0&&x.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(x instanceof Yi)_=x.object;else if(_=x,(S=x.dataPatched.cloner)==null?void 0:S.hideBase)return!0;let b=_.dataPatched;if(!b.visible&&((C=b.physics)==null?void 0:C.enabled)!==!0)return!0;"geometry"in x&&x.geometry&&r.push(sl(x.geometry,x.matrixWorld))}),!0},this.traverseNoPhysics=(r,i)=>n=>{let s;if(n instanceof La)return;n instanceof Yi?s=n.object:s=n;let a=s.dataPatched;if(a.physics.enabled==="visibility"?!a.visible:!a.physics.enabled)return!0;if(i&&!s.userData.navmesh)return;let o=n.geometry,l=s.userData.hasDestroy===!0,h=s.userData.hasDrag===!0;if($3(a)||l||h||s.dataPatched.events.some(c=>c.data.disabled!==!0&&c.data.type==="GameControl"))return!0;o&&r.push(sl(o,n.matrixWorld))},this.navmeshWasm=AN,this.navMesh=new this.navmeshWasm.NavMesh,this._workerURL=URL.createObjectURL(new Blob([(t?tme:rme)+ime])),this._worker=new Worker(this._workerURL)}init(e,t,r){this.gameControl=t,this.eventContext=r,this.resolution=e.ch,this.setDefaultQueryExtent(new E().setScalar(e.ch*e.walkableRadius*1.2)),this._worker.onmessage=()=>{this.createNavMesh(r.page,e,i=>{this.buildFromNavmeshData(i.data)})},this.eventContext.renderer.domElement.addEventListener("pointerdown",this.onPointerDown)}createNavMesh(e,t,r){t.objects.forEach(l=>{var c;let h=e.scene.find(l);h.traverseEntity(u=>{u.userData.navmesh=!0}),(c=h.cloner)==null||c.traverseObject(u=>{u.userData.navmesh=!0})});let i=[],n=(this.usePhysics?this.traverseWithPhysics:this.traverseNoPhysics)(i,t.zones==="custom");if(e.traverseChildren(n),t.objects.forEach(l=>{var c;let h=e.scene.find(l);h.traverseEntity(u=>{u.userData.navmesh=void 0}),(c=h.cloner)==null||c.traverseObject(u=>{u.userData.navmesh=void 0})}),i.length===0)return!1;let s=zu(i),{positions:a,triIndices:o}=jy(s.getAttribute("position"),s.getIndex());return this._worker.postMessage([a,a.length/3,o,o.length,{...sme,...t}]),this._worker.onmessage=r,!0}createDebugNavGeometry(){let e,t,r=this.navMesh.getDebugNavMesh(),i=r.getTriangleCount(),n=new Uint32Array(i*3),s=new Float32Array(i*3*3);for(e=0;e<i*3;e++)n[e]=e;for(e=0;e<i;e++)for(t=0;t<3;t++){let o=r.getTriangle(e).getPoint(t);s[e*9+t*3+0]=o.x,s[e*9+t*3+1]=o.y,s[e*9+t*3+2]=o.z}let a=new dt;return a.setIndex(new pt(n,1)),a.setAttribute("position",new pt(s,3)),a}getClosestPoint(e){return Rt.x=e.x,Rt.y=e.y,Rt.z=e.z,this.navMesh.getClosestPoint(Rt)}getClosestPointToRef(e,t){Rt.x=e.x,Rt.y=e.y,Rt.z=e.z;let r=this.navMesh.getClosestPoint(Rt);t.set(r.x,r.y,r.z)}getRandomPointAround(e,t){return Rt.x=e.x,Rt.y=e.y,Rt.z=e.z,this.navMesh.getRandomPointAround(Rt,t)}getRandomPointAroundToRef(e,t,r){Rt.x=e.x,Rt.y=e.y,Rt.z=e.z;let i=this.navMesh.getRandomPointAround(Rt,t);r.set(i.x,i.y,i.z)}moveAlong(e,t){return Rt.x=e.x,Rt.y=e.y,Rt.z=e.z,Pi.x=t.x,Pi.y=t.y,Pi.z=t.z,this.navMesh.moveAlong(Rt,Pi)}moveAlongToRef(e,t,r){return Rt.x=e.x,Rt.y=e.y,Rt.z=e.z,Pi.x=t.x,Pi.y=t.y,Pi.z=t.z,this.navMesh.moveAlong(Rt,Pi)}computePath(e,t){let r=this.getClosestPoint(t);Pi.x=r.x,Pi.y=r.y,Pi.z=r.z,this.getClosestPoint(e);let i=this.navMesh.computePath(Rt,Pi),n=i.getPointCount(),s=[];for(let a=0;a<n;a++){let o=i.getPoint(a);s.push(new E(o.x,o.y,o.z))}return s}createCrowd(e,t){return new lme(this,e,t)}setDefaultQueryExtent(e){Rt.x=e.x,Rt.y=e.y,Rt.z=e.z,this.navMesh.setDefaultQueryExtent(Rt)}getDefaultQueryExtent(){return this.navMesh.getDefaultQueryExtent()}buildFromNavmeshData(e){let t=e.length*e.BYTES_PER_ELEMENT,r=this.navmeshWasm._malloc(t),i=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,r,t);i.set(e);let n=new this.navmeshWasm.NavmeshData;n.dataPointer=i.byteOffset,n.size=e.length,this.navMesh.buildFromNavmeshData(n),this.navmeshWasm._free(i.byteOffset)}getNavmeshData(){let e=this.navMesh.getNavmeshData(),t=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,e.dataPointer,e.size),r=new Uint8Array(e.size);return r.set(t),this.navMesh.freeNavmeshData(e),r}getDefaultQueryExtentToRef(e){let t=this.navMesh.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}dispose(){var e;this.navMesh.destroy(),this._worker.terminate(),URL.revokeObjectURL(this._workerURL),(e=this.eventContext)==null||e.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown)}addCylinderObstacle(e,t,r){return Rt.x=e.x,Rt.y=e.y,Rt.z=e.z,this.navMesh.addCylinderObstacle(Rt,t,r)}addBoxObstacle(e,t,r){return Rt.x=e.x,Rt.y=e.y,Rt.z=e.z,Pi.x=t.x,Pi.y=t.y,Pi.z=t.z,this.navMesh.addBoxObstacle(Rt,Pi,r)}removeObstacle(e){this.navMesh.removeObstacle(e)}isSupported(){return this.navmeshWasm!==void 0}},lme=class{constructor(e,t,r){this.navmeshWasmWrapper=e,this.transforms=[],this.agents=new Array,this.reachRadii=new Array,this._agentDestinationArmed=new Array,this._agentDestination=new Array,this.crowd=new this.navmeshWasmWrapper.navmeshWasm.Crowd(t,r,this.navmeshWasmWrapper.navMesh.getNavMesh())}onReachTarget(e,t){}addAgent(e,t,r){let i=new this.navmeshWasmWrapper.navmeshWasm.dtCrowdAgentParams;i.radius=t.radius,i.height=t.height,i.maxAcceleration=t.maxAcceleration,i.maxSpeed=t.maxSpeed,i.collisionQueryRange=t.collisionQueryRange,i.pathOptimizationRange=t.pathOptimizationRange,i.separationWeight=t.separationWeight,i.updateFlags=7,i.obstacleAvoidanceType=0,i.queryFilterType=0,i.userData=0;let n=this.crowd.addAgent(new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z),i);return this.transforms.push(r),this.agents.push(n),this.reachRadii.push(t.reachRadius?t.reachRadius:t.radius),this._agentDestinationArmed.push(!1),this._agentDestination.push(new E(0,0,0)),n}getAgentPosition(e){return this.crowd.getAgentPosition(e)}getAgentPositionToRef(e,t){let r=this.crowd.getAgentPosition(e);t.set(r.x,r.y,r.z)}getAgentVelocity(e){return this.crowd.getAgentVelocity(e)}getAgentVelocityToRef(e,t){let r=this.crowd.getAgentVelocity(e);t.set(r.x,r.y,r.z)}getAgentNextTargetPath(e){return this.crowd.getAgentNextTargetPath(e)}getAgentNextTargetPathToRef(e,t){let r=this.crowd.getAgentNextTargetPath(e);t.set(r.x,r.y,r.z)}getAgentState(e){return this.crowd.getAgentState(e)}overOffmeshConnection(e){return this.crowd.overOffmeshConnection(e)}agentGoto(e,t){this.crowd.agentGoto(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z));let r=this.agents.indexOf(e);r>-1&&(this._agentDestinationArmed[r]=!0,this._agentDestination[r].set(t.x,t.y,t.z))}agentTeleport(e,t){this.crowd.agentTeleport(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z))}updateAgentParameters(e,t){let r=this.crowd.getAgentParameters(e);t.radius!==void 0&&(r.radius=t.radius),t.height!==void 0&&(r.height=t.height),t.maxAcceleration!==void 0&&(r.maxAcceleration=t.maxAcceleration),t.maxSpeed!==void 0&&(r.maxSpeed=t.maxSpeed),t.collisionQueryRange!==void 0&&(r.collisionQueryRange=t.collisionQueryRange),t.pathOptimizationRange!==void 0&&(r.pathOptimizationRange=t.pathOptimizationRange),t.separationWeight!==void 0&&(r.separationWeight=t.separationWeight),this.crowd.setAgentParameters(e,r)}removeAgent(e){this.crowd.removeAgent(e);let t=this.agents.indexOf(e);t>-1&&(this.agents.splice(t,1),this.transforms.splice(t,1),this.reachRadii.splice(t,1),this._agentDestinationArmed.splice(t,1),this._agentDestination.splice(t,1))}getAgents(){return this.agents}update(e){if(this.navmeshWasmWrapper.navMesh.update(),e<=nme)return;let t=1/60,r=10;{let i=Math.floor(e/t);i>r&&(i=r),i<1&&(i=1);let n=e/i;for(let s=0;s<i;s++)this.crowd.update(n)}for(let i=0;i<this.agents.length;i++){let n=this.agents[i],s=this.getAgentPosition(n);if(this.transforms[i].copy(s),this._agentDestinationArmed[i]){let a=s.x-this._agentDestination[i].x,o=s.z-this._agentDestination[i].z,l=this.reachRadii[i],h=this._agentDestination[i].y-this.reachRadii[i],c=this._agentDestination[i].y+this.reachRadii[i],u=a*a+o*o;s.y>h&&s.y<c&&u<l*l&&(this.onReachTarget(n,this._agentDestination[i]),this._agentDestinationArmed[i]=!1)}}}setDefaultQueryExtent(e){let t=new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z);this.crowd.setDefaultQueryExtent(t)}getDefaultQueryExtent(){return this.crowd.getDefaultQueryExtent()}getDefaultQueryExtentToRef(e){let t=this.crowd.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}getCorners(e){let t,r=this.crowd.getCorners(e),i=r.getPointCount(),n=[];for(t=0;t<i;t++){let s=r.getPoint(t);n.push(new E(s.x,s.y,s.z))}return n}dispose(){this.crowd.destroy()}};function hme(e){let t=!1;return e.scene.objects.forEach(r=>{r.data.type==="Page"&&!t&&r.data.publish.gameControlObject&&um.traverseModuleInstances(e,r.id,(i,n,s)=>{for(let a of s)a.data.type==="GameControl"&&a.data.navmesh.enabled&&(t=!0)})}),t}var ume={type:"change"},PL={type:"changeZoom"},cme={type:"changePan"},hd={type:"start"},ud={type:"end",changed:!0},dme={type:"end",changed:!1},Lx=new Et,DL=new X,pme=2*Math.PI,fme=1e-8,mme=.01,Px=new E,Ov=new X,Dx=new E,Iv=new Et,OL=new Ae,gme={type:"requestRender"},EN=class extends Ni{constructor(e,t,r={isPlayMode:!1,isExport:!1}){super(),this.object=e,this.domElement=t,this.options=r,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,Es.DOLLY_ROTATE,Es.PAN],this.offset=new E,this.eye=new E,this.lastPosition=new E,this.lastQuaternion=new Et,this.current=new X,this.overShoot=new X,this.overRatio=new X,this.spherical=new eA,this.sphericalDelta=new eA,this.panOffset=new E,this.panLeftV=new E,this.panUpV=new E,this.panV=new E,this.rotateStart=new X,this.rotateEnd=new X,this.rotateDelta=new X,this.panStart=new X,this.panEnd=new X,this.panDelta=new X,this.dollyStart=new X,this.dollyEnd=new X,this.dollyDelta=new X,this.rotationRangeFactor=new X,this.panRangeFactor=new X,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.resetHoverEffectOnPointerLeave=!1,this.hasChange=!1,this.useWindowEvents=!1,this.isTouchZoom=!0,this.autoRotateSpeed=2,this.dampingFactor=.125,this.zoomSpeed=2,this.rotateSpeed=1,this.panSpeed=1,this.hoverRotatePanStrength=.1,this.thetaIsFree=!1,this.phiIsFree=!1,this.needsUpdate=!0,this.onCameraChange=i=>{this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange),this.object=i.camera,this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)},this.update=()=>{this.object.updateWorldMatrix(!0,!1),this.object.matrixWorld.decompose(Dx,Iv,Px),this.offset.copy(Dx).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&this.state===-1&&this.rotateLeft((this.autoRotateClockwise===!0?1:-1)*this.getAutoRotationAngle()),this.rotationLimitsMode!==0&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),this.rotationLimitsMode!==2&&(this.spherical.phi+=this.sphericalDelta.phi),(this.rotationLimitsMode!==1||this.autoRotate===!0)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),this.panLimitsMode!==0&&(this.target.applyQuaternion(Lx.copy(Iv).invert()),this.panOffset.applyQuaternion(Lx),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(Iv),this.panOffset.applyQuaternion(Iv)),this.panLimitsMode===2&&(this.panOffset.y=0),this.panLimitsMode===1&&(this.panOffset.x=0),this.state===-1&&!this.gesture?(this.panOffset.multiplyScalar(1-this.dampingFactor),this.target.add(this.panOffset)):(this.target.add(this.panOffset),this.panOffset.set(0,0,0)),this.offset.setFromSpherical(this.spherical),Dx.copy(this.target).add(this.offset),this.object.position.copy(this.target).add(this.offset),this.object.parent&&(OL.copy(this.object.parent.matrixWorld).invert(),this.object.position.applyMatrix4(OL));let i=this.spherical.phi%pme;return this.eye.copy(this.offset).normalize(),this.object.up.copy(ir.DEFAULT_UP).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),i>0&&i>Math.PI||i<0&&i>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),this.state===-1||this.enableDamping===!0?(this.sphericalDelta.theta*=1-this.dampingFactor,this.sphericalDelta.phi*=1-this.dampingFactor):this.sphericalDelta.set(0,0,0),this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>mme||8*(1-this.lastQuaternion.dot(this.object.quaternion))>fme?(this.dispatchEvent(ume),this.object.dispatchEvent(gme),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.object.wasMovedBySwitchCameraAction=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=i=>{this.enabled!==!1&&(i.pointerType==="touch"||i.pointerType==="pen"&&ms?this.onPointerDownTouch(i):this.onPointerDownMouse(i),this.state!==-1&&(this.isPointerDown=!0,this.dispatchEvent(hd),this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp),i.stopPropagation(),i.pointerType==="touch"||i.pointerType==="pen"&&ms||this.domElement.setPointerCapture(i.pointerId)))},this.onPointerLeave=i=>{this.resetHoverEffectOnPointerLeave&&!this.useWindowEvents?(this.hoverRotatePanMode===1?(this.sphericalDelta.theta=-this.spherical.theta,this.sphericalDelta.phi=-this.spherical.phi,Px.subVectors(this.position0,this.target0),this.spherical.setFromVector3(Px),this.sphericalDelta.theta+=this.spherical.theta,this.sphericalDelta.phi+=this.spherical.phi,this.sphericalDelta.theta/=8,this.sphericalDelta.phi/=8):this.hoverRotatePanMode===2&&this.panOffset.subVectors(this.target0,this.target).divideScalar(8),this.update()):this.pointerLeaveEvent=i},this.onPointerEnter=i=>{this.resetHoverEffectOnPointerLeave||this.pointerLeaveEvent===void 0?Ov.set(i.clientX-this.domElement.clientWidth/2,i.clientY-this.domElement.clientHeight/2):Ov.set(i.clientX-this.pointerLeaveEvent.clientX,i.clientY-this.pointerLeaveEvent.clientY),this.hoverRotatePanMode===1?(this.rotateDelta.copy(Ov).multiplyScalar(this.rotateSpeed*this.hoverRotatePanStrength).rotateAround(DL,-this.object.angleOffsetFromUp),this.rotateLeft(2*Math.PI*this.rotateDelta.x/this.domElement.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight),this.rotateStart.set(i.clientX,i.clientY)):this.hoverRotatePanMode===2&&(this.panDelta.copy(Ov).multiplyScalar(this.panSpeed*this.hoverRotatePanStrength),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.set(i.clientX,i.clientY)),this.update()},this.onPointerMove=i=>{this.enabled!==!1&&(this.checkRaycastLock()||(i.pointerType==="touch"||i.pointerType==="pen"&&ms?this.onPointerMoveTouch(i):this.onPointerMoveMouse(i),i.stopPropagation()))},this.onPointerUp=i=>{this.isPointerDown=!1,ht.length===0&&(this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)),ht.length>1&&i.preventDefault(),this.hasChange?this.dispatchEvent(ud):this.dispatchEvent(dme),this.state=-1,i&&(i.stopPropagation(),i.pointerType==="touch"||i.pointerType==="pen"&&ms||this.domElement.releasePointerCapture(i.pointerId))},this.onPointerDownMouse=i=>{let n;switch(this.useKeyEvents?n=this.mouseButtons[i.button]:n=this.mouseButtonsPlay[i.button],n){case 0:if(i.altKey===!0&&!i.shiftKey&&!Zg(i)){if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}else if(this.key===" "){if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}break;case 4:if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2;break;case 3:if(Zg(i)||i.shiftKey){if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}else{if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}break;case 5:if(Zg(i)||i.shiftKey){if(this.enableRotate===!1)return;this.handleMouseDownRotate(i),this.state=0}else{if(this.enablePan===!1)return;this.handleMouseDownPan(i),this.state=2}break;default:this.state=-1}},this.onPointerMoveMouse=i=>{switch(this.state){case 0:if(this.enableRotate===!1)return;this.handleMouseMoveRotate(i);break;case 1:if(this.enableZoom===!1)return;this.handleMouseMoveDolly(i);break;case 2:if(this.enablePan===!1)return;this.handleMouseMovePan(i);break}this.object.wasMovedByUser=!0},this.onPointerDownTouch=i=>{switch(ht.length>1&&i.preventDefault(),this.touches[ht.length-1]){case Es.ROTATE:if(this.enableRotate===!1){this.state=-1;return}this.handleTouchStartRotate(),this.state=3;break;case Es.PAN:if(this.enablePan===!1){this.state=-1;return}this.handleTouchStartPan(),this.state=4;break;case Es.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchStartDollyPan(),this.state=5;break;case Es.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}},this.onPointerMoveTouch=i=>{switch(ht.length>1&&i.preventDefault(),this.state){case 3:if(this.enableRotate===!1)return;this.handleTouchMoveRotate(i),this.update();break;case 4:if(this.enablePan===!1)return;this.handleTouchMovePan(i),this.update();break;case 5:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchMoveDollyPan(i),this.update();break;case 6:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchMoveDollyRotate(i),this.update();break;default:this.state=-1}this.object.wasMovedByUser=!0},this.dispatchEndDebounced=cb(()=>this.dispatchEvent(ud),33),this.onMouseWheel=i=>{this.enabled===!1||this.enableZoom===!1&&this.enablePan===!1||this.checkRaycastLock()||(!this.options.isExport&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&i.preventDefault(),this.dispatchEvent(hd),this.handleMouseWheel(i),this.dispatchEndDebounced(),this.object.wasMovedByUser=!0)},this.onGesture=i=>{if(i.preventDefault(),this.enabled!==!1&&!this.checkRaycastLock()&&!DB)if(i.type==="gesturechange"){if(this.enableZoom===!1||this.isTouchZoom===!1)return;this.dispatchEvent(hd),i.scale>this.prevScale?this.dollyIn(this.getZoomScale()):i.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=i.scale,this.update(),this.object.wasMovedByUser=!0}else this.dispatchEvent(ud)},this.onContextMenu=i=>{i.preventDefault()},this.onTouchEnd=i=>{i.preventDefault()},this.onKeyDown=i=>{this.enabled!==!1&&(this.key=i.key,i.key===" "&&this.dispatchEvent(hd))},this.onKeyUp=i=>{this.enabled!==!1&&(this.key=void 0,this.state!==-1&&i.key==="Alt"&&this.onPointerUp(ht[0]),i.key===" "&&this.dispatchEvent(ud))},this.onPointerHover=i=>{i.pointerType!=="mouse"||this.enabled===!1||this.state!==-1||this.hoverRotatePanMode===2&&this.isPanOverShoot||this.hoverRotatePanMode===1&&this.isRotateOverShoot||(this.isPointerDown=!0,this.hoverRotatePanMode===2?this.handleMouseMovePan(i,this.hoverRotatePanStrength):this.hoverRotatePanMode===1&&this.handleMouseMoveRotate(i,this.hoverRotatePanStrength))},this.onBeginState=()=>{this.enabled=!1,this.needsUpdate=!1},this.onCompleteState=i=>{i.isfromEntity&&this.options.isPlayMode||(this.enabled=!0,this.needsUpdate=!0,this.object.updateUp(),this.object.getTarget(this.target))},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.quat0=this.object.quaternion.clone(),this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.offset.copy(this.object.position).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.addEventListenersToCamera()}dispatchEvent(e){e.type==="start"?this.hasChange=!1:this.hasChange=!0,super.dispatchEvent(e)}addEventListenersToCamera(){this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)}removeEventListenersFromCamera(){this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange)}updateUseWindowEvents(e){if(window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("pointermove",this.onPointerHover),this.useWindowEvents=e,this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let t=this.useWindowEvents?window:this.domElement;t.addEventListener("pointerleave",this.onPointerLeave),t.addEventListener("pointerenter",this.onPointerEnter)}}fromJSON(e,t){this.setEnableDampingSpeed(e.enableDamping),this.enablePan=e.enablePan,this.enableZoom=e.enableZoom,this.enableRotate=e.enableRotate,this.rotationLimitsMode=e.rotationLimitsMode,this.thetaIsFree=e.rotationHorizontalOffset.min===e.rotationHorizontalOffset.max&&e.rotationHorizontalOffset.min===Math.PI,this.phiIsFree=e.rotationVerticalOffset.min===e.rotationVerticalOffset.max&&e.rotationVerticalOffset.min===Math.PI,this.panLimitsMode=e.panLimitsMode,this.panSoftLimit=e.panSoftLimit,this.rotationSoftLimit=e.rotationSoftLimit,this.hoverRotatePanMode=e.hoverRotatePanMode,this.useWindowEvents=t==="window",this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover));let r=e.hoverRotatePanStrength/100;this.hoverRotatePanStrength=r**2,this.zoomLimitsEnabled=e.zoomLimitsEnabled,this.minZoom=e.zoomLimits.min,this.maxZoom=Math.max(e.zoomLimits.min,e.zoomLimits.max),this.minDistance=1e3/e.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/e.zoomLimits.min),this.autoRotate=e.autoRotate,this.autoRotateSpeed=e.autoRotateSpeed,this.autoRotateClockwise=e.autoRotateClockwise;let i=this.object.getTarget().applyQuaternion(Lx.copy(this.object.quaternion).invert());this.minV=-e.panVerticalOffset.min+i.y,this.maxV=e.panVerticalOffset.max+i.y,this.minH=-e.panHorizontalOffset.min+i.x,this.maxH=e.panHorizontalOffset.max+i.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=Ja(this.spherical.phi-e.rotationVerticalOffset.min),this.maxPhi=Ja(this.spherical.phi+e.rotationVerticalOffset.max),this.minTheta=Ja(Ja(this.spherical.theta)-e.rotationHorizontalOffset.min),this.maxTheta=Ja(Ja(this.spherical.theta)+e.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,e.orbitTouches===1&&(this.touches[0]=Es.ROTATE),e.panTouches===1&&(this.touches[0]=Es.PAN),e.orbitTouches===2&&(this.touches[1]=Es.DOLLY_ROTATE),e.panTouches===2&&(this.touches[1]=Es.DOLLY_PAN),e.orbitTouches===3&&(this.touches[2]=Es.ROTATE),e.panTouches===3&&(this.touches[2]=Es.PAN),this.isTouchZoom=e.isTouchZoom,this.resetHoverEffectOnPointerLeave=e.resetHoverEffectOnPointerLeave??!1}connect(){if(this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture),this.domElement.addEventListener("touchend",this.onTouchEnd),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let e=this.useWindowEvents?window:this.domElement;e.addEventListener("pointerleave",this.onPointerLeave),e.addEventListener("pointerenter",this.onPointerEnter)}this.pointerLeaveEvent=void 0}dispose(){this.removeEventListenersFromCamera(),this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}applyLimits(e,t,r,i,n,s,a,o){this.overShoot.set(0,0);let l,h,c;e instanceof E?(l=e.x,h=e.y,this.current.set(this.target.x,this.target.y),c=!0):(l=e.theta,h=e.phi,this.current.set(Ja(this.spherical.theta),Ja(this.spherical.phi)),c=!1),r===0&&(this.current.x+=l,this.current.y+=h),(t===3||t===2)&&(!c&&this.isThetaFlipped?this.current.x>i&&this.current.x<0?this.overShoot.x=i-this.current.x:this.current.x<n&&this.current.x>0&&(this.overShoot.x=n-this.current.x):this.current.x>i?this.overShoot.x=i-this.current.x:this.current.x<n&&(this.overShoot.x=n-this.current.x)),(t===3||t===1)&&(this.current.y>s?this.overShoot.y=s-this.current.y:this.current.y<a&&(this.overShoot.y=a-this.current.y)),c||(this.overShoot.x=Ja(this.overShoot.x),this.overShoot.y=Ja(this.overShoot.y)),r!==0?(this.overRatio.copy(this.overShoot).divide(o),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),r===1&&(this.overRatio.x=IL(Math.abs(this.overRatio.x)),this.overRatio.y=IL(Math.abs(this.overRatio.y))),this.isPointerDown||r===1?r===2&&(this.overRatio.x>.9&&!this.thetaIsFree||this.overRatio.y>.9&&!this.phiIsFree)?this.isPointerDown=!1:(l*this.overShoot.x<0&&!this.thetaIsFree&&(l*=1-this.overRatio.x),h*this.overShoot.y<0&&!this.phiIsFree&&(h*=1-this.overRatio.y)):r===2&&(!c&&(this.overRatio.x>.002&&!this.thetaIsFree||this.overRatio.y>.002&&!this.phiIsFree)||c&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(this.thetaIsFree||(l=this.overShoot.x*.05),this.phiIsFree||(h=this.overShoot.y*.05),c?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):c?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,h+=this.overShoot.y),e instanceof E?(e.x=l,e.y=h):(this.thetaIsFree||(e.theta=l),this.phiIsFree||(e.phi=h))}setEnableDampingSpeed(e){this.enableDamping=e,this.rotateSpeed=e===!0?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*this.autoRotateSpeed}getZoomScale(){return Math.pow(.95,this.zoomSpeed)}rotateLeft(e){this.sphericalDelta.theta-=e}rotateUp(e){this.sphericalDelta.phi-=e}panLeft(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)}panUp(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)}pan(e,t){let r=this.domElement;if(r&&this.object.isPerspectiveCamera){let i=this.object.position;this.panV.copy(i).sub(this.target);let n=this.panV.length();n*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*n/r.clientHeight,this.object.matrixWorld),this.panUp(2*t*n/r.clientHeight,this.object.matrixWorld)}else r&&this.object.isOrthographicCamera&&(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrixWorld),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrixWorld));this.dispatchEvent(cme)}dollyOut(e){this.object.isPerspectiveCamera?this.scale/=e:this.object.isOrthographicCamera&&(this.object.zoom*=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(PL)}dollyIn(e){this.object.isPerspectiveCamera?this.scale*=e:this.object.isOrthographicCamera&&(this.object.zoom/=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(PL)}zoomOut(e=this.getZoomScale()){this.dispatchEvent(hd),this.dollyOut(e),this.dispatchEvent(ud)}zoomIn(e=this.getZoomScale()){this.dispatchEvent(hd),this.dollyIn(e),this.dispatchEvent(ud)}handleMouseDownRotate(e){this.rotateStart.set(e.clientX,e.clientY)}handleMouseDownDolly(e){this.dollyStart.set(e.clientX,e.clientY)}handleMouseDownPan(e){this.panStart.set(e.clientX,e.clientY)}handleMouseMoveRotate(e,t=1){e.movementX!==void 0?this.rotateDelta.set(e.movementX,e.movementY):(this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)),this.rotateDelta.multiplyScalar(this.rotateSpeed*t).rotateAround(DL,-this.object.angleOffsetFromUp);let r=this.domElement,i=this.useWindowEvents?window.innerHeight:r.clientHeight,n=2*Math.PI*this.rotateDelta.x/i,s=2*Math.PI*this.rotateDelta.y/i;this.rotateLeft(n),this.rotateUp(s),this.update()}handleMouseMoveDolly(e){this.dollyEnd.set(e.clientX,e.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(e,t=1){e.movementX!==void 0?this.panDelta.set(e.movementX,e.movementY):(this.panEnd.set(e.clientX,e.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)),this.panDelta.multiplyScalar(this.panSpeed*t),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(e){if(Jae===!1&&Zg(e)===!1&&vme(e)===!0){if(this.enablePan===!1)return;this.gesture?(this.panDelta.set(-e.deltaX,-e.deltaY).multiplyScalar(this.panSpeed),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),e.altKey?this.pan(0,this.panDelta.y):e.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1},30)}else{if(this.enableZoom===!1)return;e.deltaY===0?e.deltaX<0?this.dollyIn(this.getZoomScale()):e.deltaX>0&&this.dollyOut(this.getZoomScale()):e.deltaY<0?this.dollyIn(this.getZoomScale()):e.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if(ht.length===2){let e=.5*(ht[0].pageX+ht[1].pageX),t=.5*(ht[0].pageY+ht[1].pageY);this.rotateStart.set(e,t)}else this.rotateStart.set(ht[0].pageX,ht[0].pageY)}handleTouchStartPan(){if(ht.length===2){let e=.5*(ht[0].pageX+ht[1].pageX),t=.5*(ht[0].pageY+ht[1].pageY);this.panStart.set(e,t)}else this.panStart.set(ht[0].pageX,ht[0].pageY)}handleTouchStartDolly(){let e=ht[0].pageX-ht[1].pageX,t=ht[0].pageY-ht[1].pageY,r=Math.sqrt(e*e+t*t);this.dollyStart.set(0,r)}handleTouchStartDollyPan(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(e){if(ht.length===2){let r=D5(e),i=.5*(e.pageX+r.x),n=.5*(e.pageY+r.y);this.rotateEnd.set(i,n)}else{if(e.pointerId!==ht[0].pointerId)return;this.rotateEnd.set(e.pageX,e.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;t&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/t.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/t.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(e){if(ht.length===2){let t=D5(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);this.panEnd.set(r,i)}else{if(e.pointerId!==ht[0].pointerId)return;this.panEnd.set(e.pageX,e.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(e){let t=D5(e),r=e.pageX-t.x,i=e.pageY-t.y,n=Math.sqrt(r*r+i*i);this.dollyEnd.set(0,n),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,this.zoomSpeed)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(e){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(e),this.enablePan&&this.handleTouchMovePan(e)}handleTouchMoveDollyRotate(e){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(e),this.enableRotate&&this.handleTouchMoveRotate(e)}checkRaycastLock(){var e;if(this.object.data.raycastLock){if(this.options.isPlayMode)return!1;{let t=(e=this.options)==null?void 0:e.showCameraLock;return t&&t(),!0}}else return!1}};function Ja(e){let t=Math.PI*2;for(;e<=-Math.PI;)e+=t;for(;e>Math.PI;)e-=t;return e}function IL(e){return 1-Math.pow(1-e,4)}function vme(e){return e.wheelDeltaY===0||e.deltaY===0?Ry&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120?!1:e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX:e.deltaMode===0:e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY:e.deltaMode===0}var RL=class{constructor(e,t,r,i,n,s){this.id=e,this.data=t,this.object=r,this.currentIntersectedObjects=[],this.disabled=!1,this.actions=Cs(t,t.actions,i,n,s,r),this.target=t.target,this.useToggle=t.toggle,this.triggeringObjects=t.triggeringObjects.map(a=>i.scene.find(a))}isValidTriggeringObject(e){return this.target==="all"?!0:this.triggeringObjects.some(t=>t===e||t.isAncestorOf(e.uuid)||e.isAncestorOf(t.uuid))}disconnect(){Zn(this.actions)}dispatch(){this.disabled||(this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Trigger"}),this.useToggle?(this.actions.Transition.forEach(e=>{e.toggle()}),this.actions.SwitchCamera.forEach(e=>{e.toggle()})):(this.actions.Transition.forEach(e=>{e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()})),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch(!1)}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}))}},Ut;aoe.then(e=>Ut=e);var Yr=new E,va=new Et,$l=new E,Ox=new bi(0,0,0,"YXZ"),BL=new bi(0,0,0,"XYZ"),qo=new E,zL=new E,kL=new E(1,1,1),cd=new Et,Ix=new Ae,yme=new Ae,xme={type:"updateMatrix"},Z8={type:"beginEvent",eventName:"Collision"},wme={type:"beginEvent",eventName:"Trigger"};function bme(e){if(um.physicsEnabled(e.scene.objects))return!0;let t=!1;return e.scene.objects.traverse((r,i)=>{if(i.events){for(let n of i.events)if(n.data.disabled!==!0&&n.data.type==="GameControl"&&n.data.collisionEnabled){t=!0;break}}}),t}var $3=e=>e.states.some(t=>t.data.position!==void 0||t.data.rotation!==void 0||t.data.hiddenMatrix!==void 0||t.data.cloner!==void 0||t.data.pathSnapping!==void 0),_me=class{constructor(e){this.eventContext=e,this.isEnabled=!1,this.gameControl=null,this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],entityToCollisionEvents:{},colliderToEntity:new Map,triggers:[],gamePads:[],createdObjects:[],nCreatedPerAction:{}},this.sensorToTriggerEvent={},this.eventManager=void 0,this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.isExport=!1,this.processRigidBody=t=>{if(t.bodyType()!==Ut.RigidBodyType.Dynamic)return;t.isSleeping()||this.nActiveRigidBodies++;let[r,i,n]=this.rigidBodyToMesh.get(t.handle);if(Yr.copy(t.translation()).multiplyScalar(this.pixelsPerMeter),va.copy(t.rotation()),r.matrixWorld.compose(Yr,va,i),r.hasNonUniformScale&&r.matrixWorld.multiply(r.shearScale),r.dispatchEvent(xme),n){let s=r.cloner;if(s&&s.objectForSample===void 0){s.matrixWorld.copy(r.matrixWorld);for(let a of s.children)a.updateMatrixWorld(!0)}for(let a of r.children)a.updateMatrixWorld(!0)}},this.accumulator=0,this.handleCollisionEvents=(t,r,i)=>{var a,o,l,h;if(i===!1)return;let n,s;if(this.sensorToTriggerEvent[t]?(n=this.sensorToTriggerEvent[t],s=this.sharedGameControlGlobals.colliderToEntity.get(r)):this.sensorToTriggerEvent[r]&&(n=this.sensorToTriggerEvent[r],s=this.sharedGameControlGlobals.colliderToEntity.get(t)),n&&s&&n.isValidTriggeringObject(s)){n.dispatch();return}for(let c=this.sharedGameControlGlobals.createdObjects.length-1;c>=0;c--){let u=this.sharedGameControlGlobals.createdObjects[c];if(u.userData.hasCollisionDestroy&&(((a=u.rigidBody)==null?void 0:a.collider(0).handle)===t||((o=u.rigidBody)==null?void 0:o.collider(0).handle)===r)){this.sharedGameControlGlobals.createdObjects.splice(c,1),u.removeFromParent(),requestAnimationFrame(()=>{var d;return(d=this.sharedGameControlGlobals.rapierWorld)==null?void 0:d.removeRigidBody(u.rigidBody)});break}}if(((l=this.gameControl)==null?void 0:l.object)===this.sharedGameControlGlobals.colliderToEntity.get(t)){let c=this.sharedGameControlGlobals.colliderToEntity.get(r),u=this.sharedGameControlGlobals.entityToCollisionEvents[c.uuid];if(u===void 0)return;for(let d of u)d.data.target==="character"&&this.dispatchCollisionEvent(d,c,r)}else if(((h=this.gameControl)==null?void 0:h.object)===this.sharedGameControlGlobals.colliderToEntity.get(r)){let c=this.sharedGameControlGlobals.colliderToEntity.get(t),u=this.sharedGameControlGlobals.entityToCollisionEvents[c.uuid];if(u===void 0)return;for(let d of u)d.data.target==="character"&&this.dispatchCollisionEvent(d,c,t)}else{let c=this.sharedGameControlGlobals.colliderToEntity.get(t),u=this.sharedGameControlGlobals.entityToCollisionEvents[c.uuid];if(u!==void 0)for(let f of u)f.data.target==="scene"&&this.dispatchCollisionEvent(f,c,t);let d=this.sharedGameControlGlobals.colliderToEntity.get(r),p=this.sharedGameControlGlobals.entityToCollisionEvents[d==null?void 0:d.uuid];if(p!==void 0)for(let f of p)f.data.target==="scene"&&this.dispatchCollisionEvent(f,d,r)}},this.isExport=e.isExport,this.sharedAssets=e.sharedAssets,this.renderer=e.renderer,this.requestRender=e.requestRender,this.domElement=this.renderer.domElement,this.pixelsPerMeter=vN,this.gravity=this.page.data.globalPhysics.gravity}get page(){return this.eventContext.page}attachVRControllers(e){e.forEach(t=>{t.addEventListener("connected",r=>{"gamepad"in r.data&&"axes"in r.data.gamepad&&this.sharedGameControlGlobals.gamePads.push(r.data.gamepad)})})}markIsDestroyTarget(){this.page.traverseVisibleEntity(e=>{var r,i;let t=e.dataPatched;for(let n of t.events){if(n.data.disabled===!0)continue;let s=(i=(r=n.data.actions)==null?void 0:r.find(a=>a.data.type==="Destroy"))==null?void 0:i.data;if(s)for(let a of s.objects){let o=this.page.scene.find(a);o&&(o.userData.hasDestroy=!0)}}})}markIsDragObject(){this.page.traverseVisibleEntity(e=>{let t=e.dataPatched;for(let r of t.events)if(!(r.data.disabled===!0||r.data.type!=="DragDrop"))for(let i of r.data.objects){let n=this.page.scene.find(i);n&&(n.userData.hasDrag=!0)}})}initBVH(){let e=[];if(this.page.traverseChildren(t=>{var o,l;let r;if(t instanceof La)return;t instanceof Yi?r=t.object:r=t;let i=r.dataPatched;if(((o=i.physics)==null?void 0:o.enabled)==="visibility"?!i.visible:!((l=i.physics)!=null&&l.enabled))return!0;let n=t.geometry,s=r.userData.hasDestroy===!0,a=r.userData.hasDrag===!0;if($3(i)||s||a||r.dataPatched.events.some(h=>h.data.disabled!==!0&&h.data.type==="GameControl"))return t.updateMatrixWorldSVD(),this.addBoundsTree(t),!0;n&&e.push(sl(n,t.matrixWorld))}),e.length>0){let t=zu(e,!1);this.sharedGameControlGlobals.staticMeshBVH=new g0(t)}}addRigidBody(e,t,r){let i=[],n="geometry"in e?e.geometry:void 0,s=t.dataPatched;if((n==null?void 0:n.getAttribute("position"))!==void 0&&i.push(sl(n,e.shearScale)),s.physics.fusedBody){let a=this.gatherChildrenGeom(e,i);e.traverseObject(a),e.children.forEach(l=>l.updateMatrixWorld(!0));let o=e.cloner;o&&o.objectForSample===void 0&&s.physics.rigidBody==="dynamic"&&(o.traverseObject(a),o.children.forEach(l=>l.updateMatrixWorld(!0)))}if(i.length>0){let a,o=!r.fromCreate&&s.physics.rigidBody==="dynamic"||r.fromCreate&&r.dynamic;o?(a=Ut.RigidBodyDesc.dynamic(),a.setLinearDamping(s.physics.damping).setAngularDamping(s.physics.damping).setAdditionalMass(1e-9).setGravityScale(s.physics.gravityScale).enabledRotations(...s.physics.enabledRotation).enabledTranslations(...s.physics.enabledTranslation)):(r.hasTransformAnim||r.hasFollow||r.hasDrag)&&!r.fromCreate?(a=Ut.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)):a=Ut.RigidBodyDesc.fixed();let l=zu(i);(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(Yr,va,$l),e.position0=Yr.clone().divideScalar(this.pixelsPerMeter),e.rotation0=va.clone(),Yr.divideScalar(this.pixelsPerMeter),a.setTranslation(Yr.x,Yr.y,Yr.z).setRotation(va),n?l==null||l.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):l==null||l.scale($l.x/this.pixelsPerMeter,$l.y/this.pixelsPerMeter,$l.z/this.pixelsPerMeter);let h=this.sharedGameControlGlobals.rapierWorld.createRigidBody(a);o&&this.rigidBodyToMesh.set(h.handle,[e,$l.clone(),s.physics.fusedBody]);let c=!(s.geometry===void 0||s.geometry.type==="SubdivGeometry"||s.geometry.type==="NonParametricGeometry"||s.geometry.type==="BooleanGeometry"||s.geometry.type==="VectorGeometry"||s.geometry.type==="StarGeometry"||s.geometry.type==="RectangleGeometry"||s.geometry.type==="EllipseGeometry"||s.geometry.type==="TriangleGeometry"||s.geometry.type==="TorusGeometry"||s.geometry.type==="HelixGeometry");try{this.addCollider(h,s.physics,l,t,c)}catch{try{this.addCollider(h,s.physics,l,t,!1)}catch(u){console.error(u)}}e.rigidBody=h}}addBoundsTree(e){var r;let t=[];if(((r=e.geometry)==null?void 0:r.getAttribute("position"))!==void 0&&t.push(sl(e.geometry,e.shearScale)),e.traverseObject(this.gatherChildrenGeom(e,t)),e.children.forEach(i=>i.updateMatrixWorld(!0)),t.length>0){let i=zu(t,!1);e.bvhGeometry=i,e.bvhGeometry.boundsTree=new g0(i),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)}}addCollider(e,t,r,i,n=!0){var o,l;if((r==null?void 0:r.getAttribute("position").count)===0||((o=r==null?void 0:r.getIndex())==null?void 0:o.count)===0)return;let s;r&&(t.colliderType==="trimesh"?s=Ut.ColliderDesc.trimesh(r.getAttribute("position").array,r.getIndex().array):s=Ut.ColliderDesc.convexMesh(r.getAttribute("position").array,n?r.getIndex().array:void 0)),s.setFrictionCombineRule(Ut.CoefficientCombineRule.Average).setRestitutionCombineRule(Ut.CoefficientCombineRule.Average).setDensity(t.density).setFriction(t.friction).setRestitution(t.restitution);let a=this.sharedGameControlGlobals.rapierWorld.createCollider(s,e);this.sharedGameControlGlobals.colliderToEntity.set(a.handle,i),(l=this.sharedGameControlGlobals.entityToCollisionEvents[i.uuid])!=null&&l.some(h=>h.target==="scene")&&a.setActiveEvents(Ut.ActiveEvents.COLLISION_EVENTS)}gatherChildrenGeom(e,t){return(r,i)=>{var o;if(i===0)return;let n;if(r instanceof La)if(r.objectForSample){if(r.objectForSample.dataPatched.physics.fusedBody)return;n=r.object}else return r.object.dataPatched.physics.fusedBody===!0&&r.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(r instanceof Yi)n=r.object;else if(n=r,(o=n.dataPatched.cloner)==null?void 0:o.hideBase)return!0;let s=n.dataPatched;if(s.physics.enabled==="visibility"?!s.visible:!s.physics.enabled)return!0;i===1?e.hasNonUniformScale?r.matrixWorld.multiplyMatrices(e.shearScale,r.hiddenMatrix):r.matrixWorld.copy(r.hiddenMatrix):r.matrixWorld.multiplyMatrices(r.parent.matrixWorld,r.hiddenMatrix),r.matrixWorld.multiply(r.matrix);let a=r.geometry;(a==null?void 0:a.getAttribute("position"))!==void 0&&t.push(sl(a,r.matrixWorld))}}activate(e){var d,p;if(this.isEnabled)return;this.isEnabled=!0,this.eventManager=e,this.usePhysics=this.page.data.globalPhysics.usePhysics;let t=this.page.playCamera,r=!1,i=5,n=8,s=9,a="drag",o=this.page.data.publish.gameControlObject,l=o!==null?this.page.find(o):null,h=null;if(l)for(let f of l.data.events){if(f.data.disabled||f.data.type!=="GameControl")break;let m=l;for(;this.usePhysics&&((d=m=m.parent)==null?void 0:d.parent)!==null&&!((p=m.data.physics)!=null&&p.fusedBody););f.data.collisionEnabled&&(this.needsCollisionDetection=!0),h===null&&(h=f.data)}if(l&&h){r=r||h.camera===t.uuid||l.uuid===t.uuid;let f=new yN(l,this.renderer.domElement,h,this.eventContext.page.data.globalPhysics,this,l.uuid!==t.uuid&&h.camera===t.uuid,t,this.page,this.sharedAssets);this.gameControl=f,h.keyAssignments,i=h.joystickPosLoc,n=h.joystickRotLoc,s=h.jumpTouchButtonLoc,a=h.rotByTouch,ms&&h.touchControl&&(this.joystickToGameControls[i]="pos",h.moveMode==="walk"&&(this.joystickToGameControls[s]="jmp"),a==="joystick"&&(this.joystickToGameControls[n]="rot"))}if(this.gameControl&&this.gameControl.data.navmesh.enabled){let f=this.gameControl.data;if(!this.navigationMeshWrapper){this.navigationMeshWrapper=new ome(this.usePhysics,this.isExport);let m;f.collider.type==="sphere"?m=f.collider.radius*2:m=f.collider.height,m=Math.floor(m/f.navmesh.ch-1),this.navigationMeshWrapper.init({...f.navmesh,walkableHeight:m},this.gameControl,this.eventContext)}}if(r===!1){let{enableRotate:f,enablePan:m,enableZoom:g,autoRotate:v,hoverRotatePanMode:y}=this.eventManager.publish.orbitControls;(f||m||g||v||y!==0)&&(this.orbitControls=new EN(t,this.renderer.domElement,{isExport:this.isExport,isPlayMode:!0}),this.orbitControls.addEventListener("change",this.requestRender),this.orbitControls.addEventListener("end",this.requestRender),this.orbitControls.addEventListener("start",this.requestRender),this.orbitControls.fromJSON(this.eventManager.publish.orbitControls,this.eventManager.publish.mouseEventTarget),this.orbitControls.useKeyEvents=!1,this.orbitControls.addEventListenersToCamera(),this.orbitControls.connect(),this.orbitControls.update())}let c=this.renderer.domElement.width/this.renderer.getPixelRatio(),u=this.renderer.domElement.height/this.renderer.getPixelRatio();this.joystickToGameControls.forEach((f,m)=>{let g=document.body.appendChild(document.createElement("div")),[v,y,x]=this.eventManager.eventContext.publish.joystickSizeAndXYOffset[m],w=(c-5*v)/4+v,_={},b=f==="jmp",S=b?0:v;m<10?(m<5?_.top=S/2:_.bottom=S/2,_.left=S/2+m%5*w):m===10?(_.left=S/2,_.top=u/2):(_.right=S/2,_.top=u/2),_.top?_.top-=y[1]:_.bottom+=y[1],_.left?_.left+=y[0]:_.right-=y[0];for(let A in _)_[A]+="px";if(b){let A=g.appendChild(document.createElement("div"));Object.assign(A.style,_,{position:"absolute",width:v+"px",height:v+"px",backgroundColor:`rgba(255,255,255,${x==="show"?.4:0})`,zIndex:"9999",borderRadius:v+"px",border:x==="show"?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let T=v/16*16*.4;x==="show"&&(A.innerHTML=`
						<svg width="${T}" height="${v*.4}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					`),A.addEventListener("pointerdown",()=>{this.gameControl.movementState.jump=1,this.requestRender()}),A.addEventListener("touchend",L=>L.preventDefault()),this.joysticks[m]=[void 0,g];return}let C={zone:g,mode:"static",position:_,size:v};x==="hide"&&(C.restOpacity=0);let M=Ufe.create(C);M.on("move",(A,T)=>{let L=this.gameControl;f==="pos"?T.force<.2?L.moveForce=0:(L.movementState.movePosZ=Math.sin(-T.angle.radian),L.movementState.movePosX=Math.cos(-T.angle.radian),T.force>1.2?L.movementState.run=1:L.movementState.run=0,T.force<.3?L.moveForce=(T.force-.2)/.1:L.moveForce=1):f==="rot"&&(T.force<.2?L.rotForce=0:(L.movementState.rotPosX=T.vector.y,L.movementState.rotPosY=-T.vector.x,T.force<.3?L.rotForce=(T.force-.2)/.1:L.rotForce=1)),this.requestRender()}),M.on("end",(A,T)=>{let L=this.gameControl;f==="pos"?(L.movementState.movePosZ=0,L.movementState.movePosX=0,L.moveForce=1):f==="rot"&&(L.movementState.rotPosX=0,L.movementState.rotPosY=0,L.rotForce=1)}),this.joysticks[m]=[M,g]}),this.markIsDestroyTarget(),this.markIsDragObject(),this.rebuildBVH(),this.initializationCounter++,window.setTimeout(()=>{this.collisionEvents.forEach(f=>f.disabled=!1)},80)}initPhysics(){var a;(a=this.sharedGameControlGlobals.rapierWorld)==null||a.free(),this.sharedGameControlGlobals.rapierWorld=new Ut.World(new Ut.Vector3(0,this.gravity,0)),this.events=new Ut.EventQueue(!0);let e=[],t=[];if(this.page.traverseChildren(o=>{var v,y,x,w;let l;if(o instanceof La)if(o.objectForSample){if(o.objectForSample.dataPatched.physics.fusedBody)return;l=o.object}else return o.object.dataPatched.physics.fusedBody===!0&&o.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(o instanceof Yi)l=o.object;else if(l=o,((v=l.dataPatched.cloner)==null?void 0:v.disabled)===!1&&((y=l.dataPatched.cloner)==null?void 0:y.hideBase)&&((x=l.dataPatched.physics)==null?void 0:x.fusedBody)!==!0)return!0;let h=l.dataPatched,c;for(let _ of h.events)_.data.disabled!==!0&&_.data.type==="GameControl"&&(c=_.data);if(!h.physics||(h.physics.enabled==="visibility"?!h.visible:!h.physics.enabled))return!0;o.updateMatrixWorldSVD();let u=$3(h),d=!1,p=l.userData.hasDestroy,f=l.userData.hasDrag,m=!1;for(let _ of h.events)if(_.data.disabled!==!0){if(_.data.type==="Collision"){d=!0;let b=new $0e(_.id,_.data,l,this.page,this.sharedAssets,this.eventManager);b.disabled=!0,this.collisionEvents.push(b),this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid]&&this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid].every(S=>S.id!==_.id)?this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid].push(b):this.sharedGameControlGlobals.entityToCollisionEvents[l.uuid]=[b]}else if(_.data.type==="Follow"){m=!0;let b=_.data.target;o.traverseVisible(S=>{S.userData.isFollowingObj=b})}}h.physics.rigidBody==="dynamic"&&h.physics.fusedBody===!1&&(o.matrixWorldFusedFalse=o.matrixWorld.clone());let g=o.geometry;if(c!==void 0){let _=Ut.RigidBodyDesc.kinematicPositionBased();(o.hasNonUniformScale?o.matrixWorldRigid:o.matrixWorld).decompose(Yr,va,$l),o.position0=Yr.clone().divideScalar(this.pixelsPerMeter),o.rotation0=va.clone(),Yr.divideScalar(this.pixelsPerMeter),_.setTranslation(Yr.x,Yr.y,Yr.z).setRotation(va);let b=this.sharedGameControlGlobals.rapierWorld.createRigidBody(_);o.rigidBody=b;let S;c.collider.type==="sphere"?S=Ut.ColliderDesc.ball(c.collider.radius/this.pixelsPerMeter):c.collider.type==="capsule"?S=Ut.ColliderDesc.capsule((c.collider.height/2-c.collider.radius)/this.pixelsPerMeter,c.collider.radius/this.pixelsPerMeter):S=Ut.ColliderDesc.cuboid(c.collider.width/this.pixelsPerMeter/2,c.collider.height/this.pixelsPerMeter/2,c.collider.depth/this.pixelsPerMeter/2),S.setFrictionCombineRule(Ut.CoefficientCombineRule.Average).setRestitutionCombineRule(Ut.CoefficientCombineRule.Average).setDensity(h.physics.density).setFriction(h.physics.friction).setRestitution(h.physics.restitution);let C=this.sharedGameControlGlobals.rapierWorld.createCollider(S,b);this.sharedGameControlGlobals.colliderToEntity.set(C.handle,l),Yr.fromArray(c.collider.position).multiply($l.setFromMatrixScale(l.matrixWorld)).divideScalar(this.pixelsPerMeter),C.setTranslationWrtParent(Yr);let M=new Et().setFromEuler(new bi().setFromVector3(new E().fromArray(c.collider.rotation)));C.setRotationWrtParent(M),C.setActiveEvents(Ut.ActiveEvents.COLLISION_EVENTS),this.generateSensorColliderDescs(l,!0)}else h.physics.rigidBody==="dynamic"||u||m||p||f||d?(this.addRigidBody(o,l,{hasFollow:m,hasTransformAnim:u,hasDrag:f}),this.generateSensorColliderDescs(l,h.physics.fusedBody)):(g&&e.push(sl(g,o.matrixWorld)),h.physics.fusedBody&&o.traverseObject((_,b)=>{var A;if(b===0)return;let S;if(_ instanceof La)if(_.objectForSample){if(_.objectForSample.dataPatched.physics.fusedBody)return;S=_.object}else return _.object.dataPatched.physics.fusedBody===!0&&_.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(_ instanceof Yi)S=_.object;else if(S=_,(A=S.dataPatched.cloner)==null?void 0:A.hideBase)return!0;let C=S.dataPatched;if(C.physics.enabled==="visibility"?!C.visible:!C.physics.enabled)return!0;let M=_.geometry;(M==null?void 0:M.getAttribute("position"))!==void 0&&e.push(sl(M,_.matrixWorld))}),this.generateSensorColliderDescs(l,h.physics.fusedBody,t));if(((w=h.physics)==null?void 0:w.fusedBody)===!0||c)return!0}),e.length===0)return;let r=zu(e);r.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let i=Ut.RigidBodyDesc.fixed(),n=this.sharedGameControlGlobals.rapierWorld.createRigidBody(i),s=Ut.ColliderDesc.trimesh(r.getAttribute("position").array,r.getIndex().array).setFrictionCombineRule(Ut.CoefficientCombineRule.Multiply).setRestitutionCombineRule(Ut.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(s,n);for(let[o,l]of t){let h=this.sharedGameControlGlobals.rapierWorld.createCollider(o,n);this.sensorToTriggerEvent[h.handle]=l}}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}rebuildBVH(){this.usePhysics?(this.gameControl===null||this.needsCollisionDetection)&&this.initPhysics():(this.page.traverseEntity(e=>{for(let t of e.dataPatched.events)if(t.data.type==="Trigger"&&t.data.disabled!==!0){let r=new RL(t.id,t.data,e,this.page,this.sharedAssets,this.eventManager),i=new Ae().compose(qo.fromArray(t.data.position),cd.setFromEuler(BL.fromArray(t.data.rotation)),kL);if(t.data.triggerZone==="box"){let n=new qr;n.min.fromArray(t.data.size).multiplyScalar(-.5),n.max.fromArray(t.data.size).multiplyScalar(.5),this.sharedGameControlGlobals.triggers.push([n,i,e,r])}else this.sharedGameControlGlobals.triggers.push([t.data.radius,i,e,r])}}),this.needsCollisionDetection&&this.initBVH())}disconnectEvents(){this.collisionEvents.forEach(e=>e.disconnect()),this.sharedGameControlGlobals.triggers.forEach(e=>e[3].disconnect()),this.sharedGameControlGlobals.triggers.length=0}deactivate(){var e,t,r,i;if(this.isEnabled){this.isEnabled=!1,this.page.traverse(n=>{let s=n;s.matrixWorldFusedFalse&&(s.matrixWorldFusedFalse=void 0),s.rigidBody&&(s.rigidBody=void 0),s.position0&&(s.position0=void 0),s.rotation0&&(s.rotation0=void 0)}),(e=this.sharedGameControlGlobals.rapierWorld)==null||e.free(),this.sharedGameControlGlobals.rapierWorld=void 0,this.sharedGameControlGlobals.staticMeshBVH=void 0,this.accumulator=0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.disconnectEvents(),(t=this.gameControl)==null||t.reset(),(r=this.gameControl)==null||r.dispose(),this.gameControl=null,this.initializationCounter=-1,this.joysticks.forEach(([n,s])=>{n==null||n.destroy(),s.remove()}),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls&&(this.orbitControls.dispose(),this.orbitControls=void 0),(i=this.navigationMeshWrapper)==null||i.dispose(),this.navigationMeshWrapper=void 0;for(let n of Object.values(this.sharedGameControlGlobals.entityToCollisionEvents))n.forEach(s=>s.disconnect());this.sharedGameControlGlobals.entityToCollisionEvents={},this.page.updateMatrixWorld(!0)}}update(e,t,r){if(!this.isEnabled)return!0;let i=!0;if(this.orbitControls!==void 0&&this.orbitControls.needsUpdate&&(i=!this.orbitControls.update()),this.initializationCounter>=0&&this.initializationCounter<2?(this.initializationCounter++,i=!1):this.initializationCounter===2&&this.gameControl&&(i=!this.gameControl.update(e,t,r)&&i),this.usePhysics){let n=.016666666666666666;if(e===0)i=this.stepPhysics()&&i;else{let s=e/1e3;s<n&&s>n*.55&&(s=n),this.accumulator+=s;let a=performance.now(),o=0,l=6;for(;this.accumulator>=n&&o<l&&(i=this.stepPhysics()&&i,this.accumulator-=n,o++,!(performance.now()-a>n*1e3)););this.accumulator=this.accumulator%n}}return i}stepPhysics(){var e;for(let t of this.sharedGameControlGlobals.entitiesWithTransformAnim){(t.hasNonUniformScale?t.matrixWorldRigid:t.matrixWorld).decompose(Yr,va,$l),Ox.setFromQuaternion(va);let r=t;r.prevR===void 0?(r.prevR=Ox.clone(),r.prevT=Yr.clone()):(r.prevR.copy(Ox),r.prevT.copy(Yr)),t.rigidBody.setNextKinematicTranslation(Yr.divideScalar(this.pixelsPerMeter)),t.rigidBody.setNextKinematicRotation(va)}return this.sharedGameControlGlobals.rapierWorld.step(this.events),(e=this.events)==null||e.drainCollisionEvents(this.handleCollisionEvents),!this.updatePositions()}dispatchCollisionEvent(e,t,r){var s;let i=((s=this.sharedGameControlGlobals.rapierWorld)==null?void 0:s.getCollider(r))._parent,n;if(t.cloner){for(let a of t.cloner.children)if(a.rigidBody===i){n=a;break}}e.dispatch(n),t.dispatchEvent(Z8)}updateUseWindowEvents(e){var t;(t=this.orbitControls)==null||t.updateUseWindowEvents(e)}generateSensorColliderDescs(e,t,r){let i=yme.copy(e.matrixWorld).invert();e.traverseEntity((n,s)=>{if(t===!1&&s===1)return!0;for(let a of n.dataPatched.events)if(a.data.type==="Trigger"&&a.data.disabled!==!0){let o=new RL(a.id,a.data,n,this.page,this.sharedAssets,this.eventManager),l;if(a.data.triggerZone==="box"?l=Ut.ColliderDesc.cuboid(...a.data.size.map(h=>h/(2*this.pixelsPerMeter))):l=Ut.ColliderDesc.ball(a.data.radius/this.pixelsPerMeter),l.setDensity(0).setSensor(!0).setActiveEvents(Ut.ActiveEvents.COLLISION_EVENTS),qo.fromArray(a.data.position),cd.setFromEuler(BL.fromArray(a.data.rotation)),Ix.compose(qo,cd,kL).premultiply(n.matrixWorld),r?(Ix.decompose(qo,cd,zL),l.setActiveCollisionTypes(Ut.ActiveCollisionTypes.KINEMATIC_FIXED|Ut.ActiveCollisionTypes.DYNAMIC_FIXED)):(Ix.premultiply(i).decompose(qo,cd,zL),e.rigidBody.bodyType()===Ut.RigidBodyType.Dynamic||(e.rigidBody.bodyType()===Ut.RigidBodyType.Fixed?l.setActiveCollisionTypes(Ut.ActiveCollisionTypes.KINEMATIC_FIXED|Ut.ActiveCollisionTypes.DYNAMIC_FIXED):l.setActiveCollisionTypes(Ut.ActiveCollisionTypes.KINEMATIC_KINEMATIC|Ut.ActiveCollisionTypes.DYNAMIC_KINEMATIC))),qo.divideScalar(this.pixelsPerMeter),l.setTranslation(qo.x,qo.y,qo.z),l.setRotation(cd),r)r.push([l,o]);else{let h=this.sharedGameControlGlobals.rapierWorld.createCollider(l,e.rigidBody);this.sensorToTriggerEvent[h.handle]=o}}})}};function Cme(e){let t=this._clip.duration,r=this._clip.start??0,i=this.loop,n=this.time+e,s=this._loopCount,a=i===Pw;if(e===0)return s===-1?n:a&&(s&1)===1?t-(n-r):n;if(i===dR){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n>=t)n=t;else if(n<0)n=0;else{this.time=n;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),n>=t||n<r){let o=Math.floor((n-r)/(t-r));n-=(t-r)*o,s+=Math.abs(o);let l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a||(n=e>0?t:r,this.repetitions===1&&(n=t)),this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){let h=e<0;this._setEndings(h,!h,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=n;if(a&&(s&1)===1)return t-(n-r)}return n}var NL=!1,Sme=class{constructor(e,t,r,i){this.scene=e,this.requestRender=t,this.updateDisplayProgress=r,this.animationInspectorState=i,this.clipIdToAction={},this.activeClip=null,this.needsUpdate=!1,this.addClip=n=>{n.data.type==="Empty"&&n.data.animations&&n.data.animations.forEach((s,a)=>{let o=s[0]+"/";if(Array.isArray(n.identity)?o+=n.identity[0]:o+=n.uuid,this.clipIdToAction[o])return;let l=C7.parse(JSON.parse(s[2]));n.animations[a]=l;let h=this.mixer.clipAction(l,n);NL===!1&&(Object.getPrototypeOf(h)._updateTime=Cme,NL=!0),h.clampWhenFinished=!0,this.clipIdToAction[o]=h})},this.mixer=new S$(e),this.scene.traverseEntity(this.addClip)}deleteClip(e,t){let r=this.scene.find(t);if(!r)return;let i=r.animations.find(s=>s.uuid===e);if(!i)return;let n=this.clipIdToAction[e];!n||(n.stop(),this.mixer.uncacheClip(i),delete this.clipIdToAction[e],r.animations=r.animations.filter(s=>s.uuid!==e))}get isPlaying(){return Object.values(this.clipIdToAction).some(e=>e.isRunning())}playFromInspector(e){this.mixer.stopAllAction();let t=this.clipIdToAction[e];!t||(t.play(),this.activeClip=t.getClip(),this.requestRender())}onExitPlayMode(){Object.values(this.clipIdToAction).forEach(e=>{e.repetitions=1/0,e.loop=pR}),this.mixer.stopAllAction(),this.requestRender()}play(e){let t=e.clipId+"/"+e.object,r=this.clipIdToAction[t];if(r)return e&&(e.repeat>=0&&(r.repetitions=e.repeat+1),e.direction==="pingpong"&&e.repeat!==0&&(r.loop=Pw)),r.play(),r.paused=!1,this.requestRender(),r}resumeFromInspector(e){let t=this.clipIdToAction[e];!t||(t.play(),t.paused=!1,this.requestRender())}pauseFromInspector(e){let t=this.clipIdToAction[e];!t||(t.paused=!0)}stop(){this.mixer.stopAllAction(),this.requestRender()}update(e){var t;if(this.needsUpdate)this.needsUpdate=!1;else if(this.isPlaying===!1||(t=this.animationInspectorState)!=null&&t.isScrubbing)return;this.mixer.update(e/1e3),this.activeClip&&this.updateDisplayProgress(Math.round(this.mixer.time/this.activeClip.duration*this.maxFrames%this.maxFrames)),this.requestRender()}get maxFrames(){var e,t;return((t=(e=this.activeClip)==null?void 0:e.tracks[0])==null?void 0:t.times.length)??0}setProgressFromInspector(e,t){if(!this.clipIdToAction[t])return;this.activeClip!==this.clipIdToAction[t].getClip()&&this.playFromInspector(t);let r=this.clipIdToAction[t].paused;this.clipIdToAction[t].paused=!1,this.mixer.setTime(Math.min(this.maxFrames?e/this.maxFrames:0,.9999)*this.activeClip.duration),this.requestRender(),r&&(this.clipIdToAction[t].paused=!0)}},Rx=new WeakMap,Mme=class extends Hw{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,r,i){let n=new S7(this.manager);n.setPath(this.path),n.setResponseType("arraybuffer"),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(e,s=>{this.decodeDracoFile(s,t).catch(i)},r,i)}decodeDracoFile(e,t,r,i){let n={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!r};return this.decodeGeometry(e,n).then(t)}decodeGeometry(e,t){let r=JSON.stringify(t);if(Rx.has(e)){let o=Rx.get(e);if(o.key===r)return o.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i,n=this.workerNextTaskID++,s=e.byteLength,a=this._getWorker(n,s).then(o=>(i=o,new Promise((l,h)=>{i._callbacks[n]={resolve:l,reject:h},i.postMessage({type:"decode",id:n,taskConfig:t,buffer:e},[e])}))).then(o=>this._createGeometry(o.geometry));return a.catch(()=>!0).then(()=>{i&&n&&this._releaseTask(i,n)}),Rx.set(e,{key:r,promise:a}),a}_createGeometry(e){let t=new dt;e.index&&t.setIndex(new pt(e.index.array,1));for(let r=0;r<e.attributes.length;r++){let i=e.attributes[r],n=i.name,s=i.array,a=i.itemSize;t.setAttribute(n,new pt(s,a))}return t}_loadLibrary(e,t){let r=new S7(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise((i,n)=>{r.load(e,i,void 0,n)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(r=>{let i=r[0];e||(this.decoderConfig.wasmBinary=r[1]);let n=Ame.toString(),s=["/* draco decoder */",i,"","/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(n){let s=n.data;switch(s.type){case"decode":i._callbacks[s.id].resolve(s);break;case"error":i._callbacks[s.id].reject(s);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+s.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,n){return i._taskLoad>n._taskLoad?-1:1});let r=this.workerPool[this.workerPool.length-1];return r._taskCosts[e]=t,r._taskLoad+=t,r})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function Ame(){let e,t;onmessage=function(a){let o=a.data;switch(o.type){case"init":e=o.decoderConfig,t=new Promise(function(c){e.onModuleLoaded=function(u){c({draco:u})},DracoDecoderModule(e)});break;case"decode":let l=o.buffer,h=o.taskConfig;t.then(c=>{let u=c.draco,d=new u.Decoder,p=new u.DecoderBuffer;p.Init(new Int8Array(l),l.byteLength);try{let f=r(u,d,p,h),m=f.attributes.map(g=>g.array.buffer);f.index&&m.push(f.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:f},m)}catch(f){console.error(f),self.postMessage({type:"error",id:o.id,error:f.message})}finally{u.destroy(p),u.destroy(d)}});break}};function r(a,o,l,h){let c=h.attributeIDs,u=h.attributeTypes,d,p,f=o.GetEncodedGeometryType(l);if(f===a.TRIANGULAR_MESH)d=new a.Mesh,p=o.DecodeBufferToMesh(l,d);else if(f===a.POINT_CLOUD)d=new a.PointCloud,p=o.DecodeBufferToPointCloud(l,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!p.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+p.error_msg());let m={index:null,attributes:[]};for(let g in c){let v=self[u[g]],y,x;if(h.useUniqueIDs)x=c[g],y=o.GetAttributeByUniqueId(d,x);else{if(x=o.GetAttributeId(d,a[c[g]]),x===-1)continue;y=o.GetAttribute(d,x)}m.attributes.push(n(a,o,d,g,v,y))}return f===a.TRIANGULAR_MESH&&(m.index=i(a,o,d)),a.destroy(d),m}function i(a,o,l){let h=l.num_faces()*3,c=h*4,u=a._malloc(c);o.GetTrianglesUInt32Array(l,c,u);let d=new Uint32Array(a.HEAPF32.buffer,u,h).slice();return a._free(u),{array:d,itemSize:1}}function n(a,o,l,h,c,u){let d=u.num_components(),p=l.num_points()*d,f=p*c.BYTES_PER_ELEMENT,m=s(a,c),g=a._malloc(f);o.GetAttributeDataArrayForAllPoints(l,u,m,f,g);let v=new c(a.HEAPF32.buffer,g,p).slice();return a._free(g),{name:h,array:v,itemSize:d}}function s(a,o){switch(o){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}var _h;function Eme(){return _h||(_h=new Mme,_h.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload()),_h.decoderPending}async function Tme(e){if(_h){let t={attributeIDs:_h.defaultAttributeIDs,attributeTypes:_h.defaultAttributeTypes,useUniqueIDs:!1},r;try{r=await _h.decodeGeometry(new Int8Array(e).buffer,t)}catch(i){console.error(i)}if(r)return{index:r.index?{array:r.index.array}:void 0,attributes:Object.entries(r.attributes).map(([i,n])=>({name:i,itemSize:n.itemSize,array:n.array}))}}return null}async function Lme(e,t){let[r,i]=WB(U7.deserialize(new Uint8Array(e)));fz(r);let n=[];r.scene.objects.traverse((s,a)=>{a.type==="Mesh"&&a.geometry.type==="NonParametricGeometry"&&a.geometry.data.draco!==void 0&&n.push(a)}),n.length&&await Eme();for(let s of n){let a=await Tme(Mi(s.geometry.data.draco));if(a){a.index&&(s.geometry.data.index={array:a.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let o={};a.attributes.forEach(({name:l,array:h,itemSize:c})=>{o[l]={array:h,itemSize:c,type:"Float32Array",normalized:!1}}),s.geometry.data.attributes=o,s.geometry.data.draco=void 0}}return t&&t(r),i.result().data}var Pme=class{constructor(e,t,r,i,n,s,a){this.id=e,this.data=t,this.dataEvent=r,this.object=i,this.stage=!1,this.actions=Cs(r,t.actions,n,s,a,i)}disconnect(){Zn(this.actions)}dispatchIn(){this.actions.Audio.forEach(e=>e.dispatchBasic()),this.actions.Video.forEach(e=>e.dispatchBasic()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.Link.forEach(e=>e.dispatch()),this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.actions.Transition.forEach(e=>e.toggle()),this.actions.Animation.forEach(e=>e.play()),this.actions.SwitchCamera.forEach(e=>e.play()),this.actions.SceneTransition.forEach(e=>e.dispatch())}dispatchOut(){this.actions.Transition.forEach(e=>{e.toggle()})}},Dme=class extends Io{constructor(e,t){super(e),this.eventManager=t,this.breakpoints=[],this.helperResize=(r,i)=>{this.breakpoints.forEach(n=>{let s=H7.deviceToSize(n.data.size),a=n.dataEvent.orientation==="horizontal"?r:i,o;switch(n.data.operator){case"<":o=a<s[0];break;case">":o=a>s[0];break;case"<>":o=a>s[0]&&a<s[1];break}n.stage!==o&&(n.stage=o,n.stage?n.dispatchIn():n.dispatchOut())})},this.onResize=()=>{let{innerWidth:r,innerHeight:i}=window;this.helperResize(r,i)},this.onResizeObserver=new ResizeObserver(r=>{for(let i of r){let{width:n,height:s}=i.contentRect;this.helperResize(n,s)}})}connect(){let{page:e,sharedAssets:t,domElement:r,isExport:i,frame:n}=this.eventContext;i?window.addEventListener("resize",this.onResize):n.preset==="fullscreen"?this.onResizeObserver.observe(r):window.addEventListener("resize",this.onResize),e.traverseEntity(s=>{var a;if(!(!s.visible||!((a=s.data)!=null&&a.events.length)))for(let{data:o}of s.data.events)o.disabled||o.type==="Resize"&&o.breakpoints.forEach(({data:l,id:h})=>{try{let c=new Pme(h,l,o,s,e,t,this.eventManager);this.breakpoints.push(c)}catch{}})})}disconnect(){let{isExport:e,frame:t}=this.eventContext;e?window.removeEventListener("resize",this.onResize):t.preset==="fullscreen"?this.onResizeObserver.disconnect():window.removeEventListener("resize",this.onResize),this.breakpoints.forEach(r=>{r.disconnect()}),this.breakpoints=[]}},FL=Object.keys(CN).filter(e=>isNaN(Number(e))),Ome=class{constructor(e,t,r,i){this.publish=e,this.controlsManager=t,this.animationControls=r,this.eventContext=i,this.isEnabled=!1,this.activateCount=0,this.onResetRaycaster=()=>{this.eventContext.raycasterNeedsUpdate=!0},this.onTouchMovePreventScroll=n=>{(n.touches.length>1||this.preventTouchScroll)&&n.preventDefault()},this.onMouseWheelPreventScroll=n=>{this.preventScroll&&n.preventDefault()},this.stopRaycast=e.stopRaycast,this.preventScroll=e.preventScroll,this.preventTouchScroll=e.preventTouchScroll,this.hideCursor=e.hideCursor,this.requestRender=i.requestRender}activate(){if(this.isEnabled)return;this.isEnabled=!0,this.handlers={Spline:new b0e(this.eventContext),Conditional:new T0e(this.eventContext,this),Start:new K0e(this.eventContext,this),Basic:new C0e(this.eventContext,this),MouseHover:new q0e(this.eventContext,this),Scroll:new Q0e(this.eventContext,this),Follow:new N0e(this.eventContext,this),DragDrop:new I0e(this.eventContext,this),LookAt:new G0e(this.eventContext),Resize:new Dme(this.eventContext,this)};let{page:e,domElement:t,eventElement:r}=this.eventContext;this.hideCursor&&(t.style.cursor="none"),e.traverseEntity(i=>{i.addEventListener("requestRender",this.requestRender)}),Object.values(this.handlers).forEach(i=>i.connect()),FL.forEach(i=>{(Object.values(this.handlers).some(n=>n.domEventsNeeded.has(i))||i==="pointerdown"&&this.controlsManager.navigationMeshWrapper)&&(t.addEventListener(i,this.onResetRaycaster),r.addEventListener(i,this.onResetRaycaster))}),t.addEventListener("wheel",this.onMouseWheelPreventScroll),t.addEventListener("touchmove",this.onTouchMovePreventScroll),this.activateCount++}deactivate(){var r;if(!this.isEnabled)return;this.isEnabled=!1;let{page:e,domElement:t}=this.eventContext;t.style.cursor="",Object.values(this.handlers).forEach(i=>i.disconnect()),(r=this.controlsManager.gameControl)==null||r.disposeActions(),this.controlsManager.disconnectEvents(),e.traverseEntity(i=>{i.removeEventListener("requestRender",this.requestRender)}),FL.forEach(i=>{t.removeEventListener(i,this.onResetRaycaster)}),t.removeEventListener("touchmove",this.onTouchMovePreventScroll),t.removeEventListener("wheel",this.onMouseWheelPreventScroll),this.animationControls.onExitPlayMode()}get isPaused(){return this.isEnabled}pause(){this.deactivate()}resume(){this.activate()}reset(){this.deactivate(),this.activate(),this.controlsManager.page.updateMatrixWorld(!0),this.controlsManager.rebuildBVH()}updateUseWindowEvents(e){let t=this.isEnabled;t&&this.deactivate(),this.eventContext.useWindowEvents=e,t&&this.activate()}},Ime=class{constructor(e,t,r,i,n){this._aspect=1,this.enableResponsive=!1,this._renderer=e,this._camera=t,this._frameSize=new X().copy(r),this._editorSize=new X().copy(i),this._aspect=t.aspect,this._fov=n??t.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let e=this._frameSize.x,t=this._frameSize.y,r=this._editorSize.y;this._aspect=e/t,t<=r&&(this._camera.zoom*=r/t),this._renderer.setViewport(0,0,e,t)}updateCamera(e=!0){if(this._camera)if(this._camera.cameraType==="PerspectiveCamera"){let t=this._frameSize.y,r=this._editorSize.y,i=this._fov;if(e&&t>r){let n=Rme(t,1080,2160,1,15)/100;i*=t/r,i*=1-n}this._camera.aspect=this._aspect,this._camera.fov=i,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y,this.enableResponsive)}setCamera(e){this._camera=e,this._aspect=e.aspect,this._fov=e.fov}revert(){let e=window.innerWidth,t=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,t),this._renderer.setSize(e,t)),this._camera&&(this._camera.aspect=e/t,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,t,this.enableResponsive),this._camera.updateProjectionMatrix())}};function Rme(e,t,r,i,n){return(e-t)/(r-t)*(n-i)+i}var Bme=class{get sharedAssets(){return this.shared}constructor(e,t={}){this.shared=new Fb(e.shared,t),this.scene=new Yb(e.scene,this.sharedAssets)}reset(e,t){this.scene.clearScene(),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}resetPersonalCameraFromDocumentData(){for(let e of this.scene.children)e instanceof Uh&&e.personalCamera.updateState(e.data.camera,{scene:this.scene,shared:this.shared})}dispose(){this.scene.dispose(),this.shared.dispose()}gc(){this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity(e=>{e instanceof wn&&e.markGeometryAsReachable(this.shared)}),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}},zme=class{constructor({x:e=10,y:t=10}){this._startTime=0;let r=document.getElementById("spe-perfs");r?this.element=r:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${e}px`,this.element.style.top=`${t}px`}dispose(){var e;(e=this.element.parentElement)==null||e.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}};function kme(e){let t;if(e.index)for(let r=0;r<e.index.array.length;r+=3)t=e.index.array[r],e.index.array[r]=e.index.array[r+2],e.index.array[r+2]=t}function M0(e){return e instanceof gm?"SubdivObject":e.geometry.type==="NonParametricGeometry"?"NonParametric":"Mesh"}function Nme(e,t){let r={};return e.traverseEntity(i=>{var l;if(!i.visible||!(i instanceof Qn)||i.type!=="Mesh"||Array.isArray(i.material)||i.states&&Object.keys(i.states).length)return;let n=i.parent;for(;n;){if(n instanceof Qn&&i.states&&Object.keys(i.states).length)return;n=n.parent}let s=i.material.uuid,a=t.shared.materials[s];if(a){if(!Ki.isMergable(a))return}else{let h=(l=t.scene.objects.get(i.uuid))==null?void 0:l.data;if(h&&"material"in h&&typeof h.material!="string"){if(!Ki.isMergable(h.material))return;s=Ki.getHash(h.material)}}r[s]||(r[s]={});let o=r[s][M0(i)];if(o){if(o.push(i),i.cloner)for(let h of i.cloner.children)o.push(h)}else if(r[s][M0(i)]=[i],i.cloner)for(let h of i.cloner.children)r[s][M0(i)].push(h)}),r}function Fme(e){let t=0;return Object.values(e).forEach(r=>{Object.values(r).forEach(i=>{let n=i.length;n>t&&(t=n)})}),t}function Ume(e,t){let r=Nme(t,e),i=Fme(r),n=new Array(i),s=0,a=new Array(i),o=0,l=new Array(i),h=0,c=new Array(i),u=0;for(let[d,p]of Object.entries(r))for(let f of Object.values(p)){if(o=0,h=0,f.forEach(g=>{g instanceof Qn&&(a[o++]=g.geometry.clone(),l[h++]=g)}),h<2)continue;for(let g=0;g<h;g++)l[g].updateWorldMatrix(!0,!1),a[g].applyMatrix4(l[g].matrixWorld),l[g].matrixWorld.determinant()<0&&kme(a[g]);let m=zu(a.slice(0,o),!1);if(m){let g;switch(d){case"SubdivObject":{console.warn("Turning subdiv object into mesh"),g=new kn(m,l[0].material);break}default:{g=new kn(m,l[0].material);break}}g.castShadow=l[0].castShadow,g.receiveShadow=l[0].receiveShadow,t.add(g);let v=y=>{u=0;for(let x of y)x.children&&v(x.children),x instanceof Qn&&(Array.isArray(x.material)||r[x.material.uuid]&&r[x.material.uuid][M0(x)]&&r[x.material.uuid][M0(x)].length>1||(c[u++]=x));for(let x=0;x<u;x++)t.attach(c[x])};for(let y=0;y<h;y++){let x=l[y];v(x.children),n[s++]=x}}}for(let d=0;d<s;d++)n[d].removeFromParent()}var jme=hf(cW(),1),Vme=new X;function Gme(e){let t="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";e.endsWith(".spline")?console.warn(t+" The .spline files are only meant to be used by the Editor."):e.endsWith(".splinecode")||console.warn(t)}var Hme=class{constructor(e,{renderOnDemand:t,renderMode:r="auto"}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._isPaused=!1,this._renderRequested=!1,this._skipRender=!1,this.time=performance.now(),this.dt=0,this.currentTAAFrame=0,this.disposed=!1,this._requestRenderAutoMode=()=>{this._skipRender=!1},this.requestRender=()=>{this._renderRequested=!0},this.render=i=>{var n,s,a,o,l,h,c,u,d,p,f,m;if(this.time=i,this._lastTime&&(this.dt=this.time-this._lastTime),this._lastTime=this.time,(n=this._perfs)==null||n.start(),!this._renderer){(s=this._perfs)==null||s.end();return}if(!this._isPaused&&(this.renderMode==="manual"&&!this._renderRequested||this.renderMode==="auto"&&this._skipRender)){(a=this._perfs)==null||a.end();return}if(this._renderRequested=!1,this._skipRender=!0,this._controls&&(this._skipRender=this._controls.update(this.dt)),this._eventManager&&((o=this._eventManager.handlers)!=null&&o.Start.hasVideoAction||(l=this._eventManager.handlers)!=null&&l.Basic.hasVideoAction||(h=this._eventManager.handlers)!=null&&h.Conditional.hasVideoAction)&&(this._skipRender=!1),(c=this._animationControls)==null||c.update(this.dt),this._skipRender?(this.currentTAAFrame++,this.currentTAAFrame<32?this._skipRender=!1:this.currentTAAFrame=0):this.currentTAAFrame=0,this._scene&&this._scene.activeCamera!==this._camera&&(this._camera=this._scene.activeCamera),(u=this._eventManager)!=null&&u.isEnabled&&(((d=this._eventManager.handlers)==null?void 0:d.Follow).onAnimationFrameDamping(),((p=this._eventManager.handlers)==null?void 0:p.LookAt).onAnimationFrameDamping(),((f=this._eventManager.handlers)==null?void 0:f.DragDrop).onAnimationFrameDamping()),this._scene&&this._camera){if(this._scene.pathConstraints.applyConstraints(this._scene),this._renderer.sceneTransitionTimeRemaining>0){this._renderer.sceneTransitionTimeRemaining-=this.dt;let g=1-this._renderer.sceneTransitionTimeRemaining/this._renderer.sceneTransitionDuration;this._renderer.pipeline.sceneTransitionPass.uniforms.mixRatio.value=g,this._skipRender=!1}else this._renderer.pipeline.sceneTransitionFromTexture=null;this._renderer.renderSplineScene(this._scene,this._camera)}this.canvas.dispatchEvent(this._renderedEvent),(m=this._perfs)==null||m.end()},this._resize=()=>{var i,n,s,a,o,l,h,c,u,d;if(this._renderer){if(this._viewportMode===1&&this._frameView&&(this._frameView.frameSize=Vme.set(this._viewportWidth,this._viewportHeight)),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._camera=(i=this._scene)==null?void 0:i.activeCamera,(h=this._scene)==null||h.updateViewPlaneSize(((s=(n=this._frameView)==null?void 0:n.frameSize)==null?void 0:s.x)??this._viewportWidth,((o=(a=this._frameView)==null?void 0:a.frameSize)==null?void 0:o.y)??this._viewportHeight,((l=this._frameView)==null?void 0:l.enableResponsive)??!1),this._camera){let p=Object.values(((c=this._data)==null?void 0:c.frames)??{})[0].preset??"fullscreen";(u=this._frameView)==null||u.setCamera(this._camera),(d=this._frameView)==null||d.updateCamera(p!=="fullscreen"),this._camera.cameraType==="PerspectiveCamera"&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()}this._requestRenderAutoMode()}},this._debouncedResize=cb(this._resize,10),this.canvas=e,this.renderMode=t?"auto":r,this._renderedEvent=new CustomEvent("rendered",{bubbles:!0}),Object.defineProperty(this._renderedEvent,"target",{writable:!1,value:this}),window.location.search.includes("perfs")&&(this._perfs=new zme({x:10,y:10})),roe(e)}async load(e,t){Gme(e),this.disposed=!1;let r=await(await fetch(e,t)).arrayBuffer();await this.start(r)}async start(e,{interactive:t=!0}={}){var a,o,l;if(this.disposed)return;let r=await Lme(e);this._data=r,r.version&&(0,jme.default)(r.version,"0.9.450")>0&&console.warn("Your .splinecode file is more recent than the library. Please upgrade @splinetool/runtime to the latest version."),await Promise.all([OT(r)&&wue(),jce(r)&&vue(),um.physicsEnabled(r.scene.objects)&&ooe(),TT(r)&&Tce(),hme(r)&&soe()].filter(Boolean)),(a=this._eventManager)==null||a.deactivate(),(o=this._controls)==null||o.deactivate(),(l=this._scene)==null||l.dispose();let i=new Bme(r);if(i.resetPersonalCameraFromDocumentData(),this._scene=i.scene,this._sharedAssetsManager=i.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){let h=performance.now();Ume(r,i.scene);let c=performance.now();console.log("Merged geometries in ",c-h," ms")}OT(r)&&this._scene.traverse(h=>{po(h)&&h.recomputeBoolean()}),this._sharedAssetsManager.setRequestRender(()=>{var h;this._requestRenderAutoMode(),(h=this._scene)==null||h.traverse(c=>{c instanceof La&&c.pendingMediaLoad&&c.update()})});let n=Object.keys(r.shared.fonts).map(h=>this._sharedAssetsManager.getFont(h).loadingPromise);Promise.all(n).then(()=>{i.scene.markNeedsUpdateRendererDirty(),this._requestRenderAutoMode()}),TT(r)&&bme(r)&&await Promise.all(n),this._scene.rewriteEventsBeforeGoToPlayMode(),a_(this._scene.activePage,this._sharedAssetsManager),this._renderer||(this._renderer=new gfe({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.hdTransmission=r.scene.publish.hdTransmission===!0,this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.addEventListener("smaaloaded",this._requestRenderAutoMode)),r.scene.blueNoiseTextureData!==void 0&&this._renderer.pipeline.updateBlueNoiseTexture(r.scene.blueNoiseTextureData);let s=Object.values(r.frames)[0];if(this._frameView?this._frameView.setCamera(this._camera):(s.preset==="fullscreen"?(this._viewportMode=1,this.canvas.style.display="block",this.canvas.parentElement&&(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"),this.canvas.parentElement&&(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%")):(this._viewportMode=2,this._viewportWidth=s.size[0],this._viewportHeight=s.size[1],this.canvas.style.width=`${this._viewportWidth}px`,this.canvas.style.height=`${this._viewportHeight}px`),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new Ime(this._renderer,this._camera,new X(this._viewportWidth,this._viewportHeight),new X(window.innerWidth,window.innerHeight)),this._frameView.enableResponsive=(s.allowResponsive??!1)&&s.preset==="fullscreen"),t){let h=new x0e(this._renderer,this.data.scene.publish,this._scene,()=>this._scene.activeCamera,this._sharedAssetsManager,this._requestRenderAutoMode,!0,s);this._scene.updateMatrixWorld(!0),this._controls=new _me(h),this._animationControls=new Sme(this._scene,this._requestRenderAutoMode),this._eventManager=new Ome(r.scene.publish,this._controls,this._animationControls,h),this._eventManager.activate(),this._controls.activate(this._eventManager)}this._resize(),this.dt===0&&(this.render(performance.now()),setTimeout(()=>{var h;(h=this._renderer)==null||h.setAnimationLoop(this.render)},0)),this._resizeObserverTimeout=setTimeout(()=>{!this._resizeObserver&&this.canvas.parentElement&&(this._resizeObserver=new ResizeObserver(()=>{this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._debouncedResize()}),this._resizeObserver.observe(this.canvas.parentElement))},300)}findObjectById(e){var r;let t=(r=this._scene)==null?void 0:r.getObjectByProperty("uuid",e);return this._createProxyObject(t)}findObjectByName(e){var r;let t=(r=this._scene)==null?void 0:r.getObjectByName(e);return this._createProxyObject(t)}getAllObjects(){var t;let e=[];return(t=this._scene)==null||t.traverseEntity(r=>{if(r.uuid!==Cf&&!this._scene.isInvisibleObjects(r)&&!(r instanceof Uh)){let i=this._createProxyObject(r);i&&e.push(i)}}),e}getSplineEvents(){var e,t;return((t=(e=this._eventManager)==null?void 0:e.handlers)==null?void 0:t.Spline).splineEvents}emitEvent(e,t){var r;(r=this.findObjectById(t)||this.findObjectByName(t))==null||r.emitEvent(e)}emitEventReverse(e,t){var r;(r=this.findObjectById(t)||this.findObjectByName(t))==null||r.emitEventReverse(e)}addEventListener(e,t){this.canvas.addEventListener(e,t)}removeEventListener(e,t){this.canvas.removeEventListener(e,t)}setZoom(e){var t,r;((t=this._controls)==null?void 0:t.orbitControls)instanceof EN&&((r=this._controls)==null||r.orbitControls.zoomOut(e))}get eventManager(){return this._eventManager}get controls(){return this._controls}setSize(e,t){this._viewportWidth=e,this._viewportHeight=t,this._viewportMode=2,this._resize()}setBackgroundColor(e){var a;let{r:t,g:r,b:i,a:n}={r:0,g:0,b:0,a:1},s=new Xn(t,r,i,n);try{s.setStyle(e)}catch{console.error("This is not a valid css color",e)}(a=this._scene)==null||a.activePage.setBackgroundColor(s),this._requestRenderAutoMode()}dispose(){var e,t,r,i,n,s,a;this.disposed=!0,(e=this._eventManager)==null||e.deactivate(),(t=this._scene)==null||t.dispose(),(r=this._sharedAssetsManager)==null||r.dispose(),this._proxyObjectCache.forEach(o=>{uA.unsubscribe(o)}),(i=this._renderer)==null||i.setAnimationLoop(null),(n=this._renderer)==null||n.dispose(),this._renderer=void 0,(s=this._sharedAssetsManager)==null||s.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this._resizeObserverTimeout!==void 0&&clearTimeout(this._resizeObserverTimeout),this.canvas.style.width="",this.canvas.style.height="",this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this._frameView&&(this._frameView=void 0),(a=this._controls)==null||a.deactivate(),ioe(this.canvas)}get isStopped(){return this._isPaused}stop(){var e,t,r;this._isPaused||((e=this._renderer)==null||e.setAnimationLoop(null),this._isPaused=!0,(t=this._eventManager)==null||t.pause(),(r=this._controls)!=null&&r.orbitControls&&(this._controls.orbitControls.enabled=!1))}play(){var e,t,r;!this._isPaused||(this._isPaused=!1,(e=this._eventManager)==null||e.resume(),(t=this._controls)!=null&&t.orbitControls&&(this._controls.orbitControls.enabled=!0),(r=this._renderer)==null||r.setAnimationLoop(this.render))}setGlobalEvents(e){var t;(t=this._eventManager)==null||t.updateUseWindowEvents(e)}get data(){return this._data}_createProxyObject(e){var n;if(e==null)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let t;e.traverseAncestors(s=>{s instanceof Uh&&(t=s.name)});let r={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,type:e.data.type,page:t,parentUuid:e.parent instanceof Uh||e instanceof Yb||(n=e.parent)==null?void 0:n.uuid,emitEvent(s){e.dispatchEvent({type:"userEvent",eventName:s})},emitEventReverse(s){e.dispatchEvent({type:"userEvent",eventName:s,reverse:!0})}},i=uA(r,(s,a)=>{var o;typeof e[s]!="object"&&((o=Object.getOwnPropertyDescriptor(e,s))!=null&&o.writable)&&(e[s]=a),this._requestRenderAutoMode(),e.updateMatrix()});return this._proxyObjectCache.set(e.uuid,i),i}},Rv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},K8={},Wme={get exports(){return K8},set exports(e){K8=e}},x1={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UL;function qme(){if(UL)return x1;UL=1;var e=vo,t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,n=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(o,l,h){var c,u={},d=null,p=null;h!==void 0&&(d=""+h),l.key!==void 0&&(d=""+l.key),l.ref!==void 0&&(p=l.ref);for(c in l)i.call(l,c)&&!s.hasOwnProperty(c)&&(u[c]=l[c]);if(o&&o.defaultProps)for(c in l=o.defaultProps,l)u[c]===void 0&&(u[c]=l[c]);return{$$typeof:t,type:o,key:d,ref:p,props:u,_owner:n.current}}return x1.Fragment=r,x1.jsx=a,x1.jsxs=a,x1}(function(e){e.exports=qme()})(Wme);const $8=K8.jsx;var Xme="Expected a function",jL=0/0,Yme="[object Symbol]",Qme=/^\s+|\s+$/g,Zme=/^[-+]0x[0-9a-f]+$/i,Kme=/^0b[01]+$/i,$me=/^0o[0-7]+$/i,Jme=parseInt,ege=typeof Rv=="object"&&Rv&&Rv.Object===Object&&Rv,tge=typeof self=="object"&&self&&self.Object===Object&&self,rge=ege||tge||Function("return this")(),ige=Object.prototype,nge=ige.toString,sge=Math.max,age=Math.min,Bx=function(){return rge.Date.now()};function oge(e,t,r){var i,n,s,a,o,l,h=0,c=!1,u=!1,d=!0;if(typeof e!="function")throw new TypeError(Xme);t=VL(t)||0,J8(r)&&(c=!!r.leading,u="maxWait"in r,s=u?sge(VL(r.maxWait)||0,t):s,d="trailing"in r?!!r.trailing:d);function p(b){var S=i,C=n;return i=n=void 0,h=b,a=e.apply(C,S),a}function f(b){return h=b,o=setTimeout(v,t),c?p(b):a}function m(b){var S=b-l,C=b-h,M=t-S;return u?age(M,s-C):M}function g(b){var S=b-l,C=b-h;return l===void 0||S>=t||S<0||u&&C>=s}function v(){var b=Bx();if(g(b))return y(b);o=setTimeout(v,m(b))}function y(b){return o=void 0,d&&i?p(b):(i=n=void 0,a)}function x(){o!==void 0&&clearTimeout(o),h=0,i=l=n=o=void 0}function w(){return o===void 0?a:y(Bx())}function _(){var b=Bx(),S=g(b);if(i=arguments,n=this,l=b,S){if(o===void 0)return f(l);if(u)return o=setTimeout(v,t),p(l)}return o===void 0&&(o=setTimeout(v,t)),a}return _.cancel=x,_.flush=w,_}function J8(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function lge(e){return!!e&&typeof e=="object"}function hge(e){return typeof e=="symbol"||lge(e)&&nge.call(e)==Yme}function VL(e){if(typeof e=="number")return e;if(hge(e))return jL;if(J8(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=J8(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Qme,"");var r=Kme.test(e);return r||$me.test(e)?Jme(e.slice(2),r?2:8):Zme.test(e)?jL:+e}var uge=oge;function cge(e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}const dge=[],pge={width:"100%",height:"100%"},fge=be.forwardRef(function({className:e,children:t,debounceTime:r=300,ignoreDimensions:i=dge,parentSizeStyles:n,enableDebounceLeadingCall:s=!0,resizeObserverPolyfill:a,...o},l){const h=be.useRef(null),c=be.useRef(0),[u,d]=be.useState({width:0,height:0,top:0,left:0}),p=be.useMemo(()=>{const f=Array.isArray(i)?i:[i];return uge(m=>{d(g=>Object.keys(g).filter(v=>g[v]!==m[v]).every(v=>f.includes(v))?g:m)},r,{leading:s})},[r,s,i]);return be.useEffect(()=>{const f=a||window.ResizeObserver,m=new f(g=>{g.forEach(v=>{const{left:y,top:x,width:w,height:_}=(v==null?void 0:v.contentRect)??{};c.current=window.requestAnimationFrame(()=>{p({width:w,height:_,top:x,left:y})})})});return h.current&&m.observe(h.current),()=>{window.cancelAnimationFrame(c.current),m.disconnect(),p.cancel()}},[p,a]),$8("div",{style:{...pge,...n},ref:cge([l,h]),className:e,...o,children:t({...u,ref:h.current,resize:p})})});be.forwardRef(({scene:e,style:t,onMouseDown:r,onMouseUp:i,onMouseHover:n,onKeyDown:s,onKeyUp:a,onStart:o,onLookAt:l,onFollow:h,onWheel:c,onLoad:u,renderOnDemand:d=!0,...p},f)=>{const m=be.useRef(null),[g,v]=be.useState(!0);return be.useEffect(()=>{v(!0);let y;const x=[{name:"mouseDown",cb:r},{name:"mouseUp",cb:i},{name:"mouseHover",cb:n},{name:"keyDown",cb:s},{name:"keyUp",cb:a},{name:"start",cb:o},{name:"lookAt",cb:l},{name:"follow",cb:h},{name:"scroll",cb:c}];if(m.current){y=new Hme(m.current,{renderOnDemand:d});async function w(){await y.load(e);for(let _ of x)_.cb&&y.addEventListener(_.name,_.cb);v(!1),u==null||u(y)}w()}return()=>{for(let w of x)w.cb&&y.removeEventListener(w.name,w.cb);y.dispose()}},[e]),$8(fge,{ref:f,parentSizeStyles:t,debounceTime:50,...p,children:()=>$8("canvas",{ref:m,style:{display:g?"none":"block"}})})});vw.registerPlugin(rR);const mge=()=>{var a;const e=be.useRef(null),[t,r]=be.useState((a=e.current)==null?void 0:a.offsetWidth);be.useEffect(()=>{var l;r((l=e.current)==null?void 0:l.offsetWidth);const o=()=>{var h;r((h=e.current)==null?void 0:h.offsetWidth)};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[e]);const[i,n]=be.useState(0),s=[{icon:"/star-dynamic-color.png",title:"Our Vision",body:"Dan Murdoch Risk Services will be the preferred company of choice for online intelligence, investigative consultancy, brand protection and business intelligence advice worldwide offering beneficial solutions for all corporate and personal problems."},{icon:"/target-dynamic-color.png",title:"Our Mission Statement",body:"Dan Murdoch Risk Services will offer and deliver to the corporate world and the general public a complete range of business services from intelligence strategies and a true investigative consultancy to proactive solutions and risk management strategies for internal and external problems facing companies and individuals worldwide."}];return R.jsxs("div",{className:"z-10 grid self-start w-full grid-cols-1 gap-10 laptop:grid-cols-2",children:[R.jsxs("div",{className:"relative flex items-center justify-center flex-1",children:[R.jsx("div",{className:"opacity-40 absolute scale-110 inset-0 w-full h-full translate-x-[-9%] translate-y-[-35%] laptop:translate-y-[-200%] laptop:translate-x-[-20%] hd:translate-y-[-34%] hd:translate-x-[-1%] z-0",children:R.jsx(KH,{})}),i==0?R.jsx(yge,{}):R.jsx(vge,{})]}),R.jsxs("div",{className:"flex flex-col flex-1",children:[R.jsxs("div",{className:"relative grid grid-cols-2",children:[R.jsx("div",{className:"absolute bg-primary-300 left-0 top-0 h-full transition-transform duration-500",style:{minWidth:`${t}px`,transform:`translateX(${t*i+1}px)`}}),R.jsxs("div",{onClick:()=>n(0),ref:e,className:`z-10 tablet:text-base hd:text-lg flex items-center justify-center flex-1 gap-2 px-5 py-2 hd:py-6 cursor-pointer transition-[color filter] delay-100 duration-500 ${i==0?"text-white":"text-background-dark/70 grayscale"}`,children:[R.jsx(iR,{}),R.jsx("p",{children:"Vision"})]}),R.jsxs("div",{onClick:()=>n(1),className:`z-10 tablet:text-base hd:text-lg flex items-center justify-center flex-1 gap-2 px-5 py-2 hd:py-6 cursor-pointer transition-[color filter] delay-100 duration-500 ${i==1?"text-white":"text-background-dark/70 grayscale"}`,children:[R.jsx(nR,{}),R.jsx("p",{children:"Mission"})]})]}),R.jsx(gge,{content:s[i]})]})]})},gge=({content:e,...t})=>{const{body:r}=e,{className:i}=t;return R.jsx("div",{className:`flex flex-col py-10 gap-3 ${i} tablet:px-5 tablet:self-center desktop:w-full`,children:R.jsx("p",{className:"text-xs text-justify tablet:text-sm hd:text-md",children:r})})},vge=()=>R.jsxs("div",{className:"z-10 flex flex-col items-center self-center justify-center gap-3 text-lg font-bold laptop:text-xl laptop:flex-row laptop:gap-5 hd:text-3xl text-background-dark",children:[R.jsx(nR,{}),R.jsx("div",{className:"flex flex-col",children:R.jsxs("h2",{className:"text-center laptop:flex laptop:text-left laptop:flex-col",children:["Our ",R.jsx("span",{className:"text-primary-300",children:"Mission"}),R.jsx("span",{className:"text-primary-300",children:"Statement"})]})})]}),yge=()=>R.jsxs("div",{className:"flex flex-col items-center self-center gap-3 text-lg font-bold laptop:text-xl laptop:flex-row laptop:gap-5 hd:text-3xl text-background-dark",children:[R.jsx(iR,{}),R.jsxs("h2",{className:"text-center laptop:flex laptop:text-left laptop:flex-col",children:["Our ",R.jsx("span",{className:"text-primary-300",children:"Vision"})]})]});vw.registerPlugin(Nt);const xge=()=>{be.useRef(null),be.useRef(null);const e=new Array(28),t=be.useRef([]);function r(i){i.classList.contains("active")||!i||(i.classList.add("fill"),setTimeout(()=>{i.classList.remove("fill")},Math.random()*2*5e3))}return be.useEffect(()=>{const i=setInterval(()=>{const n=t.current[Math.floor(Math.random()*25)];r(n)},5e3);return()=>clearInterval(i)},[]),R.jsxs("div",{className:"flex flex-col w-full bg-white overflow-clip",children:[R.jsx(J9,{children:R.jsx("div",{className:"absolute top-0 left-0 w-full h-full",children:R.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center w-full h-full",children:[R.jsx("div",{className:"absolute w-full h-full bg-gradient-radial from-background-dark/20 to-background-dark z-[2]"}),R.jsx("div",{className:"absolute top-0 left-0 grid w-full h-full grid-cols-7 z-[1] ",children:e.fill(null).map((i,n)=>R.jsx("div",{ref:s=>t.current[n]=s,className:"block border border-background-light/5"},n))}),R.jsxs("div",{className:"z-10 flex flex-col items-center justify-center w-full gap-10 px-10 text-white",children:[R.jsx("div",{className:"flex flex-col items-center justify-center",children:R.jsx("h1",{className:"z-10 text-center text-md tablet:text-lg laptop:text-xl hd:text-3xl",children:"Dan Murdoch Risk Services"})}),R.jsxs("div",{className:"flex flex-col items-center gap-3",children:[R.jsxs("div",{className:"flex flex-col items-center justify-center gap-1",children:[R.jsx("p",{className:"z-10 text-xs laptop:text-sm hd:text-lg",children:"Providing Global Corporations with"}),R.jsx(lH,{})]}),R.jsxs("div",{className:"flex gap-3",children:[R.jsx(S1,{to:"contact",children:R.jsx(Sa,{variant:"default",size:"xs",className:"w-fit",children:"Get Started"})}),R.jsx(Sa,{variant:"outline",size:"xs",className:"w-fit",children:"Our Services"})]})]})]})]})})}),R.jsxs("section",{className:"flex flex-col gap-16 p-5 py-10 overflow-clip laptop:flex-row navTrigger",children:[R.jsxs("div",{className:"flex flex-col items-center justify-center gap-1 laptop:sticky laptop:flex-1 laptop:top-16 laptop:max-h-[calc(100vh-4rem)]",children:[R.jsx("h2",{className:"text-lg font-bold text-center desktop:text-xl hd:text-3xl",children:"WHO ARE WE?"}),R.jsxs("p",{className:"text-sm text-center desktop:text-base hd:text-md",children:["Discover who we are and be part of our ",R.jsx("span",{className:"font-bold text-accent-500",children:"JOURNEY"})]})]}),R.jsxs("div",{className:"flex flex-col flex-1 gap-16",children:[R.jsx(C4,{children:R.jsxs("div",{className:"relative flex flex-col justify-center h-full",children:[R.jsx("img",{src:"./images/australia-map.png",alt:"",className:"absolute top-[-25%] right-[-25%] h-full brightness-90 tablet:right-0 tablet:h-[15rem]"}),R.jsxs("div",{className:"z-10 flex flex-col justify-center h-full gap-5",children:[R.jsxs("h2",{className:"text-xl font-bold desktop:text-2xl hd:text-3xl",children:["DMRS ",R.jsx("span",{className:"text-primary-300",children:"Australia"})]}),R.jsx("p",{className:"text-xs desktop:text-sm hd:text-md",children:"Dan Murdoch Risk Services (Australia) Pty Ltd is the parent company of our operational division Dan Murdoch Risk Services (Thailand) Limited."}),R.jsx(Sa,{size:"xs",variant:"default",className:" w-fit !bg-accent-400 !ring-accent-400 text-white",children:R.jsx(S1,{to:"/dmrs-fe/dmrs/australia",children:"Go to DMRS Australia"})})]})]})}),R.jsx(C4,{children:R.jsxs("div",{className:"relative flex flex-col justify-center h-full",children:[R.jsx("img",{src:"./images/thailand-map.png",alt:"",className:"absolute top-[-10%] right-[-25%] h-full brightness-90 tablet:right-5 tablet:h-[20rem]"}),R.jsxs("div",{className:"z-10 flex flex-col justify-center h-full gap-5",children:[R.jsxs("h2",{className:"text-xl font-bold desktop:text-2xl",children:["DMRS ",R.jsx("span",{className:"text-primary-300",children:"Thailand"})]}),R.jsx("p",{className:"text-xs desktop:text-sm hd:text-md",children:"Dan Murdoch Risk Services (Thailand) Co. Ltd. staff are trained detectives and intelligence analysts who use both objective and subjective thinking to gather manual online data leading to intelligence for many Fortune 500 companies worldwide."}),R.jsx(Sa,{size:"xs",variant:"default",className:" w-fit !bg-accent-400 !ring-accent-400 !text-white",children:R.jsx(S1,{to:"/dmrs-fe/dmrs/thailand",children:"Go to DMRS Thailand"})})]})]})}),R.jsx(C4,{children:R.jsxs("div",{className:"relative flex flex-col justify-center h-full gap-5 max-w-[1080px]",children:[R.jsx("h2",{className:"relative text-lg font-bold text-primary-300 desktop:text-2xl",children:"Specialization"}),R.jsx("p",{className:"text-xs desktop:text-sm hd:text-md",children:"We specialize in pharmaceuticals and the protection of and identifying risks associated with medicines worldwide."}),R.jsx(Sa,{size:"xs",variant:"default",className:" w-fit bg-accent-400 ring-accent-400",children:R.jsx(S1,{to:"/dmrs-fe",children:"Get Started"})})]})})]})]}),R.jsxs("section",{className:"relative flex p-5 py-10 z-[1]",children:[R.jsx("div",{className:"absolute top-0 left-0 flex w-full h-full",children:R.jsxs("div",{className:"relative w-full h-full",children:[R.jsx("div",{className:"absolute left-0 grid w-3/4 h-full grid-cols-7",children:R.jsx(s7,{cellCount:35,cellClass:"border border-background-dark/5"})}),R.jsx("div",{className:"absolute left-0 w-3/4 h-full bg-gradient-radial from-transparent via-white to-white"})]})}),R.jsx(mge,{})]}),R.jsxs("section",{className:"relative flex flex-col gap-10 p-5 py-10 laptop:flex-row",children:[R.jsx("div",{className:"absolute top-0 left-0 flex w-full h-full",children:R.jsxs("div",{className:"relative w-full h-full",children:[R.jsx("div",{className:"absolute right-0 grid w-3/4 h-full grid-cols-7",children:R.jsx(s7,{cellCount:35,cellClass:"border border-background-dark/5"})}),R.jsx("div",{className:"absolute right-0 w-3/4 h-full bg-gradient-radial from-transparent to-white"})]})}),R.jsxs("div",{className:"z-10 flex flex-col items-center gap-8 laptop:w-[45%]",children:[R.jsxs("div",{className:"flex flex-col items-center hd:flex-row hd:gap-5",children:[R.jsx("img",{src:"./images/sheild-dynamic-color.png",className:"w-1/4",alt:""}),R.jsxs("h2",{className:"text-lg font-bold text-center hd:text-2xl hd:text-left",children:[" What are ",R.jsx("span",{className:"text-primary-300",children:"we"})," offering?"]})]}),R.jsxs("div",{className:"flex flex-col gap-3 text-xs tablet:text-sm tablet:w-3/4 laptop:w-full laptop:px-5 laptop:gap-5 hd:text-base hd:gap-10",children:[R.jsxs("p",{className:"text-justify",children:["The services DMRS offers fall into three broad areas, labeled as ",R.jsx("strong",{children:"Intelligence"}),", ",R.jsx("strong",{children:"Investigations"}),", and ",R.jsx("strong",{children:"Research"}),"."]}),R.jsx("p",{className:"text-justify",children:"While our geographical areas of operation are Asia-wide and Australia we conduct intelligence monitoring and investigations worldwide using our own staff and trusted associates."})]})]}),R.jsx(dH,{})]})]})},wge="/dmrs-fe/assets/Australia-dots-48b458e2.png",bge="/dmrs-fe/assets/intelligence-investigations-3ba127d3.png",_ge="/dmrs-fe/assets/dmrs-australia-1-456e3b8f.jpg",Cge="/dmrs-fe/assets/intelligent-intelligence-icon-3053ae2c.png",Sge="/dmrs-fe/assets/intelligent-investigations-mb-987b61d2.png",Mge=()=>{const e=new Array(28),t=be.useRef([]);function r(i){i.classList.contains("active")||!i||(i.classList.add("fill"),setTimeout(()=>{i.classList.remove("fill")},Math.random()*2*5e3))}return be.useEffect(()=>{const i=setInterval(()=>{const n=t.current[Math.floor(Math.random()*25)];r(n)},5e3);return()=>clearInterval(i)},[]),R.jsxs("div",{className:"flex flex-col w-full bg-white",children:[R.jsx("div",{className:"tablet:z-10",children:R.jsx(J9,{children:R.jsxs("div",{className:"relative flex flex-col items-center justify-center w-full gap-3 text-white",children:[R.jsx("div",{className:"absolute -top-20 w-full h-screen bg-gradient-radial from-background-dark/20 to-background-dark z-[2]"}),R.jsx("div",{className:"absolute -top-20 left-0 grid w-full h-screen grid-cols-7 z-[1] ",children:e.fill(null).map((i,n)=>R.jsx("div",{ref:s=>t.current[n]=s,className:"block border border-background-light/5"},n))}),R.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[R.jsx("h1",{className:"z-10 text-3xl font-bold text-center",children:"DMRS Australia"}),R.jsx(Sa,{variant:"outline",size:"sm",className:"z-10",children:"Services"})]})]})})}),R.jsxs("section",{className:"relative navTrigger tablet:z-12",children:[R.jsxs("div",{className:"flex flex-col h-full w-full items-center p-10 gap-12 tablet:p-16 tablet:flex-row laptop:min-h-[768px] laptop:h-full laptop:gap-24 laptop:p-20 ",children:[R.jsx("div",{className:"max-h-[350px] flex w-full tablet:z-10 tablet:w-full tablet:max-h-[500px]",children:R.jsx("img",{src:_ge,alt:"",className:"object-cover cover rounded-tl-[3.12rem] rounded-br-[3.12rem]"})}),R.jsxs("div",{className:"flex flex-col w-full gap-10 tablet:z-10 tablet:w-full",children:[R.jsxs("div",{children:[R.jsx("p",{className:"font-bold text-md text-bg-dark laptop:text-xl ",children:"Dan Murdoch Risk Services"}),R.jsx("p",{className:"text-lg font-bold text-primary-300 laptop:text-2xl",children:"Australia"})]}),R.jsxs("p",{className:"max-w-lg text-xs text-bg-dark tablet:z-10 tablet:text-sm",children:[R.jsx("strong",{className:"text-accent-800",children:"DMRS "}),R.jsx("strong",{className:"text-primary-400",children:"Australia "}),"Pty Ltd is the parent company for the operational division Dan Murdoch Risk Services (Thailand) Co. Limited."]})]})]}),R.jsx("img",{src:wge,alt:"",className:"hidden tablet:absolute tablet:top-0 tablet:bottom-0 tablet:right-0 tablet:w-auto tablet:m-auto tablet:min-h-[600px] tablet:max-h-[850px] tablet:z-0 tablet:block"})]}),R.jsx("section",{className:"relative tablet:z-10",children:R.jsx("div",{className:"flex h-full w-full items-center gap-[6rem] p-7 tablet:p-20",children:R.jsxs("div",{className:"flex flex-col tablet:flex-row tablet:p-10 laptop:p-20 justify-center items-center w-full max-h-[450px] p-10 gap-2 mobile:gap-5 rounded-[3.12rem] bg-black",children:[R.jsx("img",{src:Cge,alt:"",className:"object-contain w-1/4"}),R.jsxs("div",{className:"flex flex-col justify-center text-center tablet:text-left",children:[R.jsx("p",{className:"text-sm tablet:text-md laptop:text-lg ",children:R.jsx("strong",{className:"text-primary-300",children:"Intelligent Intelligence"})}),R.jsx("p",{className:"text-sm tablet:text-md laptop:text-lg text-accent-50 ",children:R.jsx("strong",{children:"leads to thoughtful investigations and evidence-filled undercover operations resulting in a safer pharmaceutical environment globally."})})]})]})})}),R.jsx("section",{className:"",children:R.jsxs("div",{className:"flex flex-col h-full laptop:h-[95vh] laptop:min-h-[740px] laptop:min-w-[450px]",children:[R.jsxs("div",{className:"flex flex-col justify-center w-full gap-5 px-10 pt-10 pb-5 laptop:px-20 laptop:pt-20 laptop:pb-10",children:[R.jsx("p",{className:"text-lg font-bold text-center uppercase laptop:text-xl text-bg-dark ",children:"Who are Dan Murdoch Risk Services?"}),R.jsxs("p",{className:"self-center max-w-5xl tablet:min-w-[565px] text-center text-xs text-bg-dark tablet:text-sm",children:[R.jsx("strong",{className:"text-accent-800",children:"DMRS "}),R.jsx("strong",{className:"text-primary-400",children:"Australia "}),"Pty Ltd Pty Ltd operates all services offered under the banners of DMRS, Dan Murdoch Risk Services, Your Intelligence Program, and DMRS VPN."]})]}),R.jsx("div",{className:"flex w-full min-h-[450px] tablet:h-full",children:R.jsx("div",{className:"flex flex-col items-center justify-center w-full bg-no-repeat bg-bottom bg-cover bg-[url('assets/IntelligentIntelligence.png')]"})})]})}),R.jsx("section",{children:R.jsxs("div",{className:"flex flex-col-reverse items-center w-full tablet:min-h-[200px] h-full tablet:flex-row",children:[R.jsxs("div",{className:"flex flex-col items-center w-auto h-full gap-5 p-10 mr-5 tablet:mr-0 laptop:p-20 laptop:pr-5 tablet:items-start",children:[R.jsx("p",{className:"font-bold text-center uppercase laptop:text-2xl text-md tablet:text-lg tablet:text-left text-bg-dark ",children:"Intelligence Investigations"}),R.jsx(Sa,{variant:"default",size:"sm",children:"See Brochure"})]}),R.jsxs("div",{className:"flex flex-col w-auto h-full laptop:h-full",children:[R.jsx("img",{src:bge,alt:"",className:"hidden w-full h-full tablet:block"}),R.jsx("img",{src:Sge,alt:"",className:"w-full tablet:hidden"})]})]})})]})},Age=({title:e,description:t})=>R.jsxs("div",{className:"flex flex-col gap-2 py-6 mobile:gap-2",children:[R.jsx("h2",{className:"text-sm font-bold text-accent-500",children:e}),R.jsx("p",{className:"text-xs text-background-dark",children:t})]}),Ege=({name:e,icon:t,subContents:r})=>{const[i,n]=be.useState(!1);return R.jsxs("div",{className:`relative overflow-hidden ${i?"pb-10  duration-0 scale-105":"hover:scale-105 hover:fill-accent-300"} flex flex-col text-sm gap-2 w-full border-2 ring-offset-2 bg-white border-white ring-1 ring-background-dark fill-accent-50 justify-center items-start pl-2 px-8 aspect-video ease-in-out duration-300 hover:text-accent-600 mobile:pl-4 mobile:text-md tablet:pl-4 laptop:pl-8 desktop:pl-8 desktop:text-md`,children:[R.jsx("div",{className:`flex w-full h-full z-10 ${i?"items-start overflow-y-auto flex-col":"items-center"}`,children:i?r.map((s,a)=>R.jsx(Age,{title:s.title,description:s.description},a)):e}),R.jsx("span",{className:`absolute top-16 -right-[10%] z-0 ${i?"opacity-100 scale-125 ease-in-out duration-200":"opacity-100"} -top-[20%] -right-[30%] scale-[0.7] mobile:scale-[0.7] mobile:-right-[20%] mobile:top-[0%] tablet:top-0 tablet:-right-[30%] laptop:scale-[0.8] laptop:-right-[4rem] laptop:top-[20%]`,children:t}),R.jsx("span",{className:"absolute z-20  text-xs cursor-pointer bottom-4 left-2 mobile:text-sm mobile:left-4 laptop:text-sm laptop:left-8 ",children:R.jsx("button",{onClick:()=>{n(s=>!s)},children:i?"Click to Hide <":"Click to Show >"})})]})},Tge=({children:e,content:t,parentHover:r,active:i,handleSelectActive:n,className:s=null})=>R.jsxs("div",{onClick:()=>n(t),className:`hover:pl-7 hover:grayscale-0 hover:opacity-100 hover:text-primary-300 hover:bg-black/5 text-background-dark flex flex-col px-4 py-4 cursor-pointer transition-all duration-500 ${i?"pl-7 border-accent-400 text-accent-400":r?"grayscale text-background-dark opacity-50":"grayscale-0 text-background-dark opacity-100 border-black/20 "}`,children:[R.jsxs("div",{className:"flex items-center justify-between w-full",children:[R.jsx("h2",{className:`transition-[font-size] ${i?"text-base text-accent-400 font-medium":""}`,children:t.name}),R.jsx(VI,{size:32,className:`transition-[transform] duration-700 ease-in-out ${i?"rotate-[90deg] text-accent-400":"rotate-0"}`})]}),R.jsx("div",{className:`overflow-hidden text-sm duration-1000 text-background-dark transition-[max-height] ease-in-out ${i?"max-h-[50rem]":"max-h-0"}`,children:t.content})]}),Lge=()=>{const e=[{name:"Office 365 SharePoint Development",content:"Experts in the setup and management of cloud computer services for law enforcement and private companies such as Office 365 together with SharePoint administration and management."},{name:"Anonymous Domain Name Registration",content:"Registration of anonymous domain names for our clients, law enforcement, security and investigation consultants worldwide."},{name:"Anonymous Website Hosting",content:"Hosting of pretext and websites anonymously only for our clients and industry personnel."},{name:"Covert Pretext Setups for Police and Investigative services worldwide.",content:"Setup of a complete pretext facility such as pretext website construction, hosting, business address and location services."},{name:"Covert Website Design",content:"Design and building a website to your required specifications."},{name:"Anonymous VPN and high end Proxy facility",content:"Login to our servers from any country by any device including iPhone, ipad other mobile devices and laptops. Traveling to such countries as China, Middle Eastern countries using the VPN service gives you secure access to all your data and online internet content without restriction."}],[t,r]=be.useState(!1),[i,n]=be.useState(e[0]),s=a=>{if(a.name===i.name)return;const o=e.findIndex(l=>l.name==a.name);n(e[o])};return R.jsx("div",{className:"z-10 flex-[1]",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:R.jsx("div",{className:"flex flex-col",children:e.map((a,o)=>R.jsx(Tge,{content:a,parentHover:t,active:a.name==(i==null?void 0:i.name),handleSelectActive:s},o))})})},Pge=()=>{let e="300";const t=new Array(28),r=be.useRef([]);function i(s){s.classList.contains("active")||!s||(s.classList.add("fill"),setTimeout(()=>{s.classList.remove("fill")},Math.random()*2*5e3))}be.useEffect(()=>{const s=setInterval(()=>{const a=r.current[Math.floor(Math.random()*25)];i(a)},5e3);return()=>clearInterval(s)},[]);const n=[{name:"Intelligence",icon:R.jsx(YH,{width:e,height:e}),subContent:[{title:"Online Intelligence Data Collection and Analysis",description:"Unique manual online intelligence monitoring service. Intelligent intelligence protecting your products and company online. All data collected is secured and displayed within a SharePoint environment for access 24/7 with corporate visual presentations linked to the raw data collected."},{title:"Intellectual Property Protection",description:"Many global Fortune 500 companies leave their trademark, copyright and intellectual property protection in our hands. Many companies in the worldwide pharmaceutical marketplace trust us to protect them with our hands-on manual intelligence and investigative consultancy."}]},{name:"Research",icon:R.jsx(QH,{width:e,height:e}),subContent:[{title:"Business Intelligence and Research",description:"Background checks within the geographical area of your concern involving in-depth overt and covert research being conducted resulting in fact driven reporting you can rely on."}]},{name:"Investigations",icon:R.jsx(ZH,{width:e,height:e}),subContent:[{title:"Online Investigations",description:'Dan Murdoch Risk Services has set the "industry standard" in online investigations conducting research and pretext engagement leading to undercover investigations and evidence collection on a global footing.'}]}];return R.jsxs("div",{className:"flex flex-col items-center justify-center w-full bg-white overflow-clip",children:[R.jsx(J9,{children:R.jsx("div",{className:"relative z-10 flex flex-col justify-center w-full px-6 text-white",children:R.jsxs("div",{className:"flex flex-col items-center justify-center gap-8 desktop:gap-4",children:[R.jsx("div",{className:"absolute -top-20 w-full h-screen bg-gradient-radial from-background-dark/20 to-background-dark z-[2]"}),R.jsx("div",{className:"absolute -top-20 left-0 grid w-full h-screen grid-cols-7 z-[1] ",children:t.fill(null).map((s,a)=>R.jsx("div",{ref:o=>r.current[a]=o,className:"block border border-background-light/5"},a))}),R.jsx("h1",{className:"z-10 text-xl font-bold mobile:text-center mobile:text-3xl tablet:text-center tablet:text-3xl",children:"DMRS Thailand"}),R.jsx(Sa,{variant:"outline",size:"sm",className:"w-full mobile:fit tablet:w-fit z-10",children:"Services"})]})})}),R.jsx("section",{className:"navTrigger",children:R.jsxs("div",{className:"relative flex flex-col w-full gap-6 px-6 py-8 h-fit mobile:py-10 mobile:px-12 mobile:h-fit mobile:flex-col tablet:items-center tablet:px-12 tablet:flex-row laptop:p-20 laptop:gap-24 desktop:gap-20 desktop:px-24",children:[R.jsx("div",{className:"flex w-full h-[300px] bg-gray-200 rounded-tl-[2rem] rounded-br-[2rem] tablet:h-[calc((3/5)*100vh)] tablet:w-1/2 laptop:w-1/2 tablet:rounded-tl-[4rem] tablet:rounded-br-[4rem]"}),R.jsx("img",{src:"/images/thailand-map.png",alt:"",className:"absolute opacity-50 h-full brightness-90 z-0 top-0 hidden mobile:block laptop:right-[20%]"}),R.jsxs("div",{className:"z-10 flex flex-col justify-center w-full gap-4 mobile:w-full mobile:gap-4 tablet:w-1/2 tablet:gap-10",children:[R.jsxs("h2",{className:"font-bold text-md mobile:text-xl tablet:text-xl",children:["Dan Murdoch Risk Services ",R.jsx("strong",{className:"font-bold text-primary-300",children:"Thailand."})]}),R.jsxs("div",{className:"flex flex-col gap-4 text-xs mobile:text-sm laptop:text-sm",children:[R.jsxs("p",{children:[R.jsx("strong",{className:"text-accent-500",children:"DMRS"})," ",R.jsx("strong",{className:"text-primary-300",children:"Thailand"})," Co. Limited is based in Thailand with staff also in the Philippines, Australia, Hong Kong and China with trusted and verified agents in many global locations."]}),R.jsxs("p",{children:["DMRS staff are ",R.jsx("strong",{children:"trained detectives"})," and ",R.jsx("strong",{children:"intelligence analysts"})," who use both objective and subjective thinking to ",R.jsx("strong",{children:"gather online data and intelligence"})," for many Fortune 500 companies worldwide."]}),R.jsxs("p",{children:["Our facilities also offer ",R.jsx("strong",{children:"premier and innovative investigative consultancy"})," in all areas of corporate and personal requirements. DMRS is proud to be focused on the  ",R.jsx("strong",{children:"protection of patients globally"})," through our identification of risks concerned with the illicit trade in counterfeit, sub-standard and suspect medicines together with all associated risks to corporations tasked with the protection of consumers worldwide."]})]})]})]})}),R.jsxs("section",{className:"relative flex items-center w-full h-full px-6 pb-20 overflow-hidden align-middle mobile:px-6 tablet:px-12 tablet:mt-10 laptop:gap-10 desktop:px-[4.5rem]",children:[R.jsxs("div",{className:"flex flex-col justify-start w-full gap-6 h-fit",children:[R.jsxs("div",{className:"flex flex-col items-start gap-2 mobile:pl-6 tablet:pl-6 laptop:pl-12 desktop:pl-[4.5rem]",children:[R.jsx("h2",{className:"z-10 font-bold text-md mobile:text-xl laptop:text-xl",children:"Services"}),R.jsxs("p",{className:"z-10 text-xs mobile:text-sm laptop:text-sm",children:["The services DMRS offers fall into three categories ",R.jsx("strong",{children:"INTELLIGENCE"}),", ",R.jsx("strong",{children:"INVESTIGATIONS"})," and ",R.jsx("strong",{children:"RESEARCH"}),"."]})]}),R.jsx("div",{className:"flex flex-row items-start justify-start h-fit mobile:px-6 tablet:px-6 laptop:px-12 desktop:px-[4.5rem]",children:R.jsx("div",{className:"z-10 flex flex-col w-full gap-8 fill-black hover:text-secondary-200 hover:fill-secondary-200 mobile:flex mobile:flex-col tablet:grid tablet:justify-center tablet:grid-cols-2 tablet:flex-col laptop:grid-cols-2 desktop:grid-cols-3",children:n.map((s,a)=>R.jsx(Ege,{name:s.name,icon:s.icon,subContents:s.subContent},a))})})]}),R.jsx("div",{className:"absolute left-0 grid w-full h-screen grid-cols-5 rounded-full -top-10 desktop:grid-cols-8",children:R.jsx(s7,{cellCount:40,cellClass:"border border-background-dark/5"})})]}),R.jsx("section",{className:"flex flex-col items-center justify-center w-full h-full gap-10 px-6 mb-10 tablet:px-12 desktop:px-[4.5rem]",children:R.jsxs("div",{className:"flex flex-col items-start gap-2 mobile:pl-5 tablet:pl-5 laptop:pl-10 desktop:pl-[4.5rem]",children:[R.jsx("h2",{className:"z-10 font-bold text-md mobile:text-xl laptop:text-xl",children:"Other Services"}),R.jsx("p",{className:"z-10 text-xs mobile:text-sm laptop:text-sm",children:"However, as an additional service to our partners, we offer further unique capabilities such as -"}),R.jsx(Lge,{})]})})]})},Dge=()=>{const e=i=>{const n=i.target.name;r(s=>({...s,[n]:i.target.value}))},[t,r]=be.useState({name:"",email:"",message:""});return R.jsxs("div",{className:"flex flex-col navTrigger",children:[R.jsxs("div",{className:"flex min-h-[90vh] pt-20 bg-white",children:[R.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 px-20",children:[R.jsxs("h2",{className:"self-start text-2xl font-bold uppercase",children:["Contact ",R.jsx("span",{className:"text-primary-300",children:"Us"})]}),R.jsx("p",{className:"text-sm",children:"If you would like to get in touch with us via email, you can use the contact form. Simply fill in your details and your message, and we'll respond as soon as possible."})]}),R.jsxs("form",{className:"flex flex-col self-center flex-1 gap-3 px-20",children:[R.jsx(rp,{className:"!ring-background-dark",label:"Name",name:"name",placeholder:"Enter your name",onInput:e,value:t.name}),R.jsx(rp,{className:"!ring-background-dark",label:"Email Address",name:"email",placeholder:"Enter your email address",onInput:e,value:t.email}),R.jsx(rp,{className:"!ring-background-dark",label:"Message",name:"message",placeholder:"Leave us a message!",onInput:e,value:t.message}),R.jsx(Sa,{size:"sm",variant:"outline",children:R.jsx("a",{href:"mailto:test@gmail.com",children:"Send us a message!"})})]})]}),R.jsxs("div",{className:"relative flex items-center justify-center w-full",children:[R.jsx("h2",{className:"absolute text-lg bg-transparent",children:"Our Locations"}),R.jsx("p",{className:"absolute bottom-10 left-10 w-[35%] bg-transparent",children:"Other locations by our verified trusted partners in the global three regions the Americas, EMEA and Asia."}),R.jsx("img",{src:"./images/contact-us-map.png",alt:"",className:"w-full"})]})]})},Oge=xV(I6(R.jsxs(pd,{path:"/dmrs-fe",element:R.jsx(PV,{}),children:[R.jsx(pd,{index:!0,element:R.jsx(xge,{})}),R.jsx(pd,{path:"dmrs/thailand",element:R.jsx(Pge,{})}),R.jsx(pd,{path:"dmrs/australia",element:R.jsx(Mge,{})}),R.jsx(pd,{path:"contact",element:R.jsx(Dge,{})})]}))),Ige=()=>R.jsx(uV,{router:Oge});zx.createRoot(document.getElementById("root")).render(R.jsx(vo.StrictMode,{children:R.jsx(Ige,{})}))});export default Rge();
